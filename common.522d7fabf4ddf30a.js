(self.webpackChunkspear=self.webpackChunkspear||[]).push([[592],{2940:(v,a,n)=>{n.d(a,{R:()=>e});var u=n(4482),_=n(7359);function e(t,i){return(0,u.e)((0,_.U)(t,i,arguments.length>=2,!0))}},7359:(v,a,n)=>{n.d(a,{U:()=>_});var u=n(5403);function _(e,t,i,c,f){return function(d,m){var P=i,g=t,h=0;d.subscribe((0,u.x)(m,function(C){var E=h++;g=P?e(g,C,E):(P=!0,C),c&&m.next(g)},f&&function(){P&&m.next(g),m.complete()}))}}},7655:(v,a,n)=>{n.r(a),n.d(a,{CONTENT_PLUGIN:()=>I,ContentBinding:()=>C,ContentInstance:()=>E,ContentModule:()=>g,ContentPlugin:()=>h,ContentPluginEditorOptions:()=>b,ContentPluginManager:()=>O});var u=n(136),_=n(8486),e=n(3144),t=n(5671),i=n(6718),c=n(4055),f=n(8488),d=n(5813),m=n(9646),P=n(8154),g=function(){var r=(0,e.Z)(function o(){(0,t.Z)(this,o)});return r.\u0275fac=function(s){return new(s||r)},r.\u0275mod=i.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=i.\u0275\u0275defineInjector({imports:[c.CommonModule]}),r}(),h=function(r){(0,u.Z)(s,r);var o=(0,_.Z)(s);function s(l){var p;return(0,t.Z)(this,s),(p=o.call(this,l)).fileTypes=[],l&&(p.name=p.id,p.handler=void 0!==l.handler?l.handler:void 0,p.selectionComponent=l.selectionComponent?l.selectionComponent:void 0,p.renderComponent=l.renderComponent?l.renderComponent:void 0,p.editorComponent=l.editorComponent?l.editorComponent:void 0),p}return(0,e.Z)(s)}(d.Plugin),C=(0,e.Z)(function r(o){(0,t.Z)(this,r),o&&(this.type=o.type,this.id=o.id)}),E=(0,e.Z)(function r(o){(0,t.Z)(this,r),this.settings=[],o&&(this.pluginName=o.pluginName,o.settings&&(this.settings=o.settings.map(function(s){return new f.AttributeValue(s)})))}),b=(0,e.Z)(function r(o){(0,t.Z)(this,r),this.fullscreen=!1,o&&(this.fullscreen=o.fullscreen)}),I=new i.InjectionToken("ContentPlugin"),O=function(){var r=function(o){(0,u.Z)(l,o);var s=(0,_.Z)(l);function l(p,y){return(0,t.Z)(this,l),s.call(this,p,y)}return(0,e.Z)(l,[{key:"pluginDef",value:function(){return(0,m.of)(new d.PluginDef({name:"content"}))}}]),l}(d.BasePluginManager);return r.\u0275fac=function(s){return new(s||r)(i.\u0275\u0275inject(d.PluginConfigurationManager),i.\u0275\u0275inject(P.ModuleLoaderService))},r.\u0275prov=i.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"root"}),r}()},461:(v,a,n)=>{n.r(a),n.d(a,{BasePluginManager:()=>C,ConfigDiscovery:()=>h,Plugin:()=>b,PluginConfig:()=>E,PluginConfigModule:()=>O,PluginConfigurationManager:()=>g,PluginDef:()=>I,PluginModule:()=>P});var u=n(4902),_=n(3144),e=n(5671),t=n(6718),i=n(8154),c=n(9646),f=n(4128),d=n(4004),m=n(3900),P=function(){var r=(0,_.Z)(function o(){(0,e.Z)(this,o)});return r.\u0275fac=function(s){return new(s||r)},r.\u0275mod=t.\u0275\u0275defineNgModule({type:r}),r.\u0275inj=t.\u0275\u0275defineInjector({imports:[i.UtilsModule]}),r}(),g=function(){var r=function(){function o(){(0,e.Z)(this,o),this.configs=[]}return(0,_.Z)(o,[{key:"addConfig",value:function(l){this.configs.push(l)}},{key:"getConfigs",value:function(){return this.configs}}]),o}();return r.\u0275fac=function(s){return new(s||r)},r.\u0275prov=t.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"root"}),r}(),h=function(){var r=function(){function o(s,l){(0,e.Z)(this,o),this.pcm=s,this.moduleLoader=l}return(0,_.Z)(o,[{key:"loadPlugins",value:function(l){for(var p=this,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],M=this.pcm.getConfigs(),j=M.length,Z=[],R=function(D){for(var B=M[D].modules.length,L=function(A){M[D].modules[A].plugins.has(l.name)&&(0===y.length||y.some(function(U){return M[D].modules[A].plugins.get(l.name).findIndex(function(k){return k===U})>-1}))&&Z.push(p.moduleLoader.loadModule(M[D].modules[A].module))},w=0;w<B;w++)L(w)},T=0;T<j;T++)R(T);return 0===Z.length?(0,c.of)(!0):(0,f.D)(Z).pipe((0,d.U)(function(){return!0}))}}]),o}();return r.\u0275fac=function(s){return new(s||r)(t.\u0275\u0275inject(g),t.\u0275\u0275inject(i.ModuleLoaderService))},r.\u0275prov=t.\u0275\u0275defineInjectable({token:r,factory:r.\u0275fac,providedIn:"root"}),r}(),C=function(){function r(o,s){(0,e.Z)(this,r),this.pcm=o,this.moduleLoader=s,this.pluginInstances=new Map,this.discoveryPipeline=[],this.discovery()}return(0,_.Z)(r,[{key:"discovery",value:function(){this.discoveryPipeline.push(new h(this.pcm,this.moduleLoader))}},{key:"addDiscovery",value:function(s){this.discoveryPipeline.push(s)}},{key:"register",value:function(s){this.pluginInstances.set(s.id,s)}},{key:"getPlugins",value:function(s){var l=this,p=s?s.filter(function(y){return!l.pluginInstances.has(y)}):[];return s&&0===p.length?(0,c.of)(new Map(s.map(function(y){return[y,l.pluginInstances.get(y)]}))):this.pluginDef().pipe((0,m.w)(function(y){return(0,f.D)(l.discoveryPipeline.map(function(M){return M.loadPlugins(y,p)})).pipe((0,d.U)(function(){return s?new Map(s.map(function(M){return[M,l.pluginInstances.get(M)]})):l.pluginInstances}))}))}},{key:"getPlugin",value:function(s){var l=this;return this.pluginInstances.has(s)?(0,c.of)(this.pluginInstances.get(s)):this.pluginDef().pipe((0,m.w)(function(p){return(0,f.D)(l.discoveryPipeline.map(function(y){return y.loadPlugins(p,[s])})).pipe((0,d.U)(function(){return l.pluginInstances.get(s)}))}))}}]),r}(),E=(0,_.Z)(function r(o){(0,e.Z)(this,r),this.modules=[],o&&o.modules&&(this.modules=o.modules.map(function(s){return new O(s)}))}),b=(0,_.Z)(function r(o){(0,e.Z)(this,r),o&&(this.id=o.id,this.title=o.title)}),I=(0,_.Z)(function r(o){(0,e.Z)(this,r),o&&(this.name=o.name)}),O=(0,_.Z)(function r(o){(0,e.Z)(this,r),o&&(this.module=o.module,o.plugins&&(this.plugins=new Map((0,u.Z)(o.plugins))))})},907:(v,a,n)=>{function u(_,e){(null==e||e>_.length)&&(e=_.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=_[t];return i}n.d(a,{Z:()=>u})},7326:(v,a,n)=>{function u(_){if(void 0===_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}n.d(a,{Z:()=>u})},5671:(v,a,n)=>{function u(_,e){if(!(_ instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(a,{Z:()=>u})},3144:(v,a,n)=>{n.d(a,{Z:()=>e});var u=n(3997);function _(t,i){for(var c=0;c<i.length;c++){var f=i[c];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(t,(0,u.Z)(f.key),f)}}function e(t,i,c){return i&&_(t.prototype,i),c&&_(t,c),Object.defineProperty(t,"prototype",{writable:!1}),t}},7762:(v,a,n)=>{n.d(a,{Z:()=>_});var u=n(181);function _(e,t){var i=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=(0,u.Z)(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var c=0,f=function(){};return{s:f,n:function(){return c>=e.length?{done:!0}:{done:!1,value:e[c++]}},e:function(h){throw h},f}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var P,d=!0,m=!1;return{s:function(){i=i.call(e)},n:function(){var h=i.next();return d=h.done,h},e:function(h){m=!0,P=h},f:function(){try{!d&&null!=i.return&&i.return()}finally{if(m)throw P}}}}},8486:(v,a,n)=>{n.d(a,{Z:()=>c});var u=n(1120),_=n(8814),e=n(1002),t=n(7326);function c(f){var d=(0,_.Z)();return function(){var g,P=(0,u.Z)(f);if(d){var h=(0,u.Z)(this).constructor;g=Reflect.construct(P,arguments,h)}else g=P.apply(this,arguments);return function i(f,d){if(d&&("object"===(0,e.Z)(d)||"function"==typeof d))return d;if(void 0!==d)throw new TypeError("Derived constructors may only return object or undefined");return(0,t.Z)(f)}(this,g)}}},1120:(v,a,n)=>{function u(_){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(_)}n.d(a,{Z:()=>u})},136:(v,a,n)=>{n.d(a,{Z:()=>_});var u=n(9611);function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,u.Z)(e,t)}},8814:(v,a,n)=>{function u(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}n.d(a,{Z:()=>u})},9611:(v,a,n)=>{function u(_,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,c){return i.__proto__=c,i})(_,e)}n.d(a,{Z:()=>u})},3997:(v,a,n)=>{n.d(a,{Z:()=>e});var u=n(1002);function e(t){var i=function _(t,i){if("object"!==(0,u.Z)(t)||null===t)return t;var c=t[Symbol.toPrimitive];if(void 0!==c){var f=c.call(t,i||"default");if("object"!==(0,u.Z)(f))return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(t)}(t,"string");return"symbol"===(0,u.Z)(i)?i:String(i)}},1002:(v,a,n)=>{function u(_){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(_)}n.d(a,{Z:()=>u})},181:(v,a,n)=>{n.d(a,{Z:()=>_});var u=n(907);function _(e,t){if(e){if("string"==typeof e)return(0,u.Z)(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if("Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return(0,u.Z)(e,t)}}}}]);
(self.webpackChunkspear=self.webpackChunkspear||[]).push([[389],{1147:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.AwsCrc32c=void 0;var I=x(6908),o=x(783),C=x(1180),F=function(){function j(){this.crc32c=new C.Crc32c}return j.prototype.update=function(d){(0,o.isEmptyData)(d)||this.crc32c.update((0,o.convertToBuffer)(d))},j.prototype.digest=function(){return(0,I.__awaiter)(this,void 0,void 0,function(){return(0,I.__generator)(this,function(d){return[2,(0,o.numToUint8)(this.crc32c.digest())]})})},j}();O.AwsCrc32c=F},1180:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.AwsCrc32c=O.Crc32c=O.crc32c=void 0;var I=x(6908),o=x(783);O.crc32c=function C(v){return(new F).update(v).digest()};var F=function(){function v(){this.checksum=4294967295}return v.prototype.update=function(N){var M,L;try{for(var X=(0,I.__values)(N),H=X.next();!H.done;H=X.next())this.checksum=this.checksum>>>8^d[255&(this.checksum^H.value)]}catch(q){M={error:q}}finally{try{H&&!H.done&&(L=X.return)&&L.call(X)}finally{if(M)throw M.error}}return this},v.prototype.digest=function(){return(4294967295^this.checksum)>>>0},v}();O.Crc32c=F;var d=(0,o.uint32ArrayFrom)([0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697]),m=x(1147);Object.defineProperty(O,"AwsCrc32c",{enumerable:!0,get:function(){return m.AwsCrc32c}})},5773:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.convertToBuffer=void 0;var I=x(8995),o="undefined"!=typeof Buffer&&Buffer.from?function(F){return Buffer.from(F,"utf8")}:I.fromUtf8;O.convertToBuffer=function C(F){return F instanceof Uint8Array?F:"string"==typeof F?o(F):ArrayBuffer.isView(F)?new Uint8Array(F.buffer,F.byteOffset,F.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(F)}},783:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.uint32ArrayFrom=O.numToUint8=O.isEmptyData=O.convertToBuffer=void 0;var I=x(5773);Object.defineProperty(O,"convertToBuffer",{enumerable:!0,get:function(){return I.convertToBuffer}});var o=x(3605);Object.defineProperty(O,"isEmptyData",{enumerable:!0,get:function(){return o.isEmptyData}});var C=x(6090);Object.defineProperty(O,"numToUint8",{enumerable:!0,get:function(){return C.numToUint8}});var F=x(3258);Object.defineProperty(O,"uint32ArrayFrom",{enumerable:!0,get:function(){return F.uint32ArrayFrom}})},3605:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.isEmptyData=void 0,O.isEmptyData=function x(I){return"string"==typeof I?0===I.length:0===I.byteLength}},6090:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.numToUint8=void 0,O.numToUint8=function x(I){return new Uint8Array([(4278190080&I)>>24,(16711680&I)>>16,(65280&I)>>8,255&I])}},3258:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.uint32ArrayFrom=void 0,O.uint32ArrayFrom=function x(I){if(!Uint32Array.from){for(var o=new Uint32Array(I.length),C=0;C<I.length;)o[C]=I[C],C+=1;return o}return Uint32Array.from(I)}},6712:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.EMPTY_DATA_SHA_1=O.SHA_1_HMAC_ALGO=O.SHA_1_HASH=void 0,O.SHA_1_HASH={name:"SHA-1"},O.SHA_1_HMAC_ALGO={name:"HMAC",hash:O.SHA_1_HASH},O.EMPTY_DATA_SHA_1=new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9])},2264:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.Sha1=void 0;var I=x(4065),o=x(3648),C=x(7037),F=x(9626),j=x(2521),d=function(){function m(v){if((0,C.supportsWebCrypto)((0,j.locateWindow)()))this.hash=new o.Sha1(v);else{if(!(0,F.isMsWindow)((0,j.locateWindow)()))throw new Error("SHA1 not supported");this.hash=new I.Sha1(v)}}return m.prototype.update=function(v,N){this.hash.update(v,N)},m.prototype.digest=function(){return this.hash.digest()},m}();O.Sha1=d},4065:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.Sha1=void 0;var I=x(8974),o=x(6712),C=x(8995),F=x(2521),j=function(){function v(N){N?(this.operation=function d(v){return new Promise(function(N,M){var L=(0,F.locateWindow)().msCrypto.subtle.importKey("raw",m(v),o.SHA_1_HMAC_ALGO,!1,["sign"]);L.oncomplete=function(){L.result&&N(L.result),M(new Error("ImportKey completed without importing key."))},L.onerror=function(){M(new Error("ImportKey failed to import key."))}})}(N).then(function(M){return(0,F.locateWindow)().msCrypto.subtle.sign(o.SHA_1_HMAC_ALGO,M)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,F.locateWindow)().msCrypto.subtle.digest("SHA-1"))}return v.prototype.update=function(N){var M=this;(0,I.isEmptyData)(N)||(this.operation=this.operation.then(function(L){return L.onerror=function(){M.operation=Promise.reject(new Error("Error encountered updating hash"))},L.process(m(N)),L}),this.operation.catch(function(){}))},v.prototype.digest=function(){return this.operation.then(function(N){return new Promise(function(M,L){N.onerror=function(){L(new Error("Error encountered finalizing hash"))},N.oncomplete=function(){N.result&&M(new Uint8Array(N.result)),L(new Error("Error encountered finalizing hash"))},N.finish()})})},v}();function m(v){return"string"==typeof v?(0,C.fromUtf8)(v):ArrayBuffer.isView(v)?new Uint8Array(v.buffer,v.byteOffset,v.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(v)}O.Sha1=j},4400:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.WebCryptoSha1=O.Ie11Sha1=void 0,(0,x(4275).__exportStar)(x(2264),O);var o=x(4065);Object.defineProperty(O,"Ie11Sha1",{enumerable:!0,get:function(){return o.Sha1}});var C=x(3648);Object.defineProperty(O,"WebCryptoSha1",{enumerable:!0,get:function(){return C.Sha1}})},8974:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.isEmptyData=void 0,O.isEmptyData=function x(I){return"string"==typeof I?0===I.length:0===I.byteLength}},3648:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.Sha1=void 0;var I=x(8995),o=x(8974),C=x(6712),F=x(2521),j=function(){function m(v){this.toHash=new Uint8Array(0),void 0!==v&&(this.key=new Promise(function(N,M){(0,F.locateWindow)().crypto.subtle.importKey("raw",d(v),C.SHA_1_HMAC_ALGO,!1,["sign"]).then(N,M)}),this.key.catch(function(){}))}return m.prototype.update=function(v){if(!(0,o.isEmptyData)(v)){var N=d(v),M=new Uint8Array(this.toHash.byteLength+N.byteLength);M.set(this.toHash,0),M.set(N,this.toHash.byteLength),this.toHash=M}},m.prototype.digest=function(){var v=this;return this.key?this.key.then(function(N){return(0,F.locateWindow)().crypto.subtle.sign(C.SHA_1_HMAC_ALGO,N,v.toHash).then(function(M){return new Uint8Array(M)})}):(0,o.isEmptyData)(this.toHash)?Promise.resolve(C.EMPTY_DATA_SHA_1):Promise.resolve().then(function(){return(0,F.locateWindow)().crypto.subtle.digest(C.SHA_1_HASH,v.toHash)}).then(function(N){return Promise.resolve(new Uint8Array(N))})},m}();function d(m){return"string"==typeof m?(0,I.fromUtf8)(m):ArrayBuffer.isView(m)?new Uint8Array(m.buffer,m.byteOffset,m.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(m)}O.Sha1=j},5913:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0})},9413:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0})},905:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0})},9682:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0})},8023:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.isMsWindow=void 0;var x=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];O.isMsWindow=function o(C){if(function I(C){return"MSInputMethodContext"in C&&"msCrypto"in C}(C)&&void 0!==C.msCrypto.subtle){var F=C.msCrypto,j=F.getRandomValues,d=F.subtle;return x.map(function(m){return d[m]}).concat(j).every(function(m){return"function"==typeof m})}return!1}},9626:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0});var I=x(4275);(0,I.__exportStar)(x(5913),O),(0,I.__exportStar)(x(9413),O),(0,I.__exportStar)(x(905),O),(0,I.__exportStar)(x(9682),O),(0,I.__exportStar)(x(8023),O)},7037:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),(0,x(4275).__exportStar)(x(8217),O)},8217:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.supportsZeroByteGCM=O.supportsSubtleCrypto=O.supportsSecureRandom=O.supportsWebCrypto=void 0;var I=x(4275),o=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function F(m){return"object"==typeof m&&"object"==typeof m.crypto&&"function"==typeof m.crypto.getRandomValues}function j(m){return m&&o.every(function(v){return"function"==typeof m[v]})}O.supportsWebCrypto=function C(m){return!(!F(m)||"object"!=typeof m.crypto.subtle)&&j(m.crypto.subtle)},O.supportsSecureRandom=F,O.supportsSubtleCrypto=j,O.supportsZeroByteGCM=function d(m){return(0,I.__awaiter)(this,void 0,void 0,function(){var v;return(0,I.__generator)(this,function(L){switch(L.label){case 0:if(!j(m))return[2,!1];L.label=1;case 1:return L.trys.push([1,4,,5]),[4,m.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return v=L.sent(),[4,m.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},v,new Uint8Array(0))];case 3:return[2,16===L.sent().byteLength];case 4:return L.sent(),[2,!1];case 5:return[2]}})})}},6516:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.RawSha256=void 0;var I=x(4022),o=function(){function C(){this.state=Int32Array.from(I.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return C.prototype.update=function(F){if(this.finished)throw new Error("Attempted to update an already finished hash.");var j=0,d=F.byteLength;if(this.bytesHashed+=d,8*this.bytesHashed>I.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;d>0;)this.buffer[this.bufferLength++]=F[j++],d--,this.bufferLength===I.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},C.prototype.digest=function(){if(!this.finished){var F=8*this.bytesHashed,j=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),d=this.bufferLength;if(j.setUint8(this.bufferLength++,128),d%I.BLOCK_SIZE>=I.BLOCK_SIZE-8){for(var m=this.bufferLength;m<I.BLOCK_SIZE;m++)j.setUint8(m,0);this.hashBuffer(),this.bufferLength=0}for(m=this.bufferLength;m<I.BLOCK_SIZE-8;m++)j.setUint8(m,0);j.setUint32(I.BLOCK_SIZE-8,Math.floor(F/4294967296),!0),j.setUint32(I.BLOCK_SIZE-4,F),this.hashBuffer(),this.finished=!0}var v=new Uint8Array(I.DIGEST_LENGTH);for(m=0;m<8;m++)v[4*m]=this.state[m]>>>24&255,v[4*m+1]=this.state[m]>>>16&255,v[4*m+2]=this.state[m]>>>8&255,v[4*m+3]=this.state[m]>>>0&255;return v},C.prototype.hashBuffer=function(){for(var j=this.buffer,d=this.state,m=d[0],v=d[1],N=d[2],M=d[3],L=d[4],X=d[5],H=d[6],Q=d[7],q=0;q<I.BLOCK_SIZE;q++){if(q<16)this.temp[q]=(255&j[4*q])<<24|(255&j[4*q+1])<<16|(255&j[4*q+2])<<8|255&j[4*q+3];else{var Y=this.temp[q-2];this.temp[q]=(((Y>>>17|Y<<15)^(Y>>>19|Y<<13)^Y>>>10)+this.temp[q-7]|0)+((((Y=this.temp[q-15])>>>7|Y<<25)^(Y>>>18|Y<<14)^Y>>>3)+this.temp[q-16]|0)}var z=(((L>>>6|L<<26)^(L>>>11|L<<21)^(L>>>25|L<<7))+(L&X^~L&H)|0)+(Q+(I.KEY[q]+this.temp[q]|0)|0)|0,U=((m>>>2|m<<30)^(m>>>13|m<<19)^(m>>>22|m<<10))+(m&v^m&N^v&N)|0;Q=H,H=X,X=L,L=M+z|0,M=N,N=v,v=m,m=z+U|0}d[0]+=m,d[1]+=v,d[2]+=N,d[3]+=M,d[4]+=L,d[5]+=X,d[6]+=H,d[7]+=Q},C}();O.RawSha256=o},4022:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.MAX_HASHABLE_LENGTH=O.INIT=O.KEY=O.DIGEST_LENGTH=O.BLOCK_SIZE=void 0,O.BLOCK_SIZE=64,O.DIGEST_LENGTH=32,O.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),O.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],O.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},4578:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),(0,x(3541).__exportStar)(x(3039),O)},3039:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.Sha256=void 0;var I=x(3541),o=x(4022),C=x(6516),F=x(7736),j=function(){function m(v){if(this.hash=new C.RawSha256,v){this.outer=new C.RawSha256;var N=function d(m){var v=(0,F.convertToBuffer)(m);if(v.byteLength>o.BLOCK_SIZE){var N=new C.RawSha256;N.update(v),v=N.digest()}var M=new Uint8Array(o.BLOCK_SIZE);return M.set(v),M}(v),M=new Uint8Array(o.BLOCK_SIZE);M.set(N);for(var L=0;L<o.BLOCK_SIZE;L++)N[L]^=54,M[L]^=92;for(this.hash.update(N),this.outer.update(M),L=0;L<N.byteLength;L++)N[L]=0}}return m.prototype.update=function(v){if(!(0,F.isEmptyData)(v)&&!this.error)try{this.hash.update((0,F.convertToBuffer)(v))}catch(N){this.error=N}},m.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},m.prototype.digest=function(){return(0,I.__awaiter)(this,void 0,void 0,function(){return(0,I.__generator)(this,function(v){return[2,this.digestSync()]})})},m}();O.Sha256=j},2862:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.convertToBuffer=void 0;var I=x(8995),o="undefined"!=typeof Buffer&&Buffer.from?function(F){return Buffer.from(F,"utf8")}:I.fromUtf8;O.convertToBuffer=function C(F){return F instanceof Uint8Array?F:"string"==typeof F?o(F):ArrayBuffer.isView(F)?new Uint8Array(F.buffer,F.byteOffset,F.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(F)}},7736:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.uint32ArrayFrom=O.numToUint8=O.isEmptyData=O.convertToBuffer=void 0;var I=x(2862);Object.defineProperty(O,"convertToBuffer",{enumerable:!0,get:function(){return I.convertToBuffer}});var o=x(5516);Object.defineProperty(O,"isEmptyData",{enumerable:!0,get:function(){return o.isEmptyData}});var C=x(5183);Object.defineProperty(O,"numToUint8",{enumerable:!0,get:function(){return C.numToUint8}});var F=x(6777);Object.defineProperty(O,"uint32ArrayFrom",{enumerable:!0,get:function(){return F.uint32ArrayFrom}})},5516:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.isEmptyData=void 0,O.isEmptyData=function x(I){return"string"==typeof I?0===I.length:0===I.byteLength}},5183:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.numToUint8=void 0,O.numToUint8=function x(I){return new Uint8Array([(4278190080&I)>>24,(16711680&I)>>16,(65280&I)>>8,255&I])}},6777:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.uint32ArrayFrom=void 0,O.uint32ArrayFrom=function x(I){if(!Array.from){for(var o=new Uint32Array(I.length);0<I.length;)o[0]=I[0];return o}return Uint32Array.from(I)}},946:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0})},5042:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0})},8095:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0})},9951:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0})},1093:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.isMsWindow=void 0;var x=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];O.isMsWindow=function o(C){if(function I(C){return"MSInputMethodContext"in C&&"msCrypto"in C}(C)&&void 0!==C.msCrypto.subtle){var F=C.msCrypto,j=F.getRandomValues,d=F.subtle;return x.map(function(m){return d[m]}).concat(j).every(function(m){return"function"==typeof m})}return!1}},5911:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0});var I=x(1942);(0,I.__exportStar)(x(946),O),(0,I.__exportStar)(x(5042),O),(0,I.__exportStar)(x(8095),O),(0,I.__exportStar)(x(9951),O),(0,I.__exportStar)(x(1093),O)},5542:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.EMPTY_DATA_SHA_256=O.SHA_256_HMAC_ALGO=O.SHA_256_HASH=void 0,O.SHA_256_HASH={name:"SHA-256"},O.SHA_256_HMAC_ALGO={name:"HMAC",hash:O.SHA_256_HASH},O.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},3681:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.Sha256=void 0;var I=x(5979),o=x(7166),C=x(3271),F=x(8274),j=x(5911),d=x(2521),m=function(){function v(N){this.hash=(0,F.supportsWebCrypto)((0,d.locateWindow)())?new o.Sha256(N):(0,j.isMsWindow)((0,d.locateWindow)())?new I.Sha256(N):new C.Sha256(N)}return v.prototype.update=function(N,M){this.hash.update(N,M)},v.prototype.digest=function(){return this.hash.digest()},v}();O.Sha256=m},5979:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.Sha256=void 0;var I=x(2081),o=x(5542),C=x(8995),F=x(2521),j=function(){function v(N){N?(this.operation=function d(v){return new Promise(function(N,M){var L=(0,F.locateWindow)().msCrypto.subtle.importKey("raw",m(v),o.SHA_256_HMAC_ALGO,!1,["sign"]);L.oncomplete=function(){L.result&&N(L.result),M(new Error("ImportKey completed without importing key."))},L.onerror=function(){M(new Error("ImportKey failed to import key."))}})}(N).then(function(M){return(0,F.locateWindow)().msCrypto.subtle.sign(o.SHA_256_HMAC_ALGO,M)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,F.locateWindow)().msCrypto.subtle.digest("SHA-256"))}return v.prototype.update=function(N){var M=this;(0,I.isEmptyData)(N)||(this.operation=this.operation.then(function(L){return L.onerror=function(){M.operation=Promise.reject(new Error("Error encountered updating hash"))},L.process(m(N)),L}),this.operation.catch(function(){}))},v.prototype.digest=function(){return this.operation.then(function(N){return new Promise(function(M,L){N.onerror=function(){L(new Error("Error encountered finalizing hash"))},N.oncomplete=function(){N.result&&M(new Uint8Array(N.result)),L(new Error("Error encountered finalizing hash"))},N.finish()})})},v}();function m(v){return"string"==typeof v?(0,C.fromUtf8)(v):ArrayBuffer.isView(v)?new Uint8Array(v.buffer,v.byteOffset,v.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(v)}O.Sha256=j},7837:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.WebCryptoSha256=O.Ie11Sha256=void 0,(0,x(4948).__exportStar)(x(3681),O);var o=x(5979);Object.defineProperty(O,"Ie11Sha256",{enumerable:!0,get:function(){return o.Sha256}});var C=x(7166);Object.defineProperty(O,"WebCryptoSha256",{enumerable:!0,get:function(){return C.Sha256}})},2081:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.isEmptyData=void 0,O.isEmptyData=function x(I){return"string"==typeof I?0===I.length:0===I.byteLength}},7166:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.Sha256=void 0;var I=x(7558),o=x(5542),C=x(2521),F=function(){function j(d){this.toHash=new Uint8Array(0),void 0!==d&&(this.key=new Promise(function(m,v){(0,C.locateWindow)().crypto.subtle.importKey("raw",(0,I.convertToBuffer)(d),o.SHA_256_HMAC_ALGO,!1,["sign"]).then(m,v)}),this.key.catch(function(){}))}return j.prototype.update=function(d){if(!(0,I.isEmptyData)(d)){var m=(0,I.convertToBuffer)(d),v=new Uint8Array(this.toHash.byteLength+m.byteLength);v.set(this.toHash,0),v.set(m,this.toHash.byteLength),this.toHash=v}},j.prototype.digest=function(){var d=this;return this.key?this.key.then(function(m){return(0,C.locateWindow)().crypto.subtle.sign(o.SHA_256_HMAC_ALGO,m,d.toHash).then(function(v){return new Uint8Array(v)})}):(0,I.isEmptyData)(this.toHash)?Promise.resolve(o.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,C.locateWindow)().crypto.subtle.digest(o.SHA_256_HASH,d.toHash)}).then(function(m){return Promise.resolve(new Uint8Array(m))})},j}();O.Sha256=F},5794:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.RawSha256=void 0;var I=x(6175),o=function(){function C(){this.state=Int32Array.from(I.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return C.prototype.update=function(F){if(this.finished)throw new Error("Attempted to update an already finished hash.");var j=0,d=F.byteLength;if(this.bytesHashed+=d,8*this.bytesHashed>I.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;d>0;)this.buffer[this.bufferLength++]=F[j++],d--,this.bufferLength===I.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},C.prototype.digest=function(){if(!this.finished){var F=8*this.bytesHashed,j=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),d=this.bufferLength;if(j.setUint8(this.bufferLength++,128),d%I.BLOCK_SIZE>=I.BLOCK_SIZE-8){for(var m=this.bufferLength;m<I.BLOCK_SIZE;m++)j.setUint8(m,0);this.hashBuffer(),this.bufferLength=0}for(m=this.bufferLength;m<I.BLOCK_SIZE-8;m++)j.setUint8(m,0);j.setUint32(I.BLOCK_SIZE-8,Math.floor(F/4294967296),!0),j.setUint32(I.BLOCK_SIZE-4,F),this.hashBuffer(),this.finished=!0}var v=new Uint8Array(I.DIGEST_LENGTH);for(m=0;m<8;m++)v[4*m]=this.state[m]>>>24&255,v[4*m+1]=this.state[m]>>>16&255,v[4*m+2]=this.state[m]>>>8&255,v[4*m+3]=this.state[m]>>>0&255;return v},C.prototype.hashBuffer=function(){for(var j=this.buffer,d=this.state,m=d[0],v=d[1],N=d[2],M=d[3],L=d[4],X=d[5],H=d[6],Q=d[7],q=0;q<I.BLOCK_SIZE;q++){if(q<16)this.temp[q]=(255&j[4*q])<<24|(255&j[4*q+1])<<16|(255&j[4*q+2])<<8|255&j[4*q+3];else{var Y=this.temp[q-2];this.temp[q]=(((Y>>>17|Y<<15)^(Y>>>19|Y<<13)^Y>>>10)+this.temp[q-7]|0)+((((Y=this.temp[q-15])>>>7|Y<<25)^(Y>>>18|Y<<14)^Y>>>3)+this.temp[q-16]|0)}var z=(((L>>>6|L<<26)^(L>>>11|L<<21)^(L>>>25|L<<7))+(L&X^~L&H)|0)+(Q+(I.KEY[q]+this.temp[q]|0)|0)|0,U=((m>>>2|m<<30)^(m>>>13|m<<19)^(m>>>22|m<<10))+(m&v^m&N^v&N)|0;Q=H,H=X,X=L,L=M+z|0,M=N,N=v,v=m,m=z+U|0}d[0]+=m,d[1]+=v,d[2]+=N,d[3]+=M,d[4]+=L,d[5]+=X,d[6]+=H,d[7]+=Q},C}();O.RawSha256=o},6175:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.MAX_HASHABLE_LENGTH=O.INIT=O.KEY=O.DIGEST_LENGTH=O.BLOCK_SIZE=void 0,O.BLOCK_SIZE=64,O.DIGEST_LENGTH=32,O.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),O.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],O.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},3271:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),(0,x(3917).__exportStar)(x(5746),O)},5746:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.Sha256=void 0;var I=x(3917),o=x(6175),C=x(5794),F=x(7558),j=function(){function m(v){if(this.hash=new C.RawSha256,v){this.outer=new C.RawSha256;var N=function d(m){var v=(0,F.convertToBuffer)(m);if(v.byteLength>o.BLOCK_SIZE){var N=new C.RawSha256;N.update(v),v=N.digest()}var M=new Uint8Array(o.BLOCK_SIZE);return M.set(v),M}(v),M=new Uint8Array(o.BLOCK_SIZE);M.set(N);for(var L=0;L<o.BLOCK_SIZE;L++)N[L]^=54,M[L]^=92;for(this.hash.update(N),this.outer.update(M),L=0;L<N.byteLength;L++)N[L]=0}}return m.prototype.update=function(v){if(!(0,F.isEmptyData)(v)&&!this.error)try{this.hash.update((0,F.convertToBuffer)(v))}catch(N){this.error=N}},m.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},m.prototype.digest=function(){return(0,I.__awaiter)(this,void 0,void 0,function(){return(0,I.__generator)(this,function(v){return[2,this.digestSync()]})})},m}();O.Sha256=j},8274:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),(0,x(5497).__exportStar)(x(6509),O)},6509:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.supportsZeroByteGCM=O.supportsSubtleCrypto=O.supportsSecureRandom=O.supportsWebCrypto=void 0;var I=x(5497),o=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function F(m){return"object"==typeof m&&"object"==typeof m.crypto&&"function"==typeof m.crypto.getRandomValues}function j(m){return m&&o.every(function(v){return"function"==typeof m[v]})}O.supportsWebCrypto=function C(m){return!(!F(m)||"object"!=typeof m.crypto.subtle)&&j(m.crypto.subtle)},O.supportsSecureRandom=F,O.supportsSubtleCrypto=j,O.supportsZeroByteGCM=function d(m){return(0,I.__awaiter)(this,void 0,void 0,function(){var v;return(0,I.__generator)(this,function(L){switch(L.label){case 0:if(!j(m))return[2,!1];L.label=1;case 1:return L.trys.push([1,4,,5]),[4,m.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return v=L.sent(),[4,m.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},v,new Uint8Array(0))];case 3:return[2,16===L.sent().byteLength];case 4:return L.sent(),[2,!1];case 5:return[2]}})})}},5804:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.convertToBuffer=void 0;var I=x(8995),o="undefined"!=typeof Buffer&&Buffer.from?function(F){return Buffer.from(F,"utf8")}:I.fromUtf8;O.convertToBuffer=function C(F){return F instanceof Uint8Array?F:"string"==typeof F?o(F):ArrayBuffer.isView(F)?new Uint8Array(F.buffer,F.byteOffset,F.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(F)}},7558:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.uint32ArrayFrom=O.numToUint8=O.isEmptyData=O.convertToBuffer=void 0;var I=x(5804);Object.defineProperty(O,"convertToBuffer",{enumerable:!0,get:function(){return I.convertToBuffer}});var o=x(662);Object.defineProperty(O,"isEmptyData",{enumerable:!0,get:function(){return o.isEmptyData}});var C=x(362);Object.defineProperty(O,"numToUint8",{enumerable:!0,get:function(){return C.numToUint8}});var F=x(8768);Object.defineProperty(O,"uint32ArrayFrom",{enumerable:!0,get:function(){return F.uint32ArrayFrom}})},662:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.isEmptyData=void 0,O.isEmptyData=function x(I){return"string"==typeof I?0===I.length:0===I.byteLength}},362:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.numToUint8=void 0,O.numToUint8=function x(I){return new Uint8Array([(4278190080&I)>>24,(16711680&I)>>16,(65280&I)>>8,255&I])}},8768:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.uint32ArrayFrom=void 0,O.uint32ArrayFrom=function x(I){if(!Uint32Array.from){for(var o=new Uint32Array(I.length),C=0;C<I.length;)o[C]=I[C],C+=1;return o}return Uint32Array.from(I)}},222:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0})},4362:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0})},6762:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0})},7957:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0})},2890:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.isMsWindow=void 0;var x=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];O.isMsWindow=function o(C){if(function I(C){return"MSInputMethodContext"in C&&"msCrypto"in C}(C)&&void 0!==C.msCrypto.subtle){var F=C.msCrypto,j=F.getRandomValues,d=F.subtle;return x.map(function(m){return d[m]}).concat(j).every(function(m){return"function"==typeof m})}return!1}},5327:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0});var I=x(3705);(0,I.__exportStar)(x(222),O),(0,I.__exportStar)(x(4362),O),(0,I.__exportStar)(x(6762),O),(0,I.__exportStar)(x(7957),O),(0,I.__exportStar)(x(2890),O)},9e3:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.EMPTY_DATA_SHA_256=O.SHA_256_HMAC_ALGO=O.SHA_256_HASH=void 0,O.SHA_256_HASH={name:"SHA-256"},O.SHA_256_HMAC_ALGO={name:"HMAC",hash:O.SHA_256_HASH},O.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])},339:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.Sha256=void 0;var I=x(2461),o=x(4170),C=x(5129),F=x(6870),j=x(5327),d=x(2521),m=function(){function v(N){this.hash=(0,F.supportsWebCrypto)((0,d.locateWindow)())?new o.Sha256(N):(0,j.isMsWindow)((0,d.locateWindow)())?new I.Sha256(N):new C.Sha256(N)}return v.prototype.update=function(N,M){this.hash.update(N,M)},v.prototype.digest=function(){return this.hash.digest()},v}();O.Sha256=m},2461:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.Sha256=void 0;var I=x(5953),o=x(9e3),C=x(8995),F=x(2521),j=function(){function v(N){N?(this.operation=function d(v){return new Promise(function(N,M){var L=(0,F.locateWindow)().msCrypto.subtle.importKey("raw",m(v),o.SHA_256_HMAC_ALGO,!1,["sign"]);L.oncomplete=function(){L.result&&N(L.result),M(new Error("ImportKey completed without importing key."))},L.onerror=function(){M(new Error("ImportKey failed to import key."))}})}(N).then(function(M){return(0,F.locateWindow)().msCrypto.subtle.sign(o.SHA_256_HMAC_ALGO,M)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,F.locateWindow)().msCrypto.subtle.digest("SHA-256"))}return v.prototype.update=function(N){var M=this;(0,I.isEmptyData)(N)||(this.operation=this.operation.then(function(L){return L.onerror=function(){M.operation=Promise.reject(new Error("Error encountered updating hash"))},L.process(m(N)),L}),this.operation.catch(function(){}))},v.prototype.digest=function(){return this.operation.then(function(N){return new Promise(function(M,L){N.onerror=function(){L(new Error("Error encountered finalizing hash"))},N.oncomplete=function(){N.result&&M(new Uint8Array(N.result)),L(new Error("Error encountered finalizing hash"))},N.finish()})})},v}();function m(v){return"string"==typeof v?(0,C.fromUtf8)(v):ArrayBuffer.isView(v)?new Uint8Array(v.buffer,v.byteOffset,v.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(v)}O.Sha256=j},4247:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.WebCryptoSha256=O.Ie11Sha256=void 0,(0,x(3034).__exportStar)(x(339),O);var o=x(2461);Object.defineProperty(O,"Ie11Sha256",{enumerable:!0,get:function(){return o.Sha256}});var C=x(4170);Object.defineProperty(O,"WebCryptoSha256",{enumerable:!0,get:function(){return C.Sha256}})},5953:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.isEmptyData=void 0,O.isEmptyData=function x(I){return"string"==typeof I?0===I.length:0===I.byteLength}},4170:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.Sha256=void 0;var I=x(6786),o=x(9e3),C=x(2521),F=function(){function j(d){this.toHash=new Uint8Array(0),void 0!==d&&(this.key=new Promise(function(m,v){(0,C.locateWindow)().crypto.subtle.importKey("raw",(0,I.convertToBuffer)(d),o.SHA_256_HMAC_ALGO,!1,["sign"]).then(m,v)}),this.key.catch(function(){}))}return j.prototype.update=function(d){if(!(0,I.isEmptyData)(d)){var m=(0,I.convertToBuffer)(d),v=new Uint8Array(this.toHash.byteLength+m.byteLength);v.set(this.toHash,0),v.set(m,this.toHash.byteLength),this.toHash=v}},j.prototype.digest=function(){var d=this;return this.key?this.key.then(function(m){return(0,C.locateWindow)().crypto.subtle.sign(o.SHA_256_HMAC_ALGO,m,d.toHash).then(function(v){return new Uint8Array(v)})}):(0,I.isEmptyData)(this.toHash)?Promise.resolve(o.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,C.locateWindow)().crypto.subtle.digest(o.SHA_256_HASH,d.toHash)}).then(function(m){return Promise.resolve(new Uint8Array(m))})},j}();O.Sha256=F},2120:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.RawSha256=void 0;var I=x(9792),o=function(){function C(){this.state=Int32Array.from(I.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return C.prototype.update=function(F){if(this.finished)throw new Error("Attempted to update an already finished hash.");var j=0,d=F.byteLength;if(this.bytesHashed+=d,8*this.bytesHashed>I.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;d>0;)this.buffer[this.bufferLength++]=F[j++],d--,this.bufferLength===I.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},C.prototype.digest=function(){if(!this.finished){var F=8*this.bytesHashed,j=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),d=this.bufferLength;if(j.setUint8(this.bufferLength++,128),d%I.BLOCK_SIZE>=I.BLOCK_SIZE-8){for(var m=this.bufferLength;m<I.BLOCK_SIZE;m++)j.setUint8(m,0);this.hashBuffer(),this.bufferLength=0}for(m=this.bufferLength;m<I.BLOCK_SIZE-8;m++)j.setUint8(m,0);j.setUint32(I.BLOCK_SIZE-8,Math.floor(F/4294967296),!0),j.setUint32(I.BLOCK_SIZE-4,F),this.hashBuffer(),this.finished=!0}var v=new Uint8Array(I.DIGEST_LENGTH);for(m=0;m<8;m++)v[4*m]=this.state[m]>>>24&255,v[4*m+1]=this.state[m]>>>16&255,v[4*m+2]=this.state[m]>>>8&255,v[4*m+3]=this.state[m]>>>0&255;return v},C.prototype.hashBuffer=function(){for(var j=this.buffer,d=this.state,m=d[0],v=d[1],N=d[2],M=d[3],L=d[4],X=d[5],H=d[6],Q=d[7],q=0;q<I.BLOCK_SIZE;q++){if(q<16)this.temp[q]=(255&j[4*q])<<24|(255&j[4*q+1])<<16|(255&j[4*q+2])<<8|255&j[4*q+3];else{var Y=this.temp[q-2];this.temp[q]=(((Y>>>17|Y<<15)^(Y>>>19|Y<<13)^Y>>>10)+this.temp[q-7]|0)+((((Y=this.temp[q-15])>>>7|Y<<25)^(Y>>>18|Y<<14)^Y>>>3)+this.temp[q-16]|0)}var z=(((L>>>6|L<<26)^(L>>>11|L<<21)^(L>>>25|L<<7))+(L&X^~L&H)|0)+(Q+(I.KEY[q]+this.temp[q]|0)|0)|0,U=((m>>>2|m<<30)^(m>>>13|m<<19)^(m>>>22|m<<10))+(m&v^m&N^v&N)|0;Q=H,H=X,X=L,L=M+z|0,M=N,N=v,v=m,m=z+U|0}d[0]+=m,d[1]+=v,d[2]+=N,d[3]+=M,d[4]+=L,d[5]+=X,d[6]+=H,d[7]+=Q},C}();O.RawSha256=o},9792:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.MAX_HASHABLE_LENGTH=O.INIT=O.KEY=O.DIGEST_LENGTH=O.BLOCK_SIZE=void 0,O.BLOCK_SIZE=64,O.DIGEST_LENGTH=32,O.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),O.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],O.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1},5129:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),(0,x(2170).__exportStar)(x(8363),O)},8363:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.Sha256=void 0;var I=x(2170),o=x(9792),C=x(2120),F=x(6786),j=function(){function m(v){if(this.hash=new C.RawSha256,v){this.outer=new C.RawSha256;var N=function d(m){var v=(0,F.convertToBuffer)(m);if(v.byteLength>o.BLOCK_SIZE){var N=new C.RawSha256;N.update(v),v=N.digest()}var M=new Uint8Array(o.BLOCK_SIZE);return M.set(v),M}(v),M=new Uint8Array(o.BLOCK_SIZE);M.set(N);for(var L=0;L<o.BLOCK_SIZE;L++)N[L]^=54,M[L]^=92;for(this.hash.update(N),this.outer.update(M),L=0;L<N.byteLength;L++)N[L]=0}}return m.prototype.update=function(v){if(!(0,F.isEmptyData)(v)&&!this.error)try{this.hash.update((0,F.convertToBuffer)(v))}catch(N){this.error=N}},m.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},m.prototype.digest=function(){return(0,I.__awaiter)(this,void 0,void 0,function(){return(0,I.__generator)(this,function(v){return[2,this.digestSync()]})})},m}();O.Sha256=j},6870:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),(0,x(7379).__exportStar)(x(3976),O)},3976:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.supportsZeroByteGCM=O.supportsSubtleCrypto=O.supportsSecureRandom=O.supportsWebCrypto=void 0;var I=x(7379),o=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function F(m){return"object"==typeof m&&"object"==typeof m.crypto&&"function"==typeof m.crypto.getRandomValues}function j(m){return m&&o.every(function(v){return"function"==typeof m[v]})}O.supportsWebCrypto=function C(m){return!(!F(m)||"object"!=typeof m.crypto.subtle)&&j(m.crypto.subtle)},O.supportsSecureRandom=F,O.supportsSubtleCrypto=j,O.supportsZeroByteGCM=function d(m){return(0,I.__awaiter)(this,void 0,void 0,function(){var v;return(0,I.__generator)(this,function(L){switch(L.label){case 0:if(!j(m))return[2,!1];L.label=1;case 1:return L.trys.push([1,4,,5]),[4,m.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return v=L.sent(),[4,m.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},v,new Uint8Array(0))];case 3:return[2,16===L.sent().byteLength];case 4:return L.sent(),[2,!1];case 5:return[2]}})})}},5275:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.convertToBuffer=void 0;var I=x(8995),o="undefined"!=typeof Buffer&&Buffer.from?function(F){return Buffer.from(F,"utf8")}:I.fromUtf8;O.convertToBuffer=function C(F){return F instanceof Uint8Array?F:"string"==typeof F?o(F):ArrayBuffer.isView(F)?new Uint8Array(F.buffer,F.byteOffset,F.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(F)}},6786:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.uint32ArrayFrom=O.numToUint8=O.isEmptyData=O.convertToBuffer=void 0;var I=x(5275);Object.defineProperty(O,"convertToBuffer",{enumerable:!0,get:function(){return I.convertToBuffer}});var o=x(6185);Object.defineProperty(O,"isEmptyData",{enumerable:!0,get:function(){return o.isEmptyData}});var C=x(6094);Object.defineProperty(O,"numToUint8",{enumerable:!0,get:function(){return C.numToUint8}});var F=x(5618);Object.defineProperty(O,"uint32ArrayFrom",{enumerable:!0,get:function(){return F.uint32ArrayFrom}})},6185:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.isEmptyData=void 0,O.isEmptyData=function x(I){return"string"==typeof I?0===I.length:0===I.byteLength}},6094:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.numToUint8=void 0,O.numToUint8=function x(I){return new Uint8Array([(4278190080&I)>>24,(16711680&I)>>16,(65280&I)>>8,255&I])}},5618:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.uint32ArrayFrom=void 0,O.uint32ArrayFrom=function x(I){if(!Uint32Array.from){for(var o=new Uint32Array(I.length),C=0;C<I.length;)o[C]=I[C],C+=1;return o}return Uint32Array.from(I)}},97:function(we,O,x){var I=this&&this.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(O,"__esModule",{value:!0}),O.decodeHTML=O.decodeHTMLStrict=O.decodeXML=void 0;var o=I(x(6086)),C=I(x(2453)),F=I(x(8161)),j=I(x(4934)),d=/&(?:[a-zA-Z0-9]+|#[xX][\da-fA-F]+|#\d+);/g;function m(M){var L=N(M);return function(X){return String(X).replace(d,L)}}O.decodeXML=m(F.default),O.decodeHTMLStrict=m(o.default);var v=function(M,L){return M<L?1:-1};function N(M){return function(X){if("#"===X.charAt(1)){var H=X.charAt(2);return j.default("X"===H||"x"===H?parseInt(X.substr(3),16):parseInt(X.substr(2),10))}return M[X.slice(1,-1)]||X}}O.decodeHTML=function(){for(var M=Object.keys(C.default).sort(v),L=Object.keys(o.default).sort(v),X=0,H=0;X<L.length;X++)M[H]===L[X]?(L[X]+=";?",H++):L[X]+=";";var Q=new RegExp("&(?:"+L.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),q=N(o.default);function Y(le){return";"!==le.substr(-1)&&(le+=";"),q(le)}return function(le){return String(le).replace(Q,Y)}}()},4934:function(we,O,x){var I=this&&this.__importDefault||function(j){return j&&j.__esModule?j:{default:j}};Object.defineProperty(O,"__esModule",{value:!0});var o=I(x(2148)),C=String.fromCodePoint||function(j){var d="";return j>65535&&(j-=65536,d+=String.fromCharCode(j>>>10&1023|55296),j=56320|1023&j),d+String.fromCharCode(j)};O.default=function F(j){return j>=55296&&j<=57343||j>1114111?"\ufffd":(j in o.default&&(j=o.default[j]),C(j))}},2265:function(we,O,x){var I=this&&this.__importDefault||function(B){return B&&B.__esModule?B:{default:B}};Object.defineProperty(O,"__esModule",{value:!0}),O.escapeUTF8=O.escape=O.encodeNonAsciiHTML=O.encodeHTML=O.encodeXML=void 0;var C=v(I(x(8161)).default),F=N(C);O.encodeXML=le(C);var d=v(I(x(6086)).default),m=N(d);function v(B){return Object.keys(B).sort().reduce(function(z,U){return z[B[U]]="&"+U+";",z},{})}function N(B){for(var z=[],U=[],ee=0,ge=Object.keys(B);ee<ge.length;ee++){var _e=ge[ee];1===_e.length?z.push("\\"+_e):U.push(_e)}z.sort();for(var pe=0;pe<z.length-1;pe++){for(var g=pe;g<z.length-1&&z[g].charCodeAt(1)+1===z[g+1].charCodeAt(1);)g+=1;var A=1+g-pe;A<3||z.splice(pe,A,z[pe]+"-"+z[g])}return U.unshift("["+z.join("")+"]"),new RegExp(U.join("|"),"g")}O.encodeHTML=function H(B,z){return function(U){return U.replace(z,function(ee){return B[ee]}).replace(M,X)}}(d,m),O.encodeNonAsciiHTML=le(d);var M=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,L=null!=String.prototype.codePointAt?function(B){return B.codePointAt(0)}:function(B){return 1024*(B.charCodeAt(0)-55296)+B.charCodeAt(1)-56320+65536};function X(B){return"&#x"+(B.length>1?L(B):B.charCodeAt(0)).toString(16).toUpperCase()+";"}var Q=new RegExp(F.source+"|"+M.source,"g");function le(B){return function(z){return z.replace(Q,function(U){return B[U]||X(U)})}}O.escape=function q(B){return B.replace(Q,X)},O.escapeUTF8=function Y(B){return B.replace(F,X)}},8074:(we,O,x)=>{O.p1=void 0;x(97),x(2265),x(2265);var v=x(97);Object.defineProperty(O,"p1",{enumerable:!0,get:function(){return v.decodeHTML}})},7701:(we,O,x)=>{const I=x(2811).buildOptions,o={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(Q){return Q},attrValueProcessor:function(Q){return Q}},C=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function F(Q){this.options=I(Q,o,C),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=X),this.isCDATA=this.options.cdataTagName?H:function(){return!1},this.replaceCDATAstr=j,this.replaceCDATAarr=d,this.options.format?(this.indentate=L,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=M,this.buildObjNode=v):(this.buildTextNode=N,this.buildObjNode=m),this.buildTextValNode=N,this.buildObjectNode=m}function j(Q,q){return Q=this.options.tagValueProcessor(""+Q),""===this.options.cdataPositionChar||""===Q?Q+"<![CDATA["+q+"]]"+this.tagEndChar:Q.replace(this.options.cdataPositionChar,"<![CDATA["+q+"]]"+this.tagEndChar)}function d(Q,q){if(Q=this.options.tagValueProcessor(""+Q),""===this.options.cdataPositionChar||""===Q)return Q+"<![CDATA["+q.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let Y in q)Q=Q.replace(this.options.cdataPositionChar,"<![CDATA["+q[Y]+"]]>");return Q+this.newLine}function m(Q,q,Y,le){return Y&&!Q.includes("<")?this.indentate(le)+"<"+q+Y+">"+Q+"</"+q+this.tagEndChar:this.indentate(le)+"<"+q+Y+this.tagEndChar+Q+this.indentate(le)+"</"+q+this.tagEndChar}function v(Q,q,Y,le){return""!==Q?this.buildObjectNode(Q,q,Y,le):this.indentate(le)+"<"+q+Y+"/"+this.tagEndChar}function N(Q,q,Y,le){return this.indentate(le)+"<"+q+Y+">"+this.options.tagValueProcessor(Q)+"</"+q+this.tagEndChar}function M(Q,q,Y,le){return""!==Q?this.buildTextValNode(Q,q,Y,le):this.indentate(le)+"<"+q+Y+"/"+this.tagEndChar}function L(Q){return this.options.indentBy.repeat(Q)}function X(Q){return!!Q.startsWith(this.options.attributeNamePrefix)&&Q.substr(this.attrPrefixLen)}function H(Q){return Q===this.options.cdataTagName}F.prototype.parse=function(Q){return this.j2x(Q,0).val},F.prototype.j2x=function(Q,q){let Y="",le="";const B=Object.keys(Q),z=B.length;for(let U=0;U<z;U++){const ee=B[U];if(void 0!==Q[ee])if(null===Q[ee])le+=this.indentate(q)+"<"+ee+"/"+this.tagEndChar;else if(Q[ee]instanceof Date)le+=this.buildTextNode(Q[ee],ee,"",q);else if("object"!=typeof Q[ee]){const ge=this.isAttribute(ee);ge?Y+=" "+ge+'="'+this.options.attrValueProcessor(""+Q[ee])+'"':this.isCDATA(ee)?le+=this.replaceCDATAstr(Q[this.options.textNodeName]?Q[this.options.textNodeName]:"",Q[ee]):ee===this.options.textNodeName?Q[this.options.cdataTagName]||(le+=this.options.tagValueProcessor(""+Q[ee])):le+=this.buildTextNode(Q[ee],ee,"",q)}else if(Array.isArray(Q[ee]))if(this.isCDATA(ee))le+=this.indentate(q),le+=this.replaceCDATAarr(Q[this.options.textNodeName]?Q[this.options.textNodeName]:"",Q[ee]);else{const ge=Q[ee].length;for(let _e=0;_e<ge;_e++){const pe=Q[ee][_e];if(void 0!==pe)if(null===pe)le+=this.indentate(q)+"<"+ee+"/"+this.tagEndChar;else if("object"==typeof pe){const g=this.j2x(pe,q+1);le+=this.buildObjNode(g.val,ee,g.attrStr,q)}else le+=this.buildTextNode(pe,ee,"",q)}}else if(this.options.attrNodeName&&ee===this.options.attrNodeName){const ge=Object.keys(Q[ee]),_e=ge.length;for(let pe=0;pe<_e;pe++)Y+=" "+ge[pe]+'="'+this.options.attrValueProcessor(""+Q[ee][ge[pe]])+'"'}else{const ge=this.j2x(Q[ee],q+1);le+=this.buildObjNode(ge.val,ee,ge.attrStr,q)}}return{attrStr:Y,val:le}},we.exports=F},3027:(we,O,x)=>{const I=function(X){return String.fromCharCode(X)},o={nilChar:I(176),missingChar:I(201),nilPremitive:I(175),missingPremitive:I(200),emptyChar:I(178),emptyValue:I(177),boundryChar:I(179),objStart:I(198),arrStart:I(204),arrayEnd:I(185)},C=[o.nilChar,o.nilPremitive,o.missingChar,o.missingPremitive,o.boundryChar,o.emptyChar,o.emptyValue,o.arrayEnd,o.objStart,o.arrStart],F=function(X,H,Q){if("string"==typeof H)return j(X&&X[0]&&void 0!==X[0].val?X[0].val:X,H);{const q=function v(X){return void 0===X?o.missingChar:null===X?o.nilChar:!(X.child&&0===Object.keys(X.child).length&&(!X.attrsMap||0===Object.keys(X.attrsMap).length))||o.emptyChar}(X);if(!0===q){let Y="";if(Array.isArray(H)){Y+=o.arrStart;const le=H[0],B=X.length;if("string"==typeof le)for(let z=0;z<B;z++){const U=j(X[z].val,le);Y=d(Y,U)}else for(let z=0;z<B;z++){const U=F(X[z],le,Q);Y=d(Y,U)}Y+=o.arrayEnd}else{Y+=o.objStart;const le=Object.keys(H);Array.isArray(X)&&(X=X[0]);for(let B in le){const z=le[B];let U;U=F(!Q.ignoreAttributes&&X.attrsMap&&X.attrsMap[z]?X.attrsMap[z]:z===Q.textNodeName?X.val:X.child[z],H[z],Q),Y=d(Y,U)}}return Y}return q}},j=function(X){switch(X){case void 0:return o.missingPremitive;case null:return o.nilPremitive;case"":return o.emptyValue;default:return X}},d=function(X,H){return!m(H[0])&&!m(X[X.length-1])&&(X+=o.boundryChar),X+H},m=function(X){return-1!==C.indexOf(X)},N=x(8777),M=x(2811).buildOptions;O.convert2nimn=function(X,H,Q){return Q=M(Q,N.defaultOptions,N.props),F(X,H,Q)}},6715:(we,O,x)=>{const I=x(2811),o=function(C,F,j){const d={};if((!C.child||I.isEmptyObject(C.child))&&(!C.attrsMap||I.isEmptyObject(C.attrsMap)))return I.isExist(C.val)?C.val:"";if(I.isExist(C.val)&&("string"!=typeof C.val||""!==C.val&&C.val!==F.cdataPositionChar)){const v=I.isTagNameInArrayMode(C.tagname,F.arrayMode,j);d[F.textNodeName]=v?[C.val]:C.val}I.merge(d,C.attrsMap,F.arrayMode);const m=Object.keys(C.child);for(let v=0;v<m.length;v++){const N=m[v];if(C.child[N]&&C.child[N].length>1){d[N]=[];for(let M in C.child[N])C.child[N].hasOwnProperty(M)&&d[N].push(o(C.child[N][M],F,N))}else{const M=o(C.child[N][0],F,N),L=!0===F.arrayMode&&"object"==typeof M||I.isTagNameInArrayMode(N,F.arrayMode,j);d[N]=L?[M]:M}}return d};O.convertToJson=o},6113:(we,O,x)=>{const I=x(2811),o=x(2811).buildOptions,C=x(8777),j=function(v,N,M){let L="{";const X=Object.keys(v.child);for(let q=0;q<X.length;q++){var H=X[q];if(v.child[H]&&v.child[H].length>1){for(var Q in L+='"'+H+'" : [ ',v.child[H])L+=j(v.child[H][Q],N)+" , ";L=L.substr(0,L.length-1)+" ] "}else L+='"'+H+'" : '+j(v.child[H][0],N)+" ,"}return I.merge(L,v.attrsMap),I.isEmptyObject(L)?I.isExist(v.val)?v.val:"":(I.isExist(v.val)&&("string"==typeof v.val&&(""===v.val||v.val===N.cdataPositionChar)||(L+='"'+N.textNodeName+'" : '+function d(v){return!0!==v&&!1!==v&&isNaN(v)?'"'+v+'"':v}(v.val))),","===L[L.length-1]&&(L=L.substr(0,L.length-2)),L+"}")};O.convertToJsonString=function(v,N){return(N=o(N,C.defaultOptions,C.props)).indentBy=N.indentBy||"",j(v,N,0)}},7292:(we,O,x)=>{const I=x(6715),o=x(8777),C=x(8777),F=x(2811).buildOptions,j=x(5005);O.parse=function(m,v,N){if(N){!0===N&&(N={});const L=j.validate(m,N);if(!0!==L)throw Error(L.err.msg)}v=F(v,C.defaultOptions,C.props);const M=o.getTraversalObj(m,v);return I.convertToJson(M,v)},O.convertTonimn=x(3027).convert2nimn,O.getTraversalObj=o.getTraversalObj,O.convertToJson=I.convertToJson,O.convertToJsonString=x(6113).convertToJsonString,O.validate=j.validate,O.j2xParser=x(7701),O.parseToNimn=function(m,v,N){return O.convertTonimn(O.getTraversalObj(m,N),v,N)}},2811:(we,O)=>{const o="[:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",C=new RegExp("^"+o+"$");O.isExist=function(d){return void 0!==d},O.isEmptyObject=function(d){return 0===Object.keys(d).length},O.merge=function(d,m,v){if(m){const N=Object.keys(m),M=N.length;for(let L=0;L<M;L++)d[N[L]]="strict"===v?[m[N[L]]]:m[N[L]]}},O.getValue=function(d){return O.isExist(d)?d:""},O.buildOptions=function(d,m,v){var N={};if(!d)return m;for(let M=0;M<v.length;M++)N[v[M]]=void 0!==d[v[M]]?d[v[M]]:m[v[M]];return N},O.isTagNameInArrayMode=function(d,m,v){return!1!==m&&(m instanceof RegExp?m.test(d):"function"==typeof m?!!m(d,v):"strict"===m)},O.isName=function(d){return!(null==C.exec(d))},O.getAllMatches=function(d,m){const v=[];let N=m.exec(d);for(;N;){const M=[],L=N.length;for(let X=0;X<L;X++)M.push(N[X]);v.push(M),N=m.exec(d)}return v},O.nameRegexp=o},5005:(we,O,x)=>{const I=x(2811),o={allowBooleanAttributes:!1},C=["allowBooleanAttributes"];function F(B,z){for(var U=z;z<B.length;z++)if("?"==B[z]||" "==B[z]){var ee=B.substr(U,z-U);if(z>5&&"xml"===ee)return H("InvalidXml","XML declaration allowed only at the start of the document.",Y(B,z));if("?"==B[z]&&">"==B[z+1]){z++;break}continue}return z}function j(B,z){if(B.length>z+5&&"-"===B[z+1]&&"-"===B[z+2]){for(z+=3;z<B.length;z++)if("-"===B[z]&&"-"===B[z+1]&&">"===B[z+2]){z+=2;break}}else if(B.length>z+8&&"D"===B[z+1]&&"O"===B[z+2]&&"C"===B[z+3]&&"T"===B[z+4]&&"Y"===B[z+5]&&"P"===B[z+6]&&"E"===B[z+7]){let U=1;for(z+=8;z<B.length;z++)if("<"===B[z])U++;else if(">"===B[z]&&(U--,0===U))break}else if(B.length>z+9&&"["===B[z+1]&&"C"===B[z+2]&&"D"===B[z+3]&&"A"===B[z+4]&&"T"===B[z+5]&&"A"===B[z+6]&&"["===B[z+7])for(z+=8;z<B.length;z++)if("]"===B[z]&&"]"===B[z+1]&&">"===B[z+2]){z+=2;break}return z}function v(B,z){let U="",ee="",ge=!1;for(;z<B.length;z++){if('"'===B[z]||"'"===B[z])if(""===ee)ee=B[z];else{if(ee!==B[z])continue;ee=""}else if(">"===B[z]&&""===ee){ge=!0;break}U+=B[z]}return""===ee&&{value:U,index:z,tagClosed:ge}}O.validate=function(B,z){z=I.buildOptions(z,o,C);const U=[];let ee=!1,ge=!1;"\ufeff"===B[0]&&(B=B.substr(1));for(let _e=0;_e<B.length;_e++)if("<"===B[_e]&&"?"===B[_e+1]){if(_e+=2,_e=F(B,_e),_e.err)return _e}else{if("<"!==B[_e]){if(" "===B[_e]||"\t"===B[_e]||"\n"===B[_e]||"\r"===B[_e])continue;return H("InvalidChar","char '"+B[_e]+"' is not expected.",Y(B,_e))}if(_e++,"!"===B[_e]){_e=j(B,_e);continue}{let pe=!1;"/"===B[_e]&&(pe=!0,_e++);let g="";for(;_e<B.length&&">"!==B[_e]&&" "!==B[_e]&&"\t"!==B[_e]&&"\n"!==B[_e]&&"\r"!==B[_e];_e++)g+=B[_e];if(g=g.trim(),"/"===g[g.length-1]&&(g=g.substring(0,g.length-1),_e--),!q(g)){let E;return E=0===g.trim().length?"There is an unnecessary space between tag name and backward slash '</ ..'.":"Tag '"+g+"' is an invalid name.",H("InvalidTag",E,Y(B,_e))}const A=v(B,_e);if(!1===A)return H("InvalidAttr","Attributes for '"+g+"' have open quote.",Y(B,_e));let y=A.value;if(_e=A.index,"/"===y[y.length-1]){y=y.substring(0,y.length-1);const E=M(y,z);if(!0!==E)return H(E.err.code,E.err.msg,Y(B,_e-y.length+E.err.line));ee=!0}else if(pe){if(!A.tagClosed)return H("InvalidTag","Closing tag '"+g+"' doesn't have proper closing.",Y(B,_e));if(y.trim().length>0)return H("InvalidTag","Closing tag '"+g+"' can't have attributes or invalid starting.",Y(B,_e));{const E=U.pop();if(g!==E)return H("InvalidTag","Closing tag '"+E+"' is expected inplace of '"+g+"'.",Y(B,_e));0==U.length&&(ge=!0)}}else{const E=M(y,z);if(!0!==E)return H(E.err.code,E.err.msg,Y(B,_e-y.length+E.err.line));if(!0===ge)return H("InvalidXml","Multiple possible root nodes found.",Y(B,_e));U.push(g),ee=!0}for(_e++;_e<B.length;_e++)if("<"===B[_e]){if("!"===B[_e+1]){_e++,_e=j(B,_e);continue}if("?"!==B[_e+1])break;if(_e=F(B,++_e),_e.err)return _e}else if("&"===B[_e]){const E=X(B,_e);if(-1==E)return H("InvalidChar","char '&' is not expected.",Y(B,_e));_e=E}"<"===B[_e]&&_e--}}return ee?!(U.length>0)||H("InvalidXml","Invalid '"+JSON.stringify(U,null,4).replace(/\r?\n/g,"")+"' found.",1):H("InvalidXml","Start tag expected.",1)};const N=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function M(B,z){const U=I.getAllMatches(B,N),ee={};for(let ge=0;ge<U.length;ge++){if(0===U[ge][1].length)return H("InvalidAttr","Attribute '"+U[ge][2]+"' has no space in starting.",le(B,U[ge][0]));if(void 0===U[ge][3]&&!z.allowBooleanAttributes)return H("InvalidAttr","boolean attribute '"+U[ge][2]+"' is not allowed.",le(B,U[ge][0]));const _e=U[ge][2];if(!Q(_e))return H("InvalidAttr","Attribute '"+_e+"' is an invalid name.",le(B,U[ge][0]));if(ee.hasOwnProperty(_e))return H("InvalidAttr","Attribute '"+_e+"' is repeated.",le(B,U[ge][0]));ee[_e]=1}return!0}function X(B,z){if(";"===B[++z])return-1;if("#"===B[z])return function L(B,z){let U=/\d/;for("x"===B[z]&&(z++,U=/[\da-fA-F]/);z<B.length;z++){if(";"===B[z])return z;if(!B[z].match(U))break}return-1}(B,++z);let U=0;for(;z<B.length;z++,U++)if(!(B[z].match(/\w/)&&U<20)){if(";"===B[z])break;return-1}return z}function H(B,z,U){return{err:{code:B,msg:z,line:U}}}function Q(B){return I.isName(B)}function q(B){return I.isName(B)}function Y(B,z){return B.substring(0,z).split(/\r?\n/).length}function le(B,z){return B.indexOf(z)+z.length}},2689:we=>{we.exports=function(O,x,I){this.tagname=O,this.parent=x,this.child={},this.attrsMap={},this.val=I,this.addChild=function(o){Array.isArray(this.child[o.tagname])?this.child[o.tagname].push(o):this.child[o.tagname]=[o]}}},8777:(we,O,x)=>{const I=x(2811),o=x(2811).buildOptions,C=x(2689);"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,I.nameRegexp),!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const j={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",tagValueProcessor:function(q,Y){return q},attrValueProcessor:function(q,Y){return q},stopNodes:[]};O.defaultOptions=j;const d=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];function m(q,Y,le){return Y&&(le.trimValues&&(Y=Y.trim()),Y=N(Y=le.tagValueProcessor(Y,q),le.parseNodeValue,le.parseTrueNumberOnly)),Y}function v(q,Y){if(Y.ignoreNameSpace){const le=q.split(":"),B="/"===q.charAt(0)?"/":"";if("xmlns"===le[0])return"";2===le.length&&(q=B+le[1])}return q}function N(q,Y,le){if(Y&&"string"==typeof q){let B;return""===q.trim()||isNaN(q)?B="true"===q||"false"!==q&&q:(-1!==q.indexOf("0x")?B=Number.parseInt(q,16):-1!==q.indexOf(".")?(B=Number.parseFloat(q),q=q.replace(/\.?0+$/,"")):B=Number.parseInt(q,10),le&&(B=String(B)===q?B:q)),B}return I.isExist(q)?q:""}O.props=d;const M=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function L(q,Y){if(!Y.ignoreAttributes&&"string"==typeof q){q=q.replace(/\r?\n/g," ");const le=I.getAllMatches(q,M),B=le.length,z={};for(let U=0;U<B;U++){const ee=v(le[U][1],Y);ee.length&&(void 0!==le[U][4]?(Y.trimValues&&(le[U][4]=le[U][4].trim()),le[U][4]=Y.attrValueProcessor(le[U][4],ee),z[Y.attributeNamePrefix+ee]=N(le[U][4],Y.parseAttributeValue,Y.parseTrueNumberOnly)):Y.allowBooleanAttributes&&(z[Y.attributeNamePrefix+ee]=!0))}if(!Object.keys(z).length)return;if(Y.attrNodeName){const U={};return U[Y.attrNodeName]=z,U}return z}}function H(q,Y){let le,B="";for(let z=Y;z<q.length;z++){let U=q[z];if(le)U===le&&(le="");else if('"'===U||"'"===U)le=U;else{if(">"===U)return{data:B,index:z};"\t"===U&&(U=" ")}B+=U}}function Q(q,Y,le,B){const z=q.indexOf(Y,le);if(-1===z)throw new Error(B);return z+Y.length-1}O.getTraversalObj=function(q,Y){q=q.replace(/\r\n?/g,"\n"),Y=o(Y,j,d);const le=new C("!xml");let B=le,z="";for(let U=0;U<q.length;U++)if("<"===q[U])if("/"===q[U+1]){const ge=Q(q,">",U,"Closing Tag is not closed.");let _e=q.substring(U+2,ge).trim();if(Y.ignoreNameSpace){const pe=_e.indexOf(":");-1!==pe&&(_e=_e.substr(pe+1))}B&&(B.val=B.val?I.getValue(B.val)+""+m(_e,z,Y):m(_e,z,Y)),Y.stopNodes.length&&Y.stopNodes.includes(B.tagname)&&(B.child=[],null==B.attrsMap&&(B.attrsMap={}),B.val=q.substr(B.startIndex+1,U-B.startIndex-1)),B=B.parent,z="",U=ge}else if("?"===q[U+1])U=Q(q,"?>",U,"Pi Tag is not closed.");else if("!--"===q.substr(U+1,3))U=Q(q,"--\x3e",U,"Comment is not closed.");else if("!D"===q.substr(U+1,2)){const ge=Q(q,">",U,"DOCTYPE is not closed.");U=q.substring(U,ge).indexOf("[")>=0?q.indexOf("]>",U)+1:ge}else if("!["===q.substr(U+1,2)){const ge=Q(q,"]]>",U,"CDATA is not closed.")-2,_e=q.substring(U+9,ge);if(z&&(B.val=I.getValue(B.val)+""+m(B.tagname,z,Y),z=""),Y.cdataTagName){const pe=new C(Y.cdataTagName,B,_e);B.addChild(pe),B.val=I.getValue(B.val)+Y.cdataPositionChar,_e&&(pe.val=_e)}else B.val=(B.val||"")+(_e||"");U=ge+2}else{const ge=H(q,U+1);let _e=ge.data;const pe=ge.index,g=_e.indexOf(" ");let A=_e,y=!0;if(-1!==g&&(A=_e.substr(0,g).replace(/\s\s*$/,""),_e=_e.substr(g+1)),Y.ignoreNameSpace){const E=A.indexOf(":");-1!==E&&(A=A.substr(E+1),y=A!==ge.data.substr(E+1))}if(B&&z&&"!xml"!==B.tagname&&(B.val=I.getValue(B.val)+""+m(B.tagname,z,Y)),_e.length>0&&_e.lastIndexOf("/")===_e.length-1){"/"===A[A.length-1]?(A=A.substr(0,A.length-1),_e=A):_e=_e.substr(0,_e.length-1);const E=new C(A,B,"");A!==_e&&(E.attrsMap=L(_e,Y)),B.addChild(E)}else{const E=new C(A,B);Y.stopNodes.length&&Y.stopNodes.includes(E.tagname)&&(E.startIndex=pe),A!==_e&&y&&(E.attrsMap=L(_e,Y)),B.addChild(E),B=E}z="",U=pe}else z+=q[U];return le}},8648:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.AwsCrc32=void 0;var I=x(7369),o=x(9964),C=x(9879),F=function(){function j(){this.crc32=new C.Crc32}return j.prototype.update=function(d){(0,o.isEmptyData)(d)||this.crc32.update((0,o.convertToBuffer)(d))},j.prototype.digest=function(){return(0,I.__awaiter)(this,void 0,void 0,function(){return(0,I.__generator)(this,function(d){return[2,(0,o.numToUint8)(this.crc32.digest())]})})},j}();O.AwsCrc32=F},9879:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.AwsCrc32=O.Crc32=O.crc32=void 0;var I=x(7369),o=x(9964);O.crc32=function C(v){return(new F).update(v).digest()};var F=function(){function v(){this.checksum=4294967295}return v.prototype.update=function(N){var M,L;try{for(var X=(0,I.__values)(N),H=X.next();!H.done;H=X.next())this.checksum=this.checksum>>>8^d[255&(this.checksum^H.value)]}catch(q){M={error:q}}finally{try{H&&!H.done&&(L=X.return)&&L.call(X)}finally{if(M)throw M.error}}return this},v.prototype.digest=function(){return(4294967295^this.checksum)>>>0},v}();O.Crc32=F;var d=(0,o.uint32ArrayFrom)([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),m=x(8648);Object.defineProperty(O,"AwsCrc32",{enumerable:!0,get:function(){return m.AwsCrc32}})},1271:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.convertToBuffer=void 0;var I=x(8995),o="undefined"!=typeof Buffer&&Buffer.from?function(F){return Buffer.from(F,"utf8")}:I.fromUtf8;O.convertToBuffer=function C(F){return F instanceof Uint8Array?F:"string"==typeof F?o(F):ArrayBuffer.isView(F)?new Uint8Array(F.buffer,F.byteOffset,F.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(F)}},9964:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.uint32ArrayFrom=O.numToUint8=O.isEmptyData=O.convertToBuffer=void 0;var I=x(1271);Object.defineProperty(O,"convertToBuffer",{enumerable:!0,get:function(){return I.convertToBuffer}});var o=x(9044);Object.defineProperty(O,"isEmptyData",{enumerable:!0,get:function(){return o.isEmptyData}});var C=x(8546);Object.defineProperty(O,"numToUint8",{enumerable:!0,get:function(){return C.numToUint8}});var F=x(8187);Object.defineProperty(O,"uint32ArrayFrom",{enumerable:!0,get:function(){return F.uint32ArrayFrom}})},9044:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.isEmptyData=void 0,O.isEmptyData=function x(I){return"string"==typeof I?0===I.length:0===I.byteLength}},8546:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.numToUint8=void 0,O.numToUint8=function x(I){return new Uint8Array([(4278190080&I)>>24,(16711680&I)>>16,(65280&I)>>8,255&I])}},8187:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.uint32ArrayFrom=void 0,O.uint32ArrayFrom=function x(I){if(!Uint32Array.from){for(var o=new Uint32Array(I.length),C=0;C<I.length;)o[C]=I[C],C+=1;return o}return Uint32Array.from(I)}},9286:(we,O,x)=>{var o=x(548),C=x(8461),F="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;O.lW=v,O.h2=50;var j=2147483647;function m($){if($>j)throw new RangeError('The value "'+$+'" is invalid for option "size"');var k=new Uint8Array($);return Object.setPrototypeOf(k,v.prototype),k}function v($,k,K){if("number"==typeof $){if("string"==typeof k)throw new TypeError('The "string" argument must be of type string. Received type number');return X($)}return N($,k,K)}function N($,k,K){if("string"==typeof $)return function H($,k){if(("string"!=typeof k||""===k)&&(k="utf8"),!v.isEncoding(k))throw new TypeError("Unknown encoding: "+k);var K=0|z($,k),he=m(K),Me=he.write($,k);return Me!==K&&(he=he.slice(0,Me)),he}($,k);if(ArrayBuffer.isView($))return Q($);if(null==$)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $);if(me($,ArrayBuffer)||$&&me($.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(me($,SharedArrayBuffer)||$&&me($.buffer,SharedArrayBuffer)))return function q($,k,K){if(k<0||$.byteLength<k)throw new RangeError('"offset" is outside of buffer bounds');if($.byteLength<k+(K||0))throw new RangeError('"length" is outside of buffer bounds');var he;return he=void 0===k&&void 0===K?new Uint8Array($):void 0===K?new Uint8Array($,k):new Uint8Array($,k,K),Object.setPrototypeOf(he,v.prototype),he}($,k,K);if("number"==typeof $)throw new TypeError('The "value" argument must not be of type number. Received type number');var he=$.valueOf&&$.valueOf();if(null!=he&&he!==$)return v.from(he,k,K);var Me=function Y($){if(v.isBuffer($)){var k=0|le($.length),K=m(k);return 0===K.length||$.copy(K,0,0,k),K}return void 0!==$.length?"number"!=typeof $.length||rt($.length)?m(0):Q($):"Buffer"===$.type&&Array.isArray($.data)?Q($.data):void 0}($);if(Me)return Me;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof $[Symbol.toPrimitive])return v.from($[Symbol.toPrimitive]("string"),k,K);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $)}function M($){if("number"!=typeof $)throw new TypeError('"size" argument must be of type number');if($<0)throw new RangeError('The value "'+$+'" is invalid for option "size"')}function X($){return M($),m($<0?0:0|le($))}function Q($){for(var k=$.length<0?0:0|le($.length),K=m(k),he=0;he<k;he+=1)K[he]=255&$[he];return K}function le($){if($>=j)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+j.toString(16)+" bytes");return 0|$}function z($,k){if(v.isBuffer($))return $.length;if(ArrayBuffer.isView($)||me($,ArrayBuffer))return $.byteLength;if("string"!=typeof $)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof $);var K=$.length,he=arguments.length>2&&!0===arguments[2];if(!he&&0===K)return 0;for(var Me=!1;;)switch(k){case"ascii":case"latin1":case"binary":return K;case"utf8":case"utf-8":return te($).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*K;case"hex":return K>>>1;case"base64":return ze($).length;default:if(Me)return he?-1:te($).length;k=(""+k).toLowerCase(),Me=!0}}function U($,k,K){var he=!1;if((void 0===k||k<0)&&(k=0),k>this.length||((void 0===K||K>this.length)&&(K=this.length),K<=0)||(K>>>=0)<=(k>>>=0))return"";for($||($="utf8");;)switch($){case"hex":return at(this,k,K);case"utf8":case"utf-8":return ne(this,k,K);case"ascii":return oe(this,k,K);case"latin1":case"binary":return Ge(this,k,K);case"base64":return P(this,k,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Fe(this,k,K);default:if(he)throw new TypeError("Unknown encoding: "+$);$=($+"").toLowerCase(),he=!0}}function ee($,k,K){var he=$[k];$[k]=$[K],$[K]=he}function ge($,k,K,he,Me){if(0===$.length)return-1;if("string"==typeof K?(he=K,K=0):K>2147483647?K=2147483647:K<-2147483648&&(K=-2147483648),rt(K=+K)&&(K=Me?0:$.length-1),K<0&&(K=$.length+K),K>=$.length){if(Me)return-1;K=$.length-1}else if(K<0){if(!Me)return-1;K=0}if("string"==typeof k&&(k=v.from(k,he)),v.isBuffer(k))return 0===k.length?-1:_e($,k,K,he,Me);if("number"==typeof k)return k&=255,"function"==typeof Uint8Array.prototype.indexOf?Me?Uint8Array.prototype.indexOf.call($,k,K):Uint8Array.prototype.lastIndexOf.call($,k,K):_e($,[k],K,he,Me);throw new TypeError("val must be string, number or Buffer")}function _e($,k,K,he,Me){var zt,Ye=1,it=$.length,It=k.length;if(void 0!==he&&("ucs2"===(he=String(he).toLowerCase())||"ucs-2"===he||"utf16le"===he||"utf-16le"===he)){if($.length<2||k.length<2)return-1;Ye=2,it/=2,It/=2,K/=2}function At(Wt,Ot){return 1===Ye?Wt[Ot]:Wt.readUInt16BE(Ot*Ye)}if(Me){var Xt=-1;for(zt=K;zt<it;zt++)if(At($,zt)===At(k,-1===Xt?0:zt-Xt)){if(-1===Xt&&(Xt=zt),zt-Xt+1===It)return Xt*Ye}else-1!==Xt&&(zt-=zt-Xt),Xt=-1}else for(K+It>it&&(K=it-It),zt=K;zt>=0;zt--){for(var Pe=!0,Dn=0;Dn<It;Dn++)if(At($,zt+Dn)!==At(k,Dn)){Pe=!1;break}if(Pe)return zt}return-1}function pe($,k,K,he){K=Number(K)||0;var Me=$.length-K;he?(he=Number(he))>Me&&(he=Me):he=Me;var Ye=k.length;he>Ye/2&&(he=Ye/2);for(var it=0;it<he;++it){var It=parseInt(k.substr(2*it,2),16);if(rt(It))return it;$[K+it]=It}return it}function g($,k,K,he){return ce(te(k,$.length-K),$,K,he)}function A($,k,K,he){return ce(function ae($){for(var k=[],K=0;K<$.length;++K)k.push(255&$.charCodeAt(K));return k}(k),$,K,he)}function y($,k,K,he){return A($,k,K,he)}function E($,k,K,he){return ce(ze(k),$,K,he)}function D($,k,K,he){return ce(function Te($,k){for(var K,he,Ye=[],it=0;it<$.length&&!((k-=2)<0);++it)he=(K=$.charCodeAt(it))>>8,Ye.push(K%256),Ye.push(he);return Ye}(k,$.length-K),$,K,he)}function P($,k,K){return o.fromByteArray(0===k&&K===$.length?$:$.slice(k,K))}function ne($,k,K){K=Math.min($.length,K);for(var he=[],Me=k;Me<K;){var At,zt,Xt,Pe,Ye=$[Me],it=null,It=Ye>239?4:Ye>223?3:Ye>191?2:1;if(Me+It<=K)switch(It){case 1:Ye<128&&(it=Ye);break;case 2:128==(192&(At=$[Me+1]))&&(Pe=(31&Ye)<<6|63&At)>127&&(it=Pe);break;case 3:zt=$[Me+2],128==(192&(At=$[Me+1]))&&128==(192&zt)&&(Pe=(15&Ye)<<12|(63&At)<<6|63&zt)>2047&&(Pe<55296||Pe>57343)&&(it=Pe);break;case 4:zt=$[Me+2],Xt=$[Me+3],128==(192&(At=$[Me+1]))&&128==(192&zt)&&128==(192&Xt)&&(Pe=(15&Ye)<<18|(63&At)<<12|(63&zt)<<6|63&Xt)>65535&&Pe<1114112&&(it=Pe)}null===it?(it=65533,It=1):it>65535&&(he.push((it-=65536)>>>10&1023|55296),it=56320|1023&it),he.push(it),Me+=It}return function Oe($){var k=$.length;if(k<=4096)return String.fromCharCode.apply(String,$);for(var K="",he=0;he<k;)K+=String.fromCharCode.apply(String,$.slice(he,he+=4096));return K}(he)}function oe($,k,K){var he="";K=Math.min($.length,K);for(var Me=k;Me<K;++Me)he+=String.fromCharCode(127&$[Me]);return he}function Ge($,k,K){var he="";K=Math.min($.length,K);for(var Me=k;Me<K;++Me)he+=String.fromCharCode($[Me]);return he}function at($,k,K){var he=$.length;(!k||k<0)&&(k=0),(!K||K<0||K>he)&&(K=he);for(var Me="",Ye=k;Ye<K;++Ye)Me+=ye[$[Ye]];return Me}function Fe($,k,K){for(var he=$.slice(k,K),Me="",Ye=0;Ye<he.length;Ye+=2)Me+=String.fromCharCode(he[Ye]+256*he[Ye+1]);return Me}function We($,k,K){if($%1!=0||$<0)throw new RangeError("offset is not uint");if($+k>K)throw new RangeError("Trying to access beyond buffer length")}function Qe($,k,K,he,Me,Ye){if(!v.isBuffer($))throw new TypeError('"buffer" argument must be a Buffer instance');if(k>Me||k<Ye)throw new RangeError('"value" argument is out of bounds');if(K+he>$.length)throw new RangeError("Index out of range")}function ft($,k,K,he,Me,Ye){if(K+he>$.length)throw new RangeError("Index out of range");if(K<0)throw new RangeError("Index out of range")}function Ze($,k,K,he,Me){return k=+k,K>>>=0,Me||ft($,0,K,4),C.write($,k,K,he,23,4),K+4}function Ue($,k,K,he,Me){return k=+k,K>>>=0,Me||ft($,0,K,8),C.write($,k,K,he,52,8),K+8}!(v.TYPED_ARRAY_SUPPORT=function d(){try{var $=new Uint8Array(1),k={foo:function(){return 42}};return Object.setPrototypeOf(k,Uint8Array.prototype),Object.setPrototypeOf($,k),42===$.foo()}catch{return!1}}())&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(v.prototype,"parent",{enumerable:!0,get:function(){if(v.isBuffer(this))return this.buffer}}),Object.defineProperty(v.prototype,"offset",{enumerable:!0,get:function(){if(v.isBuffer(this))return this.byteOffset}}),v.poolSize=8192,v.from=function($,k,K){return N($,k,K)},Object.setPrototypeOf(v.prototype,Uint8Array.prototype),Object.setPrototypeOf(v,Uint8Array),v.alloc=function($,k,K){return function L($,k,K){return M($),$<=0?m($):void 0!==k?"string"==typeof K?m($).fill(k,K):m($).fill(k):m($)}($,k,K)},v.allocUnsafe=function($){return X($)},v.allocUnsafeSlow=function($){return X($)},v.isBuffer=function(k){return null!=k&&!0===k._isBuffer&&k!==v.prototype},v.compare=function(k,K){if(me(k,Uint8Array)&&(k=v.from(k,k.offset,k.byteLength)),me(K,Uint8Array)&&(K=v.from(K,K.offset,K.byteLength)),!v.isBuffer(k)||!v.isBuffer(K))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(k===K)return 0;for(var he=k.length,Me=K.length,Ye=0,it=Math.min(he,Me);Ye<it;++Ye)if(k[Ye]!==K[Ye]){he=k[Ye],Me=K[Ye];break}return he<Me?-1:Me<he?1:0},v.isEncoding=function(k){switch(String(k).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},v.concat=function(k,K){if(!Array.isArray(k))throw new TypeError('"list" argument must be an Array of Buffers');if(0===k.length)return v.alloc(0);var he;if(void 0===K)for(K=0,he=0;he<k.length;++he)K+=k[he].length;var Me=v.allocUnsafe(K),Ye=0;for(he=0;he<k.length;++he){var it=k[he];if(me(it,Uint8Array)&&(it=v.from(it)),!v.isBuffer(it))throw new TypeError('"list" argument must be an Array of Buffers');it.copy(Me,Ye),Ye+=it.length}return Me},v.byteLength=z,v.prototype._isBuffer=!0,v.prototype.swap16=function(){var k=this.length;if(k%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var K=0;K<k;K+=2)ee(this,K,K+1);return this},v.prototype.swap32=function(){var k=this.length;if(k%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var K=0;K<k;K+=4)ee(this,K,K+3),ee(this,K+1,K+2);return this},v.prototype.swap64=function(){var k=this.length;if(k%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var K=0;K<k;K+=8)ee(this,K,K+7),ee(this,K+1,K+6),ee(this,K+2,K+5),ee(this,K+3,K+4);return this},v.prototype.toLocaleString=v.prototype.toString=function(){var k=this.length;return 0===k?"":0===arguments.length?ne(this,0,k):U.apply(this,arguments)},v.prototype.equals=function(k){if(!v.isBuffer(k))throw new TypeError("Argument must be a Buffer");return this===k||0===v.compare(this,k)},v.prototype.inspect=function(){var k="",K=O.h2;return k=this.toString("hex",0,K).replace(/(.{2})/g,"$1 ").trim(),this.length>K&&(k+=" ... "),"<Buffer "+k+">"},F&&(v.prototype[F]=v.prototype.inspect),v.prototype.compare=function(k,K,he,Me,Ye){if(me(k,Uint8Array)&&(k=v.from(k,k.offset,k.byteLength)),!v.isBuffer(k))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof k);if(void 0===K&&(K=0),void 0===he&&(he=k?k.length:0),void 0===Me&&(Me=0),void 0===Ye&&(Ye=this.length),K<0||he>k.length||Me<0||Ye>this.length)throw new RangeError("out of range index");if(Me>=Ye&&K>=he)return 0;if(Me>=Ye)return-1;if(K>=he)return 1;if(this===k)return 0;for(var it=(Ye>>>=0)-(Me>>>=0),It=(he>>>=0)-(K>>>=0),At=Math.min(it,It),zt=this.slice(Me,Ye),Xt=k.slice(K,he),Pe=0;Pe<At;++Pe)if(zt[Pe]!==Xt[Pe]){it=zt[Pe],It=Xt[Pe];break}return it<It?-1:It<it?1:0},v.prototype.includes=function(k,K,he){return-1!==this.indexOf(k,K,he)},v.prototype.indexOf=function(k,K,he){return ge(this,k,K,he,!0)},v.prototype.lastIndexOf=function(k,K,he){return ge(this,k,K,he,!1)},v.prototype.write=function(k,K,he,Me){if(void 0===K)Me="utf8",he=this.length,K=0;else if(void 0===he&&"string"==typeof K)Me=K,he=this.length,K=0;else{if(!isFinite(K))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");K>>>=0,isFinite(he)?(he>>>=0,void 0===Me&&(Me="utf8")):(Me=he,he=void 0)}var Ye=this.length-K;if((void 0===he||he>Ye)&&(he=Ye),k.length>0&&(he<0||K<0)||K>this.length)throw new RangeError("Attempt to write outside buffer bounds");Me||(Me="utf8");for(var it=!1;;)switch(Me){case"hex":return pe(this,k,K,he);case"utf8":case"utf-8":return g(this,k,K,he);case"ascii":return A(this,k,K,he);case"latin1":case"binary":return y(this,k,K,he);case"base64":return E(this,k,K,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,k,K,he);default:if(it)throw new TypeError("Unknown encoding: "+Me);Me=(""+Me).toLowerCase(),it=!0}},v.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},v.prototype.slice=function(k,K){var he=this.length;(k=~~k)<0?(k+=he)<0&&(k=0):k>he&&(k=he),(K=void 0===K?he:~~K)<0?(K+=he)<0&&(K=0):K>he&&(K=he),K<k&&(K=k);var Me=this.subarray(k,K);return Object.setPrototypeOf(Me,v.prototype),Me},v.prototype.readUIntLE=function(k,K,he){k>>>=0,K>>>=0,he||We(k,K,this.length);for(var Me=this[k],Ye=1,it=0;++it<K&&(Ye*=256);)Me+=this[k+it]*Ye;return Me},v.prototype.readUIntBE=function(k,K,he){k>>>=0,K>>>=0,he||We(k,K,this.length);for(var Me=this[k+--K],Ye=1;K>0&&(Ye*=256);)Me+=this[k+--K]*Ye;return Me},v.prototype.readUInt8=function(k,K){return k>>>=0,K||We(k,1,this.length),this[k]},v.prototype.readUInt16LE=function(k,K){return k>>>=0,K||We(k,2,this.length),this[k]|this[k+1]<<8},v.prototype.readUInt16BE=function(k,K){return k>>>=0,K||We(k,2,this.length),this[k]<<8|this[k+1]},v.prototype.readUInt32LE=function(k,K){return k>>>=0,K||We(k,4,this.length),(this[k]|this[k+1]<<8|this[k+2]<<16)+16777216*this[k+3]},v.prototype.readUInt32BE=function(k,K){return k>>>=0,K||We(k,4,this.length),16777216*this[k]+(this[k+1]<<16|this[k+2]<<8|this[k+3])},v.prototype.readIntLE=function(k,K,he){k>>>=0,K>>>=0,he||We(k,K,this.length);for(var Me=this[k],Ye=1,it=0;++it<K&&(Ye*=256);)Me+=this[k+it]*Ye;return Me>=(Ye*=128)&&(Me-=Math.pow(2,8*K)),Me},v.prototype.readIntBE=function(k,K,he){k>>>=0,K>>>=0,he||We(k,K,this.length);for(var Me=K,Ye=1,it=this[k+--Me];Me>0&&(Ye*=256);)it+=this[k+--Me]*Ye;return it>=(Ye*=128)&&(it-=Math.pow(2,8*K)),it},v.prototype.readInt8=function(k,K){return k>>>=0,K||We(k,1,this.length),128&this[k]?-1*(255-this[k]+1):this[k]},v.prototype.readInt16LE=function(k,K){k>>>=0,K||We(k,2,this.length);var he=this[k]|this[k+1]<<8;return 32768&he?4294901760|he:he},v.prototype.readInt16BE=function(k,K){k>>>=0,K||We(k,2,this.length);var he=this[k+1]|this[k]<<8;return 32768&he?4294901760|he:he},v.prototype.readInt32LE=function(k,K){return k>>>=0,K||We(k,4,this.length),this[k]|this[k+1]<<8|this[k+2]<<16|this[k+3]<<24},v.prototype.readInt32BE=function(k,K){return k>>>=0,K||We(k,4,this.length),this[k]<<24|this[k+1]<<16|this[k+2]<<8|this[k+3]},v.prototype.readFloatLE=function(k,K){return k>>>=0,K||We(k,4,this.length),C.read(this,k,!0,23,4)},v.prototype.readFloatBE=function(k,K){return k>>>=0,K||We(k,4,this.length),C.read(this,k,!1,23,4)},v.prototype.readDoubleLE=function(k,K){return k>>>=0,K||We(k,8,this.length),C.read(this,k,!0,52,8)},v.prototype.readDoubleBE=function(k,K){return k>>>=0,K||We(k,8,this.length),C.read(this,k,!1,52,8)},v.prototype.writeUIntLE=function(k,K,he,Me){k=+k,K>>>=0,he>>>=0,Me||Qe(this,k,K,he,Math.pow(2,8*he)-1,0);var it=1,It=0;for(this[K]=255&k;++It<he&&(it*=256);)this[K+It]=k/it&255;return K+he},v.prototype.writeUIntBE=function(k,K,he,Me){k=+k,K>>>=0,he>>>=0,Me||Qe(this,k,K,he,Math.pow(2,8*he)-1,0);var it=he-1,It=1;for(this[K+it]=255&k;--it>=0&&(It*=256);)this[K+it]=k/It&255;return K+he},v.prototype.writeUInt8=function(k,K,he){return k=+k,K>>>=0,he||Qe(this,k,K,1,255,0),this[K]=255&k,K+1},v.prototype.writeUInt16LE=function(k,K,he){return k=+k,K>>>=0,he||Qe(this,k,K,2,65535,0),this[K]=255&k,this[K+1]=k>>>8,K+2},v.prototype.writeUInt16BE=function(k,K,he){return k=+k,K>>>=0,he||Qe(this,k,K,2,65535,0),this[K]=k>>>8,this[K+1]=255&k,K+2},v.prototype.writeUInt32LE=function(k,K,he){return k=+k,K>>>=0,he||Qe(this,k,K,4,4294967295,0),this[K+3]=k>>>24,this[K+2]=k>>>16,this[K+1]=k>>>8,this[K]=255&k,K+4},v.prototype.writeUInt32BE=function(k,K,he){return k=+k,K>>>=0,he||Qe(this,k,K,4,4294967295,0),this[K]=k>>>24,this[K+1]=k>>>16,this[K+2]=k>>>8,this[K+3]=255&k,K+4},v.prototype.writeIntLE=function(k,K,he,Me){if(k=+k,K>>>=0,!Me){var Ye=Math.pow(2,8*he-1);Qe(this,k,K,he,Ye-1,-Ye)}var it=0,It=1,At=0;for(this[K]=255&k;++it<he&&(It*=256);)k<0&&0===At&&0!==this[K+it-1]&&(At=1),this[K+it]=(k/It>>0)-At&255;return K+he},v.prototype.writeIntBE=function(k,K,he,Me){if(k=+k,K>>>=0,!Me){var Ye=Math.pow(2,8*he-1);Qe(this,k,K,he,Ye-1,-Ye)}var it=he-1,It=1,At=0;for(this[K+it]=255&k;--it>=0&&(It*=256);)k<0&&0===At&&0!==this[K+it+1]&&(At=1),this[K+it]=(k/It>>0)-At&255;return K+he},v.prototype.writeInt8=function(k,K,he){return k=+k,K>>>=0,he||Qe(this,k,K,1,127,-128),k<0&&(k=255+k+1),this[K]=255&k,K+1},v.prototype.writeInt16LE=function(k,K,he){return k=+k,K>>>=0,he||Qe(this,k,K,2,32767,-32768),this[K]=255&k,this[K+1]=k>>>8,K+2},v.prototype.writeInt16BE=function(k,K,he){return k=+k,K>>>=0,he||Qe(this,k,K,2,32767,-32768),this[K]=k>>>8,this[K+1]=255&k,K+2},v.prototype.writeInt32LE=function(k,K,he){return k=+k,K>>>=0,he||Qe(this,k,K,4,2147483647,-2147483648),this[K]=255&k,this[K+1]=k>>>8,this[K+2]=k>>>16,this[K+3]=k>>>24,K+4},v.prototype.writeInt32BE=function(k,K,he){return k=+k,K>>>=0,he||Qe(this,k,K,4,2147483647,-2147483648),k<0&&(k=4294967295+k+1),this[K]=k>>>24,this[K+1]=k>>>16,this[K+2]=k>>>8,this[K+3]=255&k,K+4},v.prototype.writeFloatLE=function(k,K,he){return Ze(this,k,K,!0,he)},v.prototype.writeFloatBE=function(k,K,he){return Ze(this,k,K,!1,he)},v.prototype.writeDoubleLE=function(k,K,he){return Ue(this,k,K,!0,he)},v.prototype.writeDoubleBE=function(k,K,he){return Ue(this,k,K,!1,he)},v.prototype.copy=function(k,K,he,Me){if(!v.isBuffer(k))throw new TypeError("argument should be a Buffer");if(he||(he=0),!Me&&0!==Me&&(Me=this.length),K>=k.length&&(K=k.length),K||(K=0),Me>0&&Me<he&&(Me=he),Me===he||0===k.length||0===this.length)return 0;if(K<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(Me<0)throw new RangeError("sourceEnd out of bounds");Me>this.length&&(Me=this.length),k.length-K<Me-he&&(Me=k.length-K+he);var Ye=Me-he;if(this===k&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(K,he,Me);else if(this===k&&he<K&&K<Me)for(var it=Ye-1;it>=0;--it)k[it+K]=this[it+he];else Uint8Array.prototype.set.call(k,this.subarray(he,Me),K);return Ye},v.prototype.fill=function(k,K,he,Me){if("string"==typeof k){if("string"==typeof K?(Me=K,K=0,he=this.length):"string"==typeof he&&(Me=he,he=this.length),void 0!==Me&&"string"!=typeof Me)throw new TypeError("encoding must be a string");if("string"==typeof Me&&!v.isEncoding(Me))throw new TypeError("Unknown encoding: "+Me);if(1===k.length){var Ye=k.charCodeAt(0);("utf8"===Me&&Ye<128||"latin1"===Me)&&(k=Ye)}}else"number"==typeof k?k&=255:"boolean"==typeof k&&(k=Number(k));if(K<0||this.length<K||this.length<he)throw new RangeError("Out of range index");if(he<=K)return this;var it;if(K>>>=0,he=void 0===he?this.length:he>>>0,k||(k=0),"number"==typeof k)for(it=K;it<he;++it)this[it]=k;else{var It=v.isBuffer(k)?k:v.from(k,Me),At=It.length;if(0===At)throw new TypeError('The value "'+k+'" is invalid for argument "value"');for(it=0;it<he-K;++it)this[it+K]=It[it%At]}return this};var nt=/[^+/0-9A-Za-z-_]/g;function te($,k){k=k||1/0;for(var K,he=$.length,Me=null,Ye=[],it=0;it<he;++it){if((K=$.charCodeAt(it))>55295&&K<57344){if(!Me){if(K>56319){(k-=3)>-1&&Ye.push(239,191,189);continue}if(it+1===he){(k-=3)>-1&&Ye.push(239,191,189);continue}Me=K;continue}if(K<56320){(k-=3)>-1&&Ye.push(239,191,189),Me=K;continue}K=65536+(Me-55296<<10|K-56320)}else Me&&(k-=3)>-1&&Ye.push(239,191,189);if(Me=null,K<128){if((k-=1)<0)break;Ye.push(K)}else if(K<2048){if((k-=2)<0)break;Ye.push(K>>6|192,63&K|128)}else if(K<65536){if((k-=3)<0)break;Ye.push(K>>12|224,K>>6&63|128,63&K|128)}else{if(!(K<1114112))throw new Error("Invalid code point");if((k-=4)<0)break;Ye.push(K>>18|240,K>>12&63|128,K>>6&63|128,63&K|128)}}return Ye}function ze($){return o.toByteArray(function de($){if(($=($=$.split("=")[0]).trim().replace(nt,"")).length<2)return"";for(;$.length%4!=0;)$+="=";return $}($))}function ce($,k,K,he){for(var Me=0;Me<he&&!(Me+K>=k.length||Me>=$.length);++Me)k[Me+K]=$[Me];return Me}function me($,k){return $ instanceof k||null!=$&&null!=$.constructor&&null!=$.constructor.name&&$.constructor.name===k.name}function rt($){return $!=$}var ye=function(){for(var $="0123456789abcdef",k=new Array(256),K=0;K<16;++K)for(var he=16*K,Me=0;Me<16;++Me)k[he+Me]=$[K]+$[Me];return k}()},3045:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.AwsCrc32=void 0;var I=x(9485),o=x(7008),C=x(9262),F=function(){function j(){this.crc32=new C.Crc32}return j.prototype.update=function(d){(0,o.isEmptyData)(d)||this.crc32.update((0,o.convertToBuffer)(d))},j.prototype.digest=function(){return(0,I.__awaiter)(this,void 0,void 0,function(){return(0,I.__generator)(this,function(d){return[2,(0,o.numToUint8)(this.crc32.digest())]})})},j}();O.AwsCrc32=F},9262:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.AwsCrc32=O.Crc32=O.crc32=void 0;var I=x(9485),o=x(7008);O.crc32=function C(v){return(new F).update(v).digest()};var F=function(){function v(){this.checksum=4294967295}return v.prototype.update=function(N){var M,L;try{for(var X=(0,I.__values)(N),H=X.next();!H.done;H=X.next())this.checksum=this.checksum>>>8^d[255&(this.checksum^H.value)]}catch(q){M={error:q}}finally{try{H&&!H.done&&(L=X.return)&&L.call(X)}finally{if(M)throw M.error}}return this},v.prototype.digest=function(){return(4294967295^this.checksum)>>>0},v}();O.Crc32=F;var d=(0,o.uint32ArrayFrom)([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),m=x(3045);Object.defineProperty(O,"AwsCrc32",{enumerable:!0,get:function(){return m.AwsCrc32}})},9502:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.convertToBuffer=void 0;var I=x(8995),o="undefined"!=typeof Buffer&&Buffer.from?function(F){return Buffer.from(F,"utf8")}:I.fromUtf8;O.convertToBuffer=function C(F){return F instanceof Uint8Array?F:"string"==typeof F?o(F):ArrayBuffer.isView(F)?new Uint8Array(F.buffer,F.byteOffset,F.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(F)}},7008:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.uint32ArrayFrom=O.numToUint8=O.isEmptyData=O.convertToBuffer=void 0;var I=x(9502);Object.defineProperty(O,"convertToBuffer",{enumerable:!0,get:function(){return I.convertToBuffer}});var o=x(137);Object.defineProperty(O,"isEmptyData",{enumerable:!0,get:function(){return o.isEmptyData}});var C=x(828);Object.defineProperty(O,"numToUint8",{enumerable:!0,get:function(){return C.numToUint8}});var F=x(5545);Object.defineProperty(O,"uint32ArrayFrom",{enumerable:!0,get:function(){return F.uint32ArrayFrom}})},137:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.isEmptyData=void 0,O.isEmptyData=function x(I){return"string"==typeof I?0===I.length:0===I.byteLength}},828:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.numToUint8=void 0,O.numToUint8=function x(I){return new Uint8Array([(4278190080&I)>>24,(16711680&I)>>16,(65280&I)>>8,255&I])}},5545:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.uint32ArrayFrom=void 0,O.uint32ArrayFrom=function x(I){if(!Uint32Array.from){for(var o=new Uint32Array(I.length),C=0;C<I.length;)o[C]=I[C],C+=1;return o}return Uint32Array.from(I)}},2521:(we,O,x)=>{x.r(O),x.d(O,{locateWindow:()=>o});var I={};function o(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:I}},8995:(we,O,x)=>{x.r(O),x.d(O,{fromUtf8:()=>j,toUtf8:()=>d});var j=function(m){return"function"==typeof TextEncoder?function C(m){return(new TextEncoder).encode(m)}(m):function(m){for(var v=[],N=0,M=m.length;N<M;N++){var L=m.charCodeAt(N);if(L<128)v.push(L);else if(L<2048)v.push(L>>6|192,63&L|128);else if(N+1<m.length&&55296==(64512&L)&&56320==(64512&m.charCodeAt(N+1))){var X=65536+((1023&L)<<10)+(1023&m.charCodeAt(++N));v.push(X>>18|240,X>>12&63|128,X>>6&63|128,63&X|128)}else v.push(L>>12|224,L>>6&63|128,63&L|128)}return Uint8Array.from(v)}(m)},d=function(m){return"function"==typeof TextDecoder?function F(m){return new TextDecoder("utf-8").decode(m)}(m):function(m){for(var v="",N=0,M=m.length;N<M;N++){var L=m[N];if(L<128)v+=String.fromCharCode(L);else if(192<=L&&L<224){var X=m[++N];v+=String.fromCharCode((31&L)<<6|63&X)}else if(240<=L&&L<365){var Q="%"+[L,m[++N],m[++N],m[++N]].map(function(q){return q.toString(16)}).join("%");v+=decodeURIComponent(Q)}else v+=String.fromCharCode((15&L)<<12|(63&m[++N])<<6|63&m[++N])}return v}(m)}},3389:(we,O,x)=>{x.r(O);var I=x(1481),o=x(2207),C=x(702),F=x(658),j=x(8746),d=x(4006),m=x(1135),v=x(8306),N=x(6451),M=x(7579);function L(e){for(let n in e){let t=e[n]||"";switch(n){case"display":e.display="flex"===t?["-webkit-flex","flex"]:"inline-flex"===t?["-webkit-inline-flex","inline-flex"]:t;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":e["-webkit-"+n]=t;break;case"flex-direction":t=t||"row",e["-webkit-flex-direction"]=t,e["flex-direction"]=t;break;case"order":e.order=e["-webkit-"+n]=isNaN(+t)?"0":t}}return e}const X="inline",H=["row","column","row-reverse","column-reverse"];function Q(e){let[n,t,r]=q(e);return function B(e,n=null,t=!1){return{display:t?"inline-flex":"flex","box-sizing":"border-box","flex-direction":e,"flex-wrap":n||null}}(n,t,r)}function q(e){e=e?.toLowerCase()??"";let[n,t,r]=e.split(" ");return H.find(s=>s===n)||(n=H[0]),t===X&&(t=r!==X?r:"",r=X),[n,le(t),!!r]}function Y(e){let[n]=q(e);return n.indexOf("row")>-1}function le(e){if(e)switch(e.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":e="wrap-reverse";break;case"no":case"none":case"nowrap":e="nowrap";break;default:e="wrap"}return e}function z(e,...n){if(null==e)throw TypeError("Cannot convert undefined or null to object");for(let t of n)if(null!=t)for(let r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}var U=x(9300),ee=x(8505);const _e={provide:o.APP_BOOTSTRAP_LISTENER,useFactory:function ge(e,n){return()=>{if((0,C.isPlatformBrowser)(n)){const t=Array.from(e.querySelectorAll(`[class*=${pe}]`)),r=/\bflex-layout-.+?\b/g;t.forEach(s=>{s.classList.contains(`${pe}ssr`)&&s.parentNode?s.parentNode.removeChild(s):s.className.replace(r,"")})}}},deps:[C.DOCUMENT,o.PLATFORM_ID],multi:!0},pe="flex-layout-";let g=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({providers:[_e]}),e})();class A{constructor(n=!1,t="all",r="",s="",a=0){this.matches=n,this.mediaQuery=t,this.mqAlias=r,this.suffix=s,this.priority=a,this.property=""}clone(){return new A(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let y=(()=>{class e{constructor(){this.stylesheet=new Map}addStyleToElement(t,r,s){const a=this.stylesheet.get(t);a?a.set(r,s):this.stylesheet.set(t,new Map([[r,s]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(t,r){const s=this.stylesheet.get(t);let a="";if(s){const l=s.get(r);("number"==typeof l||"string"==typeof l)&&(a=l+"")}return a}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const E={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[],multiplier:void 0,defaultUnit:"px",detectLayoutDisplay:!1},D=new o.InjectionToken("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>E}),P=new o.InjectionToken("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),ne=new o.InjectionToken("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function fe(e,n){return e=e?e.clone():new A,n&&(e.mqAlias=n.alias,e.mediaQuery=n.mediaQuery,e.suffix=n.suffix,e.priority=n.priority),e}class Oe{constructor(){this.shouldCache=!0}sideEffect(n,t,r){}}let oe=(()=>{class e{constructor(t,r,s,a){this._serverStylesheet=t,this._serverModuleLoaded=r,this._platformId=s,this.layoutConfig=a}applyStyleToElement(t,r,s=null){let a={};"string"==typeof r&&(a[r]=s,r=a),a=this.layoutConfig.disableVendorPrefixes?r:L(r),this._applyMultiValueStyleToElement(a,t)}applyStyleToElements(t,r=[]){const s=this.layoutConfig.disableVendorPrefixes?t:L(t);r.forEach(a=>{this._applyMultiValueStyleToElement(s,a)})}getFlowDirection(t){const r="flex-direction";let s=this.lookupStyle(t,r);return[s||"row",this.lookupInlineStyle(t,r)||(0,C.isPlatformServer)(this._platformId)&&this._serverModuleLoaded?s:""]}hasWrap(t){return"wrap"===this.lookupStyle(t,"flex-wrap")}lookupAttributeValue(t,r){return t.getAttribute(r)??""}lookupInlineStyle(t,r){return(0,C.isPlatformBrowser)(this._platformId)?t.style.getPropertyValue(r):function Ge(e,n){return We(e)[n]??""}(t,r)}lookupStyle(t,r,s=!1){let a="";return t&&((a=this.lookupInlineStyle(t,r))||((0,C.isPlatformBrowser)(this._platformId)?s||(a=getComputedStyle(t).getPropertyValue(r)):this._serverModuleLoaded&&(a=this._serverStylesheet.getStyleForElement(t,r)))),a?a.trim():""}_applyMultiValueStyleToElement(t,r){Object.keys(t).sort().forEach(s=>{const a=t[s],l=Array.isArray(a)?a:[a];l.sort();for(let u of l)u=u?u+"":"",(0,C.isPlatformBrowser)(this._platformId)||!this._serverModuleLoaded?(0,C.isPlatformBrowser)(this._platformId)?r.style.setProperty(s,u):at(r,s,u):this._serverStylesheet.addStyleToElement(r,s,u)})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(y),o.\u0275\u0275inject(P),o.\u0275\u0275inject(o.PLATFORM_ID),o.\u0275\u0275inject(D))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function at(e,n,t){n=n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const r=We(e);r[n]=t??"",function Fe(e,n){let t="";for(const r in n)n[r]&&(t+=`${r}:${n[r]};`);e.setAttribute("style",t)}(e,r)}function We(e){const n={},t=e.getAttribute("style");if(t){const r=t.split(/;+/g);for(let s=0;s<r.length;s++){const a=r[s].trim();if(a.length>0){const l=a.indexOf(":");if(-1===l)throw new Error(`Invalid CSS style: ${a}`);n[a.substr(0,l).trim()]=a.substr(l+1).trim()}}}return n}function Qe(e,n){return(n&&n.priority||0)-(e&&e.priority||0)}function ft(e,n){return(e.priority||0)-(n.priority||0)}let Ze=(()=>{class e{constructor(t,r,s){this._zone=t,this._platformId=r,this._document=s,this.source=new m.X(new A(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const t=[];return this.registry.forEach((r,s)=>{r.matches&&t.push(s)}),t}isActive(t){return this.registry.get(t)?.matches??this.registerQuery(t).some(s=>s.matches)}observe(t,r=!1){if(t&&t.length){const s=this._observable$.pipe((0,U.h)(l=>!r||t.indexOf(l.mediaQuery)>-1)),a=new v.y(l=>{const u=this.registerQuery(t);if(u.length){const p=u.pop();u.forEach(h=>{l.next(h)}),this.source.next(p)}l.complete()});return(0,N.T)(a,s)}return this._observable$}registerQuery(t){const r=Array.isArray(t)?t:[t],s=[];return function nt(e,n){const t=e.filter(r=>!Ue[r]);if(t.length>0){const r=t.join(", ");try{const s=n.createElement("style");s.setAttribute("type","text/css"),s.styleSheet||s.appendChild(n.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${r} {.fx-query-test{ }}\n`)),n.head.appendChild(s),t.forEach(a=>Ue[a]=s)}catch(s){console.error(s)}}}(r,this._document),r.forEach(a=>{const l=p=>{this._zone.run(()=>this.source.next(new A(p.matches,a)))};let u=this.registry.get(a);u||(u=this.buildMQL(a),u.addListener(l),this.pendingRemoveListenerFns.push(()=>u.removeListener(l)),this.registry.set(a,u)),u.matches&&s.push(new A(!0,a))}),s}ngOnDestroy(){let t;for(;t=this.pendingRemoveListenerFns.pop();)t()}buildMQL(t){return function de(e,n){return n&&window.matchMedia("all").addListener?window.matchMedia(e):{matches:"all"===e||""===e,media:e,addListener:()=>{},removeListener:()=>{},onchange:null,addEventListener(){},removeEventListener(){},dispatchEvent:()=>!1}}(t,(0,C.isPlatformBrowser)(this._platformId))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(o.NgZone),o.\u0275\u0275inject(o.PLATFORM_ID),o.\u0275\u0275inject(C.DOCUMENT))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Ue={},te=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],ae="(orientation: portrait) and (max-width: 599.98px)",Te="(orientation: landscape) and (max-width: 959.98px)",ze="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",ce="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",me="(orientation: portrait) and (min-width: 840px)",rt="(orientation: landscape) and (min-width: 1280px)",ye={HANDSET:`${ae}, ${Te}`,TABLET:`${ze} , ${ce}`,WEB:`${me}, ${rt} `,HANDSET_PORTRAIT:`${ae}`,TABLET_PORTRAIT:`${ze} `,WEB_PORTRAIT:`${me}`,HANDSET_LANDSCAPE:`${Te}`,TABLET_LANDSCAPE:`${ce}`,WEB_LANDSCAPE:`${rt}`},$=[{alias:"handset",priority:2e3,mediaQuery:ye.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:ye.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:ye.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:ye.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:ye.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:ye.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:ye.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:ye.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:ye.WEB_PORTRAIT,overlapping:!0}],k=/(\.|-|_)/g;function K(e){let n=e.length>0?e.charAt(0):"",t=e.length>1?e.slice(1):"";return n.toUpperCase()+t}const it=new o.InjectionToken("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const e=(0,o.inject)(ne),n=(0,o.inject)(D),t=[].concat.apply([],(e||[]).map(s=>Array.isArray(s)?s:[s]));return function Ye(e,n=[]){const t={};return e.forEach(r=>{t[r.alias]=r}),n.forEach(r=>{t[r.alias]?z(t[r.alias],r):t[r.alias]=r}),function Me(e){return e.forEach(n=>{n.suffix||(n.suffix=function he(e){return e.replace(k,"|").split("|").map(K).join("")}(n.alias),n.overlapping=!!n.overlapping)}),e}(Object.keys(t).map(r=>t[r]))}((n.disableDefaultBps?[]:te).concat(n.addOrientationBps?$:[]),t)}});let It=(()=>{class e{constructor(t){this.findByMap=new Map,this.items=[...t].sort(ft)}findByAlias(t){return t?this.findWithPredicate(t,r=>r.alias===t):null}findByQuery(t){return this.findWithPredicate(t,r=>r.mediaQuery===t)}get overlappings(){return this.items.filter(t=>t.overlapping)}get aliases(){return this.items.map(t=>t.alias)}get suffixes(){return this.items.map(t=>t?.suffix??"")}findWithPredicate(t,r){let s=this.findByMap.get(t);return s||(s=this.items.find(r)??null,this.findByMap.set(t,s)),s??null}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(it))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const At="print",zt={alias:At,mediaQuery:At,priority:1e3};let Xt=(()=>{class e{constructor(t,r,s){this.breakpoints=t,this.layoutConfig=r,this._document=s,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.formerActivations=null,this.isPrinting=!1,this.queue=new Pe,this.deactivations=[]}withPrintQuery(t){return[...t,At]}isPrintEvent(t){return t.mediaQuery.startsWith(At)}get printAlias(){return[...this.layoutConfig.printWithBreakpoints??[]]}get printBreakPoints(){return this.printAlias.map(t=>this.breakpoints.findByAlias(t)).filter(t=>null!==t)}getEventBreakpoints({mediaQuery:t}){const r=this.breakpoints.findByQuery(t);return(r?[...this.printBreakPoints,r]:this.printBreakPoints).sort(Qe)}updateEvent(t){let r=this.breakpoints.findByQuery(t.mediaQuery);return this.isPrintEvent(t)&&(r=this.getEventBreakpoints(t)[0],t.mediaQuery=r?.mediaQuery??""),fe(t,r)}registerBeforeAfterPrintHooks(t){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const r=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(t,this.getEventBreakpoints(new A(!0,At))),t.updateStyles())},s=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(t),t.updateStyles())};this._document.defaultView.addEventListener("beforeprint",r),this._document.defaultView.addEventListener("afterprint",s),this.beforePrintEventListeners.push(r),this.afterPrintEventListeners.push(s)}interceptEvents(t){return r=>{this.isPrintEvent(r)?r.matches&&!this.isPrinting?(this.startPrinting(t,this.getEventBreakpoints(r)),t.updateStyles()):!r.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(t),t.updateStyles()):this.collectActivations(t,r)}}blockPropagation(){return t=>!(this.isPrinting||this.isPrintEvent(t))}startPrinting(t,r){this.isPrinting=!0,this.formerActivations=t.activatedBreakpoints,t.activatedBreakpoints=this.queue.addPrintBreakpoints(r)}stopPrinting(t){t.activatedBreakpoints=this.deactivations,this.deactivations=[],this.formerActivations=null,this.queue.clear(),this.isPrinting=!1}collectActivations(t,r){if(!this.isPrinting||this.isPrintingBeforeAfterEvent){if(!this.isPrintingBeforeAfterEvent)return void(this.deactivations=[]);if(!r.matches){const s=this.breakpoints.findByQuery(r.mediaQuery);if(s){const a=this.formerActivations&&this.formerActivations.includes(s),l=!this.formerActivations&&t.activatedBreakpoints.includes(s);(a||l)&&(this.deactivations.push(s),this.deactivations.sort(Qe))}}}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("beforeprint",t)),this.afterPrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("afterprint",t)))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(It),o.\u0275\u0275inject(D),o.\u0275\u0275inject(C.DOCUMENT))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class Pe{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(n){return n.push(zt),n.sort(Qe),n.forEach(t=>this.addBreakpoint(t)),this.printBreakpoints}addBreakpoint(n){n&&void 0===this.printBreakpoints.find(r=>r.mediaQuery===n.mediaQuery)&&(this.printBreakpoints=function Dn(e){return e?.mediaQuery.startsWith(At)??!1}(n)?[n,...this.printBreakpoints]:[...this.printBreakpoints,n])}clear(){this.printBreakpoints=[]}}let Wt=(()=>{class e{constructor(t,r,s){this.matchMedia=t,this.breakpoints=r,this.hook=s,this._useFallbacks=!0,this._activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new M.x,this.observeActivations()}get activatedAlias(){return this.activatedBreakpoints[0]?.alias??""}set activatedBreakpoints(t){this._activatedBreakpoints=[...t]}get activatedBreakpoints(){return[...this._activatedBreakpoints]}set useFallbacks(t){this._useFallbacks=t}onMediaChange(t){const r=this.findByQuery(t.mediaQuery);if(r){t=fe(t,r);const s=this.activatedBreakpoints.indexOf(r);t.matches&&-1===s?(this._activatedBreakpoints.push(r),this._activatedBreakpoints.sort(Qe),this.updateStyles()):!t.matches&&-1!==s&&(this._activatedBreakpoints.splice(s,1),this._activatedBreakpoints.sort(Qe),this.updateStyles())}}init(t,r,s,a,l=[]){Ot(this.updateMap,t,r,s),Ot(this.clearMap,t,r,a),this.buildElementKeyMap(t,r),this.watchExtraTriggers(t,r,l)}getValue(t,r,s){const a=this.elementMap.get(t);if(a){const l=void 0!==s?a.get(s):this.getActivatedValues(a,r);if(l)return l.get(r)}}hasValue(t,r){const s=this.elementMap.get(t);if(s){const a=this.getActivatedValues(s,r);if(a)return void 0!==a.get(r)||!1}return!1}setValue(t,r,s,a){let l=this.elementMap.get(t);if(l){const p=(l.get(a)??new Map).set(r,s);l.set(a,p),this.elementMap.set(t,l)}else l=(new Map).set(a,(new Map).set(r,s)),this.elementMap.set(t,l);const u=this.getValue(t,r);void 0!==u&&this.updateElement(t,r,u)}trackValue(t,r){return this.subject.asObservable().pipe((0,U.h)(s=>s.element===t&&s.key===r))}updateStyles(){this.elementMap.forEach((t,r)=>{const s=new Set(this.elementKeyMap.get(r));let a=this.getActivatedValues(t);a&&a.forEach((l,u)=>{this.updateElement(r,u,l),s.delete(u)}),s.forEach(l=>{if(a=this.getActivatedValues(t,l),a){const u=a.get(l);this.updateElement(r,l,u)}else this.clearElement(r,l)})})}clearElement(t,r){const s=this.clearMap.get(t);if(s){const a=s.get(r);a&&(a(),this.subject.next({element:t,key:r,value:""}))}}updateElement(t,r,s){const a=this.updateMap.get(t);if(a){const l=a.get(r);l&&(l(s),this.subject.next({element:t,key:r,value:s}))}}releaseElement(t){const r=this.watcherMap.get(t);r&&(r.forEach(a=>a.unsubscribe()),this.watcherMap.delete(t));const s=this.elementMap.get(t);s&&(s.forEach((a,l)=>s.delete(l)),this.elementMap.delete(t))}triggerUpdate(t,r){const s=this.elementMap.get(t);if(s){const a=this.getActivatedValues(s,r);a&&(r?this.updateElement(t,r,a.get(r)):a.forEach((l,u)=>this.updateElement(t,u,l)))}}buildElementKeyMap(t,r){let s=this.elementKeyMap.get(t);s||(s=new Set,this.elementKeyMap.set(t,s)),s.add(r)}watchExtraTriggers(t,r,s){if(s&&s.length){let a=this.watcherMap.get(t);if(a||(a=new Map,this.watcherMap.set(t,a)),!a.get(r)){const u=(0,N.T)(...s).subscribe(()=>{const p=this.getValue(t,r);this.updateElement(t,r,p)});a.set(r,u)}}}findByQuery(t){return this.breakpoints.findByQuery(t)}getActivatedValues(t,r){for(let a=0;a<this.activatedBreakpoints.length;a++){const u=t.get(this.activatedBreakpoints[a].alias);if(u&&(void 0===r||u.has(r)&&null!=u.get(r)))return u}if(!this._useFallbacks)return;const s=t.get("");return void 0===r||s&&s.has(r)?s:void 0}observeActivations(){const t=this.breakpoints.items.map(r=>r.mediaQuery);this.hook.registerBeforeAfterPrintHooks(this),this.matchMedia.observe(this.hook.withPrintQuery(t)).pipe((0,ee.b)(this.hook.interceptEvents(this)),(0,U.h)(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Ze),o.\u0275\u0275inject(It),o.\u0275\u0275inject(Xt))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Ot(e,n,t,r){if(void 0!==r){const s=e.get(n)??new Map;s.set(t,r),e.set(n,s)}}let wn=(()=>{class e{constructor(t,r,s,a){this.elementRef=t,this.styleBuilder=r,this.styler=s,this.marshal=a,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new M.x,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(t){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,this.marshal.activatedAlias)}ngOnChanges(t){Object.keys(t).forEach(r=>{if(-1!==this.inputs.indexOf(r)){const s=r.split(".").slice(1).join(".");this.setValue(t[r].currentValue,s)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(t=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),t)}addStyles(t,r){const s=this.styleBuilder,a=s.shouldCache;let l=this.styleCache.get(t);(!l||!a)&&(l=s.buildStyles(t,r),a&&this.styleCache.set(t,l)),this.mru={...l},this.applyStyleToElement(l),s.sideEffect(t,l,r)}clearStyles(){Object.keys(this.mru).forEach(t=>{this.mru[t]=""}),this.applyStyleToElement(this.mru),this.mru={},this.currentValue=void 0}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(t,r=!1){if(t){const[s,a]=this.styler.getFlowDirection(t);if(!a&&r){const l=Q(s);this.styler.applyStyleToElements(l,[t])}return s.trim()}return"row"}hasWrap(t){return this.styler.hasWrap(t)}applyStyleToElement(t,r,s=this.nativeElement){this.styler.applyStyleToElement(s,t,r)}setValue(t,r){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,r)}updateWithValue(t){this.currentValue!==t&&(this.addStyles(t),this.currentValue=t)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(Oe),o.\u0275\u0275directiveInject(oe),o.\u0275\u0275directiveInject(Wt))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,features:[o.\u0275\u0275NgOnChangesFeature]}),e})();function _n(e,n="1",t="1"){let r=[n,t,e],s=e.indexOf("calc");if(s>0){r[2]=Mn(e.substring(s).trim());let a=e.substr(0,s).trim().split(" ");2==a.length&&(r[0]=a[0],r[1]=a[1])}else if(0==s)r[2]=Mn(e.trim());else{let a=e.split(" ");r=3===a.length?a:[n,t,e]}return r}function Mn(e){return e.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}x(1281);var Ir=x(2722);let ui=(()=>{class e extends wn{constructor(t,r,s,a,l,u,p){super(t,null,r,s),this.ngClassInstance=p,this.DIRECTIVE_KEY="ngClass",this.ngClassInstance||(this.ngClassInstance=new C.NgClass(a,l,t,u)),this.init(),this.setValue("","")}set klass(t){this.ngClassInstance.klass=t,this.setValue(t,"")}updateWithValue(t){this.ngClassInstance.ngClass=t,this.ngClassInstance.ngDoCheck()}ngDoCheck(){this.ngClassInstance.ngDoCheck()}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(oe),o.\u0275\u0275directiveInject(Wt),o.\u0275\u0275directiveInject(o.IterableDiffers),o.\u0275\u0275directiveInject(o.KeyValueDiffers),o.\u0275\u0275directiveInject(o.Renderer2),o.\u0275\u0275directiveInject(C.NgClass,10))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,inputs:{klass:["class","klass"]},features:[o.\u0275\u0275InheritDefinitionFeature]}),e})();const Pi=["ngClass","ngClass.xs","ngClass.sm","ngClass.md","ngClass.lg","ngClass.xl","ngClass.lt-sm","ngClass.lt-md","ngClass.lt-lg","ngClass.lt-xl","ngClass.gt-xs","ngClass.gt-sm","ngClass.gt-md","ngClass.gt-lg"];let Ur=(()=>{class e extends ui{constructor(){super(...arguments),this.inputs=Pi}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=o.\u0275\u0275getInheritedFactory(e)))(r||e)}}(),e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["","ngClass",""],["","ngClass.xs",""],["","ngClass.sm",""],["","ngClass.md",""],["","ngClass.lg",""],["","ngClass.xl",""],["","ngClass.lt-sm",""],["","ngClass.lt-md",""],["","ngClass.lt-lg",""],["","ngClass.lt-xl",""],["","ngClass.gt-xs",""],["","ngClass.gt-sm",""],["","ngClass.gt-md",""],["","ngClass.gt-lg",""]],inputs:{ngClass:"ngClass","ngClass.xs":"ngClass.xs","ngClass.sm":"ngClass.sm","ngClass.md":"ngClass.md","ngClass.lg":"ngClass.lg","ngClass.xl":"ngClass.xl","ngClass.lt-sm":"ngClass.lt-sm","ngClass.lt-md":"ngClass.lt-md","ngClass.lt-lg":"ngClass.lt-lg","ngClass.lt-xl":"ngClass.lt-xl","ngClass.gt-xs":"ngClass.gt-xs","ngClass.gt-sm":"ngClass.gt-sm","ngClass.gt-md":"ngClass.gt-md","ngClass.gt-lg":"ngClass.gt-lg"},features:[o.\u0275\u0275InheritDefinitionFeature]}),e})();class ci{constructor(n,t,r=!0){this.key=n,this.value=t,this.key=r?n.replace(/['"]/g,"").trim():n.trim(),this.value=r?t.replace(/['"]/g,"").trim():t.trim(),this.value=this.value.replace(/;/,"")}}function Gi(e){let n=typeof e;return"object"===n?e.constructor===Array?"array":e.constructor===Set?"set":"object":n}function oo(e){const[n,...t]=e.split(":");return new ci(n,t.join(":"))}function ns(e,n){return n.key&&(e[n.key]=n.value),e}let la=(()=>{class e extends wn{constructor(t,r,s,a,l,u,p,h,S){super(t,null,r,s),this.sanitizer=a,this.ngStyleInstance=p,this.DIRECTIVE_KEY="ngStyle",this.ngStyleInstance||(this.ngStyleInstance=new C.NgStyle(t,l,u)),this.init();const G=this.nativeElement.getAttribute("style")??"";this.fallbackStyles=this.buildStyleMap(G),this.isServer=h&&(0,C.isPlatformServer)(S)}updateWithValue(t){const r=this.buildStyleMap(t);this.ngStyleInstance.ngStyle={...this.fallbackStyles,...r},this.isServer&&this.applyStyleToElement(r),this.ngStyleInstance.ngDoCheck()}clearStyles(){this.ngStyleInstance.ngStyle=this.fallbackStyles,this.ngStyleInstance.ngDoCheck()}buildStyleMap(t){const r=s=>this.sanitizer.sanitize(o.SecurityContext.STYLE,s)??"";if(t)switch(Gi(t)){case"string":return rs(function En(e,n=";"){return String(e).trim().split(n).map(t=>t.trim()).filter(t=>""!==t)}(t),r);case"array":return rs(t,r);default:return function Ts(e,n){let t=[];return"set"===Gi(e)?e.forEach(r=>t.push(r)):Object.keys(e).forEach(r=>{t.push(`${r}:${e[r]}`)}),function Is(e,n){return e.map(oo).filter(r=>!!r).map(r=>(n&&(r.value=n(r.value)),r)).reduce(ns,{})}(t,n)}(t,r)}return{}}ngDoCheck(){this.ngStyleInstance.ngDoCheck()}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(oe),o.\u0275\u0275directiveInject(Wt),o.\u0275\u0275directiveInject(I.H7),o.\u0275\u0275directiveInject(o.KeyValueDiffers),o.\u0275\u0275directiveInject(o.Renderer2),o.\u0275\u0275directiveInject(C.NgStyle,10),o.\u0275\u0275directiveInject(P),o.\u0275\u0275directiveInject(o.PLATFORM_ID))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,features:[o.\u0275\u0275InheritDefinitionFeature]}),e})();const ua=["ngStyle","ngStyle.xs","ngStyle.sm","ngStyle.md","ngStyle.lg","ngStyle.xl","ngStyle.lt-sm","ngStyle.lt-md","ngStyle.lt-lg","ngStyle.lt-xl","ngStyle.gt-xs","ngStyle.gt-sm","ngStyle.gt-md","ngStyle.gt-lg"];let Co=(()=>{class e extends la{constructor(){super(...arguments),this.inputs=ua}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=o.\u0275\u0275getInheritedFactory(e)))(r||e)}}(),e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["","ngStyle",""],["","ngStyle.xs",""],["","ngStyle.sm",""],["","ngStyle.md",""],["","ngStyle.lg",""],["","ngStyle.xl",""],["","ngStyle.lt-sm",""],["","ngStyle.lt-md",""],["","ngStyle.lt-lg",""],["","ngStyle.lt-xl",""],["","ngStyle.gt-xs",""],["","ngStyle.gt-sm",""],["","ngStyle.gt-md",""],["","ngStyle.gt-lg",""]],inputs:{ngStyle:"ngStyle","ngStyle.xs":"ngStyle.xs","ngStyle.sm":"ngStyle.sm","ngStyle.md":"ngStyle.md","ngStyle.lg":"ngStyle.lg","ngStyle.xl":"ngStyle.xl","ngStyle.lt-sm":"ngStyle.lt-sm","ngStyle.lt-md":"ngStyle.lt-md","ngStyle.lt-lg":"ngStyle.lt-lg","ngStyle.lt-xl":"ngStyle.lt-xl","ngStyle.gt-xs":"ngStyle.gt-xs","ngStyle.gt-sm":"ngStyle.gt-sm","ngStyle.gt-md":"ngStyle.gt-md","ngStyle.gt-lg":"ngStyle.gt-lg"},features:[o.\u0275\u0275InheritDefinitionFeature]}),e})();function rs(e,n){return e.map(oo).filter(r=>!!r).map(r=>(n&&(r.value=n(r.value)),r)).reduce(ns,{})}let b=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[g]]}),e})();var _=x(445);let R=(()=>{class e extends Oe{buildStyles(t,{display:r}){const s=Q(t);return{...s,display:"none"===r?r:s.display}}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=o.\u0275\u0275getInheritedFactory(e)))(r||e)}}(),e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const T=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let se=(()=>{class e extends wn{constructor(t,r,s,a,l){super(t,s,r,a),this._config=l,this.DIRECTIVE_KEY="layout",this.init()}updateWithValue(t){const s=this._config.detectLayoutDisplay?this.styler.lookupStyle(this.nativeElement,"display"):"";this.styleCache=Se.get(s)??new Map,Se.set(s,this.styleCache),this.currentValue!==t&&(this.addStyles(t,{display:s}),this.currentValue=t)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(oe),o.\u0275\u0275directiveInject(R),o.\u0275\u0275directiveInject(Wt),o.\u0275\u0275directiveInject(D))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,features:[o.\u0275\u0275InheritDefinitionFeature]}),e})(),ue=(()=>{class e extends se{constructor(){super(...arguments),this.inputs=T}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=o.\u0275\u0275getInheritedFactory(e)))(r||e)}}(),e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[o.\u0275\u0275InheritDefinitionFeature]}),e})();const Se=new Map;let jt=(()=>{class e extends Oe{constructor(t){super(),this.layoutConfig=t}buildStyles(t,r){let[s,a,...l]=t.split(" "),u=l.join(" ");const p=r.direction.indexOf("column")>-1?"column":"row",h=Y(p)?"max-width":"max-height",S=Y(p)?"min-width":"min-height",G=String(u).indexOf("calc")>-1,W=G||"auto"===u,J=String(u).indexOf("%")>-1&&!G,ve=String(u).indexOf("px")>-1||String(u).indexOf("rem")>-1||String(u).indexOf("em")>-1||String(u).indexOf("vw")>-1||String(u).indexOf("vh")>-1;let Ne=G||ve;s="0"==s?0:s,a="0"==a?0:a;const Re=!s&&!a;let De={};const Je={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch(u||""){case"":const et=!1!==this.layoutConfig.useColumnBasisZero;u="row"===p?"0%":et?"0.000000001px":"auto";break;case"initial":case"nogrow":s=0,u="auto";break;case"grow":u="100%";break;case"noshrink":a=0,u="auto";break;case"auto":break;case"none":s=0,a=0,u="auto";break;default:!Ne&&!J&&!isNaN(u)&&(u+="%"),"0%"===u&&(Ne=!0),"0px"===u&&(u="0%"),De=z(Je,G?{"flex-grow":s,"flex-shrink":a,"flex-basis":Ne?u:"100%"}:{flex:`${s} ${a} ${Ne?u:"100%"}`})}return De.flex||De["flex-grow"]||(De=z(Je,G?{"flex-grow":s,"flex-shrink":a,"flex-basis":u}:{flex:`${s} ${a} ${u}`})),"0%"!==u&&"0px"!==u&&"0.000000001px"!==u&&"auto"!==u&&(De[S]=Re||Ne&&s?u:null,De[h]=Re||!W&&a?u:null),De[S]||De[h]?r.hasWrap&&(De[G?"flex-basis":"flex"]=De[h]?G?De[h]:`${s} ${a} ${De[h]}`:G?De[S]:`${s} ${a} ${De[S]}`):De=z(Je,G?{"flex-grow":s,"flex-shrink":a,"flex-basis":u}:{flex:`${s} ${a} ${u}`}),z(De,{"box-sizing":"border-box"})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(D))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Pt=["fxFlex","fxFlex.xs","fxFlex.sm","fxFlex.md","fxFlex.lg","fxFlex.xl","fxFlex.lt-sm","fxFlex.lt-md","fxFlex.lt-lg","fxFlex.lt-xl","fxFlex.gt-xs","fxFlex.gt-sm","fxFlex.gt-md","fxFlex.gt-lg"];let Mt=(()=>{class e extends wn{constructor(t,r,s,a,l){super(t,a,r,l),this.layoutConfig=s,this.marshal=l,this.DIRECTIVE_KEY="flex",this.direction=void 0,this.wrap=void 0,this.flexGrow="1",this.flexShrink="1",this.init()}get shrink(){return this.flexShrink}set shrink(t){this.flexShrink=t||"1",this.triggerReflow()}get grow(){return this.flexGrow}set grow(t){this.flexGrow=t||"1",this.triggerReflow()}ngOnInit(){this.parentElement&&(this.marshal.trackValue(this.parentElement,"layout").pipe((0,Ir.R)(this.destroySubject)).subscribe(this.onLayoutChange.bind(this)),this.marshal.trackValue(this.nativeElement,"layout-align").pipe((0,Ir.R)(this.destroySubject)).subscribe(this.triggerReflow.bind(this)))}onLayoutChange(t){const s=t.value.split(" ");this.direction=s[0],this.wrap=void 0!==s[1]&&"wrap"===s[1],this.triggerUpdate()}updateWithValue(t){void 0===this.direction&&(this.direction=this.getFlexFlowDirection(this.parentElement,!1!==this.layoutConfig.addFlexToParent)),void 0===this.wrap&&(this.wrap=this.hasWrap(this.parentElement));const s=this.direction,a=s.startsWith("row"),l=this.wrap;a&&l?this.styleCache=$n:a&&!l?this.styleCache=On:!a&&l?this.styleCache=Mr:!a&&!l&&(this.styleCache=Kn);const p=_n(String(t).replace(";",""),this.flexGrow,this.flexShrink);this.addStyles(p.join(" "),{direction:s,hasWrap:l})}triggerReflow(){const t=this.activatedValue;if(void 0!==t){const r=_n(t+"",this.flexGrow,this.flexShrink);this.marshal.updateElement(this.nativeElement,this.DIRECTIVE_KEY,r.join(" "))}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(oe),o.\u0275\u0275directiveInject(D),o.\u0275\u0275directiveInject(jt),o.\u0275\u0275directiveInject(Wt))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,inputs:{shrink:["fxShrink","shrink"],grow:["fxGrow","grow"]},features:[o.\u0275\u0275InheritDefinitionFeature]}),e})(),Ut=(()=>{class e extends Mt{constructor(){super(...arguments),this.inputs=Pt}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=o.\u0275\u0275getInheritedFactory(e)))(r||e)}}(),e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["","fxFlex",""],["","fxFlex.xs",""],["","fxFlex.sm",""],["","fxFlex.md",""],["","fxFlex.lg",""],["","fxFlex.xl",""],["","fxFlex.lt-sm",""],["","fxFlex.lt-md",""],["","fxFlex.lt-lg",""],["","fxFlex.lt-xl",""],["","fxFlex.gt-xs",""],["","fxFlex.gt-sm",""],["","fxFlex.gt-md",""],["","fxFlex.gt-lg",""]],inputs:{fxFlex:"fxFlex","fxFlex.xs":"fxFlex.xs","fxFlex.sm":"fxFlex.sm","fxFlex.md":"fxFlex.md","fxFlex.lg":"fxFlex.lg","fxFlex.xl":"fxFlex.xl","fxFlex.lt-sm":"fxFlex.lt-sm","fxFlex.lt-md":"fxFlex.lt-md","fxFlex.lt-lg":"fxFlex.lt-lg","fxFlex.lt-xl":"fxFlex.lt-xl","fxFlex.gt-xs":"fxFlex.gt-xs","fxFlex.gt-sm":"fxFlex.gt-sm","fxFlex.gt-md":"fxFlex.gt-md","fxFlex.gt-lg":"fxFlex.gt-lg"},features:[o.\u0275\u0275InheritDefinitionFeature]}),e})();const On=new Map,Kn=new Map,$n=new Map,Mr=new Map,jo={margin:0,width:"100%",height:"100%","min-width":"100%","min-height":"100%"};let so=(()=>{class e extends Oe{buildStyles(t){return jo}}return e.\u0275fac=function(){let n;return function(r){return(n||(n=o.\u0275\u0275getInheritedFactory(e)))(r||e)}}(),e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),An=(()=>{class e extends wn{constructor(t,r,s,a){super(t,s,r,a),this.styleCache=Ti,this.addStyles("")}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(oe),o.\u0275\u0275directiveInject(so),o.\u0275\u0275directiveInject(Wt))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["","fxFill",""],["","fxFlexFill",""]],features:[o.\u0275\u0275InheritDefinitionFeature]}),e})();const Ti=new Map;let hc=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[g,_.vT]]}),e})(),Wf=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[g]]}),e})(),al=(()=>{class e{constructor(t,r){(0,C.isPlatformServer)(r)&&!t&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(t,r=[]){return{ngModule:e,providers:t.serverLoaded?[{provide:D,useValue:{...E,...t}},{provide:ne,useValue:r,multi:!0},{provide:P,useValue:!0}]:[{provide:D,useValue:{...E,...t}},{provide:ne,useValue:r,multi:!0}]}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(P),o.\u0275\u0275inject(o.PLATFORM_ID))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[hc,b,Wf],hc,b,Wf]}),e})();function hm(e,n){1&e&&o.\u0275\u0275element(0,"div",9)}function nu(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"span",10),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(t.description)}}function mm(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"section",11),o.\u0275\u0275element(1,"ngx-json-viewer",12),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext().$implicit,r=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("json",t.value)("expanded",r.expanded)("depth",r.depth)("_currentDepth",r._currentDepth)}}const gm=function(e){return["segment",e]},vm=function(e,n){return{"segment-main":!0,expandable:e,expanded:n}};function ym(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"section",2),o.\u0275\u0275elementStart(1,"section",3),o.\u0275\u0275listener("click",function(){const a=o.\u0275\u0275restoreView(t).$implicit;return o.\u0275\u0275nextContext().toggle(a)}),o.\u0275\u0275template(2,hm,1,0,"div",4),o.\u0275\u0275elementStart(3,"span",5),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"span",6),o.\u0275\u0275text(6,": "),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(7,nu,2,1,"span",7),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(8,mm,2,4,"section",8),o.\u0275\u0275elementEnd()}if(2&e){const t=n.$implicit,r=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction1(6,gm,"segment-type-"+t.type)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction2(8,vm,r.isExpandable(t),t.expanded)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.isExpandable(t)),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(t.key),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",!t.expanded||!r.isExpandable(t)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.expanded&&r.isExpandable(t))}}let _m=(()=>{class e{constructor(){this.expanded=!0,this.depth=-1,this._currentDepth=-1,this.segments=[]}ngOnChanges(){this.segments=[],this.json=this.decycle(this.json),this._currentDepth++,"object"==typeof this.json?Object.keys(this.json).forEach(t=>{this.segments.push(this.parseKeyValue(t,this.json[t]))}):this.segments.push(this.parseKeyValue(`(${typeof this.json})`,this.json))}isExpandable(t){return"object"===t.type||"array"===t.type}toggle(t){this.isExpandable(t)&&(t.expanded=!t.expanded)}parseKeyValue(t,r){const s={key:t,value:r,type:void 0,description:""+r,expanded:this.isExpanded()};switch(typeof s.value){case"number":s.type="number";break;case"boolean":s.type="boolean";break;case"function":s.type="function";break;case"string":s.type="string",s.description='"'+s.value+'"';break;case"undefined":s.type="undefined",s.description="undefined";break;case"object":null===s.value?(s.type="null",s.description="null"):Array.isArray(s.value)?(s.type="array",s.description="Array["+s.value.length+"] "+JSON.stringify(s.value)):s.value instanceof Date?s.type="date":(s.type="object",s.description="Object "+JSON.stringify(s.value))}return s}isExpanded(){return this.expanded&&!(this.depth>-1&&this._currentDepth>=this.depth)}decycle(t){const r=new WeakMap;return function s(a,l){let u,p;return"object"!=typeof a||null===a||a instanceof Boolean||a instanceof Date||a instanceof Number||a instanceof RegExp||a instanceof String?a:(u=r.get(a),void 0!==u?{$ref:u}:(r.set(a,l),Array.isArray(a)?(p=[],a.forEach(function(h,S){p[S]=s(h,l+"["+S+"]")})):(p={},Object.keys(a).forEach(function(h){p[h]=s(a[h],l+"["+JSON.stringify(h)+"]")})),p))}(t,"$")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["ngx-json-viewer"]],inputs:{expanded:"expanded",depth:"depth",_currentDepth:"_currentDepth",json:"json"},features:[o.\u0275\u0275NgOnChangesFeature],decls:2,vars:1,consts:[[1,"ngx-json-viewer"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"ngClass","click"],["class","toggler",4,"ngIf"],[1,"segment-key"],[1,"segment-separator"],["class","segment-value",4,"ngIf"],["class","children",4,"ngIf"],[1,"toggler"],[1,"segment-value"],[1,"children"],[3,"json","expanded","depth","_currentDepth"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"section",0),o.\u0275\u0275template(1,ym,9,11,"section",1),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",r.segments))},directives:[C.NgForOf,C.NgClass,C.NgIf,e],styles:['@charset "UTF-8";.ngx-json-viewer[_ngcontent-%COMP%]{font-family:monospace;font-size:1em;height:100%;overflow:hidden;position:relative;width:100%}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]{margin:1px 1px 1px 12px;padding:2px}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]{word-wrap:break-word}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .toggler[_ngcontent-%COMP%]{color:#787878;font-size:.8em;line-height:1.2em;margin-left:-14px;margin-top:3px;position:absolute;vertical-align:middle}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .toggler[_ngcontent-%COMP%]:after{content:"\u25ba";display:inline-block;transition:transform .1s ease-in}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .segment-key[_ngcontent-%COMP%]{color:#4e187c}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .segment-separator[_ngcontent-%COMP%]{color:#999}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .segment-value[_ngcontent-%COMP%]{color:#000}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .children[_ngcontent-%COMP%]{margin-left:12px}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-string[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#ff6b6b}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-number[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#009688}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-boolean[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#b938a4}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-date[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#05668d}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-array[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%], .ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-function[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%], .ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-object[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#999}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-null[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%], .ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-undefined[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#fff}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-null[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{background-color:red}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-undefined[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-key[_ngcontent-%COMP%]{color:#999}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-undefined[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{background-color:#999}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-array[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%], .ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-object[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%]{white-space:nowrap}.ngx-json-viewer[_ngcontent-%COMP%]   .expanded[_ngcontent-%COMP%] > .toggler[_ngcontent-%COMP%]:after{transform:rotate(90deg)}.ngx-json-viewer[_ngcontent-%COMP%]   .expandable[_ngcontent-%COMP%], .ngx-json-viewer[_ngcontent-%COMP%]   .expandable[_ngcontent-%COMP%] > .toggler[_ngcontent-%COMP%]{cursor:pointer}']}),e})(),ru=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[C.CommonModule]]}),e})();function Jf(e,n,t,r,s,a,l){try{var u=e[a](l),p=u.value}catch(h){return void t(h)}u.done?n(p):Promise.resolve(p).then(r,s)}function iu(e){return function(){var n=this,t=arguments;return new Promise(function(r,s){var a=e.apply(n,t);function l(p){Jf(a,r,s,l,u,"next",p)}function u(p){Jf(a,r,s,l,u,"throw",p)}l(void 0)})}}var Go,xt=x(9653),be=x(4004),tr=new Uint8Array(16);function gr(){if(!Go&&!(Go="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Go(tr)}const ls=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,gi=function Jr(e){return"string"==typeof e&&ls.test(e)};for(var rr=[],us=0;us<256;++us)rr.push((us+256).toString(16).substr(1));const zn=function Qf(e,n,t){var r=(e=e||{}).random||(e.rng||gr)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){t=t||0;for(var s=0;s<16;++s)n[t+s]=r[s];return n}return function vi(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=(rr[e[n+0]]+rr[e[n+1]]+rr[e[n+2]]+rr[e[n+3]]+"-"+rr[e[n+4]]+rr[e[n+5]]+"-"+rr[e[n+6]]+rr[e[n+7]]+"-"+rr[e[n+8]]+rr[e[n+9]]+"-"+rr[e[n+10]]+rr[e[n+11]]+rr[e[n+12]]+rr[e[n+13]]+rr[e[n+14]]+rr[e[n+15]]).toLowerCase();if(!gi(t))throw TypeError("Stringified UUID is invalid");return t}(r)};var Pn=x(2817),Hn=x(4086),Pc=x(7414),kr=x(262),Ri=x(4782),an=x(5698),Vo=x(5577),ao=x(1365),$o=x(4351),lo=x(2843),Be=x(9646),ya=x(8421);const{isArray:Yf}=Array;var cs=x(5403);function ep(...e){return 1===(e=function Zf(e){return 1===e.length&&Yf(e[0])?e[0]:e}(e)).length?(0,ya.Xf)(e[0]):new v.y(function Ho(e){return n=>{let t=[];for(let r=0;t&&!n.closed&&r<e.length;r++)t.push((0,ya.Xf)(e[r]).subscribe((0,cs.x)(n,s=>{if(t){for(let a=0;a<t.length;a++)a!==r&&t[a].unsubscribe();t=null}n.next(s)})))}}(e))}var Ds=x(4986),Qt=(()=>{return(e=Qt||(Qt={}))[e.EntitiesOnly=0]="EntitiesOnly",e[e.Both=1]="Both",e[e.None=2]="None",Qt;var e})();function Jn(e){return function(t,r){const s={ids:[...r.ids],entities:{...r.entities}},a=e(t,s);return a===Qt.Both?Object.assign({},r,s):a===Qt.EntitiesOnly?{...r,entities:s.entities}:r}}function Qr(e,n){const t=n(e);return(0,o.isDevMode)()&&void 0===t&&console.warn("@ngrx/entity: The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",e,"The `selectId` implementation:",n.toString()),t}function Tc(e){function n(Re,De){const Je=Qr(Re,e);return Je in De.entities?Qt.None:(De.ids.push(Je),De.entities[Je]=Re,Qt.Both)}function t(Re,De){let Je=!1;for(const et of Re)Je=n(et,De)!==Qt.None||Je;return Je?Qt.Both:Qt.None}function s(Re,De){const Je=Qr(Re,e);return Je in De.entities?(De.entities[Je]=Re,Qt.EntitiesOnly):(De.ids.push(Je),De.entities[Je]=Re,Qt.Both)}function u(Re,De){const et=(Re instanceof Array?Re:De.ids.filter(gt=>Re(De.entities[gt]))).filter(gt=>gt in De.entities).map(gt=>delete De.entities[gt]).length>0;return et&&(De.ids=De.ids.filter(gt=>gt in De.entities)),et?Qt.Both:Qt.None}function S(Re,De){return G([Re],De)}function G(Re,De){const Je={};return(Re=Re.filter(gt=>gt.id in De.entities)).length>0?Re.filter(St=>function h(Re,De,Je){const gt=Object.assign({},Je.entities[De.id],De.changes),St=Qr(gt,e),Ft=St!==De.id;return Ft&&(Re[De.id]=St,delete Je.entities[De.id]),Je.entities[St]=gt,Ft}(Je,St,De)).length>0?(De.ids=De.ids.map(St=>Je[St]||St),Qt.Both):Qt.EntitiesOnly:Qt.None}function Ne(Re,De){const Je=[],et=[];for(const Ft of Re){const Kt=Qr(Ft,e);Kt in De.entities?et.push({id:Kt,changes:Ft}):Je.push(Ft)}const gt=G(et,De),St=t(Je,De);switch(!0){case St===Qt.None&&gt===Qt.None:return Qt.None;case St===Qt.Both||gt===Qt.Both:return Qt.Both;default:return Qt.EntitiesOnly}}return{removeAll:function p(Re){return Object.assign({},Re,{ids:[],entities:{}})},addOne:Jn(n),addMany:Jn(t),setAll:Jn(function r(Re,De){return De.ids=[],De.entities={},t(Re,De),Qt.Both}),setOne:Jn(s),setMany:Jn(function a(Re,De){const Je=Re.map(et=>s(et,De));switch(!0){case Je.some(et=>et===Qt.Both):return Qt.Both;case Je.some(et=>et===Qt.EntitiesOnly):return Qt.EntitiesOnly;default:return Qt.None}}),updateOne:Jn(S),updateMany:Jn(G),upsertOne:Jn(function ve(Re,De){return Ne([Re],De)}),upsertMany:Jn(Ne),removeOne:Jn(function l(Re,De){return u([Re],De)}),removeMany:Jn(u),map:Jn(function W(Re,De){return G(De.ids.reduce((gt,St)=>{const Ft=Re(De.entities[St]);return Ft!==De.entities[St]&&gt.push({id:St,changes:Ft}),gt},[]).filter(({id:gt})=>gt in De.entities),De)}),mapOne:Jn(function J({map:Re,id:De},Je){const et=Je.entities[De];return et?S({id:De,changes:Re(et)},Je):Qt.None})}}function np(e,n){const{removeOne:t,removeMany:r,removeAll:s}=Tc(e);function a(Je,et){return l([Je],et)}function l(Je,et){const gt=Je.filter(St=>!(Qr(St,e)in et.entities));return 0===gt.length?Qt.None:(De(gt,et),Qt.Both)}function p(Je,et){const gt=Qr(Je,e);return gt in et.entities?(et.ids=et.ids.filter(St=>St!==gt),De([Je],et),Qt.Both):a(Je,et)}function S(Je,et){return W([Je],et)}function W(Je,et){const gt=[],St=Je.filter(Ft=>function G(Je,et,gt){if(!(et.id in gt.entities))return!1;const Ft=Object.assign({},gt.entities[et.id],et.changes),Kt=Qr(Ft,e);return delete gt.entities[et.id],Je.push(Ft),Kt!==et.id}(gt,Ft,et)).length>0;if(0===gt.length)return Qt.None;{const Ft=et.ids,Kt=[];return et.ids=et.ids.filter((Zt,Vn)=>Zt in et.entities||(Kt.push(Vn),!1)),De(gt,et),!St&&Kt.every(Zt=>et.ids[Zt]===Ft[Zt])?Qt.EntitiesOnly:Qt.Both}}function Re(Je,et){const gt=[],St=[];for(const Zt of Je){const Vn=Qr(Zt,e);Vn in et.entities?St.push({id:Vn,changes:Zt}):gt.push(Zt)}const Ft=W(St,et),Kt=l(gt,et);switch(!0){case Kt===Qt.None&&Ft===Qt.None:return Qt.None;case Kt===Qt.Both||Ft===Qt.Both:return Qt.Both;default:return Qt.EntitiesOnly}}function De(Je,et){Je.sort(n);const gt=[];let St=0,Ft=0;for(;St<Je.length&&Ft<et.ids.length;){const Kt=Je[St],Zt=Qr(Kt,e),Vn=et.ids[Ft];n(Kt,et.entities[Vn])<=0?(gt.push(Zt),St++):(gt.push(Vn),Ft++)}et.ids=gt.concat(St<Je.length?Je.slice(St).map(e):et.ids.slice(Ft)),Je.forEach((Kt,Zt)=>{et.entities[e(Kt)]=Kt})}return{removeOne:t,removeMany:r,removeAll:s,addOne:Jn(a),updateOne:Jn(S),upsertOne:Jn(function Ne(Je,et){return Re([Je],et)}),setAll:Jn(function u(Je,et){return et.entities={},et.ids=[],l(Je,et),Qt.Both}),setOne:Jn(p),setMany:Jn(function h(Je,et){const gt=Je.map(St=>p(St,et));switch(!0){case gt.some(St=>St===Qt.Both):return Qt.Both;case gt.some(St=>St===Qt.EntitiesOnly):return Qt.EntitiesOnly;default:return Qt.None}}),addMany:Jn(l),updateMany:Jn(W),upsertMany:Jn(Re),map:Jn(function J(Je,et){return W(et.ids.reduce((St,Ft)=>{const Kt=Je(et.entities[Ft]);return Kt!==et.entities[Ft]&&St.push({id:Ft,changes:Kt}),St},[]),et)}),mapOne:Jn(function ve({map:Je,id:et},gt){const St=gt.entities[et];return St?S({id:et,changes:Je(St)},gt):Qt.None})}}var su=x(8502),uo=x(515),au=x(576);class yi{constructor(n,t,r){this.kind=n,this.value=t,this.error=r,this.hasValue="N"===n}observe(n){return ll(this,n)}do(n,t,r){const{kind:s,value:a,error:l}=this;return"N"===s?null==n?void 0:n(a):"E"===s?null==t?void 0:t(l):null==r?void 0:r()}accept(n,t,r){var s;return(0,au.m)(null===(s=n)||void 0===s?void 0:s.next)?this.observe(n):this.do(n,t,r)}toObservable(){const{kind:n,value:t,error:r}=this,s="N"===n?(0,Be.of)(t):"E"===n?(0,lo._)(()=>r):"C"===n?uo.E:0;if(!s)throw new TypeError(`Unexpected notification kind ${n}`);return s}static createNext(n){return new yi("N",n)}static createError(n){return new yi("E",void 0,n)}static createComplete(){return yi.completeNotification}}function ll(e,n){var t,r,s;const{kind:a,value:l,error:u}=e;if("string"!=typeof a)throw new TypeError('Invalid notification, missing "kind"');"N"===a?null===(t=n.next)||void 0===t||t.call(n,l):"E"===a?null===(r=n.error)||void 0===r||r.call(n,u):null===(s=n.complete)||void 0===s||s.call(n)}yi.completeNotification=new yi("C");var ds=x(4482);function Oc(e,n,t,r){return(0,ds.e)((s,a)=>{let l;n&&"function"!=typeof n?({duration:t,element:l,connector:r}=n):l=n;const u=new Map,p=ve=>{u.forEach(ve),ve(a)},h=ve=>p(Ne=>Ne.error(ve));let S=0,G=!1;const W=new cs.Q(a,ve=>{try{const Ne=e(ve);let Re=u.get(Ne);if(!Re){u.set(Ne,Re=r?r():new M.x);const De=function J(ve,Ne){const Re=new v.y(De=>{S++;const Je=Ne.subscribe(De);return()=>{Je.unsubscribe(),0==--S&&G&&W.unsubscribe()}});return Re.key=ve,Re}(Ne,Re);if(a.next(De),t){const Je=(0,cs.x)(Re,()=>{Re.complete(),null==Je||Je.unsubscribe()},void 0,void 0,()=>u.delete(Ne));W.add((0,ya.Xf)(t(De)).subscribe(Je))}}Re.next(l?l(ve):ve)}catch(Ne){h(Ne)}},()=>p(ve=>ve.complete()),h,()=>u.clear(),()=>(G=!0,0===S));s.subscribe(W)})}function Ms(e,n){return n?t=>t.pipe(Ms((r,s)=>(0,ya.Xf)(e(r,s)).pipe((0,be.U)((a,l)=>n(r,a,s,l))))):(0,ds.e)((t,r)=>{let s=0,a=null,l=!1;t.subscribe((0,cs.x)(r,u=>{a||(a=(0,cs.x)(r,void 0,()=>{a=null,l&&r.complete()}),(0,ya.Xf)(e(u,s++)).subscribe(a))},()=>{l=!0,!a&&r.complete()}))})}const qo={dispatch:!0,useEffectsErrorHandler:!0},_a="__@ngrx/effects_create__";function di(e,n){const t=e(),r={...qo,...n};return Object.defineProperty(t,_a,{value:r}),t}function fs(e){return Object.getOwnPropertyNames(e).filter(r=>!(!e[r]||!e[r].hasOwnProperty(_a))&&e[r][_a].hasOwnProperty("dispatch")).map(r=>({propertyName:r,...e[r][_a]}))}function Eo(e){return Object.getPrototypeOf(e)}const ul="__@ngrx/effects__";function rp(e){return(0,xt.qC)(uu,Eo)(e)}function uu(e){return function ba(e){return e.constructor.hasOwnProperty(ul)}(e)?e.constructor[ul]:[]}function op(e,n,t){const r=Eo(e).constructor.name,s=function Dc(e){return[rp,fs].reduce((t,r)=>t.concat(r(e)),[])}(e).map(({propertyName:a,dispatch:l,useEffectsErrorHandler:u})=>{const p="function"==typeof e[a]?e[a]():e[a],h=u?t(p,n):p;return!1===l?h.pipe((0,su.l)()):h.pipe(function kc(){return(0,ds.e)((e,n)=>{e.subscribe((0,cs.x)(n,t=>{n.next(yi.createNext(t))},()=>{n.next(yi.createComplete()),n.complete()},t=>{n.next(yi.createError(t)),n.complete()}))})}()).pipe((0,be.U)(G=>({effect:e[a],notification:G,propertyName:a,sourceName:r,sourceInstance:e})))});return(0,N.T)(...s)}function cu(e,n,t=10){return e.pipe((0,kr.K)(r=>(n&&n.handleError(r),t<=1?e:cu(e,n,t-1))))}let co=(()=>{class e extends v.y{constructor(t){super(),t&&(this.source=t)}lift(t){const r=new e;return r.source=this,r.operator=t,r}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(xt.Y$))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();function ki(...e){return(0,U.h)(n=>e.some(t=>"string"==typeof t?t===n.type:t.type===n.type))}function Nc(e){return ps(e,"ngrxOnInitEffects")}function ps(e,n){return e&&n in e&&"function"==typeof e[n]}const jc=new o.InjectionToken("@ngrx/effects Internal Root Guard"),Ca=new o.InjectionToken("@ngrx/effects User Provided Effects"),nr=new o.InjectionToken("@ngrx/effects Internal Root Effects"),pl=new o.InjectionToken("@ngrx/effects Root Effects"),fu=new o.InjectionToken("@ngrx/effects Internal Feature Effects"),hl=new o.InjectionToken("@ngrx/effects Feature Effects"),Oi=new o.InjectionToken("@ngrx/effects Effects Error Handler");let fo=(()=>{class e extends M.x{constructor(t,r){super(),this.errorHandler=t,this.effectsErrorHandler=r}addEffects(t){this.next(t)}toActions(){return this.pipe(Oc(Eo),(0,Vo.z)(t=>t.pipe(Oc(Or))),(0,Vo.z)(t=>{const r=t.pipe(Ms(a=>function Yr(e,n){return t=>{const r=op(t,e,n);return function fl(e){return ps(e,"ngrxOnRunEffects")}(t)?t.ngrxOnRunEffects(r):r}}(this.errorHandler,this.effectsErrorHandler)(a)),(0,be.U)(a=>(function du(e,n){if("N"===e.notification.kind){const t=e.notification.value;!function ap(e){return"function"!=typeof e&&e&&e.type&&"string"==typeof e.type}(t)&&n.handleError(new Error(`Effect ${function wa({propertyName:e,sourceInstance:n,sourceName:t}){const r="function"==typeof n[e];return`"${t}.${String(e)}${r?"()":""}"`}(e)} dispatched an invalid action: ${function Mc(e){try{return JSON.stringify(e)}catch{return e}}(t)}`))}}(a,this.errorHandler),a.notification)),(0,U.h)(a=>"N"===a.kind&&null!=a.value),function Ki(){return(0,ds.e)((e,n)=>{e.subscribe((0,cs.x)(n,t=>ll(t,n)))})}()),s=t.pipe((0,an.q)(1),(0,U.h)(Nc),(0,be.U)(a=>a.ngrxOnInitEffects()));return(0,N.T)(r,s)}))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(o.ErrorHandler),o.\u0275\u0275inject(Oi))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();function Or(e){return function Ao(e){return ps(e,"ngrxOnIdentifyEffects")}(e)?e.ngrxOnIdentifyEffects():""}let jr=(()=>{class e{constructor(t,r){this.effectSources=t,this.store=r,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(fo),o.\u0275\u0275inject(xt.yh))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();const ml="@ngrx/effects/init";(0,xt.PH)(ml);let pu=(()=>{class e{constructor(t,r,s,a,l,u,p){this.sources=t,r.start(),a.forEach(h=>t.addEffects(h)),s.dispatch({type:ml})}addEffects(t){this.sources.addEffects(t)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(fo),o.\u0275\u0275inject(jr),o.\u0275\u0275inject(xt.yh),o.\u0275\u0275inject(pl),o.\u0275\u0275inject(xt.cr,8),o.\u0275\u0275inject(xt.CK,8),o.\u0275\u0275inject(jc,8))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({}),e})(),Bc=(()=>{class e{constructor(t,r,s,a){r.forEach(l=>l.forEach(u=>t.addEffects(u)))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(pu),o.\u0275\u0275inject(hl),o.\u0275\u0275inject(xt.cr,8),o.\u0275\u0275inject(xt.CK,8))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({}),e})(),po=(()=>{class e{static forFeature(t=[]){return{ngModule:Bc,providers:[t,{provide:fu,multi:!0,useValue:t},{provide:Ca,multi:!0,useValue:[]},{provide:hl,multi:!0,useFactory:js,deps:[o.Injector,fu,Ca]}]}}static forRoot(t=[]){return{ngModule:pu,providers:[{provide:Oi,useValue:cu},jr,fo,co,t,{provide:nr,useValue:[t]},{provide:jc,useFactory:hu,deps:[[jr,new o.Optional,new o.SkipSelf],[nr,new o.Self]]},{provide:Ca,multi:!0,useValue:[]},{provide:pl,useFactory:js,deps:[o.Injector,nr,Ca]}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({}),e})();function js(e,n,t){const r=[];for(const s of n)r.push(...s);for(const s of t)r.push(...s);return function Bs(e,n){return n.map(t=>e.get(t))}(e,r)}function hu(e,n){if((1!==n.length||0!==n[0].length)&&e)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}let Ko=(()=>{class e{create(t,r,s,a){const l="string"==typeof t?{...a||{},entityName:t,entityOp:r,data:s}:t;return this.createCore(l)}createCore(t){const{entityName:r,entityOp:s,tag:a}=t;if(!r)throw new Error("Missing entity name for new action");if(null==s)throw new Error("Missing EntityOp for new action");return{type:this.formatActionType(s,a||r),payload:t}}createFromAction(t,r){return this.create({...t.payload,...r})}formatActionType(t,r){return`[${r}] ${t}`}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();class zc{constructor(n,t){this.entityName=n,this.selectId=t}mustBeEntity(n){const t=this.extractData(n);if(!t)return this.throwError(n,"should have a single entity.");const r=this.selectId(t);return this.isNotKeyType(r)&&this.throwError(n,"has a missing or invalid entity key (id)"),t}mustBeEntities(n){const t=this.extractData(n);return Array.isArray(t)?(t.forEach((r,s)=>{const a=this.selectId(r);this.isNotKeyType(a)&&this.throwError(n,`, item ${s+1}, does not have a valid entity key (id)`)}),t):this.throwError(n,"should be an array of entities")}mustBeKey(n){const t=this.extractData(n);if(!t)throw new Error("should be a single entity key");if(this.isNotKeyType(t))throw new Error("is not a valid key (id)");return t}mustBeKeys(n){const t=this.extractData(n);return Array.isArray(t)?(t.forEach((r,s)=>{this.isNotKeyType(r)&&this.throwError(n,`${this.entityName} ', item ${s+1}, is not a valid entity key (id)`)}),t):this.throwError(n,"should be an array of entity keys (id)")}mustBeUpdate(n){const t=this.extractData(n);if(!t)return this.throwError(n,"should be a single entity update");const{id:r,changes:s}=t,a=this.selectId(s);return(this.isNotKeyType(r)||this.isNotKeyType(a))&&this.throwError(n,"has a missing or invalid entity key (id)"),t}mustBeUpdates(n){const t=this.extractData(n);return Array.isArray(t)?(t.forEach((r,s)=>{const{id:a,changes:l}=r,u=this.selectId(l);(this.isNotKeyType(a)||this.isNotKeyType(u))&&this.throwError(n,`, item ${s+1}, has a missing or invalid entity key (id)`)}),t):this.throwError(n,"should be an array of entity updates")}mustBeUpdateResponse(n){const t=this.extractData(n);if(!t)return this.throwError(n,"should be a single entity update");const{id:r,changes:s}=t,a=this.selectId(s);return(this.isNotKeyType(r)||this.isNotKeyType(a))&&this.throwError(n,"has a missing or invalid entity key (id)"),t}mustBeUpdateResponses(n){const t=this.extractData(n);return Array.isArray(t)?(t.forEach((r,s)=>{const{id:a,changes:l}=r,u=this.selectId(l);(this.isNotKeyType(a)||this.isNotKeyType(u))&&this.throwError(n,`, item ${s+1}, has a missing or invalid entity key (id)`)}),t):this.throwError(n,"should be an array of entity updates")}extractData(n){return n.payload&&n.payload.data}isNotKeyType(n){return"string"!=typeof n&&"number"!=typeof n}throwError(n,t){throw new Error(`${this.entityName} EntityAction guard for "${n.type}": payload ${t}`)}}function Ls(e){return null==e?void 0:e.id}function mu(e){if(null==e)return[];if(Array.isArray(e[0])){const[n,...t]=e;e=[...n,...t]}return e}function Uc(e){return e=e||Ls,function(t){const r=e(t);if(null==r)throw new Error("Primary key may not be null/undefined.");return t&&{id:r,changes:t}}}function zs(...e){const n=mu(e);switch(n.length){case 0:return(0,U.h)(r=>r.payload&&null!=r.payload.entityOp);case 1:const t=n[0];return(0,U.h)(r=>r.payload&&t===r.payload.entityOp);default:return(0,U.h)(r=>{const s=r.payload&&r.payload.entityOp;return s&&n.some(a=>a===s)})}}function gl(...e){const n=mu(e);switch(n.length){case 0:return(0,U.h)(r=>r.payload&&null!=r.payload.entityName);case 1:const t=n[0];return(0,U.h)(r=>r.payload&&t===r.payload.entityName);default:return(0,U.h)(r=>{const s=r.payload&&r.payload.entityName;return!!s&&n.some(a=>a===s)})}}var Vr=(()=>{return(e=Vr||(Vr={})).Add="Add",e.Delete="Delete",e.Update="Update",e.Upsert="Upsert",Vr;var e})();function Gc(e){const n=(e=e&&e.changes?e:{changes:[]}).changes.filter(t=>null!=t&&t.entities&&t.entities.length>0);return{...e,changes:n}}new class up{add(n,t){return t=Array.isArray(t)?t:t?[t]:[],{entityName:n,op:Vr.Add,entities:t}}delete(n,t){const r=Array.isArray(t)?t:t?[t]:[];return{entityName:n,op:Vr.Delete,entities:r}}update(n,t){return t=Array.isArray(t)?t:t?[t]:[],{entityName:n,op:Vr.Update,entities:t}}upsert(n,t){return t=Array.isArray(t)?t:t?[t]:[],{entityName:n,op:Vr.Upsert,entities:t}}};var Qn=(()=>{return(e=Qn||(Qn={}))[e.IgnoreChanges=0]="IgnoreChanges",e[e.PreserveChanges=1]="PreserveChanges",e[e.OverwriteChanges=2]="OverwriteChanges",Qn;var e})(),Un=(()=>{return(e=Un||(Un={})).CLEAR_COLLECTIONS="@ngrx/data/entity-cache/clear-collections",e.LOAD_COLLECTIONS="@ngrx/data/entity-cache/load-collections",e.MERGE_QUERY_SET="@ngrx/data/entity-cache/merge-query-set",e.SET_ENTITY_CACHE="@ngrx/data/entity-cache/set-cache",e.SAVE_ENTITIES="@ngrx/data/entity-cache/save-entities",e.SAVE_ENTITIES_CANCEL="@ngrx/data/entity-cache/save-entities-cancel",e.SAVE_ENTITIES_CANCELED="@ngrx/data/entity-cache/save-entities-canceled",e.SAVE_ENTITIES_ERROR="@ngrx/data/entity-cache/save-entities-error",e.SAVE_ENTITIES_SUCCESS="@ngrx/data/entity-cache/save-entities-success",Un;var e})();class Vc{constructor(n,t){this.type=Un.CLEAR_COLLECTIONS,this.payload={collections:n,tag:t}}}class dp{constructor(n,t){this.type=Un.LOAD_COLLECTIONS,this.payload={collections:n,tag:t}}}class gu{constructor(n,t,r){this.type=Un.MERGE_QUERY_SET,this.payload={querySet:n,mergeStrategy:null===t?Qn.PreserveChanges:t,tag:r}}}class wm{constructor(n,t){this.cache=n,this.type=Un.SET_ENTITY_CACHE,this.payload={cache:n,tag:t}}}class Cm{constructor(n,t,r){this.type=Un.SAVE_ENTITIES,r=r||{},n&&(n.tag=n.tag||r.tag),this.payload={changeSet:n,url:t,...r,tag:n.tag}}}class xm{constructor(n,t,r,s){this.type=Un.SAVE_ENTITIES_CANCEL,this.payload={correlationId:n,reason:t,entityNames:r,tag:s}}}class Xo{constructor(n,t,r){this.type=Un.SAVE_ENTITIES_CANCELED,this.payload={correlationId:n,reason:t,tag:r}}}class hs{constructor(n,t){this.type=Un.SAVE_ENTITIES_ERROR,this.payload={error:n,originalAction:t,correlationId:t.payload.correlationId}}}class Wo{constructor(n,t,r){this.type=Un.SAVE_ENTITIES_SUCCESS,r=r||{},n&&(n.tag=n.tag||r.tag),this.payload={changeSet:n,url:t,...r,tag:n.tag}}}var Et=(()=>{return(e=Et||(Et={})).CANCEL_PERSIST="@ngrx/data/cancel-persist",e.CANCELED_PERSIST="@ngrx/data/canceled-persist",e.QUERY_ALL="@ngrx/data/query-all",e.QUERY_ALL_SUCCESS="@ngrx/data/query-all/success",e.QUERY_ALL_ERROR="@ngrx/data/query-all/error",e.QUERY_LOAD="@ngrx/data/query-load",e.QUERY_LOAD_SUCCESS="@ngrx/data/query-load/success",e.QUERY_LOAD_ERROR="@ngrx/data/query-load/error",e.QUERY_MANY="@ngrx/data/query-many",e.QUERY_MANY_SUCCESS="@ngrx/data/query-many/success",e.QUERY_MANY_ERROR="@ngrx/data/query-many/error",e.QUERY_BY_KEY="@ngrx/data/query-by-key",e.QUERY_BY_KEY_SUCCESS="@ngrx/data/query-by-key/success",e.QUERY_BY_KEY_ERROR="@ngrx/data/query-by-key/error",e.SAVE_ADD_MANY="@ngrx/data/save/add-many",e.SAVE_ADD_MANY_ERROR="@ngrx/data/save/add-many/error",e.SAVE_ADD_MANY_SUCCESS="@ngrx/data/save/add-many/success",e.SAVE_ADD_ONE="@ngrx/data/save/add-one",e.SAVE_ADD_ONE_ERROR="@ngrx/data/save/add-one/error",e.SAVE_ADD_ONE_SUCCESS="@ngrx/data/save/add-one/success",e.SAVE_DELETE_MANY="@ngrx/data/save/delete-many",e.SAVE_DELETE_MANY_SUCCESS="@ngrx/data/save/delete-many/success",e.SAVE_DELETE_MANY_ERROR="@ngrx/data/save/delete-many/error",e.SAVE_DELETE_ONE="@ngrx/data/save/delete-one",e.SAVE_DELETE_ONE_SUCCESS="@ngrx/data/save/delete-one/success",e.SAVE_DELETE_ONE_ERROR="@ngrx/data/save/delete-one/error",e.SAVE_UPDATE_MANY="@ngrx/data/save/update-many",e.SAVE_UPDATE_MANY_SUCCESS="@ngrx/data/save/update-many/success",e.SAVE_UPDATE_MANY_ERROR="@ngrx/data/save/update-many/error",e.SAVE_UPDATE_ONE="@ngrx/data/save/update-one",e.SAVE_UPDATE_ONE_SUCCESS="@ngrx/data/save/update-one/success",e.SAVE_UPDATE_ONE_ERROR="@ngrx/data/save/update-one/error",e.SAVE_UPSERT_MANY="@ngrx/data/save/upsert-many",e.SAVE_UPSERT_MANY_SUCCESS="@ngrx/data/save/upsert-many/success",e.SAVE_UPSERT_MANY_ERROR="@ngrx/data/save/upsert-many/error",e.SAVE_UPSERT_ONE="@ngrx/data/save/upsert-one",e.SAVE_UPSERT_ONE_SUCCESS="@ngrx/data/save/upsert-one/success",e.SAVE_UPSERT_ONE_ERROR="@ngrx/data/save/upsert-one/error",e.ADD_ALL="@ngrx/data/add-all",e.ADD_MANY="@ngrx/data/add-many",e.ADD_ONE="@ngrx/data/add-one",e.REMOVE_ALL="@ngrx/data/remove-all",e.REMOVE_MANY="@ngrx/data/remove-many",e.REMOVE_ONE="@ngrx/data/remove-one",e.UPDATE_MANY="@ngrx/data/update-many",e.UPDATE_ONE="@ngrx/data/update-one",e.UPSERT_MANY="@ngrx/data/upsert-many",e.UPSERT_ONE="@ngrx/data/upsert-one",e.COMMIT_ALL="@ngrx/data/commit-all",e.COMMIT_MANY="@ngrx/data/commit-many",e.COMMIT_ONE="@ngrx/data/commit-one",e.UNDO_ALL="@ngrx/data/undo-all",e.UNDO_MANY="@ngrx/data/undo-many",e.UNDO_ONE="@ngrx/data/undo-one",e.SET_CHANGE_STATE="@ngrx/data/set-change-state",e.SET_COLLECTION="@ngrx/data/set-collection",e.SET_FILTER="@ngrx/data/set-filter",e.SET_LOADED="@ngrx/data/set-loaded",e.SET_LOADING="@ngrx/data/set-loading",Et;var e})();const vu="/success",vl="/error";function yl(e){return e+vu}class ms{constructor(n,t){this.error=n,this.requestData=t,this.message="string"==typeof n?n:function Sm(e){const{error:n,body:t,message:r}=e;let s=null;return n?s="string"==typeof n?n:n.message:r?s=r:t&&(s="string"==typeof t?t:t.error),"string"==typeof s?s:s?JSON.stringify(s):null}(n)}}class fi{}class Zr{}const yu=new o.InjectionToken("@ngrx/data Plural Names");class xa{}class $c{}let _u=(()=>{class e{constructor(t){this.pluralizer=t,this.knownHttpResourceUrls={}}getResourceUrls(t,r){let s=this.knownHttpResourceUrls[t];if(!s){const a=Hc(r);s={entityResourceUrl:`${a}/${t}/`.toLowerCase(),collectionResourceUrl:`${a}/${this.pluralizer.pluralize(t)}/`.toLowerCase()},this.registerHttpResourceUrls({[t]:s})}return s}entityResource(t,r){return this.getResourceUrls(t,r).entityResourceUrl}collectionResource(t,r){return this.getResourceUrls(t,r).collectionResourceUrl}registerHttpResourceUrls(t){this.knownHttpResourceUrls={...this.knownHttpResourceUrls,...t||{}}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(xa))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();function Hc(e){return e.replace(/^[/\s]+|[/\s]+$/g,"")}class qc{constructor(n,t,r,s){this.http=t,this.httpUrlGenerator=r,this.getDelay=0,this.saveDelay=0,this.timeout=0,this._name=`${n} DefaultDataService`,this.entityName=n;const{root:a="api",delete404OK:l=!0,getDelay:u=0,saveDelay:p=0,timeout:h=0}=s||{};this.delete404OK=l,this.entityUrl=r.entityResource(n,a),this.entitiesUrl=r.collectionResource(n,a),this.getDelay=u,this.saveDelay=p,this.timeout=h}get name(){return this._name}add(n){const t=n||new Error(`No "${this.entityName}" entity to add`);return this.execute("POST",this.entityUrl,t)}delete(n){let t;return null==n&&(t=new Error(`No "${this.entityName}" key to delete`)),this.execute("DELETE",this.entityUrl+n,t).pipe((0,be.U)(r=>n))}getAll(){return this.execute("GET",this.entitiesUrl)}getById(n){let t;return null==n&&(t=new Error(`No "${this.entityName}" key to get`)),this.execute("GET",this.entityUrl+n,t)}getWithQuery(n){const r=new F.HttpParams("string"==typeof n?{fromString:n}:{fromObject:n});return this.execute("GET",this.entitiesUrl,void 0,{params:r})}update(n){const t=n&&n.id,r=null==t?new Error(`No "${this.entityName}" update data or id`):n.changes;return this.execute("PUT",this.entityUrl+t,r)}upsert(n){const t=n||new Error(`No "${this.entityName}" entity to upsert`);return this.execute("POST",this.entityUrl,t)}execute(n,t,r,s){const a={method:n,url:t,data:r,options:s};if(r instanceof Error)return this.handleError(a)(r);let l;switch(n){case"DELETE":l=this.http.delete(t,s),this.saveDelay&&(l=l.pipe((0,Hn.g)(this.saveDelay)));break;case"GET":l=this.http.get(t,s),this.getDelay&&(l=l.pipe((0,Hn.g)(this.getDelay)));break;case"POST":l=this.http.post(t,r,s),this.saveDelay&&(l=l.pipe((0,Hn.g)(this.saveDelay)));break;case"PUT":l=this.http.put(t,r,s),this.saveDelay&&(l=l.pipe((0,Hn.g)(this.saveDelay)));break;default:{const u=new Error("Unimplemented HTTP method, "+n);l=(0,lo._)(u)}}return this.timeout&&(l=l.pipe((0,Pc.V)(this.timeout+this.saveDelay))),l.pipe((0,kr.K)(this.handleError(a)))}handleError(n){return t=>{const r=this.handleDelete404(t,n);if(r)return r;const s=new ms(t,n);return(0,lo._)(s)}}handleDelete404(n,t){if(404===n.status&&"DELETE"===t.method&&this.delete404OK)return(0,Be.of)({})}}let Kc=(()=>{class e{constructor(t,r,s){this.http=t,this.httpUrlGenerator=r,this.config=s,r.registerHttpResourceUrls((s=s||{}).entityHttpResourceUrls)}create(t){return new qc(t,this.http,this.httpUrlGenerator,this.config)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(F.HttpClient),o.\u0275\u0275inject($c),o.\u0275\u0275inject(fi,8))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();const Wc=new o.InjectionToken("@ngrx/data Entity Metadata");let pi=(()=>{class e{constructor(t){this.definitions={},t&&t.forEach(r=>this.registerMetadataMap(r))}getDefinition(t,r=!0){t=t.trim();const s=this.definitions[t];if(!s&&r)throw new Error(`No EntityDefinition for entity type "${t}".`);return s}registerMetadata(t){if(t){const r=function Xc(e){let n=e.entityName;if(!n)throw new Error("Missing required entityName");e.entityName=n=n.trim();const t=e.selectId||Ls,r=e.sortComparer=e.sortComparer||!1,s=function So(e={}){const{selectId:n,sortComparer:t}={sortComparer:!1,selectId:l=>l.id,...e},r=function tp(){return{getInitialState:function e(n={}){return Object.assign({ids:[],entities:{}},n)}}}(),s=function qi(){return{getSelectors:function e(n){const t=l=>l.ids,r=l=>l.entities,s=(0,xt.P1)(t,r,(l,u)=>l.map(p=>u[p])),a=(0,xt.P1)(t,l=>l.length);return n?{selectIds:(0,xt.P1)(n,t),selectEntities:(0,xt.P1)(n,r),selectAll:(0,xt.P1)(n,s),selectTotal:(0,xt.P1)(n,a)}:{selectIds:t,selectEntities:r,selectAll:s,selectTotal:a}}}}();return{selectId:n,sortComparer:t,...r,...s,...t?np(n,t):Tc(n)}}({selectId:t,sortComparer:r}),a=e.entityDispatcherOptions||{},l=s.getInitialState({entityName:n,filter:"",loaded:!1,loading:!1,changeState:{},...e.additionalCollectionState||{}});return{entityName:n,entityAdapter:s,entityDispatcherOptions:a,initialState:l,metadata:e,noChangeTracking:!0===e.noChangeTracking,selectId:t,sortComparer:r}}(t);this.registerDefinition(r)}}registerMetadataMap(t={}){Object.keys(t||{}).forEach(r=>this.registerMetadata({entityName:r,...t[r]}))}registerDefinition(t){this.definitions[t.entityName]=t}registerDefinitions(t){Object.assign(this.definitions,t)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Wc,8))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();const bu=Vr.Update;let Jc=(()=>{class e{constructor(t,r,s){this.entityDefinitionService=t,this.http=r,this.idSelectors={},this.saveDelay=0,this.timeout=0;const{saveDelay:a=0,timeout:l=0}=s||{};this.saveDelay=a,this.timeout=l}saveEntities(t,r){t=this.filterChangeSet(t),t=this.flattenUpdates(t);let s=this.http.post(r,t).pipe((0,be.U)(a=>this.restoreUpdates(a)),(0,kr.K)(this.handleError({method:"POST",url:r,data:t})));return this.timeout&&(s=s.pipe((0,Pc.V)(this.timeout))),this.saveDelay&&(s=s.pipe((0,Hn.g)(this.saveDelay))),s}handleError(t){return r=>{const s=new ms(r,t);return(0,lo._)(s)}}filterChangeSet(t){return Gc(t)}flattenUpdates(t){let r=t.changes;if(0===r.length)return t;let s=!1;return r=r.map(a=>a.op===bu&&a.entities.length>0?(s=!0,{...a,entities:a.entities.map(l=>l.changes)}):a),s?{...t,changes:r}:t}restoreUpdates(t){if(null==t)return t;let r=t.changes;if(0===r.length)return t;let s=!1;return r=r.map(a=>{if(a.op===bu){s=!0;const l=this.getIdSelector(a.entityName);return{...a,entities:a.entities.map(u=>({id:l(u),changes:u}))}}return a}),s?{...t,changes:r}:t}getIdSelector(t){let r=this.idSelectors[t];return r||(r=this.entityDefinitionService.getDefinition(t).selectId,this.idSelectors[t]=r),r}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(pi),o.\u0275\u0275inject(F.HttpClient),o.\u0275\u0275inject(fi,8))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Fi=(()=>{class e{constructor(t){this.defaultDataServiceFactory=t,this.services={}}getService(t){t=t.trim();let r=this.services[t];return r||(r=this.defaultDataServiceFactory.create(t),this.services[t]=r),r}registerService(t,r){this.services[t.trim()]=r}registerServices(t){this.services={...this.services,...t}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Kc))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();class Qc{}let Yc=(()=>{class e{constructor(t,r){this.logger=t,this.entityActionFactory=r}handleSuccess(t){const r=yl(t.payload.entityOp);return s=>this.entityActionFactory.createFromAction(t,{entityOp:r,data:s})}handleError(t){const r=function fp(e){return e+vl}(t.payload.entityOp);return s=>{const l={error:s instanceof ms?s:new ms(s,null),originalAction:t};return this.logger.error(l),this.entityActionFactory.createFromAction(t,{entityOp:r,data:l})}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Zr),o.\u0275\u0275inject(Ko))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();class Zc{constructor(n){this.message=n,this.message=n||"Canceled by user"}}let wu=(()=>{class e{constructor(){this.seed=0,this.prefix="CRID"}next(){return this.seed+=1,this.prefix+this.seed}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Sa=(()=>{class e{constructor(){this.optimisticAdd=!1,this.optimisticDelete=!0,this.optimisticUpdate=!1,this.optimisticUpsert=!1,this.optimisticSaveEntities=!1}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Am=(()=>{class e{constructor(t,r,s,a){this.correlationIdGenerator=t,this.defaultDispatcherOptions=r,this.store=a,this.reducedActions$=s.pipe((0,Ri.d)(1)),this.raSubscription=this.reducedActions$.subscribe()}dispatch(t){return this.store.dispatch(t),t}cancelSaveEntities(t,r,s,a){if(!t)throw new Error("Missing correlationId");const l=new xm(t,r,s,a);this.dispatch(l)}clearCollections(t,r){this.dispatch(new Vc(t,r))}loadCollections(t,r){this.dispatch(new dp(t,r))}mergeQuerySet(t,r,s){this.dispatch(new gu(t,r,s))}setEntityCache(t,r){this.dispatch(new wm(t,r))}saveEntities(t,r,s){const a=Array.isArray(t)?{changes:t}:t,l=(s=s||{}).correlationId??this.correlationIdGenerator.next(),u=null==s.isOptimistic?this.defaultDispatcherOptions.optimisticSaveEntities||!1:!0===s.isOptimistic,p=s.tag||"Save Entities";s={...s,correlationId:l,isOptimistic:u,tag:p};const h=new Cm(a,r,s);return this.dispatch(h),this.getSaveEntitiesResponseData$(s.correlationId).pipe((0,Ri.d)(1))}getSaveEntitiesResponseData$(t){return this.reducedActions$.pipe((0,U.h)(r=>r.type===Un.SAVE_ENTITIES_SUCCESS||r.type===Un.SAVE_ENTITIES_ERROR||r.type===Un.SAVE_ENTITIES_CANCEL),(0,U.h)(r=>t===r.payload.correlationId),(0,an.q)(1),(0,Vo.z)(r=>r.type===Un.SAVE_ENTITIES_CANCEL?(0,lo._)(new Zc(r.payload.reason)):r.type===Un.SAVE_ENTITIES_SUCCESS?(0,Be.of)(r.payload.changeSet):(0,lo._)(r.payload)))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(wu),o.\u0275\u0275inject(Sa),o.\u0275\u0275inject(xt.Y$),o.\u0275\u0275inject(xt.yh))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();class Pm{constructor(n,t,r,s=Ls,a,l,u,p){this.entityName=n,this.entityActionFactory=t,this.store=r,this.selectId=s,this.defaultDispatcherOptions=a,this.reducedActions$=l,this.correlationIdGenerator=p,this.guard=new zc(n,s),this.toUpdate=Uc(s);const h=(0,xt.P1)(u,S=>S[n]);this.entityCollection$=r.select(h)}createEntityAction(n,t,r){return this.entityActionFactory.create({entityName:this.entityName,entityOp:n,data:t,...r})}createAndDispatch(n,t,r){const s=this.createEntityAction(n,t,r);return this.dispatch(s),s}dispatch(n){return this.store.dispatch(n),n}add(n,t){t=this.setSaveEntityActionOptions(t,this.defaultDispatcherOptions.optimisticAdd);const r=this.createEntityAction(Et.SAVE_ADD_ONE,n,t);return t.isOptimistic&&this.guard.mustBeEntity(r),this.dispatch(r),this.getResponseData$(t.correlationId).pipe((0,ao.M)(this.entityCollection$),(0,be.U)(([s,a])=>a.entities[this.selectId(s)]),(0,Ri.d)(1))}cancel(n,t,r){if(!n)throw new Error("Missing correlationId");this.createAndDispatch(Et.CANCEL_PERSIST,t,{correlationId:n})}delete(n,t){t=this.setSaveEntityActionOptions(t,this.defaultDispatcherOptions.optimisticDelete);const r=this.getKey(n),s=this.createEntityAction(Et.SAVE_DELETE_ONE,r,t);return this.guard.mustBeKey(s),this.dispatch(s),this.getResponseData$(t.correlationId).pipe((0,be.U)(()=>r),(0,Ri.d)(1))}getAll(n){n=this.setQueryEntityActionOptions(n);const t=this.createEntityAction(Et.QUERY_ALL,null,n);return this.dispatch(t),this.getResponseData$(n.correlationId).pipe((0,ao.M)(this.entityCollection$),(0,be.U)(([r,s])=>r.reduce((a,l)=>{const u=s.entities[this.selectId(l)];return u&&a.push(u),a},[])),(0,Ri.d)(1))}getByKey(n,t){t=this.setQueryEntityActionOptions(t);const r=this.createEntityAction(Et.QUERY_BY_KEY,n,t);return this.dispatch(r),this.getResponseData$(t.correlationId).pipe((0,ao.M)(this.entityCollection$),(0,be.U)(([s,a])=>a.entities[this.selectId(s)]),(0,Ri.d)(1))}getWithQuery(n,t){t=this.setQueryEntityActionOptions(t);const r=this.createEntityAction(Et.QUERY_MANY,n,t);return this.dispatch(r),this.getResponseData$(t.correlationId).pipe((0,ao.M)(this.entityCollection$),(0,be.U)(([s,a])=>s.reduce((l,u)=>{const p=a.entities[this.selectId(u)];return p&&l.push(p),l},[])),(0,Ri.d)(1))}load(n){n=this.setQueryEntityActionOptions(n);const t=this.createEntityAction(Et.QUERY_LOAD,null,n);return this.dispatch(t),this.getResponseData$(n.correlationId).pipe((0,Ri.d)(1))}update(n,t){const r=this.toUpdate(n);t=this.setSaveEntityActionOptions(t,this.defaultDispatcherOptions.optimisticUpdate);const s=this.createEntityAction(Et.SAVE_UPDATE_ONE,r,t);return t.isOptimistic&&this.guard.mustBeUpdate(s),this.dispatch(s),this.getResponseData$(t.correlationId).pipe((0,be.U)(a=>a.changes),(0,ao.M)(this.entityCollection$),(0,be.U)(([a,l])=>l.entities[this.selectId(a)]),(0,Ri.d)(1))}upsert(n,t){t=this.setSaveEntityActionOptions(t,this.defaultDispatcherOptions.optimisticUpsert);const r=this.createEntityAction(Et.SAVE_UPSERT_ONE,n,t);return t.isOptimistic&&this.guard.mustBeEntity(r),this.dispatch(r),this.getResponseData$(t.correlationId).pipe((0,ao.M)(this.entityCollection$),(0,be.U)(([s,a])=>a.entities[this.selectId(s)]),(0,Ri.d)(1))}addAllToCache(n,t){this.createAndDispatch(Et.ADD_ALL,n,t)}addOneToCache(n,t){this.createAndDispatch(Et.ADD_ONE,n,t)}addManyToCache(n,t){this.createAndDispatch(Et.ADD_MANY,n,t)}clearCache(n){this.createAndDispatch(Et.REMOVE_ALL,void 0,n)}removeOneFromCache(n,t){this.createAndDispatch(Et.REMOVE_ONE,this.getKey(n),t)}removeManyFromCache(n,t){if(!n||0===n.length)return;const r="object"==typeof n[0]?n.map(s=>this.getKey(s)):n;this.createAndDispatch(Et.REMOVE_MANY,r,t)}updateOneInCache(n,t){const r=this.toUpdate(n);this.createAndDispatch(Et.UPDATE_ONE,r,t)}updateManyInCache(n,t){if(!n||0===n.length)return;const r=n.map(s=>this.toUpdate(s));this.createAndDispatch(Et.UPDATE_MANY,r,t)}upsertOneInCache(n,t){this.createAndDispatch(Et.UPSERT_ONE,n,t)}upsertManyInCache(n,t){!n||0===n.length||this.createAndDispatch(Et.UPSERT_MANY,n,t)}setFilter(n){this.createAndDispatch(Et.SET_FILTER,n)}setLoaded(n){this.createAndDispatch(Et.SET_LOADED,!!n)}setLoading(n){this.createAndDispatch(Et.SET_LOADING,!!n)}getKey(n){return"object"==typeof n?this.selectId(n):n}getResponseData$(n){return this.reducedActions$.pipe((0,U.h)(t=>!!t.payload),(0,U.h)(t=>{const{correlationId:r,entityName:s,entityOp:a}=t.payload;return s===this.entityName&&r===n&&(a.endsWith(vu)||a.endsWith(vl)||a===Et.CANCEL_PERSIST)}),(0,an.q)(1),(0,Vo.z)(t=>{const{entityOp:r}=t.payload;return r===Et.CANCEL_PERSIST?(0,lo._)(new Zc(t.payload.data)):r.endsWith(vu)?(0,Be.of)(t.payload.data):(0,lo._)(t.payload.data.error)}))}setQueryEntityActionOptions(n){const t=(n=n||{}).correlationId??this.correlationIdGenerator.next();return{...n,correlationId:t}}setSaveEntityActionOptions(n,t){const r=(n=n||{}).correlationId??this.correlationIdGenerator.next(),s=null==n.isOptimistic?t||!1:!0===n.isOptimistic;return{...n,correlationId:r,isOptimistic:s}}}const Ea="entityCache",ed=new o.InjectionToken("@ngrx/data Entity Cache Name"),_l=new o.InjectionToken("@ngrx/data Entity Cache Meta Reducers"),td=new o.InjectionToken("@ngrx/data Entity Collection Meta Reducers"),pp=new o.InjectionToken("@ngrx/data Initial Entity Cache State"),Cu=new o.InjectionToken("@ngrx/data Entity Cache Selector"),hp={provide:Cu,useFactory:nd,deps:[[new o.Optional,ed]]};function nd(e){return(0,xt.ZF)(e=e||Ea)}let rd=(()=>{class e{constructor(t,r,s,a,l,u){this.entityActionFactory=t,this.store=r,this.entityDispatcherDefaultOptions=s,this.entityCacheSelector=l,this.correlationIdGenerator=u,this.reducedActions$=a.pipe((0,Ri.d)(1)),this.raSubscription=this.reducedActions$.subscribe()}create(t,r=Ls,s={}){const a={...this.entityDispatcherDefaultOptions,...s};return new Pm(t,this.entityActionFactory,this.store,r,a,this.reducedActions$,this.entityCacheSelector,this.correlationIdGenerator)}ngOnDestroy(){this.raSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Ko),o.\u0275\u0275inject(xt.yh),o.\u0275\u0275inject(Sa),o.\u0275\u0275inject(xt.Y$),o.\u0275\u0275inject(Cu),o.\u0275\u0275inject(wu))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();const id=new o.InjectionToken("@ngrx/data Entity Effects Scheduler");let od=(()=>{class e{constructor(t,r,s,a,l){this.actions=t,this.dataService=r,this.entityActionFactory=s,this.logger=a,this.scheduler=l,this.responseDelay=10,this.saveEntitiesCancel$=di(()=>this.actions.pipe(ki(Un.SAVE_ENTITIES_CANCEL),(0,U.h)(u=>null!=u.payload.correlationId)),{dispatch:!1}),this.saveEntities$=di(()=>this.actions.pipe(ki(Un.SAVE_ENTITIES),(0,Vo.z)(u=>this.saveEntities(u))))}saveEntities(t){const r=t.payload.error;if(r)return this.handleSaveEntitiesError$(t)(r);try{const s=Gc(t.payload.changeSet),{correlationId:a,mergeStrategy:l,tag:u,url:p}=t.payload,h={correlationId:a,mergeStrategy:l,tag:u};if(0===s.changes.length)return(0,Be.of)(new Wo(s,p,h));return ep(this.saveEntitiesCancel$.pipe((0,U.h)(W=>a===W.payload.correlationId),(0,be.U)(W=>new Xo(a,W.payload.reason,W.payload.tag))),this.dataService.saveEntities(s,p).pipe((0,$o.b)(W=>this.handleSaveEntitiesSuccess$(t,this.entityActionFactory)(W)),(0,kr.K)(this.handleSaveEntitiesError$(t))))}catch(s){return this.handleSaveEntitiesError$(t)(s)}}handleSaveEntitiesError$(t){return r=>{const s=r instanceof ms?r:new ms(r,null);return(0,Be.of)(new hs(s,t)).pipe((0,Hn.g)(this.responseDelay,this.scheduler||Ds.z))}}handleSaveEntitiesSuccess$(t,r){const{url:s,correlationId:a,mergeStrategy:l,tag:u}=t.payload,p={correlationId:a,mergeStrategy:l,tag:u};return h=>{if(h)return(0,Be.of)(new Wo(h,s,p));if(h=t.payload.changeSet,!t.payload.isOptimistic)return(0,Be.of)(new Wo(h,s,p));const S=h.changes.reduce((G,W)=>-1===G.indexOf(W.entityName)?G.concat(W.entityName):G,[]);return(0,N.T)(S.map(G=>r.create(G,Et.SET_LOADING,!1)))}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(co),o.\u0275\u0275inject(Jc),o.\u0275\u0275inject(Ko),o.\u0275\u0275inject(Zr),o.\u0275\u0275inject(id,8))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();const mp=[Et.QUERY_ALL,Et.QUERY_LOAD,Et.QUERY_BY_KEY,Et.QUERY_MANY,Et.SAVE_ADD_ONE,Et.SAVE_DELETE_ONE,Et.SAVE_UPDATE_ONE,Et.SAVE_UPSERT_ONE];let sd=(()=>{class e{constructor(t,r,s,a,l){this.actions=t,this.dataService=r,this.entityActionFactory=s,this.resultHandler=a,this.scheduler=l,this.responseDelay=10,this.cancel$=di(()=>this.actions.pipe(zs(Et.CANCEL_PERSIST),(0,be.U)(u=>u.payload.correlationId),(0,U.h)(u=>null!=u)),{dispatch:!1}),this.persist$=di(()=>this.actions.pipe(zs(mp),(0,Vo.z)(u=>this.persist(u))))}persist(t){if(t.payload.skip)return this.handleSkipSuccess$(t);if(t.payload.error)return this.handleError$(t)(t.payload.error);try{return ep(this.cancel$.pipe((0,U.h)(a=>t.payload.correlationId===a),(0,be.U)(a=>this.entityActionFactory.createFromAction(t,{entityOp:Et.CANCELED_PERSIST}))),this.callDataService(t).pipe((0,be.U)(this.resultHandler.handleSuccess(t)),(0,kr.K)(this.handleError$(t))))}catch(r){return this.handleError$(t)(r)}}callDataService(t){const{entityName:r,entityOp:s,data:a}=t.payload,l=this.dataService.getService(r);switch(s){case Et.QUERY_ALL:case Et.QUERY_LOAD:return l.getAll();case Et.QUERY_BY_KEY:return l.getById(a);case Et.QUERY_MANY:return l.getWithQuery(a);case Et.SAVE_ADD_ONE:return l.add(a);case Et.SAVE_DELETE_ONE:return l.delete(a);case Et.SAVE_UPDATE_ONE:const{id:u,changes:p}=a;return l.update(a).pipe((0,be.U)(h=>h&&Object.keys(h).length>0?{id:u,changes:{...p,...h},changed:!0}:{id:u,changes:p,changed:!1}));case Et.SAVE_UPSERT_ONE:return l.upsert(a).pipe((0,be.U)(h=>h&&Object.keys(h).length>0?h:a));default:throw new Error(`Persistence action "${s}" is not implemented.`)}}handleError$(t){return r=>(0,Be.of)(this.resultHandler.handleError(t)(r)).pipe((0,Hn.g)(this.responseDelay,this.scheduler||Ds.z))}handleSkipSuccess$(t){const r=yl(t.payload.entityOp),s=this.entityActionFactory.createFromAction(t,{entityOp:r});return(0,Be.of)(s).pipe((0,Hn.g)(this.responseDelay,this.scheduler||Ds.z))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(co),o.\u0275\u0275inject(Fi),o.\u0275\u0275inject(Ko),o.\u0275\u0275inject(Qc),o.\u0275\u0275inject(id,8))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();class ad{constructor(n,t){this.entityName=n,n=n.trim();const{dispatcher:r,selectors:s,selectors$:a}=t.create(n);this.entityName=n,this.dispatcher=r,this.guard=r.guard,this.selectId=r.selectId,this.toUpdate=r.toUpdate,this.selectors=s,this.selectors$=a,this.collection$=a.collection$,this.count$=a.count$,this.entities$=a.entities$,this.entityActions$=a.entityActions$,this.entityMap$=a.entityMap$,this.errors$=a.errors$,this.filter$=a.filter$,this.filteredEntities$=a.filteredEntities$,this.keys$=a.keys$,this.loaded$=a.loaded$,this.loading$=a.loading$,this.changeState$=a.changeState$}createEntityAction(n,t,r){return this.dispatcher.createEntityAction(n,t,r)}createAndDispatch(n,t,r){return this.dispatcher.createAndDispatch(n,t,r)}dispatch(n){return this.dispatcher.dispatch(n)}get store(){return this.dispatcher.store}add(n,t){return this.dispatcher.add(n,t)}cancel(n,t,r){this.dispatcher.cancel(n,t,r)}delete(n,t){return this.dispatcher.delete(n,t)}getAll(n){return this.dispatcher.getAll(n)}getByKey(n,t){return this.dispatcher.getByKey(n,t)}getWithQuery(n,t){return this.dispatcher.getWithQuery(n,t)}load(n){return this.dispatcher.load(n)}update(n,t){return this.dispatcher.update(n,t)}upsert(n,t){return this.dispatcher.upsert(n,t)}addAllToCache(n,t){this.dispatcher.addAllToCache(n,t)}addOneToCache(n,t){this.dispatcher.addOneToCache(n,t)}addManyToCache(n,t){this.dispatcher.addManyToCache(n,t)}clearCache(){this.dispatcher.clearCache()}removeOneFromCache(n,t){this.dispatcher.removeOneFromCache(n,t)}removeManyFromCache(n,t){this.dispatcher.removeManyFromCache(n,t)}updateOneInCache(n,t){this.dispatcher.updateOneInCache(n,t)}updateManyInCache(n,t){this.dispatcher.updateManyInCache(n,t)}upsertOneInCache(n,t){this.dispatcher.upsertOneInCache(n,t)}upsertManyInCache(n,t){this.dispatcher.upsertManyInCache(n,t)}setFilter(n){this.dispatcher.setFilter(n)}setLoaded(n){this.dispatcher.setLoaded(!!n)}setLoading(n){this.dispatcher.setLoading(!!n)}}let bl=(()=>{class e{constructor(t){this.entityDefinitionService=t}create(t){const r=this.entityDefinitionService&&this.entityDefinitionService.getDefinition(t,!1);return r&&r.initialState||function ld(e){return{entityName:e,ids:[],entities:{},filter:void 0,loaded:!1,loading:!1,changeState:{}}}(t)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(pi,8))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),ud=(()=>{class e{constructor(t,r){this.entityCollectionCreator=t||new bl,this.selectEntityCache=r||nd(Ea)}createCollectionSelector(t){return(0,xt.P1)(this.selectEntityCache,(s={})=>s[t]||this.entityCollectionCreator.create(t))}createCollectionSelectors(t){const r="string"==typeof t?{entityName:t}:t,s=Re=>Re.ids,a=Re=>Re.entities,l=(0,xt.P1)(s,a,(Re,De)=>Re.map(Je=>De[Je])),u=(0,xt.P1)(s,Re=>Re.length),p=Re=>Re.filter,h=r.filterFn,S=h?(0,xt.P1)(l,p,(Re,De)=>h(Re,De)):l,Ne={};return Object.keys(r.additionalCollectionState||{}).forEach(Re=>{Ne["select"+Re[0].toUpperCase()+Re.slice(1)]=De=>De[Re]}),{selectCount:u,selectEntities:l,selectEntityMap:a,selectFilter:p,selectFilteredEntities:S,selectKeys:s,selectLoaded:Re=>Re.loaded,selectLoading:Re=>Re.loading,selectChangeState:Re=>Re.changeState,...Ne}}create(t){const r="string"==typeof t?{entityName:t}:t,s=r.entityName,a=this.createCollectionSelector(s),l=this.createCollectionSelectors(r),u={};return Object.keys(l).forEach(p=>{u[p]=(0,xt.P1)(a,l[p])}),{entityName:s,selectCollection:a,selectEntityCache:this.selectEntityCache,...u}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(bl,8),o.\u0275\u0275inject(Cu,8))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),cd=(()=>{class e{constructor(t,r,s){this.store=t,this.actions=r,this.selectEntityCache=s,this.entityCache$=this.store.select(this.selectEntityCache),this.entityActionErrors$=r.pipe((0,U.h)(a=>a.payload&&a.payload.entityOp&&a.payload.entityOp.endsWith(vl)),(0,Ri.d)(1))}create(t,r){const s={entityName:t};return Object.keys(r).forEach(a=>{if(a.startsWith("select")){const l=a[6].toLowerCase()+a.substr(7)+"$";s[l]=this.store.select(r[a])}}),s.entityActions$=this.actions.pipe(gl(t)),s.errors$=this.entityActionErrors$.pipe(gl(t)),s}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(xt.yh),o.\u0275\u0275inject(co),o.\u0275\u0275inject(Cu))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),dd=(()=>{class e{constructor(t,r,s,a){this.entityDispatcherFactory=t,this.entityDefinitionService=r,this.entitySelectorsFactory=s,this.entitySelectors$Factory=a}create(t){t=t.trim();const r=this.entityDefinitionService.getDefinition(t),s=this.entityDispatcherFactory.create(t,r.selectId,r.entityDispatcherOptions),a=this.entitySelectorsFactory.create(r.metadata);return{dispatcher:s,entityName:t,selectors:a,selectors$:this.entitySelectors$Factory.create(t,a)}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(rd),o.\u0275\u0275inject(pi),o.\u0275\u0275inject(ud),o.\u0275\u0275inject(cd))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),fd=(()=>{class e{constructor(t){this.entityCollectionServiceElementsFactory=t}create(t){return new ad(t,this.entityCollectionServiceElementsFactory)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(dd))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),vp=(()=>{class e{constructor(t,r,s,a){this.entityCollectionServiceFactory=t,this.store=a,this.entityActionErrors$=s.entityActionErrors$,this.entityCache$=s.entityCache$,this.reducedActions$=r.reducedActions$}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(fd),o.\u0275\u0275inject(rd),o.\u0275\u0275inject(cd),o.\u0275\u0275inject(xt.yh))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),xu=(()=>{class e{constructor(t){this.entityServicesElements=t,this.EntityCollectionServices={}}get entityActionErrors$(){return this.entityServicesElements.entityActionErrors$}get entityCache$(){return this.entityServicesElements.entityCache$}get entityCollectionServiceFactory(){return this.entityServicesElements.entityCollectionServiceFactory}get reducedActions$(){return this.entityServicesElements.reducedActions$}get store(){return this.entityServicesElements.store}dispatch(t){this.store.dispatch(t)}createEntityCollectionService(t){return this.entityCollectionServiceFactory.create(t)}getEntityCollectionService(t){let r=this.EntityCollectionServices[t];return r||(r=this.createEntityCollectionService(t),this.EntityCollectionServices[t]=r),r}registerEntityCollectionService(t,r){this.EntityCollectionServices[r||t.entityName]=t}registerEntityCollectionServices(t){Array.isArray(t)?t.forEach(r=>this.registerEntityCollectionService(r)):Object.keys(t||{}).forEach(r=>{this.registerEntityCollectionService(t[r],r)})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(vp))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();class Yn{}var bn=(()=>{return(e=bn||(bn={}))[e.Unchanged=0]="Unchanged",e[e.Added=1]="Added",e[e.Deleted=2]="Deleted",e[e.Updated=3]="Updated",bn;var e})();class pd{constructor(n,t){this.adapter=n,this.selectId=t,this.selectId=t||Ls}commitAll(n){return 0===Object.keys(n.changeState).length?n:{...n,changeState:{}}}commitMany(n,t){if(null==n||0===n.length)return t;let r=!1;const s=n.reduce((a,l)=>{const u="object"==typeof l?this.selectId(l):l;return a[u]&&(r||(a={...a},r=!0),delete a[u]),a},t.changeState);return r?{...t,changeState:s}:t}commitOne(n,t){return null==n?t:this.commitMany([n],t)}mergeQueryResults(n,t,r){return this.mergeServerUpserts(n,t,Qn.PreserveChanges,r)}mergeSaveAdds(n,t,r){return this.mergeServerUpserts(n,t,Qn.OverwriteChanges,r)}mergeSaveDeletes(n,t,r){const s=n;return t=(r=r??Qn.OverwriteChanges)===Qn.IgnoreChanges?t:this.commitMany(s,t),this.adapter.removeMany(s,t)}mergeSaveUpdates(n,t,r,s=!1){if(null==n||0===n.length)return t;let u,a=!1,l=t.changeState;switch(r=r??Qn.OverwriteChanges){case Qn.IgnoreChanges:return u=p(n),this.adapter.updateMany(u,t);case Qn.OverwriteChanges:return l=n.reduce((h,S)=>{const G=S.id;return h[G]&&(a||(h={...h},a=!0),delete h[G]),h},t.changeState),t=a?{...t,changeState:l}:t,u=p(n),this.adapter.updateMany(u,t);case Qn.PreserveChanges:{const h=[];return l=n.reduce((S,G)=>{const W=G.id,J=S[W];if(J){a||(S={...S},a=!0);const ve=this.selectId(G.changes),Ne=J;ve!==W&&delete S[W];const Re={...Ne.originalValue,...G.changes};S[ve]={...Ne,originalValue:Re}}else h.push(G);return S},t.changeState),t=a?{...t,changeState:l}:t,u=p(h),this.adapter.updateMany(u,t)}}function p(h){return!0===s&&(h=h.filter(S=>!0===S.changed)),h.map(S=>({id:S.id,changes:S.changes}))}}mergeSaveUpserts(n,t,r){return this.mergeServerUpserts(n,t,Qn.OverwriteChanges,r)}mergeServerUpserts(n,t,r,s){if(null==n||0===n.length)return t;let a=!1,l=t.changeState;switch(s=s??r){case Qn.IgnoreChanges:return this.adapter.upsertMany(n,t);case Qn.OverwriteChanges:return t=this.adapter.upsertMany(n,t),l=n.reduce((u,p)=>{const h=this.selectId(p);return u[h]&&(a||(u={...u},a=!0),delete u[h]),u},t.changeState),a?{...t,changeState:l}:t;case Qn.PreserveChanges:{const u=[];return l=n.reduce((p,h)=>{const S=this.selectId(h);return p[S]?a||(p={...p,[S]:{...p[S],originalValue:h}},a=!0):u.push(h),p},t.changeState),t=this.adapter.upsertMany(u,t),a?{...t,changeState:l}:t}}}trackAddMany(n,t,r){if(r===Qn.IgnoreChanges||null==n||0===n.length)return t;let s=!1;const a=n.reduce((l,u)=>{const p=this.selectId(u);if(null==p||""===p)throw new Error(`${t.entityName} entity add requires a key to be tracked`);return l[p]||(s||(s=!0,l={...l}),l[p]={changeType:bn.Added}),l},t.changeState);return s?{...t,changeState:a}:t}trackAddOne(n,t,r){return null==n?t:this.trackAddMany([n],t,r)}trackDeleteMany(n,t,r){if(r===Qn.IgnoreChanges||null==n||0===n.length)return t;let s=!1;const a=t.entities,l=n.reduce((u,p)=>{const h=a[p];if(h){const G=u[p];G?G.changeType===bn.Added?(S(),delete u[p]):G.changeType===bn.Updated&&(S(),u[p]={...u[p],changeType:bn.Deleted}):(S(),u[p]={changeType:bn.Deleted,originalValue:h})}return u;function S(){s||(s=!0,u={...u})}},t.changeState);return s?{...t,changeState:l}:t}trackDeleteOne(n,t,r){return null==n?t:this.trackDeleteMany([n],t,r)}trackUpdateMany(n,t,r){if(r===Qn.IgnoreChanges||null==n||0===n.length)return t;let s=!1;const a=t.entities,l=n.reduce((u,p)=>{const{id:h}=p;if(null==h||""===h)throw new Error(`${t.entityName} entity update requires a key to be tracked`);const G=a[h];return G&&(u[h]||(s||(s=!0,u={...u}),u[h]={changeType:bn.Updated,originalValue:G})),u},t.changeState);return s?{...t,changeState:l}:t}trackUpdateOne(n,t,r){return null==n?t:this.trackUpdateMany([n],t,r)}trackUpsertMany(n,t,r){if(r===Qn.IgnoreChanges||null==n||0===n.length)return t;let s=!1;const a=t.entities,l=n.reduce((u,p)=>{const h=this.selectId(p);if(null==h||""===h)throw new Error(`${t.entityName} entity upsert requires a key to be tracked`);if(!u[h]){s||(s=!0,u={...u});const G=a[h];u[h]=null==G?{changeType:bn.Added}:{changeType:bn.Updated,originalValue:G}}return u},t.changeState);return s?{...t,changeState:l}:t}trackUpsertOne(n,t,r){return null==n?t:this.trackUpsertMany([n],t,r)}undoAll(n){const t=Object.keys(n.changeState),{remove:r,upsert:s}=t.reduce((a,l)=>{const u=a.chgState[l];switch(u.changeType){case bn.Added:a.remove.push(l);break;case bn.Deleted:const p=u.originalValue;p&&a.upsert.push(p);break;case bn.Updated:a.upsert.push(u.originalValue)}return a},{remove:[],upsert:[],chgState:n.changeState});return n=this.adapter.removeMany(r,n),n=this.adapter.upsertMany(s,n),{...n,changeState:{}}}undoMany(n,t){if(null==n||0===n.length)return t;let r=!1;const{changeState:s,remove:a,upsert:l}=n.reduce((u,p)=>{let h=u.changeState;const S="object"==typeof p?this.selectId(p):p,G=h[S];if(G)switch(r||(h={...h},r=!0),delete h[S],u.changeState=h,G.changeType){case bn.Added:u.remove.push(S);break;case bn.Deleted:const W=G.originalValue;W&&u.upsert.push(W);break;case bn.Updated:u.upsert.push(G.originalValue)}return u},{remove:[],upsert:[],changeState:t.changeState});return t=this.adapter.removeMany(a,t),t=this.adapter.upsertMany(l,t),r?{...t,changeState:s}:t}undoOne(n,t){return null==n?t:this.undoMany([n],t)}}class ho{constructor(n,t,r){this.entityName=n,this.definition=t,this.methods={[Et.CANCEL_PERSIST]:this.cancelPersist.bind(this),[Et.QUERY_ALL]:this.queryAll.bind(this),[Et.QUERY_ALL_ERROR]:this.queryAllError.bind(this),[Et.QUERY_ALL_SUCCESS]:this.queryAllSuccess.bind(this),[Et.QUERY_BY_KEY]:this.queryByKey.bind(this),[Et.QUERY_BY_KEY_ERROR]:this.queryByKeyError.bind(this),[Et.QUERY_BY_KEY_SUCCESS]:this.queryByKeySuccess.bind(this),[Et.QUERY_LOAD]:this.queryLoad.bind(this),[Et.QUERY_LOAD_ERROR]:this.queryLoadError.bind(this),[Et.QUERY_LOAD_SUCCESS]:this.queryLoadSuccess.bind(this),[Et.QUERY_MANY]:this.queryMany.bind(this),[Et.QUERY_MANY_ERROR]:this.queryManyError.bind(this),[Et.QUERY_MANY_SUCCESS]:this.queryManySuccess.bind(this),[Et.SAVE_ADD_MANY]:this.saveAddMany.bind(this),[Et.SAVE_ADD_MANY_ERROR]:this.saveAddManyError.bind(this),[Et.SAVE_ADD_MANY_SUCCESS]:this.saveAddManySuccess.bind(this),[Et.SAVE_ADD_ONE]:this.saveAddOne.bind(this),[Et.SAVE_ADD_ONE_ERROR]:this.saveAddOneError.bind(this),[Et.SAVE_ADD_ONE_SUCCESS]:this.saveAddOneSuccess.bind(this),[Et.SAVE_DELETE_MANY]:this.saveDeleteMany.bind(this),[Et.SAVE_DELETE_MANY_ERROR]:this.saveDeleteManyError.bind(this),[Et.SAVE_DELETE_MANY_SUCCESS]:this.saveDeleteManySuccess.bind(this),[Et.SAVE_DELETE_ONE]:this.saveDeleteOne.bind(this),[Et.SAVE_DELETE_ONE_ERROR]:this.saveDeleteOneError.bind(this),[Et.SAVE_DELETE_ONE_SUCCESS]:this.saveDeleteOneSuccess.bind(this),[Et.SAVE_UPDATE_MANY]:this.saveUpdateMany.bind(this),[Et.SAVE_UPDATE_MANY_ERROR]:this.saveUpdateManyError.bind(this),[Et.SAVE_UPDATE_MANY_SUCCESS]:this.saveUpdateManySuccess.bind(this),[Et.SAVE_UPDATE_ONE]:this.saveUpdateOne.bind(this),[Et.SAVE_UPDATE_ONE_ERROR]:this.saveUpdateOneError.bind(this),[Et.SAVE_UPDATE_ONE_SUCCESS]:this.saveUpdateOneSuccess.bind(this),[Et.SAVE_UPSERT_MANY]:this.saveUpsertMany.bind(this),[Et.SAVE_UPSERT_MANY_ERROR]:this.saveUpsertManyError.bind(this),[Et.SAVE_UPSERT_MANY_SUCCESS]:this.saveUpsertManySuccess.bind(this),[Et.SAVE_UPSERT_ONE]:this.saveUpsertOne.bind(this),[Et.SAVE_UPSERT_ONE_ERROR]:this.saveUpsertOneError.bind(this),[Et.SAVE_UPSERT_ONE_SUCCESS]:this.saveUpsertOneSuccess.bind(this),[Et.ADD_ALL]:this.addAll.bind(this),[Et.ADD_MANY]:this.addMany.bind(this),[Et.ADD_ONE]:this.addOne.bind(this),[Et.REMOVE_ALL]:this.removeAll.bind(this),[Et.REMOVE_MANY]:this.removeMany.bind(this),[Et.REMOVE_ONE]:this.removeOne.bind(this),[Et.UPDATE_MANY]:this.updateMany.bind(this),[Et.UPDATE_ONE]:this.updateOne.bind(this),[Et.UPSERT_MANY]:this.upsertMany.bind(this),[Et.UPSERT_ONE]:this.upsertOne.bind(this),[Et.COMMIT_ALL]:this.commitAll.bind(this),[Et.COMMIT_MANY]:this.commitMany.bind(this),[Et.COMMIT_ONE]:this.commitOne.bind(this),[Et.UNDO_ALL]:this.undoAll.bind(this),[Et.UNDO_MANY]:this.undoMany.bind(this),[Et.UNDO_ONE]:this.undoOne.bind(this),[Et.SET_CHANGE_STATE]:this.setChangeState.bind(this),[Et.SET_COLLECTION]:this.setCollection.bind(this),[Et.SET_FILTER]:this.setFilter.bind(this),[Et.SET_LOADED]:this.setLoaded.bind(this),[Et.SET_LOADING]:this.setLoading.bind(this)},this.adapter=t.entityAdapter,this.isChangeTracking=!0!==t.noChangeTracking,this.selectId=t.selectId,this.guard=new zc(n,this.selectId),this.toUpdate=Uc(this.selectId),this.entityChangeTracker=r||new pd(this.adapter,this.selectId)}cancelPersist(n){return this.setLoadingFalse(n)}queryAll(n){return this.setLoadingTrue(n)}queryAllError(n,t){return this.setLoadingFalse(n)}queryAllSuccess(n,t){const r=this.extractData(t),s=this.extractMergeStrategy(t);return{...this.entityChangeTracker.mergeQueryResults(r,n,s),loaded:!0,loading:!1}}queryByKey(n,t){return this.setLoadingTrue(n)}queryByKeyError(n,t){return this.setLoadingFalse(n)}queryByKeySuccess(n,t){const r=this.extractData(t),s=this.extractMergeStrategy(t);return n=null==r?n:this.entityChangeTracker.mergeQueryResults([r],n,s),this.setLoadingFalse(n)}queryLoad(n){return this.setLoadingTrue(n)}queryLoadError(n,t){return this.setLoadingFalse(n)}queryLoadSuccess(n,t){const r=this.extractData(t);return{...this.adapter.setAll(r,n),loading:!1,loaded:!0,changeState:{}}}queryMany(n,t){return this.setLoadingTrue(n)}queryManyError(n,t){return this.setLoadingFalse(n)}queryManySuccess(n,t){const r=this.extractData(t),s=this.extractMergeStrategy(t);return{...this.entityChangeTracker.mergeQueryResults(r,n,s),loaded:!0,loading:!1}}saveAddMany(n,t){if(this.isOptimistic(t)){const r=this.guard.mustBeEntities(t),s=this.extractMergeStrategy(t);n=this.entityChangeTracker.trackAddMany(r,n,s),n=this.adapter.addMany(r,n)}return this.setLoadingTrue(n)}saveAddManyError(n,t){return this.setLoadingFalse(n)}saveAddManySuccess(n,t){const r=this.guard.mustBeEntities(t),s=this.extractMergeStrategy(t);return n=this.isOptimistic(t)?this.entityChangeTracker.mergeSaveUpserts(r,n,s):this.entityChangeTracker.mergeSaveAdds(r,n,s),this.setLoadingFalse(n)}saveAddOne(n,t){if(this.isOptimistic(t)){const r=this.guard.mustBeEntity(t),s=this.extractMergeStrategy(t);n=this.entityChangeTracker.trackAddOne(r,n,s),n=this.adapter.addOne(r,n)}return this.setLoadingTrue(n)}saveAddOneError(n,t){return this.setLoadingFalse(n)}saveAddOneSuccess(n,t){const r=this.guard.mustBeEntity(t),s=this.extractMergeStrategy(t);if(this.isOptimistic(t)){const a=this.toUpdate(r);n=this.entityChangeTracker.mergeSaveUpdates([a],n,s,!1)}else n=this.entityChangeTracker.mergeSaveAdds([r],n,s);return this.setLoadingFalse(n)}saveDeleteOne(n,t){const r=this.extractData(t),s="object"==typeof r?this.selectId(r):r,a=n.changeState[s];if(a&&(a.changeType===bn.Added?(n=this.adapter.removeOne(s,n),n=this.entityChangeTracker.commitOne(s,n),t.payload.skip=!0):n=this.entityChangeTracker.trackDeleteOne(s,n)),this.isOptimistic(t)){const l=this.extractMergeStrategy(t);n=this.entityChangeTracker.trackDeleteOne(s,n,l),n=this.adapter.removeOne(s,n)}return this.setLoadingTrue(n)}saveDeleteOneError(n,t){return this.setLoadingFalse(n)}saveDeleteOneSuccess(n,t){const r=this.extractData(t);if(this.isOptimistic(t)){const s=this.extractMergeStrategy(t);n=this.entityChangeTracker.mergeSaveDeletes([r],n,s)}else n=this.adapter.removeOne(r,n),n=this.entityChangeTracker.commitOne(r,n);return this.setLoadingFalse(n)}saveDeleteMany(n,t){const r=this.extractData(t).map(s=>"object"==typeof s?this.selectId(s):s);if(r.forEach(s=>{const a=n.changeState[s];a&&(a.changeType===bn.Added?(n=this.adapter.removeOne(s,n),n=this.entityChangeTracker.commitOne(s,n),t.payload.skip=!0):n=this.entityChangeTracker.trackDeleteOne(s,n))}),this.isOptimistic(t)){const s=this.extractMergeStrategy(t);n=this.entityChangeTracker.trackDeleteMany(r,n,s),n=this.adapter.removeMany(r,n)}return this.setLoadingTrue(n)}saveDeleteManyError(n,t){return this.setLoadingFalse(n)}saveDeleteManySuccess(n,t){const r=this.extractData(t);if(this.isOptimistic(t)){const s=this.extractMergeStrategy(t);n=this.entityChangeTracker.mergeSaveDeletes(r,n,s)}else n=this.adapter.removeMany(r,n),n=this.entityChangeTracker.commitMany(r,n);return this.setLoadingFalse(n)}saveUpdateOne(n,t){const r=this.guard.mustBeUpdate(t);if(this.isOptimistic(t)){const s=this.extractMergeStrategy(t);n=this.entityChangeTracker.trackUpdateOne(r,n,s),n=this.adapter.updateOne(r,n)}return this.setLoadingTrue(n)}saveUpdateOneError(n,t){return this.setLoadingFalse(n)}saveUpdateOneSuccess(n,t){const r=this.guard.mustBeUpdateResponse(t),s=this.isOptimistic(t),a=this.extractMergeStrategy(t);return n=this.entityChangeTracker.mergeSaveUpdates([r],n,a,s),this.setLoadingFalse(n)}saveUpdateMany(n,t){const r=this.guard.mustBeUpdates(t);if(this.isOptimistic(t)){const s=this.extractMergeStrategy(t);n=this.entityChangeTracker.trackUpdateMany(r,n,s),n=this.adapter.updateMany(r,n)}return this.setLoadingTrue(n)}saveUpdateManyError(n,t){return this.setLoadingFalse(n)}saveUpdateManySuccess(n,t){const r=this.guard.mustBeUpdateResponses(t),a=(this.isOptimistic(t),this.extractMergeStrategy(t));return n=this.entityChangeTracker.mergeSaveUpdates(r,n,a,!1),this.setLoadingFalse(n)}saveUpsertOne(n,t){if(this.isOptimistic(t)){const r=this.guard.mustBeEntity(t),s=this.extractMergeStrategy(t);n=this.entityChangeTracker.trackUpsertOne(r,n,s),n=this.adapter.upsertOne(r,n)}return this.setLoadingTrue(n)}saveUpsertOneError(n,t){return this.setLoadingFalse(n)}saveUpsertOneSuccess(n,t){const r=this.guard.mustBeEntity(t),s=this.extractMergeStrategy(t);return n=this.entityChangeTracker.mergeSaveUpserts([r],n,s),this.setLoadingFalse(n)}saveUpsertMany(n,t){if(this.isOptimistic(t)){const r=this.guard.mustBeEntities(t),s=this.extractMergeStrategy(t);n=this.entityChangeTracker.trackUpsertMany(r,n,s),n=this.adapter.upsertMany(r,n)}return this.setLoadingTrue(n)}saveUpsertManyError(n,t){return this.setLoadingFalse(n)}saveUpsertManySuccess(n,t){const r=this.guard.mustBeEntities(t),s=this.extractMergeStrategy(t);return n=this.entityChangeTracker.mergeSaveUpserts(r,n,s),this.setLoadingFalse(n)}addAll(n,t){const r=this.guard.mustBeEntities(t);return{...this.adapter.setAll(r,n),loading:!1,loaded:!0,changeState:{}}}addMany(n,t){const r=this.guard.mustBeEntities(t),s=this.extractMergeStrategy(t);return n=this.entityChangeTracker.trackAddMany(r,n,s),this.adapter.addMany(r,n)}addOne(n,t){const r=this.guard.mustBeEntity(t),s=this.extractMergeStrategy(t);return n=this.entityChangeTracker.trackAddOne(r,n,s),this.adapter.addOne(r,n)}removeMany(n,t){const r=this.guard.mustBeKeys(t),s=this.extractMergeStrategy(t);return n=this.entityChangeTracker.trackDeleteMany(r,n,s),this.adapter.removeMany(r,n)}removeOne(n,t){const r=this.guard.mustBeKey(t),s=this.extractMergeStrategy(t);return n=this.entityChangeTracker.trackDeleteOne(r,n,s),this.adapter.removeOne(r,n)}removeAll(n,t){return{...this.adapter.removeAll(n),loaded:!1,loading:!1,changeState:{}}}updateMany(n,t){const r=this.guard.mustBeUpdates(t),s=this.extractMergeStrategy(t);return n=this.entityChangeTracker.trackUpdateMany(r,n,s),this.adapter.updateMany(r,n)}updateOne(n,t){const r=this.guard.mustBeUpdate(t),s=this.extractMergeStrategy(t);return n=this.entityChangeTracker.trackUpdateOne(r,n,s),this.adapter.updateOne(r,n)}upsertMany(n,t){const r=this.guard.mustBeEntities(t),s=this.extractMergeStrategy(t);return n=this.entityChangeTracker.trackUpsertMany(r,n,s),this.adapter.upsertMany(r,n)}upsertOne(n,t){const r=this.guard.mustBeEntity(t),s=this.extractMergeStrategy(t);return n=this.entityChangeTracker.trackUpsertOne(r,n,s),this.adapter.upsertOne(r,n)}commitAll(n){return this.entityChangeTracker.commitAll(n)}commitMany(n,t){return this.entityChangeTracker.commitMany(this.extractData(t),n)}commitOne(n,t){return this.entityChangeTracker.commitOne(this.extractData(t),n)}undoAll(n){return this.entityChangeTracker.undoAll(n)}undoMany(n,t){return this.entityChangeTracker.undoMany(this.extractData(t),n)}undoOne(n,t){return this.entityChangeTracker.undoOne(this.extractData(t),n)}setChangeState(n,t){const r=this.extractData(t);return n.changeState===r?n:{...n,changeState:r}}setCollection(n,t){const r=this.extractData(t);return n===r?n:r}setFilter(n,t){const r=this.extractData(t);return n.filter===r?n:{...n,filter:r}}setLoaded(n,t){const r=!0===this.extractData(t)||!1;return n.loaded===r?n:{...n,loaded:r}}setLoading(n,t){return this.setLoadingFlag(n,this.extractData(t))}setLoadingFalse(n){return this.setLoadingFlag(n,!1)}setLoadingTrue(n){return this.setLoadingFlag(n,!0)}setLoadingFlag(n,t){return n.loading===(t=!0===t)?n:{...n,loading:t}}extractData(n){return n.payload&&n.payload.data}extractMergeStrategy(n){return this.isChangeTracking?n.payload&&n.payload.mergeStrategy:Qn.IgnoreChanges}isOptimistic(n){return n.payload&&!0===n.payload.isOptimistic}}let mo=(()=>{class e{constructor(t){this.entityDefinitionService=t}create(t){const r=this.entityDefinitionService.getDefinition(t);return new ho(t,r).methods}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(pi))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),gs=(()=>{class e{constructor(t){this.methodsFactory=t}create(t){const r=this.methodsFactory.create(t);return function(a,l){const u=r[l.payload.entityOp];return u?u(a,l):a}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(mo))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),wl=(()=>{class e{constructor(t,r){this.entityCollectionReducerFactory=t,this.entityCollectionReducers={},this.entityCollectionMetaReducer=xt.qC.apply(null,r||[])}getOrCreateReducer(t){let r=this.entityCollectionReducers[t];return r||(r=this.entityCollectionReducerFactory.create(t),r=this.registerReducer(t,r),this.entityCollectionReducers[t]=r),r}registerReducer(t,r){return r=this.entityCollectionMetaReducer(r),this.entityCollectionReducers[t.trim()]=r}registerReducers(t){(t?Object.keys(t):[]).forEach(s=>this.registerReducer(s,t[s]))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(gs),o.\u0275\u0275inject(td,8))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),hd=(()=>{class e{constructor(t,r,s){this.entityCollectionCreator=t,this.entityCollectionReducerRegistry=r,this.logger=s}create(){return function t(r={},s){switch(s.type){case Un.CLEAR_COLLECTIONS:return this.clearCollectionsReducer(r,s);case Un.LOAD_COLLECTIONS:return this.loadCollectionsReducer(r,s);case Un.MERGE_QUERY_SET:return this.mergeQuerySetReducer(r,s);case Un.SAVE_ENTITIES:return this.saveEntitiesReducer(r,s);case Un.SAVE_ENTITIES_CANCEL:return this.saveEntitiesCancelReducer(r,s);case Un.SAVE_ENTITIES_ERROR:return this.saveEntitiesErrorReducer(r,s);case Un.SAVE_ENTITIES_SUCCESS:return this.saveEntitiesSuccessReducer(r,s);case Un.SET_ENTITY_CACHE:return s.payload.cache}const a=s.payload;return a&&a.entityName&&a.entityOp&&!a.error?this.applyCollectionReducer(r,s):r}.bind(this)}clearCollectionsReducer(t,r){let{collections:s}=r.payload;const l=Et.REMOVE_ALL;return s||(s=Object.keys(t)),s.reduce((u,p)=>this.applyCollectionReducer(u,{type:`[${p}] ${r.type}`,payload:{entityName:p,entityOp:l}}),t)}loadCollectionsReducer(t,r){const{collections:s}=r.payload,l=Et.ADD_ALL;return Object.keys(s).reduce((p,h)=>this.applyCollectionReducer(p,{type:`[${h}] ${r.type}`,payload:{entityName:h,entityOp:l,data:s[h]}}),t)}mergeQuerySetReducer(t,r){let{mergeStrategy:s,querySet:a}=r.payload;s=null===s?Qn.PreserveChanges:s;const u=Et.QUERY_MANY_SUCCESS;return Object.keys(a).reduce((h,S)=>this.applyCollectionReducer(h,{type:`[${S}] ${r.type}`,payload:{entityName:S,entityOp:u,data:a[S],mergeStrategy:s}}),t)}saveEntitiesReducer(t,r){const{changeSet:s,correlationId:a,isOptimistic:l,mergeStrategy:u,tag:p}=r.payload;try{s.changes.forEach(S=>{const G=S.entityName,W={entityName:G,entityOp:h(S),data:S.entities,correlationId:a,isOptimistic:l,mergeStrategy:u,tag:p},J={type:`[${G}] ${r.type}`,payload:W};if(t=this.applyCollectionReducer(t,J),J.payload.error)throw J.payload.error})}catch(S){r.payload.error=S}return t;function h(S){switch(S.op){case Vr.Add:return Et.SAVE_ADD_MANY;case Vr.Delete:return Et.SAVE_DELETE_MANY;case Vr.Update:return Et.SAVE_UPDATE_MANY;case Vr.Upsert:return Et.SAVE_UPSERT_MANY}}}saveEntitiesCancelReducer(t,r){return this.clearLoadingFlags(t,r.payload.entityNames||[])}saveEntitiesErrorReducer(t,r){const l=r.payload.originalAction.payload.changeSet.changes.map(u=>u.entityName);return this.clearLoadingFlags(t,l)}saveEntitiesSuccessReducer(t,r){const{changeSet:s,correlationId:a,isOptimistic:l,mergeStrategy:u,tag:p}=r.payload;return s.changes.forEach(S=>{const G=S.entityName,W={entityName:G,entityOp:h(S),data:S.entities,correlationId:a,isOptimistic:l,mergeStrategy:u,tag:p};t=this.applyCollectionReducer(t,{type:`[${G}] ${r.type}`,payload:W})}),t;function h(S){switch(S.op){case Vr.Add:return Et.SAVE_ADD_MANY_SUCCESS;case Vr.Delete:return Et.SAVE_DELETE_MANY_SUCCESS;case Vr.Update:return Et.SAVE_UPDATE_MANY_SUCCESS;case Vr.Upsert:return Et.SAVE_UPSERT_MANY_SUCCESS}}}applyCollectionReducer(t={},r){const s=r.payload.entityName,a=t[s],l=this.entityCollectionReducerRegistry.getOrCreateReducer(s);let u;try{u=l(a||this.entityCollectionCreator.create(s),r)}catch(p){this.logger.error(p),r.payload.error=p}return r.payload.error||a===u?t:{...t,[s]:u}}clearLoadingFlags(t,r){let s=!1;return r.forEach(a=>{const l=t[a];l.loading&&(s||(t={...t},s=!0),t[a]={...l,loading:!1})}),t}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(bl),o.\u0275\u0275inject(wl),o.\u0275\u0275inject(Zr))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Su=(()=>{class e{error(t,r){t&&(r?console.error(t,r):console.error(t))}log(t,r){t&&(r?console.log(t,r):console.log(t))}warn(t,r){t&&(r?console.warn(t,r):console.warn(t))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();const Eu=["equipment","information","money","series"];let Au=(()=>{class e{constructor(t){this.pluralNames={},t&&t.forEach(r=>this.registerPluralNames(r))}pluralize(t){return this.pluralNames[t]||(Eu.indexOf(t.toLowerCase())>=0?t:/[aeiou]y$/.test(t)?t+"s":t.endsWith("y")?t.substr(0,t.length-1)+"ies":/[s|ss|sh|ch|x|z]$/.test(t)?t+"es":t+"s")}registerPluralNames(t){this.pluralNames={...this.pluralNames,...t||{}}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(yu,8))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Br=(()=>{class e{constructor(t,r,s,a,l,u){this.reducerManager=t,this.injector=s,this.entityCacheName=a,this.initialState=l,this.metaReducers=u;const p=a||Ea;l="function"==typeof l?l():l;const h=(u||[]).map(S=>S instanceof o.InjectionToken?s.get(S):S);this.entityCacheFeature={key:p,reducers:r.create(),reducerFactory:xt.UY,initialState:l||{},metaReducers:h},t.addFeature(this.entityCacheFeature)}static forRoot(t){return{ngModule:e,providers:[{provide:_l,useValue:t.entityCacheMetaReducers?t.entityCacheMetaReducers:[]},{provide:td,useValue:t.entityCollectionMetaReducers?t.entityCollectionMetaReducers:[]},{provide:yu,multi:!0,useValue:t.pluralNames?t.pluralNames:{}}]}}ngOnDestroy(){this.reducerManager.removeFeature(this.entityCacheFeature)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(xt.PB),o.\u0275\u0275inject(hd),o.\u0275\u0275inject(o.Injector),o.\u0275\u0275inject(ed,8),o.\u0275\u0275inject(pp,8),o.\u0275\u0275inject(_l,8))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({providers:[wu,Sa,Ko,Am,hd,hp,bl,gs,mo,wl,dd,fd,pi,rd,ud,cd,vp,{provide:ed,useValue:Ea},{provide:Yn,useClass:xu},{provide:Zr,useClass:Su}],imports:[[xt.Aw]]}),e})(),Pu=(()=>{class e{constructor(t,r,s){this.effectSources=t,this.addEffects(r),this.addEffects(s)}static forRoot(t){return{ngModule:e,providers:[{provide:Wc,multi:!0,useValue:t.entityMetadata?t.entityMetadata:[]},{provide:_l,useValue:t.entityCacheMetaReducers?t.entityCacheMetaReducers:[]},{provide:td,useValue:t.entityCollectionMetaReducers?t.entityCollectionMetaReducers:[]},{provide:yu,multi:!0,useValue:t.pluralNames?t.pluralNames:{}}]}}addEffects(t){this.effectSources.addEffects(t)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(fo),o.\u0275\u0275inject(od),o.\u0275\u0275inject(sd))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({providers:[Kc,Jc,Fi,od,sd,{provide:$c,useClass:_u},{provide:Qc,useClass:Yc},{provide:xa,useClass:Au}],imports:[[Br,po]]}),e})();var Lr=(()=>{return(e=Lr||(Lr={})).Login="[Auth] Login",e.Logout="[Auth] Logout",e.CompleteAuthentication="[Auth] CompleteAuthentication",e.SetUser="[Auth] SetUser",Lr;var e})();class Us{constructor(){this.type=Lr.Login}}class Aa{constructor(){this.type=Lr.Logout}}class Gs{constructor(){this.type=Lr.CompleteAuthentication}}class Pa{constructor(n){this.payload=n,this.type=Lr.SetUser}}var Ia=Object.freeze({__proto__:null,get AuthActionTypes(){return Lr},Login:Us,Logout:Aa,CompleteAuthentication:Gs,SetUser:Pa,fromAuthActions:{Login:Us,Logout:Aa,CompleteAuthentication:Gs,SetUser:Pa}});const Cl={user:void 0,cookies:new Map};function Iu(e=Cl,n){switch(n.type){case Lr.SetUser:e={...e,user:n.payload};break;case Lr.Logout:e={...e,user:void 0}}return e}const Tu=(0,xt.ZF)("auth"),vs={getUser:(0,xt.P1)(Tu,e=>e.user)};let ei=(()=>{class e{constructor(t){this.store=t,this.getUser$=this.store.pipe((0,xt.Ys)(vs.getUser)),this.token$=this.store.pipe((0,xt.Ys)(vs.getUser),(0,be.U)(r=>r?`${r.token_type} ${r.access_token}`:void 0)),this.idToken$=this.store.pipe((0,xt.Ys)(vs.getUser),(0,be.U)(r=>r?`${r.token_type} ${r.id_token}`:void 0))}login(){this.store.dispatch(new Us)}logout(){this.store.dispatch(new Aa)}setUser(t){this.store.dispatch(new Pa(t))}completeAuthentication(){this.store.dispatch(new Gs)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(xt.yh))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const md={PublicUserProfile:{entityName:"PublicUserProfile"}};let ku=(()=>{class e{constructor(t,r,s,a){this.authFacade=t,this.router=r,this.route=s,this.platformId=a}ngOnInit(){var t=this;return iu(function*(){t.authFacade.completeAuthentication(),t.router.navigate(["/pages/create-panel-page"],{queryParams:{cacheBuster:zn()}})})()}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(ei),o.\u0275\u0275directiveInject(Pn.Router),o.\u0275\u0275directiveInject(Pn.ActivatedRoute),o.\u0275\u0275directiveInject(o.PLATFORM_ID))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-auth-callback"]],decls:2,vars:0,template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"p"),o.\u0275\u0275text(1,"auth-callback works!"),o.\u0275\u0275elementEnd())},styles:[""]}),e})(),_i=(()=>{class e{constructor(t){t.registerMetadataMap(md)}static forRoot(){return{ngModule:e,providers:[ei]}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(pi))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[C.CommonModule,xt.Aw.forFeature("auth",Iu)]]}),e})(),$s=(()=>{class e{constructor(t,r){this.authFacade=t,this.router=r}intercept(t,r){return r.handle(t).pipe((0,ee.b)({error:s=>{}}))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(ei),o.\u0275\u0275inject(Pn.Router))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();var ti=x(7355),_p=x(9188),ys=x(9687);const Im=new o.InjectionToken("REQUEST");new o.InjectionToken("RESPONSE");var tt=x(3900);class Jo{constructor(n){n&&(this.authority=n.authority,this.client_id=n.client_id,this.redirect_uri=n.redirect_uri,this.silent_redirect_uri=n.silent_redirect_uri,this.response_type=n.response_type,this.scope=n.scope,this.filterProtocolClaims=n.filterProtocolClaims,this.loadUserInfo=n.loadUserInfo,this.automaticSilentRenew=n.automaticSilentRenew,this.metadata={...n.metadata},this.userStore=n.userStore?n.userStore:void 0,this.stateStore=n.userStore?n.stateStore:void 0)}}const Ou=(0,I.Cb)("auth");let Fu=(()=>{class e{constructor(t,r,s){this.clientSettings=t,this.platformId=r,this.transferState=s,this.data={},this.isBrowser=(0,C.isPlatformBrowser)(this.platformId),this.cookieMap={oa:"access_token",oi:"id_token",or:"refresh_token",os:"scope",oe:"expires_at",op:"profile"},this.tokenKey=`oidc.user:${this.clientSettings.authority}:${this.clientSettings.client_id}`}set request(t){this.req=t}init(){if(this.isBrowser)if(sessionStorage.getItem(this.tokenKey))this.setItem(this.tokenKey,sessionStorage.getItem(this.tokenKey));else if(this.transferState.hasKey(Ou)){const t=this.transferState.get(Ou,void 0);t&&this.setItem(this.tokenKey,t)}else for(let t=0;t<sessionStorage.length;t++){const r=sessionStorage.key(t);this.setItem(r,sessionStorage.getItem(r))}else{const t={token_type:"Bearer"};let r;Object.getOwnPropertyNames(this.cookieMap).forEach(s=>{let a=this.getCookie(s);a&&""!==a&&(a=this.translateFromCookieValue(s,a),"oe"===s?r=a:t[this.cookieMap[s]]=a)}),t.access_token&&(this.data[this.tokenKey]=JSON.stringify(t),this.transferState.set(Ou,JSON.stringify({...t,expires_at:r})))}}getItem(t){return this.data[t]}setItem(t,r){if(t===this.tokenKey){const s=JSON.parse(r);Object.getOwnPropertyNames(this.cookieMap).forEach(a=>{this.setCookie(a,this.translateCookieValue(a,s[this.cookieMap[a]]))})}this.isBrowser&&sessionStorage.setItem(t,r),this.data[t]=r}removeItem(t){this.removeCookie(t),this.isBrowser&&sessionStorage.removeItem(t),delete this.data[t]}get length(){return Object.getOwnPropertyNames(this.data).length}key(t){return console.log("index()"),Object.getOwnPropertyNames(this.data)[t]}getCookie(t){return this.isBrowser?ti.get(t):this.req?this.req.cookies[t]??"":void 0}setCookie(t,r){this.isBrowser&&ti.set(t,r)}removeCookie(t){this.isBrowser&&ti.remove(t)}translateCookieValue(t,r){switch(t){case"os":return r.split(" ").join("|");case"oe":return`${r}`;case"op":return JSON.stringify(r);default:return r}}translateFromCookieValue(t,r){switch(t){case"os":return r.split("|").join(" ");case"oe":return(0,_p.He)(r);case"op":return JSON.parse(r);default:return r}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Jo),o.\u0275\u0275inject(Object),o.\u0275\u0275inject(I.ki))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();const bp=(e,n)=>new ys.UserManager(new Jo({...e,stateStore:new ys.WebStorageStateStore({store:n}),userStore:new ys.WebStorageStateStore({store:n})})),Du=(e,n,t)=>()=>new Promise(r=>{e.getUser().then(s=>{s?(n.setUser(s),setTimeout(()=>r())):r()})}),Rm=(e,n,t,r)=>{const s=new Fu(e,n,r);if((0,C.isPlatformServer)(n))try{s.request=t.get(Im)}catch{}return s.init(),s};let km=(()=>{class e{constructor(t,r,s){this.actions$=t,this.userManager=r,this.entityActionFactory=s,this.login$=di(()=>this.actions$.pipe(ki(Ia.AuthActionTypes.Login),(0,ee.b)(()=>{this.userManager.signinRedirect()})),{dispatch:!1}),this.logout$=di(()=>this.actions$.pipe(ki(Ia.AuthActionTypes.Logout),(0,ee.b)(()=>{this.userManager.signoutRedirect()})),{dispatch:!1}),this.completeAuthentication$=di(()=>this.actions$.pipe(ki(Ia.AuthActionTypes.CompleteAuthentication),(0,tt.w)(()=>new v.y(a=>{this.userManager.signinRedirectCallback().then(l=>{a.next(new Ia.SetUser(l)),a.complete()})})))),this.loadCookies$=di(()=>this.actions$.pipe(gl("Cookie"),zs([Et.QUERY_ALL_SUCCESS]),(0,ee.b)(a=>console.log(a.payload.data)),(0,ee.b)(a=>{})),{dispatch:!1})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(co),o.\u0275\u0275inject(ys.UserManager),o.\u0275\u0275inject(Ko))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();const wp={Cookie:{entityName:"Cookie"}},Mu=new o.InjectionToken("ClientSettings");let yd=(()=>{class e{constructor(t){t.registerMetadataMap(wp)}static forRoot(){return{ngModule:e,providers:[{provide:Fu,useFactory:Rm,deps:[Mu,o.PLATFORM_ID,o.Injector,I.ki]},{provide:ys.UserManager,useFactory:bp,deps:[Mu,Fu]},{provide:o.APP_INITIALIZER,useFactory:Du,multi:!0,deps:[ys.UserManager,ei,o.PLATFORM_ID]}]}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(pi))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[_i,po.forFeature([km])]]}),e})(),Ks=(()=>{class e{constructor(t){this.authFacade=t}intercept(t,r){return this.authFacade.idToken$.pipe((0,an.q)(1),(0,$o.b)(s=>{let a=t.headers;if(t.url.indexOf("/awproxy"),s&&-1===t.url.indexOf("github")&&-1===t.url.indexOf("cloudfront")&&-1===t.url.indexOf("cloudinary")&&-1===t.url.indexOf("carquery")&&-1===t.url.indexOf("gateway.marvel.com")&&-1===t.url.indexOf("hereapi.com")&&-1===t.url.indexOf(".es.")&&-1===t.url.indexOf(".s3.")&&-1===t.url.indexOf("/awproxy")){a=a.set("Authorization",s);const l=t.clone({headers:a});return r.handle(l)}{const l=t.clone({headers:a});return r.handle(l)}}))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(ei))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();var Gt=x(7301),pn=x(4128),Ra=x(6805),Om=x(930);function Nu(e,n){const t="object"==typeof n;return new Promise((r,s)=>{const a=new Om.Hp({next:l=>{r(l),a.unsubscribe()},error:s,complete:()=>{t?r(n.defaultValue):s(new Ra.K)}});e.subscribe(a)})}let Xs=(()=>{class e{constructor(t,r){this.actions$=t,this.entityActionFactory=r,this.setUser=di(()=>this.actions$.pipe(ki(Ia.AuthActionTypes.SetUser),(0,be.U)(()=>this.entityActionFactory.create("Cookie",Et.QUERY_ALL)))),this.loadCookies$=di(()=>this.actions$.pipe(gl("Cookie"),zs([Et.QUERY_ALL_SUCCESS]),(0,ee.b)(s=>console.log(s.payload.data)),(0,ee.b)(s=>{s.payload.data.forEach(a=>ti.set(a.name,a.value,{expires:new Date((new Date).getTime()+36e5)}))})),{dispatch:!1})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(co),o.\u0275\u0275inject(Ko))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Fm=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[po.forFeature([Xs])]]}),e})();class Dm{constructor(n){n&&(this.identityPoolId=n.identityPoolId,this.region=n.region,this.userPoolId=n.userPoolId)}}const xl=new o.InjectionToken("CognitoSettings");var re=x(655),_d=function(){function e(){this.onabort=null,this._aborted=!1,Object.defineProperty(this,"_aborted",{value:!1,writable:!0})}return Object.defineProperty(e.prototype,"aborted",{get:function(){return this._aborted},enumerable:!1,configurable:!0}),e.prototype.abort=function(){this._aborted=!0,this.onabort&&(this.onabort(this),this.onabort=null)},e}(),Mm=function(){function e(){this.signal=new _d}return e.prototype.abort=function(){this.signal.abort()},e}(),Er=function(){function e(n){this.method=n.method||"GET",this.hostname=n.hostname||"localhost",this.port=n.port,this.query=n.query||{},this.headers=n.headers||{},this.body=n.body,this.protocol=n.protocol?":"!==n.protocol.substr(-1)?n.protocol+":":n.protocol:"https:",this.path=n.path?"/"!==n.path.charAt(0)?"/"+n.path:n.path:"/"}return e.isInstance=function(n){return!!n&&("method"in n&&"protocol"in n&&"hostname"in n&&"path"in n&&"object"==typeof n.query&&"object"==typeof n.headers)},e.prototype.clone=function(){var n=new e((0,re.pi)((0,re.pi)({},this),{headers:(0,re.pi)({},this.headers)}));return n.query&&(n.query=function jm(e){return Object.keys(e).reduce(function(n,t){var r,s=e[t];return(0,re.pi)((0,re.pi)({},n),((r={})[t]=Array.isArray(s)?(0,re.ev)([],(0,re.CR)(s)):s,r))},{})}(n.query)),n},e}(),Sl=function(){function e(n){this.statusCode=n.statusCode,this.headers=n.headers||{},this.body=n.body}return e.isInstance=function(n){return!!n&&("number"==typeof n.statusCode&&"object"==typeof n.headers)},e}(),bs=function(e){return"string"==typeof e&&0===e.indexOf("arn:")&&e.split(":").length>=6},Bu=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,wd=/(\d+\.){3}\d+/,Ep=/\.\./,Lu=/\./,Cd=/^(.+\.)?s3(-fips)?(\.dualstack)?[.-]([a-z0-9-]+)\./,Oa=/^s3(-external-1)?\.amazonaws\.com$/,xd="amazonaws.com",Sd=function(e){var n=e.match(Cd);return[n[4],e.replace(new RegExp("^"+n[0]),"")]},Ie=function(e,n){if(""===e)throw new Error("ARN region is empty");if(n.useFipsEndpoint){if(!n.allowFipsRegion)throw new Error("FIPS region is not supported");if(!yt(e,n.clientRegion))throw new Error("Client FIPS region "+n.clientRegion+" doesn't match region "+e+" in ARN")}if(!n.useArnRegion&&!yt(e,n.clientRegion||"")&&!yt(e,n.clientSigningRegion||""))throw new Error("Region in ARN is incompatible, got "+e+" but expected "+n.clientRegion)},qe=function(e){if(["s3-external-1","aws-global"].includes(e))throw new Error("Client region "+e+" is not regional")},yt=function(e,n){return e===n},Bt=function(e,n){if(void 0===n&&(n={tlsCompatible:!0}),e.length>=64||!/^[a-z0-9][a-z0-9.-]*[a-z0-9]$/.test(e)||/(\d+\.){3}\d+/.test(e)||/[.-]{2}/.test(e)||(null==n?void 0:n.tlsCompatible)&&Lu.test(e))throw new Error("Invalid DNS label "+e)},In=function(e){if(e)throw new Error("Dualstack endpoint is not supported with Outpost or Multi-region Access Point ARN.")},dt=function(e){return function(e){if(e.isCustomEndpoint){if(e.dualstackEndpoint)throw new Error("Dualstack endpoint is not supported with custom endpoint");if(e.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported with custom endpoint")}}(e),function(e){return"string"==typeof e.bucketName}(e)?lt(e):wt(e)},lt=function(e){var n=e.accelerateEndpoint,t=void 0!==n&&n,s=e.baseHostname,a=e.bucketName,l=e.dualstackEndpoint,u=void 0!==l&&l,S=e.pathStyleEndpoint,G=void 0!==S&&S,W=e.tlsCompatible,J=void 0===W||W,ve=e.isCustomEndpoint,Re=(0,re.CR)(void 0!==ve&&ve?[e.clientRegion,s]:function(e){return Oa.test(e)?["us-east-1",xd]:Sd(e)}(s),2),De=Re[0],Je=Re[1];return G||!function(e){return Bu.test(e)&&!wd.test(e)&&!Ep.test(e)}(a)||J&&Lu.test(a)?{bucketEndpoint:!1,hostname:u?"s3.dualstack."+De+"."+Je:s}:(t?s="s3-accelerate"+(u?".dualstack":"")+"."+Je:u&&(s="s3.dualstack."+De+"."+Je),{bucketEndpoint:!0,hostname:a+"."+s})},wt=function(e){var t=e.baseHostname,r=e.clientRegion,s=e.isCustomEndpoint?t:function(e){return Oa.test(e)?[e.replace("."+xd,""),xd]:Sd(e)}(t)[1],l=e.accelerateEndpoint,S=e.tlsCompatible,G=void 0===S||S,W=e.bucketName,J=e.clientPartition,ve=void 0===J?"aws":J;!function(e){if(e.pathStyleEndpoint)throw new Error("Path-style S3 endpoint is not supported when bucket is an ARN");if(e.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported when bucket is an ARN");if(!e.tlsCompatible)throw new Error("HTTPS is required when bucket is an ARN")}({pathStyleEndpoint:e.pathStyleEndpoint,accelerateEndpoint:void 0!==l&&l,tlsCompatible:G});var Ne=W.service,Re=W.partition,De=W.accountId,Je=W.region,et=W.resource;(function(e){if("s3"!==e&&"s3-outposts"!==e&&"s3-object-lambda"!==e)throw new Error("Expect 's3' or 's3-outposts' or 's3-object-lambda' in ARN service component")})(Ne),function(e,n){if(e!==n.clientPartition)throw new Error('Partition in ARN is incompatible, got "'+e+'" but expected "'+n.clientPartition+'"')}(Re,{clientPartition:ve}),function(e){if(!/[0-9]{12}/.exec(e))throw new Error("Access point ARN accountID does not match regex '[0-9]{12}'")}(De);var gt=function(e){var n=e.includes(":")?":":"/",t=(0,re.CR)(e.split(n)),r=t[0],s=t.slice(1);if("accesspoint"===r){if(1!==s.length||""===s[0])throw new Error("Access Point ARN should have one resource accesspoint"+n+"{accesspointname}");return{accesspointName:s[0]}}if("outpost"===r){if(!s[0]||"accesspoint"!==s[1]||!s[2]||3!==s.length)throw new Error("Outpost ARN should have resource outpost"+n+"{outpostId}"+n+"accesspoint"+n+"{accesspointName}");var a=(0,re.CR)(s,3);return{outpostId:a[0],accesspointName:a[2]}}throw new Error("ARN resource should begin with 'accesspoint"+n+"' or 'outpost"+n+"'")}(et),St=gt.accesspointName,Ft=gt.outpostId;return"s3-object-lambda"===Ne?Rt((0,re.pi)((0,re.pi)({},e),{tlsCompatible:G,bucketName:W,accesspointName:St,hostnameSuffix:s})):""===Je?Nt((0,re.pi)((0,re.pi)({},e),{clientRegion:r,mrapAlias:St,hostnameSuffix:s})):Ft?$t((0,re.pi)((0,re.pi)({},e),{clientRegion:r,outpostId:Ft,accesspointName:St,hostnameSuffix:s})):tn((0,re.pi)((0,re.pi)({},e),{clientRegion:r,accesspointName:St,hostnameSuffix:s}))},Rt=function(e){var n=e.dualstackEndpoint,t=void 0!==n&&n,r=e.fipsEndpoint,s=void 0!==r&&r,a=e.tlsCompatible,l=void 0===a||a,u=e.useArnRegion,p=e.clientRegion,h=e.clientSigningRegion,S=void 0===h?p:h,G=e.accesspointName,W=e.bucketName,J=e.hostnameSuffix,ve=W.accountId,Ne=W.region,Re=W.service;qe(p),Ie(Ne,{useArnRegion:u,clientRegion:p,clientSigningRegion:S,allowFipsRegion:!0,useFipsEndpoint:s}),In(t);var De=G+"-"+ve;return Bt(De,{tlsCompatible:l}),{bucketEndpoint:!0,hostname:De+"."+Re+(s?"-fips":"")+"."+(u?Ne:p)+"."+J,signingRegion:u?Ne:S,signingService:Re}},Nt=function(e){var t=e.dualstackEndpoint,r=void 0!==t&&t,s=e.isCustomEndpoint,a=e.mrapAlias,l=e.hostnameSuffix;if(!0===e.disableMultiregionAccessPoints)throw new Error("SDK is attempting to use a MRAP ARN. Please enable to feature.");return function(e){try{e.split(".").forEach(function(n){Bt(n)})}catch{throw new Error('"'+e+'" is not a DNS compatible name.')}}(a),In(r),{bucketEndpoint:!0,hostname:a+(s?"":".accesspoint.s3-global")+"."+l,signingRegion:"*"}},$t=function(e){var n=e.useArnRegion,t=e.clientRegion,r=e.clientSigningRegion,s=void 0===r?t:r,a=e.bucketName,l=e.outpostId,u=e.dualstackEndpoint,p=void 0!==u&&u,h=e.fipsEndpoint,S=void 0!==h&&h,G=e.tlsCompatible,W=void 0===G||G,J=e.accesspointName,ve=e.isCustomEndpoint,Ne=e.hostnameSuffix;qe(t),Ie(a.region,{useArnRegion:n,clientRegion:t,clientSigningRegion:s,useFipsEndpoint:S});var Re=J+"-"+a.accountId;Bt(Re,{tlsCompatible:W});var De=n?a.region:t,Je=n?a.region:s;return function(e){if("s3-outposts"!==e)throw new Error("Expect 's3-posts' in Outpost ARN service component")}(a.service),Bt(l,{tlsCompatible:W}),In(p),function(e){if(e)throw new Error("FIPS region is not supported with Outpost.")}(S),{bucketEndpoint:!0,hostname:Re+"."+l+(ve?"":".s3-outposts."+De)+"."+Ne,signingRegion:Je,signingService:"s3-outposts"}},tn=function(e){var n=e.useArnRegion,t=e.clientRegion,r=e.clientSigningRegion,s=void 0===r?t:r,a=e.bucketName,l=e.dualstackEndpoint,u=void 0!==l&&l,p=e.fipsEndpoint,h=void 0!==p&&p,S=e.tlsCompatible,G=void 0===S||S,W=e.accesspointName,J=e.isCustomEndpoint,ve=e.hostnameSuffix;qe(t),Ie(a.region,{useArnRegion:n,clientRegion:t,clientSigningRegion:s,allowFipsRegion:!0,useFipsEndpoint:h});var Ne=W+"-"+a.accountId;Bt(Ne,{tlsCompatible:G});var Re=n?a.region:t,De=n?a.region:s;return function(e){if("s3"!==e)throw new Error("Expect 's3' in Accesspoint ARN service component")}(a.service),{bucketEndpoint:!0,hostname:Ne+(J?"":".s3-accesspoint"+(h?"-fips":"")+(u?".dualstack":"")+"."+Re)+"."+ve,signingRegion:De}},ir={tags:["BUCKET_ENDPOINT"],name:"bucketEndpointMiddleware",relation:"before",toMiddleware:"hostHeaderMiddleware",override:!0},dn=function(e){return{applyToStack:function(n){n.addRelativeTo(function(e){return function(n,t){return function(r){return(0,re.mG)(void 0,void 0,void 0,function(){var s,a,l,u,p,h,S,G,W,J,ve,Ne,Re,De,Je,et,gt,St,Ft,Kt,Zt,Vn;return(0,re.Jh)(this,function(Pr){switch(Pr.label){case 0:return s=r.input.Bucket,a=e.bucketEndpoint,Er.isInstance(l=r.request)?e.bucketEndpoint?(l.hostname=s,[3,12]):[3,1]:[3,13];case 1:return bs(s)?(u=function(e){var n=e.split(":");if(n.length<6||"arn"!==n[0])throw new Error("Malformed ARN");var t=(0,re.CR)(n);return{partition:t[1],service:t[2],region:t[3],accountId:t[4],resource:t.slice(5).join(":")}}(s),[4,e.region()]):[3,8];case 2:return et=Pr.sent(),[4,e.useDualstackEndpoint()];case 3:return p=Pr.sent(),[4,e.useFipsEndpoint()];case 4:return h=Pr.sent(),[4,e.regionInfoProvider(et,{useDualstackEndpoint:p,useFipsEndpoint:h})];case 5:return S=Pr.sent()||{},G=S.partition,J=void 0===(W=S.signingRegion)?et:W,[4,e.useArnRegion()];case 6:return ve=Pr.sent(),Je=dt,Vn={bucketName:u,baseHostname:l.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:p,fipsEndpoint:h,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:"https:"===l.protocol,useArnRegion:ve,clientPartition:G,clientSigningRegion:J,clientRegion:et,isCustomEndpoint:e.isCustomEndpoint},[4,e.disableMultiregionAccessPoints()];case 7:return Ne=Je.apply(void 0,[(Vn.disableMultiregionAccessPoints=Pr.sent(),Vn)]),Kt=Ne.hostname,Zt=Ne.bucketEndpoint,De=Ne.signingService,(Re=Ne.signingRegion)&&Re!==J&&(t.signing_region=Re),De&&"s3"!==De&&(t.signing_service=De),l.hostname=Kt,a=Zt,[3,12];case 8:return[4,e.region()];case 9:return et=Pr.sent(),[4,e.useDualstackEndpoint()];case 10:return gt=Pr.sent(),[4,e.useFipsEndpoint()];case 11:St=Pr.sent(),Ft=dt({bucketName:s,clientRegion:et,baseHostname:l.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:gt,fipsEndpoint:St,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:"https:"===l.protocol,isCustomEndpoint:e.isCustomEndpoint}),Zt=Ft.bucketEndpoint,l.hostname=Kt=Ft.hostname,a=Zt,Pr.label=12;case 12:a&&(l.path=l.path.replace(/^(\/)?[^\/]+/,""),""===l.path&&(l.path="/")),Pr.label=13;case 13:return[2,n((0,re.pi)((0,re.pi)({},r),{request:l}))]}})})}}}(e),ir)}}},Ap=function(e){return"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)},Iv=function(e){return void 0!==e&&"string"!=typeof e&&!ArrayBuffer.isView(e)&&!Ap(e)},Tv=function(e,n){var t=n.streamHasher,r=n.checksumAlgorithmFn,s=n.base64Encoder;return(0,re.mG)(void 0,void 0,void 0,function(){var a,l;return(0,re.Jh)(this,function(u){switch(u.label){case 0:return a=Iv(e)?t(r,e):function(e,n){var t=new e;return t.update(n||""),t.digest()}(r,e),l=s,[4,a];case 1:return[2,l.apply(void 0,[u.sent()])]}})})},ni=(()=>{return(e=ni||(ni={})).MD5="MD5",e.CRC32="CRC32",e.CRC32C="CRC32C",e.SHA1="SHA1",e.SHA256="SHA256",ni;var e})(),zm=[ni.CRC32,ni.CRC32C,ni.SHA1,ni.SHA256],Fw=[ni.CRC32,ni.CRC32C,ni.SHA1,ni.SHA256],Rv=function(e){return e===ni.MD5?"content-md5":"x-amz-checksum-"+e.toLowerCase()},Nw=x(9262),jw=x(1180),kv=function(e,n){var t;return(t={},t[ni.MD5]=n.md5,t[ni.CRC32]=Nw.AwsCrc32,t[ni.CRC32C]=jw.AwsCrc32c,t[ni.SHA1]=n.sha1,t[ni.SHA256]=n.sha256,t)[e]},zw=function(e,n){return function(t){return function(r){return(0,re.mG)(void 0,void 0,void 0,function(){var s,a,l,u,p,h,W,J,ve,Ne,Re,et,gt,St,Ft,Kt;return(0,re.Jh)(this,function(Zt){switch(Zt.label){case 0:return Er.isInstance(r.request)?(a=(s=r.request).body,l=s.headers,u=e.base64Encoder,p=e.streamHasher,W=function(e,n){var r=n.requestAlgorithmMember;if(!r||!e[r])return n.requestChecksumRequired?ni.MD5:void 0;var s=e[r];if(!zm.includes(s))throw new Error('The checksum algorithm "'+s+'" is not supported by the client. Select one of '+zm+".");return s}(h=n.input,{requestChecksumRequired:n.requestChecksumRequired,requestAlgorithmMember:n.requestAlgorithmMember}),J=a,ve=l,W?(Ne=Rv(W),Re=kv(W,e),Iv(a)?(J=(0,e.getAwsChunkedEncodingStream)(a,{base64Encoder:u,bodyLengthChecker:e.bodyLengthChecker,checksumLocationName:Ne,checksumAlgorithmFn:Re,streamHasher:p}),delete(ve=(0,re.pi)((0,re.pi)({},l),{"content-encoding":"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":l["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":Ne}))["content-length"],[3,3]):[3,1]):[3,3]):[2,t(r)];case 1:return function(e,n){var t,r,s=e.toLowerCase();try{for(var a=(0,re.XA)(Object.keys(n)),l=a.next();!l.done;l=a.next())if(s===l.value.toLowerCase())return!0}catch(p){t={error:p}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return!1}(Ne,l)?[3,3]:[4,Tv(a,{streamHasher:p,checksumAlgorithmFn:Re,base64Encoder:u})];case 2:et=Zt.sent(),ve=(0,re.pi)((0,re.pi)({},l),((Kt={})[Ne]=et,Kt)),Zt.label=3;case 3:return[4,t((0,re.pi)((0,re.pi)({},r),{request:(0,re.pi)((0,re.pi)({},s),{headers:ve,body:J})}))];case 4:return gt=Zt.sent(),Ft=n.responseAlgorithms,(St=n.requestValidationModeMember)&&"ENABLED"===h[St]&&function(e,n){var t=n.config,r=n.responseAlgorithms;(0,re.mG)(void 0,void 0,void 0,function(){var s,a,l,u,p,h,S,G,W,Ne,Re,De,Je;return(0,re.Jh)(this,function(et){switch(et.label){case 0:s=function(e){var n,t;void 0===e&&(e=[]);var r=[];try{for(var s=(0,re.XA)(Fw),a=s.next();!a.done;a=s.next()){var l=a.value;!e.includes(l)||!zm.includes(l)||r.push(l)}}catch(u){n={error:u}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(n)throw n.error}}return r}(r),a=e.body,l=e.headers,et.label=1;case 1:et.trys.push([1,6,7,8]),u=(0,re.XA)(s),p=u.next(),et.label=2;case 2:return p.done?[3,5]:(S=Rv(h=p.value),(G=l[S])?(W=kv(h,t),[4,Tv(a,{streamHasher:t.streamHasher,checksumAlgorithmFn:W,base64Encoder:t.base64Encoder})]):[3,4]);case 3:if((Ne=et.sent())===G)return[3,5];throw new Error('Checksum mismatch: expected "'+Ne+'" but received "'+G+'" in response header "'+S+'".');case 4:return p=u.next(),[3,2];case 5:return[3,8];case 6:return Re=et.sent(),De={error:Re},[3,8];case 7:try{p&&!p.done&&(Je=u.return)&&Je.call(u)}finally{if(De)throw De.error}return[7];case 8:return[2]}})})}(gt.response,{config:e,responseAlgorithms:Ft}),[2,gt]}})})}}},Uw={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},Um=function(e,n){return{applyToStack:function(t){t.add(zw(e,n),Uw)}}},$w={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Hw={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function El(e,n,t){return{applyToStack:function(r){r.add(function(e,n){return function(t,r){return function(s){return(0,re.mG)(void 0,void 0,void 0,function(){var a,l,u;return(0,re.Jh)(this,function(p){switch(p.label){case 0:return[4,t(s)];case 1:a=p.sent().response,p.label=2;case 2:return p.trys.push([2,4,,5]),[4,n(a,e)];case 3:return l=p.sent(),[2,{response:a,output:l}];case 4:throw u=p.sent(),Object.assign(u,{$response:a});case 5:return[2]}})})}}}(e,t),$w),r.add(function(e,n){return function(t,r){return function(s){return(0,re.mG)(void 0,void 0,void 0,function(){var a;return(0,re.Jh)(this,function(l){switch(l.label){case 0:return[4,n(s.input,e)];case 1:return a=l.sent(),[2,t((0,re.pi)((0,re.pi)({},s),{request:a}))]}})})}}}(e,n),Hw)}}}var Kw={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},Pp=function(e){return{applyToStack:function(n){n.add(function qw(e){var n=this;return function(t){return function(r){return(0,re.mG)(n,void 0,void 0,function(){var s,a,l,u,p,h,S,G,W,J,ve,Ne,Re,De,Je,et,gt;return(0,re.Jh)(this,function(St){switch(St.label){case 0:s=(0,re.pi)({},r.input),a=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}],St.label=1;case 1:St.trys.push([1,6,7,8]),l=(0,re.XA)(a),u=l.next(),St.label=2;case 2:return u.done?[3,5]:(h=s[(p=u.value).target])?(S=ArrayBuffer.isView(h)?new Uint8Array(h.buffer,h.byteOffset,h.byteLength):"string"==typeof h?e.utf8Decoder(h):new Uint8Array(h),G=e.base64Encoder(S),(W=new e.md5).update(S),J=[(0,re.pi)({},s)],(gt={})[p.target]=G,ve=p.hash,Re=(Ne=e).base64Encoder,[4,W.digest()]):[3,4];case 3:s=re.pi.apply(void 0,J.concat([(gt[ve]=Re.apply(Ne,[St.sent()]),gt)])),St.label=4;case 4:return u=l.next(),[3,2];case 5:return[3,8];case 6:return De=St.sent(),Je={error:De},[3,8];case 7:try{u&&!u.done&&(et=l.return)&&et.call(l)}finally{if(Je)throw Je.error}return[7];case 8:return[2,t((0,re.pi)((0,re.pi)({},r),{input:s}))]}})})}}}(e),Kw)}}},Ip=function(){var e=[],n=[],t=new Set,l=function(S){return e.forEach(function(G){S.add(G.middleware,(0,re.pi)({},G))}),n.forEach(function(G){S.addRelativeTo(G.middleware,(0,re.pi)({},G))}),S},u=function(S){var G=[];return S.before.forEach(function(W){0===W.before.length&&0===W.after.length?G.push(W):G.push.apply(G,(0,re.ev)([],(0,re.CR)(u(W))))}),G.push(S),S.after.reverse().forEach(function(W){0===W.before.length&&0===W.after.length?G.push(W):G.push.apply(G,(0,re.ev)([],(0,re.CR)(u(W))))}),G},h={add:function(S,G){void 0===G&&(G={});var W=G.name,J=G.override,ve=(0,re.pi)({step:"initialize",priority:"normal",middleware:S},G);if(W){if(t.has(W)){if(!J)throw new Error("Duplicate middleware name '"+W+"'");var Ne=e.findIndex(function(De){return De.name===W}),Re=e[Ne];if(Re.step!==ve.step||Re.priority!==ve.priority)throw new Error('"'+W+'" middleware with '+Re.priority+" priority in "+Re.step+" step cannot be overridden by same-name middleware with "+ve.priority+" priority in "+ve.step+" step.");e.splice(Ne,1)}t.add(W)}e.push(ve)},addRelativeTo:function(S,G){var W=G.name,J=G.override,ve=(0,re.pi)({middleware:S},G);if(W){if(t.has(W)){if(!J)throw new Error("Duplicate middleware name '"+W+"'");var Ne=n.findIndex(function(De){return De.name===W}),Re=n[Ne];if(Re.toMiddleware!==ve.toMiddleware||Re.relation!==ve.relation)throw new Error('"'+W+'" middleware '+Re.relation+' "'+Re.toMiddleware+'" middleware cannot be overridden by same-name middleware '+ve.relation+' "'+ve.toMiddleware+'" middleware.');n.splice(Ne,1)}t.add(W)}n.push(ve)},clone:function(){return l(Ip())},use:function(S){S.applyToStack(h)},remove:function(S){return"string"==typeof S?function(S){var G=!1,W=function(J){return!J.name||J.name!==S||(G=!0,t.delete(S),!1)};return e=e.filter(W),n=n.filter(W),G}(S):function(S){var G=!1,W=function(J){return J.middleware!==S||(G=!0,J.name&&t.delete(J.name),!1)};return e=e.filter(W),n=n.filter(W),G}(S)},removeByTag:function(S){var G=!1,W=function(J){var ve=J.tags,Ne=J.name;return!ve||!ve.includes(S)||(Ne&&t.delete(Ne),G=!0,!1)};return e=e.filter(W),n=n.filter(W),G},concat:function(S){var G=l(Ip());return G.use(S),G},applyToStack:l,resolve:function(S,G){var W,J;try{for(var ve=(0,re.XA)(function(){var S=[],G=[],W={};e.forEach(function(ve){var Ne=(0,re.pi)((0,re.pi)({},ve),{before:[],after:[]});Ne.name&&(W[Ne.name]=Ne),S.push(Ne)}),n.forEach(function(ve){var Ne=(0,re.pi)((0,re.pi)({},ve),{before:[],after:[]});Ne.name&&(W[Ne.name]=Ne),G.push(Ne)}),G.forEach(function(ve){if(ve.toMiddleware){var Ne=W[ve.toMiddleware];if(void 0===Ne)throw new Error(ve.toMiddleware+" is not found when adding "+(ve.name||"anonymous")+" middleware "+ve.relation+" "+ve.toMiddleware);"after"===ve.relation&&Ne.after.push(ve),"before"===ve.relation&&Ne.before.push(ve)}});var J=function(S){return S.sort(function(G,W){return Ov[W.step]-Ov[G.step]||Fv[W.priority||"normal"]-Fv[G.priority||"normal"]})}(S).map(u).reduce(function(ve,Ne){return ve.push.apply(ve,(0,re.ev)([],(0,re.CR)(Ne))),ve},[]);return J.map(function(ve){return ve.middleware})}().reverse()),Ne=ve.next();!Ne.done;Ne=ve.next())S=(0,Ne.value)(S,G)}catch(De){W={error:De}}finally{try{Ne&&!Ne.done&&(J=ve.return)&&J.call(ve)}finally{if(W)throw W.error}}return S}};return h},Ov={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Fv={high:3,normal:2,low:1},Dv=function(){function e(n){this.middlewareStack=Ip(),this.config=n}return e.prototype.send=function(n,t,r){var a="function"==typeof t?t:r,l=n.resolveMiddleware(this.middlewareStack,this.config,"function"!=typeof t?t:void 0);if(!a)return l(n).then(function(u){return u.output});l(n).then(function(u){return a(null,u.output)},function(u){return a(u)}).catch(function(){})},e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},e}(),Al=function e(){this.middlewareStack=Ip()},Qi="***SensitiveInformation***",Tp=function(e){switch(e){case"true":return!0;case"false":return!1;default:throw new Error('Unable to parse boolean value "'+e+'"')}},Ed=function(e){if(null!=e){if("number"==typeof e)return e;throw new TypeError("Expected number, got "+typeof e)}},Xw=Math.ceil(Math.pow(2,127)*(2-Math.pow(2,-23))),$m=function(e,n){var t=function(e){if(null!=e){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError("Expected integer, got "+typeof e)}}(e);if(void 0!==t&&Ww(t,n)!==t)throw new TypeError("Expected "+n+"-bit integer, got "+e);return t},Ww=function(e,n){switch(n){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},Rp=function(e,n){if(null==e)throw n?new TypeError("Expected a non-null value for "+n):new TypeError("Expected a non-null value");return e},Hm=function(e){if(null!=e){if("object"==typeof e&&!Array.isArray(e))return e;throw new TypeError("Expected object, got "+typeof e)}},or=function(e){if(null!=e){if("string"==typeof e)return e;throw new TypeError("Expected string, got "+typeof e)}},Yw=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Uu=function(e){var n=e.match(Yw);if(null===n||n[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},qm=function(e){return function(e){return $m(e,16)}("string"==typeof e?Uu(e):e)},eC=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Km=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Lv(e){var n=e.getUTCFullYear(),t=e.getUTCMonth(),r=e.getUTCDay(),s=e.getUTCDate(),a=e.getUTCHours(),l=e.getUTCMinutes(),u=e.getUTCSeconds();return eC[r]+", "+(s<10?"0"+s:""+s)+" "+Km[t]+" "+n+" "+(a<10?"0"+a:""+a)+":"+(l<10?"0"+l:""+l)+":"+(u<10?"0"+u:""+u)+" GMT"}var nC=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),rC=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),iC=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),sC=function(e){if(null!=e){var n;if("number"==typeof e)n=e;else{if("string"!=typeof e)throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");n=function(e){return Ed("string"==typeof e?Uu(e):e)}(e)}if(Number.isNaN(n)||n===1/0||n===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(1e3*n))}},kp=function(e,n,t,r){var s=n-1;return dC(e,s,t),new Date(Date.UTC(e,s,t,Fa(r.hours,"hour",0,23),Fa(r.minutes,"minute",0,59),Fa(r.seconds,"seconds",0,60),pC(r.fractionalMilliseconds)))},Xm=function(e){var n=Km.indexOf(e);if(n<0)throw new TypeError("Invalid month: "+e);return n+1},cC=[31,28,31,30,31,30,31,31,30,31,30,31],dC=function(e,n,t){var r=cC[n];if(1===n&&fC(e)&&(r=29),t>r)throw new TypeError("Invalid day for "+Km[n]+" in "+e+": "+t)},fC=function(e){return e%4==0&&(e%100!=0||e%400==0)},Fa=function(e,n,t,r){var s=function(e){return function(e){return $m(e,8)}("string"==typeof e?Uu(e):e)}(Ad(e));if(s<t||s>r)throw new TypeError(n+" must be between "+t+" and "+r+", inclusive");return s},pC=function(e){return null==e?0:1e3*function(e){return function(e){var n=Ed(e);if(void 0!==n&&!Number.isNaN(n)&&n!==1/0&&n!==-1/0&&Math.abs(n)>Xw)throw new TypeError("Expected 32-bit float, got "+e);return n}("string"==typeof e?Uu(e):e)}("0."+e)},Ad=function(e){for(var n=0;n<e.length-1&&"0"===e.charAt(n);)n++;return 0===n?e:e.slice(n)},zv=function(e){switch(e){case"standard":case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},Uv=function(e){function n(t){var r=e.call(this,t.message)||this;return Object.setPrototypeOf(r,n.prototype),r.name=t.name,r.$fault=t.$fault,r.$metadata=t.$metadata,r}return(0,re.ZT)(n,e),n}(Error),bi=function(e,n){return void 0===n&&(n={}),Object.entries(n).filter(function(r){return void 0!==(0,re.CR)(r,2)[1]}).forEach(function(r){var s=(0,re.CR)(r,2),a=s[0];(null==e[a]||""===e[a])&&(e[a]=s[1])}),e.message=e.message||e.Message||"UnknownError",delete e.Message,e};function Cs(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(n){return"%"+n.charCodeAt(0).toString(16).toUpperCase()})}var Gv=function(e){var n="#text";for(var t in e)e.hasOwnProperty(t)&&void 0!==e[t][n]?e[t]=e[t][n]:"object"==typeof e[t]&&null!==e[t]&&(e[t]=Gv(e[t]));return e},Op=function(){var e=Object.getPrototypeOf(this).constructor,n=Function.bind.apply(String,(0,re.ev)([null],(0,re.CR)(arguments))),t=new n;return Object.setPrototypeOf(t,e.prototype),t};Op.prototype=Object.create(String.prototype,{constructor:{value:Op,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(Op,String),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}(0,re.ZT)(n,e),n.prototype.deserializeJSON=function(){return JSON.parse(e.prototype.toString.call(this))},n.prototype.toJSON=function(){return e.prototype.toString.call(this)},n.fromObject=function(t){return t instanceof n?t:new n(t instanceof String||"string"==typeof t?t:JSON.stringify(t))}}(Op);var Yi=function(e){function n(t){var r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return(0,re.ZT)(n,e),n}(Uv),Fp=(function(e){(0,re.ZT)(function n(t){var r=e.call(this,(0,re.pi)({name:"NoSuchUpload",$fault:"client"},t))||this;return r.name="NoSuchUpload",r.$fault="client",Object.setPrototypeOf(r,n.prototype),r},e)}(Yi),(()=>((Fp||(Fp={})).filterSensitiveLog=function(n){return(0,re.pi)((0,re.pi)({},n),n.SSEKMSKeyId&&{SSEKMSKeyId:Qi})},Fp))()),Dp=(()=>((Dp||(Dp={})).filterSensitiveLog=function(n){return(0,re.pi)((0,re.pi)({},n),n.SSECustomerKey&&{SSECustomerKey:Qi})},Dp))(),Mp=(function(e){(0,re.ZT)(function n(t){var r=e.call(this,(0,re.pi)({name:"ObjectNotInActiveTierError",$fault:"client"},t))||this;return r.name="ObjectNotInActiveTierError",r.$fault="client",Object.setPrototypeOf(r,n.prototype),r},e)}(Yi),function(e){(0,re.ZT)(function n(t){var r=e.call(this,(0,re.pi)({name:"BucketAlreadyExists",$fault:"client"},t))||this;return r.name="BucketAlreadyExists",r.$fault="client",Object.setPrototypeOf(r,n.prototype),r},e)}(Yi),function(e){(0,re.ZT)(function n(t){var r=e.call(this,(0,re.pi)({name:"BucketAlreadyOwnedByYou",$fault:"client"},t))||this;return r.name="BucketAlreadyOwnedByYou",r.$fault="client",Object.setPrototypeOf(r,n.prototype),r},e)}(Yi),(()=>((Mp||(Mp={})).filterSensitiveLog=function(n){return(0,re.pi)((0,re.pi)((0,re.pi)({},n),n.SSEKMSKeyId&&{SSEKMSKeyId:Qi}),n.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Qi})},Mp))()),Np=(()=>((Np||(Np={})).filterSensitiveLog=function(n){return(0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)({},n),n.SSECustomerKey&&{SSECustomerKey:Qi}),n.SSEKMSKeyId&&{SSEKMSKeyId:Qi}),n.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Qi})},Np))(),jp=(function(e){(0,re.ZT)(function n(t){var r=e.call(this,(0,re.pi)({name:"InvalidObjectState",$fault:"client"},t))||this;return r.name="InvalidObjectState",r.$fault="client",Object.setPrototypeOf(r,n.prototype),r.StorageClass=t.StorageClass,r.AccessTier=t.AccessTier,r},e)}(Yi),function(e){(0,re.ZT)(function n(t){var r=e.call(this,(0,re.pi)({name:"NoSuchKey",$fault:"client"},t))||this;return r.name="NoSuchKey",r.$fault="client",Object.setPrototypeOf(r,n.prototype),r},e)}(Yi),function(e){(0,re.ZT)(function n(t){var r=e.call(this,(0,re.pi)({name:"NotFound",$fault:"client"},t))||this;return r.name="NotFound",r.$fault="client",Object.setPrototypeOf(r,n.prototype),r},e)}(Yi),function(e){(0,re.ZT)(function n(t){var r=e.call(this,(0,re.pi)({name:"NoSuchBucket",$fault:"client"},t))||this;return r.name="NoSuchBucket",r.$fault="client",Object.setPrototypeOf(r,n.prototype),r},e)}(Yi),(()=>((jp||(jp={})).filterSensitiveLog=function(n){return(0,re.pi)((0,re.pi)((0,re.pi)({},n),n.SSEKMSKeyId&&{SSEKMSKeyId:Qi}),n.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Qi})},jp))()),Bp=(()=>((Bp||(Bp={})).filterSensitiveLog=function(n){return(0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)({},n),n.SSECustomerKey&&{SSECustomerKey:Qi}),n.SSEKMSKeyId&&{SSEKMSKeyId:Qi}),n.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Qi})},Bp))();function hC(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}for(var vo=function(){function e(n,t){void 0===t&&(t=[]),this.name=n,this.children=t,this.attributes={}}return e.prototype.withName=function(n){return this.name=n,this},e.prototype.addAttribute=function(n,t){return this.attributes[n]=t,this},e.prototype.addChildNode=function(n){return this.children.push(n),this},e.prototype.removeAttribute=function(n){return delete this.attributes[n],this},e.prototype.toString=function(){var n,t,r=Boolean(this.children.length),s="<"+this.name,a=this.attributes;try{for(var l=(0,re.XA)(Object.keys(a)),u=l.next();!u.done;u=l.next()){var p=u.value,h=a[p];null!=h&&(s+=" "+p+'="'+hC(""+h)+'"')}}catch(S){n={error:S}}finally{try{u&&!u.done&&(t=l.return)&&t.call(l)}finally{if(n)throw n.error}}return s+(r?">"+this.children.map(function(S){return S.toString()}).join("")+"</"+this.name+">":"/>")},e}(),Da=function(){function e(n){this.value=n}return e.prototype.toString=function(){return function mC(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}(""+this.value)},e}(),gC=x(8074),vC=x(7292),EC=function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t,r,s,a,l,u;return(0,re.Jh)(this,function(p){switch(p.label){case 0:return r=[(0,re.pi)({},e)],u={},[4,bt(e.body,n)];case 1:throw t=re.pi.apply(void 0,r.concat([(u.body=p.sent(),u)])),a=kt(e,t.body),s=new Yi({name:(l=t.body).code||l.Code||a,$fault:"client",$metadata:ot(e)}),bi(s,l)}})})},IC=function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t,r,s,a;return(0,re.Jh)(this,function(l){switch(l.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,TC(e,n)]:(t={$metadata:ot(e),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,BucketKeyEnabled:void 0,ChecksumAlgorithm:void 0,Key:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,UploadId:void 0},void 0!==e.headers["x-amz-abort-date"]&&(t.AbortDate=Rp(function(e){if(null!=e){if("string"!=typeof e)throw new TypeError("RFC-7231 date-times must be expressed as strings");var n=nC.exec(e);if(n){var t=(0,re.CR)(n,8),s=t[1],a=t[2],u=t[4],p=t[5],h=t[6],S=t[7];return kp(qm(Ad(t[3])),Xm(a),Fa(s,"day",1,31),{hours:u,minutes:p,seconds:h,fractionalMilliseconds:S})}if(n=rC.exec(e)){var G=(0,re.CR)(n,8);return s=G[1],a=G[2],u=G[4],p=G[5],h=G[6],S=G[7],function(e){return e.getTime()-(new Date).getTime()>15768e8?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e}(kp(function(e){var n=(new Date).getUTCFullYear(),t=100*Math.floor(n/100)+qm(Ad(e));return t<n?t+100:t}(G[3]),Xm(a),Fa(s,"day",1,31),{hours:u,minutes:p,seconds:h,fractionalMilliseconds:S}))}if(n=iC.exec(e)){var J=(0,re.CR)(n,8);return a=J[1],s=J[2],u=J[3],p=J[4],h=J[5],S=J[6],kp(qm(Ad(J[7])),Xm(a),Fa(s.trimLeft(),"day",1,31),{hours:u,minutes:p,seconds:h,fractionalMilliseconds:S})}throw new TypeError("Invalid RFC-7231 date-time value")}}(e.headers["x-amz-abort-date"]))),void 0!==e.headers["x-amz-abort-rule-id"]&&(t.AbortRuleId=e.headers["x-amz-abort-rule-id"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled=Tp(e.headers["x-amz-server-side-encryption-bucket-key-enabled"])),void 0!==e.headers["x-amz-request-charged"]&&(t.RequestCharged=e.headers["x-amz-request-charged"]),void 0!==e.headers["x-amz-checksum-algorithm"]&&(t.ChecksumAlgorithm=e.headers["x-amz-checksum-algorithm"]),s=Rp,a=Hm,[4,bt(e.body,n)]);case 1:return void 0!==(r=s.apply(void 0,[a.apply(void 0,[l.sent()]),"body"])).Bucket&&(t.Bucket=or(r.Bucket)),void 0!==r.Key&&(t.Key=or(r.Key)),void 0!==r.UploadId&&(t.UploadId=or(r.UploadId)),[2,Promise.resolve(t)]}})})},TC=function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t,r,s,a,l,u;return(0,re.Jh)(this,function(p){switch(p.label){case 0:return r=[(0,re.pi)({},e)],u={},[4,bt(e.body,n)];case 1:throw t=re.pi.apply(void 0,r.concat([(u.body=p.sent(),u)])),a=kt(e,t.body),s=new Yi({name:(l=t.body).code||l.Code||a,$fault:"client",$metadata:ot(e)}),bi(s,l)}})})},Zx=function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t,r,s,a,l,u;return(0,re.Jh)(this,function(p){switch(p.label){case 0:return r=[(0,re.pi)({},e)],u={},[4,bt(e.body,n)];case 1:throw t=re.pi.apply(void 0,r.concat([(u.body=p.sent(),u)])),a=kt(e,t.body),s=new Yi({name:(l=t.body).code||l.Code||a,$fault:"client",$metadata:ot(e)}),bi(s,l)}})})},oS=function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t,r,s,a,l,u;return(0,re.Jh)(this,function(p){switch(p.label){case 0:return r=[(0,re.pi)({},e)],u={},[4,bt(e.body,n)];case 1:throw t=re.pi.apply(void 0,r.concat([(u.body=p.sent(),u)])),a=kt(e,t.body),s=new Yi({name:(l=t.body).code||l.Code||a,$fault:"client",$metadata:ot(e)}),bi(s,l)}})})},cS=function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t,r,s,a,l,u;return(0,re.Jh)(this,function(p){switch(p.label){case 0:return r=[(0,re.pi)({},e)],u={},[4,bt(e.body,n)];case 1:throw t=re.pi.apply(void 0,r.concat([(u.body=p.sent(),u)])),a=kt(e,t.body),s=new Yi({name:(l=t.body).code||l.Code||a,$fault:"client",$metadata:ot(e)}),bi(s,l)}})})},Wv=function(e,n){var t=new vo("CompletedMultipartUpload");return null!=e.Parts&&MS(e.Parts,n).map(function(s){s=s.withName("Part"),t.addChildNode(s)}),t},MS=function(e,n){return e.filter(function(t){return null!=t}).map(function(t){if(null===t)return null;var r=function(e,n){var t=new vo("CompletedPart");if(null!=e.ETag){var r=new vo("ETag").addChildNode(new Da(e.ETag)).withName("ETag");t.addChildNode(r)}return null!=e.ChecksumCRC32&&(r=new vo("ChecksumCRC32").addChildNode(new Da(e.ChecksumCRC32)).withName("ChecksumCRC32"),t.addChildNode(r)),null!=e.ChecksumCRC32C&&(r=new vo("ChecksumCRC32C").addChildNode(new Da(e.ChecksumCRC32C)).withName("ChecksumCRC32C"),t.addChildNode(r)),null!=e.ChecksumSHA1&&(r=new vo("ChecksumSHA1").addChildNode(new Da(e.ChecksumSHA1)).withName("ChecksumSHA1"),t.addChildNode(r)),null!=e.ChecksumSHA256&&(r=new vo("ChecksumSHA256").addChildNode(new Da(e.ChecksumSHA256)).withName("ChecksumSHA256"),t.addChildNode(r)),null!=e.PartNumber&&(r=new vo("PartNumber").addChildNode(new Da(String(e.PartNumber))).withName("PartNumber"),t.addChildNode(r)),t}(t);return r.withName("member")})},Pd=function(e,n){var t=new vo("Tagging");if(null!=e.TagSet){var r=Vu(e.TagSet,n),s=new vo("TagSet");r.map(function(a){s.addChildNode(a)}),t.addChildNode(s)}return t},Vu=function(e,n){return e.filter(function(t){return null!=t}).map(function(t){return null===t?null:function(e,n){var t=new vo("Tag");if(null!=e.Key){var r=new vo("ObjectKey").addChildNode(new Da(e.Key)).withName("Key");t.addChildNode(r)}return null!=e.Value&&(r=new vo("Value").addChildNode(new Da(e.Value)).withName("Value"),t.addChildNode(r)),t}(t).withName("Tag")})},ot=function(e){var n;return{httpStatusCode:e.statusCode,requestId:null!==(n=e.headers["x-amzn-requestid"])&&void 0!==n?n:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},rn=function(e,n){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):n.streamCollector(e)||Promise.resolve(new Uint8Array)},Ee=function(e){return!(null==e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)},bt=function(e,n){return function(e,n){return rn(e,n).then(function(t){return n.utf8Encoder(t)})}(e,n).then(function(t){if(t.length){var r=(0,vC.parse)(t,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,trimValues:!1,tagValueProcessor:function(u){return""===u.trim()&&u.includes("\n")?"":(0,gC.p1)(u)}}),s="#text",a=Object.keys(r)[0],l=r[a];return l[s]&&(l[a]=l[s],delete l[s]),Gv(l)}return{}})},kt=function(e,n){return void 0!==n.Code?n.Code:404==e.statusCode?"NotFound":""},IP=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return(0,re.ZT)(n,e),n.prototype.resolveMiddleware=function(t,r,s){this.middlewareStack.use(El(r,this.serialize,this.deserialize)),this.middlewareStack.use(Pp(r)),this.middlewareStack.use(dn(r)),this.middlewareStack.use(Um(r,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!1}));var a=t.concat(this.middlewareStack),S=r.requestHandler;return a.resolve(function(G){return S.handle(G.request,s||{})},{logger:r.logger,clientName:"S3Client",commandName:"PutObjectCommand",inputFilterSensitiveLog:Bp.filterSensitiveLog,outputFilterSensitiveLog:jp.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t,r,s,a,l,u,p,h,S,W;return(0,re.Jh)(this,function(ve){switch(ve.label){case 0:return[4,n.endpoint()];case 1:if(t=ve.sent(),r=t.hostname,a=void 0===(s=t.protocol)?"https":s,l=t.port,u=t.path,p=(0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)({"content-type":"application/octet-stream"},Ee(e.ACL)&&{"x-amz-acl":e.ACL}),Ee(e.CacheControl)&&{"cache-control":e.CacheControl}),Ee(e.ContentDisposition)&&{"content-disposition":e.ContentDisposition}),Ee(e.ContentEncoding)&&{"content-encoding":e.ContentEncoding}),Ee(e.ContentLanguage)&&{"content-language":e.ContentLanguage}),Ee(e.ContentLength)&&{"content-length":e.ContentLength.toString()}),Ee(e.ContentMD5)&&{"content-md5":e.ContentMD5}),Ee(e.ContentType)&&{"content-type":e.ContentType}),Ee(e.ChecksumAlgorithm)&&{"x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm}),Ee(e.ChecksumCRC32)&&{"x-amz-checksum-crc32":e.ChecksumCRC32}),Ee(e.ChecksumCRC32C)&&{"x-amz-checksum-crc32c":e.ChecksumCRC32C}),Ee(e.ChecksumSHA1)&&{"x-amz-checksum-sha1":e.ChecksumSHA1}),Ee(e.ChecksumSHA256)&&{"x-amz-checksum-sha256":e.ChecksumSHA256}),Ee(e.Expires)&&{expires:Lv(e.Expires).toString()}),Ee(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),Ee(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),Ee(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),Ee(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),Ee(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),Ee(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),Ee(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),Ee(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),Ee(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),Ee(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),Ee(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),Ee(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),Ee(e.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),Ee(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Ee(e.Tagging)&&{"x-amz-tagging":e.Tagging}),Ee(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),Ee(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),Ee(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),Ee(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),void 0!==e.Metadata&&Object.keys(e.Metadata).reduce(function(Ne,Re){var De;return(0,re.pi)((0,re.pi)({},Ne),((De={})["x-amz-meta-"+Re.toLowerCase()]=e.Metadata[Re],De))},{})),h=((null==u?void 0:u.endsWith("/"))?u.slice(0,-1):u||"")+"/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((S=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(h=h.replace("{Bucket}",Cs(S)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((S=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return h=h.replace("{Key+}",S.split("/").map(function(Ne){return Cs(Ne)}).join("/")),void 0!==e.Body&&(W=e.Body),void 0!==e.Body&&(W=e.Body),[2,new Er({protocol:a,hostname:r,port:l,method:"PUT",headers:p,path:h,query:{"x-id":"PutObject"},body:W})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t;return(0,re.Jh)(this,function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Zx(e,n)]:(t={$metadata:ot(e),BucketKeyEnabled:void 0,ChecksumCRC32:void 0,ChecksumCRC32C:void 0,ChecksumSHA1:void 0,ChecksumSHA256:void 0,ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==e.headers["x-amz-expiration"]&&(t.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers.etag&&(t.ETag=e.headers.etag),void 0!==e.headers["x-amz-checksum-crc32"]&&(t.ChecksumCRC32=e.headers["x-amz-checksum-crc32"]),void 0!==e.headers["x-amz-checksum-crc32c"]&&(t.ChecksumCRC32C=e.headers["x-amz-checksum-crc32c"]),void 0!==e.headers["x-amz-checksum-sha1"]&&(t.ChecksumSHA1=e.headers["x-amz-checksum-sha1"]),void 0!==e.headers["x-amz-checksum-sha256"]&&(t.ChecksumSHA256=e.headers["x-amz-checksum-sha256"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-version-id"]&&(t.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-context"]&&(t.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled=Tp(e.headers["x-amz-server-side-encryption-bucket-key-enabled"])),void 0!==e.headers["x-amz-request-charged"]&&(t.RequestCharged=e.headers["x-amz-request-charged"]),[4,rn(e.body,n)]);case 1:return r.sent(),[2,Promise.resolve(t)]}})})}(t,r)},n}(Al),TP=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return(0,re.ZT)(n,e),n.prototype.resolveMiddleware=function(t,r,s){this.middlewareStack.use(El(r,this.serialize,this.deserialize)),this.middlewareStack.use(Pp(r)),this.middlewareStack.use(dn(r));var a=t.concat(this.middlewareStack),S=r.requestHandler;return a.resolve(function(G){return S.handle(G.request,s||{})},{logger:r.logger,clientName:"S3Client",commandName:"CreateMultipartUploadCommand",inputFilterSensitiveLog:Np.filterSensitiveLog,outputFilterSensitiveLog:Mp.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t,r,s,a,l,u,p,h,S;return(0,re.Jh)(this,function(J){switch(J.label){case 0:return[4,n.endpoint()];case 1:if(t=J.sent(),r=t.hostname,a=void 0===(s=t.protocol)?"https":s,l=t.port,u=t.path,p=(0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)({},Ee(e.ACL)&&{"x-amz-acl":e.ACL}),Ee(e.CacheControl)&&{"cache-control":e.CacheControl}),Ee(e.ContentDisposition)&&{"content-disposition":e.ContentDisposition}),Ee(e.ContentEncoding)&&{"content-encoding":e.ContentEncoding}),Ee(e.ContentLanguage)&&{"content-language":e.ContentLanguage}),Ee(e.ContentType)&&{"content-type":e.ContentType}),Ee(e.Expires)&&{expires:Lv(e.Expires).toString()}),Ee(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),Ee(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),Ee(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),Ee(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),Ee(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),Ee(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),Ee(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),Ee(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),Ee(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),Ee(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),Ee(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),Ee(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),Ee(e.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),Ee(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Ee(e.Tagging)&&{"x-amz-tagging":e.Tagging}),Ee(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),Ee(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),Ee(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),Ee(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),Ee(e.ChecksumAlgorithm)&&{"x-amz-checksum-algorithm":e.ChecksumAlgorithm}),void 0!==e.Metadata&&Object.keys(e.Metadata).reduce(function(ve,Ne){var Re;return(0,re.pi)((0,re.pi)({},ve),((Re={})["x-amz-meta-"+Ne.toLowerCase()]=e.Metadata[Ne],Re))},{})),h=((null==u?void 0:u.endsWith("/"))?u.slice(0,-1):u||"")+"/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((S=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(h=h.replace("{Bucket}",Cs(S)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((S=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return h=h.replace("{Key+}",S.split("/").map(function(ve){return Cs(ve)}).join("/")),[2,new Er({protocol:a,hostname:r,port:l,method:"POST",headers:p,path:h,query:{uploads:"","x-id":"CreateMultipartUpload"},body:void 0})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return IC(t,r)},n}(Al),Gp=(()=>((Gp||(Gp={})).filterSensitiveLog=function(n){return(0,re.pi)({},n)},Gp))(),Vp=(()=>((Vp||(Vp={})).filterSensitiveLog=function(n){return(0,re.pi)({},n)},Vp))(),$p=(function(e){(0,re.ZT)(function n(t){var r=e.call(this,(0,re.pi)({name:"ObjectAlreadyInActiveTierError",$fault:"client"},t))||this;return r.name="ObjectAlreadyInActiveTierError",r.$fault="client",Object.setPrototypeOf(r,n.prototype),r},e)}(Yi),(()=>(($p||($p={})).filterSensitiveLog=function(n){return(0,re.pi)((0,re.pi)({},n),n.SSEKMSKeyId&&{SSEKMSKeyId:Qi})},$p))()),Hp=(()=>((Hp||(Hp={})).filterSensitiveLog=function(n){return(0,re.pi)((0,re.pi)({},n),n.SSECustomerKey&&{SSECustomerKey:Qi})},Hp))(),RP=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return(0,re.ZT)(n,e),n.prototype.resolveMiddleware=function(t,r,s){this.middlewareStack.use(El(r,this.serialize,this.deserialize)),this.middlewareStack.use(Pp(r)),this.middlewareStack.use(dn(r)),this.middlewareStack.use(Um(r,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!1}));var a=t.concat(this.middlewareStack),S=r.requestHandler;return a.resolve(function(G){return S.handle(G.request,s||{})},{logger:r.logger,clientName:"S3Client",commandName:"UploadPartCommand",inputFilterSensitiveLog:Hp.filterSensitiveLog,outputFilterSensitiveLog:$p.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t,r,s,a,l,u,p,h,S,G,W;return(0,re.Jh)(this,function(ve){switch(ve.label){case 0:return[4,n.endpoint()];case 1:if(t=ve.sent(),r=t.hostname,a=void 0===(s=t.protocol)?"https":s,l=t.port,u=t.path,p=(0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)({"content-type":"application/octet-stream"},Ee(e.ContentLength)&&{"content-length":e.ContentLength.toString()}),Ee(e.ContentMD5)&&{"content-md5":e.ContentMD5}),Ee(e.ChecksumAlgorithm)&&{"x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm}),Ee(e.ChecksumCRC32)&&{"x-amz-checksum-crc32":e.ChecksumCRC32}),Ee(e.ChecksumCRC32C)&&{"x-amz-checksum-crc32c":e.ChecksumCRC32C}),Ee(e.ChecksumSHA1)&&{"x-amz-checksum-sha1":e.ChecksumSHA1}),Ee(e.ChecksumSHA256)&&{"x-amz-checksum-sha256":e.ChecksumSHA256}),Ee(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),Ee(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),Ee(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),Ee(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Ee(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),h=((null==u?void 0:u.endsWith("/"))?u.slice(0,-1):u||"")+"/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((S=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(h=h.replace("{Bucket}",Cs(S)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((S=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return h=h.replace("{Key+}",S.split("/").map(function(Ne){return Cs(Ne)}).join("/")),G=(0,re.pi)((0,re.pi)({"x-id":"UploadPart"},void 0!==e.PartNumber&&{partNumber:e.PartNumber.toString()}),void 0!==e.UploadId&&{uploadId:e.UploadId}),void 0!==e.Body&&(W=e.Body),void 0!==e.Body&&(W=e.Body),[2,new Er({protocol:a,hostname:r,port:l,method:"PUT",headers:p,path:h,query:G,body:W})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t;return(0,re.Jh)(this,function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,cS(e,n)]:(t={$metadata:ot(e),BucketKeyEnabled:void 0,ChecksumCRC32:void 0,ChecksumCRC32C:void 0,ChecksumSHA1:void 0,ChecksumSHA256:void 0,ETag:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},void 0!==e.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers.etag&&(t.ETag=e.headers.etag),void 0!==e.headers["x-amz-checksum-crc32"]&&(t.ChecksumCRC32=e.headers["x-amz-checksum-crc32"]),void 0!==e.headers["x-amz-checksum-crc32c"]&&(t.ChecksumCRC32C=e.headers["x-amz-checksum-crc32c"]),void 0!==e.headers["x-amz-checksum-sha1"]&&(t.ChecksumSHA1=e.headers["x-amz-checksum-sha1"]),void 0!==e.headers["x-amz-checksum-sha256"]&&(t.ChecksumSHA256=e.headers["x-amz-checksum-sha256"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(t.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(t.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled=Tp(e.headers["x-amz-server-side-encryption-bucket-key-enabled"])),void 0!==e.headers["x-amz-request-charged"]&&(t.RequestCharged=e.headers["x-amz-request-charged"]),[4,rn(e.body,n)]);case 1:return r.sent(),[2,Promise.resolve(t)]}})})}(t,r)},n}(Al),Ry={},Zm={},Id=0;Id<256;Id++){var Td=Id.toString(16).toLowerCase();1===Td.length&&(Td="0"+Td),Ry[Id]=Td,Zm[Td]=Id}function Po(e){for(var n="",t=0;t<e.byteLength;t++)n+=Ry[e[t]];return n}var ky="X-Amz-Date",Oy="X-Amz-Signature",Fy="X-Amz-Security-Token",Dy="authorization",My=ky.toLowerCase(),jP=[Dy,My,"date"],BP=Oy.toLowerCase(),eg="x-amz-content-sha256",LP=Fy.toLowerCase(),zP={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},UP=/^proxy-/,GP=/^sec-/,tg="AWS4-HMAC-SHA256",VP="AWS4-HMAC-SHA256-PAYLOAD",Ny="aws4_request",Hu={},qp=[],ng=function(e,n,t){return e+"/"+n+"/"+t+"/"+Ny},jy=function(e,n,t){var r=new e(n);return r.update(t),r.digest()},By=function(e,n,t){var r,s,a=e.headers,l={};try{for(var u=(0,re.XA)(Object.keys(a).sort()),p=u.next();!p.done;p=u.next()){var h=p.value,S=h.toLowerCase();(S in zP||(null==n?void 0:n.has(S))||UP.test(S)||GP.test(S))&&(!t||t&&!t.has(S))||(l[S]=a[h].trim().replace(/\s+/g," "))}}catch(G){r={error:G}}finally{try{p&&!p.done&&(s=u.return)&&s.call(u)}finally{if(r)throw r.error}}return l},Il=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,XP)},XP=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()},rg=function(e,n){var t=e.headers,r=e.body;return(0,re.mG)(void 0,void 0,void 0,function(){var s,a,l,u,p,h,S;return(0,re.Jh)(this,function(G){switch(G.label){case 0:try{for(s=(0,re.XA)(Object.keys(t)),a=s.next();!a.done;a=s.next())if((l=a.value).toLowerCase()===eg)return[2,t[l]]}catch(W){h={error:W}}finally{try{a&&!a.done&&(S=s.return)&&S.call(s)}finally{if(h)throw h.error}}return null!=r?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof r||ArrayBuffer.isView(r)||Ap(r)?((u=new n).update(r),p=Po,[4,u.digest()]):[3,3];case 2:return[2,p.apply(void 0,[G.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}})})},Ly=function(e){var n=e.headers,t=e.query,r=(0,re._T)(e,["headers","query"]);return(0,re.pi)((0,re.pi)({},r),{headers:(0,re.pi)({},n),query:t?QP(t):void 0})},QP=function(e){return Object.keys(e).reduce(function(n,t){var r,s=e[t];return(0,re.pi)((0,re.pi)({},n),((r={})[t]=Array.isArray(s)?(0,re.ev)([],(0,re.CR)(s)):s,r))},{})},zy=function(e){var n,t;e="function"==typeof e.clone?e.clone():Ly(e);try{for(var r=(0,re.XA)(Object.keys(e.headers)),s=r.next();!s.done;s=r.next()){var a=s.value;jP.indexOf(a.toLowerCase())>-1&&delete e.headers[a]}}catch(l){n={error:l}}finally{try{s&&!s.done&&(t=r.return)&&t.call(r)}finally{if(n)throw n.error}}return e},Kp=function(){function e(n){var t=n.applyChecksum,r=n.credentials,s=n.region,l=n.sha256,u=n.uriEscapePath,p=void 0===u||u;this.service=n.service,this.sha256=l,this.uriEscapePath=p,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=function(e){if("string"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e}(s),this.credentialProvider=function(e){if("object"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e}(r)}return e.prototype.presign=function(n,t){return void 0===t&&(t={}),(0,re.mG)(this,void 0,void 0,function(){var r,s,a,l,u,p,h,S,G,W,J,ve,Ne,Re,De,Je,et,gt,St,Ft,Kt,Zt,Vn,Pr;return(0,re.Jh)(this,function(Ai){switch(Ai.label){case 0:return s=void 0===(r=t.signingDate)?new Date:r,l=void 0===(a=t.expiresIn)?3600:a,u=t.unsignableHeaders,p=t.unhoistableHeaders,h=t.signableHeaders,S=t.signingRegion,G=t.signingService,[4,this.credentialProvider()];case 1:return W=Ai.sent(),null==S?[3,2]:(ve=S,[3,4]);case 2:return[4,this.regionProvider()];case 3:ve=Ai.sent(),Ai.label=4;case 4:return J=ve,Ne=Xp(s),Re=Ne.longDate,De=Ne.shortDate,l>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(Je=ng(De,J,G??this.service),et=function(e,n){var t,r,s;void 0===n&&(n={});var a="function"==typeof e.clone?e.clone():Ly(e),l=a.headers,u=a.query,p=void 0===u?{}:u;try{for(var h=(0,re.XA)(Object.keys(l)),S=h.next();!S.done;S=h.next()){var G=S.value,W=G.toLowerCase();"x-amz-"===W.substr(0,6)&&!(null===(s=n.unhoistableHeaders)||void 0===s?void 0:s.has(W))&&(p[G]=l[G],delete l[G])}}catch(J){t={error:J}}finally{try{S&&!S.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}return(0,re.pi)((0,re.pi)({},e),{headers:l,query:p})}(zy(n),{unhoistableHeaders:p}),W.sessionToken&&(et.query[Fy]=W.sessionToken),et.query["X-Amz-Algorithm"]=tg,et.query["X-Amz-Credential"]=W.accessKeyId+"/"+Je,et.query[ky]=Re,et.query["X-Amz-Expires"]=l.toString(10),gt=By(et,u,h),et.query["X-Amz-SignedHeaders"]=Uy(gt),St=et.query,Ft=Oy,Kt=this.getSignature,Zt=[Re,Je,this.getSigningKey(W,J,De,G)],Vn=this.createCanonicalRequest,Pr=[et,gt],[4,rg(n,this.sha256)]);case 5:return[4,Kt.apply(this,Zt.concat([Vn.apply(this,Pr.concat([Ai.sent()]))]))];case 6:return St[Ft]=Ai.sent(),[2,et]}})})},e.prototype.sign=function(n,t){return(0,re.mG)(this,void 0,void 0,function(){return(0,re.Jh)(this,function(r){return"string"==typeof n?[2,this.signString(n,t)]:n.headers&&n.payload?[2,this.signEvent(n,t)]:[2,this.signRequest(n,t)]})})},e.prototype.signEvent=function(n,t){var r=n.headers,s=n.payload,a=t.signingDate,l=void 0===a?new Date:a,u=t.priorSignature,p=t.signingRegion,h=t.signingService;return(0,re.mG)(this,void 0,void 0,function(){var S,G,W,ve,Ne,Re,De,Je,et,gt;return(0,re.Jh)(this,function(St){switch(St.label){case 0:return null==p?[3,1]:(G=p,[3,3]);case 1:return[4,this.regionProvider()];case 2:G=St.sent(),St.label=3;case 3:return S=G,W=Xp(l),ve=W.longDate,Ne=ng(W.shortDate,S,h??this.service),[4,rg({headers:{},body:s},this.sha256)];case 4:return Re=St.sent(),(De=new this.sha256).update(r),et=Po,[4,De.digest()];case 5:return Je=et.apply(void 0,[St.sent()]),gt=[VP,ve,Ne,u,Je,Re].join("\n"),[2,this.signString(gt,{signingDate:l,signingRegion:S,signingService:h})]}})})},e.prototype.signString=function(n,t){var r=void 0===t?{}:t,s=r.signingDate,a=void 0===s?new Date:s,l=r.signingRegion,u=r.signingService;return(0,re.mG)(this,void 0,void 0,function(){var p,h,S,G,W,J,ve,Ne;return(0,re.Jh)(this,function(Re){switch(Re.label){case 0:return[4,this.credentialProvider()];case 1:return p=Re.sent(),null==l?[3,2]:(S=l,[3,4]);case 2:return[4,this.regionProvider()];case 3:S=Re.sent(),Re.label=4;case 4:return h=S,G=Xp(a).shortDate,ve=(J=this.sha256).bind,[4,this.getSigningKey(p,h,G,u)];case 5:return(W=new(ve.apply(J,[void 0,Re.sent()]))).update(n),Ne=Po,[4,W.digest()];case 6:return[2,Ne.apply(void 0,[Re.sent()])]}})})},e.prototype.signRequest=function(n,t){var r=void 0===t?{}:t,s=r.signingDate,a=void 0===s?new Date:s,l=r.signableHeaders,u=r.unsignableHeaders,p=r.signingRegion,h=r.signingService;return(0,re.mG)(this,void 0,void 0,function(){var S,G,W,J,ve,Ne,Re,De,Je,et,gt;return(0,re.Jh)(this,function(St){switch(St.label){case 0:return[4,this.credentialProvider()];case 1:return S=St.sent(),null==p?[3,2]:(W=p,[3,4]);case 2:return[4,this.regionProvider()];case 3:W=St.sent(),St.label=4;case 4:return G=W,J=zy(n),ve=Xp(a),Ne=ve.longDate,De=ng(Re=ve.shortDate,G,h??this.service),J.headers[My]=Ne,S.sessionToken&&(J.headers[LP]=S.sessionToken),[4,rg(J,this.sha256)];case 5:return Je=St.sent(),!function(e,n){var t,r;e=e.toLowerCase();try{for(var s=(0,re.XA)(Object.keys(n)),a=s.next();!a.done;a=s.next())if(e===a.value.toLowerCase())return!0}catch(u){t={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return!1}(eg,J.headers)&&this.applyChecksum&&(J.headers[eg]=Je),et=By(J,u,l),[4,this.getSignature(Ne,De,this.getSigningKey(S,G,Re,h),this.createCanonicalRequest(J,et,Je))];case 6:return gt=St.sent(),J.headers[Dy]=tg+" Credential="+S.accessKeyId+"/"+De+", SignedHeaders="+Uy(et)+", Signature="+gt,[2,J]}})})},e.prototype.createCanonicalRequest=function(n,t,r){var s=Object.keys(t).sort();return n.method+"\n"+this.getCanonicalPath(n)+"\n"+function(e){var n,t,r=e.query,s=void 0===r?{}:r,a=[],l={},u=function(G){if(G.toLowerCase()===BP)return"continue";a.push(G);var W=s[G];"string"==typeof W?l[G]=Il(G)+"="+Il(W):Array.isArray(W)&&(l[G]=W.slice(0).sort().reduce(function(J,ve){return J.concat([Il(G)+"="+Il(ve)])},[]).join("&"))};try{for(var p=(0,re.XA)(Object.keys(s).sort()),h=p.next();!h.done;h=p.next())u(h.value)}catch(G){n={error:G}}finally{try{h&&!h.done&&(t=p.return)&&t.call(p)}finally{if(n)throw n.error}}return a.map(function(G){return l[G]}).filter(function(G){return G}).join("&")}(n)+"\n"+s.map(function(a){return a+":"+t[a]}).join("\n")+"\n\n"+s.join(";")+"\n"+r},e.prototype.createStringToSign=function(n,t,r){return(0,re.mG)(this,void 0,void 0,function(){var s,a;return(0,re.Jh)(this,function(l){switch(l.label){case 0:return(s=new this.sha256).update(r),[4,s.digest()];case 1:return a=l.sent(),[2,tg+"\n"+n+"\n"+t+"\n"+Po(a)]}})})},e.prototype.getCanonicalPath=function(n){var t,r,s=n.path;if(this.uriEscapePath){var a=[];try{for(var l=(0,re.XA)(s.split("/")),u=l.next();!u.done;u=l.next()){var p=u.value;0!==(null==p?void 0:p.length)&&"."!==p&&(".."===p?a.pop():a.push(p))}}catch(G){t={error:G}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}var h=((null==s?void 0:s.startsWith("/"))?"/":"")+a.join("/")+(a.length>0&&(null==s?void 0:s.endsWith("/"))?"/":"");return encodeURIComponent(h).replace(/%2F/g,"/")}return s},e.prototype.getSignature=function(n,t,r,s){return(0,re.mG)(this,void 0,void 0,function(){var a,l,u,p,h;return(0,re.Jh)(this,function(S){switch(S.label){case 0:return[4,this.createStringToSign(n,t,s)];case 1:return a=S.sent(),p=(u=this.sha256).bind,[4,r];case 2:return(l=new(p.apply(u,[void 0,S.sent()]))).update(a),h=Po,[4,l.digest()];case 3:return[2,h.apply(void 0,[S.sent()])]}})})},e.prototype.getSigningKey=function(n,t,r,s){return function(e,n,t,r,s){return(0,re.mG)(void 0,void 0,void 0,function(){var a,l,u,p,h,G,W,J;return(0,re.Jh)(this,function(ve){switch(ve.label){case 0:return[4,jy(e,n.secretAccessKey,n.accessKeyId)];case 1:if(a=ve.sent(),(l=t+":"+r+":"+s+":"+Po(a)+":"+n.sessionToken)in Hu)return[2,Hu[l]];for(qp.push(l);qp.length>50;)delete Hu[qp.shift()];u="AWS4"+n.secretAccessKey,ve.label=2;case 2:ve.trys.push([2,7,8,9]),p=(0,re.XA)([t,r,s,Ny]),h=p.next(),ve.label=3;case 3:return h.done?[3,6]:[4,jy(e,u,h.value)];case 4:u=ve.sent(),ve.label=5;case 5:return h=p.next(),[3,3];case 6:return[3,9];case 7:return G=ve.sent(),W={error:G},[3,9];case 8:try{h&&!h.done&&(J=p.return)&&J.call(p)}finally{if(W)throw W.error}return[7];case 9:return[2,Hu[l]=u]}})})}(this.sha256,n,r,t,s||this.service)},e}(),Xp=function(e){var n=function(e){return function(e){return"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}(e).replace(/[\-:]/g,"");return{longDate:n,shortDate:n.substr(0,8)}},Uy=function(e){return Object.keys(e).sort().join(";")},rI=function(){function e(n){this.sigv4Signer=new Kp(n),this.signerOptions=n}return e.prototype.sign=function(n,t){return void 0===t&&(t={}),(0,re.mG)(this,void 0,void 0,function(){return(0,re.Jh)(this,function(r){if("*"===t.signingRegion){if("node"!==this.signerOptions.runtime)throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return[2,this.getSigv4aSigner().sign(n,t)]}return[2,this.sigv4Signer.sign(n,t)]})})},e.prototype.presign=function(n,t){return void 0===t&&(t={}),(0,re.mG)(this,void 0,void 0,function(){return(0,re.Jh)(this,function(r){if("*"===t.signingRegion){if("node"!==this.signerOptions.runtime)throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return[2,this.getSigv4aSigner().presign(n,t)]}return[2,this.sigv4Signer.presign(n,t)]})})},e.prototype.getSigv4aSigner=function(){if(!this.sigv4aSigner){var n;try{if("function"!=typeof(n=x(3743).CrtSignerV4))throw new Error}catch(t){throw t.message=t.message+'\nPlease check if you have installed "@aws-sdk/signature-v4-crt" package explicitly. \nFor more information please go to https://github.com/aws/aws-sdk-js-v3#known-issues',t}this.sigv4aSigner=new n((0,re.pi)((0,re.pi)({},this.signerOptions),{signingAlgorithm:1}))}return this.sigv4aSigner},e}(),Gy=function(e,n){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):n.streamCollector(e)||Promise.resolve(new Uint8Array)},oI=function(e,n){return Gy(e,n).then(function(t){return n.utf8Encoder(t)})},sI={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},uI={step:"build",tags:["USE_REGIONAL_ENDPOINT","S3"],name:"useRegionalEndpointMiddleware",override:!0},fI={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},hI=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return(0,re.ZT)(n,e),n.prototype.resolveMiddleware=function(t,r,s){this.middlewareStack.use(El(r,this.serialize,this.deserialize)),this.middlewareStack.use(function(e){return{applyToStack:function(n){n.addRelativeTo(function(e){return function(n){return function(t){return(0,re.mG)(void 0,void 0,void 0,function(){var r,s,a,l,u,p,h;return(0,re.Jh)(this,function(S){switch(S.label){case 0:return[4,n(t)];case 1:return r=S.sent(),Sl.isInstance(s=r.response)?(l=s.body,(a=s.statusCode)<200&&a>=300?[2,r]:[4,Gy(l,e)]):[2,r];case 2:return u=S.sent(),[4,oI(u,e)];case 3:if(p=S.sent(),0===u.length)throw(h=new Error("S3 aborted request")).name="InternalError",h;return p&&p.match("<Error>")&&(s.statusCode=400),s.body=u,[2,r]}})})}}}(e),sI)}}}(r)),this.middlewareStack.use(Pp(r)),this.middlewareStack.use(dn(r));var a=t.concat(this.middlewareStack),S=r.requestHandler;return a.resolve(function(G){return S.handle(G.request,s||{})},{logger:r.logger,clientName:"S3Client",commandName:"CompleteMultipartUploadCommand",inputFilterSensitiveLog:Dp.filterSensitiveLog,outputFilterSensitiveLog:Fp.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t,r,s,a,l,u,p,h,S,G,W,J;return(0,re.Jh)(this,function(ve){switch(ve.label){case 0:return[4,n.endpoint()];case 1:if(t=ve.sent(),r=t.hostname,a=void 0===(s=t.protocol)?"https":s,l=t.port,u=t.path,p=(0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)({"content-type":"application/xml"},Ee(e.ChecksumCRC32)&&{"x-amz-checksum-crc32":e.ChecksumCRC32}),Ee(e.ChecksumCRC32C)&&{"x-amz-checksum-crc32c":e.ChecksumCRC32C}),Ee(e.ChecksumSHA1)&&{"x-amz-checksum-sha1":e.ChecksumSHA1}),Ee(e.ChecksumSHA256)&&{"x-amz-checksum-sha256":e.ChecksumSHA256}),Ee(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),Ee(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),Ee(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),Ee(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),Ee(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),h=((null==u?void 0:u.endsWith("/"))?u.slice(0,-1):u||"")+"/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((S=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(h=h.replace("{Bucket}",Cs(S)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((S=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return h=h.replace("{Key+}",S.split("/").map(function(Ne){return Cs(Ne)}).join("/")),G=(0,re.pi)({"x-id":"CompleteMultipartUpload"},void 0!==e.UploadId&&{uploadId:e.UploadId}),void 0!==e.MultipartUpload&&(W=Wv(e.MultipartUpload,n)),void 0!==e.MultipartUpload&&(J=(J=Wv(e.MultipartUpload,n)).withName("CompleteMultipartUpload"),W='<?xml version="1.0" encoding="UTF-8"?>',J.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),W+=J.toString()),[2,new Er({protocol:a,hostname:r,port:l,method:"POST",headers:p,path:h,query:G,body:W})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t,r,s,a;return(0,re.Jh)(this,function(l){switch(l.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,EC(e,n)]:(t={$metadata:ot(e),Bucket:void 0,BucketKeyEnabled:void 0,ChecksumCRC32:void 0,ChecksumCRC32C:void 0,ChecksumSHA1:void 0,ChecksumSHA256:void 0,ETag:void 0,Expiration:void 0,Key:void 0,Location:void 0,RequestCharged:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==e.headers["x-amz-expiration"]&&(t.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(t.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-version-id"]&&(t.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(t.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(t.BucketKeyEnabled=Tp(e.headers["x-amz-server-side-encryption-bucket-key-enabled"])),void 0!==e.headers["x-amz-request-charged"]&&(t.RequestCharged=e.headers["x-amz-request-charged"]),s=Rp,a=Hm,[4,bt(e.body,n)]);case 1:return void 0!==(r=s.apply(void 0,[a.apply(void 0,[l.sent()]),"body"])).Bucket&&(t.Bucket=or(r.Bucket)),void 0!==r.ChecksumCRC32&&(t.ChecksumCRC32=or(r.ChecksumCRC32)),void 0!==r.ChecksumCRC32C&&(t.ChecksumCRC32C=or(r.ChecksumCRC32C)),void 0!==r.ChecksumSHA1&&(t.ChecksumSHA1=or(r.ChecksumSHA1)),void 0!==r.ChecksumSHA256&&(t.ChecksumSHA256=or(r.ChecksumSHA256)),void 0!==r.ETag&&(t.ETag=or(r.ETag)),void 0!==r.Key&&(t.Key=or(r.Key)),void 0!==r.Location&&(t.Location=or(r.Location)),[2,Promise.resolve(t)]}})})}(t,r)},n}(Al),mI=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return(0,re.ZT)(n,e),n.prototype.resolveMiddleware=function(t,r,s){this.middlewareStack.use(El(r,this.serialize,this.deserialize)),this.middlewareStack.use(dn(r)),this.middlewareStack.use(Um(r,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!0}));var a=t.concat(this.middlewareStack),S=r.requestHandler;return a.resolve(function(G){return S.handle(G.request,s||{})},{logger:r.logger,clientName:"S3Client",commandName:"PutObjectTaggingCommand",inputFilterSensitiveLog:Vp.filterSensitiveLog,outputFilterSensitiveLog:Gp.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t,r,s,a,l,u,p,h,S,G,W,J;return(0,re.Jh)(this,function(ve){switch(ve.label){case 0:return[4,n.endpoint()];case 1:if(t=ve.sent(),r=t.hostname,a=void 0===(s=t.protocol)?"https":s,l=t.port,u=t.path,p=(0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)({"content-type":"application/xml"},Ee(e.ContentMD5)&&{"content-md5":e.ContentMD5}),Ee(e.ChecksumAlgorithm)&&{"x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm}),Ee(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),Ee(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),h=((null==u?void 0:u.endsWith("/"))?u.slice(0,-1):u||"")+"/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((S=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(h=h.replace("{Bucket}",Cs(S)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((S=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return h=h.replace("{Key+}",S.split("/").map(function(Ne){return Cs(Ne)}).join("/")),G=(0,re.pi)({tagging:""},void 0!==e.VersionId&&{versionId:e.VersionId}),void 0!==e.Tagging&&(W=Pd(e.Tagging,n)),void 0!==e.Tagging&&(J=Pd(e.Tagging,n),W='<?xml version="1.0" encoding="UTF-8"?>',J.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),W+=J.toString()),[2,new Er({protocol:a,hostname:r,port:l,method:"PUT",headers:p,path:h,query:G,body:W})]}})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t;return(0,re.Jh)(this,function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,oS(e,n)]:(t={$metadata:ot(e),VersionId:void 0},void 0!==e.headers["x-amz-version-id"]&&(t.VersionId=e.headers["x-amz-version-id"]),[4,rn(e.body,n)]);case 1:return r.sent(),[2,Promise.resolve(t)]}})})}(t,r)},n}(Al),gI=x(9069),vI=x(6399),_I=(0,re.pi)((0,re.pi)({},{lstatSync:function(){}}),{runtime:"node",lstatSync:vI.lstatSync}),ig=function(e){if(null==e)return 0;if("string"==typeof e&&(e=Buffer.from(e)),"number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.length)return e.length;if("number"==typeof e.size)return e.size;if("string"==typeof e.path)try{return _I.lstatSync(e.path).size}catch{return}},qu=x(9286),bI=x(295);function Vy(e,n){return(0,re.FC)(this,arguments,function(){var r,s,a;return(0,re.Jh)(this,function(l){switch(l.label){case 0:r=1,s=0,a=n,l.label=1;case 1:return a<e.byteLength?[4,(0,re.qq)({partNumber:r,data:e.slice(s,a)})]:[3,4];case 2:return[4,l.sent()];case 3:return l.sent(),r+=1,a=(s=a)+n,[3,1];case 4:return[4,(0,re.qq)({partNumber:r,data:e.slice(s),lastPart:!0})];case 5:return[4,l.sent()];case 6:return l.sent(),[2]}})})}function og(e,n,t){return(0,re.FC)(this,arguments,function(){var s,a,l,u,p,h,S,G,W;return(0,re.Jh)(this,function(J){switch(J.label){case 0:s=1,a={chunks:[],length:0},J.label=1;case 1:J.trys.push([1,9,10,15]),l=(0,re.KL)(t(e)),J.label=2;case 2:return[4,(0,re.qq)(l.next())];case 3:if((u=J.sent()).done)return[3,8];a.chunks.push(p=u.value),a.length+=p.length,J.label=4;case 4:return a.length>=n?(h=a.chunks.length>1?qu.lW.concat(a.chunks):a.chunks[0],[4,(0,re.qq)({partNumber:s,data:h.slice(0,n)})]):[3,7];case 5:return[4,J.sent()];case 6:return J.sent(),a.chunks=[h.slice(n)],a.length=a.chunks[0].length,s+=1,[3,4];case 7:return[3,2];case 8:return[3,15];case 9:return S=J.sent(),G={error:S},[3,15];case 10:return J.trys.push([10,,13,14]),u&&!u.done&&(W=l.return)?[4,(0,re.qq)(W.call(l))]:[3,12];case 11:J.sent(),J.label=12;case 12:return[3,14];case 13:if(G)throw G.error;return[7];case 14:return[7];case 15:return[4,(0,re.qq)({partNumber:s,data:qu.lW.concat(a.chunks),lastPart:!0})];case 16:return[4,J.sent()];case 17:return J.sent(),[2]}})})}function wI(e){return(0,re.FC)(this,arguments,function(){var t,r,a,l,u;return(0,re.Jh)(this,function(p){switch(p.label){case 0:p.trys.push([0,7,8,13]),t=(0,re.KL)(e),p.label=1;case 1:return[4,(0,re.qq)(t.next())];case 2:return(r=p.sent()).done?[3,6]:[4,(0,re.qq)(qu.lW.from(r.value))];case 3:return[4,p.sent()];case 4:p.sent(),p.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return a=p.sent(),l={error:a},[3,13];case 8:return p.trys.push([8,,11,12]),r&&!r.done&&(u=t.return)?[4,(0,re.qq)(u.call(t))]:[3,10];case 9:p.sent(),p.label=10;case 10:return[3,12];case 11:if(l)throw l.error;return[7];case 12:return[7];case 13:return[2]}})})}function $y(e){return(0,re.FC)(this,arguments,function(){var t,r,a;return(0,re.Jh)(this,function(u){switch(u.label){case 0:t=e.getReader(),u.label=1;case 1:u.trys.push([1,9,10,11]),u.label=2;case 2:return[4,(0,re.qq)(t.read())];case 3:return r=u.sent(),a=r.value,r.done?[4,(0,re.qq)(void 0)]:[3,5];case 4:return[2,u.sent()];case 5:return[4,(0,re.qq)(qu.lW.from(a))];case 6:return[4,u.sent()];case 7:return u.sent(),[3,2];case 8:return[3,11];case 9:throw u.sent();case 10:return t.releaseLock(),[7];case 11:return[2]}})})}var sg=5242880,xI=function(e){function n(t){var r=e.call(this)||this;return r.MAX_PARTS=1e4,r.queueSize=4,r.partSize=sg,r.leavePartsOnError=!1,r.tags=[],r.concurrentUploaders=[],r.uploadedParts=[],r.isMultiPart=!0,r.queueSize=t.queueSize||r.queueSize,r.partSize=t.partSize||r.partSize,r.leavePartsOnError=t.leavePartsOnError||r.leavePartsOnError,r.tags=t.tags||r.tags,r.client=t.client,r.params=t.params,r.__validateInput(),r.totalBytes=ig(r.params.Body),r.bytesUploadedSoFar=0,r.abortController=new Mm,r}return(0,re.ZT)(n,e),n.prototype.abort=function(){return(0,re.mG)(this,void 0,void 0,function(){return(0,re.Jh)(this,function(t){return this.abortController.abort(),[2]})})},n.prototype.done=function(){return(0,re.mG)(this,void 0,void 0,function(){return(0,re.Jh)(this,function(t){switch(t.label){case 0:return[4,Promise.race([this.__doMultipartUpload(),this.__abortTimeout(this.abortController.signal)])];case 1:return[2,t.sent()]}})})},n.prototype.on=function(t,r){this.uploadEvent=t,e.prototype.on.call(this,t,r)},n.prototype.__uploadUsingPut=function(t){return(0,re.mG)(this,void 0,void 0,function(){var r,s,a;return(0,re.Jh)(this,function(l){switch(l.label){case 0:return this.isMultiPart=!1,r=(0,re.pi)((0,re.pi)({},this.params),{Body:t.data}),[4,this.client.send(new IP(r))];case 1:return s=l.sent(),this.putResponse=s,a=ig(t.data),this.__notifyProgress({loaded:a,total:a,part:1,Key:this.params.Key,Bucket:this.params.Bucket}),[2]}})})},n.prototype.__createMultipartUpload=function(){return(0,re.mG)(this,void 0,void 0,function(){var t,r;return(0,re.Jh)(this,function(s){switch(s.label){case 0:return this.createMultiPartPromise||(t=(0,re.pi)((0,re.pi)({},this.params),{Body:void 0}),this.createMultiPartPromise=this.client.send(new TP(t))),[4,this.createMultiPartPromise];case 1:return r=s.sent(),this.uploadId=r.UploadId,[2]}})})},n.prototype.__doConcurrentUpload=function(t){var r,s,a,l;return(0,re.mG)(this,void 0,void 0,function(){var u,p,h,S;return(0,re.Jh)(this,function(G){switch(G.label){case 0:G.trys.push([0,12,13,18]),r=(0,re.KL)(t),G.label=1;case 1:return[4,r.next()];case 2:if((s=G.sent()).done)return[3,11];if(u=s.value,this.uploadedParts.length>this.MAX_PARTS)throw new Error("Exceeded "+this.MAX_PARTS+" as part of the upload to "+this.params.Key+" and "+this.params.Bucket+".");G.label=3;case 3:return G.trys.push([3,9,,10]),this.abortController.signal.aborted?[2]:1===u.partNumber&&u.lastPart?[4,this.__uploadUsingPut(u)]:[3,5];case 4:return[2,G.sent()];case 5:return this.uploadId?[3,7]:[4,this.__createMultipartUpload()];case 6:if(G.sent(),this.abortController.signal.aborted)return[2];G.label=7;case 7:return[4,this.client.send(new RP((0,re.pi)((0,re.pi)({},this.params),{UploadId:this.uploadId,Body:u.data,PartNumber:u.partNumber})))];case 8:return p=G.sent(),this.abortController.signal.aborted?[2]:(this.uploadedParts.push((0,re.pi)((0,re.pi)((0,re.pi)((0,re.pi)({PartNumber:u.partNumber,ETag:p.ETag},p.ChecksumCRC32&&{ChecksumCRC32:p.ChecksumCRC32}),p.ChecksumCRC32C&&{ChecksumCRC32C:p.ChecksumCRC32C}),p.ChecksumSHA1&&{ChecksumSHA1:p.ChecksumSHA1}),p.ChecksumSHA256&&{ChecksumSHA256:p.ChecksumSHA256})),this.bytesUploadedSoFar+=ig(u.data),this.__notifyProgress({loaded:this.bytesUploadedSoFar,total:this.totalBytes,part:u.partNumber,Key:this.params.Key,Bucket:this.params.Bucket}),[3,10]);case 9:if(h=G.sent(),!this.uploadId||this.leavePartsOnError)throw h;return[3,10];case 10:return[3,1];case 11:return[3,18];case 12:return S=G.sent(),a={error:S},[3,18];case 13:return G.trys.push([13,,16,17]),s&&!s.done&&(l=r.return)?[4,l.call(r)]:[3,15];case 14:G.sent(),G.label=15;case 15:return[3,17];case 16:if(a)throw a.error;return[7];case 17:return[7];case 18:return[2]}})})},n.prototype.__doMultipartUpload=function(){return(0,re.mG)(this,void 0,void 0,function(){var t,r,s,a,l;return(0,re.Jh)(this,function(u){switch(u.label){case 0:for(t=function(e,n){if(e instanceof qu.lW)return Vy(e,n);if(e instanceof bI.Readable)return og(e,n,wI);if(e instanceof String||"string"==typeof e||e instanceof Uint8Array)return Vy(qu.lW.from(e),n);if("function"==typeof e.stream)return og(e.stream(),n,$y);if(e instanceof ReadableStream)return og(e,n,$y);throw new Error("Body Data is unsupported format, expected data to be one of: string | Uint8Array | Buffer | Readable | ReadableStream | Blob;.")}(this.params.Body,this.partSize),r=0;r<this.queueSize;r++)s=this.__doConcurrentUpload(t),this.concurrentUploaders.push(s);return[4,Promise.all(this.concurrentUploaders)];case 1:if(u.sent(),this.abortController.signal.aborted)throw Object.assign(new Error("Upload aborted."),{name:"AbortError"});return this.isMultiPart?(this.uploadedParts.sort(function(p,h){return p.PartNumber-h.PartNumber}),l=(0,re.pi)((0,re.pi)({},this.params),{Body:void 0,UploadId:this.uploadId,MultipartUpload:{Parts:this.uploadedParts}}),[4,this.client.send(new hI(l))]):[3,3];case 2:return a=u.sent(),[3,4];case 3:a=this.putResponse,u.label=4;case 4:return this.tags.length?[4,this.client.send(new mI((0,re.pi)((0,re.pi)({},this.params),{Tagging:{TagSet:this.tags}})))]:[3,6];case 5:u.sent(),u.label=6;case 6:return[2,a]}})})},n.prototype.__notifyProgress=function(t){this.uploadEvent&&this.emit(this.uploadEvent,t)},n.prototype.__abortTimeout=function(t){return(0,re.mG)(this,void 0,void 0,function(){return(0,re.Jh)(this,function(r){return[2,new Promise(function(s,a){t.onabort=function(){var l=new Error("Upload aborted.");l.name="AbortError",a(l)}})]})})},n.prototype.__validateInput=function(){if(!this.params)throw new Error("InputError: Upload requires params to be passed to upload.");if(!this.client)throw new Error("InputError: Upload requires a AWS client to do uploads with.");if(this.partSize<sg)throw new Error("EntityTooSmall: Your proposed upload partsize ["+this.partSize+"] is smaller than the minimum allowed size ["+sg+"] (5MB)");if(this.queueSize<1)throw new Error("Queue size: Must have at least one uploading queue.")},n}(gI.EventEmitter),yo=function(e){function n(t){var r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return(0,re.ZT)(n,e),n}(Uv),SI=function(e){function n(t){var r=e.call(this,(0,re.pi)({name:"InternalErrorException",$fault:"server"},t))||this;return r.name="InternalErrorException",r.$fault="server",Object.setPrototypeOf(r,n.prototype),r}return(0,re.ZT)(n,e),n}(yo),EI=function(e){function n(t){var r=e.call(this,(0,re.pi)({name:"InvalidParameterException",$fault:"client"},t))||this;return r.name="InvalidParameterException",r.$fault="client",Object.setPrototypeOf(r,n.prototype),r}return(0,re.ZT)(n,e),n}(yo),AI=function(e){function n(t){var r=e.call(this,(0,re.pi)({name:"LimitExceededException",$fault:"client"},t))||this;return r.name="LimitExceededException",r.$fault="client",Object.setPrototypeOf(r,n.prototype),r}return(0,re.ZT)(n,e),n}(yo),PI=function(e){function n(t){var r=e.call(this,(0,re.pi)({name:"NotAuthorizedException",$fault:"client"},t))||this;return r.name="NotAuthorizedException",r.$fault="client",Object.setPrototypeOf(r,n.prototype),r}return(0,re.ZT)(n,e),n}(yo),II=function(e){function n(t){var r=e.call(this,(0,re.pi)({name:"ResourceConflictException",$fault:"client"},t))||this;return r.name="ResourceConflictException",r.$fault="client",Object.setPrototypeOf(r,n.prototype),r}return(0,re.ZT)(n,e),n}(yo),TI=function(e){function n(t){var r=e.call(this,(0,re.pi)({name:"TooManyRequestsException",$fault:"client"},t))||this;return r.name="TooManyRequestsException",r.$fault="client",Object.setPrototypeOf(r,n.prototype),r}return(0,re.ZT)(n,e),n}(yo),RI=function(e){function n(t){var r=e.call(this,(0,re.pi)({name:"ResourceNotFoundException",$fault:"client"},t))||this;return r.name="ResourceNotFoundException",r.$fault="client",Object.setPrototypeOf(r,n.prototype),r}return(0,re.ZT)(n,e),n}(yo),kI=function(e){function n(t){var r=e.call(this,(0,re.pi)({name:"ExternalServiceException",$fault:"client"},t))||this;return r.name="ExternalServiceException",r.$fault="client",Object.setPrototypeOf(r,n.prototype),r}return(0,re.ZT)(n,e),n}(yo),Wp=(()=>((Wp||(Wp={})).filterSensitiveLog=function(n){return(0,re.pi)({},n)},Wp))(),Jp=(()=>((Jp||(Jp={})).filterSensitiveLog=function(n){return(0,re.pi)({},n)},Jp))(),OI=function(e){function n(t){var r=e.call(this,(0,re.pi)({name:"InvalidIdentityPoolConfigurationException",$fault:"client"},t))||this;return r.name="InvalidIdentityPoolConfigurationException",r.$fault="client",Object.setPrototypeOf(r,n.prototype),r}return(0,re.ZT)(n,e),n}(yo),Qp=(()=>((Qp||(Qp={})).filterSensitiveLog=function(n){return(0,re.pi)({},n)},Qp))(),Yp=(()=>((Yp||(Yp={})).filterSensitiveLog=function(n){return(0,re.pi)({},n)},Yp))(),UI=(function(e){(0,re.ZT)(function n(t){var r=e.call(this,(0,re.pi)({name:"DeveloperUserAlreadyRegisteredException",$fault:"client"},t))||this;return r.name="DeveloperUserAlreadyRegisteredException",r.$fault="client",Object.setPrototypeOf(r,n.prototype),r},e)}(yo),function(e){(0,re.ZT)(function n(t){var r=e.call(this,(0,re.pi)({name:"ConcurrentModificationException",$fault:"client"},t))||this;return r.name="ConcurrentModificationException",r.$fault="client",Object.setPrototypeOf(r,n.prototype),r},e)}(yo),function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t,r,s,a,u,p;return(0,re.Jh)(this,function(h){switch(h.label){case 0:return r=[(0,re.pi)({},e)],p={},[4,yn(e.body,n)];case 1:switch(t=re.pi.apply(void 0,r.concat([(p.body=h.sent(),p)])),a="UnknownError",a=wr(e,t.body)){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidIdentityPoolConfigurationException":case"com.amazonaws.cognitoidentity#InvalidIdentityPoolConfigurationException":return[3,6];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return[4,Zp(t,n)];case 3:case 5:case 7:case 9:case 11:case 13:case 15:case 17:throw h.sent();case 4:return[4,vr(t,n)];case 6:return[4,aT(t,n)];case 8:return[4,yr(t,n)];case 10:return[4,Ar(t,n)];case 12:return[4,Io(t,n)];case 14:return[4,Fr(t,n)];case 16:return[4,_r(t,n)];case 18:throw s=new yo({name:(u=t.body).code||u.Code||a,$fault:"client",$metadata:Jt(e)}),bi(s,u)}})})}),VI=function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t,r,s,a,u,p;return(0,re.Jh)(this,function(h){switch(h.label){case 0:return r=[(0,re.pi)({},e)],p={},[4,yn(e.body,n)];case 1:switch(t=re.pi.apply(void 0,r.concat([(p.body=h.sent(),p)])),a="UnknownError",a=wr(e,t.body)){case"ExternalServiceException":case"com.amazonaws.cognitoidentity#ExternalServiceException":return[3,2];case"InternalErrorException":case"com.amazonaws.cognitoidentity#InternalErrorException":return[3,4];case"InvalidParameterException":case"com.amazonaws.cognitoidentity#InvalidParameterException":return[3,6];case"LimitExceededException":case"com.amazonaws.cognitoidentity#LimitExceededException":return[3,8];case"NotAuthorizedException":case"com.amazonaws.cognitoidentity#NotAuthorizedException":return[3,10];case"ResourceConflictException":case"com.amazonaws.cognitoidentity#ResourceConflictException":return[3,12];case"ResourceNotFoundException":case"com.amazonaws.cognitoidentity#ResourceNotFoundException":return[3,14];case"TooManyRequestsException":case"com.amazonaws.cognitoidentity#TooManyRequestsException":return[3,16]}return[3,18];case 2:return[4,Zp(t,n)];case 3:case 5:case 7:case 9:case 11:case 13:case 15:case 17:throw h.sent();case 4:return[4,vr(t,n)];case 6:return[4,yr(t,n)];case 8:return[4,ag(t,n)];case 10:return[4,Ar(t,n)];case 12:return[4,Io(t,n)];case 14:return[4,Fr(t,n)];case 16:return[4,_r(t,n)];case 18:throw s=new yo({name:(u=t.body).code||u.Code||a,$fault:"client",$metadata:Jt(e)}),bi(s,u)}})})},Zp=function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t,r,s;return(0,re.Jh)(this,function(a){return r=XT(t=e.body,n),s=new kI((0,re.pi)({$metadata:Jt(e)},r)),[2,bi(s,t)]})})},vr=function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t,r,s;return(0,re.Jh)(this,function(a){return r=oR(t=e.body,n),s=new SI((0,re.pi)({$metadata:Jt(e)},r)),[2,bi(s,t)]})})},aT=function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t,r,s;return(0,re.Jh)(this,function(a){return r=sR(t=e.body,n),s=new OI((0,re.pi)({$metadata:Jt(e)},r)),[2,bi(s,t)]})})},yr=function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t,r,s;return(0,re.Jh)(this,function(a){return r=aR(t=e.body,n),s=new EI((0,re.pi)({$metadata:Jt(e)},r)),[2,bi(s,t)]})})},ag=function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t,r,s;return(0,re.Jh)(this,function(a){return r=lR(t=e.body,n),s=new AI((0,re.pi)({$metadata:Jt(e)},r)),[2,bi(s,t)]})})},Ar=function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t,r,s;return(0,re.Jh)(this,function(a){return r=vR(t=e.body,n),s=new PI((0,re.pi)({$metadata:Jt(e)},r)),[2,bi(s,t)]})})},Io=function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t,r,s;return(0,re.Jh)(this,function(a){return r=_R(t=e.body,n),s=new II((0,re.pi)({$metadata:Jt(e)},r)),[2,bi(s,t)]})})},Fr=function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t,r,s;return(0,re.Jh)(this,function(a){return r=bR(t=e.body,n),s=new RI((0,re.pi)({$metadata:Jt(e)},r)),[2,bi(s,t)]})})},_r=function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t,r,s;return(0,re.Jh)(this,function(a){return r=IR(t=e.body,n),s=new TI((0,re.pi)({$metadata:Jt(e)},r)),[2,bi(s,t)]})})},Rd=function(e,n){return Object.entries(e).reduce(function(t,r){var s,a=(0,re.CR)(r,2),l=a[0],u=a[1];return null===u?t:(0,re.pi)((0,re.pi)({},t),((s={})[l]=u,s))},{})},$T=function(e,n){return{AccessKeyId:or(e.AccessKeyId),Expiration:null!=e.Expiration?Rp(sC(Ed(e.Expiration))):void 0,SecretKey:or(e.SecretKey),SessionToken:or(e.SessionToken)}},XT=function(e,n){return{message:or(e.message)}},oR=function(e,n){return{message:or(e.message)}},sR=function(e,n){return{message:or(e.message)}},aR=function(e,n){return{message:or(e.message)}},lR=function(e,n){return{message:or(e.message)}},vR=function(e,n){return{message:or(e.message)}},_R=function(e,n){return{message:or(e.message)}},bR=function(e,n){return{message:or(e.message)}},IR=function(e,n){return{message:or(e.message)}},Jt=function(e){var n;return{httpStatusCode:e.statusCode,requestId:null!==(n=e.headers["x-amzn-requestid"])&&void 0!==n?n:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},br=function(e,n,t,r,s){return(0,re.mG)(void 0,void 0,void 0,function(){var a,u,S,G;return(0,re.Jh)(this,function(W){switch(W.label){case 0:return[4,e.endpoint()];case 1:return a=W.sent(),G={protocol:void 0===(u=a.protocol)?"https":u,hostname:a.hostname,port:a.port,method:"POST",path:(S=a.path).endsWith("/")?S.slice(0,-1)+t:S+t,headers:n},void 0!==r&&(G.hostname=r),void 0!==s&&(G.body=s),[2,new Er(G)]}})})},yn=function(e,n){return function(e,n){return function(e,n){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):n.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,n).then(function(t){return n.utf8Encoder(t)})}(e,n).then(function(t){return t.length?JSON.parse(t):{}})},wr=function(e,n){var r=function(a){var l=a;return l.indexOf(":")>=0&&(l=l.split(":")[0]),l.indexOf("#")>=0&&(l=l.split("#")[1]),l},s=("x-amzn-errortype",Object.keys(e.headers).find(function(u){return u.toLowerCase()==="x-amzn-errortype".toLowerCase()}));return void 0!==s?r(e.headers[s]):void 0!==n.code?r(n.code):void 0!==n.__type?r(n.__type):""},e_=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return(0,re.ZT)(n,e),n.prototype.resolveMiddleware=function(t,r,s){this.middlewareStack.use(El(r,this.serialize,this.deserialize));var a=t.concat(this.middlewareStack),S=r.requestHandler;return a.resolve(function(G){return S.handle(G.request,s||{})},{logger:r.logger,clientName:"CognitoIdentityClient",commandName:"GetIdCommand",inputFilterSensitiveLog:Qp.filterSensitiveLog,outputFilterSensitiveLog:Yp.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t,r;return(0,re.Jh)(this,function(s){return t={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetId"},r=JSON.stringify(function(e,n){return(0,re.pi)((0,re.pi)((0,re.pi)({},null!=e.AccountId&&{AccountId:e.AccountId}),null!=e.IdentityPoolId&&{IdentityPoolId:e.IdentityPoolId}),null!=e.Logins&&{Logins:Rd(e.Logins,n)})}(e,n)),[2,br(n,t,"/",void 0,r)]})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t,r,s;return(0,re.Jh)(this,function(a){switch(a.label){case 0:return e.statusCode>=300?[2,VI(e,n)]:[4,yn(e.body,n)];case 1:return t=a.sent(),r=function(e,n){return{IdentityId:or(e.IdentityId)}}(t),s=(0,re.pi)({$metadata:Jt(e)},r),[2,Promise.resolve(s)]}})})}(t,r)},n}(Al),eh=(function(e){function n(t,r){void 0===r&&(r=!0);var s=e.call(this,t)||this;return s.tryNextLink=r,s}(0,re.ZT)(n,e),n.from=function(t,r){return void 0===r&&(r=!0),Object.defineProperty(t,"tryNextLink",{value:r,configurable:!1,enumerable:!1,writable:!1}),t}}(Error),function(e){function n(t,r){void 0===r&&(r=!0);var s=e.call(this,t)||this;return s.tryNextLink=r,s.name="CredentialsProviderError",s}return(0,re.ZT)(n,e),n.from=function(t,r){return void 0===r&&(r=!0),Object.defineProperty(t,"tryNextLink",{value:r,configurable:!1,enumerable:!1,writable:!1}),t},n}(Error)),t_=function(e,n,t){var r,s,a,l=function(){return(0,re.mG)(void 0,void 0,void 0,function(){return(0,re.Jh)(this,function(p){switch(p.label){case 0:s||(s=e()),p.label=1;case 1:return p.trys.push([1,,3,4]),[4,s];case 2:return r=p.sent(),a=!0,[3,4];case 3:return s=void 0,[7];case 4:return[2,r]}})})};if(void 0===n)return function(){return(0,re.mG)(void 0,void 0,void 0,function(){return(0,re.Jh)(this,function(p){switch(p.label){case 0:return a?[3,2]:[4,l()];case 1:r=p.sent(),p.label=2;case 2:return[2,r]}})})};var u=!1;return function(){return(0,re.mG)(void 0,void 0,void 0,function(){return(0,re.Jh)(this,function(p){switch(p.label){case 0:return a?[3,2]:[4,l()];case 1:r=p.sent(),p.label=2;case 2:return u?[2,r]:t&&!t(r)?(u=!0,[2,r]):n(r)?[4,l()]:[3,4];case 3:return p.sent(),[2,r];case 4:return[2,r]}})})}},n_=function(e){function n(t){var r=e.call(this)||this;return r.input=t,r}return(0,re.ZT)(n,e),n.prototype.resolveMiddleware=function(t,r,s){this.middlewareStack.use(El(r,this.serialize,this.deserialize));var a=t.concat(this.middlewareStack),S=r.requestHandler;return a.resolve(function(G){return S.handle(G.request,s||{})},{logger:r.logger,clientName:"CognitoIdentityClient",commandName:"GetCredentialsForIdentityCommand",inputFilterSensitiveLog:Wp.filterSensitiveLog,outputFilterSensitiveLog:Jp.filterSensitiveLog})},n.prototype.serialize=function(t,r){return function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t,r;return(0,re.Jh)(this,function(s){return t={"content-type":"application/x-amz-json-1.1","x-amz-target":"AWSCognitoIdentityService.GetCredentialsForIdentity"},r=JSON.stringify(function(e,n){return(0,re.pi)((0,re.pi)((0,re.pi)({},null!=e.CustomRoleArn&&{CustomRoleArn:e.CustomRoleArn}),null!=e.IdentityId&&{IdentityId:e.IdentityId}),null!=e.Logins&&{Logins:Rd(e.Logins,n)})}(e,n)),[2,br(n,t,"/",void 0,r)]})})}(t,r)},n.prototype.deserialize=function(t,r){return function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){var t,r,s;return(0,re.Jh)(this,function(a){switch(a.label){case 0:return e.statusCode>=300?[2,UI(e,n)]:[4,yn(e.body,n)];case 1:return t=a.sent(),r=function(e,n){return{Credentials:null!=e.Credentials?$T(e.Credentials):void 0,IdentityId:or(e.IdentityId)}}(t),s=(0,re.pi)({$metadata:Jt(e)},r),[2,Promise.resolve(s)]}})})}(t,r)},n}(Al);function r_(e){return Promise.all(Object.keys(e).reduce(function(n,t){var r=e[t];return n.push("string"==typeof r?[t,r]:r().then(function(s){return[t,s]})),n},[])).then(function(n){return n.reduce(function(t,r){var s=(0,re.CR)(r,2);return t[s[0]]=s[1],t},{})})}function FR(e){var n=this;return function(){return(0,re.mG)(n,void 0,void 0,function(){var t,r,s,a,l,u,p,S,G,W,J,ve;return(0,re.Jh)(this,function(Ne){switch(Ne.label){case 0:return G=(S=e.client).send,W=n_.bind,ve={CustomRoleArn:e.customRoleArn,IdentityId:e.identityId},e.logins?[4,r_(e.logins)]:[3,2];case 1:return J=Ne.sent(),[3,3];case 2:J=void 0,Ne.label=3;case 3:return[4,G.apply(S,[new(W.apply(n_,[void 0,(ve.Logins=J,ve)]))])];case 4:return t=Ne.sent().Credentials,r=void 0===t?function MR(){throw new eh("Response from Amazon Cognito contained no credentials")}():t,a=void 0===(s=r.AccessKeyId)?function DR(){throw new eh("Response from Amazon Cognito contained no access key ID")}():s,l=r.Expiration,p=void 0===(u=r.SecretKey)?function NR(){throw new eh("Response from Amazon Cognito contained no secret key")}():u,[2,{identityId:e.identityId,accessKeyId:a,secretAccessKey:p,sessionToken:r.SessionToken,expiration:l}]}})})}}var cg="IdentityIds",jR=function(){function e(n){void 0===n&&(n="aws:cognito-identity-ids"),this.dbName=n}return e.prototype.getItem=function(n){return this.withObjectStore("readonly",function(t){var r=t.get(n);return new Promise(function(s){r.onerror=function(){return s(null)},r.onsuccess=function(){return s(r.result?r.result.value:null)}})}).catch(function(){return null})},e.prototype.removeItem=function(n){return this.withObjectStore("readwrite",function(t){var r=t.delete(n);return new Promise(function(s,a){r.onerror=function(){return a(r.error)},r.onsuccess=function(){return s()}})})},e.prototype.setItem=function(n,t){return this.withObjectStore("readwrite",function(r){var s=r.put({id:n,value:t});return new Promise(function(a,l){s.onerror=function(){return l(s.error)},s.onsuccess=function(){return a()}})})},e.prototype.getDb=function(){var n=self.indexedDB.open(this.dbName,1);return new Promise(function(t,r){n.onsuccess=function(){t(n.result)},n.onerror=function(){r(n.error)},n.onblocked=function(){r(new Error("Unable to access DB"))},n.onupgradeneeded=function(){var s=n.result;s.onerror=function(){r(new Error("Failed to create object store"))},s.createObjectStore(cg,{keyPath:"id"})}})},e.prototype.withObjectStore=function(n,t){return this.getDb().then(function(r){var s=r.transaction(cg,n);return s.oncomplete=function(){return r.close()},new Promise(function(a,l){s.onerror=function(){return l(s.error)},a(t(s.objectStore(cg)))}).catch(function(a){throw r.close(),a})})},e}(),LR=new(function(){function e(n){void 0===n&&(n={}),this.store=n}return e.prototype.getItem=function(n){return n in this.store?this.store[n]:null},e.prototype.removeItem=function(n){delete this.store[n]},e.prototype.setItem=function(n,t){this.store[n]=t},e}());function dg(e){var n=this,t=e.accountId,r=e.cache,s=void 0===r?function zR(){return"object"==typeof self&&self.indexedDB?new jR:"object"==typeof window&&window.localStorage?window.localStorage:LR}():r,a=e.client,l=e.customRoleArn,u=e.identityPoolId,p=e.logins,h=e.userIdentifier,S=void 0===h?p&&0!==Object.keys(p).length?void 0:"ANONYMOUS":h,G=S?"aws:cognito-identity-credentials:"+u+":"+S:void 0,W=function(){return(0,re.mG)(n,void 0,void 0,function(){var J,ve,Ne,Re,De,Je,et,gt,St;return(0,re.Jh)(this,function(Ft){switch(Ft.label){case 0:return(ve=G)?[4,s.getItem(G)]:[3,2];case 1:ve=Ft.sent(),Ft.label=2;case 2:return(J=ve)?[3,7]:(Je=(De=a).send,et=e_.bind,St={AccountId:t,IdentityPoolId:u},p?[4,r_(p)]:[3,4]);case 3:return gt=Ft.sent(),[3,5];case 4:gt=void 0,Ft.label=5;case 5:return[4,Je.apply(De,[new(et.apply(e_,[void 0,(St.Logins=gt,St)]))])];case 6:Ne=Ft.sent().IdentityId,Re=void 0===Ne?function UR(){throw new eh("Response from Amazon Cognito contained no identity ID")}():Ne,J=Re,G&&Promise.resolve(s.setItem(G,J)).catch(function(){}),Ft.label=7;case 7:return[2,(W=FR({client:a,customRoleArn:l,logins:p,identityId:J}))()]}})})};return function(){return W().catch(function(J){return(0,re.mG)(n,void 0,void 0,function(){return(0,re.Jh)(this,function(ve){throw G&&Promise.resolve(s.removeItem(G)).catch(function(){}),J})})})}}var XR=function(e){var n=e.endpoint;if("string"==typeof n){var r=Promise.resolve((0,e.urlParser)(n));return function(){return r}}if("object"==typeof n){var s=Promise.resolve(n);return function(){return s}}return n},s_=function(e){var n,t=function(e){if("boolean"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e}(e.useDualstackEndpoint),r=e.endpoint,s=e.useFipsEndpoint;return(0,re.pi)((0,re.pi)({},e),{tls:null===(n=e.tls)||void 0===n||n,endpoint:r?XR((0,re.pi)((0,re.pi)({},e),{endpoint:r})):function(){return function(e){return(0,re.mG)(void 0,void 0,void 0,function(){var n,t,r,a,l,u,p;return(0,re.Jh)(this,function(h){switch(h.label){case 0:return t=void 0===(n=e.tls)||n,[4,e.region()];case 1:if(r=h.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");return[4,e.useDualstackEndpoint()];case 2:return a=h.sent(),[4,e.useFipsEndpoint()];case 3:return l=h.sent(),[4,e.regionInfoProvider(r,{useDualstackEndpoint:a,useFipsEndpoint:l})];case 4:if(!(u=(null!==(p=h.sent())&&void 0!==p?p:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,e.urlParser((t?"https:":"http:")+"//"+u)]}})})}((0,re.pi)((0,re.pi)({},e),{useDualstackEndpoint:t,useFipsEndpoint:s}))},isCustomEndpoint:!!r,useDualstackEndpoint:t})},a_=function(e){return"string"==typeof e&&(e.startsWith("fips-")||e.endsWith("-fips"))},l_=function(e){return a_(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e},u_=function(e){var n=e.region,t=e.useFipsEndpoint;if(!n)throw new Error("Region is missing");return(0,re.pi)((0,re.pi)({},e),{region:function(){return(0,re.mG)(void 0,void 0,void 0,function(){var r;return(0,re.Jh)(this,function(s){switch(s.label){case 0:return"string"==typeof n?[2,l_(n)]:[4,n()];case 1:return r=s.sent(),[2,l_(r)]}})})},useFipsEndpoint:function(){return(0,re.mG)(void 0,void 0,void 0,function(){var s;return(0,re.Jh)(this,function(a){switch(a.label){case 0:return"string"!=typeof n?[3,1]:(s=n,[3,3]);case 1:return[4,n()];case 2:s=a.sent(),a.label=3;case 3:return a_(s)?[2,!0]:[2,"boolean"==typeof t?Promise.resolve(t):t()]}})})}})},c_=function(e,n){var t;void 0===e&&(e=[]);var r=n.useFipsEndpoint,s=n.useDualstackEndpoint;return null===(t=e.find(function(a){var l=a.tags;return r===l.includes("fips")&&s===l.includes("dualstack")}))||void 0===t?void 0:t.hostname},d_=function(e,n){var t,r,s,a,l,u,p=n.useFipsEndpoint,h=void 0!==p&&p,S=n.useDualstackEndpoint,G=void 0!==S&&S,W=n.signingService,J=n.regionHash,ve=n.partitionHash,Ne=function(e,n){var t,r=n.partitionHash;return null!==(t=Object.keys(r||{}).find(function(s){return r[s].regions.includes(e)}))&&void 0!==t?t:"aws"}(e,{partitionHash:ve}),Re=e in J?e:null!==(r=null===(t=ve[Ne])||void 0===t?void 0:t.endpoint)&&void 0!==r?r:e,De={useFipsEndpoint:h,useDualstackEndpoint:G},gt=function(e,n){var r=n.partitionHostname;return n.regionHostname||(r?r.replace("{region}",e):void 0)}(Re,{regionHostname:c_(null===(s=J[Re])||void 0===s?void 0:s.variants,De),partitionHostname:c_(null===(a=ve[Ne])||void 0===a?void 0:a.variants,De)});if(void 0===gt)throw new Error("Endpoint resolution failed for: "+{resolvedRegion:Re,useFipsEndpoint:h,useDualstackEndpoint:G});var St=function(e,n){var t=n.signingRegion;if(t)return t;if(n.useFipsEndpoint){var a=n.regionRegex.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),l=e.match(a);if(l)return l[0].slice(1,-1)}}(gt,{signingRegion:null===(l=J[Re])||void 0===l?void 0:l.signingRegion,regionRegex:ve[Ne].regionRegex,useFipsEndpoint:h});return(0,re.pi)((0,re.pi)({partition:Ne,signingService:W,hostname:gt},St&&{signingRegion:St}),(null===(u=J[Re])||void 0===u?void 0:u.signingService)&&{signingService:J[Re].signingService})},f_="content-length",nk={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},p_=function(e){return{applyToStack:function(n){n.add(function tk(e){var n=this;return function(t){return function(r){return(0,re.mG)(n,void 0,void 0,function(){var s,a,l,u,p,h;return(0,re.Jh)(this,function(S){if(Er.isInstance(s=r.request)&&(l=s.headers,(a=s.body)&&-1===Object.keys(l).map(function(G){return G.toLowerCase()}).indexOf(f_)))try{u=e(a),s.headers=(0,re.pi)((0,re.pi)({},s.headers),((p={})[f_]=String(u),p))}catch{s.headers=(0,re.pi)((0,re.pi)({},s.headers),((h={})["transfer-encoding"]="chunked",h))}return[2,t((0,re.pi)((0,re.pi)({},r),{request:s}))]})})}}}(e.bodyLengthChecker),nk)}}},ik={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},h_=function(e){return{applyToStack:function(n){n.add(function(e){return function(n){return function(t){return(0,re.mG)(void 0,void 0,void 0,function(){var r,s;return(0,re.Jh)(this,function(l){return Er.isInstance(t.request)?(r=t.request,(void 0===(s=(e.requestHandler.metadata||{}).handlerProtocol)?"":s).indexOf("h2")>=0&&!r.headers[":authority"]?(delete r.headers.host,r.headers[":authority"]=""):r.headers.host||(r.headers.host=r.hostname),[2,n(t)]):[2,n(t)]})})}}}(e),ik)}}},sk={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},m_=function(e){return{applyToStack:function(n){n.add(function(e,n){return function(t){return(0,re.mG)(void 0,void 0,void 0,function(){var r,s,a,l,u,p,h,S,G;return(0,re.Jh)(this,function(W){switch(W.label){case 0:return r=n.clientName,s=n.commandName,a=n.inputFilterSensitiveLog,l=n.logger,u=n.outputFilterSensitiveLog,[4,e(t)];case 1:return p=W.sent(),l?("function"==typeof l.info&&(S=(h=p.output).$metadata,G=(0,re._T)(h,["$metadata"]),l.info({clientName:r,commandName:s,input:a(t.input),output:u(G),metadata:S})),[2,p]):[2,p]}})})}},sk)}}},Tl=(()=>{return(e=Tl||(Tl={})).STANDARD="standard",e.ADAPTIVE="adaptive",Tl;var e})(),fg=Tl.STANDARD,ak=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],lk=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],uk=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],ck=[500,502,503,504],pg=function(e){var n,t;return 429===(null===(n=e.$metadata)||void 0===n?void 0:n.httpStatusCode)||lk.includes(e.name)||1==(null===(t=e.$retryable)||void 0===t?void 0:t.throttling)},hk=function(){function e(n){var t,r,s,a,l;this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=null!==(t=null==n?void 0:n.beta)&&void 0!==t?t:.7,this.minCapacity=null!==(r=null==n?void 0:n.minCapacity)&&void 0!==r?r:1,this.minFillRate=null!==(s=null==n?void 0:n.minFillRate)&&void 0!==s?s:.5,this.scaleConstant=null!==(a=null==n?void 0:n.scaleConstant)&&void 0!==a?a:.4,this.smooth=null!==(l=null==n?void 0:n.smooth)&&void 0!==l?l:.8;var u=this.getCurrentTimeInSeconds();this.lastThrottleTime=u,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}return e.prototype.getCurrentTimeInSeconds=function(){return Date.now()/1e3},e.prototype.getSendToken=function(){return(0,re.mG)(this,void 0,void 0,function(){return(0,re.Jh)(this,function(n){return[2,this.acquireTokenBucket(1)]})})},e.prototype.acquireTokenBucket=function(n){return(0,re.mG)(this,void 0,void 0,function(){var t;return(0,re.Jh)(this,function(r){switch(r.label){case 0:return this.enabled?(this.refillTokenBucket(),n>this.currentCapacity?(t=(n-this.currentCapacity)/this.fillRate*1e3,[4,new Promise(function(s){return setTimeout(s,t)})]):[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return this.currentCapacity=this.currentCapacity-n,[2]}})})},e.prototype.refillTokenBucket=function(){var n=this.getCurrentTimeInSeconds();this.lastTimestamp?(this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+(n-this.lastTimestamp)*this.fillRate),this.lastTimestamp=n):this.lastTimestamp=n},e.prototype.updateClientSendingRate=function(n){var t;if(this.updateMeasuredRate(),pg(n)){var r=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=r,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),t=this.cubicThrottle(r),this.enableTokenBucket()}else this.calculateTimeWindow(),t=this.cubicSuccess(this.getCurrentTimeInSeconds());var s=Math.min(t,2*this.measuredTxRate);this.updateTokenBucketRate(s)},e.prototype.calculateTimeWindow=function(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))},e.prototype.cubicThrottle=function(n){return this.getPrecise(n*this.beta)},e.prototype.cubicSuccess=function(n){return this.getPrecise(this.scaleConstant*Math.pow(n-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)},e.prototype.enableTokenBucket=function(){this.enabled=!0},e.prototype.updateTokenBucketRate=function(n){this.refillTokenBucket(),this.fillRate=Math.max(n,this.minFillRate),this.maxCapacity=Math.max(n,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)},e.prototype.updateMeasuredRate=function(){var n=this.getCurrentTimeInSeconds(),t=Math.floor(2*n)/2;this.requestCount++,t>this.lastTxRateBucket&&(this.measuredTxRate=this.getPrecise(this.requestCount/(t-this.lastTxRateBucket)*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=t)},e.prototype.getPrecise=function(n){return parseFloat(n.toFixed(8))},e}(),Ek=function(e,n){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,n)*e))},Ak=function(e){return!!e&&(function(e){return void 0!==e.$retryable}(e)||function(e){return ak.includes(e.name)}(e)||pg(e)||function(e){var n;return uk.includes(e.name)||ck.includes((null===(n=e.$metadata)||void 0===n?void 0:n.httpStatusCode)||0)}(e))},g_=function(){function e(n,t){var r,s,a,l,u,p,h,S,G;this.maxAttemptsProvider=n,this.mode=Tl.STANDARD,this.retryDecider=null!==(r=null==t?void 0:t.retryDecider)&&void 0!==r?r:Ak,this.delayDecider=null!==(s=null==t?void 0:t.delayDecider)&&void 0!==s?s:Ek,this.retryQuota=null!==(a=null==t?void 0:t.retryQuota)&&void 0!==a?a:(l=1,u=5,p=10,h=500,S=function(ve){return"TimeoutError"===ve.name?p:u},G=function(ve){return S(ve)<=h},Object.freeze({hasRetryTokens:G,retrieveRetryTokens:function(ve){if(!G(ve))throw new Error("No retry token available");var Ne=S(ve);return h-=Ne,Ne},releaseRetryTokens:function(ve){h+=ve??l,h=Math.min(h,500)}}))}return e.prototype.shouldRetry=function(n,t,r){return t<r&&this.retryDecider(n)&&this.retryQuota.hasRetryTokens(n)},e.prototype.getMaxAttempts=function(){return(0,re.mG)(this,void 0,void 0,function(){var n;return(0,re.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return n=r.sent(),[3,3];case 2:return r.sent(),n=3,[3,3];case 3:return[2,n]}})})},e.prototype.retry=function(n,t,r){return(0,re.mG)(this,void 0,void 0,function(){var s,a,l,u,p,h,S,G;return(0,re.Jh)(this,function(W){switch(W.label){case 0:return a=0,l=0,[4,this.getMaxAttempts()];case 1:u=W.sent(),Er.isInstance(p=t.request)&&(p.headers["amz-sdk-invocation-id"]=zn()),h=function(){var J,ve,Ne,Re,De,Je;return(0,re.Jh)(this,function(et){switch(et.label){case 0:return et.trys.push([0,4,,7]),Er.isInstance(p)&&(p.headers["amz-sdk-request"]="attempt="+(a+1)+"; max="+u),(null==r?void 0:r.beforeRequest)?[4,r.beforeRequest()]:[3,2];case 1:et.sent(),et.label=2;case 2:return[4,n(t)];case 3:return J=et.sent(),ve=J.response,Ne=J.output,(null==r?void 0:r.afterRequest)&&r.afterRequest(ve),S.retryQuota.releaseRetryTokens(s),Ne.$metadata.attempts=a+1,Ne.$metadata.totalRetryDelay=l,[2,{value:{response:ve,output:Ne}}];case 4:return Re=et.sent(),De=Pk(Re),a++,S.shouldRetry(De,a,u)?(s=S.retryQuota.retrieveRetryTokens(De),Je=S.delayDecider(pg(De)?500:100,a),l+=Je,[4,new Promise(function(gt){return setTimeout(gt,Je)})]):[3,6];case 5:return et.sent(),[2,"continue"];case 6:throw De.$metadata||(De.$metadata={}),De.$metadata.attempts=a,De.$metadata.totalRetryDelay=l,De;case 7:return[2]}})},S=this,W.label=2;case 2:return[5,h()];case 3:return"object"==typeof(G=W.sent())?[2,G.value]:[3,2];case 4:return[2]}})})},e}(),Pk=function(e){return e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):"string"==typeof e?new Error(e):new Error("AWS SDK error wrapper for "+e)},Ik=function(e){function n(t,r){var s=this,a=r??{},l=a.rateLimiter,u=(0,re._T)(a,["rateLimiter"]);return(s=e.call(this,t,u)||this).rateLimiter=l??new hk,s.mode=Tl.ADAPTIVE,s}return(0,re.ZT)(n,e),n.prototype.retry=function(t,r){return(0,re.mG)(this,void 0,void 0,function(){var s=this;return(0,re.Jh)(this,function(a){return[2,e.prototype.retry.call(this,t,r,{beforeRequest:function(){return(0,re.mG)(s,void 0,void 0,function(){return(0,re.Jh)(this,function(l){return[2,this.rateLimiter.getSendToken()]})})},afterRequest:function(l){s.rateLimiter.updateClientSendingRate(l)}})]})})},n}(g_),__=function(e){var n=Rk(e.maxAttempts);return(0,re.pi)((0,re.pi)({},e),{maxAttempts:n,retryStrategy:function(){return(0,re.mG)(void 0,void 0,void 0,function(){return(0,re.Jh)(this,function(r){switch(r.label){case 0:return e.retryStrategy?[2,e.retryStrategy]:[4,Tk(e.retryMode)];case 1:return r.sent()===Tl.ADAPTIVE?[2,new Ik(n)]:[2,new g_(n)]}})})}})},Tk=function(e){return(0,re.mG)(void 0,void 0,void 0,function(){return(0,re.Jh)(this,function(n){switch(n.label){case 0:return"string"==typeof e?[2,e]:[4,e()];case 1:return[2,n.sent()]}})})},Rk=function(e){if(void 0===e&&(e=3),"number"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e},Nk={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},b_=function(e){return{applyToStack:function(n){n.add(function(e){return function(n,t){return function(r){return(0,re.mG)(void 0,void 0,void 0,function(){var s;return(0,re.Jh)(this,function(a){switch(a.label){case 0:return[4,e.retryStrategy()];case 1:return(null==(s=a.sent())?void 0:s.mode)&&(t.userAgent=(0,re.ev)((0,re.ev)([],(0,re.CR)(t.userAgent||[])),[["cfg/retry-mode",s.mode]])),[2,s.retry(n,r)]}})})}}}(e),Nk)}}},w_=function(e){var u,n=e.credentials?C_(e.credentials):e.credentialDefaultProvider(e),t=e.signingEscapePath,r=void 0===t||t,s=e.systemClockOffset,a=void 0===s?e.systemClockOffset||0:s,l=e.sha256;return u=e.signer?Fd(e.signer):function(){return Fd(e.region)().then(function(p){return(0,re.mG)(void 0,void 0,void 0,function(){var h,S,G,W;return(0,re.Jh)(this,function(J){switch(J.label){case 0:return S=(h=e).regionInfoProvider,G=[p],W={},[4,e.useFipsEndpoint()];case 1:return W.useFipsEndpoint=J.sent(),[4,e.useDualstackEndpoint()];case 2:return[4,S.apply(h,G.concat([(W.useDualstackEndpoint=J.sent(),W)]))];case 3:return[2,[J.sent()||{},p]]}})})}).then(function(p){var h=(0,re.CR)(p,2),S=h[0],J=S.signingService;e.signingRegion=e.signingRegion||S.signingRegion||h[1],e.signingName=e.signingName||J||e.serviceId;var ve=(0,re.pi)((0,re.pi)({},e),{credentials:n,region:e.signingRegion,service:e.signingName,sha256:l,uriEscapePath:r});return new(e.signerConstructor||Kp)(ve)})},(0,re.pi)((0,re.pi)({},e),{systemClockOffset:a,signingEscapePath:r,credentials:n,signer:u})},Fd=function(e){if("object"==typeof e){var n=Promise.resolve(e);return function(){return n}}return e},C_=function(e){return"function"==typeof e?t_(e,function(n){return void 0!==n.expiration&&n.expiration.getTime()-Date.now()<3e5},function(n){return void 0!==n.expiration}):Fd(e)},x_=function(e){return new Date(Date.now()+e)},S_=function(e,n){var t=Date.parse(e);return function(e,n){return Math.abs(x_(n).getTime()-e)>=3e5}(t,n)?t-Date.now():n},E_=function(e){var n,t,r;return Sl.isInstance(e)?null!==(t=null===(n=e.headers)||void 0===n?void 0:n.date)&&void 0!==t?t:null===(r=e.headers)||void 0===r?void 0:r.Date:void 0},zk={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0};function A_(e){return(0,re.pi)((0,re.pi)({},e),{customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent})}var P_="user-agent",hg="x-amz-user-agent",Gk=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,mg=function(e){var n=(0,re.CR)(e,2),t=n[0],r=n[1],s=t.indexOf("/"),a=t.substring(0,s),l=t.substring(s+1);return"api"===a&&(l=l.toLowerCase()),[a,l,r].filter(function(u){return u&&u.length>0}).map(function(u){return null==u?void 0:u.replace(Gk,"_")}).join("/")},$k={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},T_=function(e){return{applyToStack:function(n){n.add(function(e){return function(n,t){return function(r){return(0,re.mG)(void 0,void 0,void 0,function(){var s,a,l,u,p,h,S,G,W;return(0,re.Jh)(this,function(J){switch(J.label){case 0:return Er.isInstance(s=r.request)?(a=s.headers,l=(null===(G=null==t?void 0:t.userAgent)||void 0===G?void 0:G.map(mg))||[],[4,e.defaultUserAgentProvider()]):[2,n(r)];case 1:return u=J.sent().map(mg),p=(null===(W=null==e?void 0:e.customUserAgent)||void 0===W?void 0:W.map(mg))||[],h=(0,re.ev)((0,re.ev)((0,re.ev)([],(0,re.CR)(u)),(0,re.CR)(l)),(0,re.CR)(p)).join(" "),S=(0,re.ev)((0,re.ev)([],(0,re.CR)(u.filter(function(ve){return ve.startsWith("aws-sdk-")}))),(0,re.CR)(p)).join(" "),"browser"!==e.runtime?(S&&(a[hg]=a[hg]?a[P_]+" "+S:S),a[P_]=h):a[hg]=h,[2,n((0,re.pi)((0,re.pi)({},r),{request:s}))]}})})}}}(e),$k)}}};var qk=x(7837);function Xk(e){return void 0===e&&(e=0),new Promise(function(n,t){e&&setTimeout(function(){var r=new Error("Request did not complete within "+e+" ms");r.name="TimeoutError",t(r)},e)})}for(var R_=function(){function e(n){var t=this;"function"==typeof n?this.configProvider=function(){return(0,re.mG)(t,void 0,void 0,function(){return(0,re.Jh)(this,function(r){switch(r.label){case 0:return[4,n()];case 1:return[2,r.sent()||{}]}})})}:this.config=n??{}}return e.prototype.destroy=function(){},e.prototype.handle=function(n,t){var s=(void 0===t?{}:t).abortSignal;return(0,re.mG)(this,void 0,void 0,function(){var a,l,u,p,h,S,G,W,ve,Ne,Re;return(0,re.Jh)(this,function(De){switch(De.label){case 0:return!this.config&&this.configProvider?(a=this,[4,this.configProvider()]):[3,2];case 1:a.config=De.sent(),De.label=2;case 2:return l=this.config.requestTimeout,(null==s?void 0:s.aborted)?((u=new Error("Request aborted")).name="AbortError",[2,Promise.reject(u)]):(p=n.path,n.query&&(h=function Kk(e){var n,t,r=[];try{for(var s=(0,re.XA)(Object.keys(e).sort()),a=s.next();!a.done;a=s.next()){var l=a.value,u=e[l];if(l=Il(l),Array.isArray(u))for(var p=0,h=u.length;p<h;p++)r.push(l+"="+Il(u[p]));else{var S=l;(u||"string"==typeof u)&&(S+="="+Il(u)),r.push(S)}}}catch(G){n={error:G}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(n)throw n.error}}return r.join("&")}(n.query),h&&(p+="?"+h)),W=n.protocol+"//"+n.hostname+((S=n.port)?":"+S:"")+p,ve={body:"GET"===(G=n.method)||"HEAD"===G?void 0:n.body,headers:new Headers(n.headers),method:G},"undefined"!=typeof AbortController&&(ve.signal=s),Ne=new Request(W,ve),Re=[fetch(Ne).then(function(Je){var et,gt,St=Je.headers,Ft={};try{for(var Kt=(0,re.XA)(St.entries()),Zt=Kt.next();!Zt.done;Zt=Kt.next()){var Vn=Zt.value;Ft[Vn[0]]=Vn[1]}}catch(Ai){et={error:Ai}}finally{try{Zt&&!Zt.done&&(gt=Kt.return)&&gt.call(Kt)}finally{if(et)throw et.error}}return void 0!==Je.body?{response:new Sl({headers:Ft,statusCode:Je.status,body:Je.body})}:Je.blob().then(function(Ai){return{response:new Sl({headers:Ft,statusCode:Je.status,body:Ai})}})}),Xk(l)],s&&Re.push(new Promise(function(Je,et){s.onabort=function(){var gt=new Error("Request aborted");gt.name="AbortError",et(gt)}})),[2,Promise.race(Re)])}})})},e}(),Na={},Ku=new Array(64),hi=0,Dd="A".charCodeAt(0),gg="Z".charCodeAt(0);hi+Dd<=gg;hi++){var ja=String.fromCharCode(hi+Dd);Na[ja]=hi,Ku[hi]=ja}for(hi=0,Dd="a".charCodeAt(0),gg="z".charCodeAt(0);hi+Dd<=gg;hi++)ja=String.fromCharCode(hi+Dd),Na[ja]=Md=hi+26,Ku[Md]=ja;for(hi=0;hi<10;hi++){var Md;Na[hi.toString(10)]=hi+52,ja=hi.toString(10),Na[ja]=Md=hi+52,Ku[Md]=ja}function vg(e){var n=e.length/4*3;"=="===e.substr(-2)?n-=2:"="===e.substr(-1)&&n--;for(var t=new ArrayBuffer(n),r=new DataView(t),s=0;s<e.length;s+=4){for(var a=0,l=0,u=s,p=s+3;u<=p;u++)if("="!==e[u]){if(!(e[u]in Na))throw new TypeError("Invalid character "+e[u]+" in base64 string.");a|=Na[e[u]]<<6*(p-u),l+=6}else a>>=6;var h=s/4*3;a>>=l%8;for(var S=Math.floor(l/8),G=0;G<S;G++){var W=8*(S-G-1);r.setUint8(h+G,(a&255<<W)>>W)}}return new Uint8Array(t)}function k_(e){for(var n="",t=0;t<e.length;t+=3){for(var r=0,s=0,a=t,l=Math.min(t+3,e.length);a<l;a++)r|=e[a]<<8*(l-a-1),s+=8;var u=Math.ceil(s/6);r<<=6*u-s;for(var p=1;p<=u;p++){var h=6*(u-p);n+=Ku[(r&63<<h)>>h]}n+="==".slice(0,4-u)}return n}Na["+"]=62,Ku[62]="+",Na["/"]=63,Ku[63]="/";var O_=function(e){return"function"==typeof Blob&&e instanceof Blob?function Jk(e){return(0,re.mG)(this,void 0,void 0,function(){var n,t;return(0,re.Jh)(this,function(r){switch(r.label){case 0:return[4,Yk(e)];case 1:return n=r.sent(),t=vg(n),[2,new Uint8Array(t)]}})})}(e):function Qk(e){return(0,re.mG)(this,void 0,void 0,function(){var n,t,r,s,a,l,u;return(0,re.Jh)(this,function(p){switch(p.label){case 0:n=new Uint8Array(0),t=e.getReader(),r=!1,p.label=1;case 1:return r?[3,3]:[4,t.read()];case 2:return s=p.sent(),a=s.done,(l=s.value)&&(u=n,(n=new Uint8Array(u.length+l.length)).set(u),n.set(l,u.length)),r=a,[3,1];case 3:return[2,n]}})})}(e)};function Yk(e){return new Promise(function(n,t){var r=new FileReader;r.onloadend=function(){var s;if(2!==r.readyState)return t(new Error("Reader aborted too early"));var a=null!==(s=r.result)&&void 0!==s?s:"",l=a.indexOf(",");n(a.substring(l>-1?l+1:a.length))},r.onabort=function(){return t(new Error("Read aborted"))},r.onerror=function(){return t(r.error)},r.readAsDataURL(e)})}var F_=function(e){return function(){return Promise.reject(e)}},D_=function(e){if("string"==typeof e){for(var n=e.length,t=n-1;t>=0;t--){var r=e.charCodeAt(t);r>127&&r<=2047?n++:r>2047&&r<=65535&&(n+=2)}return n}if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.size)return e.size;throw new Error("Body Length computation failed for "+e)},Zk=x(7230),M_=x.n(Zk),N_=function(e){var n=e.serviceId,t=e.clientVersion;return function(){return(0,re.mG)(void 0,void 0,void 0,function(){var r,s,a,l,u,p,h,S,G;return(0,re.Jh)(this,function(W){return r="undefined"!=typeof window&&(null===(a=null==window?void 0:window.navigator)||void 0===a?void 0:a.userAgent)?M_().parse(window.navigator.userAgent):void 0,s=[["aws-sdk-js",t],["os/"+((null===(l=null==r?void 0:r.os)||void 0===l?void 0:l.name)||"other"),null===(u=null==r?void 0:r.os)||void 0===u?void 0:u.version],["lang/js"],["md/browser",(null!==(h=null===(p=null==r?void 0:r.browser)||void 0===p?void 0:p.name)&&void 0!==h?h:"unknown")+"_"+(null!==(G=null===(S=null==r?void 0:r.browser)||void 0===S?void 0:S.version)&&void 0!==G?G:"unknown")]],n&&s.push(["api/"+n,t]),[2,s]})})}},jd=x(8995),j_=function(e){var u,n=new URL(e),t=n.hostname,r=n.pathname,s=n.port,a=n.protocol,l=n.search;return l&&(u=function e2(e){var n,t,r={};if(e=e.replace(/^\?/,""))try{for(var s=(0,re.XA)(e.split("&")),a=s.next();!a.done;a=s.next()){var u=(0,re.CR)(a.value.split("="),2),p=u[0],h=u[1],S=void 0===h?null:h;p=decodeURIComponent(p),S&&(S=decodeURIComponent(S)),p in r?Array.isArray(r[p])?r[p].push(S):r[p]=[r[p],S]:r[p]=S}}catch(G){n={error:G}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(n)throw n.error}}return r}(l)),{hostname:t,port:s?parseInt(s):void 0,protocol:a,path:r,query:u}},t2={"us-east-1":{variants:[{hostname:"cognito-identity-fips.us-east-1.amazonaws.com",tags:["fips"]}]},"us-east-2":{variants:[{hostname:"cognito-identity-fips.us-east-2.amazonaws.com",tags:["fips"]}]},"us-gov-west-1":{variants:[{hostname:"cognito-identity-fips.us-gov-west-1.amazonaws.com",tags:["fips"]}]},"us-west-2":{variants:[{hostname:"cognito-identity-fips.us-west-2.amazonaws.com",tags:["fips"]}]}},n2={aws:{regions:["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-northeast-3","ap-south-1","ap-southeast-1","ap-southeast-2","ap-southeast-3","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","fips-us-east-1","fips-us-east-2","fips-us-west-2","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"],regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",variants:[{hostname:"cognito-identity.{region}.amazonaws.com",tags:[]},{hostname:"cognito-identity-fips.{region}.amazonaws.com",tags:["fips"]},{hostname:"cognito-identity-fips.{region}.api.aws",tags:["dualstack","fips"]},{hostname:"cognito-identity.{region}.api.aws",tags:["dualstack"]}]},"aws-cn":{regions:["cn-north-1","cn-northwest-1"],regionRegex:"^cn\\-\\w+\\-\\d+$",variants:[{hostname:"cognito-identity.{region}.amazonaws.com.cn",tags:[]},{hostname:"cognito-identity-fips.{region}.amazonaws.com.cn",tags:["fips"]},{hostname:"cognito-identity-fips.{region}.api.amazonwebservices.com.cn",tags:["dualstack","fips"]},{hostname:"cognito-identity.{region}.api.amazonwebservices.com.cn",tags:["dualstack"]}]},"aws-iso":{regions:["us-iso-east-1","us-iso-west-1"],regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",variants:[{hostname:"cognito-identity.{region}.c2s.ic.gov",tags:[]},{hostname:"cognito-identity-fips.{region}.c2s.ic.gov",tags:["fips"]}]},"aws-iso-b":{regions:["us-isob-east-1"],regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",variants:[{hostname:"cognito-identity.{region}.sc2s.sgov.gov",tags:[]},{hostname:"cognito-identity-fips.{region}.sc2s.sgov.gov",tags:["fips"]}]},"aws-us-gov":{regions:["fips-us-gov-west-1","us-gov-east-1","us-gov-west-1"],regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",variants:[{hostname:"cognito-identity.{region}.amazonaws.com",tags:[]},{hostname:"cognito-identity-fips.{region}.amazonaws.com",tags:["fips"]},{hostname:"cognito-identity-fips.{region}.api.aws",tags:["dualstack","fips"]},{hostname:"cognito-identity.{region}.api.aws",tags:["dualstack"]}]}},r2=function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){return(0,re.Jh)(this,function(t){return[2,d_(e,(0,re.pi)((0,re.pi)({},n),{signingService:"cognito-identity",regionHash:t2,partitionHash:n2}))]})})},s2=["in-region","cross-region","mobile","standard","legacy"],B_=function(e){var t=(void 0===e?{}:e).defaultsMode;return t_(function(){return(0,re.mG)(void 0,void 0,void 0,function(){var r,s;return(0,re.Jh)(this,function(a){switch(a.label){case 0:return"function"!=typeof t?[3,2]:[4,t()];case 1:return s=a.sent(),[3,3];case 2:s=t,a.label=3;case 3:switch(null==(r=s)?void 0:r.toLowerCase()){case"auto":return[2,Promise.resolve(a2()?"mobile":"standard")];case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return[2,Promise.resolve(null==r?void 0:r.toLocaleLowerCase())];case void 0:return[2,Promise.resolve("legacy")];default:throw new Error('Invalid parameter for "defaultsMode", expect '+s2.join(", ")+", got "+r)}return[2]}})})})},a2=function(){var e,n,t="undefined"!=typeof window&&(null===(e=null==window?void 0:window.navigator)||void 0===e?void 0:e.userAgent)?M_().parse(window.navigator.userAgent):void 0,r=null===(n=null==t?void 0:t.platform)||void 0===n?void 0:n.type;return"tablet"===r||"mobile"===r},yg=function(e){function n(t){var r=this,s=function(e){var n,t,r,s,a,l,u,p,h,S,G,W,J,ve,Ne,Re=B_(e),De=function(){return Re().then(zv)},Je=function(e){var n,t,r,s,a;return{apiVersion:"2014-06-30",disableHostPrefix:null!==(n=null==e?void 0:e.disableHostPrefix)&&void 0!==n&&n,logger:null!==(t=null==e?void 0:e.logger)&&void 0!==t?t:{},regionInfoProvider:null!==(r=null==e?void 0:e.regionInfoProvider)&&void 0!==r?r:r2,serviceId:null!==(s=null==e?void 0:e.serviceId)&&void 0!==s?s:"Cognito Identity",urlParser:null!==(a=null==e?void 0:e.urlParser)&&void 0!==a?a:j_}}(e);return(0,re.pi)((0,re.pi)((0,re.pi)({},Je),e),{runtime:"browser",defaultsMode:Re,base64Decoder:null!==(n=null==e?void 0:e.base64Decoder)&&void 0!==n?n:vg,base64Encoder:null!==(t=null==e?void 0:e.base64Encoder)&&void 0!==t?t:k_,bodyLengthChecker:null!==(r=null==e?void 0:e.bodyLengthChecker)&&void 0!==r?r:D_,credentialDefaultProvider:null!==(s=null==e?void 0:e.credentialDefaultProvider)&&void 0!==s?s:function(et){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:null!==(a=null==e?void 0:e.defaultUserAgentProvider)&&void 0!==a?a:N_({serviceId:Je.serviceId,clientVersion:"3.54.0"}),maxAttempts:null!==(l=null==e?void 0:e.maxAttempts)&&void 0!==l?l:3,region:null!==(u=null==e?void 0:e.region)&&void 0!==u?u:F_("Region is missing"),requestHandler:null!==(p=null==e?void 0:e.requestHandler)&&void 0!==p?p:new R_(De),retryMode:null!==(h=null==e?void 0:e.retryMode)&&void 0!==h?h:function(){return(0,re.mG)(void 0,void 0,void 0,function(){return(0,re.Jh)(this,function(et){switch(et.label){case 0:return[4,De()];case 1:return[2,et.sent().retryMode||fg]}})})},sha256:null!==(S=null==e?void 0:e.sha256)&&void 0!==S?S:qk.Sha256,streamCollector:null!==(G=null==e?void 0:e.streamCollector)&&void 0!==G?G:O_,useDualstackEndpoint:null!==(W=null==e?void 0:e.useDualstackEndpoint)&&void 0!==W?W:function(){return Promise.resolve(!1)},useFipsEndpoint:null!==(J=null==e?void 0:e.useFipsEndpoint)&&void 0!==J?J:function(){return Promise.resolve(!1)},utf8Decoder:null!==(ve=null==e?void 0:e.utf8Decoder)&&void 0!==ve?ve:jd.fromUtf8,utf8Encoder:null!==(Ne=null==e?void 0:e.utf8Encoder)&&void 0!==Ne?Ne:jd.toUtf8})}(t),a=u_(s),l=s_(a),u=__(l),S=A_(w_(u));return(r=e.call(this,S)||this).config=S,r.middlewareStack.use(b_(r.config)),r.middlewareStack.use(p_(r.config)),r.middlewareStack.use(h_(r.config)),r.middlewareStack.use(m_()),r.middlewareStack.use(T_(r.config)),r}return(0,re.ZT)(n,e),n.prototype.destroy=function(){e.prototype.destroy.call(this)},n}(Dv),d2={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0};var h2=x(4400),m2=x(4247),L_=x(9879),_g=function(){function e(n){if(this.bytes=n,8!==n.byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}return e.fromNumber=function(n){if(n>0x8000000000000000||n<-0x8000000000000000)throw new Error(n+" is too large (or, if negative, too small) to represent as an Int64");for(var t=new Uint8Array(8),r=7,s=Math.abs(Math.round(n));r>-1&&s>0;r--,s/=256)t[r]=s;return n<0&&z_(t),new e(t)},e.prototype.valueOf=function(){var n=this.bytes.slice(0),t=128&n[0];return t&&z_(n),parseInt(Po(n),16)*(t?-1:1)},e.prototype.toString=function(){return String(this.valueOf())},e}();function z_(e){for(var n=0;n<8;n++)e[n]^=255;for(n=7;n>-1&&(e[n]++,0===e[n]);n--);}var g2=function(){function e(n,t){this.toUtf8=n,this.fromUtf8=t}return e.prototype.format=function(n){var t,r,s,a,l=[];try{for(var u=(0,re.XA)(Object.keys(n)),p=u.next();!p.done;p=u.next()){var h=p.value,S=this.fromUtf8(h);l.push(Uint8Array.from([S.byteLength]),S,this.formatHeaderValue(n[h]))}}catch(Re){t={error:Re}}finally{try{p&&!p.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}var G=new Uint8Array(l.reduce(function(Re,De){return Re+De.byteLength},0)),W=0;try{for(var J=(0,re.XA)(l),ve=J.next();!ve.done;ve=J.next()){var Ne=ve.value;G.set(Ne,W),W+=Ne.byteLength}}catch(Re){s={error:Re}}finally{try{ve&&!ve.done&&(a=J.return)&&a.call(J)}finally{if(s)throw s.error}}return G},e.prototype.formatHeaderValue=function(n){switch(n.type){case"boolean":return Uint8Array.from([n.value?0:1]);case"byte":return Uint8Array.from([2,n.value]);case"short":var t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,n.value,!1),new Uint8Array(t.buffer);case"integer":var r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,n.value,!1),new Uint8Array(r.buffer);case"long":var s=new Uint8Array(9);return s[0]=5,s.set(n.value.bytes,1),s;case"binary":var a=new DataView(new ArrayBuffer(3+n.value.byteLength));a.setUint8(0,6),a.setUint16(1,n.value.byteLength,!1);var l=new Uint8Array(a.buffer);return l.set(n.value,3),l;case"string":var u=this.fromUtf8(n.value),p=new DataView(new ArrayBuffer(3+u.byteLength));p.setUint8(0,7),p.setUint16(1,u.byteLength,!1);var h=new Uint8Array(p.buffer);return h.set(u,3),h;case"timestamp":var S=new Uint8Array(9);return S[0]=8,S.set(_g.fromNumber(n.value.valueOf()).bytes,1),S;case"uuid":if(!E2.test(n.value))throw new Error("Invalid UUID received: "+n.value);var G=new Uint8Array(17);return G[0]=9,G.set(function kP(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");for(var n=new Uint8Array(e.length/2),t=0;t<e.length;t+=2){var r=e.substr(t,2).toLowerCase();if(!(r in Zm))throw new Error("Cannot decode unrecognized sequence "+r+" as hexadecimal");n[t/2]=Zm[r]}return n}(n.value.replace(/\-/g,"")),1),G}},e.prototype.parse=function(n){for(var t={},r=0;r<n.byteLength;){var s=n.getUint8(r++),a=this.toUtf8(new Uint8Array(n.buffer,n.byteOffset+r,s));switch(r+=s,n.getUint8(r++)){case 0:t[a]={type:U_,value:!0};break;case 1:t[a]={type:U_,value:!1};break;case 2:t[a]={type:v2,value:n.getInt8(r++)};break;case 3:t[a]={type:y2,value:n.getInt16(r,!1)},r+=2;break;case 4:t[a]={type:_2,value:n.getInt32(r,!1)},r+=4;break;case 5:t[a]={type:b2,value:new _g(new Uint8Array(n.buffer,n.byteOffset+r,8))},r+=8;break;case 6:var l=n.getUint16(r,!1);r+=2,t[a]={type:w2,value:new Uint8Array(n.buffer,n.byteOffset+r,l)},r+=l;break;case 7:var u=n.getUint16(r,!1);r+=2,t[a]={type:C2,value:this.toUtf8(new Uint8Array(n.buffer,n.byteOffset+r,u))},r+=u;break;case 8:t[a]={type:x2,value:new Date(new _g(new Uint8Array(n.buffer,n.byteOffset+r,8)).valueOf())},r+=8;break;case 9:var p=new Uint8Array(n.buffer,n.byteOffset+r,16);r+=16,t[a]={type:S2,value:Po(p.subarray(0,4))+"-"+Po(p.subarray(4,6))+"-"+Po(p.subarray(6,8))+"-"+Po(p.subarray(8,10))+"-"+Po(p.subarray(10))};break;default:throw new Error("Unrecognized header type tag")}}return t},e}(),U_="boolean",v2="byte",y2="short",_2="integer",b2="long",w2="binary",C2="string",x2="timestamp",S2="uuid",E2=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,V_=function(){function e(n,t){this.headerMarshaller=new g2(n,t)}return e.prototype.marshall=function(n){var r=n.body,s=this.headerMarshaller.format(n.headers),a=s.byteLength+r.byteLength+16,l=new Uint8Array(a),u=new DataView(l.buffer,l.byteOffset,l.byteLength),p=new L_.Crc32;return u.setUint32(0,a,!1),u.setUint32(4,s.byteLength,!1),u.setUint32(8,p.update(l.subarray(0,8)).digest(),!1),l.set(s,12),l.set(r,s.byteLength+12),u.setUint32(a-4,p.update(l.subarray(8,a-4)).digest(),!1),l},e.prototype.unmarshall=function(n){var t=function P2(e){var n=e.byteLength,t=e.byteOffset,r=e.buffer;if(n<16)throw new Error("Provided message too short to accommodate event stream message overhead");var s=new DataView(r,t,n),a=s.getUint32(0,!1);if(n!==a)throw new Error("Reported message length does not match received message length");var l=s.getUint32(4,!1),u=s.getUint32(8,!1),p=s.getUint32(n-4,!1),h=(new L_.Crc32).update(new Uint8Array(r,t,8));if(u!==h.digest())throw new Error("The prelude checksum specified in the message ("+u+") does not match the calculated CRC32 checksum ("+h.digest()+")");if(h.update(new Uint8Array(r,t+8,n-12)),p!==h.digest())throw new Error("The message checksum ("+h.digest()+") did not match the expected value of "+p);return{headers:new DataView(r,t+8+4,l),body:new Uint8Array(r,t+8+4+l,a-l-16)}}(n),s=t.body;return{headers:this.headerMarshaller.parse(t.headers),body:s}},e.prototype.formatHeaders=function(n){return this.headerMarshaller.format(n)},e}(),R2=function(){function e(n){var t=n.utf8Encoder;this.eventMarshaller=new V_(t,n.utf8Decoder),this.utfEncoder=t}return e.prototype.deserialize=function(n,t){var r=function I2(e){var n,t=0,r=0,s=null,a=null,l=function(p){if("number"!=typeof p)throw new Error("Attempted to allocate an event message where size was not a number: "+p);t=p,r=4,s=new Uint8Array(p),new DataView(s.buffer).setUint32(0,p,!1)};return(n={})[Symbol.asyncIterator]=function(){return(0,re.FC)(this,arguments,function(){var p,h,S,W,J,ve,Ne,Re;return(0,re.Jh)(this,function(De){switch(De.label){case 0:p=e[Symbol.asyncIterator](),De.label=1;case 1:return[4,(0,re.qq)(p.next())];case 2:return h=De.sent(),S=h.value,h.done?t?[3,4]:[4,(0,re.qq)(void 0)]:[3,10];case 3:return[2,De.sent()];case 4:return t!==r?[3,7]:[4,(0,re.qq)(s)];case 5:return[4,De.sent()];case 6:return De.sent(),[3,8];case 7:throw new Error("Truncated event message received.");case 8:return[4,(0,re.qq)(void 0)];case 9:return[2,De.sent()];case 10:W=S.length,J=0,De.label=11;case 11:if(!(J<W))return[3,15];if(!s){if(ve=W-J,a||(a=new Uint8Array(4)),Ne=Math.min(4-r,ve),a.set(S.slice(J,J+Ne),r),J+=Ne,(r+=Ne)<4)return[3,15];l(new DataView(a.buffer).getUint32(0,!1)),a=null}return Re=Math.min(t-r,W-J),s.set(S.slice(J,J+Re),r),r+=Re,J+=Re,t&&t===r?[4,(0,re.qq)(s)]:[3,14];case 12:return[4,De.sent()];case 13:De.sent(),s=null,t=0,r=0,De.label=14;case 14:return[3,11];case 15:return[3,1];case 16:return[2]}})})},n}(n),s=function T2(e,n){var t;return(t={})[Symbol.asyncIterator]=function(){return(0,re.FC)(this,arguments,function(){var r,s,l,u,p,h,G,W,ve,Ne,Re,De,Je,et;return(0,re.Jh)(this,function(gt){switch(gt.label){case 0:gt.trys.push([0,12,13,18]),r=(0,re.KL)(e),gt.label=1;case 1:return[4,(0,re.qq)(r.next())];case 2:if((s=gt.sent()).done)return[3,11];if(l=n.eventMarshaller.unmarshall(s.value),"error"!==(u=l.headers[":message-type"].value))return[3,3];throw(p=new Error(l.headers[":error-message"].value||"UnknownError")).name=l.headers[":error-code"].value,p;case 3:return"exception"!==u?[3,5]:((Re={})[h=l.headers[":exception-type"].value]=l,[4,(0,re.qq)(n.deserializer(Re))]);case 4:throw(G=gt.sent()).$unknown?((W=new Error(n.toUtf8(l.body))).name=h,W):G[h];case 5:return"event"!==u?[3,9]:((De={})[l.headers[":event-type"].value]=l,[4,(0,re.qq)(n.deserializer(De))]);case 6:return(ve=gt.sent()).$unknown?[3,10]:[4,(0,re.qq)(ve)];case 7:return[4,gt.sent()];case 8:return gt.sent(),[3,10];case 9:throw Error("Unrecognizable event type: "+l.headers[":event-type"].value);case 10:return[3,1];case 11:return[3,18];case 12:return Ne=gt.sent(),Je={error:Ne},[3,18];case 13:return gt.trys.push([13,,16,17]),s&&!s.done&&(et=r.return)?[4,(0,re.qq)(et.call(r))]:[3,15];case 14:gt.sent(),gt.label=15;case 15:return[3,17];case 16:if(Je)throw Je.error;return[7];case 17:return[7];case 18:return[2]}})})},t}(r,{eventMarshaller:this.eventMarshaller,deserializer:t,toUtf8:this.utfEncoder});return s},e.prototype.serialize=function(n,t){var r,s=this;return(r={})[Symbol.asyncIterator]=function(){return(0,re.FC)(this,arguments,function(){var l,u,h,S,G,W;return(0,re.Jh)(this,function(J){switch(J.label){case 0:J.trys.push([0,7,8,13]),l=(0,re.KL)(n),J.label=1;case 1:return[4,(0,re.qq)(l.next())];case 2:return(u=J.sent()).done?[3,6]:(h=s.eventMarshaller.marshall(t(u.value)),[4,(0,re.qq)(h)]);case 3:return[4,J.sent()];case 4:J.sent(),J.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return S=J.sent(),G={error:S},[3,13];case 8:return J.trys.push([8,,11,12]),u&&!u.done&&(W=l.return)?[4,(0,re.qq)(W.call(l))]:[3,10];case 9:J.sent(),J.label=10;case 10:return[3,12];case 11:if(G)throw G.error;return[7];case 12:return[7];case 13:return[4,(0,re.qq)(new Uint8Array(0))];case 14:return[4,J.sent()];case 15:return J.sent(),[2]}})})},r},e}(),F2=function(){function e(n){var t=n.utf8Encoder,r=n.utf8Decoder;this.eventMarshaller=new V_(t,r),this.universalMarshaller=new R2({utf8Decoder:r,utf8Encoder:t})}return e.prototype.deserialize=function(n,t){var r=D2(n)?function(e){var n;return(n={})[Symbol.asyncIterator]=function(){return(0,re.FC)(this,arguments,function(){var t,r,a;return(0,re.Jh)(this,function(l){switch(l.label){case 0:t=e.getReader(),l.label=1;case 1:l.trys.push([1,,9,10]),l.label=2;case 2:return[4,(0,re.qq)(t.read())];case 3:return r=l.sent(),a=r.value,r.done?[4,(0,re.qq)(void 0)]:[3,5];case 4:return[2,l.sent()];case 5:return[4,(0,re.qq)(a)];case 6:return[4,l.sent()];case 7:return l.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})},n}(n):n;return this.universalMarshaller.deserialize(r,t)},e.prototype.serialize=function(n,t){var r=this.universalMarshaller.serialize(n,t);return"function"==typeof ReadableStream?function(e){var n=e[Symbol.asyncIterator]();return new ReadableStream({pull:function(t){return(0,re.mG)(this,void 0,void 0,function(){var r,a;return(0,re.Jh)(this,function(l){switch(l.label){case 0:return[4,n.next()];case 1:return r=l.sent(),a=r.value,r.done?[2,t.close()]:(t.enqueue(a),[2])}})})}})}(r):r},e}(),D2=function(e){return"function"==typeof ReadableStream&&e instanceof ReadableStream},M2=function(e){return new F2(e)};function N2(e,n,t){return void 0===t&&(t=1048576),new Promise(function(r,s){var a=new FileReader;a.addEventListener("error",s),a.addEventListener("abort",s);var l=e.size,u=0;function p(){u>=l?r():a.readAsArrayBuffer(e.slice(u,Math.min(l,u+t)))}a.addEventListener("load",function(h){var S=h.target.result;n(new Uint8Array(S)),u+=S.byteLength,p()}),p()})}var j2=function(n,t){return(0,re.mG)(this,void 0,void 0,function(){var r;return(0,re.Jh)(this,function(s){switch(s.label){case 0:return r=new n,[4,N2(t,function(a){r.update(a)})];case 1:return s.sent(),[2,r.digest()]}})})},L2=[1732584193,4023233417,2562383102,271733878],z2=function(){function e(){this.state=Uint32Array.from(L2),this.buffer=new DataView(new ArrayBuffer(64)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(n){if(!function U2(e){return"string"==typeof e?0===e.length:0===e.byteLength}(n)){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=function G2(e){return"string"==typeof e?(0,jd.fromUtf8)(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}(n),r=0,s=t.byteLength;for(this.bytesHashed+=s;s>0;)this.buffer.setUint8(this.bufferLength++,t[r++]),s--,64===this.bufferLength&&(this.hashBuffer(),this.bufferLength=0)}},e.prototype.digest=function(){return(0,re.mG)(this,void 0,void 0,function(){var n,t,r,a,l,u;return(0,re.Jh)(this,function(p){if(!this.finished){if(r=(n=this).bufferLength,a=8*n.bytesHashed,(t=n.buffer).setUint8(this.bufferLength++,128),r%64>=56){for(u=this.bufferLength;u<64;u++)t.setUint8(u,0);this.hashBuffer(),this.bufferLength=0}for(u=this.bufferLength;u<56;u++)t.setUint8(u,0);t.setUint32(56,a>>>0,!0),t.setUint32(60,Math.floor(a/4294967296),!0),this.hashBuffer(),this.finished=!0}for(l=new DataView(new ArrayBuffer(16)),u=0;u<4;u++)l.setUint32(4*u,this.state[u],!0);return[2,new Uint8Array(l.buffer,l.byteOffset,l.byteLength)]})})},e.prototype.hashBuffer=function(){var t=this.buffer,r=this.state,s=r[0],a=r[1],l=r[2],u=r[3];s=wi(s,a,l,u,t.getUint32(0,!0),7,3614090360),u=wi(u,s,a,l,t.getUint32(4,!0),12,3905402710),l=wi(l,u,s,a,t.getUint32(8,!0),17,606105819),a=wi(a,l,u,s,t.getUint32(12,!0),22,3250441966),s=wi(s,a,l,u,t.getUint32(16,!0),7,4118548399),u=wi(u,s,a,l,t.getUint32(20,!0),12,1200080426),l=wi(l,u,s,a,t.getUint32(24,!0),17,2821735955),a=wi(a,l,u,s,t.getUint32(28,!0),22,4249261313),s=wi(s,a,l,u,t.getUint32(32,!0),7,1770035416),u=wi(u,s,a,l,t.getUint32(36,!0),12,2336552879),l=wi(l,u,s,a,t.getUint32(40,!0),17,4294925233),a=wi(a,l,u,s,t.getUint32(44,!0),22,2304563134),s=wi(s,a,l,u,t.getUint32(48,!0),7,1804603682),u=wi(u,s,a,l,t.getUint32(52,!0),12,4254626195),l=wi(l,u,s,a,t.getUint32(56,!0),17,2792965006),s=Ci(s,a=wi(a,l,u,s,t.getUint32(60,!0),22,1236535329),l,u,t.getUint32(4,!0),5,4129170786),u=Ci(u,s,a,l,t.getUint32(24,!0),9,3225465664),l=Ci(l,u,s,a,t.getUint32(44,!0),14,643717713),a=Ci(a,l,u,s,t.getUint32(0,!0),20,3921069994),s=Ci(s,a,l,u,t.getUint32(20,!0),5,3593408605),u=Ci(u,s,a,l,t.getUint32(40,!0),9,38016083),l=Ci(l,u,s,a,t.getUint32(60,!0),14,3634488961),a=Ci(a,l,u,s,t.getUint32(16,!0),20,3889429448),s=Ci(s,a,l,u,t.getUint32(36,!0),5,568446438),u=Ci(u,s,a,l,t.getUint32(56,!0),9,3275163606),l=Ci(l,u,s,a,t.getUint32(12,!0),14,4107603335),a=Ci(a,l,u,s,t.getUint32(32,!0),20,1163531501),s=Ci(s,a,l,u,t.getUint32(52,!0),5,2850285829),u=Ci(u,s,a,l,t.getUint32(8,!0),9,4243563512),l=Ci(l,u,s,a,t.getUint32(28,!0),14,1735328473),s=xi(s,a=Ci(a,l,u,s,t.getUint32(48,!0),20,2368359562),l,u,t.getUint32(20,!0),4,4294588738),u=xi(u,s,a,l,t.getUint32(32,!0),11,2272392833),l=xi(l,u,s,a,t.getUint32(44,!0),16,1839030562),a=xi(a,l,u,s,t.getUint32(56,!0),23,4259657740),s=xi(s,a,l,u,t.getUint32(4,!0),4,2763975236),u=xi(u,s,a,l,t.getUint32(16,!0),11,1272893353),l=xi(l,u,s,a,t.getUint32(28,!0),16,4139469664),a=xi(a,l,u,s,t.getUint32(40,!0),23,3200236656),s=xi(s,a,l,u,t.getUint32(52,!0),4,681279174),u=xi(u,s,a,l,t.getUint32(0,!0),11,3936430074),l=xi(l,u,s,a,t.getUint32(12,!0),16,3572445317),a=xi(a,l,u,s,t.getUint32(24,!0),23,76029189),s=xi(s,a,l,u,t.getUint32(36,!0),4,3654602809),u=xi(u,s,a,l,t.getUint32(48,!0),11,3873151461),l=xi(l,u,s,a,t.getUint32(60,!0),16,530742520),s=Si(s,a=xi(a,l,u,s,t.getUint32(8,!0),23,3299628645),l,u,t.getUint32(0,!0),6,4096336452),u=Si(u,s,a,l,t.getUint32(28,!0),10,1126891415),l=Si(l,u,s,a,t.getUint32(56,!0),15,2878612391),a=Si(a,l,u,s,t.getUint32(20,!0),21,4237533241),s=Si(s,a,l,u,t.getUint32(48,!0),6,1700485571),u=Si(u,s,a,l,t.getUint32(12,!0),10,2399980690),l=Si(l,u,s,a,t.getUint32(40,!0),15,4293915773),a=Si(a,l,u,s,t.getUint32(4,!0),21,2240044497),s=Si(s,a,l,u,t.getUint32(32,!0),6,1873313359),u=Si(u,s,a,l,t.getUint32(60,!0),10,4264355552),l=Si(l,u,s,a,t.getUint32(24,!0),15,2734768916),a=Si(a,l,u,s,t.getUint32(52,!0),21,1309151649),s=Si(s,a,l,u,t.getUint32(16,!0),6,4149444226),u=Si(u,s,a,l,t.getUint32(44,!0),10,3174756917),l=Si(l,u,s,a,t.getUint32(8,!0),15,718787259),a=Si(a,l,u,s,t.getUint32(36,!0),21,3951481745),r[0]=s+r[0]&4294967295,r[1]=a+r[1]&4294967295,r[2]=l+r[2]&4294967295,r[3]=u+r[3]&4294967295},e}();function th(e,n,t,r,s,a){return((n=(n+e&4294967295)+(r+a&4294967295)&4294967295)<<s|n>>>32-s)+t&4294967295}function wi(e,n,t,r,s,a,l){return th(n&t|~n&r,e,n,s,a,l)}function Ci(e,n,t,r,s,a,l){return th(n&r|t&~r,e,n,s,a,l)}function xi(e,n,t,r,s,a,l){return th(n^t^r,e,n,s,a,l)}function Si(e,n,t,r,s,a,l){return th(t^(n|~r),e,n,s,a,l)}var V2=function(e,n){var t=n.base64Encoder,r=n.bodyLengthChecker,s=n.checksumAlgorithmFn,a=n.checksumLocationName,l=n.streamHasher,u=void 0!==t&&void 0!==r&&void 0!==s&&void 0!==a&&void 0!==l,p=u?l(s,e):void 0,h=e.getReader();return new ReadableStream({pull:function(S){return(0,re.mG)(this,void 0,void 0,function(){var G,W,ve,Ne;return(0,re.Jh)(this,function(Re){switch(Re.label){case 0:return[4,h.read()];case 1:return G=Re.sent(),W=G.value,G.done?(S.enqueue("0\r\n"),u?(Ne=t,[4,p]):[3,3]):[3,4];case 2:ve=Ne.apply(void 0,[Re.sent()]),S.enqueue(a+":"+ve+"\r\n"),S.enqueue("\r\n"),Re.label=3;case 3:return S.close(),[3,5];case 4:S.enqueue((r(W)||0).toString(16)+"\r\n"+W+"\r\n"),Re.label=5;case 5:return[2]}})})}})},$2={"af-south-1":{variants:[{hostname:"s3.dualstack.af-south-1.amazonaws.com",tags:["dualstack"]}]},"ap-east-1":{variants:[{hostname:"s3.dualstack.ap-east-1.amazonaws.com",tags:["dualstack"]}]},"ap-northeast-1":{variants:[{hostname:"s3.ap-northeast-1.amazonaws.com",tags:[]},{hostname:"s3.dualstack.ap-northeast-1.amazonaws.com",tags:["dualstack"]}]},"ap-northeast-2":{variants:[{hostname:"s3.dualstack.ap-northeast-2.amazonaws.com",tags:["dualstack"]}]},"ap-northeast-3":{variants:[{hostname:"s3.dualstack.ap-northeast-3.amazonaws.com",tags:["dualstack"]}]},"ap-south-1":{variants:[{hostname:"s3.dualstack.ap-south-1.amazonaws.com",tags:["dualstack"]}]},"ap-southeast-1":{variants:[{hostname:"s3.ap-southeast-1.amazonaws.com",tags:[]},{hostname:"s3.dualstack.ap-southeast-1.amazonaws.com",tags:["dualstack"]}]},"ap-southeast-2":{variants:[{hostname:"s3.ap-southeast-2.amazonaws.com",tags:[]},{hostname:"s3.dualstack.ap-southeast-2.amazonaws.com",tags:["dualstack"]}]},"ap-southeast-3":{variants:[{hostname:"s3.dualstack.ap-southeast-3.amazonaws.com",tags:["dualstack"]}]},"aws-global":{variants:[{hostname:"s3.amazonaws.com",tags:[]}],signingRegion:"us-east-1"},"ca-central-1":{variants:[{hostname:"s3-fips.ca-central-1.amazonaws.com",tags:["fips"]},{hostname:"s3-fips.dualstack.ca-central-1.amazonaws.com",tags:["dualstack","fips"]},{hostname:"s3.dualstack.ca-central-1.amazonaws.com",tags:["dualstack"]}]},"cn-north-1":{variants:[{hostname:"s3.dualstack.cn-north-1.amazonaws.com.cn",tags:["dualstack"]}]},"cn-northwest-1":{variants:[{hostname:"s3.dualstack.cn-northwest-1.amazonaws.com.cn",tags:["dualstack"]}]},"eu-central-1":{variants:[{hostname:"s3.dualstack.eu-central-1.amazonaws.com",tags:["dualstack"]}]},"eu-north-1":{variants:[{hostname:"s3.dualstack.eu-north-1.amazonaws.com",tags:["dualstack"]}]},"eu-south-1":{variants:[{hostname:"s3.dualstack.eu-south-1.amazonaws.com",tags:["dualstack"]}]},"eu-west-1":{variants:[{hostname:"s3.eu-west-1.amazonaws.com",tags:[]},{hostname:"s3.dualstack.eu-west-1.amazonaws.com",tags:["dualstack"]}]},"eu-west-2":{variants:[{hostname:"s3.dualstack.eu-west-2.amazonaws.com",tags:["dualstack"]}]},"eu-west-3":{variants:[{hostname:"s3.dualstack.eu-west-3.amazonaws.com",tags:["dualstack"]}]},"me-south-1":{variants:[{hostname:"s3.dualstack.me-south-1.amazonaws.com",tags:["dualstack"]}]},"s3-external-1":{variants:[{hostname:"s3-external-1.amazonaws.com",tags:[]}],signingRegion:"us-east-1"},"sa-east-1":{variants:[{hostname:"s3.sa-east-1.amazonaws.com",tags:[]},{hostname:"s3.dualstack.sa-east-1.amazonaws.com",tags:["dualstack"]}]},"us-east-1":{variants:[{hostname:"s3.us-east-1.amazonaws.com",tags:[]},{hostname:"s3-fips.dualstack.us-east-1.amazonaws.com",tags:["dualstack","fips"]},{hostname:"s3-fips.us-east-1.amazonaws.com",tags:["fips"]},{hostname:"s3.dualstack.us-east-1.amazonaws.com",tags:["dualstack"]}]},"us-east-2":{variants:[{hostname:"s3-fips.dualstack.us-east-2.amazonaws.com",tags:["dualstack","fips"]},{hostname:"s3-fips.us-east-2.amazonaws.com",tags:["fips"]},{hostname:"s3.dualstack.us-east-2.amazonaws.com",tags:["dualstack"]}]},"us-gov-east-1":{variants:[{hostname:"s3.us-gov-east-1.amazonaws.com",tags:[]},{hostname:"s3-fips.us-gov-east-1.amazonaws.com",tags:["fips"]},{hostname:"s3.dualstack.us-gov-east-1.amazonaws.com",tags:["dualstack"]}]},"us-gov-west-1":{variants:[{hostname:"s3.us-gov-west-1.amazonaws.com",tags:[]},{hostname:"s3-fips.us-gov-west-1.amazonaws.com",tags:["fips"]},{hostname:"s3.dualstack.us-gov-west-1.amazonaws.com",tags:["dualstack"]}]},"us-west-1":{variants:[{hostname:"s3.us-west-1.amazonaws.com",tags:[]},{hostname:"s3-fips.dualstack.us-west-1.amazonaws.com",tags:["dualstack","fips"]},{hostname:"s3-fips.us-west-1.amazonaws.com",tags:["fips"]},{hostname:"s3.dualstack.us-west-1.amazonaws.com",tags:["dualstack"]}]},"us-west-2":{variants:[{hostname:"s3.us-west-2.amazonaws.com",tags:[]},{hostname:"s3-fips.dualstack.us-west-2.amazonaws.com",tags:["dualstack","fips"]},{hostname:"s3-fips.us-west-2.amazonaws.com",tags:["fips"]},{hostname:"s3.dualstack.us-west-2.amazonaws.com",tags:["dualstack"]}]}},H2={aws:{regions:["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-northeast-3","ap-south-1","ap-southeast-1","ap-southeast-2","ap-southeast-3","aws-global","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","fips-ca-central-1","fips-us-east-1","fips-us-east-2","fips-us-west-1","fips-us-west-2","me-south-1","s3-external-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"],regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",variants:[{hostname:"s3.{region}.amazonaws.com",tags:[]},{hostname:"s3-fips.{region}.amazonaws.com",tags:["fips"]},{hostname:"s3-fips.dualstack.{region}.amazonaws.com",tags:["dualstack","fips"]},{hostname:"s3.dualstack.{region}.amazonaws.com",tags:["dualstack"]}]},"aws-cn":{regions:["cn-north-1","cn-northwest-1"],regionRegex:"^cn\\-\\w+\\-\\d+$",variants:[{hostname:"s3.{region}.amazonaws.com.cn",tags:[]},{hostname:"s3-fips.{region}.amazonaws.com.cn",tags:["fips"]},{hostname:"s3-fips.{region}.api.amazonwebservices.com.cn",tags:["dualstack","fips"]},{hostname:"s3.dualstack.{region}.amazonaws.com.cn",tags:["dualstack"]}]},"aws-iso":{regions:["us-iso-east-1","us-iso-west-1"],regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",variants:[{hostname:"s3.{region}.c2s.ic.gov",tags:[]},{hostname:"s3-fips.{region}.c2s.ic.gov",tags:["fips"]}]},"aws-iso-b":{regions:["us-isob-east-1"],regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",variants:[{hostname:"s3.{region}.sc2s.sgov.gov",tags:[]},{hostname:"s3-fips.{region}.sc2s.sgov.gov",tags:["fips"]}]},"aws-us-gov":{regions:["fips-us-gov-east-1","fips-us-gov-west-1","us-gov-east-1","us-gov-west-1"],regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",variants:[{hostname:"s3.{region}.amazonaws.com",tags:[]},{hostname:"s3-fips.{region}.amazonaws.com",tags:["fips"]},{hostname:"s3-fips.dualstack.{region}.amazonaws.com",tags:["dualstack","fips"]},{hostname:"s3.dualstack.{region}.amazonaws.com",tags:["dualstack"]}]}},q2=function(e,n){return(0,re.mG)(void 0,void 0,void 0,function(){return(0,re.Jh)(this,function(t){return[2,d_(e,(0,re.pi)((0,re.pi)({},n),{signingService:"s3",regionHash:$2,partitionHash:H2}))]})})},W2=function(e){function n(t){var r=this,s=function(e){var n,t,r,s,a,l,u,p,h,S,G,W,J,ve,Ne,Re,De,Je,et,gt,St=B_(e),Ft=function(){return St().then(zv)},Kt=function(e){var n,t,r,s,a,l,u,p;return{apiVersion:"2006-03-01",disableHostPrefix:null!==(n=null==e?void 0:e.disableHostPrefix)&&void 0!==n&&n,logger:null!==(t=null==e?void 0:e.logger)&&void 0!==t?t:{},regionInfoProvider:null!==(r=null==e?void 0:e.regionInfoProvider)&&void 0!==r?r:q2,serviceId:null!==(s=null==e?void 0:e.serviceId)&&void 0!==s?s:"S3",signerConstructor:null!==(a=null==e?void 0:e.signerConstructor)&&void 0!==a?a:rI,signingEscapePath:null!==(l=null==e?void 0:e.signingEscapePath)&&void 0!==l&&l,urlParser:null!==(u=null==e?void 0:e.urlParser)&&void 0!==u?u:j_,useArnRegion:null!==(p=null==e?void 0:e.useArnRegion)&&void 0!==p&&p}}(e);return(0,re.pi)((0,re.pi)((0,re.pi)({},Kt),e),{runtime:"browser",defaultsMode:St,base64Decoder:null!==(n=null==e?void 0:e.base64Decoder)&&void 0!==n?n:vg,base64Encoder:null!==(t=null==e?void 0:e.base64Encoder)&&void 0!==t?t:k_,bodyLengthChecker:null!==(r=null==e?void 0:e.bodyLengthChecker)&&void 0!==r?r:D_,credentialDefaultProvider:null!==(s=null==e?void 0:e.credentialDefaultProvider)&&void 0!==s?s:function(Zt){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:null!==(a=null==e?void 0:e.defaultUserAgentProvider)&&void 0!==a?a:N_({serviceId:Kt.serviceId,clientVersion:"3.54.0"}),eventStreamSerdeProvider:null!==(l=null==e?void 0:e.eventStreamSerdeProvider)&&void 0!==l?l:M2,getAwsChunkedEncodingStream:null!==(u=null==e?void 0:e.getAwsChunkedEncodingStream)&&void 0!==u?u:V2,maxAttempts:null!==(p=null==e?void 0:e.maxAttempts)&&void 0!==p?p:3,md5:null!==(h=null==e?void 0:e.md5)&&void 0!==h?h:z2,region:null!==(S=null==e?void 0:e.region)&&void 0!==S?S:F_("Region is missing"),requestHandler:null!==(G=null==e?void 0:e.requestHandler)&&void 0!==G?G:new R_(Ft),retryMode:null!==(W=null==e?void 0:e.retryMode)&&void 0!==W?W:function(){return(0,re.mG)(void 0,void 0,void 0,function(){return(0,re.Jh)(this,function(Zt){switch(Zt.label){case 0:return[4,Ft()];case 1:return[2,Zt.sent().retryMode||fg]}})})},sha1:null!==(J=null==e?void 0:e.sha1)&&void 0!==J?J:h2.Sha1,sha256:null!==(ve=null==e?void 0:e.sha256)&&void 0!==ve?ve:m2.Sha256,streamCollector:null!==(Ne=null==e?void 0:e.streamCollector)&&void 0!==Ne?Ne:O_,streamHasher:null!==(Re=null==e?void 0:e.streamHasher)&&void 0!==Re?Re:j2,useDualstackEndpoint:null!==(De=null==e?void 0:e.useDualstackEndpoint)&&void 0!==De?De:function(){return Promise.resolve(!1)},useFipsEndpoint:null!==(Je=null==e?void 0:e.useFipsEndpoint)&&void 0!==Je?Je:function(){return Promise.resolve(!1)},utf8Decoder:null!==(et=null==e?void 0:e.utf8Decoder)&&void 0!==et?et:jd.fromUtf8,utf8Encoder:null!==(gt=null==e?void 0:e.utf8Encoder)&&void 0!==gt?gt:jd.toUtf8})}(t),a=u_(s),l=s_(a),u=__(l),S=function ws(e){var n=e.bucketEndpoint,t=void 0!==n&&n,r=e.forcePathStyle,s=void 0!==r&&r,a=e.useAccelerateEndpoint,l=void 0!==a&&a,u=e.useArnRegion,p=void 0!==u&&u,h=e.disableMultiregionAccessPoints,S=void 0!==h&&h;return(0,re.pi)((0,re.pi)({},e),{bucketEndpoint:t,forcePathStyle:s,useAccelerateEndpoint:l,useArnRegion:"function"==typeof p?p:function(){return Promise.resolve(p)},disableMultiregionAccessPoints:"function"==typeof S?S:function(){return Promise.resolve(S)}})}(w_(u)),W=function(e){return(0,re.pi)((0,re.pi)({},e),{eventStreamMarshaller:e.eventStreamSerdeProvider(e)})}(A_(S));return(r=e.call(this,W)||this).config=W,r.middlewareStack.use(b_(r.config)),r.middlewareStack.use(p_(r.config)),r.middlewareStack.use(h_(r.config)),r.middlewareStack.use(m_()),r.middlewareStack.use(function(e){return{applyToStack:function(n){n.addRelativeTo(function(e){return function(n,t){return function(r){return(0,re.mG)(this,void 0,void 0,function(){var s,a,l,u,p,h;return(0,re.Jh)(this,function(S){switch(S.label){case 0:return Er.isInstance(r.request)?[4,e.signer()]:[2,n(r)];case 1:return s=S.sent(),l=n,u=[(0,re.pi)({},r)],h={},[4,s.sign(r.request,{signingDate:x_(e.systemClockOffset),signingRegion:t.signing_region,signingService:t.signing_service})];case 2:return[4,l.apply(void 0,[re.pi.apply(void 0,u.concat([(h.request=S.sent(),h)]))]).catch(function(G){var W,J=null!==(W=G.ServerTime)&&void 0!==W?W:E_(G.$response);throw J&&(e.systemClockOffset=S_(J,e.systemClockOffset)),G})];case 3:return a=S.sent(),(p=E_(a.response))&&(e.systemClockOffset=S_(p,e.systemClockOffset)),[2,a]}})})}}}(e),zk)}}}(r.config)),r.middlewareStack.use({applyToStack:function(n){n.add(function dI(){var e=this;return function(n){return function(t){return(0,re.mG)(e,void 0,void 0,function(){var r,s;return(0,re.Jh)(this,function(a){if("string"==typeof(r=t.input.Bucket)&&!bs(r)&&r.indexOf("/")>=0)throw(s=new Error("Bucket name shouldn't contain '/', received '"+r+"'")).name="InvalidBucketName",s;return[2,n((0,re.pi)({},t))]})})}}}(),fI)}}),r.middlewareStack.use(function(e){return{applyToStack:function(n){n.add(function(e){return function(n){return function(t){return(0,re.mG)(void 0,void 0,void 0,function(){var r,s;return(0,re.Jh)(this,function(a){switch(a.label){case 0:return!Er.isInstance(r=t.request)||e.isCustomEndpoint?[2,n((0,re.pi)({},t))]:"s3.amazonaws.com"!==r.hostname?[3,1]:(r.hostname="s3.us-east-1.amazonaws.com",[3,3]);case 1:return s="aws-global",[4,e.region()];case 2:s===a.sent()&&(r.hostname="s3.amazonaws.com"),a.label=3;case 3:return[2,n((0,re.pi)({},t))]}})})}}}(e),uI)}}}(r.config)),r.middlewareStack.use(function(e){return{applyToStack:function(n){n.add(function c2(e){var n=this;return function(t){return function(r){return(0,re.mG)(n,void 0,void 0,function(){var s;return(0,re.Jh)(this,function(a){return Er.isInstance(s=r.request)&&s.body&&"node"===e.runtime&&(s.headers=(0,re.pi)((0,re.pi)({},s.headers),{Expect:"100-continue"})),[2,t((0,re.pi)((0,re.pi)({},r),{request:s}))]})})}}}(e),d2)}}}(r.config)),r.middlewareStack.use(T_(r.config)),r}return(0,re.ZT)(n,e),n.prototype.destroy=function(){e.prototype.destroy.call(this)},n}(Dv);let J2=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-mediafile-pane-renderer"]],decls:1,vars:0,template:function(t,r){1&t&&o.\u0275\u0275text(0,"Media File")},styles:[""]}),e})(),$_=(()=>{class e{constructor(t){t.register(new Gt.ContentPlugin({id:"media_file",title:"Media File",selectionComponent:void 0,editorComponent:void 0,renderComponent:J2,handler:void 0}))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Gt.ContentPluginManager))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[C.CommonModule]]}),e})();const nh=new o.InjectionToken("Media Settings");class Y2{constructor(n){n&&(this.endpointUrl=n.endpointUrl,this.cloudinaryUrl=n.cloudinaryUrl,this.uploadPreset=n.uploadPreset,this.imageUrl=n.imageUrl,this.bucket=n.bucket,this.prefix=n.prefix)}}class bg{constructor(n){n&&(this.id=n.id,this.contentType=n.contentType,this.contentDisposition=n.contentDisposition,this.path=n.path,this.fileName=n.fileName,this.length=n.length,this.extension=n.extension?n.extension:void 0,this.realPath=n.realPath&&""!==n.realPath?n.realPath:void 0)}}let rh=(()=>{class e{constructor(t,r,s,a){this.settings=t,this.cognitoSettings=r,this.http=s,this.authFacade=a}bulkUpload({files:t,fileNameOverride:r}){const a=[];return t.forEach(l=>{if(l){const u=new FormData;u.append("File",l,r||l.name),a.push(this.http.post(this.settings.endpointUrl,u).pipe((0,kr.K)(p=>(0,lo._)(new Error("Error uploading images.")))))}}),a.length>0?(0,pn.D)(a):(0,Be.of)([])}bulkUploadS3({files:t,fileNameOverride:r,nocache:s}){const a=[];return t.forEach(l=>{l&&a.push(new v.y(u=>{const p=r||zn(),[h,S]=l.name.split(".",2),G=p+(S?"."+S:"");new xI({client:this.buildClient(),params:{Bucket:this.settings.bucket,Key:this.settings.prefix+G,Body:l,ContentType:l.type,...s?{CacheControl:"no-cache"}:{}}}).done().then(()=>{u.next(new bg({id:p,contentType:l.type,contentDisposition:"",path:G,realPath:this.settings.prefix+G,length:l.size,fileName:l.name,extension:S&&""!==S?S:void 0})),u.complete()})}))}),a.length>0?(0,pn.D)(a):(0,Be.of)([])}convertToFiles(t){const r=t.map(s=>new v.y(a=>{fetch(`${this.settings.imageUrl}/${s.path}`).then(l=>{l.blob().then(u=>{new Promise(p=>{let h=new FileReader;h.onload=()=>p(h.result),h.readAsDataURL(u)}).then(p=>{const h=this.convertDataURIToBinary(p),S=new File([h],s.fileName,{type:s.contentType});a.next(S),a.complete()})})})}));return(0,pn.D)(r)}convertDataURIToBinary(t){for(var r=";base64,",s=t.indexOf(r)+r.length,a=t.substring(s),l=window.atob(a),u=l.length,p=new Uint8Array(new ArrayBuffer(u)),h=0;h<u;h++)p[h]=l.charCodeAt(h);return p}buildClient(){return new W2({region:this.cognitoSettings.region,credentials:dg({client:new yg({region:this.cognitoSettings.region}),identityPoolId:this.cognitoSettings.identityPoolId,logins:{[`cognito-idp.${this.cognitoSettings.region}.amazonaws.com/${this.cognitoSettings.userPoolId}`]:()=>Nu(this.authFacade.getUser$.pipe((0,be.U)(t=>t?t.id_token:void 0)))}})})}isImage({file:t}){return t.type&&0===t.type.indexOf("image/")}isVideo({file:t}){return t.type&&0===t.type.indexOf("video/")}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(nh),o.\u0275\u0275inject(xl),o.\u0275\u0275inject(F.HttpClient),o.\u0275\u0275inject(ei))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var on=x(139),Ct=x(5992);let Bd=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[C.CommonModule]]}),e})(),Gn=(()=>{class e{constructor(){}generateTokens(t){const r=new Map;return this.attributeTokens(t,r,"",0),r}generateGenericTokens(t,r=""){const s=new Map;return this.genericTokens(t,s,r,0),s}attributeTokens(t,r,s,a){t.forEach((l,u)=>{if("widget"!==l.name)for(const p in l)l.type===Ct.AttributeTypes.Complex||"attributes"===p&&l.attributes&&l.attributes.length>0?this.attributeTokens(l.attributes,r,l.type===Ct.AttributeTypes.Complex?`${s}`:`${s}.${l.name}`,a+1):"attributes"!==p&&r.set(p===l.name?`${s}.${p}`:`${s}.${l.name}.${p}`,l[p])})}genericTokens(t,r,s,a){for(const u in t)if("object"!=typeof t[u])r.set(`${s}.${u}`,t[u]);else if(Array.isArray(t[u])&&"attributes"===u)this.attributeTokens(t[u],r,`${s}.${u}`,a+1);else if(Array.isArray(t[u])){var l=t[u].length;for(let h=0;h<l;h++)this.genericTokens(t[u][h],r,`${s}.${u}.${h}`,a+1)}else this.genericTokens(t[u],r,`${s}.${u}`,a+1)}replaceTokens(t,r){return r&&r.forEach((s,a)=>{t=t.replace(`[${a}]`,`${s}`)}),t}matchTokens(t,r){const s=[],a=r.length;for(let l=0;l<a;l++)t.indexOf(`[${r[l]}]`)>-1&&s.push(r[l]);return s}discoverTokens(t,r=!1){const s=t.match(/(\[(?:\[??[^\[]*?\]))/g);return null===s?[]:s.reduce((l,u)=>{if(-1!==u.indexOf(" ")||-1===u.indexOf("."))return l;const[p]=1===u.indexOf(".")?["."]:u.substr(1,u.length-2).split(".");return-1!==l.findIndex(h=>h===p)?l:[...l,r?u.substr(1,u.length-2):p]},[])}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ri=x(1310),qn=x(8372);const Z2=["gutterEls"];function eO(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",2,3),o.\u0275\u0275listener("keydown",function(s){o.\u0275\u0275restoreView(t);const a=o.\u0275\u0275nextContext().index;return o.\u0275\u0275nextContext().startKeyboardDrag(s,2*a+1,a+1)})("mousedown",function(s){o.\u0275\u0275restoreView(t);const a=o.\u0275\u0275nextContext().index;return o.\u0275\u0275nextContext().startMouseDrag(s,2*a+1,a+1)})("touchstart",function(s){o.\u0275\u0275restoreView(t);const a=o.\u0275\u0275nextContext().index;return o.\u0275\u0275nextContext().startMouseDrag(s,2*a+1,a+1)})("mouseup",function(s){o.\u0275\u0275restoreView(t);const a=o.\u0275\u0275nextContext().index;return o.\u0275\u0275nextContext().clickGutter(s,a+1)})("touchend",function(s){o.\u0275\u0275restoreView(t);const a=o.\u0275\u0275nextContext().index;return o.\u0275\u0275nextContext().clickGutter(s,a+1)}),o.\u0275\u0275element(2,"div",4),o.\u0275\u0275elementEnd()}if(2&e){const t=o.\u0275\u0275nextContext(),r=t.index,s=t.$implicit,a=o.\u0275\u0275nextContext();o.\u0275\u0275styleProp("flex-basis",a.gutterSize,"px")("order",2*r+1),o.\u0275\u0275attribute("aria-label",a.gutterAriaLabel)("aria-orientation",a.direction)("aria-valuemin",s.minSize)("aria-valuemax",s.maxSize)("aria-valuenow",s.size)("aria-valuetext",a.getAriaAreaSizeText(s.size))}}function tO(e,n){1&e&&o.\u0275\u0275template(0,eO,3,10,"div",1),2&e&&o.\u0275\u0275property("ngIf",!1===n.last)}const nO=["*"];function Ld(e){if(void 0!==e.changedTouches&&e.changedTouches.length>0)return{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY};if(void 0!==e.clientX&&void 0!==e.clientY)return{x:e.clientX,y:e.clientY};if(void 0!==e.currentTarget){const n=e.currentTarget;return{x:n.offsetLeft,y:n.offsetTop}}return null}function H_(e,n,t){return Math.abs(e.x-n.x)<=t&&Math.abs(e.y-n.y)<=t}function q_(e,n){const t=e.nativeElement.getBoundingClientRect();return"horizontal"===n?t.width:t.height}function zd(e){return"boolean"==typeof e?e:"false"!==e}function za(e,n){return null==e?n:(e=Number(e),!isNaN(e)&&e>=0?e:n)}function K_(e,n){if("percent"===e){const t=n.reduce((r,s)=>null!==s?r+s:r,0);return n.every(r=>null!==r)&&t>99.9&&t<100.1}if("pixel"===e)return 1===n.filter(t=>null===t).length}function ih(e){return null===e.size?null:!0===e.component.lockSize?e.size:null===e.component.minSize?null:e.component.minSize>e.size?e.size:e.component.minSize}function oh(e){return null===e.size?null:!0===e.component.lockSize?e.size:null===e.component.maxSize?null:e.component.maxSize<e.size?e.size:e.component.maxSize}function Wu(e,n,t,r){return n.reduce((s,a)=>{const l=function iO(e,n,t,r){return 0===t?{areaSnapshot:n,pixelAbsorb:0,percentAfterAbsorption:n.sizePercentAtStart,pixelRemain:0}:0===n.sizePixelAtStart&&t<0?{areaSnapshot:n,pixelAbsorb:0,percentAfterAbsorption:0,pixelRemain:t}:"percent"===e?function oO(e,n,t){const s=(e.sizePixelAtStart+n)/t*100;if(n>0){if(null!==e.area.maxSize&&s>e.area.maxSize){const a=e.area.maxSize/100*t;return{areaSnapshot:e,pixelAbsorb:a,percentAfterAbsorption:e.area.maxSize,pixelRemain:e.sizePixelAtStart+n-a}}return{areaSnapshot:e,pixelAbsorb:n,percentAfterAbsorption:s>100?100:s,pixelRemain:0}}if(n<0){if(null!==e.area.minSize&&s<e.area.minSize){const a=e.area.minSize/100*t;return{areaSnapshot:e,pixelAbsorb:a,percentAfterAbsorption:e.area.minSize,pixelRemain:e.sizePixelAtStart+n-a}}return s<0?{areaSnapshot:e,pixelAbsorb:-e.sizePixelAtStart,percentAfterAbsorption:0,pixelRemain:n+e.sizePixelAtStart}:{areaSnapshot:e,pixelAbsorb:n,percentAfterAbsorption:s,pixelRemain:0}}}(n,t,r):"pixel"===e?function sO(e,n,t){const r=e.sizePixelAtStart+n;return n>0?null!==e.area.maxSize&&r>e.area.maxSize?{areaSnapshot:e,pixelAbsorb:e.area.maxSize-e.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:r-e.area.maxSize}:{areaSnapshot:e,pixelAbsorb:n,percentAfterAbsorption:-1,pixelRemain:0}:n<0?null!==e.area.minSize&&r<e.area.minSize?{areaSnapshot:e,pixelAbsorb:e.area.minSize+n-r,percentAfterAbsorption:-1,pixelRemain:r-e.area.minSize}:r<0?{areaSnapshot:e,pixelAbsorb:-e.sizePixelAtStart,percentAfterAbsorption:-1,pixelRemain:n+e.sizePixelAtStart}:{areaSnapshot:e,pixelAbsorb:n,percentAfterAbsorption:-1,pixelRemain:0}:void 0}(n,t):void 0}(e,a,s.remain,r);return s.list.push(l),s.remain=l.pixelRemain,s},{remain:t,list:[]})}function X_(e,n){"percent"===e?n.areaSnapshot.area.size=n.percentAfterAbsorption:"pixel"===e&&null!==n.areaSnapshot.area.size&&(n.areaSnapshot.area.size=n.areaSnapshot.sizePixelAtStart+n.pixelAbsorb)}const aO=new o.InjectionToken("angular-split-global-config");let Ud=(()=>{class e{constructor(t,r,s,a,l){this.ngZone=t,this.elRef=r,this.cdRef=s,this.renderer=a,this.gutterClickDeltaPx=2,this._config={direction:"horizontal",unit:"percent",gutterSize:11,gutterStep:1,restrictMove:!1,useTransition:!1,disabled:!1,dir:"ltr",gutterDblClickDuration:0},this.dragStart=new o.EventEmitter(!1),this.dragEnd=new o.EventEmitter(!1),this.gutterClick=new o.EventEmitter(!1),this.gutterDblClick=new o.EventEmitter(!1),this.dragProgressSubject=new M.x,this.dragProgress$=this.dragProgressSubject.asObservable(),this.isDragging=!1,this.isWaitingClear=!1,this.isWaitingInitialMove=!1,this.dragListeners=[],this.snapshot=null,this.startPoint=null,this.endPoint=null,this.displayedAreas=[],this.hiddenAreas=[],this._clickTimeout=null,this.direction=this._direction,this._config=l?Object.assign(this._config,l):this._config,Object.keys(this._config).forEach(u=>{this[u]=this._config[u]})}set direction(t){this._direction="vertical"===t?"vertical":"horizontal",this.renderer.addClass(this.elRef.nativeElement,`as-${this._direction}`),this.renderer.removeClass(this.elRef.nativeElement,"as-"+("vertical"===this._direction?"horizontal":"vertical")),this.build(!1,!1)}get direction(){return this._direction}set unit(t){this._unit="pixel"===t?"pixel":"percent",this.renderer.addClass(this.elRef.nativeElement,`as-${this._unit}`),this.renderer.removeClass(this.elRef.nativeElement,"as-"+("pixel"===this._unit?"percent":"pixel")),this.build(!1,!0)}get unit(){return this._unit}set gutterSize(t){this._gutterSize=za(t,11),this.build(!1,!1)}get gutterSize(){return this._gutterSize}set gutterStep(t){this._gutterStep=za(t,1)}get gutterStep(){return this._gutterStep}set restrictMove(t){this._restrictMove=zd(t)}get restrictMove(){return this._restrictMove}set useTransition(t){this._useTransition=zd(t),this._useTransition?this.renderer.addClass(this.elRef.nativeElement,"as-transition"):this.renderer.removeClass(this.elRef.nativeElement,"as-transition")}get useTransition(){return this._useTransition}set disabled(t){this._disabled=zd(t),this._disabled?this.renderer.addClass(this.elRef.nativeElement,"as-disabled"):this.renderer.removeClass(this.elRef.nativeElement,"as-disabled")}get disabled(){return this._disabled}set dir(t){this._dir="rtl"===t?"rtl":"ltr",this.renderer.setAttribute(this.elRef.nativeElement,"dir",this._dir)}get dir(){return this._dir}set gutterDblClickDuration(t){this._gutterDblClickDuration=za(t,0)}get gutterDblClickDuration(){return this._gutterDblClickDuration}get transitionEnd(){return new v.y(t=>this.transitionEndSubscriber=t).pipe((0,qn.b)(20))}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{setTimeout(()=>this.renderer.addClass(this.elRef.nativeElement,"as-init"))})}getNbGutters(){return 0===this.displayedAreas.length?0:this.displayedAreas.length-1}addArea(t){const r={component:t,order:0,size:0,minSize:null,maxSize:null,sizeBeforeCollapse:null,gutterBeforeCollapse:0};!0===t.visible?(this.displayedAreas.push(r),this.build(!0,!0)):this.hiddenAreas.push(r)}removeArea(t){if(this.displayedAreas.some(r=>r.component===t)){const r=this.displayedAreas.find(s=>s.component===t);this.displayedAreas.splice(this.displayedAreas.indexOf(r),1),this.build(!0,!0)}else if(this.hiddenAreas.some(r=>r.component===t)){const r=this.hiddenAreas.find(s=>s.component===t);this.hiddenAreas.splice(this.hiddenAreas.indexOf(r),1)}}updateArea(t,r,s){!0===t.visible&&this.build(r,s)}showArea(t){const r=this.hiddenAreas.find(a=>a.component===t);if(void 0===r)return;const s=this.hiddenAreas.splice(this.hiddenAreas.indexOf(r),1);this.displayedAreas.push(...s),this.build(!0,!0)}hideArea(t){const r=this.displayedAreas.find(a=>a.component===t);if(void 0===r)return;const s=this.displayedAreas.splice(this.displayedAreas.indexOf(r),1);s.forEach(a=>{a.order=0,a.size=0}),this.hiddenAreas.push(...s),this.build(!0,!0)}getVisibleAreaSizes(){return this.displayedAreas.map(t=>null===t.size?"*":t.size)}setVisibleAreaSizes(t){if(t.length!==this.displayedAreas.length)return!1;const r=t.map(a=>za(a,null));return!1!==K_(this.unit,r)&&(this.displayedAreas.forEach((a,l)=>a.component._size=r[l]),this.build(!1,!0),!0)}build(t,r){if(this.stopDragging(),!0===t&&(this.displayedAreas.every(s=>null!==s.component.order)&&this.displayedAreas.sort((s,a)=>s.component.order-a.component.order),this.displayedAreas.forEach((s,a)=>{s.order=2*a,s.component.setStyleOrder(s.order)})),!0===r){const s=K_(this.unit,this.displayedAreas.map(a=>a.component.size));switch(this.unit){case"percent":{const a=100/this.displayedAreas.length;this.displayedAreas.forEach(l=>{l.size=s?l.component.size:a,l.minSize=ih(l),l.maxSize=oh(l)});break}case"pixel":if(s)this.displayedAreas.forEach(a=>{a.size=a.component.size,a.minSize=ih(a),a.maxSize=oh(a)});else{const a=this.displayedAreas.filter(l=>null===l.component.size);if(0===a.length&&this.displayedAreas.length>0)this.displayedAreas.forEach((l,u)=>{l.size=0===u?null:l.component.size,l.minSize=0===u?null:ih(l),l.maxSize=0===u?null:oh(l)});else if(a.length>1){let l=!1;this.displayedAreas.forEach(u=>{null===u.component.size?!1===l?(u.size=null,u.minSize=null,u.maxSize=null,l=!0):(u.size=100,u.minSize=null,u.maxSize=null):(u.size=u.component.size,u.minSize=ih(u),u.maxSize=oh(u))})}}}}this.refreshStyleSizes(),this.cdRef.markForCheck()}refreshStyleSizes(){if("percent"===this.unit)if(1===this.displayedAreas.length)this.displayedAreas[0].component.setStyleFlex(0,0,"100%",!1,!1);else{const t=this.getNbGutters()*this.gutterSize;this.displayedAreas.forEach(r=>{r.component.setStyleFlex(0,0,`calc( ${r.size}% - ${r.size/100*t}px )`,null!==r.minSize&&r.minSize===r.size,null!==r.maxSize&&r.maxSize===r.size)})}else"pixel"===this.unit&&this.displayedAreas.forEach(t=>{null===t.size?t.component.setStyleFlex(1,1,1===this.displayedAreas.length?"100%":"auto",!1,!1):1===this.displayedAreas.length?t.component.setStyleFlex(0,0,"100%",!1,!1):t.component.setStyleFlex(0,0,`${t.size}px`,null!==t.minSize&&t.minSize===t.size,null!==t.maxSize&&t.maxSize===t.size)})}clickGutter(t,r){const s=Ld(t);this.startPoint&&H_(this.startPoint,s,this.gutterClickDeltaPx)&&(!this.isDragging||this.isWaitingInitialMove)&&(null!==this._clickTimeout?(window.clearTimeout(this._clickTimeout),this._clickTimeout=null,this.notify("dblclick",r),this.stopDragging()):this._clickTimeout=window.setTimeout(()=>{this._clickTimeout=null,this.notify("click",r),this.stopDragging()},this.gutterDblClickDuration))}startKeyboardDrag(t,r,s){if(!0===this.disabled||!0===this.isWaitingClear)return;const a=function rO(e,n){if("horizontal"===n)switch(e.key){case"ArrowLeft":case"ArrowRight":case"PageUp":case"PageDown":break;default:return null}if("vertical"===n)switch(e.key){case"ArrowUp":case"ArrowDown":case"PageUp":case"PageDown":break;default:return null}const t=e.currentTarget,r="PageUp"===e.key||"PageDown"===e.key?500:50;let s=t.offsetLeft,a=t.offsetTop;switch(e.key){case"ArrowLeft":s-=r;break;case"ArrowRight":s+=r;break;case"ArrowUp":a-=r;break;case"ArrowDown":a+=r;break;case"PageUp":"vertical"===n?a-=r:s+=r;break;case"PageDown":"vertical"===n?a+=r:s-=r;break;default:return null}return{x:s,y:a}}(t,this.direction);null!==a&&(this.endPoint=a,this.startPoint=Ld(t),t.preventDefault(),t.stopPropagation(),this.setupForDragEvent(r,s),this.startDragging(),this.drag(),this.stopDragging())}startMouseDrag(t,r,s){t.preventDefault(),t.stopPropagation(),this.startPoint=Ld(t),null!==this.startPoint&&!0!==this.disabled&&!0!==this.isWaitingClear&&(this.setupForDragEvent(r,s),this.dragListeners.push(this.renderer.listen("document","mouseup",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchend",this.stopDragging.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchcancel",this.stopDragging.bind(this))),this.ngZone.runOutsideAngular(()=>{this.dragListeners.push(this.renderer.listen("document","mousemove",this.mouseDragEvent.bind(this))),this.dragListeners.push(this.renderer.listen("document","touchmove",this.mouseDragEvent.bind(this)))}),this.startDragging())}setupForDragEvent(t,r){this.snapshot={gutterNum:r,lastSteppedOffset:0,allAreasSizePixel:q_(this.elRef,this.direction)-this.getNbGutters()*this.gutterSize,allInvolvedAreasSizePercent:100,areasBeforeGutter:[],areasAfterGutter:[]},this.displayedAreas.forEach(s=>{const a={area:s,sizePixelAtStart:q_(s.component.elRef,this.direction),sizePercentAtStart:"percent"===this.unit?s.size:-1};s.order<t?!0===this.restrictMove?this.snapshot.areasBeforeGutter=[a]:this.snapshot.areasBeforeGutter.unshift(a):s.order>t&&(!0===this.restrictMove?0===this.snapshot.areasAfterGutter.length&&(this.snapshot.areasAfterGutter=[a]):this.snapshot.areasAfterGutter.push(a))}),this.snapshot.allInvolvedAreasSizePercent=[...this.snapshot.areasBeforeGutter,...this.snapshot.areasAfterGutter].reduce((s,a)=>s+a.sizePercentAtStart,0)}startDragging(){this.displayedAreas.forEach(t=>t.component.lockEvents()),this.isDragging=!0,this.isWaitingInitialMove=!0}mouseDragEvent(t){t.preventDefault(),t.stopPropagation();const r=Ld(t);null!==this._clickTimeout&&!H_(this.startPoint,r,this.gutterClickDeltaPx)&&(window.clearTimeout(this._clickTimeout),this._clickTimeout=null),!1!==this.isDragging&&(this.endPoint=Ld(t),null!==this.endPoint&&this.drag())}drag(){if(this.isWaitingInitialMove){if(this.startPoint.x===this.endPoint.x&&this.startPoint.y===this.endPoint.y)return;this.ngZone.run(()=>{this.isWaitingInitialMove=!1,this.renderer.addClass(this.elRef.nativeElement,"as-dragging"),this.renderer.addClass(this.gutterEls.toArray()[this.snapshot.gutterNum-1].nativeElement,"as-dragged"),this.notify("start",this.snapshot.gutterNum)})}let t="horizontal"===this.direction?this.startPoint.x-this.endPoint.x:this.startPoint.y-this.endPoint.y;"rtl"===this.dir&&(t=-t);const r=Math.round(t/this.gutterStep)*this.gutterStep;if(r===this.snapshot.lastSteppedOffset)return;this.snapshot.lastSteppedOffset=r;let s=Wu(this.unit,this.snapshot.areasBeforeGutter,-r,this.snapshot.allAreasSizePixel),a=Wu(this.unit,this.snapshot.areasAfterGutter,r,this.snapshot.allAreasSizePixel);if(0!==s.remain&&0!==a.remain?Math.abs(s.remain)===Math.abs(a.remain)||(Math.abs(s.remain)>Math.abs(a.remain)?a=Wu(this.unit,this.snapshot.areasAfterGutter,r+s.remain,this.snapshot.allAreasSizePixel):s=Wu(this.unit,this.snapshot.areasBeforeGutter,-(r-a.remain),this.snapshot.allAreasSizePixel)):0!==s.remain?a=Wu(this.unit,this.snapshot.areasAfterGutter,r+s.remain,this.snapshot.allAreasSizePixel):0!==a.remain&&(s=Wu(this.unit,this.snapshot.areasBeforeGutter,-(r-a.remain),this.snapshot.allAreasSizePixel)),"percent"===this.unit){const l=[...s.list,...a.list],u=l.find(p=>0!==p.percentAfterAbsorption&&p.percentAfterAbsorption!==p.areaSnapshot.area.minSize&&p.percentAfterAbsorption!==p.areaSnapshot.area.maxSize);u&&(u.percentAfterAbsorption=this.snapshot.allInvolvedAreasSizePercent-l.filter(p=>p!==u).reduce((p,h)=>p+h.percentAfterAbsorption,0))}s.list.forEach(l=>X_(this.unit,l)),a.list.forEach(l=>X_(this.unit,l)),this.refreshStyleSizes(),this.notify("progress",this.snapshot.gutterNum)}stopDragging(t){if(t&&(t.preventDefault(),t.stopPropagation()),!1!==this.isDragging){for(this.displayedAreas.forEach(r=>r.component.unlockEvents());this.dragListeners.length>0;){const r=this.dragListeners.pop();r&&r()}this.isDragging=!1,!1===this.isWaitingInitialMove&&this.notify("end",this.snapshot.gutterNum),this.renderer.removeClass(this.elRef.nativeElement,"as-dragging"),this.renderer.removeClass(this.gutterEls.toArray()[this.snapshot.gutterNum-1].nativeElement,"as-dragged"),this.snapshot=null,this.isWaitingClear=!0,this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.startPoint=null,this.endPoint=null,this.isWaitingClear=!1})})}}notify(t,r){const s=this.getVisibleAreaSizes();"start"===t?this.dragStart.emit({gutterNum:r,sizes:s}):"end"===t?this.dragEnd.emit({gutterNum:r,sizes:s}):"click"===t?this.gutterClick.emit({gutterNum:r,sizes:s}):"dblclick"===t?this.gutterDblClick.emit({gutterNum:r,sizes:s}):"transitionEnd"===t?this.transitionEndSubscriber&&this.ngZone.run(()=>this.transitionEndSubscriber.next(s)):"progress"===t&&this.dragProgressSubject.next({gutterNum:r,sizes:s})}ngOnDestroy(){this.stopDragging()}collapseArea(t,r,s){const a=this.displayedAreas.find(p=>p.component===t);if(void 0===a)return;const l="right"===s?1:-1;a.sizeBeforeCollapse||(a.sizeBeforeCollapse=a.size,a.gutterBeforeCollapse=l),a.size=r;const u=this.gutterEls.find(p=>p.nativeElement.style.order===`${a.order+l}`);u&&this.renderer.addClass(u.nativeElement,"as-split-gutter-collapsed"),this.updateArea(t,!1,!1)}expandArea(t){const r=this.displayedAreas.find(a=>a.component===t);if(void 0===r||!r.sizeBeforeCollapse)return;r.size=r.sizeBeforeCollapse,r.sizeBeforeCollapse=null;const s=this.gutterEls.find(a=>a.nativeElement.style.order===`${r.order+r.gutterBeforeCollapse}`);s&&this.renderer.removeClass(s.nativeElement,"as-split-gutter-collapsed"),this.updateArea(t,!1,!1)}getAriaAreaSizeText(t){return null===t?null:t.toFixed(0)+" "+this.unit}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.NgZone),o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(o.ChangeDetectorRef),o.\u0275\u0275directiveInject(o.Renderer2),o.\u0275\u0275directiveInject(aO,8))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["as-split"]],viewQuery:function(t,r){if(1&t&&o.\u0275\u0275viewQuery(Z2,5),2&t){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.gutterEls=s)}},inputs:{direction:"direction",unit:"unit",gutterSize:"gutterSize",gutterStep:"gutterStep",restrictMove:"restrictMove",useTransition:"useTransition",disabled:"disabled",dir:"dir",gutterDblClickDuration:"gutterDblClickDuration",gutterClickDeltaPx:"gutterClickDeltaPx",gutterAriaLabel:"gutterAriaLabel"},outputs:{transitionEnd:"transitionEnd",dragStart:"dragStart",dragEnd:"dragEnd",gutterClick:"gutterClick",gutterDblClick:"gutterDblClick"},exportAs:["asSplit"],ngContentSelectors:nO,decls:2,vars:1,consts:[["ngFor","",3,"ngForOf"],["role","slider","tabindex","0","class","as-split-gutter",3,"flex-basis","order","keydown","mousedown","touchstart","mouseup","touchend",4,"ngIf"],["role","slider","tabindex","0",1,"as-split-gutter",3,"keydown","mousedown","touchstart","mouseup","touchend"],["gutterEls",""],[1,"as-split-gutter-icon"]],template:function(t,r){1&t&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275projection(0),o.\u0275\u0275template(1,tO,1,1,"ng-template",0)),2&t&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",r.displayedAreas))},directives:[C.NgForOf,C.NgIf],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:nowrap;justify-content:flex-start;align-items:stretch;overflow:hidden;width:100%;height:100%}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{border:none;flex-grow:0;flex-shrink:0;background-color:#eee;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%] > .as-split-gutter.as-split-gutter-collapsed[_ngcontent-%COMP%]{flex-basis:1px!important;pointer-events:none}[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{width:100%;height:100%;background-position:center center;background-repeat:no-repeat}[_nghost-%COMP%]    >.as-split-area{flex-grow:0;flex-shrink:0;overflow-x:hidden;overflow-y:auto}[_nghost-%COMP%]    >.as-split-area.as-hidden{flex:0 1 0px!important;overflow-x:hidden;overflow-y:hidden}.as-horizontal[_nghost-%COMP%]{flex-direction:row}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{flex-direction:row;cursor:col-resize;height:100%}.as-horizontal[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%] > .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==)}.as-horizontal[_nghost-%COMP%]    >.as-split-area{height:100%}.as-vertical[_nghost-%COMP%]{flex-direction:column}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{flex-direction:column;cursor:row-resize;width:100%}.as-vertical[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFCAMAAABl/6zIAAAABlBMVEUAAADMzMzIT8AyAAAAAXRSTlMAQObYZgAAABRJREFUeAFjYGRkwIMJSeMHlBkOABP7AEGzSuPKAAAAAElFTkSuQmCC)}.as-vertical[_nghost-%COMP%]    >.as-split-area{width:100%}.as-vertical[_nghost-%COMP%]    >.as-split-area.as-hidden{max-width:0}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]{cursor:default}.as-disabled[_nghost-%COMP%] > .as-split-gutter[_ngcontent-%COMP%]   .as-split-gutter-icon[_ngcontent-%COMP%]{background-image:url()}.as-transition.as-init[_nghost-%COMP%]:not(.as-dragging) > .as-split-gutter[_ngcontent-%COMP%], .as-transition.as-init[_nghost-%COMP%]:not(.as-dragging)    >.as-split-area{transition:flex-basis .3s}"],changeDetection:0}),e})(),Gd=(()=>{class e{constructor(t,r,s,a){this.ngZone=t,this.elRef=r,this.renderer=s,this.split=a,this._order=null,this._size=null,this._minSize=null,this._maxSize=null,this._lockSize=!1,this._visible=!0,this.lockListeners=[],this.renderer.addClass(this.elRef.nativeElement,"as-split-area")}set order(t){this._order=za(t,null),this.split.updateArea(this,!0,!1)}get order(){return this._order}set size(t){this._size=za(t,null),this.split.updateArea(this,!1,!0)}get size(){return this._size}set minSize(t){this._minSize=za(t,null),this.split.updateArea(this,!1,!0)}get minSize(){return this._minSize}set maxSize(t){this._maxSize=za(t,null),this.split.updateArea(this,!1,!0)}get maxSize(){return this._maxSize}set lockSize(t){this._lockSize=zd(t),this.split.updateArea(this,!1,!0)}get lockSize(){return this._lockSize}set visible(t){this._visible=zd(t),this._visible?(this.split.showArea(this),this.renderer.removeClass(this.elRef.nativeElement,"as-hidden")):(this.split.hideArea(this),this.renderer.addClass(this.elRef.nativeElement,"as-hidden"))}get visible(){return this._visible}ngOnInit(){this.split.addArea(this),this.ngZone.runOutsideAngular(()=>{this.transitionListener=this.renderer.listen(this.elRef.nativeElement,"transitionend",t=>{"flex-basis"===t.propertyName&&this.split.notify("transitionEnd",-1)})})}setStyleOrder(t){this.renderer.setStyle(this.elRef.nativeElement,"order",t)}setStyleFlex(t,r,s,a,l){this.renderer.setStyle(this.elRef.nativeElement,"flex-grow",t),this.renderer.setStyle(this.elRef.nativeElement,"flex-shrink",r),this.renderer.setStyle(this.elRef.nativeElement,"flex-basis",s),!0===a?this.renderer.addClass(this.elRef.nativeElement,"as-min"):this.renderer.removeClass(this.elRef.nativeElement,"as-min"),!0===l?this.renderer.addClass(this.elRef.nativeElement,"as-max"):this.renderer.removeClass(this.elRef.nativeElement,"as-max")}lockEvents(){this.ngZone.runOutsideAngular(()=>{this.lockListeners.push(this.renderer.listen(this.elRef.nativeElement,"selectstart",()=>!1)),this.lockListeners.push(this.renderer.listen(this.elRef.nativeElement,"dragstart",()=>!1))})}unlockEvents(){for(;this.lockListeners.length>0;){const t=this.lockListeners.pop();t&&t()}}ngOnDestroy(){this.unlockEvents(),this.transitionListener&&this.transitionListener(),this.split.removeArea(this)}collapse(t=0,r="right"){this.split.collapseArea(this,t,r)}expand(){this.split.expandArea(this)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.NgZone),o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(o.Renderer2),o.\u0275\u0275directiveInject(Ud))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["as-split-area"],["","as-split-area",""]],inputs:{order:"order",size:"size",minSize:"minSize",maxSize:"maxSize",lockSize:"lockSize",visible:"visible"},exportAs:["asSplitArea"]}),e})(),sh=(()=>{class e{static forRoot(){return console.warn("AngularSplitModule.forRoot() is deprecated and will be removed in v6"),{ngModule:e,providers:[]}}static forChild(){return console.warn("AngularSplitModule.forChild() is deprecated and will be removed in v6"),{ngModule:e,providers:[]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[C.CommonModule]]}),e})();let Ju={baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1};const uO=/[&<>"']/,cO=/[&<>"']/g,dO=/[<>"']|&(?!#?\w+;)/,fO=/[<>"']|&(?!#?\w+;)/g,pO={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},J_=e=>pO[e];function ii(e,n){if(n){if(uO.test(e))return e.replace(cO,J_)}else if(dO.test(e))return e.replace(fO,J_);return e}const hO=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function Q_(e){return e.replace(hO,(n,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):"")}const mO=/(^|[^\[])\^/g;function Zn(e,n){e=e.source||e,n=n||"";const t={replace:(r,s)=>(s=(s=s.source||s).replace(mO,"$1"),e=e.replace(r,s),t),getRegex:()=>new RegExp(e,n)};return t}const gO=/[^\w:]/g,vO=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function Y_(e,n,t){if(e){let r;try{r=decodeURIComponent(Q_(t)).replace(gO,"").toLowerCase()}catch{return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}n&&!vO.test(t)&&(t=function wO(e,n){ah[" "+e]||(ah[" "+e]=yO.test(e)?e+"/":uh(e,"/",!0));const t=-1===(e=ah[" "+e]).indexOf(":");return"//"===n.substring(0,2)?t?n:e.replace(_O,"$1")+n:"/"===n.charAt(0)?t?n:e.replace(bO,"$1")+n:e+n}(n,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const ah={},yO=/^[^:]+:\/*[^/]*$/,_O=/^([^:]+:)[\s\S]*$/,bO=/^([^:]+:\/*[^/]*)[\s\S]*$/,lh={exec:function(){}};function Qo(e){let t,r,n=1;for(;n<arguments.length;n++)for(r in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}function Z_(e,n){const r=e.replace(/\|/g,(a,l,u)=>{let p=!1,h=l;for(;--h>=0&&"\\"===u[h];)p=!p;return p?"|":" |"}).split(/ \|/);let s=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),r.length>n)r.splice(n);else for(;r.length<n;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(/\\\|/g,"|");return r}function uh(e,n,t){const r=e.length;if(0===r)return"";let s=0;for(;s<r;){const a=e.charAt(r-s-1);if(a!==n||t){if(a===n||!t)break;s++}else s++}return e.substr(0,r-s)}function e0(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function t0(e,n){if(n<1)return"";let t="";for(;n>1;)1&n&&(t+=e),n>>=1,e+=e;return t+e}function n0(e,n,t,r){const s=n.href,a=n.title?ii(n.title):null,l=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){r.state.inLink=!0;const u={type:"link",raw:t,href:s,title:a,text:l,tokens:r.inlineTokens(l,[])};return r.state.inLink=!1,u}return{type:"image",raw:t,href:s,title:a,text:ii(l)}}class wg{constructor(n){this.options=n||Ju}space(n){const t=this.rules.block.newline.exec(n);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(n){const t=this.rules.block.code.exec(n);if(t){const r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:uh(r,"\n")}}}fences(n){const t=this.rules.block.fences.exec(n);if(t){const r=t[0],s=function xO(e,n){const t=e.match(/^(\s+)(?:```)/);if(null===t)return n;const r=t[1];return n.split("\n").map(s=>{const a=s.match(/^\s+/);if(null===a)return s;const[l]=a;return l.length>=r.length?s.slice(r.length):s}).join("\n")}(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim():t[2],text:s}}}heading(n){const t=this.rules.block.heading.exec(n);if(t){let r=t[2].trim();if(/#$/.test(r)){const a=uh(r,"#");(this.options.pedantic||!a||/ $/.test(a))&&(r=a.trim())}const s={type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:[]};return this.lexer.inline(s.text,s.tokens),s}}hr(n){const t=this.rules.block.hr.exec(n);if(t)return{type:"hr",raw:t[0]}}blockquote(n){const t=this.rules.block.blockquote.exec(n);if(t){const r=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(r,[]),text:r}}}list(n){let t=this.rules.block.list.exec(n);if(t){let r,s,a,l,u,p,h,S,G,W,J,ve,Ne=t[1].trim();const Re=Ne.length>1,De={type:"list",raw:"",ordered:Re,start:Re?+Ne.slice(0,-1):"",loose:!1,items:[]};Ne=Re?`\\d{1,9}\\${Ne.slice(-1)}`:`\\${Ne}`,this.options.pedantic&&(Ne=Re?Ne:"[*+-]");const Je=new RegExp(`^( {0,3}${Ne})((?: [^\\n]*)?(?:\\n|$))`);for(;n&&(ve=!1,(t=Je.exec(n))&&!this.rules.block.hr.test(n));){if(r=t[0],n=n.substring(r.length),S=t[2].split("\n",1)[0],G=n.split("\n",1)[0],this.options.pedantic?(l=2,J=S.trimLeft()):(l=t[2].search(/[^ ]/),l=l>4?1:l,J=S.slice(l),l+=t[1].length),p=!1,!S&&/^ *$/.test(G)&&(r+=G+"\n",n=n.substring(G.length+1),ve=!0),!ve){const gt=new RegExp(`^ {0,${Math.min(3,l-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(;n&&(W=n.split("\n",1)[0],S=W,this.options.pedantic&&(S=S.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!gt.test(S));){if(S.search(/[^ ]/)>=l||!S.trim())J+="\n"+S.slice(l);else{if(p)break;J+="\n"+S}!p&&!S.trim()&&(p=!0),r+=W+"\n",n=n.substring(W.length+1)}}De.loose||(h?De.loose=!0:/\n *\n *$/.test(r)&&(h=!0)),this.options.gfm&&(s=/^\[[ xX]\] /.exec(J),s&&(a="[ ] "!==s[0],J=J.replace(/^\[[ xX]\] +/,""))),De.items.push({type:"list_item",raw:r,task:!!s,checked:a,loose:!1,text:J}),De.raw+=r}De.items[De.items.length-1].raw=r.trimRight(),De.items[De.items.length-1].text=J.trimRight(),De.raw=De.raw.trimRight();const et=De.items.length;for(u=0;u<et;u++){this.lexer.state.top=!1,De.items[u].tokens=this.lexer.blockTokens(De.items[u].text,[]);const gt=De.items[u].tokens.filter(Ft=>"space"===Ft.type),St=gt.every(Ft=>{const Kt=Ft.raw.split("");let Zt=0;for(const Vn of Kt)if("\n"===Vn&&(Zt+=1),Zt>1)return!0;return!1});!De.loose&&gt.length&&St&&(De.loose=!0,De.items[u].loose=!0)}return De}}html(n){const t=this.rules.block.html.exec(n);if(t){const r={type:"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:t[0]};return this.options.sanitize&&(r.type="paragraph",r.text=this.options.sanitizer?this.options.sanitizer(t[0]):ii(t[0]),r.tokens=[],this.lexer.inline(r.text,r.tokens)),r}}def(n){const t=this.rules.block.def.exec(n);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}}table(n){const t=this.rules.block.table.exec(n);if(t){const r={type:"table",header:Z_(t[1]).map(s=>({text:s})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[]};if(r.header.length===r.align.length){r.raw=t[0];let a,l,u,p,s=r.align.length;for(a=0;a<s;a++)r.align[a]=/^ *-+: *$/.test(r.align[a])?"right":/^ *:-+: *$/.test(r.align[a])?"center":/^ *:-+ *$/.test(r.align[a])?"left":null;for(s=r.rows.length,a=0;a<s;a++)r.rows[a]=Z_(r.rows[a],r.header.length).map(h=>({text:h}));for(s=r.header.length,l=0;l<s;l++)r.header[l].tokens=[],this.lexer.inlineTokens(r.header[l].text,r.header[l].tokens);for(s=r.rows.length,l=0;l<s;l++)for(p=r.rows[l],u=0;u<p.length;u++)p[u].tokens=[],this.lexer.inlineTokens(p[u].text,p[u].tokens);return r}}}lheading(n){const t=this.rules.block.lheading.exec(n);if(t){const r={type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:[]};return this.lexer.inline(r.text,r.tokens),r}}paragraph(n){const t=this.rules.block.paragraph.exec(n);if(t){const r={type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(r.text,r.tokens),r}}text(n){const t=this.rules.block.text.exec(n);if(t){const r={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(r.text,r.tokens),r}}escape(n){const t=this.rules.inline.escape.exec(n);if(t)return{type:"escape",raw:t[0],text:ii(t[1])}}tag(n){const t=this.rules.inline.tag.exec(n);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):ii(t[0]):t[0]}}link(n){const t=this.rules.inline.link.exec(n);if(t){const r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const l=uh(r.slice(0,-1),"\\");if((r.length-l.length)%2==0)return}else{const l=function CO(e,n){if(-1===e.indexOf(n[1]))return-1;const t=e.length;let r=0,s=0;for(;s<t;s++)if("\\"===e[s])s++;else if(e[s]===n[0])r++;else if(e[s]===n[1]&&(r--,r<0))return s;return-1}(t[2],"()");if(l>-1){const p=(0===t[0].indexOf("!")?5:4)+t[1].length+l;t[2]=t[2].substring(0,l),t[0]=t[0].substring(0,p).trim(),t[3]=""}}let s=t[2],a="";if(this.options.pedantic){const l=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);l&&(s=l[1],a=l[3])}else a=t[3]?t[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(s=this.options.pedantic&&!/>$/.test(r)?s.slice(1):s.slice(1,-1)),n0(t,{href:s&&s.replace(this.rules.inline._escapes,"$1"),title:a&&a.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(n,t){let r;if((r=this.rules.inline.reflink.exec(n))||(r=this.rules.inline.nolink.exec(n))){let s=(r[2]||r[1]).replace(/\s+/g," ");if(s=t[s.toLowerCase()],!s||!s.href){const a=r[0].charAt(0);return{type:"text",raw:a,text:a}}return n0(r,s,r[0],this.lexer)}}emStrong(n,t,r=""){let s=this.rules.inline.emStrong.lDelim.exec(n);if(!s||s[3]&&r.match(/[\p{L}\p{N}]/u))return;const a=s[1]||s[2]||"";if(!a||a&&(""===r||this.rules.inline.punctuation.exec(r))){const l=s[0].length-1;let u,p,h=l,S=0;const G="*"===s[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(G.lastIndex=0,t=t.slice(-1*n.length+l);null!=(s=G.exec(t));){if(u=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!u)continue;if(p=u.length,s[3]||s[4]){h+=p;continue}if((s[5]||s[6])&&l%3&&!((l+p)%3)){S+=p;continue}if(h-=p,h>0)continue;if(p=Math.min(p,p+h+S),Math.min(l,p)%2){const J=n.slice(1,l+s.index+p);return{type:"em",raw:n.slice(0,l+s.index+p+1),text:J,tokens:this.lexer.inlineTokens(J,[])}}const W=n.slice(2,l+s.index+p-1);return{type:"strong",raw:n.slice(0,l+s.index+p+1),text:W,tokens:this.lexer.inlineTokens(W,[])}}}}codespan(n){const t=this.rules.inline.code.exec(n);if(t){let r=t[2].replace(/\n/g," ");const s=/[^ ]/.test(r),a=/^ /.test(r)&&/ $/.test(r);return s&&a&&(r=r.substring(1,r.length-1)),r=ii(r,!0),{type:"codespan",raw:t[0],text:r}}}br(n){const t=this.rules.inline.br.exec(n);if(t)return{type:"br",raw:t[0]}}del(n){const t=this.rules.inline.del.exec(n);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}}autolink(n,t){const r=this.rules.inline.autolink.exec(n);if(r){let s,a;return"@"===r[2]?(s=ii(this.options.mangle?t(r[1]):r[1]),a="mailto:"+s):(s=ii(r[1]),a=s),{type:"link",raw:r[0],text:s,href:a,tokens:[{type:"text",raw:s,text:s}]}}}url(n,t){let r;if(r=this.rules.inline.url.exec(n)){let s,a;if("@"===r[2])s=ii(this.options.mangle?t(r[0]):r[0]),a="mailto:"+s;else{let l;do{l=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0]}while(l!==r[0]);s=ii(r[0]),a="www."===r[1]?"http://"+s:s}return{type:"link",raw:r[0],text:s,href:a,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(n,t){const r=this.rules.inline.text.exec(n);if(r){let s;return s=this.lexer.state.inRawBlock?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):ii(r[0]):r[0]:ii(this.options.smartypants?t(r[0]):r[0]),{type:"text",raw:r[0],text:s}}}}const nn={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:lh,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\.|[^\[\]\\])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};nn.def=Zn(nn.def).replace("label",nn._label).replace("title",nn._title).getRegex(),nn.bullet=/(?:[*+-]|\d{1,9}[.)])/,nn.listItemStart=Zn(/^( *)(bull) */).replace("bull",nn.bullet).getRegex(),nn.list=Zn(nn.list).replace(/bull/g,nn.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+nn.def.source+")").getRegex(),nn._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",nn._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,nn.html=Zn(nn.html,"i").replace("comment",nn._comment).replace("tag",nn._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),nn.paragraph=Zn(nn._paragraph).replace("hr",nn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",nn._tag).getRegex(),nn.blockquote=Zn(nn.blockquote).replace("paragraph",nn.paragraph).getRegex(),nn.normal=Qo({},nn),nn.gfm=Qo({},nn.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),nn.gfm.table=Zn(nn.gfm.table).replace("hr",nn.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",nn._tag).getRegex(),nn.gfm.paragraph=Zn(nn._paragraph).replace("hr",nn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",nn.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",nn._tag).getRegex(),nn.pedantic=Qo({},nn.normal,{html:Zn("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",nn._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:lh,paragraph:Zn(nn.normal._paragraph).replace("hr",nn.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",nn.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const Ht={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:lh,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:lh,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};function SO(e){return e.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function r0(e){let t,r,n="";const s=e.length;for(t=0;t<s;t++)r=e.charCodeAt(t),Math.random()>.5&&(r="x"+r.toString(16)),n+="&#"+r+";";return n}Ht._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",Ht.punctuation=Zn(Ht.punctuation).replace(/punctuation/g,Ht._punctuation).getRegex(),Ht.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,Ht.escapedEmSt=/\\\*|\\_/g,Ht._comment=Zn(nn._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),Ht.emStrong.lDelim=Zn(Ht.emStrong.lDelim).replace(/punct/g,Ht._punctuation).getRegex(),Ht.emStrong.rDelimAst=Zn(Ht.emStrong.rDelimAst,"g").replace(/punct/g,Ht._punctuation).getRegex(),Ht.emStrong.rDelimUnd=Zn(Ht.emStrong.rDelimUnd,"g").replace(/punct/g,Ht._punctuation).getRegex(),Ht._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,Ht._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,Ht._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,Ht.autolink=Zn(Ht.autolink).replace("scheme",Ht._scheme).replace("email",Ht._email).getRegex(),Ht._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,Ht.tag=Zn(Ht.tag).replace("comment",Ht._comment).replace("attribute",Ht._attribute).getRegex(),Ht._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Ht._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,Ht._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,Ht.link=Zn(Ht.link).replace("label",Ht._label).replace("href",Ht._href).replace("title",Ht._title).getRegex(),Ht.reflink=Zn(Ht.reflink).replace("label",Ht._label).replace("ref",nn._label).getRegex(),Ht.nolink=Zn(Ht.nolink).replace("ref",nn._label).getRegex(),Ht.reflinkSearch=Zn(Ht.reflinkSearch,"g").replace("reflink",Ht.reflink).replace("nolink",Ht.nolink).getRegex(),Ht.normal=Qo({},Ht),Ht.pedantic=Qo({},Ht.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Zn(/^!?\[(label)\]\((.*?)\)/).replace("label",Ht._label).getRegex(),reflink:Zn(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ht._label).getRegex()}),Ht.gfm=Qo({},Ht.normal,{escape:Zn(Ht.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),Ht.gfm.url=Zn(Ht.gfm.url,"i").replace("email",Ht.gfm._extended_email).getRegex(),Ht.breaks=Qo({},Ht.gfm,{br:Zn(Ht.br).replace("{2,}","*").getRegex(),text:Zn(Ht.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});class Ws{constructor(n){this.tokens=[],this.tokens.links=Object.create(null),this.options=n||Ju,this.options.tokenizer=this.options.tokenizer||new wg,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:nn.normal,inline:Ht.normal};this.options.pedantic?(t.block=nn.pedantic,t.inline=Ht.pedantic):this.options.gfm&&(t.block=nn.gfm,t.inline=this.options.breaks?Ht.breaks:Ht.gfm),this.tokenizer.rules=t}static get rules(){return{block:nn,inline:Ht}}static lex(n,t){return new Ws(t).lex(n)}static lexInline(n,t){return new Ws(t).inlineTokens(n)}lex(n){let t;for(n=n.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(n,this.tokens);t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(n,t=[]){let r,s,a,l;for(this.options.pedantic&&(n=n.replace(/^ +$/gm,""));n;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(u=>!!(r=u.call({lexer:this},n,t))&&(n=n.substring(r.raw.length),t.push(r),!0)))){if(r=this.tokenizer.space(n)){n=n.substring(r.raw.length),1===r.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(r);continue}if(r=this.tokenizer.code(n)){n=n.substring(r.raw.length),s=t[t.length-1],!s||"paragraph"!==s.type&&"text"!==s.type?t.push(r):(s.raw+="\n"+r.raw,s.text+="\n"+r.text,this.inlineQueue[this.inlineQueue.length-1].src=s.text);continue}if(r=this.tokenizer.fences(n)){n=n.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(n)){n=n.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(n)){n=n.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(n)){n=n.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(n)){n=n.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(n)){n=n.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(n)){n=n.substring(r.raw.length),s=t[t.length-1],!s||"paragraph"!==s.type&&"text"!==s.type?this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title}):(s.raw+="\n"+r.raw,s.text+="\n"+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=s.text);continue}if(r=this.tokenizer.table(n)){n=n.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(n)){n=n.substring(r.raw.length),t.push(r);continue}if(a=n,this.options.extensions&&this.options.extensions.startBlock){let u=1/0;const p=n.slice(1);let h;this.options.extensions.startBlock.forEach(function(S){h=S.call({lexer:this},p),"number"==typeof h&&h>=0&&(u=Math.min(u,h))}),u<1/0&&u>=0&&(a=n.substring(0,u+1))}if(this.state.top&&(r=this.tokenizer.paragraph(a))){s=t[t.length-1],l&&"paragraph"===s.type?(s.raw+="\n"+r.raw,s.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(r),l=a.length!==n.length,n=n.substring(r.raw.length);continue}if(r=this.tokenizer.text(n)){n=n.substring(r.raw.length),s=t[t.length-1],s&&"text"===s.type?(s.raw+="\n"+r.raw,s.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=s.text):t.push(r);continue}if(n){const u="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(u);break}throw new Error(u)}}return this.state.top=!0,t}inline(n,t){this.inlineQueue.push({src:n,tokens:t})}inlineTokens(n,t=[]){let r,s,a,u,p,h,l=n;if(this.tokens.links){const S=Object.keys(this.tokens.links);if(S.length>0)for(;null!=(u=this.tokenizer.rules.inline.reflinkSearch.exec(l));)S.includes(u[0].slice(u[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,u.index)+"["+t0("a",u[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(u=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,u.index)+"["+t0("a",u[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(u=this.tokenizer.rules.inline.escapedEmSt.exec(l));)l=l.slice(0,u.index)+"++"+l.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;n;)if(p||(h=""),p=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(S=>!!(r=S.call({lexer:this},n,t))&&(n=n.substring(r.raw.length),t.push(r),!0)))){if(r=this.tokenizer.escape(n)){n=n.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(n)){n=n.substring(r.raw.length),s=t[t.length-1],s&&"text"===r.type&&"text"===s.type?(s.raw+=r.raw,s.text+=r.text):t.push(r);continue}if(r=this.tokenizer.link(n)){n=n.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(n,this.tokens.links)){n=n.substring(r.raw.length),s=t[t.length-1],s&&"text"===r.type&&"text"===s.type?(s.raw+=r.raw,s.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(n,l,h)){n=n.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(n)){n=n.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(n)){n=n.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(n)){n=n.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(n,r0)){n=n.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(n,r0))){n=n.substring(r.raw.length),t.push(r);continue}if(a=n,this.options.extensions&&this.options.extensions.startInline){let S=1/0;const G=n.slice(1);let W;this.options.extensions.startInline.forEach(function(J){W=J.call({lexer:this},G),"number"==typeof W&&W>=0&&(S=Math.min(S,W))}),S<1/0&&S>=0&&(a=n.substring(0,S+1))}if(r=this.tokenizer.inlineText(a,SO)){n=n.substring(r.raw.length),"_"!==r.raw.slice(-1)&&(h=r.raw.slice(-1)),p=!0,s=t[t.length-1],s&&"text"===s.type?(s.raw+=r.raw,s.text+=r.text):t.push(r);continue}if(n){const S="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(S);break}throw new Error(S)}}return t}}class Vd{constructor(n){this.options=n||Ju}code(n,t,r){const s=(t||"").match(/\S*/)[0];if(this.options.highlight){const a=this.options.highlight(n,s);null!=a&&a!==n&&(r=!0,n=a)}return n=n.replace(/\n$/,"")+"\n",s?'<pre><code class="'+this.options.langPrefix+ii(s,!0)+'">'+(r?n:ii(n,!0))+"</code></pre>\n":"<pre><code>"+(r?n:ii(n,!0))+"</code></pre>\n"}blockquote(n){return"<blockquote>\n"+n+"</blockquote>\n"}html(n){return n}heading(n,t,r,s){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+s.slug(r)+'">'+n+"</h"+t+">\n":"<h"+t+">"+n+"</h"+t+">\n"}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(n,t,r){const s=t?"ol":"ul";return"<"+s+(t&&1!==r?' start="'+r+'"':"")+">\n"+n+"</"+s+">\n"}listitem(n){return"<li>"+n+"</li>\n"}checkbox(n){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(n){return"<p>"+n+"</p>\n"}table(n,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+n+"</thead>\n"+t+"</table>\n"}tablerow(n){return"<tr>\n"+n+"</tr>\n"}tablecell(n,t){const r=t.header?"th":"td";return(t.align?"<"+r+' align="'+t.align+'">':"<"+r+">")+n+"</"+r+">\n"}strong(n){return"<strong>"+n+"</strong>"}em(n){return"<em>"+n+"</em>"}codespan(n){return"<code>"+n+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(n){return"<del>"+n+"</del>"}link(n,t,r){if(null===(n=Y_(this.options.sanitize,this.options.baseUrl,n)))return r;let s='<a href="'+ii(n)+'"';return t&&(s+=' title="'+t+'"'),s+=">"+r+"</a>",s}image(n,t,r){if(null===(n=Y_(this.options.sanitize,this.options.baseUrl,n)))return r;let s='<img src="'+n+'" alt="'+r+'"';return t&&(s+=' title="'+t+'"'),s+=this.options.xhtml?"/>":">",s}text(n){return n}}class o0{strong(n){return n}em(n){return n}codespan(n){return n}del(n){return n}html(n){return n}text(n){return n}link(n,t,r){return""+r}image(n,t,r){return""+r}br(){return""}}class s0{constructor(){this.seen={}}serialize(n){return n.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(n,t){let r=n,s=0;if(this.seen.hasOwnProperty(r)){s=this.seen[n];do{s++,r=n+"-"+s}while(this.seen.hasOwnProperty(r))}return t||(this.seen[n]=s,this.seen[r]=0),r}slug(n,t={}){const r=this.serialize(n);return this.getNextSafeSlug(r,t.dryrun)}}class Js{constructor(n){this.options=n||Ju,this.options.renderer=this.options.renderer||new Vd,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new o0,this.slugger=new s0}static parse(n,t){return new Js(t).parse(n)}static parseInline(n,t){return new Js(t).parseInline(n)}parse(n,t=!0){let s,a,l,u,p,h,S,G,W,J,ve,Ne,Re,De,Je,et,gt,St,Ft,r="";const Kt=n.length;for(s=0;s<Kt;s++)if(J=n[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[J.type]&&(Ft=this.options.extensions.renderers[J.type].call({parser:this},J),!1!==Ft||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(J.type)))r+=Ft||"";else switch(J.type){case"space":continue;case"hr":r+=this.renderer.hr();continue;case"heading":r+=this.renderer.heading(this.parseInline(J.tokens),J.depth,Q_(this.parseInline(J.tokens,this.textRenderer)),this.slugger);continue;case"code":r+=this.renderer.code(J.text,J.lang,J.escaped);continue;case"table":for(G="",S="",u=J.header.length,a=0;a<u;a++)S+=this.renderer.tablecell(this.parseInline(J.header[a].tokens),{header:!0,align:J.align[a]});for(G+=this.renderer.tablerow(S),W="",u=J.rows.length,a=0;a<u;a++){for(h=J.rows[a],S="",p=h.length,l=0;l<p;l++)S+=this.renderer.tablecell(this.parseInline(h[l].tokens),{header:!1,align:J.align[l]});W+=this.renderer.tablerow(S)}r+=this.renderer.table(G,W);continue;case"blockquote":W=this.parse(J.tokens),r+=this.renderer.blockquote(W);continue;case"list":for(ve=J.ordered,Ne=J.start,Re=J.loose,u=J.items.length,W="",a=0;a<u;a++)Je=J.items[a],et=Je.checked,gt=Je.task,De="",Je.task&&(St=this.renderer.checkbox(et),Re?Je.tokens.length>0&&"paragraph"===Je.tokens[0].type?(Je.tokens[0].text=St+" "+Je.tokens[0].text,Je.tokens[0].tokens&&Je.tokens[0].tokens.length>0&&"text"===Je.tokens[0].tokens[0].type&&(Je.tokens[0].tokens[0].text=St+" "+Je.tokens[0].tokens[0].text)):Je.tokens.unshift({type:"text",text:St}):De+=St),De+=this.parse(Je.tokens,Re),W+=this.renderer.listitem(De,gt,et);r+=this.renderer.list(W,ve,Ne);continue;case"html":r+=this.renderer.html(J.text);continue;case"paragraph":r+=this.renderer.paragraph(this.parseInline(J.tokens));continue;case"text":for(W=J.tokens?this.parseInline(J.tokens):J.text;s+1<Kt&&"text"===n[s+1].type;)J=n[++s],W+="\n"+(J.tokens?this.parseInline(J.tokens):J.text);r+=t?this.renderer.paragraph(W):W;continue;default:{const Zt='Token with "'+J.type+'" type was not found.';if(this.options.silent)return void console.error(Zt);throw new Error(Zt)}}return r}parseInline(n,t){t=t||this.renderer;let s,a,l,r="";const u=n.length;for(s=0;s<u;s++)if(a=n[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]&&(l=this.options.extensions.renderers[a.type].call({parser:this},a),!1!==l||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)))r+=l||"";else switch(a.type){case"escape":case"text":r+=t.text(a.text);break;case"html":r+=t.html(a.text);break;case"link":r+=t.link(a.href,a.title,this.parseInline(a.tokens,t));break;case"image":r+=t.image(a.href,a.title,a.text);break;case"strong":r+=t.strong(this.parseInline(a.tokens,t));break;case"em":r+=t.em(this.parseInline(a.tokens,t));break;case"codespan":r+=t.codespan(a.text);break;case"br":r+=t.br();break;case"del":r+=t.del(this.parseInline(a.tokens,t));break;default:{const p='Token with "'+a.type+'" type was not found.';if(this.options.silent)return void console.error(p);throw new Error(p)}}return r}}function un(e,n,t){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof n&&(t=n,n=null),e0(n=Qo({},un.defaults,n||{})),t){const r=n.highlight;let s;try{s=Ws.lex(e,n)}catch(u){return t(u)}const a=function(u){let p;if(!u)try{n.walkTokens&&un.walkTokens(s,n.walkTokens),p=Js.parse(s,n)}catch(h){u=h}return n.highlight=r,u?t(u):t(null,p)};if(!r||r.length<3||(delete n.highlight,!s.length))return a();let l=0;return un.walkTokens(s,function(u){"code"===u.type&&(l++,setTimeout(()=>{r(u.text,u.lang,function(p,h){if(p)return a(p);null!=h&&h!==u.text&&(u.text=h,u.escaped=!0),l--,0===l&&a()})},0))}),void(0===l&&a())}try{const r=Ws.lex(e,n);return n.walkTokens&&un.walkTokens(r,n.walkTokens),Js.parse(r,n)}catch(r){if(r.message+="\nPlease report this to https://github.com/markedjs/marked.",n.silent)return"<p>An error occurred:</p><pre>"+ii(r.message+"",!0)+"</pre>";throw r}}un.options=un.setOptions=function(e){return Qo(un.defaults,e),function lO(e){Ju=e}(un.defaults),un},un.getDefaults=function W_(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}},un.defaults=Ju,un.use=function(...e){const n=Qo({},...e),t=un.defaults.extensions||{renderers:{},childTokens:{}};let r;e.forEach(s=>{if(s.extensions&&(r=!0,s.extensions.forEach(a=>{if(!a.name)throw new Error("extension name required");if(a.renderer){const l=t.renderers?t.renderers[a.name]:null;t.renderers[a.name]=l?function(...u){let p=a.renderer.apply(this,u);return!1===p&&(p=l.apply(this,u)),p}:a.renderer}if(a.tokenizer){if(!a.level||"block"!==a.level&&"inline"!==a.level)throw new Error("extension level must be 'block' or 'inline'");t[a.level]?t[a.level].unshift(a.tokenizer):t[a.level]=[a.tokenizer],a.start&&("block"===a.level?t.startBlock?t.startBlock.push(a.start):t.startBlock=[a.start]:"inline"===a.level&&(t.startInline?t.startInline.push(a.start):t.startInline=[a.start]))}a.childTokens&&(t.childTokens[a.name]=a.childTokens)})),s.renderer){const a=un.defaults.renderer||new Vd;for(const l in s.renderer){const u=a[l];a[l]=(...p)=>{let h=s.renderer[l].apply(a,p);return!1===h&&(h=u.apply(a,p)),h}}n.renderer=a}if(s.tokenizer){const a=un.defaults.tokenizer||new wg;for(const l in s.tokenizer){const u=a[l];a[l]=(...p)=>{let h=s.tokenizer[l].apply(a,p);return!1===h&&(h=u.apply(a,p)),h}}n.tokenizer=a}if(s.walkTokens){const a=un.defaults.walkTokens;n.walkTokens=function(l){s.walkTokens.call(this,l),a&&a.call(this,l)}}r&&(n.extensions=t),un.setOptions(n)})},un.walkTokens=function(e,n){for(const t of e)switch(n.call(un,t),t.type){case"table":for(const r of t.header)un.walkTokens(r.tokens,n);for(const r of t.rows)for(const s of r)un.walkTokens(s.tokens,n);break;case"list":un.walkTokens(t.items,n);break;default:un.defaults.extensions&&un.defaults.extensions.childTokens&&un.defaults.extensions.childTokens[t.type]?un.defaults.extensions.childTokens[t.type].forEach(function(r){un.walkTokens(t[r],n)}):t.tokens&&un.walkTokens(t.tokens,n)}},un.parseInline=function(e,n){if(null==e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");e0(n=Qo({},un.defaults,n||{}));try{const t=Ws.lexInline(e,n);return n.walkTokens&&un.walkTokens(t,n.walkTokens),Js.parseInline(t,n)}catch(t){if(t.message+="\nPlease report this to https://github.com/markedjs/marked.",n.silent)return"<p>An error occurred:</p><pre>"+ii(t.message+"",!0)+"</pre>";throw t}},un.Parser=Js,un.parser=Js.parse,un.Renderer=Vd,un.TextRenderer=o0,un.Lexer=Ws,un.lexer=Ws.lex,un.Tokenizer=wg,un.Slugger=s0,un.parse=un;var EO=x(590);const AO=["*"];var $d=(()=>{return(e=$d||($d={})).CommandLine="command-line",e.LineHighlight="line-highlight",e.LineNumbers="line-numbers",$d;var e})();class a0{}const l0=new o.InjectionToken("SECURITY_CONTEXT");let ch=(()=>{class e{constructor(t,r,s,a,l){this.platform=t,this.securityContext=r,this.http=s,this.sanitizer=l,this.initialMarkedOptions={renderer:new Vd},this.options=a}get options(){return this._options}set options(t){this._options={...this.initialMarkedOptions,...t}}get renderer(){return this.options.renderer}set renderer(t){this.options.renderer=t}compile(t,r=!1,s=!1,a=this.options){const l=this.trimIndentation(t),u=r?this.decodeHtml(l):l,h=un(s?this.renderEmoji(u):u,a);return this.sanitizer.sanitize(this.securityContext,h)||""}getSource(t){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(t,{responseType:"text"}).pipe((0,be.U)(r=>this.handleExtension(t,r)))}highlight(t){if((0,C.isPlatformBrowser)(this.platform)&&"undefined"!=typeof Prism){t||(t=document);const r=t.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(r,s=>s.classList.add("language-none")),Prism.highlightAllUnder(t)}}renderKatex(t,r){if(!(0,C.isPlatformBrowser)(this.platform))return t;if("undefined"==typeof katex||void 0===katex.renderToString)throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");return t.replace(/\$([^\s][^$]*?[^\s])\$/gm,(s,a)=>katex.renderToString(a,r))}decodeHtml(t){if(!(0,C.isPlatformBrowser)(this.platform))return t;const r=document.createElement("textarea");return r.innerHTML=t,r.value}handleExtension(t,r){const s=t?t.split("?")[0].split(".").splice(-1).join():"";return"md"!==s?"```"+s+"\n"+r+"\n```":r}renderEmoji(t){if(!(0,C.isPlatformBrowser)(this.platform))return t;if("undefined"==typeof joypixels||void 0===joypixels.shortnameToUnicode)throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(t)}trimIndentation(t){if(!t)return"";let r;return t.split("\n").map(s=>{let a=r;return s.length>0&&(a=isNaN(a)?s.search(/\S|$/):Math.min(s.search(/\S|$/),a)),isNaN(r)&&(r=a),a?s.substring(a):s}).join("\n")}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(o.PLATFORM_ID),o.\u0275\u0275inject(l0),o.\u0275\u0275inject(F.HttpClient,8),o.\u0275\u0275inject(a0,8),o.\u0275\u0275inject(I.H7))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),u0=(()=>{class e{constructor(t,r){this.element=t,this.markdownService=r,this.error=new o.EventEmitter,this.load=new o.EventEmitter,this.ready=new o.EventEmitter,this._commandLine=!1,this._emoji=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1}get emoji(){return this._emoji}set emoji(t){this._emoji=this.coerceBooleanProperty(t)}get katex(){return this._katex}set katex(t){this._katex=this.coerceBooleanProperty(t)}get lineHighlight(){return this._lineHighlight}set lineHighlight(t){this._lineHighlight=this.coerceBooleanProperty(t)}get lineNumbers(){return this._lineNumbers}set lineNumbers(t){this._lineNumbers=this.coerceBooleanProperty(t)}get commandLine(){return this._commandLine}set commandLine(t){this._commandLine=this.coerceBooleanProperty(t)}ngOnChanges(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion()}render(t,r=!1){let s=this.markdownService.compile(t,r,this.emoji);s=this.katex?this.markdownService.renderKatex(s,this.katexOptions):s,this.element.nativeElement.innerHTML=s,this.handlePlugins(),this.markdownService.highlight(this.element.nativeElement),this.ready.emit()}coerceBooleanProperty(t){return null!=t&&"false"!=`${String(t)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe(t=>{this.render(t),this.load.emit(t)},t=>this.error.emit(t))}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,$d.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,$d.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(t,r){const s=t.querySelectorAll("pre");for(let a=0;a<s.length;a++){const l=r instanceof Array?r:[r];s.item(a).classList.add(...l)}}setPluginOptions(t,r){const s=t.querySelectorAll("pre");for(let a=0;a<s.length;a++)Object.keys(r).forEach(l=>{const u=r[l];if(u){const p=this.toLispCase(l);s.item(a).setAttribute(p,u.toString())}})}toLispCase(t){const r=t.match(/([A-Z])/g);if(!r)return t;let s=t.toString();for(let a=0,l=r.length;a<l;a++)s=s.replace(new RegExp(r[a]),"-"+r[a].toLowerCase());return"-"===s.slice(0,1)&&(s=s.slice(1)),s}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(ch))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},features:[o.\u0275\u0275NgOnChangesFeature],ngContentSelectors:AO,decls:1,vars:0,template:function(t,r){1&t&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275projection(0))},encapsulation:2}),e})(),c0=(()=>{class e{constructor(t,r,s,a){this.domSanitizer=t,this.elementRef=r,this.markdownService=s,this.zone=a}transform(t){if(null==t)return"";if("string"!=typeof t)return console.error(`MarkdownPipe has been invoked with an invalid value type [${typeof t}]`),t;const r=this.markdownService.compile(t);return this.zone.onStable.pipe((0,EO.P)()).subscribe(()=>this.markdownService.highlight(this.elementRef.nativeElement)),this.domSanitizer.bypassSecurityTrustHtml(r)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(I.H7,16),o.\u0275\u0275directiveInject(o.ElementRef,16),o.\u0275\u0275directiveInject(ch,16),o.\u0275\u0275directiveInject(o.NgZone,16))},e.\u0275pipe=o.\u0275\u0275definePipe({name:"markdown",type:e,pure:!0}),e})(),Cg=(()=>{class e{static forRoot(t){return{ngModule:e,providers:[ch,t&&t.loader||[],t&&t.markedOptions||[],{provide:l0,useValue:t&&null!=t.sanitize?t.sanitize:o.SecurityContext.HTML}]}}static forChild(){return{ngModule:e}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({}),e})();var kl=x(1884),Dr=x(4859),Yt=x(9549),oi=x(4385),cr=x(3238),Dt=x(5938);function kO(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function OO(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"form",3),o.\u0275\u0275listener("ngSubmit",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().submit()}),o.\u0275\u0275elementStart(1,"mat-dialog-content"),o.\u0275\u0275elementStart(2,"div",4),o.\u0275\u0275template(3,kO,1,0,"ng-container",5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"mat-dialog-actions"),o.\u0275\u0275elementStart(5,"button",6),o.\u0275\u0275text(6,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){const t=o.\u0275\u0275nextContext(),r=o.\u0275\u0275reference(3);o.\u0275\u0275property("formGroup",t.contentForm),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngTemplateOutlet",r),o.\u0275\u0275advance(2),o.\u0275\u0275property("disabled",!t.contentForm.valid)}}function FO(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function DO(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div",4),o.\u0275\u0275template(1,FO,1,0,"ng-container",5),o.\u0275\u0275elementEnd()),2&e){o.\u0275\u0275nextContext();const t=o.\u0275\u0275reference(3);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",t)}}function MO(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(t.key)}}function NO(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"ul",18),o.\u0275\u0275template(1,MO,2,1,"li",19),o.\u0275\u0275pipe(2,"keyvalue"),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("hidden",!0),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(2,2,t.tokens))}}function jO(e,n){if(1&e&&(o.\u0275\u0275element(0,"classifieds-ui-dynamic-content-viewer",20),o.\u0275\u0275pipe(1,"markdown")),2&e){const t=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("content",o.\u0275\u0275pipeBind1(1,1,t.preview))}}function BO(e,n){if(1&e&&o.\u0275\u0275element(0,"classifieds-ui-dynamic-content-viewer",20),2&e){const t=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("content",t.preview)}}function LO(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"as-split",7),o.\u0275\u0275elementStart(1,"as-split-area",8),o.\u0275\u0275elementStart(2,"div"),o.\u0275\u0275template(3,NO,3,4,"ul",9),o.\u0275\u0275elementStart(4,"mat-form-field"),o.\u0275\u0275elementStart(5,"mat-label"),o.\u0275\u0275text(6,"Content Type"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"mat-select",10),o.\u0275\u0275elementStart(8,"mat-option",11),o.\u0275\u0275text(9,"Markdown"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(10,"mat-option",12),o.\u0275\u0275text(11,"HTML"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(12,"mat-option",13),o.\u0275\u0275text(13,"JSON"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(14,"as-split",14),o.\u0275\u0275elementStart(15,"as-split-area",8),o.\u0275\u0275elementStart(16,"div"),o.\u0275\u0275element(17,"textarea",15),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(18,"as-split-area",8),o.\u0275\u0275elementStart(19,"div"),o.\u0275\u0275element(20,"textarea",16),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(21,"as-split-area",8),o.\u0275\u0275template(22,jO,2,3,"classifieds-ui-dynamic-content-viewer",17),o.\u0275\u0275template(23,BO,1,1,"classifieds-ui-dynamic-content-viewer",17),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275property("direction",t.splitDirection)("formGroup",t.contentForm),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",t.tokens),o.\u0275\u0275advance(14),o.\u0275\u0275property("cols",t.cols)("rows",t.rows),o.\u0275\u0275advance(3),o.\u0275\u0275property("cols",t.cols)("rows",t.rows),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",t.isMarkdown),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!t.isMarkdown)}}class Ol{constructor(n){n&&(this.content=n.content,this.contentType=n.contentType,n.jsFile&&""!==n.jsFile&&(this.jsFile=n.jsFile),n.jsScript&&""!==n.jsScript&&(this.jsScript=n.jsScript))}}let dh=(()=>{class e{constructor(t){this.fb=t,this.submitted=new o.EventEmitter,this.splitDirection="vertical",this.rows=40,this.cols=100,this.rootForm=!0,this.onTouched=()=>{},this.contentForm=this.fb.group({content:this.fb.control("",d.kI.required),contentType:this.fb.control("",d.kI.required),jsScript:this.fb.control("")}),this.isMarkdown=!1,this.contentEditorOptions={theme:"vs-dark",language:"text/html"}}set snippet(t){void 0!==t&&this.contentForm.setValue({...t,jsScript:t.jsScript&&""!==t.jsScript?t.jsScript:""})}ngOnInit(){this.contentForm.get("content").valueChanges.pipe((0,kl.x)(),(0,qn.b)(500),(0,be.U)(t=>void 0!==this.tokens?this.replaceTokens(t):t)).subscribe(t=>{this.preview=t}),this.contentForm.get("contentType").valueChanges.subscribe(t=>{this.isMarkdown="text/markdown"===t})}writeValue(t){t&&(console.log(`write value: ${t}`),this.contentForm.setValue(t,{emitEvent:!1}))}registerOnChange(t){this.contentForm.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.contentForm.disable():this.contentForm.enable()}validate(t){return this.contentForm.valid?null:{invalidForm:{valid:!1,message:"snippet is invalid"}}}submit(){this.submitted.emit(new Ol({content:this.contentForm.get("content").value,contentType:this.contentForm.get("contentType").value,jsScript:this.contentForm.get("jsScript").value}))}replaceTokens(t){return this.tokens&&this.tokens.forEach((r,s)=>{t=t.replace(`[${s}]`,`${r} [token = '${s}']`)}),t}addScript(){let t=document.createElement("script");t.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(t)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-snippet-form"]],inputs:{tokens:"tokens",splitDirection:"splitDirection",rows:"rows",cols:"cols",rootForm:"rootForm",snippet:"snippet"},outputs:{submitted:"submitted"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>e),multi:!0}])],decls:4,vars:2,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],["class","content-inner",4,"ngIf"],["formBodyTpl",""],[3,"formGroup","ngSubmit"],[1,"content-inner"],[4,"ngTemplateOutlet"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"],[3,"direction","formGroup"],["size","50"],[3,"hidden",4,"ngIf"],["required","","formControlName","contentType"],["value","text/markdown"],["value","text/html"],["value","application/json"],["direction","horizontal"],["formControlName","content",3,"cols","rows"],["formControlName","jsScript",3,"cols","rows"],[3,"content",4,"ngIf"],[3,"hidden"],[4,"ngFor","ngForOf"],[3,"content"]],template:function(t,r){1&t&&(o.\u0275\u0275template(0,OO,7,3,"form",0),o.\u0275\u0275template(1,DO,2,1,"div",1),o.\u0275\u0275template(2,LO,24,9,"ng-template",null,2,o.\u0275\u0275templateRefExtractor)),2&t&&(o.\u0275\u0275property("ngIf",r.rootForm),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!r.rootForm))},directives:[Dr.lW,Ud,Yt.KE,oi.gD,cr.ey,on.DynamicContentViewer,C.NgIf,d._Y,d.JL,d.sg,Dt.xY,C.NgTemplateOutlet,Dt.H8,Dt.ZT,Gd,C.NgForOf,Yt.hX,d.Q7,d.JJ,d.u,d.Fj],pipes:[C.KeyValuePipe,c0],styles:[""]}),e})(),xg=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[C.CommonModule,d.UX,d.u5,al,sh,ri.MaterialModule,ru,Cg,on.UtilsModule]]}),e})(),d0=(()=>{class e{parseSnippet({snippet:t}){return(0,Be.of)(t.content)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var en=x(9507),zO=x(9770);function Xn(e,n,t){return(0,zO.P)(()=>e()?n:t)}var Bn=x(9841),zr=x(6590),Hd=x(6709),sr=x(4144),Zi=x(1781);function UO(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-option",10),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;o.\u0275\u0275property("value",t.value.id),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(t.value.title)}}function GO(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-option",10),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;o.\u0275\u0275property("value",t),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(t)}}function VO(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-form-field",2),o.\u0275\u0275elementStart(1,"mat-label"),o.\u0275\u0275text(2,"Context"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"mat-select",11),o.\u0275\u0275template(4,GO,2,2,"mat-option",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(4),o.\u0275\u0275property("ngForOf",t.contexts)}}function $O(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div",12),o.\u0275\u0275elementStart(1,"mat-checkbox",13),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e){const t=n.index,r=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("formGroupName",t),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(r.flagsAsArray[t])}}function HO(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div",1),o.\u0275\u0275elementStart(1,"div"),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"mat-form-field",2),o.\u0275\u0275elementStart(4,"mat-label"),o.\u0275\u0275text(5,"Type"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"mat-select",3),o.\u0275\u0275template(7,UO,2,2,"mat-option",4),o.\u0275\u0275pipe(8,"keyvalue"),o.\u0275\u0275pipe(9,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(10,VO,5,1,"mat-form-field",5),o.\u0275\u0275elementStart(11,"mat-form-field",2),o.\u0275\u0275element(12,"input",6),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(13,"mat-form-field",2),o.\u0275\u0275element(14,"input",7),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(15,"div",8),o.\u0275\u0275template(16,$O,3,2,"div",9),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,r=n.index,s=o.\u0275\u0275nextContext();o.\u0275\u0275property("formGroup",t),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(s.paramName(r)),o.\u0275\u0275advance(5),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(8,5,o.\u0275\u0275pipeBind1(9,7,s.paramPlugins$))),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf","context"==t.get("mapping").get("type").value),o.\u0275\u0275advance(6),o.\u0275\u0275property("ngForOf",t.get("flags").controls)}}function qO(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-option",4),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;o.\u0275\u0275property("value",t.value.id),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(t.value.title)}}class Qs extends en.Plugin{constructor(n){super(n),n&&(this.evalParam=n.evalParam,n.condition&&(this.condition=n.condition),n.usedContexts&&(this.usedContexts=n.usedContexts))}}class si{constructor(n){n&&(this.mapping=new f0(n.mapping),void 0!==n.flags&&(this.flags=n.flags.map(t=>new WO(t))))}}class f0{constructor(n){n&&(this.type=n.type,this.value=n.value,this.testValue=n.testValue,this.context=n.context)}}class WO{constructor(n){n&&(this.name=n.name,this.enabled=n.enabled)}}class Ys{constructor(n){n&&(this.plugin=n.plugin,this.settings=n.settings?new p0(n.settings):new p0)}}class p0{constructor(n){n&&(this.paramsString=n.paramsString,n.params&&Array.isArray(n.params)&&(this.params=n.params.map(t=>new si(t))))}}let Ua=(()=>{class e extends en.BasePluginManager{constructor(t,r){super(t,r)}pluginDef(){return(0,Be.of)(new en.PluginDef({name:"param"}))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(en.PluginConfigurationManager),o.\u0275\u0275inject(on.ModuleLoaderService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),qd=(()=>{class e{constructor(t,r){this.fb=t,this.ppm=r,this.contexts=[],this.params$=new m.X({}),this.paramValues$=new m.X([]),this.init$=new M.x,this.formArray=this.fb.array([]),this.paramPlugins$=this.ppm.getPlugins(),this.flags=new Map,this.savedParams=new Map,this.paramIndexes=new Map,this.paramsSub=this.params$.pipe((0,ee.b)(s=>{const a=new Map([...this.paramIndexes]);this.formArray.clear(),this.paramIndexes.clear();let l=0;for(const u in s)Array.isArray(s[u])?(s[u].forEach(p=>this.buildParams(p,l,a)),l++):0===s[u].indexOf(":")&&(this.buildParams(s[u],l,a),l++)})).subscribe(),this.savedParamsSub=this.formArray.valueChanges.pipe((0,qn.b)(1e3),(0,ee.b)(s=>{const a=s.length;for(let l=0;l<a;l++)this.savedParams.set(this.paramName(l),new si(s[l]))})).subscribe(),this.paramValuesSub=(0,Bn.a)([this.paramValues$,this.params$,this.init$]).pipe((0,ee.b)(([s])=>{const a=s?s.length:0;for(let l=0;l<a;l++){const u=Array.from(this.paramIndexes).find(([p,h])=>h===l);void 0!==u&&this.savedParams.set(u[0],s[l])}})).subscribe(),this.onTouched=()=>{},this.flags.set("page","Page"),this.flags.set("limit","Limit"),this.flags.set("offset","Offset"),this.flags.set("searchString","Search String")}set params(t){this.params$.next(t)}set paramValues(t){this.paramValues$.next(t)}get flagsAsArray(){const t=[];return this.flags.forEach((r,s)=>{t.push(s)}),t}ngOnInit(){this.init$.next(void 0)}writeValue(t){t&&this.formArray.setValue(t,{emitEvent:!1})}registerOnChange(t){this.formArray.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.formArray.disable():this.formArray.enable()}validate(t){return this.formArray.valid?null:this.formArray.errors}buildParams(t,r,s){console.log(`build param ${t}`),this.paramIndexes.set(t,r),this.formArray.push(this.fb.group({mapping:this.fb.group({type:this.fb.control("",d.kI.required),value:this.fb.control("",d.kI.required),testValue:this.fb.control(""),context:this.fb.control("")}),flags:this.fb.array(this.flagsAsArray.map(a=>this.fb.group({name:a,enabled:this.fb.control(!1)})))})),this.savedParams.has(t)?this.formArray.at(r).setValue(this.savedParams.get(t)):r<this.paramValues$.value.length&&-1===Array.from(s).findIndex(([a,l])=>l===r)&&this.formArray.at(r).setValue(this.paramValues$.value[r])}paramName(t){let r=0;for(const s in this.params$.value)if(Array.isArray(this.params$.value[s]))for(let a=0;a<this.params$.value[s].length;a++){if(t===r)return this.params$.value[s][a];r++}else if(0===this.params$.value[s].indexOf(":")){if(r===t)return this.params$.value[s];r++}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Ua))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-params-form"]],inputs:{contexts:"contexts",params:"params",paramValues:"paramValues"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>e),multi:!0}])],decls:1,vars:1,consts:[[3,"formGroup",4,"ngFor","ngForOf"],[3,"formGroup"],["formGroupName","mapping"],["required","","formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["formGroupName","mapping",4,"ngIf"],["matInput","","formControlName","value","placeholder","value","required",""],["matInput","","formControlName","testValue","placeholder","Test Value","required",""],["formArrayName","flags"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"value"],["formControlName","context"],[3,"formGroupName"],["formControlName","enabled"]],template:function(t,r){1&t&&o.\u0275\u0275template(0,HO,17,9,"div",0),2&t&&o.\u0275\u0275property("ngForOf",r.formArray.controls)},directives:[Yt.KE,oi.gD,cr.ey,Hd.oG,C.NgForOf,d.JL,d.sg,d.x0,Yt.hX,d.Q7,d.JJ,d.u,C.NgIf,sr.Nt,d.Fj,d.CE],pipes:[C.KeyValuePipe,C.AsyncPipe],styles:[""]}),e})(),JO=(()=>{class e{constructor(t){this.fb=t,this.contexts=[],this.settings$=new m.X(void 0),this.afterViewInit$=new M.x,this.paramValues$=new m.X([]),this.formGroup=this.fb.group({paramsString:this.fb.control(""),params:this.fb.control([])}),this.paramsStringChangeSub=this.formGroup.get("paramsString").valueChanges.pipe((0,qn.b)(500)).subscribe(r=>{const s=Zi.parse("?"+r);this.paramsParsed=s}),this.settingsSub=this.settings$.pipe((0,ee.b)(r=>{r&&this.formGroup.get("paramsString").setValue(r.paramsString?r.paramsString:"")})).subscribe(),this.settingsParamsSub=(0,Bn.a)([this.settings$,this.formGroup.get("paramsString").valueChanges]).pipe((0,U.h)(([r])=>void 0!==r),(0,Hn.g)(1),(0,ee.b)(([r])=>this.paramValues$.next(r.params))).subscribe(),this.onTouched=()=>{}}set settings(t){this.settings$.next(t)}writeValue(t){t&&this.formGroup.setValue(t,{emitEvent:!1})}registerOnChange(t){this.formGroup.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.formGroup.disable():this.formGroup.enable()}validate(t){return this.formGroup.valid?null:this.formGroup.errors}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-params-querystring"]],inputs:{contexts:"contexts",settings:"settings"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>e),multi:!0}])],decls:6,vars:4,consts:[[3,"formGroup"],[1,"params-container"],["matInput","","placeholder","Params","formControlName","paramsString"],["formControlName","params",3,"params","paramValues","contexts"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div",1),o.\u0275\u0275elementStart(2,"div"),o.\u0275\u0275elementStart(3,"mat-form-field"),o.\u0275\u0275element(4,"input",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(5,"classifieds-ui-params-form",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.formGroup),o.\u0275\u0275advance(5),o.\u0275\u0275property("params",r.paramsParsed)("paramValues",r.paramValues$.value)("contexts",r.contexts))},directives:[Yt.KE,qd,d.JL,d.sg,sr.Nt,d.Fj,d.JJ,d.u],styles:[""]}),e})(),QO=(()=>{class e{constructor(t){this.fb=t,this.plugins$=new m.X([]),this.title$=new m.X("Plugin"),this.instance$=new m.X(new Ys),this.instanceForm=this.fb.group({plugin:this.fb.control(""),settings:this.fb.control("")}),this.instanceSub=this.instance$.pipe((0,U.h)(r=>!!r),(0,ee.b)(r=>{this.instanceForm.get("plugin").setValue(r.plugin)})).subscribe(),this.onTouched=()=>{}}set title(t){this.title$.next(t)}set plugins(t){this.plugins$.next(t)}set instance(t){this.instance$.next(t)}writeValue(t){t&&this.instanceForm.setValue(t,{emitEvent:!1})}registerOnChange(t){this.instanceForm.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.instanceForm.disable():this.instanceForm.enable()}validate(t){return this.instanceForm.valid?null:this.instanceForm.errors}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-params-plugin-instance"]],inputs:{title:"title",plugins:"plugins",instance:"instance"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>e),multi:!0}])],decls:10,vars:10,consts:[[3,"formGroup"],["required","","formControlName","plugin"],[3,"value",4,"ngFor","ngForOf"],["formControlName","settings",3,"settings"],[3,"value"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"mat-form-field"),o.\u0275\u0275elementStart(2,"mat-label"),o.\u0275\u0275text(3),o.\u0275\u0275pipe(4,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"mat-select",1),o.\u0275\u0275template(6,qO,2,2,"mat-option",2),o.\u0275\u0275pipe(7,"keyvalue"),o.\u0275\u0275pipe(8,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(9,"druid-params-querystring",3),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.instanceForm),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate(o.\u0275\u0275pipeBind1(4,4,r.title$)),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(7,6,o.\u0275\u0275pipeBind1(8,8,r.plugins$))),o.\u0275\u0275advance(3),o.\u0275\u0275property("settings",r.instance$.value.settings))},directives:[Yt.KE,oi.gD,cr.ey,JO,d.JL,d.sg,Yt.hX,d.Q7,d.JJ,d.u,C.NgForOf],pipes:[C.AsyncPipe,C.KeyValuePipe],styles:[""]}),e})(),Zs=(()=>{class e{constructor(t,r){this.paramPluginManager=t,this.tokenizerService=r}paramValue(t,r){return this.paramPluginManager.getPlugins().pipe((0,be.U)(s=>Array.from(s).map(([a,l])=>l)),(0,be.U)(s=>s.find(a=>a.condition&&a.condition({param:t,metadata:r})||!a.condition&&a.id===t.mapping.type)),(0,tt.w)(s=>Xn(()=>!!s,s?s.evalParam({param:t,metadata:r}):(0,Be.of)(),(0,Be.of)(t.mapping.value))),(0,be.U)(s=>t.mapping.value&&"string"==typeof s&&0===this.tokenizerService.discoverTokens(s).length?s:t.mapping.testValue))}paramValues(t){return(0,pn.D)(Array.from(t.keys()).map(r=>this.paramValue(t.get(r),new Map).pipe((0,be.U)(s=>[r,s])))).pipe((0,be.U)(r=>r.reduce((s,a)=>new Map([...s,a]),new Map)),(0,zr.d)(new Map))}resolveParams({params:t}){return(0,tt.w)(()=>Xn(()=>Object.keys(t).length>1,(0,pn.D)(Object.keys(t).map(r=>this.paramValue(t[r],new Map).pipe((0,be.U)(s=>({[r]:s}))))).pipe((0,be.U)(r=>r.reduce((s,a)=>({...s,...a}),{})),(0,be.U)(r=>({options:r}))),Xn(()=>0!==Object.keys(t).length,this.paramValue(0!==Object.keys(t).length?t[Object.keys(t)[0]]:new si,new Map).pipe((0,be.U)(r=>({options:{[Object.keys(t)[0]]:r}}))),(0,Be.of)({options:{}}))))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Ua),o.\u0275\u0275inject(Gn))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Ga=(()=>{class e{constructor(t,r){t.register(new Qs({id:"static",title:"Static",evalParam:({param:e})=>(0,Be.of)(e.mapping.value)})),t.register((e=>new Qs({id:"inputparam",title:"Input Param",evalParam:({param:n,metadata:t})=>(0,Be.of)(n.mapping.value).pipe((0,be.U)(r=>t.has("inputparams")&&t.get("inputparams").has(r)?t.get("inputparams").get(r):void 0),(0,tt.w)(r=>Xn(()=>void 0!==r,void 0!==r?e.paramValue(r,t):(0,Be.of)(n.mapping.testValue),(0,Be.of)(n.mapping.testValue))))}))(r))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Ua),o.\u0275\u0275inject(Zs))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[C.CommonModule,d.u5,d.UX,ri.MaterialModule]]}),e})();const h0="@ngrx/router-store/request",Sg=((0,xt.PH)(h0,(0,xt.Ky)()),"@ngrx/router-store/navigation"),Eg=((0,xt.PH)(Sg,(0,xt.Ky)()),"@ngrx/router-store/cancel"),Ag=((0,xt.PH)(Eg,(0,xt.Ky)()),"@ngrx/router-store/error"),m0=((0,xt.PH)(Ag,(0,xt.Ky)()),"@ngrx/router-store/navigated");(0,xt.PH)(m0,(0,xt.Ky)());class g0{}class v0{serialize(n){return{root:this.serializeRoute(n.root),url:n.url}}serializeRoute(n){const t=n.children.map(r=>this.serializeRoute(r));return{params:n.params,paramMap:n.paramMap,data:n.data,url:n.url,outlet:n.outlet,routeConfig:n.routeConfig?{component:n.routeConfig.component,path:n.routeConfig.path,pathMatch:n.routeConfig.pathMatch,redirectTo:n.routeConfig.redirectTo,outlet:n.routeConfig.outlet}:null,queryParams:n.queryParams,queryParamMap:n.queryParamMap,fragment:n.fragment,component:n.routeConfig?n.routeConfig.component:void 0,root:void 0,parent:void 0,firstChild:t[0],pathFromRoot:void 0,children:t}}}class Pg{serialize(n){return{root:this.serializeRoute(n.root),url:n.url}}serializeRoute(n){const t=n.children.map(r=>this.serializeRoute(r));return{params:n.params,data:n.data,url:n.url,outlet:n.outlet,routeConfig:n.routeConfig?{path:n.routeConfig.path,pathMatch:n.routeConfig.pathMatch,redirectTo:n.routeConfig.redirectTo,outlet:n.routeConfig.outlet}:null,queryParams:n.queryParams,fragment:n.fragment,firstChild:t[0],children:t}}}var Kd=(()=>{return(e=Kd||(Kd={}))[e.PreActivation=1]="PreActivation",e[e.PostActivation=2]="PostActivation",Kd;var e})();const y0=new o.InjectionToken("@ngrx/router-store Internal Configuration"),_0=new o.InjectionToken("@ngrx/router-store Configuration");function ZO(e){return{stateKey:"router",serializer:Pg,navigationActionTiming:Kd.PreActivation,...e}}var To=(()=>{return(e=To||(To={}))[e.NONE=1]="NONE",e[e.ROUTER=2]="ROUTER",e[e.STORE=3]="STORE",To;var e})();let eF=(()=>{class e{constructor(t,r,s,a,l,u){this.store=t,this.router=r,this.serializer=s,this.errorHandler=a,this.config=l,this.activeRuntimeChecks=u,this.lastEvent=null,this.routerState=null,this.trigger=To.NONE,this.stateKey=this.config.stateKey,!(0,xt.rM)()&&(0,o.isDevMode)()&&(u?.strictActionSerializability||u?.strictStateSerializability)&&this.serializer instanceof v0&&console.warn("@ngrx/router-store: The serializability runtime checks cannot be enabled with the DefaultRouterStateSerializer. The default serializer has an unserializable router state and actions that are not serializable. To use the serializability runtime checks either use the MinimalRouterStateSerializer or implement a custom router state serializer. This also applies to Ivy with immutability runtime checks."),this.setUpStoreStateListener(),this.setUpRouterEventsListener()}static forRoot(t={}){return{ngModule:e,providers:[{provide:y0,useValue:t},{provide:_0,useFactory:ZO,deps:[y0]},{provide:g0,useClass:t.serializer?t.serializer:0===t.routerState?v0:Pg}]}}setUpStoreStateListener(){this.store.pipe((0,xt.Ys)(this.stateKey),(0,ao.M)(this.store)).subscribe(([t,r])=>{this.navigateIfNeeded(t,r)})}navigateIfNeeded(t,r){if(!t||!t.state||this.trigger===To.ROUTER||this.lastEvent instanceof Pn.NavigationStart)return;const s=t.state.url;(function tF(e,n){return w0(e)===w0(n)})(this.router.url,s)||(this.storeState=r,this.trigger=To.STORE,this.router.navigateByUrl(s).catch(a=>{this.errorHandler.handleError(a)}))}setUpRouterEventsListener(){const t=this.config.navigationActionTiming===Kd.PostActivation;let r;this.router.events.pipe((0,ao.M)(this.store)).subscribe(([s,a])=>{this.lastEvent=s,s instanceof Pn.NavigationStart?(this.routerState=this.serializer.serialize(this.router.routerState.snapshot),this.trigger!==To.STORE&&(this.storeState=a,this.dispatchRouterRequest(s))):s instanceof Pn.RoutesRecognized?(r=s,!t&&this.trigger!==To.STORE&&this.dispatchRouterNavigation(s)):s instanceof Pn.NavigationCancel?(this.dispatchRouterCancel(s),this.reset()):s instanceof Pn.NavigationError?(this.dispatchRouterError(s),this.reset()):s instanceof Pn.NavigationEnd&&(this.trigger!==To.STORE&&(t&&this.dispatchRouterNavigation(r),this.dispatchRouterNavigated(s)),this.reset())})}dispatchRouterRequest(t){this.dispatchRouterAction(h0,{event:t})}dispatchRouterNavigation(t){const r=this.serializer.serialize(t.state);this.dispatchRouterAction(Sg,{routerState:r,event:new Pn.RoutesRecognized(t.id,t.url,t.urlAfterRedirects,r)})}dispatchRouterCancel(t){this.dispatchRouterAction(Eg,{storeState:this.storeState,event:t})}dispatchRouterError(t){this.dispatchRouterAction(Ag,{storeState:this.storeState,event:new Pn.NavigationError(t.id,t.url,`${t}`)})}dispatchRouterNavigated(t){const r=this.serializer.serialize(this.router.routerState.snapshot);this.dispatchRouterAction(m0,{event:t,routerState:r})}dispatchRouterAction(t,r){this.trigger=To.ROUTER;try{this.store.dispatch({type:t,payload:{routerState:this.routerState,...r,event:0===this.config.routerState?r.event:{id:r.event.id,url:r.event.url,urlAfterRedirects:r.event.urlAfterRedirects}}})}finally{this.trigger=To.NONE}}reset(){this.trigger=To.NONE,this.storeState=null,this.routerState=null}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(xt.yh),o.\u0275\u0275inject(Pn.Router),o.\u0275\u0275inject(g0),o.\u0275\u0275inject(o.ErrorHandler),o.\u0275\u0275inject(_0),o.\u0275\u0275inject(xt.hg))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({}),e})();function w0(e){return e?.length>0&&"/"===e[e.length-1]?e.substring(0,e.length-1):e}function Xd(e=function nF(){return(0,xt.ZF)("router")}()){const n=(0,xt.P1)(e,G=>G&&G.state),t=(0,xt.P1)(n,G=>G&&G.root),r=(0,xt.P1)(t,G=>{if(!G)return;let W=G;for(;W.firstChild;)W=W.firstChild;return W}),s=(0,xt.P1)(t,G=>G&&G.fragment),a=(0,xt.P1)(t,G=>G&&G.queryParams),u=(0,xt.P1)(r,G=>G&&G.params),h=(0,xt.P1)(r,G=>G&&G.data),S=(0,xt.P1)(n,G=>G&&G.url);return{selectCurrentRoute:r,selectFragment:s,selectQueryParams:a,selectQueryParam:G=>(0,xt.P1)(a,W=>W&&W[G]),selectRouteParams:u,selectRouteParam:G=>(0,xt.P1)(u,W=>W&&W[G]),selectRouteData:h,selectUrl:S}}let lF=(()=>{class e{constructor(t){[new Qs({id:"page",title:"Page",usedContexts:()=>(0,Be.of)(["_page"]),condition:({param:e,metadata:n})=>e.flags.findIndex(t=>t.enabled&&"page"===t.name)>-1&&n.has("page"),evalParam:({metadata:n})=>(0,Be.of)(`${n.get("page")}`)}),new Qs({id:"searchstring",title:"Searchstring",condition:({param:e,metadata:n})=>e.flags.findIndex(t=>t.enabled)>-1&&n.has("searchString"),evalParam:({metadata:n})=>(0,Be.of)(`${n.get("searchString")}`)}),new Qs({id:"route",title:"Route",usedContexts:()=>(0,Be.of)(["_route"]),evalParam:({param:e,metadata:n})=>{const t=n.get("_route");return(0,Be.of)(t.params[e.mapping.value])}}),new Qs({id:"querystring",title:"Querystring",usedContexts:()=>(0,Be.of)(["_page"]),evalParam:({param:e,metadata:n})=>{const t=n.get("_route");return(0,Be.of)(t.queryParams[e.mapping.value])}}),new Qs({id:"standardpagination",title:"Standard Pagination",usedContexts:()=>(0,Be.of)(["_page"]),condition:({param:e,metadata:n})=>e.flags.findIndex(t=>t.enabled&&"offset"===t.name)>-1&&n.has("limit")&&n.has("page"),evalParam:({metadata:n})=>(0,Be.of)(""+ +n.get("limit")*(+n.get("page")-1))})].forEach(r=>t.register(r))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Ua))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[Ga]]}),e})(),Wd=(()=>{class e{constructor(t,r,s){this.routerStore=t,this.paramPluginManager=r,this.paramEvaluatorService=s}getUrl(t,r,s){const{selectCurrentRoute:a}=Xd(l=>l.router);return this.routerStore.pipe((0,xt.Ys)(a),(0,be.U)(l=>[l,t,t?t.indexOf("?"):-1]),(0,be.U)(([l,u,p])=>[l,p>-1?u.substring(0,p):u,p>-1?u.substring(p+1):""]),(0,tt.w)(([l,u,p])=>{const h=Zi.parse(p),S=u?u.split("/"):[],G=new Map([...s,["_route",l]]),W=this.paramNames(t),J=r.reduce((Re,De,Je)=>new Map([...Re,[W[Je],De]]),new Map),ve=S.reduce((Re,De,Je)=>0===De.indexOf(":")?[...Re,this.paramEvaluatorService.paramValue(J.get(De),G)]:[...Re,(0,Be.of)(S[Je])],[]),Ne=[];for(const Re in h)Array.isArray(h[Re])?h[Re].forEach(De=>Ne.push(this.paramEvaluatorService.paramValue(J.get(De),G).pipe((0,be.U)(Je=>[Re,Je,!0])))):"string"==typeof h[Re]&&h[Re].indexOf(":")>-1?Ne.push(this.paramEvaluatorService.paramValue(J.get(h[Re]),G).pipe((0,be.U)(De=>[Re,De,!1]))):Ne.push((0,Be.of)([Re,h[Re],Array.isArray(h[Re])]));return(0,pn.D)([(0,pn.D)(ve).pipe((0,be.U)(Re=>Re.filter(De=>null!=De&&""!==De&&"undefined"!==De).map((De,Je)=>0===Je&&0===De.indexOf("http")?`${De}/`:De).join("/")),(0,zr.d)(u)),(0,pn.D)(Ne).pipe((0,ee.b)(Re=>console.log(Re)),(0,be.U)(Re=>Re.reduce((De,[Je,et,gt])=>{if(null==et||""===et||"undefined"===et){const St={...De};return delete St[Je],St}return gt?{...De,[Je]:[...void 0!==De[Je]?De[Je]:[],et]}:{...De,[Je]:et}},this.rebuildQueryString(h))),(0,ee.b)(Re=>console.log(Re)),(0,be.U)(Re=>Zi.stringify(Re,{arrayFormat:"repeat",indices:!1})),(0,zr.d)(p))]).pipe((0,be.U)(Re=>Re.join("?")))}))}paramNames(t){const r=t?t.indexOf("?"):-1,a={...(r>-1?t.substring(0,r):t||"").split("/").reduce((u,p,h)=>0===p.indexOf(":")?{...u,[p.substr(1)]:p}:u,{}),...Zi.parse(t?t.substring(t.indexOf("?")+1):"")},l=[];for(const u in a)Array.isArray(a[u])?a[u].forEach(p=>l.push(p)):0===a[u].indexOf(":")&&l.push(a[u]);return l}rebuildQueryString(t){const r={};for(const s in t)Array.isArray(t[s])?r[s]=[]:null!=s[t]&&""!==s[t]&&"undefined"!==s[t]&&(r[s]=s[t]);return Zi.parse(r)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(xt.yh),o.\u0275\u0275inject(Ua),o.\u0275\u0275inject(Zs))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function uF(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-option",8),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;o.\u0275\u0275property("value",t.value.id),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(t.value.title)}}function cF(e,n){}function dF(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-option",8),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;o.\u0275\u0275property("value",t),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(t)}}function fF(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",9),o.\u0275\u0275elementStart(1,"mat-form-field"),o.\u0275\u0275elementStart(2,"mat-label"),o.\u0275\u0275text(3,"Binding"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"mat-select",10),o.\u0275\u0275template(5,dF,2,2,"mat-option",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"button",6),o.\u0275\u0275listener("click",function(){const a=o.\u0275\u0275restoreView(t).index;return o.\u0275\u0275nextContext().removeBinding(a)}),o.\u0275\u0275text(7,"Remove"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){const t=n.index,r=o.\u0275\u0275nextContext();o.\u0275\u0275property("formGroupName",t),o.\u0275\u0275advance(5),o.\u0275\u0275property("ngForOf",r.bindableOptions)}}class xs extends en.Plugin{constructor(n){super(n),n&&(this.editor=n.editor,this.fetch=n.fetch,this.getBindings=n.getBindings?n.getBindings:()=>(0,Be.of)([]),this.editorOptions=n.editorOptions?n.editorOptions:()=>(0,Be.of)(new fh))}}class ea{constructor(n){n&&(this.url=n.url,this.method=n.method?n.method:void 0,void 0!==n.renderer&&(this.renderer=new Ig(n.renderer)),void 0!==n.params&&(this.params=n.params.map(t=>new si(t))),n.body&&(this.body=new Ol(n.body)))}}class Ig{constructor(n){n&&(this.type=n.type,this.query=n.query,this.trackBy=n.trackBy,void 0!==n.data&&(this.data=new Ol(n.data)),void 0!==n.bindings&&(this.bindings=n.bindings.map(t=>new Gt.ContentBinding(t))))}}class Rn{constructor(n){this.results=[],n&&(this.results=n.results)}}class C0{constructor(n){n&&(this.query=n.query,this.trackBy=n.trackBy,this.idMapping=n.idMapping,this.labelMapping=n.labelMapping,this.valueMapping=n.valueMapping,this.multiple=n.multiple,this.limit=n.limit)}}class Fl{constructor(n){this.settings=[],this.params=[],n&&(this.plugin=n.plugin,n.renderer&&(this.renderer=new Ig(n.renderer)),n.settings&&(this.settings=n.settings.map(t=>new Ct.AttributeValue(t))),n.params&&(this.params=n.params.map(t=>new si(t))))}}class fh{constructor(n){this.fullscreen=!1,n&&(this.fullscreen=n.fullscreen)}}const Tg=new C0({query:"",trackBy:"",idMapping:"",labelMapping:"",valueMapping:"",multiple:!1,limit:0});new ea({url:"",renderer:{type:"",data:{content:"",contentType:""},query:"",trackBy:"",bindings:[]},params:[]});let pF=(()=>{class e{constructor(t){this.fb=t,this.datasourceOptions$=new m.X(Tg),this.formGroup=this.fb.group({query:this.fb.control(""),trackBy:this.fb.control(""),valueMapping:this.fb.control(""),labelMapping:this.fb.control(""),idMapping:this.fb.control(""),multiple:this.fb.control(""),limit:this.fb.control("")}),this.datasourceOptionsSub=this.datasourceOptions$.subscribe(r=>{this.formGroup.setValue(r),this.formGroup.updateValueAndValidity()}),this.onTouched=()=>{}}set datasourceOptions(t){this.datasourceOptions$.next(t)}writeValue(t){t&&this.formGroup.setValue(t,{emitEvent:!1})}registerOnChange(t){this.formGroup.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.formGroup.disable():this.formGroup.enable()}validate(t){return this.formGroup.valid?null:{datasourceOptions:{valid:!1}}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-datasource-options"]],inputs:{datasourceOptions:"datasourceOptions"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>e),multi:!0}])],decls:16,vars:1,consts:[[3,"formGroup"],["matInput","","formControlName","query","placeholder","Query"],["matInput","","formControlName","trackBy","placeholder","Track By"],["matInput","","formControlName","idMapping","placeholder","Id"],["matInput","","formControlName","valueMapping","placeholder","Value"],["matInput","","formControlName","labelMapping","placeholder","Label"],["formControlName","multiple"],["matInput","","formControlName","limit","placeholder","Limit"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"mat-form-field"),o.\u0275\u0275element(2,"input",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"mat-form-field"),o.\u0275\u0275element(4,"input",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"mat-form-field"),o.\u0275\u0275element(6,"input",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"mat-form-field"),o.\u0275\u0275element(8,"input",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"mat-form-field"),o.\u0275\u0275element(10,"input",5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(11,"div"),o.\u0275\u0275elementStart(12,"mat-checkbox",6),o.\u0275\u0275text(13,"Multiple"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(14,"mat-form-field"),o.\u0275\u0275element(15,"input",7),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&o.\u0275\u0275property("formGroup",r.formGroup)},directives:[Yt.KE,Hd.oG,d.JL,d.sg,sr.Nt,d.Fj,d.JJ,d.u],encapsulation:2}),e})(),x0=(()=>{class e{constructor(t){this.viewContainerRef=t}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.ViewContainerRef))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["","classifiedsUiDatasourceRendererHost",""]]}),e})(),Ro=(()=>{class e extends en.BasePluginManager{constructor(t,r){super(t,r)}pluginDef(){return(0,Be.of)(new en.PluginDef({name:"datasource"}))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(en.PluginConfigurationManager),o.\u0275\u0275inject(on.ModuleLoaderService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Rg=(()=>{class e{constructor(t,r,s){this.fb=t,this.componentFactoryResolver=r,this.dpm=s,this.datasources$=this.dpm.getPlugins(),this.formGroup=this.fb.group({plugin:this.fb.control("",[d.kI.required]),settings:this.fb.control(""),renderer:this.fb.group({type:this.fb.control("pane"),bindings:this.fb.array([])})}),this.bindableOptions=[],this.contexts=[],this.settings$=new m.X([]),this.componentRef$=new m.X(void 0),this.datasource$=new m.X(void 0),this.afterViewInit$=new M.x,this.contextForwardingSub=this.componentRef$.pipe((0,U.h)(a=>!!a)).subscribe(a=>{a.instance.contexts=this.contexts,a.instance.settings=this.settings$.value}),this.rendererSub=(0,Bn.a)([this.formGroup.get("plugin").valueChanges,this.afterViewInit$]).pipe((0,tt.w)(([a,l])=>a&&""!==a?this.dpm.getPlugin(a):(0,Be.of)(void 0))).subscribe(a=>{a&&this.renderPlugin(a)}),this.settingsSub=(0,Bn.a)([this.componentRef$,this.settings$]).pipe((0,U.h)(([a,l])=>!!a)).subscribe(([a,l])=>{a.instance.settings=l}),this.datasourceSub=this.datasource$.pipe((0,ee.b)(a=>{setTimeout(()=>this.settings$.next(a?a.settings:[]))})).subscribe(a=>{this.formGroup.get("renderer").get("bindings").clear(),a?(this.formGroup.get("plugin").setValue(a.plugin),this.formGroup.get("renderer").get("type").setValue("pane"),a.renderer&&a.renderer.bindings&&a.renderer.bindings.forEach(l=>{this.addBinding(l)})):(this.formGroup.get("plugin").setValue(""),this.formGroup.get("renderer").get("type").setValue("pane"))}),this.onTouched=()=>{}}set datasource(t){this.datasource$.next(t)}get bindings(){return this.formGroup.get("renderer").get("bindings")}ngOnInit(){}ngAfterViewInit(){this.afterViewInit$.next(void 0)}renderPlugin(t){const r=this.componentFactoryResolver.resolveComponentFactory(t.editor),s=this.datasourceHost.viewContainerRef;s.clear(),this.componentRef$.next(s.createComponent(r))}writeValue(t){t&&this.formGroup.setValue(t,{emitEvent:!1})}registerOnChange(t){this.formGroup.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.formGroup.disable():this.formGroup.enable()}validate(t){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}addBinding(t){this.bindings.push(this.fb.group({type:this.fb.control("pane",d.kI.required),id:this.fb.control(t?t.id:"",d.kI.required)}))}removeBinding(t){this.bindings.removeAt(t)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(o.ComponentFactoryResolver),o.\u0275\u0275directiveInject(Ro))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-datasource-form"]],viewQuery:function(t,r){if(1&t&&o.\u0275\u0275viewQuery(x0,7),2&t){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.datasourceHost=s.first)}},inputs:{bindableOptions:"bindableOptions",contexts:"contexts",datasource:"datasource"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>e),multi:!0}])],decls:16,vars:7,consts:[[3,"formGroup"],["required","","formControlName","plugin"],[3,"value",4,"ngFor","ngForOf"],["classifiedsUiDatasourceRendererHost",""],["formGroupName","renderer"],["formArrayName","bindings"],["type","button",3,"click"],[3,"formGroupName",4,"ngFor","ngForOf"],[3,"value"],[3,"formGroupName"],["required","","formControlName","id"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"mat-form-field"),o.\u0275\u0275elementStart(2,"mat-label"),o.\u0275\u0275text(3,"Datasource"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"mat-select",1),o.\u0275\u0275template(5,uF,2,2,"mat-option",2),o.\u0275\u0275pipe(6,"keyvalue"),o.\u0275\u0275pipe(7,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerStart(8),o.\u0275\u0275template(9,cF,0,0,"ng-template",3),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementStart(10,"div",4),o.\u0275\u0275elementStart(11,"div",5),o.\u0275\u0275elementStart(12,"button",6),o.\u0275\u0275listener("click",function(){return r.addBinding()}),o.\u0275\u0275text(13,"Add Binding"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(14,"div"),o.\u0275\u0275template(15,fF,8,2,"div",7),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.formGroup),o.\u0275\u0275advance(5),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(6,3,o.\u0275\u0275pipeBind1(7,5,r.datasources$))),o.\u0275\u0275advance(10),o.\u0275\u0275property("ngForOf",r.bindings.controls))},directives:[Yt.KE,oi.gD,cr.ey,d.JL,d.sg,Yt.hX,d.Q7,d.JJ,d.u,C.NgForOf,x0,d.x0,d.CE],pipes:[C.KeyValuePipe,C.AsyncPipe],styles:[""]}),e})(),hF=(()=>{class e{constructor(t,r){this.fb=t,this.attributeSerializer=r,this.settings$=new m.X(void 0),this.formGroup=this.fb.group({data:this.fb.control("")}),this.settingsSub=this.settings$.pipe((0,be.U)(s=>s?this.attributeSerializer.deserializeAsObject(s):void 0)).subscribe(s=>{s&&s.data?this.formGroup.get("data").setValue(s.data):this.formGroup.get("data").setValue("")}),this.onTouched=()=>{}}set settings(t){this.settings$.next(t)}ngOnInit(){}writeValue(t){t&&this.formGroup.setValue(t,{emitEvent:!1})}registerOnChange(t){this.formGroup.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.formGroup.disable():this.formGroup.enable()}validate(t){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-data-source-form"]],inputs:{settings:"settings"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>e),multi:!0}])],decls:2,vars:1,consts:[[3,"formGroup"],["formControlName","data","cols","60","rows","20"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275element(1,"textarea",1),o.\u0275\u0275elementEnd()),2&t&&o.\u0275\u0275property("formGroup",r.formGroup)},directives:[d.JL,d.sg,d.Fj,d.JJ,d.u],styles:[""]}),e})(),mF=(()=>{class e{constructor(t){this.controlContainer=t,this.settings=[]}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-data-datasource"]],inputs:{settings:"settings"},decls:2,vars:2,consts:[[3,"formGroup"],["formControlName","settings",3,"settings"]],template:function(t,r){1&t&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"classifieds-ui-data-source-form",1),o.\u0275\u0275elementContainerEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("settings",r.settings))},directives:[hF,d.JL,d.sg,d.JJ,d.u],encapsulation:2}),e})(),gF=(()=>{class e{constructor(t,r){this.fb=t,this.attributeSerializer=r,this.settings$=new m.X(void 0),this.formGroup=this.fb.group({data:this.fb.control("")}),this.settingsSub=this.settings$.pipe((0,be.U)(s=>s?this.attributeSerializer.deserializeAsObject(s):void 0)).subscribe(s=>{}),this.onTouched=()=>{}}set settings(t){this.settings$.next(t)}ngOnInit(){}writeValue(t){t&&this.formGroup.setValue(t,{emitEvent:!1})}registerOnChange(t){this.formGroup.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.formGroup.disable():this.formGroup.enable()}validate(t){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-datasource-source-form"]],inputs:{settings:"settings"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>e),multi:!0}])],decls:2,vars:0,template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"p"),o.\u0275\u0275text(1,"Datasource"),o.\u0275\u0275elementEnd())},styles:[""]}),e})(),vF=(()=>{class e{constructor(t){this.controlContainer=t,this.settings=[]}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-datasource-source"]],inputs:{settings:"settings"},decls:2,vars:2,consts:[[3,"formGroup"],["formControlName","settings",3,"settings"]],template:function(t,r){1&t&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"classifieds-ui-datasource-source-form",1),o.\u0275\u0275elementContainerEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("settings",r.settings))},directives:[gF,d.JL,d.sg,d.JJ,d.u],encapsulation:2}),e})();const yF=e=>new xs({id:"data",title:"Data",editor:mF,fetch:({settings:n})=>(0,Be.of)(new Rn).pipe((0,be.U)(()=>e.deserializeAsObject(n)),(0,be.U)(t=>new Rn({results:JSON.parse(t.data)})))});let Dl=(()=>{class e{constructor(t,r){[yF(r),new xs({id:"datasource_datasource",title:"Datasource",editor:vF,fetch:({})=>(0,Be.of)(new Rn)})].forEach(s=>t.register(s))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Ro),o.\u0275\u0275inject(Ct.AttributeSerializerService))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[C.CommonModule,d.UX,ri.MaterialModule,lF]]}),e})(),S0=(()=>{class e{constructor(t,r){this.config=t,this.http=r,this.cache=new Map}getData(t){return this.cache.has(t)?(0,Be.of)(this.cache.get(t)).pipe((0,Hn.g)(0)):this.http.get(`${t}`).pipe((0,kr.K)(()=>(0,Be.of)([])),(0,be.U)(r=>Array.isArray(r)?r:[r]),(0,ee.b)(r=>this.cache.set(t,r)))}postData({url:t,body:r=""}){return this.http.post(`${t}`,r).pipe((0,be.U)(s=>Array.isArray(s)?s:[s]))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(fi),o.\u0275\u0275inject(F.HttpClient))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class E0{constructor(n){n&&(this.label=n.label,this.dataItem=n.dataItem,void 0!==n.value&&(this.value=n.value))}}class A0{constructor(n){n&&(this.value=n.value,this.label=n.label,this.id=n.id,this.multiple=n.multiple,this.limit=n.limit)}}let P0=(()=>{class e{constructor(t,r){this.dpm=t,this.attributeSerializer=r}evalDatasource({datasource:t,metadata:r,datasources:s}){return(0,Be.of)(t).pipe((0,tt.w)(a=>this.dpm.getPlugin(a.plugin).pipe((0,be.U)(l=>[a,l]))),(0,tt.w)(([a,l])=>l.fetch({settings:a.settings,metadata:r,datasource:a,datasources:s}).pipe((0,be.U)(u=>[a,u]))),(0,tt.w)(([a,l])=>(0,pn.D)(a.renderer.bindings.reduce((u,p)=>[...u,...s&&s.has(p.id)?[(0,Be.of)(s.get(p.id))]:[]],[])).pipe((0,tt.w)(u=>u.reduce((p,h)=>p.pipe((0,tt.w)(S=>this.dpm.getPlugin(h.plugin).pipe((0,be.U)(G=>[G,S,h]))),(0,tt.w)(([S,G,W])=>S.fetch({settings:h.settings,dataset:G,metadata:r,datasource:W,datasources:s}))),(0,Be.of)(l))),(0,be.U)(u=>u),(0,zr.d)(l))))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Ro),o.\u0275\u0275inject(Ct.AttributeSerializerService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Ml=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class Jd extends en.Plugin{constructor(n){super(n),n&&(this.build=n.build)}}const bF=e=>()=>new Promise(n=>{e.build(),n()});let Qu=(()=>{class e extends en.BasePluginManager{constructor(t,r){super(t,r)}pluginDef(){return(0,Be.of)(new en.PluginDef({name:"bridgebuilder"}))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(en.PluginConfigurationManager),o.\u0275\u0275inject(on.ModuleLoaderService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),CF=(()=>{class e{constructor(t){this.bpm=t}build(){try{console.log("build bridge..."),this.bpm.getPlugins().subscribe(t=>{Array.from(t).forEach(([r,s])=>{s.build(),console.log("bridge build: "+r)})}),console.log("bridge built.")}catch{}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Qu))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),I0=(()=>{class e{constructor(t){console.log("bridge constructor"),t.register(new Jd({id:"test",title:"Test",build:()=>{Ml.prototype.sayHello2=()=>{alert("say hello 2")}}}))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Qu))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({providers:[{provide:o.APP_INITIALIZER,useFactory:bF,deps:[CF],multi:!0}],imports:[[]]}),e})();var T0=x(2940),kg=x(4707);function xF(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-option",3),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;o.\u0275\u0275property("value",t),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(t)}}function SF(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-option",5),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;o.\u0275\u0275property("value",t.value.name),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(t.value.title)}}function EF(e,n){}const Og=new o.InjectionToken("ContextPlugin");class ta extends en.Plugin{constructor(n){super(n),this.global=!1,n&&(this.name=this.id,this.title=n.title,this.baseObject=n.baseObject,this.resolver=n.resolver,this.global=void 0!==n.global&&n.global,this.internal=void 0!==n.internal&&n.internal,this.group=void 0!==n.group?n.group:void 0,n.editorComponent&&(this.editorComponent=n.editorComponent))}}class Ei{constructor(n){this.name=n.name,this.adaptor=n.adaptor,n.plugin&&(this.plugin=n.plugin),"rest"===this.adaptor?this.rest=new ea(n.rest):"snippet"===this.adaptor||"json"===this.adaptor?this.snippet=new Ol(n.snippet):"data"===this.adaptor?this.data=n.data:"token"===this.adaptor?this.tokens=new Map([...n.tokens]):"datasource"===this.adaptor&&(this.datasource=new Fl(n.datasource))}}class Fg{constructor(n){n&&(this.name=n.name)}}let AF=(()=>{class e{constructor(t,r){this.fb=t,this.attributeSerializer=r,this.contexts=[],this.settings$=new m.X(void 0),this.formGroup=this.fb.group({name:this.fb.control("",[d.kI.required])}),this.settingsSub=this.settings$.pipe((0,be.U)(s=>s?new Fg(this.attributeSerializer.deserializeAsObject(s)):void 0)).subscribe(s=>{s?this.formGroup.get("name").setValue(s.name):this.formGroup.get("name").setValue("")}),this.onTouched=()=>{}}set settings(t){this.settings$.next(t)}writeValue(t){t&&this.formGroup.setValue(t,{emitEvent:!1})}registerOnChange(t){this.formGroup.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.formGroup.disable():this.formGroup.enable()}validate(t){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-context-datasource-form"]],inputs:{contexts:"contexts",settings:"settings"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>e),multi:!0}])],decls:6,vars:2,consts:[[3,"formGroup"],["required","","formControlName","name"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"mat-form-field"),o.\u0275\u0275elementStart(2,"mat-label"),o.\u0275\u0275text(3,"Context"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"mat-select",1),o.\u0275\u0275template(5,xF,2,2,"mat-option",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.formGroup),o.\u0275\u0275advance(5),o.\u0275\u0275property("ngForOf",r.contexts))},directives:[Yt.KE,oi.gD,cr.ey,d.JL,d.sg,Yt.hX,d.Q7,d.JJ,d.u,C.NgForOf],styles:[""]}),e})(),PF=(()=>{class e{constructor(t){this.controlContainer=t,this.contexts=[],this.settings=[]}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-context-datasource"]],inputs:{contexts:"contexts",settings:"settings"},decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","settings",3,"contexts","settings"]],template:function(t,r){1&t&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"classifieds-ui-context-datasource-form",1),o.\u0275\u0275elementContainerEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("contexts",r.contexts)("settings",r.settings))},directives:[AF,d.JL,d.sg,d.JJ,d.u],encapsulation:2}),e})(),IF=(()=>{class e{constructor(t,r,s){this.fb=t,this.controlContainer=r,this.attributeSerializer=s}ngOnInit(){this.controlContainer.control.addControl("adaptor",this.fb.control("datasource",d.kI.required)),this.controlContainer.control.addControl("datasource",this.fb.control("")),this.controlContainer.control.addControl("_proxy",this.fb.control("")),this.proxyControlSub=this.controlContainer.control.get("_proxy").valueChanges.pipe((0,be.U)(t=>t?new Fl({...t,settings:this.attributeSerializer.serialize(t.settings,"settings").attributes}):new Fl),(0,ee.b)(t=>this.controlContainer.control.get("datasource").setValue(t))).subscribe()}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(d.gN),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-datasource-context-editor"]],viewQuery:function(t,r){if(1&t&&o.\u0275\u0275viewQuery(Rg,7),2&t){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.datasourceFormComp=s.first)}},decls:2,vars:1,consts:[[3,"formGroup"],["formControlName","_proxy"]],template:function(t,r){1&t&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"classifieds-ui-datasource-form",1),o.\u0275\u0275elementContainerEnd()),2&t&&o.\u0275\u0275property("formGroup",r.controlContainer.control)},directives:[Rg,d.JL,d.sg,d.JJ,d.u],encapsulation:2}),e})();const TF=e=>new ta({id:"route",name:"route",title:"Route",global:!0,baseObject:{path:"",arg0:"",arg2:"",arg3:"",arg4:"",arg5:""},resolver:e});let Dg=(()=>{class e{constructor(t){this.routerStore=t}resolve(t,r){const{selectCurrentRoute:s}=Xd(a=>a.router);return this.routerStore.pipe((0,xt.Ys)(s),(0,be.U)(a=>({path:`/pages/panelpage/${a.params.panelPageId}`})))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(xt.yh))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),R0=(()=>{class e{constructor(t){this.viewContainerRef=t}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.ViewContainerRef))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["","classifiedsUiContextEditorHost",""]]}),e})(),Va=(()=>{class e extends en.BasePluginManager{constructor(t,r){super(t,r)}pluginDef(){return(0,Be.of)(new en.PluginDef({name:"context"}))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(en.PluginConfigurationManager),o.\u0275\u0275inject(on.ModuleLoaderService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),k0=(()=>{class e{constructor(t,r,s){this.fb=t,this.componentFactoryResolver=r,this.cpm=s,this.contextForm=this.fb.group({name:this.fb.control("",d.kI.required),plugin:this.fb.control("",d.kI.required)}),this.context$=new m.X(void 0),this.onTouched=()=>{}}set context(t){this.context$.next(t)}ngOnInit(){this.contextPlugins=this.cpm.getPlugins().pipe((0,be.U)(t=>new Map(Array.from(t).filter(([r,s],a)=>!s.internal).map(([r,s],a)=>[s.name,s])))),this.contextForm.get("plugin").valueChanges.pipe((0,tt.w)(t=>this.cpm.getPlugin(t))).subscribe(t=>{t.editorComponent?this.renderEditor(t):this.editorHost.viewContainerRef.clear()}),this.context$.pipe((0,U.h)(()=>!!this.componentRef)).subscribe(t=>{this.componentRef.instance.context=t})}writeValue(t){t&&this.contextForm.setValue(t,{emitEvent:!1})}registerOnChange(t){this.contextForm.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.contextForm.disable():this.contextForm.enable()}validate(t){return this.contextForm.valid?null:{invalidForm:{valid:!1,message:"context is invalid"}}}renderEditor(t){const r=this.componentFactoryResolver.resolveComponentFactory(t.editorComponent),s=this.editorHost.viewContainerRef;s.clear(),this.componentRef=s.createComponent(r),this.componentRef.instance.context=this.context$.value}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(o.ComponentFactoryResolver),o.\u0275\u0275directiveInject(Va))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-context-form"]],viewQuery:function(t,r){if(1&t&&o.\u0275\u0275viewQuery(R0,7),2&t){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.editorHost=s.first)}},inputs:{context:"context"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>e),multi:!0}])],decls:12,vars:6,consts:[["fxLayout","column",3,"formGroup"],["matInput","","formControlName","name","placeholder","Name","required",""],["required","","formControlName","plugin"],[3,"value",4,"ngFor","ngForOf"],["classifiedsUiContextEditorHost",""],[3,"value"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"mat-form-field"),o.\u0275\u0275element(2,"input",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"mat-form-field"),o.\u0275\u0275elementStart(4,"mat-label"),o.\u0275\u0275text(5,"Type"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"mat-select",2),o.\u0275\u0275template(7,SF,2,2,"mat-option",3),o.\u0275\u0275pipe(8,"keyvalue"),o.\u0275\u0275pipe(9,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerStart(10),o.\u0275\u0275template(11,EF,0,0,"ng-template",4),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.contextForm),o.\u0275\u0275advance(7),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(8,2,o.\u0275\u0275pipeBind1(9,4,r.contextPlugins))))},directives:[Yt.KE,oi.gD,cr.ey,ue,d.JL,d.sg,sr.Nt,d.Fj,d.JJ,d.u,d.Q7,Yt.hX,C.NgForOf,R0],pipes:[C.KeyValuePipe,C.AsyncPipe],styles:[""]}),e})(),Mg=(()=>{class e{constructor(t){this.dpm=t}resolve(t,r,s){return(0,Be.of)(new Rn).pipe((0,be.U)(()=>new Fl(r)),(0,tt.w)(a=>this.dpm.getPlugin(a.plugin).pipe((0,be.U)(l=>({ds:a,p:l})))),(0,tt.w)(({ds:a,p:l})=>l.fetch({settings:a.settings,metadata:s})),(0,be.U)(a=>a))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Ro))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),O0=(()=>{class e extends en.BasePluginManager{constructor(t,r){super(t,r),this.add$=new kg.t(1)}pluginDef(){return(0,Be.of)(new en.PluginDef({name:"resolved_context"}))}register(t){const r=this.pluginInstances.has(t.id);super.register(t),r||this.add$.next(void 0)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(en.PluginConfigurationManager),o.\u0275\u0275inject(on.ModuleLoaderService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Yu=(()=>{class e extends class DF{constructor(n,t){this.cpm=n,this.rcm=t}resolveGlobals(n=zn()){return this.cpm.getPlugins().pipe((0,be.U)(t=>Array.from(t.values()).filter(r=>!0===r.global)),(0,tt.w)(t=>(0,N.T)(...t.map(r=>r.resolver.resolve(r,{}).pipe((0,be.U)(s=>[r.name,s,t.length])))).pipe((0,T0.R)((r,[s,a,l])=>new Map([...r,[`_${s}`,a],["__len",l]]),new Map([])),(0,U.h)(r=>r.size-1==+r.get("__len")),(0,be.U)(r=>Object.assign({},...[...r.entries()].filter(([s,a])=>"__len"!==s).map(([s,a])=>({[s]:a})))))))}resolveGlobalsSingle(n=zn()){return this.cpm.getPlugins().pipe((0,be.U)(t=>Array.from(t.values()).filter(r=>!0===r.global)),(0,tt.w)(t=>(0,N.T)(...t.map(r=>r.resolver.resolve(r,{}).pipe((0,be.U)(s=>[r.name,s]))))))}resolveAll(n,t=zn()){return(0,N.T)(...n.map(r=>this.resolve(r,t).pipe((0,be.U)(s=>[r.name,Array.isArray(s)?s.length>0?s[0]:void 0:s])))).pipe((0,T0.R)((r,[s,a])=>new Map([...r,[s,a]]),new Map),(0,U.h)(r=>r.size===n.length),(0,be.U)(r=>Object.assign({},...[...r.entries()].map(([s,a])=>({[s]:a})))))}resolveAllSingle(n,t=zn()){return(0,N.T)(...n.map(r=>this.resolve(r,t).pipe((0,be.U)(s=>[r.name,Array.isArray(s)?s.length>0?s[0]:void 0:s])))).pipe((0,be.U)(([r,s])=>[r,s]))}resolveMerged(n,t=zn()){return this.rcm.getPlugins().pipe((0,tt.w)(()=>this.rcm.add$.pipe((0,zr.d)(void 0))),(0,tt.w)(()=>this.rcm.getPlugins()),(0,tt.w)(r=>(0,Bn.a)([...Array.from(r).map(([s,a])=>a.resolve()),this.resolveGlobals(t),0===n.length?(0,Be.of)({}):this.resolveAll(n,t)]).pipe((0,qn.b)(0),(0,be.U)(s=>s.reduce((a,l)=>({...a,...l}),{})))))}resolveMergedSingle(n,t=zn()){return 0!==n.length?this.rcm.getPlugins().pipe((0,tt.w)(r=>(0,N.T)(...Array.from(r).map(([s,a])=>a.resolveSingle()),this.resolveGlobalsSingle(),this.resolveAllSingle(n)))):this.rcm.getPlugins().pipe((0,tt.w)(r=>(0,N.T)(...Array.from(r).map(([s,a])=>a.resolveSingle()),this.resolveGlobalsSingle())))}resolve(n,t=zn()){return n.plugin?this.cpm.getPlugin(n.plugin).pipe((0,tt.w)(r=>r.resolver.resolve(r,this.getDataObject(n),new Map([["name",n.name]])))):(0,Be.of)(this.getDataObject(n))}getDataObject(n){switch(n.adaptor){case"rest":return n.rest;case"snippet":return n.snippet;case"json":return JSON.parse(n.snippet.content);case"data":return n.data;case"token":return n.tokens;case"datasource":return n.datasource;default:return}}}{constructor(t,r){super(t,r)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Va),o.\u0275\u0275inject(O0))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Zu=(()=>{class e{constructor(t,r,s,a,l,u,p,h,S){t.forEach(G=>a.register(G)),l.register(((e,n)=>new Jd({id:"context",title:"Context",build:()=>{Ml.prototype.resolveContext=(t,r)=>new Promise(s=>{e.getPlugin(t).pipe((0,tt.w)(a=>a.resolver.resolve(a,r).pipe((0,an.q)(1)))).subscribe(a=>{s(a)})}),Ml.prototype.resolveMergedContext=t=>new Promise(r=>{n.resolveMerged(t).pipe((0,ee.b)(s=>r(s)),(0,an.q)(1)).subscribe()})}}))(a,r)),p.register(((e,n)=>new Qs({id:"context",title:"Context",evalParam:({param:t,metadata:r})=>{const s=t.mapping.context&&""!==t.mapping.context?new Ei(r.get("contexts").find(a=>a.name===t.mapping.context)):void 0;return s?e.resolve(s).pipe((0,an.q)(1),(0,tt.w)(a=>Xn(()=>t.mapping.value&&""!==t.mapping.value,(0,Be.of)(a).pipe((0,be.U)(l=>n.generateGenericTokens(Array.isArray(l)?l[0]:l)),(0,be.U)(l=>n.replaceTokens(`[${t.mapping.value}]`,l)),(0,an.q)(1)),(0,Be.of)(Array.isArray(a)?a[0]:a)).pipe((0,an.q)(1)))):(0,Be.of)()},usedContexts:({param:t})=>(0,Be.of)([t.mapping.context])}))(r,s)),u.register(((e,n)=>new xs({id:"context",title:"Context",editor:PF,fetch:({settings:t,metadata:r})=>(0,Be.of)(new Rn).pipe((0,be.U)(()=>new Fg(n.deserializeAsObject(t))),(0,be.U)(s=>r.get("contexts").find(a=>a.name===s.name)),(0,tt.w)(s=>e.resolve(s).pipe((0,be.U)(a=>a instanceof Rn?a:new Rn({results:Array.isArray(a)?a:[a]})),(0,an.q)(1)))),getBindings:({settings:t})=>(0,Be.of)([]).pipe((0,be.U)(()=>new Fg(n.deserializeAsObject(t))),(0,be.U)(s=>[new Gt.ContentBinding({id:s.name,type:"context"})]))}))(r,h)),a.register((e=>{const n={dataset:new Rn};return new ta({id:"datasource",name:"datasource",title:"Datasource",baseObject:n,resolver:e,editorComponent:IF})})(S))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Og),o.\u0275\u0275inject(Yu),o.\u0275\u0275inject(Gn),o.\u0275\u0275inject(Va),o.\u0275\u0275inject(Qu),o.\u0275\u0275inject(Ro),o.\u0275\u0275inject(Ua),o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(Mg))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({providers:[{provide:Dg,useClass:Dg},{provide:Mg,useClass:Mg},{provide:Og,useFactory:TF,multi:!0,deps:[Dg]}],imports:[[C.CommonModule,d.UX,d.u5,ri.MaterialModule,al,Bd,xg,Dl]]}),e})(),MF=(()=>{class e{constructor(t){this.contextPlugins=t}getAll(t){return void 0===t?this.contextPlugins:this.contextPlugins.filter(t?r=>r.global:r=>!r.global)}getAllObjects(){return this.contextPlugins.map(t=>t.baseObject)}lookupContext(t){return this.contextPlugins.find(r=>r.name===t)}register(t){this.contextPlugins.push(t)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Og))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class NF extends en.Plugin{constructor(n){super(n),this.resolve=n.resolve,this.resolveSingle=n.resolveSingle}}let Ng=(()=>{class e{constructor(t){this.ppm=t}extractContexts(t){return(0,pn.D)(t.map(r=>this.ppm.getPlugin(r.mapping.type).pipe((0,tt.w)(s=>Xn(()=>!!s&&!!s.usedContexts,s&&s.usedContexts?s.usedContexts({param:r,metadata:new Map([])}):(0,Be.of)([]),(0,Be.of)([])))))).pipe((0,be.U)(r=>r.reduce((s,a)=>[...s,...a.filter(l=>!s.includes(l))],[])))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Ua))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),jF=(()=>{class e{constructor(t,r,s){this.routerStore=t,this.router=r}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(xt.yh),o.\u0275\u0275directiveInject(Pn.Router),o.\u0275\u0275directiveInject(Yn))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-alias-catch-all-router"]],decls:2,vars:0,template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"p"),o.\u0275\u0275text(1,"Page Not Found"),o.\u0275\u0275elementEnd())},styles:[""]}),e})();const BF=[];let LF=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({providers:[],imports:[[on.UtilsModule,Pn.RouterModule.forChild(BF)]]}),e})();class zF extends en.Plugin{constructor(n){super(n),n&&(this.loadingStrategy=n.loadingStrategy,this.matchingStrategy=n.matchingStrategy,this.redirectHandler=n.redirectHandler)}}let F0=(()=>{class e extends en.BasePluginManager{constructor(t,r){super(t,r)}pluginDef(){return(0,Be.of)(new en.PluginDef({name:"alias"}))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(en.PluginConfigurationManager),o.\u0275\u0275inject(on.ModuleLoaderService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),D0=(()=>{class e{constructor(t,r,s,a){this.siteName=t,this.router=r,this.apm=s,this.routesLoaded=!1}canActivate(t,r){return console.log("catch all alias hit"),new Promise(s=>{this.apm.getPlugins().pipe((0,tt.w)(a=>(0,pn.D)(this.routesLoaded?[]:Array.from(a).map(([l,u])=>u.loadingStrategy.load())).pipe((0,zr.d)(void 0))),(0,ee.b)(()=>this.routesLoaded=!0),(0,tt.w)(()=>this.apm.getPlugins()),(0,tt.w)(a=>(0,pn.D)(Array.from(a).map(([l,u])=>u.matchingStrategy.match(r).pipe((0,be.U)(p=>[u,p])))))).subscribe(a=>{if(console.log("routes loaded: "+(this.routesLoaded?"y":"n")),void 0!==a.map(([u,p],h)=>p?u:void 0).find(u=>void 0!==u)){console.log(`alias gaurd state: ${r.url}`);const u=this.router.parseUrl(r.url);s(u)}else s(!0)})})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(on.SITE_NAME),o.\u0275\u0275inject(Pn.Router),o.\u0275\u0275inject(F0),o.\u0275\u0275inject(Yn))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();var M0=x(727);function UF(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-option",4),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;o.\u0275\u0275property("value",t.value.id),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(t.value.title)}}function GF(e,n){}class N0 extends en.Plugin{constructor(n){super(n),n&&(this.editor=n.editor,this.send=n.send)}}class VF{constructor(n){this.settings=[],n&&(this.data=n.data,n.settings&&Array.isArray(n.settings)&&(this.settings=n.settings.map(t=>new Ct.AttributeValue(t))))}}class jg{constructor(n){}}class ec{constructor(n){n&&(this.dataduct=new $F(n.dataduct))}}class $F{constructor(n){this.settings=[],n&&(this.plugin=n.plugin,n.settings&&Array.isArray(n.settings)&&(this.settings=n.settings.map(t=>new Ct.AttributeValue(t))))}}let j0=(()=>{class e{constructor(t){this.viewContainerRef=t}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.ViewContainerRef))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["","classifiedsUiDataductRendererHost",""]]}),e})(),ph=(()=>{class e extends en.BasePluginManager{constructor(t,r){super(t,r)}pluginDef(){return(0,Be.of)(new en.PluginDef({name:"dataduct"}))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(en.PluginConfigurationManager),o.\u0275\u0275inject(on.ModuleLoaderService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),HF=(()=>{class e{constructor(t,r){this.dpm=t,this.fb=r,this.contexts=[],this.ductForm=this.fb.group({plugin:this.fb.control("",[d.kI.required]),settings:this.fb.control("")}),this.ducts$=this.dpm.getPlugins(),this.componentRef$=new m.X(void 0),this.persistence$=new m.X(void 0),this.afterViewInit$=new M.x,this.contextForwardingSub=this.componentRef$.pipe((0,U.h)(s=>!!s)).subscribe(s=>{s.instance.contexts=this.contexts,s.instance.settings=this.persistence$.value&&this.persistence$.value.dataduct?this.persistence$.value.dataduct.settings:[]}),this.persistenceSub=(0,Bn.a)([this.persistence$,this.afterViewInit$]).pipe((0,be.U)(([s])=>s),(0,ee.b)(s=>{this.ductForm.get("plugin").setValue(s&&s.dataduct?s.dataduct.plugin:"")}),(0,Hn.g)(1),(0,ee.b)(s=>{this.componentRef$.value&&this.componentRef$.value.instance&&s&&(this.componentRef$.value.instance.settings=s.dataduct?s.dataduct.settings:[])})).subscribe(),this.rendererSub=(0,Bn.a)([this.ductForm.get("plugin").valueChanges,this.afterViewInit$]).pipe((0,tt.w)(([s,a])=>s&&""!==s?this.dpm.getPlugin(s):(0,Be.of)(void 0))).subscribe(s=>{s&&this.renderPlugin(s)}),this.onTouched=()=>{}}set persistence(t){this.persistence$.next(t)}ngAfterViewInit(){this.afterViewInit$.next(void 0)}writeValue(t){t&&this.ductForm.setValue(t,{emitEvent:!1})}registerOnChange(t){this.ductForm.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.ductForm.disable():this.ductForm.enable()}validate(t){return this.ductForm.valid?null:this.ductForm.errors}renderPlugin(t){const r=this.datasourceHost.viewContainerRef;r.clear(),this.componentRef$.next(r.createComponent(t.editor))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(ph),o.\u0275\u0275directiveInject(d.qu))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-persistence-form"]],viewQuery:function(t,r){if(1&t&&o.\u0275\u0275viewQuery(j0,7),2&t){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.datasourceHost=s.first)}},inputs:{contexts:"contexts",persistence:"persistence"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>e),multi:!0}])],decls:10,vars:6,consts:[[3,"formGroup"],["required","","formControlName","plugin"],[3,"value",4,"ngFor","ngForOf"],["classifiedsUiDataductRendererHost",""],[3,"value"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"mat-form-field"),o.\u0275\u0275elementStart(2,"mat-label"),o.\u0275\u0275text(3,"Plugin"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"mat-select",1),o.\u0275\u0275template(5,UF,2,2,"mat-option",2),o.\u0275\u0275pipe(6,"keyvalue"),o.\u0275\u0275pipe(7,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerStart(8),o.\u0275\u0275template(9,GF,0,0,"ng-template",3),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.ductForm),o.\u0275\u0275advance(5),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(6,2,o.\u0275\u0275pipeBind1(7,4,r.ducts$))))},directives:[Yt.KE,oi.gD,cr.ey,d.JL,d.sg,Yt.hX,d.Q7,d.JJ,d.u,C.NgForOf,j0],pipes:[C.KeyValuePipe,C.AsyncPipe],styles:[""]}),e})(),qF=(()=>{class e{constructor(t,r,s,a){this.data=t,this.dialogRef=r,this.fb=s,this.attributeSerializer=a,this.persistenceForm=this.fb.group({dataduct:this.fb.control("")}),this.contexts=[],this.persistence=new ec,this.contexts=t.contexts,this.persistence=t.persistence}submit(){const t=this.persistenceForm.value;console.log("persistence form",t);const r=this.attributeSerializer.serialize(t.dataduct.settings,"settings");console.log("persistence settings",r),this.dialogRef.close(new ec({...this.persistenceForm.value,dataduct:{...t.dataduct,settings:r.attributes}}))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-persistence-dialog"]],decls:8,vars:4,consts:[[1,"persistence-form",3,"formGroup","ngSubmit"],[1,"content-inner"],["fxLayout","column"],["formControlName","dataduct",3,"contexts","persistence"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return r.submit()}),o.\u0275\u0275elementStart(1,"mat-dialog-content"),o.\u0275\u0275elementStart(2,"div",1),o.\u0275\u0275elementStart(3,"div",2),o.\u0275\u0275element(4,"classifieds-ui-persistence-form",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"mat-dialog-actions"),o.\u0275\u0275elementStart(6,"button",4),o.\u0275\u0275text(7,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.persistenceForm),o.\u0275\u0275advance(4),o.\u0275\u0275property("contexts",r.contexts)("persistence",r.persistence),o.\u0275\u0275advance(2),o.\u0275\u0275property("disabled",!r.persistenceForm.valid))},directives:[HF,Dr.lW,d._Y,d.JL,d.sg,Dt.xY,d.JJ,d.u,Dt.H8,Dt.ZT],styles:[""]}),e})(),KF=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[C.CommonModule,d.u5,d.UX,ri.MaterialModule]]}),e})(),XF=(()=>{class e{constructor(t){this.dpm=t}persist({data:t,persistence:r}){return this.dpm.getPlugin(r.dataduct.plugin).pipe((0,tt.w)(s=>s.send(new VF({data:t,settings:r.dataduct.settings}))),(0,be.U)(()=>{}))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(ph))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function WF(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275element(1,"druid-detour-interaction-listener",4),o.\u0275\u0275elementStart(2,"button",3),o.\u0275\u0275listener("click",function(){const a=o.\u0275\u0275restoreView(t).index;return o.\u0275\u0275nextContext().deleteListener$.next(a)}),o.\u0275\u0275text(3,"Delete"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){const t=n.index,r=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("formControlName",t)("listener",r.interactions$.value.interactions.listeners[t])}}class Nl{constructor(n){this.interactions=n&&n.interactions?new B0(n.interactions):new B0}}class B0{constructor(n){this.listeners=[],n&&n.listeners&&Array.isArray(n.listeners)&&(this.listeners=n.listeners.map(t=>new L0(t)))}}class L0{constructor(n){this.handler=n&&n.handler?new Ys(n.handler):new Ys,this.event=n&&n.event?new Ys(n.event):new Ys}}let z0=(()=>{class e extends en.BasePluginManager{constructor(t,r){super(t,r)}pluginDef(){return(0,Be.of)(new en.PluginDef({name:"interaction_event"}))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(en.PluginConfigurationManager),o.\u0275\u0275inject(on.ModuleLoaderService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),U0=(()=>{class e extends en.BasePluginManager{constructor(t,r){super(t,r)}pluginDef(){return(0,Be.of)(new en.PluginDef({name:"interaction_handler"}))}discovery(){super.discovery()}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(en.PluginConfigurationManager),o.\u0275\u0275inject(on.ModuleLoaderService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),JF=(()=>{class e{constructor(t,r,s){this.fb=t,this.iepm=r,this.ihpm=s,this.eventPlugins$=this.iepm.getPlugins(),this.handlerPlugins$=this.ihpm.getPlugins(),this.listenerForm=this.fb.group({event:this.fb.control(""),handler:this.fb.control("")}),this.contexts=[],this.listener$=new m.X(new L0),this.event$=new m.X(new Ys),this.handler$=new m.X(new Ys),this.listenerSub=this.listener$.pipe((0,ee.b)(a=>{this.event$.next(a&&a.event?a.event:new Ys),this.handler$.next(a&&a.handler?a.handler:new Ys)})).subscribe(),this.onTouched=()=>{}}set listener(t){this.listener$.next(t)}writeValue(t){t&&this.listenerForm.setValue(t,{emitEvent:!1})}registerOnChange(t){this.listenerForm.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.listenerForm.disable():this.listenerForm.enable()}validate(t){return this.listenerForm.valid?null:this.listenerForm.errors}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(z0),o.\u0275\u0275directiveInject(U0))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-detour-interaction-listener"]],inputs:{contexts:"contexts",listener:"listener"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>e),multi:!0}])],decls:5,vars:9,consts:[[3,"formGroup"],["formControlName","event","title","Event",3,"plugins","instance"],["formControlName","handler","title","Handler",3,"plugins","instance"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275element(1,"druid-params-plugin-instance",1),o.\u0275\u0275pipe(2,"async"),o.\u0275\u0275element(3,"druid-params-plugin-instance",2),o.\u0275\u0275pipe(4,"async"),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.listenerForm),o.\u0275\u0275advance(1),o.\u0275\u0275property("plugins",o.\u0275\u0275pipeBind1(2,5,r.eventPlugins$))("instance",r.event$.value),o.\u0275\u0275advance(2),o.\u0275\u0275property("plugins",o.\u0275\u0275pipeBind1(4,7,r.handlerPlugins$))("instance",r.handler$.value))},directives:[QO,d.JL,d.sg,d.JJ,d.u],pipes:[C.AsyncPipe],styles:[""]}),e})(),QF=(()=>{class e{constructor(t){this.fb=t,this.interactions$=new m.X(new Nl({interactions:{listeners:[]}})),this.contexts$=new m.X([]),this.afterViewInit$=new M.x,this.interactionsForm=this.fb.group({listeners:this.fb.array([])}),this.addListener$=new M.x,this.deleteListener$=new M.x,this.addListenerSub=this.addListener$.pipe((0,ee.b)(()=>this.listeners.push(this.fb.control("")))).subscribe(),this.deleteListenerSub=this.deleteListener$.pipe((0,ee.b)(r=>{this.interactions$.value.interactions.listeners.splice(r,1),this.listeners.removeAt(r)})).subscribe(),this.interactionsSub=(0,Bn.a)([this.interactions$,this.afterViewInit$]).pipe((0,be.U)(([r])=>r),(0,U.h)(r=>0!==r.interactions.listeners.length),(0,ee.b)(r=>{this.listeners.clear(),r.interactions.listeners.forEach((s,a)=>{this.listeners.push(this.fb.control(""))})})).subscribe(),this.onTouched=()=>{}}set interactions(t){this.interactions$.next(t)}set contexts(t){this.contexts$.next(t)}get listeners(){return this.interactionsForm.get("listeners")}ngAfterViewInit(){this.afterViewInit$.next(void 0),this.afterViewInit$.complete()}writeValue(t){t&&this.interactionsForm.setValue(t,{emitEvent:!1})}registerOnChange(t){this.interactionsForm.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.interactionsForm.disable():this.interactionsForm.enable()}validate(t){return this.interactionsForm.valid?null:this.interactionsForm.errors}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-detour-interactions-form"]],inputs:{interactions:"interactions",contexts:"contexts"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>e),multi:!0}])],decls:5,vars:2,consts:[[3,"formGroup"],["formArrayName","listeners"],[4,"ngFor","ngForOf"],["type","button",3,"click"],[3,"formControlName","listener"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div",1),o.\u0275\u0275template(2,WF,4,2,"div",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"button",3),o.\u0275\u0275listener("click",function(){return r.addListener$.next(void 0)}),o.\u0275\u0275text(4,"Add Listener"),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.interactionsForm),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",r.listeners.controls))},directives:[JF,d.JL,d.sg,d.CE,C.NgForOf,d.JJ,d.u],styles:[""]}),e})(),YF=(()=>{class e{constructor(t,r,s){this.data=t,this.dialogRef=r,this.fb=s,this.interactionsForm=this.fb.group({interactions:this.fb.control("")}),this.contexts=[],this.interactions=new Nl,this.contexts=t.contexts,this.interactions=t.interactions}submit(){const t=new Nl(this.interactionsForm.value);console.log("interactions payload",t),this.dialogRef.close(t)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-detour-interactions-dialog"]],decls:8,vars:4,consts:[[1,"interactions-form",3,"formGroup","ngSubmit"],[1,"content-inner"],["fxLayout","column"],["formControlName","interactions",3,"contexts","interactions"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return r.submit()}),o.\u0275\u0275elementStart(1,"mat-dialog-content"),o.\u0275\u0275elementStart(2,"div",1),o.\u0275\u0275elementStart(3,"div",2),o.\u0275\u0275element(4,"druid-detour-interactions-form",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"mat-dialog-actions"),o.\u0275\u0275elementStart(6,"button",4),o.\u0275\u0275text(7,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.interactionsForm),o.\u0275\u0275advance(4),o.\u0275\u0275property("contexts",r.contexts)("interactions",r.interactions),o.\u0275\u0275advance(2),o.\u0275\u0275property("disabled",!r.interactionsForm.valid))},directives:[QF,Dr.lW,d._Y,d.JL,d.sg,Dt.xY,d.JJ,d.u,Dt.H8,Dt.ZT],styles:[""]}),e})();class ZF extends en.Plugin{constructor(n){super(n)}}let tD=(()=>{class e{constructor(t){t.register(new ZF({title:"DOM",id:"dom"}))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(z0))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[C.CommonModule,d.u5,d.UX,ri.MaterialModule,Ga]]}),e})();class G0 extends en.Plugin{constructor(n){super(n)}}var jl=x(8242),Ss=x(3848),$a=x(6338),tc=x(926),Bg=x(8598);class nc extends en.Plugin{constructor(n){super(n),n&&(this.create=n.create,this.read=n.read,this.update=n.update,this.delete=n.delete,n.query&&(this.query=n.query))}}class V0{constructor(n){this.options=[],this.params=[],n&&(this.adaptorName=n.adaptorName,this.optionsString=n.optionsString?n.optionsString:void 0,this.paramsString=n.paramsString?n.paramsString:void 0,n.options&&Array.isArray(n.options)&&(this.options=n.options.map(t=>new si(t))),n.params&&Array.isArray(n.params)&&(this.params=n.params.map(t=>new si(t))))}}let nD=(()=>{class e{constructor(t,r){this.fb=t,this.attributeSerializer=r,this.contexts=[],this.settings$=new m.X(void 0),this.datasource$=new m.X(void 0),this.optionValues$=new m.X([]),this.paramValues$=new m.X([]),this.formGroup=this.fb.group({adaptorName:this.fb.control(""),optionsString:this.fb.control(""),paramsString:this.fb.control(""),options:this.fb.control([]),params:this.fb.control([])}),this.settingsSub=this.settings$.pipe((0,be.U)(s=>s?new V0(this.attributeSerializer.deserializeAsObject(s)):void 0),(0,ee.b)(s=>setTimeout(()=>this.datasource$.next(s)))).subscribe(s=>{s?(this.formGroup.get("adaptorName").setValue(s.adaptorName),this.formGroup.get("optionsString").setValue(s.optionsString?s.optionsString:""),this.formGroup.get("paramsString").setValue(s.paramsString?s.paramsString:"")):(this.formGroup.get("adaptorName").setValue(""),this.formGroup.get("optionsString").setValue(""),this.formGroup.get("paramsString").setValue(""),setTimeout(()=>this.optionValues$.next([]),2),setTimeout(()=>this.optionValues$.next([]),2))}),this.datasourceOptionsSub=(0,Bn.a)([this.datasource$,this.formGroup.get("optionsString").valueChanges]).pipe((0,U.h)(([s])=>void 0!==s),(0,Hn.g)(1),(0,ee.b)(([s])=>this.optionValues$.next(s.options))).subscribe(),this.datasourceParamsSub=(0,Bn.a)([this.datasource$,this.formGroup.get("paramsString").valueChanges]).pipe((0,U.h)(([s])=>void 0!==s),(0,Hn.g)(1),(0,ee.b)(([s])=>this.paramValues$.next(s.params))).subscribe(),this.optionsStringChangeSub=this.formGroup.get("optionsString").valueChanges.pipe((0,qn.b)(500)).subscribe(s=>{const a=Zi.parse("?"+s);this.optionsParsed=a}),this.paramsStringChangeSub=this.formGroup.get("paramsString").valueChanges.pipe((0,qn.b)(500)).subscribe(s=>{const a=Zi.parse("?"+s);this.paramsParsed=a}),this.onTouched=()=>{}}set settings(t){this.settings$.next(t)}ngOnInit(){}writeValue(t){t&&this.formGroup.setValue(t,{emitEvent:!1})}registerOnChange(t){this.formGroup.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.formGroup.disable():this.formGroup.enable()}validate(t){return this.formGroup.valid?null:this.formGroup.errors}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-crud-adaptor-datasource-form"]],inputs:{contexts:"contexts",settings:"settings"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>e),multi:!0}])],decls:14,vars:7,consts:[[3,"formGroup"],["matInput","","placeholder","Adaptor","formControlName","adaptorName","required",""],[1,"options-container"],["matInput","","placeholder","Options","formControlName","optionsString"],["formControlName","options",3,"params","paramValues","contexts"],[1,"params-container"],["matInput","","placeholder","Params","formControlName","paramsString"],["formControlName","params",3,"params","paramValues","contexts"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div"),o.\u0275\u0275elementStart(2,"mat-form-field"),o.\u0275\u0275element(3,"input",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"div",2),o.\u0275\u0275elementStart(5,"div"),o.\u0275\u0275elementStart(6,"mat-form-field"),o.\u0275\u0275element(7,"input",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(8,"classifieds-ui-params-form",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"div",5),o.\u0275\u0275elementStart(10,"div"),o.\u0275\u0275elementStart(11,"mat-form-field"),o.\u0275\u0275element(12,"input",6),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(13,"classifieds-ui-params-form",7),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.formGroup),o.\u0275\u0275advance(8),o.\u0275\u0275property("params",r.optionsParsed)("paramValues",r.optionValues$.value)("contexts",r.contexts),o.\u0275\u0275advance(5),o.\u0275\u0275property("params",r.paramsParsed)("paramValues",r.paramValues$.value)("contexts",r.contexts))},directives:[Yt.KE,qd,d.JL,d.sg,sr.Nt,d.Fj,d.JJ,d.u,d.Q7],styles:[""]}),e})(),$0=(()=>{class e{constructor(t){this.controlContainer=t,this.settings=[],this.contexts=[]}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-crud-adaptor-datasource"]],inputs:{settings:"settings",contexts:"contexts"},decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","settings",3,"settings","contexts"]],template:function(t,r){1&t&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"classifieds-ui-crud-adaptor-datasource-form",1),o.\u0275\u0275elementContainerEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("settings",r.settings)("contexts",r.contexts))},directives:[nD,d.JL,d.sg,d.JJ,d.u],encapsulation:2}),e})(),Ha=(()=>{class e extends en.BasePluginManager{constructor(t,r){super(t,r)}pluginDef(){return(0,Be.of)(new en.PluginDef({name:"crud_adaptor"}))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(en.PluginConfigurationManager),o.\u0275\u0275inject(on.ModuleLoaderService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Qd=(()=>{class e{constructor(t){this.crud=t,this.cachedCollectionQueries=[],this.cachedCollectionIgnore={p:{create:void 0,update:void 0,delete:void 0,query:void 0,read:void 0},input:{identity:void 0}}}evaluatePlugins({object:t,plugins:r,op:s,parentObject:a}){const u=Object.keys(r).filter(p=>!r[p].ops||r[p].ops.includes(s)).map(p=>this.crud.getPlugin(r[p].plugin?r[p].plugin:p).pipe((0,be.U)(h=>({p:h,params:r[p].params?Object.keys(r[p].params).reduce((S,G)=>({...S,[G]:r[p].params[G]instanceof si?r[p].params[G]:new si({flags:[],mapping:{type:"static",value:r[p].params[G],context:void 0,testValue:r[p].params[G]}})}),{}):{}})),(0,tt.w)(({p:h,params:S})=>h[s]({rule:void 0,object:t,parentObject:a,params:S,identity:({object:G,parentObject:W})=>(0,Be.of)({identity:G.id?G.id:W?W.id:void 0})})),(0,tt.w)(h=>Xn(()=>r[p].plugins&&0!==Object.keys(r[p].plugins).length,r[p].plugins&&0!==Object.keys(r[p].plugins).length?this.evaluatePlugins({plugins:r[p].plugins,object:h.entity?h.entity:t,parentObject:h.originalEntity?h.originalEntity:t,op:s}):(0,Be.of)(h),(0,Be.of)(h)))));return(0,pn.D)(u).pipe((0,be.U)(()=>t))}evaluateCollectionPlugins({query:t,objects:r,plugins:s,op:a,parentObjects:l}){console.log("evaluate collection plugins");const u=Object.keys(s),p=u.filter(S=>!s[S].ops||s[S].ops.includes(a)).map(S=>this.crud.getPlugin(s[S].plugin?s[S].plugin:S).pipe((0,be.U)(G=>({p:G,params:s[S].params?Object.keys(s[S].params).reduce((W,J)=>({...W,[J]:s[S].params[J]instanceof si?s[S].params[J]:new si({flags:[],mapping:{type:"static",value:s[S].params[J],context:void 0,testValue:s[S].params[J]}})}),{}):{}})),(0,tt.w)(({p:G,params:W})=>this.buildQueryRule({params:t,config:s[S]}).pipe((0,be.U)(({rule:J})=>({p:G,params:W,rule:J})))),(0,tt.w)(({p:G,params:W,rule:J})=>this.flightAndCacheAwareCollectionQuery({p:G,input:{rule:J,objects:r,parentObjects:l,params:W,identity:({object:ve,parentObject:Ne})=>(0,Be.of)({identity:ve.id?ve.id:Ne?Ne.id:void 0})}}).pipe((0,ee.b)(()=>console.log("end of crud query call")))),(0,tt.w)(G=>Xn(()=>s[S].plugins&&0!==Object.keys(s[S].plugins).length,this.evaluateCollectionPlugins({query:t,plugins:s[S].plugins&&0!==Object.keys(s[S].plugins).length?s[S].plugins:{},objects:G.entities?G.entities:r,parentObjects:G.originalEntities?G.originalEntities:r,op:a}),(0,Be.of)(G))),(0,ee.b)(G=>console.log("end of op",G))));return u.filter(S=>!s[S].ops||s[S].ops.includes(a)).find(S=>s[S].fallback)&&p.length>1?p.reduce((S,G)=>S.pipe((0,tt.w)(W=>W&&Array.isArray(W)&&W.length>0?(0,Be.of)(W):G.pipe((0,be.U)(J=>J&&J.entities&&Array.isArray(J.entities)?J.entities:[]))),(0,tt.w)(W=>(0,Be.of)(W.length>0?W:[]))),(0,Be.of)([])):1===p.length?p[0].pipe((0,be.U)(S=>[...S.entities])):(0,pn.D)(p).pipe((0,be.U)(S=>S.reduce((G,W)=>[...G,...W.entities],[])),(0,zr.d)([]))}buildQueryRule({params:t,config:r}){return new v.y(s=>{const a=[];"string"==typeof t&&t.split("&").map(p=>p.split("=",2)).reduce((p,[h,S])=>new Map([...Array.from(p).filter(([G,W])=>G!==h),[h,[...p.has(h)?p.get(h):[],S]]]),new Map).forEach((p,h)=>a.push({any:p.map(S=>({fact:"identity"===h?"identity":"entity",operator:r.queryMappings&&r.queryMappings.has(h)&&r.queryMappings.get(h).defaultOperator?r.queryMappings.get(h).defaultOperator:"equal",value:S,..."identity"===h?{}:{path:`$.${h}`}}))}));const l=a.length>0?new tc.Rule({conditions:{all:a},event:{type:"visible"}}):void 0;s.next({rule:l}),s.complete()})}flightAndCacheAwareCollectionQuery(t){let r=this.cachedCollectionQueries.findIndex(({p:s,input:a})=>{const l=(0,Bg.getDiff)({...t.p,...this.cachedCollectionIgnore.p},{...s,...this.cachedCollectionIgnore.p}),u=(0,Bg.getDiff)({...t.input,...this.cachedCollectionIgnore.input},{...a,...this.cachedCollectionIgnore.input});return 0===l.length&&0===u.length});return-1===r&&(this.cachedCollectionQueries.push({p:t.p,input:t.input,query$:new kg.t}),r=this.cachedCollectionQueries.length-1,t.p.query(t.input).pipe((0,ee.b)(s=>this.cachedCollectionQueries[r].query$.next(s)),(0,an.q)(1)).subscribe()),this.cachedCollectionQueries[r].query$.pipe((0,an.q)(1))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Ha))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Yd=(()=>{class e{constructor(t,r,s,a,l,u,p,h){t.register(((e,n,t,r,s,a)=>new xs({id:"crud_adaptor",title:"Crud Adaptor",editor:$0,fetch:({settings:l,metadata:u})=>(0,Be.of)(new Rn).pipe((0,be.U)(()=>n.deserializeAsObject(l)),(0,be.U)(p=>new V0(p)),(0,tt.w)(p=>t.getPlugin(p.adaptorName).pipe((0,be.U)(h=>({plugin:h,ds:p})))),(0,be.U)(({plugin:p,ds:h})=>({plugin:p,ds:h,optionNames:h.optionsString?h.optionsString.split("&").filter(S=>-1!==S.indexOf("=:")).map(S=>S.split("=",2)[1].substr(1)):[]})),(0,tt.w)(({plugin:p,ds:h,optionNames:S})=>(0,pn.D)([r.paramValues(h.options.reduce((G,W,J)=>new Map([...G,[S[J],W]]),new Map)).pipe((0,be.U)(G=>Array.from(G).reduce((W,[J,ve])=>({...W,[J]:ve}),{}))),h.paramsString&&""!==h.paramsString?a.getUrl("?"+h.paramsString,h.params,u).pipe((0,an.q)(1)):(0,Be.of)(void 0)]).pipe((0,be.U)(([G,W])=>({plugin:p,options:G,query:W})))),(0,tt.w)(({plugin:p,options:h,query:S})=>s.evaluateCollectionPlugins({plugins:{[p.id]:{params:h}},op:"query",query:S&&S.substr(1)})),(0,be.U)(p=>new Rn({results:p}))),editorOptions:()=>(0,Be.of)(new fh({fullscreen:!0})),getBindings:({})=>(0,Be.of)([])}))(0,l,r,u,p,h)),s.register((({crudDataHelper:e,attributeSerializer:n})=>new N0({id:"crud",title:"Crud",editor:$0,send:t=>(0,Be.of)(new jg({})).pipe((0,be.U)(()=>({settings:n.deserializeAsObject(t.settings)})),(0,ee.b)(({settings:r})=>console.log("crud data duct",r)),(0,be.U)(({settings:r})=>({plugins:{[`${r.adaptorName}`]:{plugin:`${r.adaptorName}`,ops:["create"],params:`${r.optionsString}`.split("&").reduce((s,a,l)=>({...s,[a.split("=",1)[0]]:new si(r.options[l])}),{})}}})),(0,tt.w)(({plugins:r})=>e.evaluatePlugins({object:t.data,plugins:r,op:"create",parentObject:{id:zn()}})),(0,be.U)(()=>new jg({})))}))({crudDataHelper:p,attributeSerializer:l}))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Ro),o.\u0275\u0275inject(Ha),o.\u0275\u0275inject(ph),o.\u0275\u0275inject(Ng),o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(Zs),o.\u0275\u0275inject(Qd),o.\u0275\u0275inject(Wd))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[C.CommonModule,d.UX,d.u5,ri.MaterialModule,Zu,Ga]]}),e})();class Lg{constructor(n,t,r,s){this.crud=t,this.entityDefinitionService=r,this.crudDataHelperService=s,this._name=`${n} CrudDataService`,this.entityName=n}get name(){return this._name}add(n){const t=this.entityDefinitionService.getDefinition(this.entityName).metadata;return this.crudDataHelperService.evaluatePlugins({object:n,plugins:t.crud,op:"create"})}update(n){const t=this.entityDefinitionService.getDefinition(this.entityName).metadata;return this.crudDataHelperService.evaluatePlugins({object:n.changes,plugins:t.crud,op:"update"})}upsert(n){const t=this.entityDefinitionService.getDefinition(this.entityName).metadata;return this.crudDataHelperService.evaluatePlugins({object:n,plugins:t.crud,op:"update"})}delete(n){const t=this.entityDefinitionService.getDefinition(this.entityName).metadata;return this.getById(n).pipe((0,tt.w)(r=>this.crudDataHelperService.evaluatePlugins({object:r,plugins:t.crud,op:"delete"})),(0,be.U)(()=>n))}getAll(){const n=this.entityDefinitionService.getDefinition(this.entityName).metadata;return this.crudDataHelperService.evaluateCollectionPlugins({plugins:n.crud,op:"query"})}getById(n){const t=this.entityDefinitionService.getDefinition(this.entityName).metadata;return this.crudDataHelperService.evaluateCollectionPlugins({query:`identity=${n}`,plugins:t.crud,op:"query"}).pipe((0,be.U)(r=>r&&0!==r.length?r[0]:void 0))}getWithQuery(n){const t=this.entityDefinitionService.getDefinition(this.entityName).metadata;return this.crudDataHelperService.evaluateCollectionPlugins({query:n,plugins:t.crud,op:"query"})}}let H0=(()=>{class e{constructor(){this.operatorsMap=new Map([["=","equal"],["!=","notEqual"]])}buildFields(t,r=""){const s=new Map;return this.genericFields(t,s,r,0),s}attributeFields(t,r,s,a){t.forEach((l,u)=>{if("widget"!==l.name)for(const p in l)l.type===Ct.AttributeTypes.Complex||"attributes"===p&&l.attributes&&l.attributes.length>0?this.attributeFields(l.attributes,r,l.type===Ct.AttributeTypes.Complex?`${s}`:`${s}.${l.name}`,a+1):"attributes"!==p&&(p===l.name?r.set(`${s}.${p}`,{name:`${s}.${p}`,type:this.resolveAttributeType(l.type),defaultValue:l[p]}):r.set(`${s}.${l.name}.${p}`,{name:`${s}.${l.name}.${p}`,type:this.resolveAttributeType(l.type),defaultValue:l[p]}))})}genericFields(t,r,s,a){for(const u in t){const p=typeof t[u];if("object"!==p)r.set(`${s}.${u}`,{name:`${s}.${u}`,type:this.resolveNativeType(p),defaultValue:t[u]});else if(Array.isArray(t[u])&&"attributes"===u)this.attributeFields(t[u],r,`${s}.${u}`,a+1);else if(Array.isArray(t[u])){var l=t[u].length;for(let h=0;h<l;h++)this.genericFields(t[u][h],r,`${s}.${u}.${h}`,a+1)}else this.genericFields(t[u],r,`${s}.${u}`,a+1)}}toEngineRule(t,r=0){const s=[];if(void 0!==t.rules&&Array.isArray(t.rules)){const a=t.rules.length;for(let l=0;l<a;l++)if(!("field"in t.rules[l])||null!=t.condition&&""!==t.condition){const u=this.toEngineRule(t.rules[l],r+1);s.push(u.conditions)}else{const u=t.rules[l].field.indexOf("."),p=t.rules[l].field.substr(0,u),h=t.rules[l].field.substr(u+1);s.push({fact:p,path:`$.${h}`,operator:this.operatorsMap.get(t.rules[l].operator),value:t.rules[l].value})}return new tc.Rule("and"===t.condition?{conditions:{all:s},event:0===r?{type:"visible"}:void 0}:{conditions:{any:s},event:0===r?{type:"visible"}:void 0})}{const a=t.field.indexOf("."),l=t.field.substr(0,a),u=t.field.substr(a+1);return s.push({fact:l,path:`$.${u}`,operator:this.operatorsMap.get(t.operator),value:t.value}),new tc.Rule({conditions:{all:s},event:0===r?{type:"visible"}:void 0})}}extractConditions(t,r=0){const s=this.toEngineRule(t);return[...void 0!==s.conditions.any?s.conditions.any:[],...void 0!==s.conditions.all?s.conditions.all:[]]}resolveNativeType(t){switch(t){case"number":return"number";case"boolean":return"boolean";default:return"string"}}resolveAttributeType(t){switch(t){case Ct.AttributeTypes.Float:case Ct.AttributeTypes.Number:return"number";case Ct.AttributeTypes.Bool:return"boolean";default:return"string"}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),zg=(()=>{class e{constructor(t,r){this.rulesParser=t,this.inlineContextResolver=r}evaluate(t,r=[]){return this.inlineContextResolver.resolveMerged(r,`rules:${zn()}`).pipe((0,an.q)(1),(0,be.U)(s=>[{...s},new tc.Engine]),(0,ee.b)(([s,a])=>{const l=this.rulesParser.toEngineRule(t);a.addRule(l)}),(0,tt.w)(([s,a])=>new v.y(l=>{a.run(s).then(u=>{l.next(u.events.findIndex(p=>"visible"===p.type)>-1),l.complete()})})))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(H0),o.\u0275\u0275inject(Yu))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();x(1510);var Ug=x(457),q0=x(4578);const Gg=({body:e,headers:n,hostname:t,method:r="GET",path:s="/",port:a=443,protocol:l="https:",query:u,service:p,cognitoSettings:h,authFacade:S})=>(0,Be.of)(new Er({body:e,headers:n,hostname:t,method:r,path:s,port:a,protocol:l,query:u})).pipe((0,ee.b)(()=>console.log(".marker({ event: BEGIN , context: s3, entity: sig , op: signv4 , meta: {  } })")),(0,tt.w)(G=>(0,Ug.D)(new Kp({credentials:dg({client:new yg({region:h.region}),identityPoolId:h.identityPoolId,logins:{[`cognito-idp.${h.region}.amazonaws.com/${h.userPoolId}`]:()=>Nu(S.getUser$.pipe((0,be.U)(W=>W?W.id_token:void 0)))}}),region:h.region,service:p,sha256:q0.Sha256}).sign(G).then(W=>(console.log(".marker({ event: RESOLVED, entity: s3 , op: signv4 , meta: {  } })"),W))).pipe((0,ee.b)(()=>console.log(".marker({ /s3/sign/after/sig })")),(0,an.q)(1))),(0,be.U)(G=>G),(0,ee.b)(()=>console.log(".marker({ event: END , context: s3, entity: sig , op: signv4 , meta: {  } })")));let sD=(()=>{class e{constructor(t,r,s,a,l,u,p){s.register(((e,n,t,r,s,a)=>new nc({id:"aws_s3_entity",title:"AWS S3 Entity",create:({object:l,identity:u,params:p,parentObject:h})=>(0,Be.of)({success:!1}).pipe(r.resolveParams({params:p}),(0,tt.w)(({options:S})=>u({object:l,parentObject:h}).pipe((0,be.U)(({identity:G})=>({identity:G,options:S})))),(0,tt.w)(({options:S,identity:G})=>Gg({method:"PUT",body:JSON.stringify(l),headers:{"Content-Type":"application/json",host:`${S.bucket}.s3.amazonaws.com`},hostname:`${S.bucket}.s3.amazonaws.com`,path:`${S.prefix}${G}.json`,protocol:"https:",service:"s3",cognitoSettings:t,authFacade:n}).pipe((0,be.U)(W=>({signedHttpRequest:W,options:S})))),(0,ee.b)(({signedHttpRequest:S})=>delete S.headers.host),(0,be.U)(({signedHttpRequest:S,options:G})=>({signedHttpRequest:S,options:G,url:`https://${G.bucket}.s3.amazonaws.com${S.path}`})),(0,tt.w)(({signedHttpRequest:S,url:G})=>s.put(G,JSON.stringify(l),{headers:S.headers,withCredentials:!1})),(0,be.U)(()=>({success:!0}))),read:({})=>(0,Be.of)({success:!1}),update:({object:l,identity:u,params:p})=>(0,Be.of)({success:!1}).pipe(r.resolveParams({params:p}),(0,tt.w)(({options:h})=>u({object:l}).pipe((0,be.U)(({identity:S})=>({identity:S,options:h})))),(0,tt.w)(({options:h,identity:S})=>Gg({method:"PUT",body:JSON.stringify(l),headers:{"Content-Type":"application/json",host:`${h.bucket}.s3.amazonaws.com`},hostname:`${h.bucket}.s3.amazonaws.com`,path:`${h.prefix}${S}.json`,protocol:"https:",service:"s3",cognitoSettings:t,authFacade:n}).pipe((0,be.U)(G=>({signedHttpRequest:G,options:h})))),(0,ee.b)(({signedHttpRequest:h})=>delete h.headers.host),(0,be.U)(({signedHttpRequest:h,options:S})=>({signedHttpRequest:h,options:S,url:`https://${S.bucket}.s3.amazonaws.com${h.path}`})),(0,tt.w)(({signedHttpRequest:h,url:S})=>s.put(S,JSON.stringify(l),{headers:h.headers,withCredentials:!1})),(0,be.U)(()=>({success:!0}))),delete:({})=>(0,Be.of)({success:!1}),query:({rule:l,params:u})=>(0,Be.of)({entities:[],success:!1}).pipe(r.resolveParams({params:u}),(0,be.U)(({options:p})=>({options:p,identityCondition:l.conditions.all.map(h=>h.any.find(S=>"identity"===S.fact)).find(h=>!!h)})),(0,tt.w)(({identityCondition:p,options:h})=>Xn(()=>void 0!==p&&p&&"identity"===p.fact&&h&&h.bucket,Gg({method:"GET",body:void 0,headers:{"Content-Type":"application/json",host:`${h?h.bucket:""}.s3.amazonaws.com`},hostname:`${h?h.bucket:""}.s3.amazonaws.com`,path:`${h&&h.prefix?h.prefix:""}${p?p.value:""}.json`,protocol:"https:",service:"s3",cognitoSettings:t,authFacade:n}).pipe((0,ee.b)(()=>console.log(".marker({ event: AFTER , entity: s3 , op: query , meta: { action: createSignedRequest } })")),(0,ee.b)(S=>delete S.headers.host),(0,be.U)(S=>({signedHttpRequest:S,options:h,url:`https://${h.bucket}.s3.amazonaws.com${S.path}`})),(0,ee.b)(()=>console.log(".marker({ event: BEFORE , entity: crud , op: query , meta: { http: get } })")),(0,tt.w)(({signedHttpRequest:S,url:G})=>s.get(G,{headers:S.headers,withCredentials:!1})),(0,ee.b)(()=>console.log(".marker({ event: AFTER , entity: s3 , op: query , meta: { http: get } })")),(0,be.U)(S=>({entities:S?[S]:[],success:!!S}))),(0,Be.of)({entities:[],success:!1}))))}))(0,a,t,l,u))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(xl),o.\u0275\u0275inject(o.PLATFORM_ID),o.\u0275\u0275inject(Ha),o.\u0275\u0275inject(ei),o.\u0275\u0275inject(Zs),o.\u0275\u0275inject(F.HttpClient),o.\u0275\u0275inject(on.AsyncApiCallHelperService))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[on.UtilsModule,_i,Yd]]}),e})();const hh=({body:e,headers:n,hostname:t,method:r="GET",path:s="/",port:a=443,protocol:l="https:",query:u,service:p,cognitoSettings:h,authFacade:S})=>(0,Be.of)(new Er({body:e,headers:n,hostname:t,method:r,path:s,port:a,protocol:l,query:u})).pipe((0,ee.b)(()=>console.log(".marker({ event: BEGIN , context: os, entity: sig , op: signv4 , meta: {  } })")),(0,tt.w)(G=>(0,Ug.D)(new Kp({credentials:dg({client:new yg({region:h.region}),identityPoolId:h.identityPoolId,logins:{[`cognito-idp.${h.region}.amazonaws.com/${h.userPoolId}`]:()=>Nu(S.getUser$.pipe((0,be.U)(W=>W?W.id_token:void 0)))}}),region:h.region,service:p,sha256:q0.Sha256,applyChecksum:!1}).sign(G).then(W=>(console.log(".marker({ event: RESOLVED, entity: os , op: signv4 , meta: {  } })"),W))).pipe((0,ee.b)(()=>console.log(".marker({ /os/sign/after/sig })")),(0,an.q)(1))),(0,be.U)(G=>G),(0,ee.b)(()=>console.log(".marker({ event: END , context: os, entity: sig , op: signv4 , meta: {  } })")));let uD=(()=>{class e{constructor(t,r,s,a,l,u){s.register(((e,n,t,r,s)=>new nc({id:"aws_opensearch_template",title:"AWS Opensearch Template",create:({})=>(0,Be.of)({success:!1}),read:({})=>(0,Be.of)({success:!1}),update:({})=>(0,Be.of)({success:!1}),delete:({})=>(0,Be.of)({success:!1}),query:({rule:a,params:l})=>(0,Be.of)({entities:[],success:!1}).pipe((0,tt.w)(()=>l&&0!==Object.keys(l).length?(0,pn.D)(Object.keys(l).map(u=>r.paramValue(l[u],new Map).pipe((0,be.U)(p=>({[u]:p}))))).pipe((0,be.U)(u=>u.reduce((p,h)=>({...p,...h}),{})),(0,be.U)(u=>({options:u}))):(0,Be.of)({options:{}})),(0,be.U)(({options:u})=>({options:u,body:JSON.stringify({id:u.id,params:a?a.conditions.all.reduce((p,h)=>({...p,...h.any.reduce((S,G)=>({...S,[G.path.substr(2)]:[...S[G.path.substr(2)]?S[G.path.substr(2)]:[],JSON.parse(decodeURIComponent(G.value))]}),{})}),{}):{}})})),(0,ee.b)(({body:u})=>console.log("open search template query body",u)),(0,tt.w)(({options:u,body:p})=>hh({method:"POST",body:p,headers:{"Content-Type":"application/json",host:`${u.domain}.${u.region}.es.amazonaws.com`},hostname:`${u.domain}.${u.region}.es.amazonaws.com`,path:`/${u.index}/_search/template`,protocol:"https:",service:"es",cognitoSettings:t,authFacade:n}).pipe((0,be.U)(h=>({signedHttpRequest:h,options:u})))),(0,tt.w)(({signedHttpRequest:u,options:p})=>(delete u.headers.host,s.post(`https://${p.domain}.${p.region}.es.amazonaws.com/${p.index}/_search/template`,u.body,{headers:u.headers,withCredentials:!1}).pipe((0,be.U)(S=>({res:S,options:p}))))),(0,be.U)(({res:u,options:p})=>({entities:p.hits&&u&&u.hits&&u.hits.hits?u.hits.hits.map(h=>p.source?h._source:h):[u],success:!0})))}))(0,a,t,l,u)),s.register(((e,n,t,r)=>new nc({id:"aws_opensearch_entity",title:"AWS Opensearch Entity",create:({object:s,identity:a,params:l,parentObject:u})=>(0,Be.of)({success:!1}).pipe(t.resolveParams({params:l}),(0,tt.w)(({options:p})=>a({object:s,parentObject:u}).pipe((0,be.U)(({identity:h})=>({identity:h,options:p})))),(0,tt.w)(({options:p,identity:h})=>hh({method:"PUT",body:JSON.stringify(s),headers:{"Content-Type":"application/json",host:`${p.domain}.${p.region}.es.amazonaws.com`},hostname:`${p.domain}.${p.region}.es.amazonaws.com`,path:`/${p.index}/_doc/${h}`,protocol:"https:",service:"es",...p.pipeline?{query:{pipeline:p.pipeline}}:{},cognitoSettings:n,authFacade:e}).pipe((0,be.U)(S=>({signedHttpRequest:S,options:p,identity:h})))),(0,tt.w)(({signedHttpRequest:p,options:h,identity:S})=>(delete p.headers.host,r.put(`https://${h.domain}.${h.region}.es.amazonaws.com/${h.index}/_doc/${S}`,JSON.stringify(s),{headers:p.headers,withCredentials:!1,params:{...h.pipeline?{pipeline:h.pipeline}:{}}}).pipe((0,be.U)(W=>({res:W,options:h}))))),(0,be.U)(()=>({success:!0}))),read:({})=>(0,Be.of)({success:!1}),update:({object:s,identity:a,params:l,parentObject:u})=>(0,Be.of)({success:!1}).pipe(t.resolveParams({params:l}),(0,tt.w)(({options:p})=>a({object:s,parentObject:u}).pipe((0,be.U)(({identity:h})=>({identity:h,options:p})))),(0,tt.w)(({options:p,identity:h})=>hh({method:"PUT",body:JSON.stringify(s),headers:{"Content-Type":"application/json",host:`${p.domain}.${p.region}.es.amazonaws.com`},hostname:`${p.domain}.${p.region}.es.amazonaws.com`,path:`/${p.index}/_doc/${h}`,protocol:"https:",service:"es",...p.pipeline?{query:{pipeline:p.pipeline}}:{},cognitoSettings:n,authFacade:e}).pipe((0,be.U)(S=>({signedHttpRequest:S,options:p,identity:h})))),(0,tt.w)(({signedHttpRequest:p,options:h,identity:S})=>(delete p.headers.host,r.put(`https://${h.domain}.${h.region}.es.amazonaws.com/${h.index}/_doc/${S}`,JSON.stringify(s),{headers:p.headers,withCredentials:!1,params:{...h.pipeline?{pipeline:h.pipeline}:{}}}).pipe((0,be.U)(W=>({res:W,options:h}))))),(0,be.U)(()=>({success:!0}))),delete:({})=>(0,Be.of)({success:!1}),query:({rule:s,params:a})=>(0,Be.of)({entities:[],success:!1}).pipe((0,ee.b)(()=>{console.log("crud open search query",s,a)}),t.resolveParams({params:a}),(0,be.U)(({options:l})=>({options:l,identityCondition:s.conditions.all.map(u=>u.any.find(p=>"identity"===p.fact)).find(u=>!!u)})),(0,tt.w)(({options:l,identityCondition:u})=>hh({method:"GET",headers:{"Content-Type":"application/json",host:`${l.domain}.${l.region}.es.amazonaws.com`},hostname:`${l.domain}.${l.region}.es.amazonaws.com`,path:`/${l.index}/_doc/${u?u.value:""}`,protocol:"https:",service:"es",cognitoSettings:n,authFacade:e}).pipe((0,ee.b)(()=>console.log(".marker({ event: AFTER , entity: opensearch , op: query , meta: { action: createSignedRequest } })")),(0,ee.b)(p=>delete p.headers.host),(0,be.U)(p=>({signedHttpRequest:p,options:l,url:`https://${l.domain}.${l.region}.es.amazonaws.com${p.path}`})),(0,ee.b)(()=>console.log(".marker({ event: BEFORE , entity: crud , op: query , meta: { http: get } })")),(0,tt.w)(({signedHttpRequest:p,url:h})=>r.get(h,{headers:p.headers,withCredentials:!1}).pipe((0,kr.K)(()=>(0,Be.of)(void 0)))),(0,ee.b)(()=>console.log(".marker({ event: AFTER , entity: opensearch , op: query , meta: { http: get } })")),(0,be.U)(p=>({entities:p?[p._source]:[],success:!!p})))))}))(a,t,l,u))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(xl),o.\u0275\u0275inject(o.PLATFORM_ID),o.\u0275\u0275inject(Ha),o.\u0275\u0275inject(ei),o.\u0275\u0275inject(Zs),o.\u0275\u0275inject(F.HttpClient))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[_i,Yd]]}),e})();var na=x(9056),cD=x(5017),Zd=x(9303),dD=Object.prototype.toString;var X0=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},mh=function(){function e(n,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(n,s.key,s)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}();function W0(e){return e.split("").map(function(n){return"(?:"+n.toUpperCase()+"|"+n.toLowerCase()+")"}).join("")}function rc(e,n){for(var t=e.length-1;t>=0;t--)e[t]===n&&Array.prototype.splice.call(e,t,1)}function fD(e,n){return Object.prototype.hasOwnProperty.call(e,n)}var Vg={},J0=function(){function e(){X0(this,e),this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[],this.acronyms={},this.acronymRegex=/(?=a)b/}return mh(e,null,[{key:"getInstance",value:function(t){return Vg[t]=Vg[t]||new e,Vg[t]}}]),mh(e,[{key:"acronym",value:function(t){this.acronyms[t.toLowerCase()]=t;var r=[];for(var s in this.acronyms)fD(this.acronyms,s)&&r.push(this.acronyms[s]);this.acronymRegex=new RegExp(r.join("|"))}},{key:"plural",value:function(t,r){"string"==typeof t&&rc(this.uncountables,t),rc(this.uncountables,r),this.plurals.unshift([t,r])}},{key:"singular",value:function(t,r){"string"==typeof t&&rc(this.uncountables,t),rc(this.uncountables,r),this.singulars.unshift([t,r])}},{key:"irregular",value:function(t,r){rc(this.uncountables,t),rc(this.uncountables,r);var s=t[0],a=t.substr(1),l=r[0],u=r.substr(1);if(s.toUpperCase()===l.toUpperCase())this.plural(new RegExp("("+s+")"+a+"$","i"),"$1"+u),this.plural(new RegExp("("+l+")"+u+"$","i"),"$1"+u),this.singular(new RegExp("("+s+")"+a+"$","i"),"$1"+a),this.singular(new RegExp("("+l+")"+u+"$","i"),"$1"+a);else{var p=W0(a),h=W0(u);this.plural(new RegExp(s.toUpperCase()+p+"$"),l.toUpperCase()+u),this.plural(new RegExp(s.toLowerCase()+p+"$"),l.toLowerCase()+u),this.plural(new RegExp(l.toUpperCase()+h+"$"),l.toUpperCase()+u),this.plural(new RegExp(l.toLowerCase()+h+"$"),l.toLowerCase()+u),this.singular(new RegExp(s.toUpperCase()+p+"$"),s.toUpperCase()+a),this.singular(new RegExp(s.toLowerCase()+p+"$"),s.toLowerCase()+a),this.singular(new RegExp(l.toUpperCase()+h+"$"),s.toUpperCase()+a),this.singular(new RegExp(l.toLowerCase()+h+"$"),s.toLowerCase()+a)}}},{key:"uncountable",value:function(){for(var t=arguments.length,r=Array(t),s=0;s<t;s++)r[s]=arguments[s];this.uncountables=this.uncountables.concat(r)}},{key:"human",value:function(t,r){this.humans.unshift([t,r])}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all";"all"===t?(this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[]):this[t]=[]}}]),e}(),Q0={en:function pD(e){e.plural(/$/,"s"),e.plural(/s$/i,"s"),e.plural(/^(ax|test)is$/i,"$1es"),e.plural(/(octop|vir)us$/i,"$1i"),e.plural(/(octop|vir)i$/i,"$1i"),e.plural(/(alias|status)$/i,"$1es"),e.plural(/(bu)s$/i,"$1ses"),e.plural(/(buffal|tomat)o$/i,"$1oes"),e.plural(/([ti])um$/i,"$1a"),e.plural(/([ti])a$/i,"$1a"),e.plural(/sis$/i,"ses"),e.plural(/(?:([^f])fe|([lr])f)$/i,"$1$2ves"),e.plural(/(hive)$/i,"$1s"),e.plural(/([^aeiouy]|qu)y$/i,"$1ies"),e.plural(/(x|ch|ss|sh)$/i,"$1es"),e.plural(/(matr|vert|ind)(?:ix|ex)$/i,"$1ices"),e.plural(/^(m|l)ouse$/i,"$1ice"),e.plural(/^(m|l)ice$/i,"$1ice"),e.plural(/^(ox)$/i,"$1en"),e.plural(/^(oxen)$/i,"$1"),e.plural(/(quiz)$/i,"$1zes"),e.singular(/s$/i,""),e.singular(/(ss)$/i,"$1"),e.singular(/(n)ews$/i,"$1ews"),e.singular(/([ti])a$/i,"$1um"),e.singular(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)(sis|ses)$/i,"$1sis"),e.singular(/(^analy)(sis|ses)$/i,"$1sis"),e.singular(/([^f])ves$/i,"$1fe"),e.singular(/(hive)s$/i,"$1"),e.singular(/(tive)s$/i,"$1"),e.singular(/([lr])ves$/i,"$1f"),e.singular(/([^aeiouy]|qu)ies$/i,"$1y"),e.singular(/(s)eries$/i,"$1eries"),e.singular(/(m)ovies$/i,"$1ovie"),e.singular(/(x|ch|ss|sh)es$/i,"$1"),e.singular(/^(m|l)ice$/i,"$1ouse"),e.singular(/(bus)(es)?$/i,"$1"),e.singular(/(o)es$/i,"$1"),e.singular(/(shoe)s$/i,"$1"),e.singular(/(cris|test)(is|es)$/i,"$1is"),e.singular(/^(a)x[ie]s$/i,"$1xis"),e.singular(/(octop|vir)(us|i)$/i,"$1us"),e.singular(/(alias|status)(es)?$/i,"$1"),e.singular(/^(ox)en/i,"$1"),e.singular(/(vert|ind)ices$/i,"$1ex"),e.singular(/(matr)ices$/i,"$1ix"),e.singular(/(quiz)zes$/i,"$1"),e.singular(/(database)s$/i,"$1"),e.irregular("person","people"),e.irregular("man","men"),e.irregular("child","children"),e.irregular("sex","sexes"),e.irregular("move","moves"),e.irregular("zombie","zombies"),e.uncountable("equipment","information","rice","money","species","series","fish","sheep","jeans","police")}};function Es(e,n){if(function K0(e){return"[object Function]"===dD.call(e)}(e)&&(n=e,e=null),e=e||"en",!n)return J0.getInstance(e);n(J0.getInstance(e))}for(var Y0 in Q0)Es(Y0,Q0[Y0]);function Z0(e,n){var r,s,a,t=""+e;if(0===t.length)return t;var l=t.toLowerCase().match(/\b\w+$/);if(l&&Es().uncountables.indexOf(l[0])>-1)return t;for(var u=0,p=n.length;u<p;u++)if(a=(r=n[u])[1],t.match(s=r[0])){t=t.replace(s,a);break}return t}function eb(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";return Z0(e,Es(n).plurals)}function tb(e){var n=null==e?"":String(e);return n.charAt(0).toUpperCase()+n.slice(1)}function Bl(e,n){null==n&&(n=!0);var t=""+e;return(t=n?t.replace(/^[a-z\d]*/,function(r){return Es().acronyms[r]||tb(r)}):t.replace(new RegExp("^(?:"+Es().acronymRegex.source+"(?=\\b|[A-Z_])|\\w)"),function(r){return r.toLowerCase()})).replace(/(?:_|(\/))([a-z\d]*)/gi,function(r,s,a,l,u){return s||(s=""),""+s+(Es().acronyms[a]||tb(a))})}var nb={\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00c6:"AE",\u00c7:"C",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00d0:"D",\u00d1:"N",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O","\xd7":"x",\u00d8:"O",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00dd:"Y",\u00de:"Th",\u00df:"ss",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00e6:"ae",\u00e7:"c",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00f0:"d",\u00f1:"n",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00fd:"y",\u00fe:"th",\u00ff:"y",\u0100:"A",\u0101:"a",\u0102:"A",\u0103:"a",\u0104:"A",\u0105:"a",\u0106:"C",\u0107:"c",\u0108:"C",\u0109:"c",\u010a:"C",\u010b:"c",\u010c:"C",\u010d:"c",\u010e:"D",\u010f:"d",\u0110:"D",\u0111:"d",\u0112:"E",\u0113:"e",\u0114:"E",\u0115:"e",\u0116:"E",\u0117:"e",\u0118:"E",\u0119:"e",\u011a:"E",\u011b:"e",\u011c:"G",\u011d:"g",\u011e:"G",\u011f:"g",\u0120:"G",\u0121:"g",\u0122:"G",\u0123:"g",\u0124:"H",\u0125:"h",\u0126:"H",\u0127:"h",\u0128:"I",\u0129:"i",\u012a:"I",\u012b:"i",\u012c:"I",\u012d:"i",\u012e:"I",\u012f:"i",\u0130:"I",\u0131:"i",\u0132:"IJ",\u0133:"ij",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013a:"l",\u013b:"L",\u013c:"l",\u013d:"L",\u013e:"l",\u013f:"L",\u0140:"l",\u0141:"L",\u0142:"l",\u0143:"N",\u0144:"n",\u0145:"N",\u0146:"n",\u0147:"N",\u0148:"n",\u0149:"'n",\u014a:"NG",\u014b:"ng",\u014c:"O",\u014d:"o",\u014e:"O",\u014f:"o",\u0150:"O",\u0151:"o",\u0152:"OE",\u0153:"oe",\u0154:"R",\u0155:"r",\u0156:"R",\u0157:"r",\u0158:"R",\u0159:"r",\u015a:"S",\u015b:"s",\u015c:"S",\u015d:"s",\u015e:"S",\u015f:"s",\u0160:"S",\u0161:"s",\u0162:"T",\u0163:"t",\u0164:"T",\u0165:"t",\u0166:"T",\u0167:"t",\u0168:"U",\u0169:"u",\u016a:"U",\u016b:"u",\u016c:"U",\u016d:"u",\u016e:"U",\u016f:"u",\u0170:"U",\u0171:"u",\u0172:"U",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017a:"z",\u017b:"Z",\u017c:"z",\u017d:"Z",\u017e:"z",\u0410:"A",\u0411:"B",\u0412:"V",\u0413:"G",\u0414:"D",\u0415:"E",\u0401:"E",\u0416:"ZH",\u0417:"Z",\u0418:"I",\u0419:"J",\u041a:"K",\u041b:"L",\u041c:"M",\u041d:"N",\u041e:"O",\u041f:"P",\u0420:"R",\u0421:"S",\u0422:"T",\u0423:"U",\u0424:"F",\u0425:"KH",\u0426:"C",\u0427:"CH",\u0428:"SH",\u0429:"SHCH",\u042a:"",\u042b:"Y",\u042c:"",\u042d:"E",\u042e:"YU",\u042f:"YA",\u0430:"a",\u0431:"b",\u0432:"v",\u0433:"g",\u0434:"d",\u0435:"e",\u0451:"e",\u0436:"zh",\u0437:"z",\u0438:"i",\u0439:"j",\u043a:"k",\u043b:"l",\u043c:"m",\u043d:"n",\u043e:"o",\u043f:"p",\u0440:"r",\u0441:"s",\u0442:"t",\u0443:"u",\u0444:"f",\u0445:"kh",\u0446:"c",\u0447:"ch",\u0448:"sh",\u0449:"shch",\u044a:"",\u044b:"y",\u044c:"",\u044d:"e",\u044e:"yu",\u044f:"ya"},$g={};function wD(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-option",5),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=n.index;o.\u0275\u0275property("value",t),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1("panel page | level: ",t,"")}}function CD(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-form-field"),o.\u0275\u0275elementStart(1,"mat-select",3),o.\u0275\u0275template(2,wD,2,2,"mat-option",4),o.\u0275\u0275pipe(3,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(3,1,t.panelPages$))}}function xD(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-option",5),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=n.index;o.\u0275\u0275property("value",t),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1("panel | ",t,"")}}function SD(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-form-field"),o.\u0275\u0275elementStart(1,"mat-select",6),o.\u0275\u0275template(2,xD,2,2,"mat-option",4),o.\u0275\u0275pipe(3,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(3,1,t.panels$))}}function ED(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-option",5),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=n.index;o.\u0275\u0275property("value",t),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1("pane | ",t,"")}}function AD(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-form-field"),o.\u0275\u0275elementStart(1,"mat-select",7),o.\u0275\u0275template(2,ED,2,2,"mat-option",4),o.\u0275\u0275pipe(3,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(3,1,t.panes$))}}function PD(e,n){if(1&e&&o.\u0275\u0275element(0,"druid-panels-panelpage-linkedlist",8),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275property("panelPages",t.nested)}}function ID(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"a",2),o.\u0275\u0275listener("click",function(){const a=o.\u0275\u0275restoreView(t).$implicit;return o.\u0275\u0275nextContext(2).onItemSelect(a.id)}),o.\u0275\u0275elementStart(1,"span",6),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){const t=n.$implicit;o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate2("",t.title," [",t.id,"]")}}function TD(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-nav-list"),o.\u0275\u0275template(1,ID,3,2,"a",5),o.\u0275\u0275pipe(2,"async"),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(2,1,t.panels$))}}!function(){function e(){for(var n in X0(this,e),this.approximations={},nb)this.approximate(n,nb[n])}mh(e,null,[{key:"getInstance",value:function(t){return $g[t]=$g[t]||new e,$g[t]}}]),mh(e,[{key:"approximate",value:function(t,r){this.approximations[t]=r}},{key:"transliterate",value:function(t,r){var s=this;return t.replace(/[^\u0000-\u007f]/g,function(a){return s.approximations[a]||r||"?"})}}])}();class kD{constructor(n){n&&(this.openSearchDomain=n.openSearchDomain,this.s3Bucket=n.s3Bucket,this.objectsRootUrl=n.objectsRootUrl)}}class Cr{constructor(n){this.gridItems=[],this.panels=[],this.contexts=[],this.rowSettings=[],this.entityPermissions=new ob,n&&(this.id=n.id,this.layoutType=n.layoutType,this.displayType=n.displayType,this.name=n.name?n.name:void 0,this.title=n.title?n.title:void 0,this.site=n.site?n.site:void 0,this.userId=n.userId?n.userId:void 0,this.path=n.path?n.path:void 0,this.persistence=n.persistence?new ec(n.persistence):void 0,this.interactions=n.interactions?new Nl(n.interactions):void 0,n.panels&&(this.panels=n.panels.map(t=>new ra(t))),n.gridItems&&(this.gridItems=n.gridItems.map(t=>new ib(t))),n.contexts&&(this.contexts=n.contexts.map(t=>new Ei(t))),n.layoutSetting&&(this.layoutSetting=new Fn(n.layoutSetting)),n.rowSettings&&Array.isArray(n.rowSettings)&&(this.rowSettings=n.rowSettings.map(t=>new Fn(t))),n.entityPermissions&&(this.entityPermissions=new ob(n.entityPermissions)),n.cssFile&&(this.cssFile=n.cssFile))}}class ra{constructor(n){this.settings=[],this.panes=[],n&&(this.name=n.name?n.name:void 0,this.label=n.label?n.label:void 0,this.stylePlugin=n.stylePlugin,n.settings&&(this.settings=n.settings.map(t=>new Ct.AttributeValue(t))),n.panes&&(this.panes=n.panes.map(t=>new dr(t))),n.columnSetting&&(this.columnSetting=new Fn(n.columnSetting)))}}class dr{constructor(n){this.settings=[],this.locked=!1,this.contexts=[],n&&(this.name=n.name,this.label=n.label,this.contentPlugin=n.contentPlugin,this.locked=void 0!==n.locked&&n.locked,n.linkedPageId&&(this.linkedPageId=n.linkedPageId),void 0!==n.metadata&&(this.metadata=new Map([...n.metadata])),void 0!==n.settings&&(this.settings=n.settings.map(t=>new Ct.AttributeValue(t))),void 0!==n.contexts&&(this.contexts=n.contexts.map(t=>new Ei(t))),void 0!==n.rule&&"string"!=typeof n.rule&&(this.rule={...n.rule}),n.nestedPage&&(this.nestedPage=new Cr(n.nestedPage)),n.resolvedContext&&(this.resolvedContext={...n.resolvedContext}))}}class ib{constructor(n){n&&(this.cols=n.cols,this.rows=n.rows,this.x=n.x,this.y=n.y,this.weight=n.weight)}}class Fn{constructor(n){this.settings=[],n&&n.settings&&Array.isArray(n.settings)&&(this.settings=n.settings.map(t=>new Ct.AttributeValue(t)))}}class ob{constructor(n){this.readUserIds=[],this.writeUserIds=[],this.deleteUserIds=[],n&&(this.readUserIds=n.readUserIds?n.readUserIds.map(t=>t):[],this.writeUserIds=n.writeUserIds?n.writeUserIds.map(t=>t):[],this.deleteUserIds=n.deleteUserIds?n.deleteUserIds.map(t=>t):[])}}let Mi=(()=>{class e{constructor(t){this.attributeSerializer=t}handleFile(t){return(0,Be.of)()}handlesType(t){return!1}implementsRendererOverride(){return!1}hasRendererOverride(t){return(0,Be.of)(!1)}isDynamic(t){return!1}isData(t){return!1}buildDynamicItems(t,r){return(0,Be.of)([])}fetchDynamicData(t,r){return(0,Be.of)(new Rn)}getBindings(t,r){return(0,Be.of)([])}toObject(t){return(0,Be.of)(this.attributeSerializer.deserializeAsObject(t))}buildSettings(t){return this.attributeSerializer.serialize(t,"root").attributes}fromPanes(t){return t.map(r=>new dr(this.attributeSerializer.deserialize(r)))}wrapPanel(t){return new ra({stylePlugin:void 0,settings:[],panes:t,columnSetting:new Fn})}stateDefinition(t){return(0,Be.of)({})}editorOptions(t){return(0,Be.of)(new Gt.ContentPluginEditorOptions)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Ct.AttributeSerializerService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),OD=(()=>{class e{constructor(t,r){this.fb=t,this.panelHandler=r,this.panelPages$=new m.X([]),this.panels$=new m.X([]),this.panes$=new m.X([]),this.nested$=new m.X([]),this.formGroup=this.fb.group({panelPage:this.fb.control(void 0),panel:this.fb.control(void 0),pane:this.fb.control(void 0),nested:this.fb.control(void 0)}),this.panelPageSub=this.formGroup.get("panelPage").valueChanges.subscribe(s=>{this.panels$.next(new Cr(this.panelPages$.value[s]).panels)}),this.panelSub=this.formGroup.get("panel").valueChanges.subscribe(s=>{this.panes$.next(new ra(this.panels$.value[s]).panes)}),this.paneSub=this.formGroup.get("pane").valueChanges.pipe((0,be.U)(s=>this.panes$.value[s]),(0,tt.w)(s=>Xn(()=>"panel"===s.contentPlugin,this.panelHandler.toObject(s.settings),(0,Be.of)(void 0))),(0,U.h)(s=>!!s)).subscribe(s=>{this.nested$.next([s])}),this.onTouched=()=>{}}set panelPages(t){this.panelPages$.next(t)}set panels(t){this.panels$.next(t)}set panes(t){this.panes$.next(t)}get panelPages(){return this.panelPages$.value&&Array.isArray(this.panelPages$.value)?this.panelPages$.value:[]}get panels(){return this.panels$.value&&Array.isArray(this.panels$.value)?this.panels$.value:[]}get panes(){return this.panes$.value&&Array.isArray(this.panes$.value)?this.panes$.value:[]}get nested(){return this.nested$.value&&void 0!==typeof this.nested$.value&&this.nested$.value.length>0?[...this.nested$.value]:void 0}writeValue(t){t&&this.formGroup.setValue(t,{emitEvent:!1})}registerOnChange(t){this.formGroup.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.formGroup.disable():this.formGroup.enable()}validate(t){return this.formGroup.valid?null:{invalidForm:{valid:!1}}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Mi))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-panels-panelpage-linkedlist"]],inputs:{panelPages:"panelPages",panels:"panels",panes:"panes"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>e),multi:!0}])],decls:5,vars:5,consts:[[3,"formGroup"],[4,"ngIf"],["formControlName","nested",3,"panelPages",4,"ngIf"],["required","","formControlName","panelPage"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["required","","formControlName","panel"],["required","","formControlName","pane"],["formControlName","nested",3,"panelPages"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275template(1,CD,4,3,"mat-form-field",1),o.\u0275\u0275template(2,SD,4,3,"mat-form-field",1),o.\u0275\u0275template(3,AD,4,3,"mat-form-field",1),o.\u0275\u0275template(4,PD,1,1,"druid-panels-panelpage-linkedlist",2),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.formGroup),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.panelPages.length>0),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.panels.length>0),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.panes.length>0),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.nested))},directives:[Yt.KE,oi.gD,cr.ey,e,d.JL,d.sg,C.NgIf,d.Q7,d.JJ,d.u,C.NgForOf],pipes:[C.AsyncPipe],encapsulation:2}),e})(),FD=(()=>{class e{constructor(t,r,s,a,l,u){this.siteName=t,this.bottomSheetRef=r,this.handler=s,this.dialog=a,this.fb=l,this.selectedIndex=0,this.panelPagesService=u.getEntityCollectionService("PanelPage"),this.panelPageListItemsService=u.getEntityCollectionService("PanelPageListItem")}ngOnInit(){}onNewSelect(){const t=zn(),r=new Cr({id:void 0,layoutType:"split",displayType:"page",site:this.siteName,gridItems:[],panels:[],layoutSetting:new Fn,rowSettings:[]});this.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"panel",name:t,label:t,rule:new d.NI(""),settings:this.fb.array(this.handler.buildSettings(r).map(s=>this.convertToGroup(s)))})),this.bottomSheetRef.dismiss()}onLinkSelect(){this.selectedIndex=1,this.panels$=this.panelPageListItemsService.getWithQuery(`site=${encodeURIComponent(this.siteName)}`)}onEmbedSelect(){const t=zn();this.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"panel",name:t,label:t,rule:new d.NI(""),locked:new d.NI(!0),settings:this.fb.array([])})),this.bottomSheetRef.dismiss()}onItemSelect(t){const r=zn();this.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"panel",name:r,label:r,rule:new d.NI(""),linkedPageId:new d.NI(t,d.kI.required),locked:new d.NI(!0),settings:this.fb.array([])})),this.bottomSheetRef.dismiss()}convertToGroup(t){const r=this.fb.group({name:new d.NI(t.name,d.kI.required),type:new d.NI(t.type,d.kI.required),displayName:new d.NI(t.displayName,d.kI.required),value:new d.NI(t.value,d.kI.required),computedValue:new d.NI(t.value,d.kI.required),attributes:new d.Oe([])});return t.attributes&&t.attributes.length>0&&t.attributes.forEach(s=>{r.get("attributes").push(this.convertToGroup(s))}),r}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(on.SITE_NAME),o.\u0275\u0275directiveInject(jl.oL),o.\u0275\u0275directiveInject(Mi),o.\u0275\u0275directiveInject(Dt.uw),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Yn))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-panel-selector"]],inputs:{panelFormGroup:"panelFormGroup"},decls:11,vars:1,consts:[["mat-align-tabs","start",3,"selectedIndex"],["label","Type"],["mat-list-item","","mat-list-item","",3,"click"],["label","Search"],["matTabContent",""],["mat-list-item","","mat-list-item","",3,"click",4,"ngFor","ngForOf"],["mat-line",""]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"mat-tab-group",0),o.\u0275\u0275elementStart(1,"mat-tab",1),o.\u0275\u0275elementStart(2,"mat-nav-list"),o.\u0275\u0275elementStart(3,"a",2),o.\u0275\u0275listener("click",function(){return r.onNewSelect()}),o.\u0275\u0275text(4,"New Panel"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"a",2),o.\u0275\u0275listener("click",function(){return r.onLinkSelect()}),o.\u0275\u0275text(6,"Link Panel"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"a",2),o.\u0275\u0275listener("click",function(){return r.onEmbedSelect()}),o.\u0275\u0275text(8,"Embed Panel"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"mat-tab",3),o.\u0275\u0275template(10,TD,3,3,"ng-template",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&o.\u0275\u0275property("selectedIndex",r.selectedIndex)},directives:[Ss.SP,Ss.uX,$a.Hk,$a.Tg,Ss.Vc,C.NgForOf,cr.X2],pipes:[C.AsyncPipe],styles:[""]}),e})(),DD=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-panel-editor"]],decls:2,vars:0,template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"p"),o.\u0275\u0275text(1,"panel-editor works!"),o.\u0275\u0275elementEnd())},styles:[""]}),e})();class As{constructor(n){this.panels=[],n&&(this.id=n.id,void 0!==n.panels&&Array.isArray(n.panels)&&(this.panels=n.panels.map(t=>new Ll(t))))}}class Ll{constructor(n){this.panes=[],n&&void 0!==n.panes&&Array.isArray(n.panes)&&(this.panes=n.panes.map(t=>new _o(t)))}}class _o{constructor(n){n&&(void 0!==n.state&&(this.state=new Ct.AttributeValue(n.state)),null!=n.nestedPage&&(this.nestedPage=new As(n.nestedPage)))}}let Hg=(()=>{class e{constructor(t,r,s,a,l,u){this.siteName=t,this.panelHandler=r,this.attributeSerializer=s,this.rulesResolver=a,this.dpm=l,this.datasourceEvalutator=u}handleFile(t){return(0,Be.of)([])}handlesType(t){return!1}implementsRendererOverride(){return!0}hasRendererOverride(t){return(0,Be.of)(!1)}isDynamic(t){return!0}isData(t){return!0}fetchDynamicData(t,r){const s=r.has("dataPanes")?new Map(r.get("dataPanes").map(l=>[l.name,l])):new Map([]),a=new Map(Array.from(s).map(([l,u])=>[l,new Fl(this.attributeSerializer.deserializeAsObject(u.settings))]));return this.toObject(t).pipe((0,tt.w)(l=>this.datasourceEvalutator.evalDatasource({datasource:l,metadata:r,datasources:a})))}buildDynamicItems(t,r){const s=new Map(r.get("dataPanes").map(a=>[a.name,a]));return this.fetchDynamicData(t,r).pipe((0,tt.w)(a=>this.toObject(t).pipe((0,be.U)(l=>[l,a]))),(0,tt.w)(([a,l])=>this.getBindings(t,"pane").pipe((0,be.U)(u=>[a,l,u]))),(0,tt.w)(([a,l,u])=>Xn(()=>0!==l.results.length&&u.length>0,(0,pn.D)(l.results.map(p=>(0,pn.D)(u.filter(h=>!s.has(h.id)).map(h=>(0,Be.of)(r.get("panes").find(S=>S.name===h.id)).pipe((0,tt.w)(S=>Xn(()=>S&&S.rule&&null!==S.rule&&""!==S.rule.condition,S?this.rulesResolver.evaluate(S.rule,[...r.get("contexts"),...void 0!==S.contexts?S.contexts:[],new Ei({name:"_root",adaptor:"data",data:p})]).pipe((0,be.U)(G=>[S,G])):(0,Be.of)([S,!1]),(0,Be.of)(!1).pipe((0,be.U)(G=>[S,G])))),(0,U.h)(([S,G])=>G),(0,be.U)(([S,G])=>S.name),(0,zr.d)(h.id)))).pipe((0,be.U)(h=>h.reduce((S,G)=>[...S,G],[]))))).pipe((0,be.U)(p=>[a,l,p])),new v.y(p=>{p.next([a,l,[]]),p.complete()}))),(0,be.U)(([a,l,u])=>l.results.reduce((p,h,S)=>[...p,...u[S]?u[S].map(G=>new dr({...r.get("panes").find(W=>W.name===G),rule:void 0,label:zn(),contexts:[...r.get("contexts"),new Ei({name:"_root",adaptor:"data",data:h})]})):[]],[])),(0,be.U)(a=>new ra({stylePlugin:void 0,settings:[],panes:a,columnSetting:new Fn})),(0,be.U)(a=>this.panelHandler.buildSettings(new Cr({id:void 0,layoutType:"grid",displayType:"page",site:this.siteName,gridItems:[],layoutSetting:new Fn,rowSettings:[],panels:[a]}))),(0,be.U)(a=>a.find(l=>"panels"===l.name).attributes[0].attributes.find(l=>"panes"===l.name).attributes))}getBindings(t,r,s){const a=s?new Map(s.get("dataPanes").map(l=>[l.name,l])):new Map;return"context"===r?this.toObject(t).pipe((0,be.U)(l=>[l,l.params?l.params.reduce((u,p)=>[...u,..."form"===p.mapping.type?[new Gt.ContentBinding({id:`form__${p.mapping.value.split(".",2)[0].trim()}`,type:"context"})]:[]],[]):[]]),(0,tt.w)(([l,u])=>this.dpm.getPlugin(l.plugin).pipe((0,tt.w)(p=>p.getBindings({settings:l.settings,metadata:s}).pipe((0,be.U)(h=>[l,h]))))),(0,tt.w)(([l,u])=>(0,pn.D)(l.renderer.bindings.reduce((p,h)=>[...p,...a.has(h.id)?[this.toObject(a.get(h.id).settings)]:[]],[])).pipe((0,tt.w)(p=>(0,pn.D)(p.map(h=>this.dpm.getPlugin(h.plugin).pipe((0,tt.w)(S=>S.getBindings({settings:h.settings,metadata:s}))))).pipe((0,be.U)(h=>h.reduce((S,G)=>[...S,...G],u)),(0,zr.d)(u))),(0,zr.d)(u)))):this.toObject(t).pipe((0,tt.w)(l=>Xn(()=>l.renderer.type===r,(0,Be.of)(l.renderer.bindings),(0,Be.of)([]))))}toObject(t){return(0,Be.of)(this.attributeSerializer.deserializeAsObject(t))}buildSettings(t){return this.attributeSerializer.serialize(t,"root").attributes}getRenderType(t){const r=[t.find(s=>"renderer"===s.name)].map(s=>s.attributes.find(a=>"type"===a.name));return r.length>0?r[0].value:void 0}stateDefinition(t){return(0,Be.of)({autocomplete:{input:""},loading:"y"})}editorOptions(t){return this.toObject(t).pipe((0,tt.w)(r=>this.dpm.getPlugin(r&&r.plugin?r.plugin:"data").pipe((0,be.U)(s=>[r,s]))),(0,tt.w)(([r,s])=>s.editorOptions?s.editorOptions({settings:r&&r.settings?r.settings:[]}):(0,Be.of)(void 0)),(0,be.U)(r=>new Gt.ContentPluginEditorOptions({fullscreen:!!r&&r.fullscreen})))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(on.SITE_NAME),o.\u0275\u0275inject(Mi),o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(zg),o.\u0275\u0275inject(Ro),o.\u0275\u0275inject(P0))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),MD=(()=>{class e{constructor(t,r,s,a,l){this.data=t,this.dialogRef=r,this.fb=s,this.attributeSerializer=a,this.datasourceHandler=l,this.datasource=new Fl,this.bindableOptions=[],this.contexts=[],this.formGroup=this.fb.group({source:this.fb.control("")})}ngOnInit(){const t=this.data.panelFormGroup.get("panes");if(this.bindableOptions=t.controls.reduce((r,s)=>s.get("name").value?[...r,s.get("name").value]:[...r],[]),this.contexts=this.data.contexts.map(r=>r.name),void 0!==this.data.panelIndex&&this.data.paneIndex<t.length){const r=t.at(this.data.paneIndex).get("settings").value.map(s=>new Ct.AttributeValue(s));this.datasourceHandler.toObject(r).subscribe(s=>{this.datasource=s})}}onSubmit(){const t=this.attributeSerializer.serialize(this.formGroup.value.source,"source"),r=this.data.panelFormGroup.get("panes").at(this.data.paneIndex);void 0===this.data.paneIndex?(this.data.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"datasource",name:new d.NI(""),label:new d.NI(""),rule:new d.NI(""),settings:this.fb.array(t.attributes.map(s=>this.attributeSerializer.convertToGroup(s)))})),console.log(this.data.panelFormGroup.get("panes").value)):(r.get("settings").clear(),t.attributes.forEach(s=>r.get("settings").push(this.attributeSerializer.convertToGroup(s)))),this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(Hg))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-datasource-editor"]],decls:4,vars:4,consts:[[3,"formGroup","ngSubmit"],["formControlName","source",3,"bindableOptions","contexts","datasource"],["type","submit"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return r.onSubmit()}),o.\u0275\u0275element(1,"classifieds-ui-datasource-form",1),o.\u0275\u0275elementStart(2,"button",2),o.\u0275\u0275text(3,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.formGroup),o.\u0275\u0275advance(1),o.\u0275\u0275property("bindableOptions",r.bindableOptions)("contexts",r.contexts)("datasource",r.datasource))},directives:[Rg,d._Y,d.JL,d.sg,d.JJ,d.u],styles:[""]}),e})();const ND=e=>new Gt.ContentPlugin({id:"panel",title:"Panel",selectionComponent:FD,editorComponent:DD,renderComponent:void 0,handler:e}),jD=e=>new Gt.ContentPlugin({id:"datasource",title:"Datasource",selectionComponent:void 0,editorComponent:MD,renderComponent:void 0,handler:e}),sb=(0,xt.PH)("[PageBuilder] Load Rest Data",(0,xt.Ky)()),ab=(0,xt.PH)("[PageBuilder] Load Rest Data Success",(0,xt.Ky)()),qg=((0,xt.PH)("[PageBuilder] Load Rest Data Error",(0,xt.Ky)()),(0,xt.PH)("[PageBuilder] Set Page Info",(0,xt.Ky)())),lb=(0,xt.PH)("[PageBuilder] Set Form",(0,xt.Ky)()),Kg=(0,xt.PH)("[PageBuilder] Set Page",(0,xt.Ky)()),ub=(0,xt.PH)("[PageBuilder] Selection Path",(0,xt.Ky)());let LD=(()=>{class e{constructor(t,r,s){this.actions$=t,this.datasourceApi=r,this.snippetParserService=s,this.loadRestData$=di(()=>this.actions$.pipe(ki(sb),(0,$o.b)(a=>this.fetchRestdata$(a.rest).pipe((0,kr.K)(()=>[]),(0,be.U)(l=>void 0!==a.rest.renderer&&void 0!==a.rest.renderer.query&&""!==a.rest.renderer.query?(0,na.JSONPath)({path:a.rest.renderer.query,json:l}):l),(0,be.U)(l=>ab({tag:a.tag,data:new Rn({results:l})}))))))}fetchRestdata$(t){switch(t.method?t.method:"get"){case"post":case"POST":return(0,Be.of)([]).pipe((0,tt.w)(()=>this.snippetParserService.parseSnippet({snippet:t.body})),(0,tt.w)(s=>this.datasourceApi.postData({url:t.url,body:s})));default:return this.datasourceApi.getData(t.url)}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(co),o.\u0275\u0275inject(S0),o.\u0275\u0275inject(d0))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();class tf{constructor(n){n&&(this.id=n.id,this.path=n.path,this.realPath=n.realPath,this.args=n.args)}}const cb="pageBuilder",UD=(0,xt.Lq)({dataTags:[],datasets:[],pageInfo:void 0,formNames:[],forms:[],page:void 0,selectionPath:[]},(0,xt.on)(ab,(e,n)=>{const t=e.dataTags.findIndex(r=>r===n.tag);if(t>-1&&void 0!==e.forms[t]){const r={...e};return r.datasets[t].push(n.data),r}return{...e,dataTags:[...e.dataTags,n.tag],datasets:[...e.datasets,[n.data]]}}),(0,xt.on)(lb,(e,n)=>{const t=e.formNames.findIndex(r=>r===n.name);return t>-1&&void 0!==e.forms[t]?{...e,forms:e.forms.map((r,s)=>s===t?n.form:r)}:{...e,formNames:[...e.formNames,n.name],forms:[...e.forms,n.form]}}),(0,xt.on)(qg,(e,n)=>({...e,pageInfo:void 0!==n.info?new tf(n.info):void 0})),(0,xt.on)(Kg,(e,n)=>({...e,page:void 0!==n.page?new Cr(n.page):void 0})),(0,xt.on)(ub,(e,n)=>({...e,selectionPath:void 0!==n.path?n.path:[]})));function GD(e,n){return UD(e,n)}const gh=new o.InjectionToken("StylePlugin"),db=new o.InjectionToken("PanelsSettings");let Xg=(()=>{class e{constructor(t,r,s,a,l,u,p,h,S,G,W,J){const ve=((e,n)=>({PanelPageListItem:{entityName:"PanelPageListItem",crud:{idb_keyval:{params:{prefix:"panelpage__"},queryMappings:new Map([["site",{defaultOperator:"term||wildcard"}],["path",{defaultOperator:"term||wildcard"}]])}}},PanelPage:{entityName:"PanelPage",crud:{save:{ops:["create","update"],plugin:"rest",params:{entityName:"PanelPage"}},...(0,C.isPlatformServer)(e)?{}:{readPrimary:{fallback:!0,ops:["create","update","query"],plugin:"idb_keyval",params:{prefix:"panelpage__"}}},readFallback:{fallback:!0,ops:["query"],plugin:"rest",params:{entityName:"PanelPage",root:n.objectsRootUrl,suffix:".json"}}}},PanelPageState:{entityName:"PanelPageState"}}))(t,s);a.registerMetadataMap(ve),u.registerService("PanelPageState",new on.NoopDataService("PanelPageState")),u.registerService("PanelPage",new Lg("PanelPage",G,W,J)),u.registerService("PanelPageListItem",new Lg("PanelPageListItem",G,W,J)),r.forEach(Ne=>l.register(Ne)),p.register(((e,n)=>new Jd({id:"panels",title:"Panels",build:()=>{Ml.prototype.writePaneState=(t,r)=>new Promise(s=>{const a=e.getEntityCollectionService("PanelPageState");a.getByKey(t.id).pipe((0,kr.K)(()=>(0,Be.of)(new As({id:t.id,panels:[]}))),(0,be.U)(l=>void 0===l?new As({id:t.id,panels:[]}):l),(0,be.U)(l=>{const u=n.serialize(r,"root");let p=new As({...l,panels:[]});for(let h=0;h<t.panelIndex+1;h++){p.panels.push(h<l.panels.length?new Ll({...l.panels[h],panes:[]}):new Ll);for(let S=0;S<t.paneIndex+1;S++)p.panels[h].panes.push(h===t.panelIndex&&S===t.paneIndex?new _o(h<l.panels.length&&S<l.panels[h].panes.length?{...l.panels[h].panes[S],state:u}:{state:u}):h<l.panels.length&&S<l.panels[h].panes.length?new _o({...l.panels[h].panes[S]}):new _o)}return p}),(0,tt.w)(l=>a.upsert(l))).subscribe(l=>{s(l)})})}}))(h,S)),u.registerService("PanelPageForm",new Lg("PanelPageForm",G,W,J))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(o.PLATFORM_ID),o.\u0275\u0275inject(Gt.CONTENT_PLUGIN),o.\u0275\u0275inject(db),o.\u0275\u0275inject(pi),o.\u0275\u0275inject(Gt.ContentPluginManager),o.\u0275\u0275inject(Fi),o.\u0275\u0275inject(Qu),o.\u0275\u0275inject(Yn),o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(Ha),o.\u0275\u0275inject(pi),o.\u0275\u0275inject(Qd))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({providers:[{provide:Mi,useClass:Mi},{provide:Gt.CONTENT_PLUGIN,useFactory:ND,multi:!0,deps:[Mi]},{provide:Gt.CONTENT_PLUGIN,useFactory:jD,multi:!0,deps:[Hg]},{provide:xa,useClass:Au}],imports:[[C.CommonModule,d.u5,d.UX,xt.Aw.forFeature(cb,GD),po.forFeature([LD]),ri.MaterialModule,Dl,_i,sD,uD,Yd]]}),e})();class vh{constructor(n){n&&(this.panelPage=n.panelPage,null!=n.panel&&(this.panel=n.panel),null!=n.pane&&(this.pane=n.pane),null!=n.nested&&"object"==typeof n.nested&&(this.nested=new vh(n.nested)))}}let fb=(()=>{class e{constructor(t){this.controlContainer=t,this.savable=!0,this.nested=!1,this.dashboard=[],this.layoutSetting=new Fn,this.rowSettings=[],this.ancestory=[]}get gridItems(){return[]}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-layout-editor-base"]],inputs:{savable:"savable",nested:"nested",editor:"editor",dashboard:"dashboard",layoutSetting:"layoutSetting",rowSettings:"rowSettings",columnSettings:"columnSettings",editablePaneTpl:"editablePaneTpl",extraActionsAreaTmpl:"extraActionsAreaTmpl",contextsMenuTpl:"contextsMenuTpl",ancestory:"ancestory"},decls:0,vars:0,template:function(t,r){},encapsulation:2}),e})(),pb=(()=>{class e{constructor(t){this.controlContainer=t,this.displayMainControls=!1,this.displayItemHeader=!1}get columnSettings(){return this.panelPage?this.panelPage.panels.reduce((r,s)=>[...r,new Fn(s.columnSetting)],[]):[]}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.gN,8))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-layout-renderer-base"]],inputs:{panelPage:"panelPage",displayMainControls:"displayMainControls",displayItemHeader:"displayItemHeader",renderPanelTpl:"renderPanelTpl"},decls:0,vars:0,template:function(t,r){},encapsulation:2}),e})(),VD=(()=>{class e{constructor(){this.settings=[],this.panes=[],this.originMappings=[],this.ancestory=[]}mergeContexts(t){if(void 0!==t||void 0!==this.contexts)return void 0!==t&&void 0!==this.contexts?[...t,...this.contexts]:void 0!==t?t:this.contexts}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-panel-style-renderer-base"]],inputs:{settings:"settings",panes:"panes",originPanes:"originPanes",originMappings:"originMappings",contexts:"contexts",ancestory:"ancestory"},decls:0,vars:0,template:function(t,r){},encapsulation:2}),e})(),hb=(()=>{class e{constructor(t,r){this.es=t,this.panelHandler=r}get panelPageService(){return this.es.getEntityCollectionService("PanelPage")}reducePage(t){return t.panels.reduce((r,s,a)=>this.reducePanels(r,s,a),[])}reducePanels(t,r,s){return[...t,...r.panes.reduce((a,l,u)=>this.reducePanes(a,l,u).map(p=>p.pipe((0,be.U)(([h,S])=>[s,h,S]))),[])]}reducePanes(t,r,s){return[...t,..."panel"===r.contentPlugin?[this.nestedPage$(r).pipe((0,be.U)(a=>[s,a]))]:[]]}nestedPage$(t){return console.log("get nested panel page"),t.linkedPageId&&""!==t.linkedPageId?this.getByKey(t.linkedPageId).pipe((0,ee.b)(()=>console.log(`get(${t.linkedPageId})`))):this.getEmbedded(t.settings).pipe((0,ee.b)(()=>console.log("toObject()")))}remapNested(t,r){r.forEach(([s,a,l])=>{t.panels[s].panes[a].nestedPage=l})}getByKey(t){return this.panelPageService.getByKey(t).pipe((0,be.U)(r=>new Cr(r)),(0,tt.w)(r=>Xn(()=>this.reducePage(r).length>0,(0,pn.D)(this.reducePage(r)).pipe((0,ee.b)(s=>this.remapNested(r,s)),(0,be.U)(()=>r)),(0,Be.of)(r))))}getEmbedded(t){return this.panelHandler.toObject(t).pipe((0,be.U)(r=>new Cr(r)),(0,tt.w)(r=>Xn(()=>this.reducePage(r).length>0,(0,pn.D)(this.reducePage(r)).pipe((0,ee.b)(s=>this.remapNested(r,s)),(0,be.U)(()=>r)),(0,Be.of)(r))))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Yn),o.\u0275\u0275inject(Mi))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),$D=(()=>{class e{constructor(t){this.panelHandler=t}rebuildPage(t,r){return new Cr({...t,panels:this.rebuildPanels(t.panels,[...r])})}rebuildPanels(t,r){return t.filter((s,a)=>this.rebuildCondition(r[0],a)).map(s=>new ra({...s,panes:this.rebuildPanes(s.panes,r.slice(1))}))}rebuildPanes(t,r){return t.filter((s,a)=>this.rebuildCondition(r[0],a)).map(s=>new dr("panel"===s.contentPlugin?{...s,nestedPage:void 0,settings:this.panelHandler.buildSettings(this.rebuildPage(s.nestedPage,r.slice(1)))}:{...s}))}rebuildCondition(t,r){return 0===t||(t>-1?r===t+-1*t:r!==-1*t+t)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Mi))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),HD=(()=>{class e{constructor(t){this.panelHandler=t}convertPageToState(t){return(0,Be.of)(new As).pipe((0,tt.w)(()=>(0,pn.D)(t.panels.map(r=>this.convertPanelToState(r)))),(0,be.U)(r=>new As({id:t.id,panels:r})))}convertPanelToState(t){return(0,Be.of)(new Ll).pipe((0,tt.w)(()=>(0,pn.D)(t.panes.map(r=>this.convertPaneToState(r)))),(0,be.U)(r=>new Ll({panes:r})))}convertPaneToState(t){return(0,Be.of)(new _o).pipe((0,tt.w)(r=>Xn(()=>this.hasNestedPanelPage(t),this.panelHandler.toObject(t.settings).pipe((0,tt.w)(s=>this.convertPageToState(s)),(0,be.U)(s=>new _o({state:new Ct.AttributeValue,nestedPage:s}))),(0,Be.of)(r))))}hasNestedPanelPage(t){return"panel"===t.contentPlugin&&(null==t.linkedPageId||""===t.linkedPageId)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Mi))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),qD=(()=>{class e{constructor(t){this.panelsLoaderService=t}walkPageHierarchy({panelPage:t,visitorFunc:r,defaultv:s,ancestory:a}){return new v.y(l=>{const u=t.panels.length,p=[];for(let h=0;h<u;h++){const S=t.panels[h].panes.length;for(let G=0;G<S;G++)p.push(r({pane:t.panels[h].panes[G],panelPage:t,ancestoryWithSelf:[...a,h,G]})),t.panels[h].panes[G].nestedPage&&t.panels[h].panes[G].nestedPage.panels&&0!==t.panels[h].panes[G].nestedPage.panels.length&&p.push(this.walkPageHierarchy({panelPage:t,visitorFunc:r,defaultv:s,ancestory:[...a,h,G]}))}0===p.length?(l.next(s),l.complete()):(0,pn.D)(p).pipe((0,be.U)(h=>h.reduce((S,G)=>[...S,...G],s)),(0,ee.b)(h=>{l.next(h),l.complete()})).subscribe()})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(hb))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),mb=(()=>{class e{constructor(t,r){this.panelsVisitorService=t,this.cpm=r,this.gatherPaneContexts=({pane:s,panelPage:a,ancestoryWithSelf:l})=>this.cpm.getPlugin(s.contentPlugin).pipe((0,tt.w)(u=>u.handler?u.handler.stateDefinition(s.settings):(0,Be.of)({})),(0,be.U)(u=>new Ei({name:"panestate-"+l.join("-"),adaptor:"data",plugin:"panestate",data:{id:a?a.id:"",selectionPath:[...l],value:u}})),(0,be.U)(u=>[u]),(0,an.q)(1))}allActivePageContexts({panelPage:t,ancestory:r=[]}){return this.panelsVisitorService.walkPageHierarchy({panelPage:t,ancestory:r,visitorFunc:this.gatherPaneContexts,defaultv:[]})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(qD),o.\u0275\u0275inject(Gt.ContentPluginManager))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),KD=(()=>{class e{constructor(t){this.attributeSerializer=t}buildToAncestorySpec({panelPageState:t,ancestory:r}){for(let s=0;s<r[0]+1;s++)if(t.panels.length<s+1&&t.panels.push(new Ll),s===r[0]&&r.length>1)for(let a=0;a<r[1]+1;a++)t.panels[r[0]].panes.length<a+1&&t.panels[r[0]].panes.push(new _o({state:this.attributeSerializer.serialize({},"root")})),a===r[1]&&r.length>2&&(t.panels[r[0]].panes[a].nestedPage||(t.panels[r[0]].panes[a].nestedPage=new As),this.buildToAncestorySpec({panelPageState:t.panels[r[0]].panes[a].nestedPage,ancestory:r.slice(2)}))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Ct.AttributeSerializerService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ic=(()=>{class e extends en.BasePluginManager{constructor(t,r){super(t,r)}pluginDef(){return(0,Be.of)(new en.PluginDef({name:"style"}))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(en.PluginConfigurationManager),o.\u0275\u0275inject(on.ModuleLoaderService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),gb=(()=>{class e{constructor(t){this.spm=t}alterResolvedPanes({panel:t,resolvedPanes:r,originMappings:s}){return(0,Be.of)(void 0).pipe((0,tt.w)(()=>t.stylePlugin&&""!==t.stylePlugin?this.spm.getPlugin(t.stylePlugin):(0,Be.of)(void 0)),(0,tt.w)(a=>a&&a.handler?a.handler.alterResolvedPanes({settings:t.settings,resolvedPanes:r,originMappings:s}):(0,Be.of)({resolvedPanes:r,originMappings:s})))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(ic))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Wg=(()=>{class e{constructor(t,r,s,a){this.panelHandler=t,this.rulesResolver=r,this.inlineContextResolver=s,this.cpm=a}usedContexts(t){return this.panesPlugins(t).pipe((0,tt.w)(r=>this.dataPanes(t).pipe((0,be.U)(s=>({plugins:r,dataPanes:s})))),(0,tt.w)(({plugins:r,dataPanes:s})=>(0,pn.D)(t.reduce((a,l)=>{const u=r.get(l.contentPlugin);return void 0!==u.handler?[...a,u.handler.getBindings(l.settings,"context",new Map([["dataPanes",s]])).pipe((0,be.U)(p=>p.map(h=>h.id)))]:[...a]},[])).pipe((0,be.U)(a=>a.reduce((l,u)=>[...l,...u],[])))))}staticPanes(t){return this.cpm.getPlugins(t.reduce((r,s)=>-1===r.findIndex(a=>a===s.contentPlugin)?[...r,s.contentPlugin]:[...r],[])).pipe((0,be.U)(r=>t.filter(s=>void 0===r.get(s.contentPlugin).handler||!r.get(s.contentPlugin).handler.isDynamic(s.settings))))}dataPanes(t){return this.cpm.getPlugins(t.reduce((r,s)=>-1===r.findIndex(a=>a===s.contentPlugin)?[...r,s.contentPlugin]:[...r],[])).pipe((0,be.U)(r=>t.filter(s=>void 0!==r.get(s.contentPlugin).handler&&r.get(s.contentPlugin).handler.isData(s.settings))))}panesPlugins(t){return this.cpm.getPlugins(t.reduce((r,s)=>-1===r.findIndex(a=>a===s.contentPlugin)?[...r,s.contentPlugin]:[...r],[]))}resolvePanes({panes:t,contexts:r,resolvedContext:s}){return console.log("resolve panes"),this.panesPlugins(t).pipe((0,tt.w)(a=>(0,pn.D)(t.reduce((l,u)=>{const p=a.get(u.contentPlugin);return void 0!==p.handler?[...l,p.handler.getBindings(u.settings,"pane").pipe((0,be.U)(h=>h.map(S=>S.id)))]:[...l,(0,Be.of)([])]},[])))).pipe((0,be.U)(a=>a.reduce((l,u)=>[...l,...u],[])),(0,tt.w)(a=>this.panesPlugins(t).pipe((0,be.U)(l=>[a,l]))),(0,tt.w)(([a,l])=>(0,pn.D)(t.reduce((u,p)=>{const h=l.get(p.contentPlugin);return void 0!==h.handler&&h.handler.isDynamic(p.settings)?[...u,h.handler.isData(p.settings)&&-1!==a.findIndex(S=>S===p.name)?(0,Be.of)([]):(0,pn.D)([this.staticPanes(t),this.dataPanes(t)]).pipe((0,tt.w)(([S,G])=>h.handler.buildDynamicItems(p.settings,new Map([...void 0===p.metadata?[]:p.metadata,["tag",zn()],["panes",S],["dataPanes",G],["contexts",void 0!==r?r:[]]])).pipe((0,be.U)(W=>this.panelHandler.fromPanes(W)),(0,be.U)(W=>this.panelHandler.wrapPanel(W).panes),(0,an.q)(1))))]:""===p.name||-1===a.findIndex(S=>S===p.name)?[...u,(0,Be.of)([new dr({...p,contexts:[...r,...p.contexts?p.contexts:[]]})]).pipe((0,tt.w)(S=>Xn(()=>null!=S[0].rule&&""!==S[0].rule.condition,this.rulesResolver.evaluate(S[0].rule,[...r,...p.contexts?p.contexts:[]]).pipe((0,be.U)(G=>G?S:[])),(0,Be.of)(S))))]:[...u]},[])).pipe((0,tt.w)(u=>Xn(()=>0===u.reduce((p,h)=>[...p,...h],[]).length,(0,Be.of)([u,[]]),(0,pn.D)([...u.reduce((p,h)=>[...p,...h.map(S=>S.contexts&&0!==S.contexts.length?this.inlineContextResolver.resolveAll(S.contexts).pipe((0,an.q)(1)):(0,Be.of)({}).pipe((0,an.q)(1)))],[])]).pipe((0,be.U)(p=>[u,p.map(h=>({...h,...s}))])))),(0,be.U)(([u,p])=>{let h=[],S=[];return u.forEach((G,W)=>{h=[...void 0===h?[]:h,...G.map((J,ve)=>new dr({...J,resolvedContext:p[h.length+ve]}))],S=[...S&&[],...G.map(()=>W)]}),{resolvedPanes:h,originMappings:S}}))))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Mi),o.\u0275\u0275inject(zg),o.\u0275\u0275inject(Yu),o.\u0275\u0275inject(Gt.ContentPluginManager))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class yh extends en.Plugin{constructor(n){super(n),n&&(this.name=this.id,this.title=n.title,this.editorComponent=n.editorComponent?n.editorComponent:void 0,this.renderComponent=n.renderComponent?n.renderComponent:void 0,n.handler&&(this.handler=n.handler))}}let _h=(()=>{class e extends cD.o2{constructor(){super(),this.pageChange$=new M.x,this.pageSize=20,this.dataStream=new m.X([]),this.subscription=new M0.w0,this.lastPage=0,this.paneItems=[]}set panes(t){this.paneItems=[...this.paneItems,...t],this.dataStream.next(this.paneItems)}connect(t){return this.subscription.add(t.viewChange.subscribe(r=>{const s=Math.ceil((r.end+1)/this.pageSize);s>this.lastPage&&(this.lastPage=s,this.pageChange$.next(s))})),this.dataStream}disconnect(t){this.subscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();const oc=(0,xt.ZF)(cb),bh=e=>(0,xt.P1)(oc,n=>{const t=n.dataTags.findIndex(r=>r===e);if(t>-1)return n.datasets[t][n.datasets[t].length-1]}),XD=(0,xt.P1)(oc,e=>e.pageInfo),WD=(0,xt.P1)(oc,e=>e.page),JD=(0,xt.P1)(oc,e=>e.selectionPath),vb=(0,xt.P1)(oc,e=>e.formNames),QD=(0,xt.P1)(oc,e=>e.forms),YD=(0,xt.P1)(vb,QD,(e,n,t)=>{const r=e.findIndex(s=>s===t.name);if(r>-1)return n[r]});let bo=(()=>{class e{constructor(t){this.store=t,this.getPageInfo$=this.store.pipe((0,xt.Ys)(XD)),this.getPage$=this.store.pipe((0,xt.Ys)(WD)),this.getSelectionPath$=this.store.pipe((0,xt.Ys)(JD)),this.getFormNames$=this.store.pipe((0,xt.Ys)(vb)),this.getForm$=r=>this.store.pipe((0,xt.Ys)(YD,{name:r}))}loadRestData(t,r){this.store.dispatch(sb({tag:t,rest:r}))}setPageInfo(t){this.store.dispatch(qg({info:t}))}setPage(t){this.store.dispatch(Kg({page:t}))}setSelectionPath(t){this.store.dispatch(ub({path:t}))}setForm(t,r){this.store.dispatch(lb({name:t,form:r}))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(xt.yh))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class nf{constructor(n){this.readUserIds=[],n&&(this.title=n.title,this.name=n.name,this.path=n.path,this.cssFile=n.cssFile,n.readUserIds&&(this.readUserIds=n.readUserIds.map(t=>t)))}}class yb{constructor(n){n&&(this.label=n.label,this.name=n.name)}}class _b{constructor(n){n&&(this.label=n.label,this.name=n.name)}}class qa{constructor(n){this.panels=[],n&&(this.id=n.id,this.name=n.name,this.title=n.title,this.derivativeId=n.derivativeId,n.panels&&(this.panels=n.panels.map(t=>new ZD(t))))}}class ZD{constructor(n){this.panes=[],n&&(this.name=n.name,this.label=n.label,n.panes&&(this.panes=n.panes.map(t=>new eM(t))))}}class eM{constructor(n){this.settings=[],n&&(this.name=n.name,this.label=n.label,this.contentPlugin=n.contentPlugin,n.settings&&(this.settings=n.settings.map(t=>new Ct.AttributeValue(t))))}}class Jg{constructor(n){n&&(this.name=n.name,this.field=n.field)}}let tM=(()=>{class e{constructor(t,r,s,a){this.pageBuilderFacade=t,this.panelStateArchitectService=r,this.attributeSerializer=s,this.selectEntities=l=>l.entities,this.selectById=({id:l})=>(0,xt.P1)(this.selectEntities,u=>u[l]?u[l]:void 0),this.panelPageStateService=a.getEntityCollectionService("PanelPageState")}mergeState({state:t,settings:r,plugin:s,ancestory:a}){return(0,Be.of)(t).pipe((0,tt.w)(l=>this.pageBuilderFacade.getPageInfo$.pipe((0,be.U)(u=>[l,u]))),(0,tt.w)(([l,u])=>s.handler.stateDefinition(r).pipe((0,be.U)(p=>[l,u,p]))),(0,tt.w)(([l,u,p])=>this.panelPageStateService.collection$.pipe((0,xt.Ys)(this.selectById({id:u.id})),(0,be.U)(h=>[l,new As(h||{id:u.id,panels:[]}),p]),(0,an.q)(1))),(0,be.U)(([l,u,p])=>{this.panelStateArchitectService.buildToAncestorySpec({panelPageState:u,ancestory:[...a]});const h="$."+a.map((G,W)=>`${(W+1)%2==0?"panes":(0===W?"":"nestedPage.")+"panels"}[${G}]`).join(".");return[l,u,p,(0,na.JSONPath)({path:h,json:u})[0]]}),(0,ee.b)(([l,u,p,h])=>{const S=h.state?h.state.root?this.attributeSerializer.deserialize(h.state).root:this.attributeSerializer.deserialize(h.state):{},G=Zd(S&&0!==Object.keys(S).length?S:p,l);h.state=this.attributeSerializer.serialize(G,"root")}),(0,be.U)(([l,u,p,h])=>({paneState:h,pageState:u})))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(bo),o.\u0275\u0275inject(KD),o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(Yn))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),bb=(()=>{class e{constructor(t){this.attributeSerializer=t}serializeForm(t){const r=t.panels.length;let s={};for(let a=0;a<r;a++){const l=t.panels[a].panes.length,u=new Map;for(let p=0;p<l;p++){const h=this.serializeFormPane(t.panels[a].panes[p]);if(t.panels[a].panes[p].name&&null!==t.panels[a].panes[p].name&&(s[t.panels[a].panes[p].name]||t.panels[a].panes[p].name===eb(t.panels[a].panes[p].name))){u.has(t.panels[a].panes[p].name)||u.set(t.panels[a].panes[p].name,void 0!==s[t.panels[a].panes[p].name]?[s[t.panels[a].panes[p].name]]:[]);const S=u.get(t.panels[a].panes[p].name);u.set(t.panels[a].panes[p].name,[...S,h])}else s=t.panels[a].panes[p].name&&""!==t.panels[a].panes[p].name?{...s,[t.panels[a].panes[p].name]:h}:{...s,...h}}Array.from(u).forEach(([p,h])=>s[p]=h)}return s}serializeFormPane(t){if("panel"===t.contentPlugin)return this.serializeForm(new qa(this.attributeSerializer.deserializeAsObject(t.settings,!0)));{const r=this.attributeSerializer.deserializeAsObject(t.settings,!0);return void 0!==r?r.value:void 0}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Ct.AttributeSerializerService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Qg=(()=>{class e{makeJsonNode(){return{attributes:{},children:{}}}reduceCss(t,r,s=!0){return t&&t.children?Object.keys(t.children).filter(a=>s?0===a.indexOf(r):0!==a.indexOf(r)).reduce((a,l)=>({...a,children:{...a.children,[s?l.substr(l.indexOf(r)+r.length).trim():l]:t.children[l]}}),this.makeJsonNode()):this.makeJsonNode()}reduceSelector(t,r,s=!0){return t?Object.keys(t).filter(a=>s?0===a.indexOf(r):0!==a.indexOf(r)).reduce((a,l)=>({...a,[s?l.substr(l.indexOf(r)+r.length).trim():l]:t[l]}),{}):{}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function nM(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"ngx-dropzone-remove-badge",1),o.\u0275\u0275listener("click",function(s){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext()._remove(s)}),o.\u0275\u0275elementEnd()}}const Yg=[[["ngx-dropzone-label"]]],Zg=["ngx-dropzone-label"],rM=["fileInput"];function iM(e,n){1&e&&o.\u0275\u0275projection(0,2,["*ngIf","!_hasPreviews"])}const oM=[[["ngx-dropzone-preview"]],"*",[["ngx-dropzone-label"]]],sM=["ngx-dropzone-preview","*","ngx-dropzone-label"];function aM(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"ngx-dropzone-remove-badge",2),o.\u0275\u0275listener("click",function(s){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext()._remove(s)}),o.\u0275\u0275elementEnd()}}function lM(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"video",2),o.\u0275\u0275listener("click",function(r){return r.stopPropagation()}),o.\u0275\u0275element(1,"source",3),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("src",t.sanitizedVideoSrc,o.\u0275\u0275sanitizeUrl)}}function uM(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"ngx-dropzone-remove-badge",4),o.\u0275\u0275listener("click",function(s){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext()._remove(s)}),o.\u0275\u0275elementEnd()}}let wb=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["ngx-dropzone-label"]]}),e})();function sc(e){return null!=e&&"false"!=`${e}`}let ev=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["ngx-dropzone-remove-badge"]],decls:3,vars:0,consts:[["x1","0","y1","0","x2","10","y2","10"],["x1","0","y1","10","x2","10","y2","0"]],template:function(t,r){1&t&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"svg"),o.\u0275\u0275element(1,"line",0),o.\u0275\u0275element(2,"line",1),o.\u0275\u0275elementEnd())},styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:22px;width:22px;position:absolute;top:5px;right:5px;border-radius:50%;background:#bbb;color:#333;cursor:pointer}[_nghost-%COMP%]:hover{background:#aeaeae}[_nghost-%COMP%] > svg[_ngcontent-%COMP%]{height:10px;width:10px}[_nghost-%COMP%] > svg[_ngcontent-%COMP%] > line[_ngcontent-%COMP%]{stroke-width:2px;stroke:#fff}"]}),e})();var rf=(()=>{return(e=rf||(rf={}))[e.BACKSPACE=8]="BACKSPACE",e[e.DELETE=46]="DELETE",rf;var e})();let ac=(()=>{class e{constructor(t){this.sanitizer=t,this._removable=!1,this.removed=new o.EventEmitter,this.tabIndex=0}set file(t){this._file=t}get file(){return this._file}get removable(){return this._removable}set removable(t){this._removable=sc(t)}keyEvent(t){switch(t.keyCode){case rf.BACKSPACE:case rf.DELETE:this.remove()}}get hostStyle(){return this.sanitizer.bypassSecurityTrustStyle("\n\t\t\tdisplay: flex;\n\t\t\theight: 140px;\n\t\t\tmin-height: 140px;\n\t\t\tmin-width: 180px;\n\t\t\tmax-width: 180px;\n\t\t\tjustify-content: center;\n\t\t\talign-items: center;\n\t\t\tpadding: 0 20px;\n\t\t\tmargin: 10px;\n\t\t\tborder-radius: 5px;\n\t\t\tposition: relative;\n\t\t")}_remove(t){t.stopPropagation(),this.remove()}remove(){this._removable&&this.removed.next(this.file)}readFile(){var t=this;return iu(function*(){return new Promise((r,s)=>{const a=new FileReader;if(a.onload=l=>{r(l.target.result)},a.onerror=l=>{console.error(`FileReader failed on file ${t.file.name}.`),s(l)},!t.file)return s("No file to read. Please provide a file using the [file] Input property.");a.readAsDataURL(t.file)})})()}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(I.H7))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["ngx-dropzone-preview"]],hostVars:3,hostBindings:function(t,r){1&t&&o.\u0275\u0275listener("keyup",function(a){return r.keyEvent(a)}),2&t&&(o.\u0275\u0275hostProperty("tabindex",r.tabIndex),o.\u0275\u0275styleMap(r.hostStyle))},inputs:{file:"file",removable:"removable"},outputs:{removed:"removed"},ngContentSelectors:Zg,decls:2,vars:1,consts:[[3,"click",4,"ngIf"],[3,"click"]],template:function(t,r){1&t&&(o.\u0275\u0275projectionDef(Yg),o.\u0275\u0275projection(0),o.\u0275\u0275template(1,nM,1,0,"ngx-dropzone-remove-badge",0)),2&t&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.removable))},directives:[ev,C.NgIf],styles:["[_nghost-%COMP%]{background-image:linear-gradient(to top,#ededed,#efefef,#f1f1f1,#f4f4f4,#f6f6f6)}[_nghost-%COMP%]:hover, [_nghost-%COMP%]:focus{background-image:linear-gradient(to top,#e3e3e3,#ebeaea,#e8e7e7,#ebeaea,#f4f4f4);outline:0}[_nghost-%COMP%]:hover   ngx-dropzone-remove-badge[_ngcontent-%COMP%], [_nghost-%COMP%]:focus   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]     ngx-dropzone-label{overflow-wrap:break-word}"]}),e})(),Cb=(()=>{class e{parseFileList(t,r,s,a){const l=[],u=[];for(let h=0;h<t.length;h++){const S=t.item(h);this.isAccepted(S,r)?s&&S.size>s?this.rejectFile(u,S,"size"):!a&&l.length>=1?this.rejectFile(u,S,"no_multiple"):l.push(S):this.rejectFile(u,S,"type")}return{addedFiles:l,rejectedFiles:u}}isAccepted(t,r){if("*"===r)return!0;const s=r.split(",").map(p=>p.toLowerCase().trim()),a=t.type.toLowerCase(),l=t.name.toLowerCase();return!!s.find(p=>p.endsWith("/*")?a.split("/")[0]===p.split("/")[0]:p.startsWith(".")?l.endsWith(p):p==a)}rejectFile(t,r,s){const a=r;a.reason=s,t.push(a)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),wh=(()=>{class e{constructor(t){this.service=t,this.change=new o.EventEmitter,this.accept="*",this._disabled=!1,this._multiple=!0,this._maxFileSize=void 0,this._expandable=!1,this._disableClick=!1,this._processDirectoryDrop=!1,this._isHovered=!1}get _hasPreviews(){return!!this._previewChildren.length}get disabled(){return this._disabled}set disabled(t){this._disabled=sc(t),this._isHovered&&(this._isHovered=!1)}get multiple(){return this._multiple}set multiple(t){this._multiple=sc(t)}get maxFileSize(){return this._maxFileSize}set maxFileSize(t){this._maxFileSize=function cM(e){return isNaN(parseFloat(e))||isNaN(Number(e))?null:Number(e)}(t)}get expandable(){return this._expandable}set expandable(t){this._expandable=sc(t)}get disableClick(){return this._disableClick}set disableClick(t){this._disableClick=sc(t)}get processDirectoryDrop(){return this._processDirectoryDrop}set processDirectoryDrop(t){this._processDirectoryDrop=sc(t)}_onClick(){this.disableClick||this.showFileSelector()}_onDragOver(t){this.disabled||(this.preventDefault(t),this._isHovered=!0)}_onDragLeave(){this._isHovered=!1}_onDrop(t){if(!this.disabled)if(this.preventDefault(t),this._isHovered=!1,this.processDirectoryDrop&&DataTransferItem.prototype.webkitGetAsEntry){const r=t.dataTransfer.items;if(r.length>0){const s=[],a=[];for(let u=0;u<r.length;u++){const p=r[u].webkitGetAsEntry();p.isFile?s.push(t.dataTransfer.files[u]):p.isDirectory&&a.push(p)}const l=new DataTransfer;if(s.forEach(u=>{l.items.add(u)}),!a.length&&l.items.length&&this.handleFileDrop(l.files),a.length){const u=[];for(const p of a)u.push(this.extractFilesFromDirectory(p));Promise.all(u).then(p=>{p.reduce((h,S)=>[...h,...S]).forEach(h=>{l.items.add(h)}),this.handleFileDrop(l.files)})}}}else this.handleFileDrop(t.dataTransfer.files)}extractFilesFromDirectory(t){function r(a){return s.apply(this,arguments)}function s(){return(s=iu(function*(a){try{return yield new Promise((l,u)=>a.file(l,u))}catch(l){console.log("Error converting a fileEntry to a File: ",l)}})).apply(this,arguments)}return new Promise((a,l)=>{const u=[],p=t.createReader(),h=()=>{p.readEntries(function(){var S=iu(function*(G){if(G.length){const W=G.filter(J=>J.isFile);for(const J of W){const ve=yield r(J);u.push(ve)}h()}else a(u)});return function(G){return S.apply(this,arguments)}}())};h()})}showFileSelector(){this.disabled||this._fileInput.nativeElement.click()}_onFilesSelected(t){this.handleFileDrop(t.target.files),this._fileInput.nativeElement.value="",this.preventDefault(t)}handleFileDrop(t){const r=this.service.parseFileList(t,this.accept,this.maxFileSize,this.multiple);this.change.next({addedFiles:r.addedFiles,rejectedFiles:r.rejectedFiles,source:this})}preventDefault(t){t.preventDefault(),t.stopPropagation()}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Cb,2))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["ngx-dropzone"],["","ngx-dropzone",""]],contentQueries:function(t,r,s){if(1&t&&o.\u0275\u0275contentQuery(s,ac,5),2&t){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r._previewChildren=a)}},viewQuery:function(t,r){if(1&t&&o.\u0275\u0275viewQuery(rM,7),2&t){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r._fileInput=s.first)}},hostVars:8,hostBindings:function(t,r){1&t&&o.\u0275\u0275listener("click",function(){return r._onClick()})("dragover",function(a){return r._onDragOver(a)})("dragleave",function(){return r._onDragLeave()})("drop",function(a){return r._onDrop(a)}),2&t&&o.\u0275\u0275classProp("ngx-dz-disabled",r.disabled)("expandable",r.expandable)("unclickable",r.disableClick)("ngx-dz-hovered",r._isHovered)},inputs:{accept:"accept",disabled:"disabled",multiple:"multiple",maxFileSize:"maxFileSize",expandable:"expandable",disableClick:"disableClick",processDirectoryDrop:"processDirectoryDrop",id:"id",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedBy:["aria-describedby","ariaDescribedBy"]},outputs:{change:"change"},features:[o.\u0275\u0275ProvidersFeature([Cb])],ngContentSelectors:sM,decls:5,vars:8,consts:[["type","file",3,"id","multiple","accept","disabled","change"],["fileInput",""],[4,"ngIf"]],template:function(t,r){1&t&&(o.\u0275\u0275projectionDef(oM),o.\u0275\u0275elementStart(0,"input",0,1),o.\u0275\u0275listener("change",function(a){return r._onFilesSelected(a)}),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(2,iM,1,0,"ng-content",2),o.\u0275\u0275projection(3),o.\u0275\u0275projection(4,1)),2&t&&(o.\u0275\u0275property("id",r.id)("multiple",r.multiple)("accept",r.accept)("disabled",r.disabled),o.\u0275\u0275attribute("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby)("aria-describedby",r.ariaDescribedBy),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",!r._hasPreviews))},directives:[C.NgIf],styles:["[_nghost-%COMP%]{display:flex;align-items:center;height:180px;background:#fff;cursor:pointer;color:#717386;border:2px dashed #717386;border-radius:5px;font-size:16px;overflow-x:auto}.ngx-dz-hovered[_nghost-%COMP%]{border-style:solid}.ngx-dz-disabled[_nghost-%COMP%]{opacity:.5;cursor:no-drop;pointer-events:none}.expandable[_nghost-%COMP%]{overflow:hidden;height:unset;min-height:180px;flex-wrap:wrap}.unclickable[_nghost-%COMP%]{cursor:default}[_nghost-%COMP%]     ngx-dropzone-label{text-align:center;z-index:10;margin:10px auto}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus +   ngx-dropzone-label{outline:1px dotted #000;outline:-webkit-focus-ring-color auto 5px}"]}),e})(),xb=(()=>{class e extends ac{constructor(t){super(t),this.defaultImgLoading="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBzdHlsZT0ibWFyZ2luOiBhdXRvOyBiYWNrZ3JvdW5kOiByZ2IoMjQxLCAyNDIsIDI0Mykgbm9uZSByZXBlYXQgc2Nyb2xsIDAlIDAlOyBkaXNwbGF5OiBibG9jazsgc2hhcGUtcmVuZGVyaW5nOiBhdXRvOyIgd2lkdGg9IjIyNHB4IiBoZWlnaHQ9IjIyNHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ieE1pZFlNaWQiPgo8Y2lyY2xlIGN4PSI1MCIgY3k9IjUwIiByPSIxNCIgc3Ryb2tlLXdpZHRoPSIzIiBzdHJva2U9IiM4NWEyYjYiIHN0cm9rZS1kYXNoYXJyYXk9IjIxLjk5MTE0ODU3NTEyODU1MiAyMS45OTExNDg1NzUxMjg1NTIiIGZpbGw9Im5vbmUiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+CiAgPGFuaW1hdGVUcmFuc2Zvcm0gYXR0cmlidXRlTmFtZT0idHJhbnNmb3JtIiB0eXBlPSJyb3RhdGUiIGR1cj0iMS4xNjI3OTA2OTc2NzQ0MTg0cyIgcmVwZWF0Q291bnQ9ImluZGVmaW5pdGUiIGtleVRpbWVzPSIwOzEiIHZhbHVlcz0iMCA1MCA1MDszNjAgNTAgNTAiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KPC9jaXJjbGU+CjxjaXJjbGUgY3g9IjUwIiBjeT0iNTAiIHI9IjEwIiBzdHJva2Utd2lkdGg9IjMiIHN0cm9rZT0iI2JiY2VkZCIgc3Ryb2tlLWRhc2hhcnJheT0iMTUuNzA3OTYzMjY3OTQ4OTY2IDE1LjcwNzk2MzI2Nzk0ODk2NiIgc3Ryb2tlLWRhc2hvZmZzZXQ9IjE1LjcwNzk2MzI2Nzk0ODk2NiIgZmlsbD0ibm9uZSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIj4KICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InJvdGF0ZSIgZHVyPSIxLjE2Mjc5MDY5NzY3NDQxODRzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIga2V5VGltZXM9IjA7MSIgdmFsdWVzPSIwIDUwIDUwOy0zNjAgNTAgNTAiPjwvYW5pbWF0ZVRyYW5zZm9ybT4KPC9jaXJjbGU+CjwhLS0gW2xkaW9dIGdlbmVyYXRlZCBieSBodHRwczovL2xvYWRpbmcuaW8vIC0tPjwvc3ZnPg==",this.imageSrc=this.sanitizer.bypassSecurityTrustUrl(this.defaultImgLoading)}set file(t){this._file=t,this.renderImage()}get file(){return this._file}ngOnInit(){this.renderImage()}renderImage(){this.readFile().then(t=>setTimeout(()=>this.imageSrc=t)).catch(t=>console.error(t))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(I.H7))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["ngx-dropzone-image-preview"]],inputs:{file:"file"},features:[o.\u0275\u0275ProvidersFeature([{provide:ac,useExisting:e}]),o.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Zg,decls:3,vars:2,consts:[[3,"src"],[3,"click",4,"ngIf"],[3,"click"]],template:function(t,r){1&t&&(o.\u0275\u0275projectionDef(Yg),o.\u0275\u0275element(0,"img",0),o.\u0275\u0275projection(1),o.\u0275\u0275template(2,aM,1,0,"ngx-dropzone-remove-badge",1)),2&t&&(o.\u0275\u0275property("src",r.imageSrc,o.\u0275\u0275sanitizeUrl),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",r.removable))},directives:[ev,C.NgIf],styles:["[_nghost-%COMP%]{min-width:unset!important;max-width:unset!important;padding:0!important}[_nghost-%COMP%]:hover   img[_ngcontent-%COMP%], [_nghost-%COMP%]:focus   img[_ngcontent-%COMP%]{opacity:.7}[_nghost-%COMP%]:hover   ngx-dropzone-remove-badge[_ngcontent-%COMP%], [_nghost-%COMP%]:focus   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{max-height:100%;border-radius:5px;opacity:.8}[_nghost-%COMP%]     ngx-dropzone-label{position:absolute;overflow-wrap:break-word}"]}),e})(),dM=(()=>{class e extends ac{constructor(t){super(t)}ngOnInit(){this.file?(this.videoSrc=URL.createObjectURL(this.file),this.sanitizedVideoSrc=this.sanitizer.bypassSecurityTrustUrl(this.videoSrc)):console.error("No file to read. Please provide a file using the [file] Input property.")}ngOnDestroy(){URL.revokeObjectURL(this.videoSrc)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(I.H7))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["ngx-dropzone-video-preview"]],features:[o.\u0275\u0275ProvidersFeature([{provide:ac,useExisting:e}]),o.\u0275\u0275InheritDefinitionFeature],ngContentSelectors:Zg,decls:3,vars:2,consts:[["controls","",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],["controls","",3,"click"],[3,"src"],[3,"click"]],template:function(t,r){1&t&&(o.\u0275\u0275projectionDef(Yg),o.\u0275\u0275template(0,lM,2,1,"video",0),o.\u0275\u0275projection(1),o.\u0275\u0275template(2,uM,1,0,"ngx-dropzone-remove-badge",1)),2&t&&(o.\u0275\u0275property("ngIf",r.sanitizedVideoSrc),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",r.removable))},directives:[ev,C.NgIf],styles:["[_nghost-%COMP%]{min-width:unset!important;max-width:unset!important;padding:0!important}[_nghost-%COMP%]:hover   video[_ngcontent-%COMP%], [_nghost-%COMP%]:focus   video[_ngcontent-%COMP%]{opacity:.7}[_nghost-%COMP%]:hover   ngx-dropzone-remove-badge[_ngcontent-%COMP%], [_nghost-%COMP%]:focus   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]   ngx-dropzone-remove-badge[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]   video[_ngcontent-%COMP%]{max-height:100%;border-radius:5px}[_nghost-%COMP%]     ngx-dropzone-label{position:absolute;overflow-wrap:break-word}"]}),e})(),Ch=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[C.CommonModule]]}),e})();function hn(e,n,t,r){var l,s=arguments.length,a=s<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,n,t,r);else for(var u=e.length-1;u>=0;u--)(l=e[u])&&(a=(s<3?l(a):s>3?l(n,t,a):l(n,t))||a);return s>3&&a&&Object.defineProperty(n,t,a),a}function fn(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)}var Sh=function(){function e(n){this.template=n}return e.ctorParameters=function(){return[{type:o.TemplateRef}]},(e=hn([fn("design:paramtypes",[o.TemplateRef])],e)).\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.TemplateRef))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["","queryOperator",""]]}),e}(),Eh=function(){function e(n){this.template=n}return e.ctorParameters=function(){return[{type:o.TemplateRef}]},(e=hn([fn("design:paramtypes",[o.TemplateRef])],e)).\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.TemplateRef))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["","queryField",""]]}),e}(),Ah=function(){function e(n){this.template=n}return e.ctorParameters=function(){return[{type:o.TemplateRef}]},(e=hn([fn("design:paramtypes",[o.TemplateRef])],e)).\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.TemplateRef))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["","queryEntity",""]]}),e}(),Ph=function(){function e(n){this.template=n}return e.ctorParameters=function(){return[{type:o.TemplateRef}]},(e=hn([fn("design:paramtypes",[o.TemplateRef])],e)).\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.TemplateRef))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["","querySwitchGroup",""]]}),e}(),Ih=function(){function e(n){this.template=n}return e.ctorParameters=function(){return[{type:o.TemplateRef}]},(e=hn([fn("design:paramtypes",[o.TemplateRef])],e)).\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.TemplateRef))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["","queryButtonGroup",""]]}),e}(),Ab=function(){function e(n){this.template=n}return Object.defineProperty(e.prototype,"queryInputType",{get:function(){return this._type},set:function(n){!n||(this._type=n)},enumerable:!0,configurable:!0}),e.ctorParameters=function(){return[{type:o.TemplateRef}]},hn([(0,o.Input)(),fn("design:type",String),fn("design:paramtypes",[String])],e.prototype,"queryInputType",null),(e=hn([fn("design:paramtypes",[o.TemplateRef])],e)).\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.TemplateRef))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["","queryInput",""]],inputs:{queryInputType:"queryInputType"}}),e}(),Th=function(){function e(n){this.template=n}return e.ctorParameters=function(){return[{type:o.TemplateRef}]},(e=hn([fn("design:paramtypes",[o.TemplateRef])],e)).\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.TemplateRef))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["","queryRemoveButton",""]]}),e}(),Rh=function(){function e(n){this.template=n}return e.ctorParameters=function(){return[{type:o.TemplateRef}]},(e=hn([fn("design:paramtypes",[o.TemplateRef])],e)).\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.TemplateRef))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["","queryEmptyWarning",""]]}),e}(),kh=function(){function e(n){this.template=n}return e.ctorParameters=function(){return[{type:o.TemplateRef}]},(e=hn([fn("design:paramtypes",[o.TemplateRef])],e)).\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.TemplateRef))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["","queryArrowIcon",""]]}),e}(),pM=["treeContainer"];function hM(e,n){if(1&e&&o.\u0275\u0275element(0,"i",0),2&e){var t=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngClass",t.getClassNames("arrowIcon"))}}function mM(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function gM(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,mM,1,0,"ng-container",10),o.\u0275\u0275elementContainerEnd()),2&e){var t=n.ngIf,r=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",r.getArrowIconContext())}}function vM(e,n){if(1&e){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"a",9),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().toggleCollapse()}),o.\u0275\u0275template(1,gM,2,2,"ng-container",3),o.\u0275\u0275elementEnd()}if(2&e){var r=o.\u0275\u0275nextContext(),s=o.\u0275\u0275reference(2);o.\u0275\u0275property("ngClass",r.getClassNames("arrowIconButton",r.data.collapsed?"collapsed":null)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.getArrowIconTemplate())("ngIfElse",s)}}function yM(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function _M(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"div",0),o.\u0275\u0275template(2,yM,1,0,"ng-container",10),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&e){var t=n.ngIf,r=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",r.getClassNames("buttonGroup","rightAlign")),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",r.getButtonGroupContext())}}function bM(e,n){if(1&e){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",11),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext(2).addRuleSet()}),o.\u0275\u0275element(1,"i",0),o.\u0275\u0275text(2," Ruleset "),o.\u0275\u0275elementEnd()}if(2&e){var r=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("ngClass",r.getClassNames("button"))("disabled",r.disabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",r.getClassNames("addIcon"))}}function wM(e,n){if(1&e){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"button",11),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext(2).removeRuleSet()}),o.\u0275\u0275element(2,"i",0),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()}if(2&e){var r=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",r.getClassNames("button","removeButton"))("disabled",r.disabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",r.getClassNames("removeIcon"))}}function CM(e,n){if(1&e){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"button",11),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().addRule()}),o.\u0275\u0275element(2,"i",0),o.\u0275\u0275text(3," Rule "),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(4,bM,3,3,"button",12),o.\u0275\u0275template(5,wM,3,3,"ng-container",13),o.\u0275\u0275elementEnd()}if(2&e){var r=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngClass",r.getClassNames("buttonGroup","rightAlign")),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",r.getClassNames("button"))("disabled",r.disabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",r.getClassNames("addIcon")),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",r.allowRuleset),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!!r.parentValue&&r.allowRuleset)}}function xM(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function SM(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,xM,1,0,"ng-container",10),o.\u0275\u0275elementContainerEnd()),2&e){var t=n.ngIf,r=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",r.getSwitchGroupContext())}}function EM(e,n){if(1&e){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div",0),o.\u0275\u0275elementStart(2,"input",14,15),o.\u0275\u0275listener("ngModelChange",function(a){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext(2).data.condition=a}),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"label",9),o.\u0275\u0275listener("click",function(){o.\u0275\u0275restoreView(t);var a=o.\u0275\u0275reference(3);return o.\u0275\u0275nextContext(2).changeCondition(a.value)}),o.\u0275\u0275text(5,"AND"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"div",0),o.\u0275\u0275elementStart(7,"input",16,17),o.\u0275\u0275listener("ngModelChange",function(a){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext(2).data.condition=a}),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"label",9),o.\u0275\u0275listener("click",function(){o.\u0275\u0275restoreView(t);var a=o.\u0275\u0275reference(8);return o.\u0275\u0275nextContext(2).changeCondition(a.value)}),o.\u0275\u0275text(10,"OR"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){var r=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("ngClass",r.getClassNames("switchGroup","transition")),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",r.getClassNames("switchControl")),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",r.getClassNames("switchRadio"))("ngModel",r.data.condition)("disabled",r.disabled),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngClass",r.getClassNames("switchLabel")),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngClass",r.getClassNames("switchControl")),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",r.getClassNames("switchRadio"))("ngModel",r.data.condition)("disabled",r.disabled),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngClass",r.getClassNames("switchLabel"))}}function AM(e,n){if(1&e&&o.\u0275\u0275template(0,EM,11,11,"div",8),2&e){var t=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngIf",t.data)}}function PM(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function IM(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"div",0),o.\u0275\u0275template(2,PM,1,0,"ng-container",10),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&e){var t=n.ngIf,r=o.\u0275\u0275nextContext(3).$implicit,s=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",s.getClassNames("buttonGroup","rightAlign")),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",s.getRemoveButtonContext(r))}}function TM(e,n){if(1&e){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"button",11),o.\u0275\u0275listener("click",function(){o.\u0275\u0275restoreView(t);var a=o.\u0275\u0275nextContext(3).$implicit,l=o.\u0275\u0275nextContext(2);return l.removeRule(a,l.data)}),o.\u0275\u0275element(2,"i",0),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){var r=o.\u0275\u0275nextContext(5);o.\u0275\u0275property("ngClass",r.getClassNames("removeButtonSize","rightAlign")),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",r.getClassNames("button","removeButton"))("disabled",r.disabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",r.getClassNames("removeIcon"))}}function RM(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function kM(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,RM,1,0,"ng-container",10),o.\u0275\u0275elementContainerEnd()),2&e){var t=n.ngIf,r=o.\u0275\u0275nextContext(4).$implicit,s=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",s.getEntityContext(r))}}function OM(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div",27),o.\u0275\u0275template(1,kM,2,2,"ng-container",3),o.\u0275\u0275elementEnd()),2&e){o.\u0275\u0275nextContext();var t=o.\u0275\u0275reference(6),r=o.\u0275\u0275nextContext(4);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.getEntityTemplate())("ngIfElse",t)}}function FM(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"option",30),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){var t=n.$implicit;o.\u0275\u0275property("ngValue",t.value),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",t.name," ")}}function DM(e,n){if(1&e){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"select",28),o.\u0275\u0275listener("ngModelChange",function(l){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext(3).$implicit.entity=l})("ngModelChange",function(l){o.\u0275\u0275restoreView(t);var u=o.\u0275\u0275nextContext(3),p=u.$implicit,h=u.index,S=o.\u0275\u0275nextContext(2);return S.changeEntity(l,p,h,S.data)}),o.\u0275\u0275template(2,FM,2,2,"option",29),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){var r=o.\u0275\u0275nextContext(3).$implicit,s=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("ngClass",s.getClassNames("entityControlSize")),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",s.getClassNames("entityControl"))("ngModel",r.entity)("disabled",s.disabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",s.entities)}}function MM(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function NM(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,MM,1,0,"ng-container",10),o.\u0275\u0275elementContainerEnd()),2&e){var t=n.ngIf,r=o.\u0275\u0275nextContext(3).$implicit,s=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",s.getFieldContext(r))}}function jM(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"option",30),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){var t=n.$implicit;o.\u0275\u0275property("ngValue",t.value),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",t.name," ")}}function BM(e,n){if(1&e){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"select",28),o.\u0275\u0275listener("ngModelChange",function(l){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext(3).$implicit.field=l})("ngModelChange",function(l){o.\u0275\u0275restoreView(t);var u=o.\u0275\u0275nextContext(3).$implicit;return o.\u0275\u0275nextContext(2).changeField(l,u)}),o.\u0275\u0275template(2,jM,2,2,"option",29),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){var r=o.\u0275\u0275nextContext(3).$implicit,s=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("ngClass",s.getClassNames("fieldControlSize")),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",s.getClassNames("fieldControl"))("ngModel",r.field)("disabled",s.disabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",s.getFields(r.entity))}}function LM(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function zM(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,LM,1,0,"ng-container",10),o.\u0275\u0275elementContainerEnd()),2&e){var t=n.ngIf,r=o.\u0275\u0275nextContext(3).$implicit,s=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",s.getOperatorContext(r))}}function UM(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"option",30),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){var t=n.$implicit;o.\u0275\u0275property("ngValue",t),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",t," ")}}function GM(e,n){if(1&e){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"select",28),o.\u0275\u0275listener("ngModelChange",function(l){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext(3).$implicit.operator=l})("ngModelChange",function(){o.\u0275\u0275restoreView(t);var l=o.\u0275\u0275nextContext(3).$implicit;return o.\u0275\u0275nextContext(2).changeOperator(l)}),o.\u0275\u0275template(2,UM,2,2,"option",29),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){var r=o.\u0275\u0275nextContext(3).$implicit,s=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("ngClass",s.getClassNames("operatorControlSize")),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",s.getClassNames("operatorControl"))("ngModel",r.operator)("disabled",s.disabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",s.getOperators(r.field))}}function VM(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function $M(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,VM,1,0,"ng-container",10),o.\u0275\u0275elementContainerEnd()),2&e){var t=n.ngIf,r=o.\u0275\u0275nextContext(3).$implicit,s=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",s.getInputContext(r))}}function HM(e,n){if(1&e){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"input",39),o.\u0275\u0275listener("ngModelChange",function(l){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext(4).$implicit.value=l})("ngModelChange",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext(6).changeInput()}),o.\u0275\u0275elementEnd()}if(2&e){var r=o.\u0275\u0275nextContext(4).$implicit,s=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("ngClass",s.getClassNames("inputControl"))("ngModel",r.value)("disabled",s.disabled)}}function qM(e,n){if(1&e){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"input",40),o.\u0275\u0275listener("ngModelChange",function(l){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext(4).$implicit.value=l})("ngModelChange",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext(6).changeInput()}),o.\u0275\u0275elementEnd()}if(2&e){var r=o.\u0275\u0275nextContext(4).$implicit,s=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("ngClass",s.getClassNames("inputControl"))("ngModel",r.value)("disabled",s.disabled)}}function KM(e,n){if(1&e){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"input",41),o.\u0275\u0275listener("ngModelChange",function(l){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext(4).$implicit.value=l})("ngModelChange",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext(6).changeInput()}),o.\u0275\u0275elementEnd()}if(2&e){var r=o.\u0275\u0275nextContext(4).$implicit,s=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("ngClass",s.getClassNames("inputControl"))("ngModel",r.value)("disabled",s.disabled)}}function XM(e,n){if(1&e){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"input",42),o.\u0275\u0275listener("ngModelChange",function(l){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext(4).$implicit.value=l})("ngModelChange",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext(6).changeInput()}),o.\u0275\u0275elementEnd()}if(2&e){var r=o.\u0275\u0275nextContext(4).$implicit,s=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("ngClass",s.getClassNames("inputControl"))("ngModel",r.value)("disabled",s.disabled)}}function WM(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"option",30),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){var t=n.$implicit;o.\u0275\u0275property("ngValue",t.value),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",t.name," ")}}function JM(e,n){if(1&e){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"select",28),o.\u0275\u0275listener("ngModelChange",function(l){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext(4).$implicit.value=l})("ngModelChange",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext(6).changeInput()}),o.\u0275\u0275template(1,WM,2,2,"option",29),o.\u0275\u0275elementEnd()}if(2&e){var r=o.\u0275\u0275nextContext(4).$implicit,s=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("ngClass",s.getClassNames("inputControl"))("ngModel",r.value)("disabled",s.disabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",s.getOptions(r.field))}}function QM(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"option",30),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){var t=n.$implicit;o.\u0275\u0275property("ngValue",t.value),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",t.name," ")}}function YM(e,n){if(1&e){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"select",43),o.\u0275\u0275listener("ngModelChange",function(l){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext(4).$implicit.value=l})("ngModelChange",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext(6).changeInput()}),o.\u0275\u0275template(2,QM,2,2,"option",29),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()}if(2&e){var r=o.\u0275\u0275nextContext(4).$implicit,s=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",s.getClassNames("inputControl"))("ngModel",r.value)("disabled",s.disabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",s.getOptions(r.field))}}function ZM(e,n){if(1&e){var t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"input",44),o.\u0275\u0275listener("ngModelChange",function(l){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext(4).$implicit.value=l})("ngModelChange",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext(6).changeInput()}),o.\u0275\u0275elementEnd()}if(2&e){var r=o.\u0275\u0275nextContext(4).$implicit,s=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("ngClass",s.getClassNames("inputControl"))("ngModel",r.value)("disabled",s.disabled)}}function eN(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div",31),o.\u0275\u0275template(1,HM,1,3,"input",32),o.\u0275\u0275template(2,qM,1,3,"input",33),o.\u0275\u0275template(3,KM,1,3,"input",34),o.\u0275\u0275template(4,XM,1,3,"input",35),o.\u0275\u0275template(5,JM,2,4,"select",36),o.\u0275\u0275template(6,YM,3,4,"ng-container",37),o.\u0275\u0275template(7,ZM,1,3,"input",38),o.\u0275\u0275elementEnd()),2&e){var t=o.\u0275\u0275nextContext(3).$implicit,r=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("ngClass",r.getClassNames("inputControlSize"))("ngSwitch",r.getInputType(t.field,t.operator)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase","string"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase","number"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase","date"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase","time"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase","category"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase","multiselect"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase","boolean")}}function tN(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,IM,3,3,"ng-container",3),o.\u0275\u0275template(2,TM,3,4,"ng-template",null,21,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(4,OM,2,2,"div",22),o.\u0275\u0275template(5,DM,3,5,"ng-template",null,23,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(7,NM,2,2,"ng-container",3),o.\u0275\u0275template(8,BM,3,5,"ng-template",null,24,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(10,zM,2,2,"ng-container",3),o.\u0275\u0275template(11,GM,3,5,"ng-template",null,25,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(13,$M,2,2,"ng-container",3),o.\u0275\u0275template(14,eN,8,9,"ng-template",null,26,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementContainerEnd()),2&e){var t=o.\u0275\u0275reference(3),r=o.\u0275\u0275reference(9),s=o.\u0275\u0275reference(12),a=o.\u0275\u0275reference(15),l=o.\u0275\u0275nextContext(2).$implicit,u=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",u.getRemoveButtonTemplate())("ngIfElse",t),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",(null==u.entities?null:u.entities.length)>0),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",u.getFieldTemplate())("ngIfElse",r),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",u.getOperatorTemplate())("ngIfElse",s),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",u.findTemplateForRule(l))("ngIfElse",a)}}function nN(e,n){if(1&e&&o.\u0275\u0275element(0,"query-builder",45),2&e){var t=o.\u0275\u0275nextContext(2).$implicit,r=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("data",t)("disabled",r.disabled)("parentTouchedCallback",r.parentTouchedCallback||r.onTouchedCallback)("parentChangeCallback",r.parentChangeCallback||r.onChangeCallback)("parentInputTemplates",r.parentInputTemplates||r.inputTemplates)("parentOperatorTemplate",r.parentOperatorTemplate||r.operatorTemplate)("parentFieldTemplate",r.parentFieldTemplate||r.fieldTemplate)("parentEntityTemplate",r.parentEntityTemplate||r.entityTemplate)("parentSwitchGroupTemplate",r.parentSwitchGroupTemplate||r.switchGroupTemplate)("parentButtonGroupTemplate",r.parentButtonGroupTemplate||r.buttonGroupTemplate)("parentRemoveButtonTemplate",r.parentRemoveButtonTemplate||r.removeButtonTemplate)("parentEmptyWarningTemplate",r.parentEmptyWarningTemplate||r.emptyWarningTemplate)("parentArrowIconTemplate",r.parentArrowIconTemplate||r.arrowIconTemplate)("parentValue",r.data)("classNames",r.classNames)("config",r.config)("allowRuleset",r.allowRuleset)("allowCollapse",r.allowCollapse)("emptyMessage",r.emptyMessage)("operatorMap",r.operatorMap)}}function rN(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function iN(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,rN,1,0,"ng-container",10),o.\u0275\u0275elementContainerEnd()),2&e){var t=o.\u0275\u0275nextContext().ngIf,r=o.\u0275\u0275nextContext(4);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",r.getEmptyWarningContext())}}function oN(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,iN,2,2,"ng-container",13),o.\u0275\u0275elementContainerEnd()),2&e){var t=o.\u0275\u0275nextContext().ngIf;o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.invalid)}}function sN(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"p",0),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){var t=o.\u0275\u0275nextContext(5);o.\u0275\u0275property("ngClass",t.getClassNames("emptyWarning")),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",t.emptyMessage," ")}}function aN(e,n){if(1&e&&o.\u0275\u0275template(0,sN,2,2,"p",8),2&e){var t=o.\u0275\u0275nextContext().ngIf;o.\u0275\u0275property("ngIf",t.invalid)}}function lN(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"li",0),o.\u0275\u0275template(2,tN,16,9,"ng-container",13),o.\u0275\u0275template(3,nN,1,20,"query-builder",19),o.\u0275\u0275template(4,oN,2,1,"ng-container",3),o.\u0275\u0275template(5,aN,1,1,"ng-template",null,20,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&e){var t=n.ngIf,r=o.\u0275\u0275reference(6),s=o.\u0275\u0275nextContext(3);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",s.getQueryItemClassName(t)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!t.ruleset),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.ruleset),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",s.getEmptyWarningTemplate())("ngIfElse",r)}}var uN=function(e,n){return{ruleset:e,invalid:n}};function cN(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,lN,7,5,"ng-container",13),o.\u0275\u0275elementContainerEnd()),2&e){var t=n.$implicit,r=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",o.\u0275\u0275pureFunction2(1,uN,!!t.rules,!r.config.allowEmptyRulesets&&t.rules&&0===t.rules.length))}}function dN(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"ul",0),o.\u0275\u0275template(1,cN,2,4,"ng-container",18),o.\u0275\u0275elementEnd()),2&e){var t=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngClass",t.getClassNames("tree")),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",t.data.rules)}}var fN={provide:d.JU,useExisting:(0,o.forwardRef)(function(){return nv}),multi:!0},pN={provide:d.Cf,useExisting:(0,o.forwardRef)(function(){return nv}),multi:!0},nv=function(){function e(n){var t=this;this.changeDetectorRef=n,this.defaultClassNames={arrowIconButton:"q-arrow-icon-button",arrowIcon:"q-icon q-arrow-icon",removeIcon:"q-icon q-remove-icon",addIcon:"q-icon q-add-icon",button:"q-button",buttonGroup:"q-button-group",removeButton:"q-remove-button",switchGroup:"q-switch-group",switchLabel:"q-switch-label",switchRadio:"q-switch-radio",rightAlign:"q-right-align",transition:"q-transition",collapsed:"q-collapsed",treeContainer:"q-tree-container",tree:"q-tree",row:"q-row",connector:"q-connector",rule:"q-rule",ruleSet:"q-ruleset",invalidRuleSet:"q-invalid-ruleset",emptyWarning:"q-empty-warning",fieldControl:"q-field-control",fieldControlSize:"q-control-size",entityControl:"q-entity-control",entityControlSize:"q-control-size",operatorControl:"q-operator-control",operatorControlSize:"q-control-size",inputControl:"q-input-control",inputControlSize:"q-control-size"},this.defaultOperatorMap={string:["=","!=","contains","like"],number:["=","!=",">",">=","<","<="],time:["=","!=",">",">=","<","<="],date:["=","!=",">",">=","<","<="],category:["=","!=","in","not in"],boolean:["="]},this.data={condition:"and",rules:[]},this.allowRuleset=!0,this.allowCollapse=!1,this.emptyMessage="A ruleset cannot be empty. Please add a rule or remove it all together.",this.config={fields:{}},this.persistValueOnFieldChange=!1,this.defaultTemplateTypes=["string","number","time","date","category","boolean","multiselect"],this.defaultPersistValueTypes=["string","number","time","date","boolean"],this.defaultEmptyList=[],this.inputContextCache=new Map,this.operatorContextCache=new Map,this.fieldContextCache=new Map,this.entityContextCache=new Map,this.removeButtonContextCache=new Map,this.getDisabledState=function(){return t.disabled}}return e.prototype.ngOnInit=function(){},e.prototype.ngOnChanges=function(n){var t=this.config,r=typeof t;if("object"!==r)throw new Error("Expected 'config' must be a valid object, got "+r+" instead.");this.fields=Object.keys(t.fields).map(function(s){var a=t.fields[s];return a.value=a.value||s,a}),this.entities=t.entities?Object.keys(t.entities).map(function(s){var a=t.entities[s];return a.value=a.value||s,a}):null,this.operatorsCache={}},e.prototype.validate=function(n){var t={},r=[],s=!1;return!this.config.allowEmptyRulesets&&this.checkEmptyRuleInRuleset(this.data)&&(t.empty="Empty rulesets are not allowed.",s=!0),this.validateRulesInRuleset(this.data,r),r.length&&(t.rules=r,s=!0),s?t:null},Object.defineProperty(e.prototype,"value",{get:function(){return this.data},set:function(n){this.data=n||{condition:"and",rules:[]},this.handleDataChange()},enumerable:!0,configurable:!0}),e.prototype.writeValue=function(n){this.value=n},e.prototype.registerOnChange=function(n){var t=this;this.onChangeCallback=function(){return n(t.data)}},e.prototype.registerOnTouched=function(n){var t=this;this.onTouchedCallback=function(){return n(t.data)}},e.prototype.setDisabledState=function(n){this.disabled=n,this.changeDetectorRef.detectChanges()},e.prototype.findTemplateForRule=function(n){var t=this.getInputType(n.field,n.operator);if(t){var r=this.findQueryInput(t);return r?r.template:(-1===this.defaultTemplateTypes.indexOf(t)&&console.warn("Could not find template for field with type: "+t),null)}},e.prototype.findQueryInput=function(n){return(this.parentInputTemplates||this.inputTemplates).find(function(r){return r.queryInputType===n})},e.prototype.getOperators=function(n){if(this.operatorsCache[n])return this.operatorsCache[n];var t=this.defaultEmptyList,r=this.config.fields[n];if(this.config.getOperators)return this.config.getOperators(n,r);var s=r.type;return r&&r.operators?t=r.operators:s?(0===(t=this.operatorMap&&this.operatorMap[s]||this.defaultOperatorMap[s]||this.defaultEmptyList).length&&console.warn("No operators found for field '"+n+"' with type "+r.type+". Please define an 'operators' property on the field or use the 'operatorMap' binding to fix this."),r.nullable&&(t=t.concat(["is null","is not null"]))):console.warn("No 'type' property found on field: '"+n+"'"),this.operatorsCache[n]=t,t},e.prototype.getFields=function(n){return this.entities&&n?this.fields.filter(function(t){return t&&t.entity===n}):this.fields},e.prototype.getInputType=function(n,t){if(this.config.getInputType)return this.config.getInputType(n,t);if(!this.config.fields[n])throw new Error("No configuration for field '"+n+"' could be found! Please add it to config.fields.");var r=this.config.fields[n].type;switch(t){case"is null":case"is not null":return null;case"in":case"not in":return"category"===r||"boolean"===r?"multiselect":r;default:return r}},e.prototype.getOptions=function(n){return this.config.getOptions?this.config.getOptions(n):this.config.fields[n].options||this.defaultEmptyList},e.prototype.getClassNames=function(){for(var n=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var s=this.classNames?this.classNames:this.defaultClassNames,a=t.map(function(l){return s[l]||n.defaultClassNames[l]}).filter(function(l){return!!l});return a.length?a.join(" "):null},e.prototype.getDefaultField=function(n){if(n){if(void 0!==n.defaultField)return this.getDefaultValue(n.defaultField);var t=this.fields.filter(function(r){return r&&r.entity===n.value});return t&&t.length?t[0]:(console.warn("No fields found for entity '"+n.name+"'. A 'defaultOperator' is also not specified on the field config. Operator value will default to null."),null)}return null},e.prototype.getDefaultOperator=function(n){if(n&&void 0!==n.defaultOperator)return this.getDefaultValue(n.defaultOperator);var t=this.getOperators(n.value);return t&&t.length?t[0]:(console.warn("No operators found for field '"+n.value+"'. A 'defaultOperator' is also not specified on the field config. Operator value will default to null."),null)},e.prototype.addRule=function(n){if(!this.disabled){if(n=n||this.data,this.config.addRule)this.config.addRule(n);else{var t=this.fields[0];n.rules=n.rules.concat([{field:t.value,operator:this.getDefaultOperator(t),value:this.getDefaultValue(t.defaultValue),entity:t.entity}])}this.handleTouched(),this.handleDataChange()}},e.prototype.removeRule=function(n,t){this.disabled||(t=t||this.data,this.config.removeRule?this.config.removeRule(n,t):t.rules=t.rules.filter(function(r){return r!==n}),this.inputContextCache.delete(n),this.operatorContextCache.delete(n),this.fieldContextCache.delete(n),this.entityContextCache.delete(n),this.removeButtonContextCache.delete(n),this.handleTouched(),this.handleDataChange())},e.prototype.addRuleSet=function(n){this.disabled||(n=n||this.data,this.config.addRuleSet?this.config.addRuleSet(n):n.rules=n.rules.concat([{condition:"and",rules:[]}]),this.handleTouched(),this.handleDataChange())},e.prototype.removeRuleSet=function(n,t){this.disabled||(n=n||this.data,t=t||this.parentValue,this.config.removeRuleSet?this.config.removeRuleSet(n,t):t.rules=t.rules.filter(function(r){return r!==n}),this.handleTouched(),this.handleDataChange())},e.prototype.transitionEnd=function(n){this.treeContainer.nativeElement.style.maxHeight=null},e.prototype.toggleCollapse=function(){var n=this;this.computedTreeContainerHeight(),setTimeout(function(){n.data.collapsed=!n.data.collapsed},100)},e.prototype.computedTreeContainerHeight=function(){var n=this.treeContainer.nativeElement;n&&n.firstElementChild&&(n.style.maxHeight=n.firstElementChild.clientHeight+8+"px")},e.prototype.changeCondition=function(n){this.disabled||(this.data.condition=n,this.handleTouched(),this.handleDataChange())},e.prototype.changeOperator=function(n){this.disabled||(n.value=this.config.coerceValueForOperator?this.config.coerceValueForOperator(n.operator,n.value,n):this.coerceValueForOperator(n.operator,n.value,n),this.handleTouched(),this.handleDataChange())},e.prototype.coerceValueForOperator=function(n,t,r){return"multiselect"!==this.getInputType(r.field,n)||Array.isArray(t)?t:[t]},e.prototype.changeInput=function(){this.disabled||(this.handleTouched(),this.handleDataChange())},e.prototype.changeField=function(n,t){if(!this.disabled){var r=this.inputContextCache.get(t),a=this.config.fields[n],l=this.calculateFieldChangeValue(r&&r.field,a,t.value);void 0!==l?t.value=l:delete t.value,t.operator=this.getDefaultOperator(a),this.inputContextCache.delete(t),this.operatorContextCache.delete(t),this.fieldContextCache.delete(t),this.entityContextCache.delete(t),this.getInputContext(t),this.getFieldContext(t),this.getOperatorContext(t),this.getEntityContext(t),this.handleTouched(),this.handleDataChange()}},e.prototype.changeEntity=function(n,t,r,s){if(!this.disabled){var a=r,l=s,u=this.entities.find(function(h){return h.value===n}),p=this.getDefaultField(u);l||(a=(l=this.data).rules.findIndex(function(h){return h===t})),t.field=p.value,l.rules[a]=t,p?this.changeField(p.value,t):(this.handleTouched(),this.handleDataChange())}},e.prototype.getDefaultValue=function(n){return"function"==typeof n?n():n},e.prototype.getOperatorTemplate=function(){var n=this.parentOperatorTemplate||this.operatorTemplate;return n?n.template:null},e.prototype.getFieldTemplate=function(){var n=this.parentFieldTemplate||this.fieldTemplate;return n?n.template:null},e.prototype.getEntityTemplate=function(){var n=this.parentEntityTemplate||this.entityTemplate;return n?n.template:null},e.prototype.getArrowIconTemplate=function(){var n=this.parentArrowIconTemplate||this.arrowIconTemplate;return n?n.template:null},e.prototype.getButtonGroupTemplate=function(){var n=this.parentButtonGroupTemplate||this.buttonGroupTemplate;return n?n.template:null},e.prototype.getSwitchGroupTemplate=function(){var n=this.parentSwitchGroupTemplate||this.switchGroupTemplate;return n?n.template:null},e.prototype.getRemoveButtonTemplate=function(){var n=this.parentRemoveButtonTemplate||this.removeButtonTemplate;return n?n.template:null},e.prototype.getEmptyWarningTemplate=function(){var n=this.parentEmptyWarningTemplate||this.emptyWarningTemplate;return n?n.template:null},e.prototype.getQueryItemClassName=function(n){var t=this.getClassNames("row","connector","transition");return t+=" "+this.getClassNames(n.ruleset?"ruleSet":"rule"),n.invalid&&(t+=" "+this.getClassNames("invalidRuleSet")),t},e.prototype.getButtonGroupContext=function(){return this.buttonGroupContext||(this.buttonGroupContext={addRule:this.addRule.bind(this),addRuleSet:this.allowRuleset&&this.addRuleSet.bind(this),removeRuleSet:this.allowRuleset&&this.parentValue&&this.removeRuleSet.bind(this),getDisabledState:this.getDisabledState,$implicit:this.data}),this.buttonGroupContext},e.prototype.getRemoveButtonContext=function(n){return this.removeButtonContextCache.has(n)||this.removeButtonContextCache.set(n,{removeRule:this.removeRule.bind(this),getDisabledState:this.getDisabledState,$implicit:n}),this.removeButtonContextCache.get(n)},e.prototype.getFieldContext=function(n){return this.fieldContextCache.has(n)||this.fieldContextCache.set(n,{onChange:this.changeField.bind(this),getFields:this.getFields.bind(this),getDisabledState:this.getDisabledState,fields:this.fields,$implicit:n}),this.fieldContextCache.get(n)},e.prototype.getEntityContext=function(n){return this.entityContextCache.has(n)||this.entityContextCache.set(n,{onChange:this.changeEntity.bind(this),getDisabledState:this.getDisabledState,entities:this.entities,$implicit:n}),this.entityContextCache.get(n)},e.prototype.getSwitchGroupContext=function(){return{onChange:this.changeCondition.bind(this),getDisabledState:this.getDisabledState,$implicit:this.data}},e.prototype.getArrowIconContext=function(){return{getDisabledState:this.getDisabledState,$implicit:this.data}},e.prototype.getEmptyWarningContext=function(){return{getDisabledState:this.getDisabledState,message:this.emptyMessage,$implicit:this.data}},e.prototype.getOperatorContext=function(n){return this.operatorContextCache.has(n)||this.operatorContextCache.set(n,{onChange:this.changeOperator.bind(this),getDisabledState:this.getDisabledState,operators:this.getOperators(n.field),$implicit:n}),this.operatorContextCache.get(n)},e.prototype.getInputContext=function(n){return this.inputContextCache.has(n)||this.inputContextCache.set(n,{onChange:this.changeInput.bind(this),getDisabledState:this.getDisabledState,options:this.getOptions(n.field),field:this.config.fields[n.field],$implicit:n}),this.inputContextCache.get(n)},e.prototype.calculateFieldChangeValue=function(n,t,r){return null!=this.config.calculateFieldChangeValue?this.config.calculateFieldChangeValue(n,t,r):this.persistValueOnFieldChange&&null!=n&&null!=t&&n.type===t.type&&-1!==this.defaultPersistValueTypes.indexOf(n.type)?r:t&&void 0!==t.defaultValue?this.getDefaultValue(t.defaultValue):void 0},e.prototype.checkEmptyRuleInRuleset=function(n){var t=this;return!n||!n.rules||0===n.rules.length||n.rules.some(function(r){return!!r.rules&&t.checkEmptyRuleInRuleset(r)})},e.prototype.validateRulesInRuleset=function(n,t){var r=this;n&&n.rules&&n.rules.length>0&&n.rules.forEach(function(s){if(s.rules)return r.validateRulesInRuleset(s,t);if(s.field){var a=r.config.fields[s.field];if(a&&a.validator&&a.validator.apply){var l=a.validator(s,n);null!=l&&t.push(l)}}})},e.prototype.handleDataChange=function(){this.changeDetectorRef.markForCheck(),this.onChangeCallback&&this.onChangeCallback(),this.parentChangeCallback&&this.parentChangeCallback()},e.prototype.handleTouched=function(){this.onTouchedCallback&&this.onTouchedCallback(),this.parentTouchedCallback&&this.parentTouchedCallback()},e.ctorParameters=function(){return[{type:o.ChangeDetectorRef}]},hn([(0,o.Input)(),fn("design:type",Boolean)],e.prototype,"disabled",void 0),hn([(0,o.Input)(),fn("design:type",Object)],e.prototype,"data",void 0),hn([(0,o.Input)(),fn("design:type",Boolean)],e.prototype,"allowRuleset",void 0),hn([(0,o.Input)(),fn("design:type",Boolean)],e.prototype,"allowCollapse",void 0),hn([(0,o.Input)(),fn("design:type",String)],e.prototype,"emptyMessage",void 0),hn([(0,o.Input)(),fn("design:type",Object)],e.prototype,"classNames",void 0),hn([(0,o.Input)(),fn("design:type",Object)],e.prototype,"operatorMap",void 0),hn([(0,o.Input)(),fn("design:type",Object)],e.prototype,"parentValue",void 0),hn([(0,o.Input)(),fn("design:type",Object)],e.prototype,"config",void 0),hn([(0,o.Input)(),fn("design:type",kh)],e.prototype,"parentArrowIconTemplate",void 0),hn([(0,o.Input)(),fn("design:type",o.QueryList)],e.prototype,"parentInputTemplates",void 0),hn([(0,o.Input)(),fn("design:type",Sh)],e.prototype,"parentOperatorTemplate",void 0),hn([(0,o.Input)(),fn("design:type",Eh)],e.prototype,"parentFieldTemplate",void 0),hn([(0,o.Input)(),fn("design:type",Ah)],e.prototype,"parentEntityTemplate",void 0),hn([(0,o.Input)(),fn("design:type",Ph)],e.prototype,"parentSwitchGroupTemplate",void 0),hn([(0,o.Input)(),fn("design:type",Ih)],e.prototype,"parentButtonGroupTemplate",void 0),hn([(0,o.Input)(),fn("design:type",Th)],e.prototype,"parentRemoveButtonTemplate",void 0),hn([(0,o.Input)(),fn("design:type",Rh)],e.prototype,"parentEmptyWarningTemplate",void 0),hn([(0,o.Input)(),fn("design:type",Function)],e.prototype,"parentChangeCallback",void 0),hn([(0,o.Input)(),fn("design:type",Function)],e.prototype,"parentTouchedCallback",void 0),hn([(0,o.Input)(),fn("design:type",Boolean)],e.prototype,"persistValueOnFieldChange",void 0),hn([(0,o.ViewChild)("treeContainer",{static:!0}),fn("design:type",o.ElementRef)],e.prototype,"treeContainer",void 0),hn([(0,o.ContentChild)(Ih),fn("design:type",Ih)],e.prototype,"buttonGroupTemplate",void 0),hn([(0,o.ContentChild)(Ph),fn("design:type",Ph)],e.prototype,"switchGroupTemplate",void 0),hn([(0,o.ContentChild)(Eh),fn("design:type",Eh)],e.prototype,"fieldTemplate",void 0),hn([(0,o.ContentChild)(Ah),fn("design:type",Ah)],e.prototype,"entityTemplate",void 0),hn([(0,o.ContentChild)(Sh),fn("design:type",Sh)],e.prototype,"operatorTemplate",void 0),hn([(0,o.ContentChild)(Th),fn("design:type",Th)],e.prototype,"removeButtonTemplate",void 0),hn([(0,o.ContentChild)(Rh),fn("design:type",Rh)],e.prototype,"emptyWarningTemplate",void 0),hn([(0,o.ContentChildren)(Ab),fn("design:type",o.QueryList)],e.prototype,"inputTemplates",void 0),hn([(0,o.ContentChild)(kh),fn("design:type",kh)],e.prototype,"arrowIconTemplate",void 0),hn([(0,o.Input)(),fn("design:type",Object),fn("design:paramtypes",[Object])],e.prototype,"value",null),(e=hn([fn("design:paramtypes",[o.ChangeDetectorRef])],e)).\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.ChangeDetectorRef))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["query-builder"]],contentQueries:function(t,r,s){var a;1&t&&(o.\u0275\u0275contentQuery(s,Ih,5),o.\u0275\u0275contentQuery(s,Ph,5),o.\u0275\u0275contentQuery(s,Eh,5),o.\u0275\u0275contentQuery(s,Ah,5),o.\u0275\u0275contentQuery(s,Sh,5),o.\u0275\u0275contentQuery(s,Th,5),o.\u0275\u0275contentQuery(s,Rh,5),o.\u0275\u0275contentQuery(s,kh,5),o.\u0275\u0275contentQuery(s,Ab,4)),2&t&&(o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r.buttonGroupTemplate=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r.switchGroupTemplate=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r.fieldTemplate=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r.entityTemplate=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r.operatorTemplate=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r.removeButtonTemplate=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r.emptyWarningTemplate=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r.arrowIconTemplate=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r.inputTemplates=a))},viewQuery:function(t,r){var s;1&t&&o.\u0275\u0275viewQuery(pM,7),2&t&&o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.treeContainer=s.first)},inputs:{data:"data",allowRuleset:"allowRuleset",allowCollapse:"allowCollapse",emptyMessage:"emptyMessage",config:"config",persistValueOnFieldChange:"persistValueOnFieldChange",value:"value",disabled:"disabled",classNames:"classNames",operatorMap:"operatorMap",parentValue:"parentValue",parentArrowIconTemplate:"parentArrowIconTemplate",parentInputTemplates:"parentInputTemplates",parentOperatorTemplate:"parentOperatorTemplate",parentFieldTemplate:"parentFieldTemplate",parentEntityTemplate:"parentEntityTemplate",parentSwitchGroupTemplate:"parentSwitchGroupTemplate",parentButtonGroupTemplate:"parentButtonGroupTemplate",parentRemoveButtonTemplate:"parentRemoveButtonTemplate",parentEmptyWarningTemplate:"parentEmptyWarningTemplate",parentChangeCallback:"parentChangeCallback",parentTouchedCallback:"parentTouchedCallback"},features:[o.\u0275\u0275ProvidersFeature([fN,pN]),o.\u0275\u0275NgOnChangesFeature],decls:13,vars:8,consts:[[3,"ngClass"],["defaultArrowIcon",""],[3,"ngClass","click",4,"ngIf"],[4,"ngIf","ngIfElse"],["defaultButtonGroup",""],["defaultSwitchGroup",""],[3,"ngClass","transitionend"],["treeContainer",""],[3,"ngClass",4,"ngIf"],[3,"ngClass","click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button",3,"ngClass","disabled","click"],["type","button",3,"ngClass","disabled","click",4,"ngIf"],[4,"ngIf"],["type","radio","value","and",3,"ngClass","ngModel","disabled","ngModelChange"],["andOption",""],["type","radio","value","or",3,"ngClass","ngModel","disabled","ngModelChange"],["orOption",""],[4,"ngFor","ngForOf"],[3,"data","disabled","parentTouchedCallback","parentChangeCallback","parentInputTemplates","parentOperatorTemplate","parentFieldTemplate","parentEntityTemplate","parentSwitchGroupTemplate","parentButtonGroupTemplate","parentRemoveButtonTemplate","parentEmptyWarningTemplate","parentArrowIconTemplate","parentValue","classNames","config","allowRuleset","allowCollapse","emptyMessage","operatorMap",4,"ngIf"],["defaultEmptyWarning",""],["defaultRemoveButton",""],["class","q-inline-block-display",4,"ngIf"],["defaultEntity",""],["defaultField",""],["defaultOperator",""],["defaultInput",""],[1,"q-inline-block-display"],[3,"ngClass","ngModel","disabled","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[3,"ngClass","ngSwitch"],["type","text",3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],["type","number",3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],["type","date",3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],["type","time",3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],[3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],[4,"ngSwitchCase"],["type","checkbox",3,"ngClass","ngModel","disabled","ngModelChange",4,"ngSwitchCase"],["type","text",3,"ngClass","ngModel","disabled","ngModelChange"],["type","number",3,"ngClass","ngModel","disabled","ngModelChange"],["type","date",3,"ngClass","ngModel","disabled","ngModelChange"],["type","time",3,"ngClass","ngModel","disabled","ngModelChange"],["multiple","",3,"ngClass","ngModel","disabled","ngModelChange"],["type","checkbox",3,"ngClass","ngModel","disabled","ngModelChange"],[3,"data","disabled","parentTouchedCallback","parentChangeCallback","parentInputTemplates","parentOperatorTemplate","parentFieldTemplate","parentEntityTemplate","parentSwitchGroupTemplate","parentButtonGroupTemplate","parentRemoveButtonTemplate","parentEmptyWarningTemplate","parentArrowIconTemplate","parentValue","classNames","config","allowRuleset","allowCollapse","emptyMessage","operatorMap"]],template:function(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275template(1,hM,1,1,"ng-template",null,1,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(3,vM,2,3,"a",2),o.\u0275\u0275template(4,_M,3,3,"ng-container",3),o.\u0275\u0275template(5,CM,6,6,"ng-template",null,4,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(7,SM,2,2,"ng-container",3),o.\u0275\u0275template(8,AM,1,1,"ng-template",null,5,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(10,"div",6,7),o.\u0275\u0275listener("transitionend",function(u){return r.transitionEnd(u)}),o.\u0275\u0275template(12,dN,2,2,"ul",8),o.\u0275\u0275elementEnd()),2&t){var s=o.\u0275\u0275reference(6),a=o.\u0275\u0275reference(9);o.\u0275\u0275property("ngClass",r.getClassNames("switchRow")),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",r.allowCollapse),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.getButtonGroupTemplate())("ngIfElse",s),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",r.getSwitchGroupTemplate())("ngIfElse",a),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngClass",r.getClassNames("treeContainer",r.data.collapsed?"collapsed":null)),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",r.data&&r.data.rules)}},directives:[C.NgClass,C.NgIf,C.NgTemplateOutlet,d._,d.Fj,d.JJ,d.On,C.NgForOf,d.EJ,d.YN,d.Kr,C.NgSwitch,C.NgSwitchCase,d.wV,d.K7,d.Wl,e],styles:["@charset \"UTF-8\";[_nghost-%COMP%]{display:block;width:100%}[_nghost-%COMP%]   .q-icon[_ngcontent-%COMP%]{font-style:normal;font-size:12px}[_nghost-%COMP%]   .q-remove-icon[_ngcontent-%COMP%]::before{content:'\u274c'}[_nghost-%COMP%]   .q-arrow-icon-button[_ngcontent-%COMP%]{float:left;margin:4px 6px 4px 0;-webkit-transform:rotate(90deg);transform:rotate(90deg);-webkit-transition:transform .25s linear;transition:transform .25s linear;cursor:pointer}[_nghost-%COMP%]   .q-arrow-icon-button.q-collapsed[_ngcontent-%COMP%]{-webkit-transform:rotate(0);transform:rotate(0)}[_nghost-%COMP%]   .q-arrow-icon[_ngcontent-%COMP%]::before{content:'\u25b6'}[_nghost-%COMP%]   .q-add-icon[_ngcontent-%COMP%]{color:#555}[_nghost-%COMP%]   .q-add-icon[_ngcontent-%COMP%]::before{content:'\u2795'}[_nghost-%COMP%]   .q-remove-button[_ngcontent-%COMP%]{color:#b3415d;width:31px}[_nghost-%COMP%]   .q-button-group[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-switch-group[_ngcontent-%COMP%]{font-family:\"Lucida Grande\",Tahoma,Verdana,sans-serif;overflow:hidden}[_nghost-%COMP%]   .q-right-align[_ngcontent-%COMP%]{float:right}[_nghost-%COMP%]   .q-button[_ngcontent-%COMP%]{margin-left:8px;padding:0 8px;background-color:#fff}[_nghost-%COMP%]   .q-button[_ngcontent-%COMP%]:disabled{display:none}[_nghost-%COMP%]   .q-control-size[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;padding-right:10px}[_nghost-%COMP%]   .q-entity-control[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-field-control[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-input-control[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-operator-control[_ngcontent-%COMP%]{display:inline-block;padding:5px 8px;color:#555;background-color:#fff;background-image:none;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;width:auto}[_nghost-%COMP%]   .q-entity-control[_ngcontent-%COMP%]:disabled, [_nghost-%COMP%]   .q-field-control[_ngcontent-%COMP%]:disabled, [_nghost-%COMP%]   .q-input-control[_ngcontent-%COMP%]:disabled, [_nghost-%COMP%]   .q-operator-control[_ngcontent-%COMP%]:disabled{border-color:transparent}[_nghost-%COMP%]   .q-entity-control[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-field-control[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-input-control[_ngcontent-%COMP%]:not([type=checkbox]), [_nghost-%COMP%]   .q-operator-control[_ngcontent-%COMP%]{min-height:32px;-webkit-appearance:none}[_nghost-%COMP%]   .q-button[_ngcontent-%COMP%], [_nghost-%COMP%]   .q-switch-label[_ngcontent-%COMP%]{float:left;margin-bottom:0;font-size:14px;line-height:30px;font-weight:400;text-align:center;text-shadow:none;border:1px solid rgba(0,0,0,.2);box-sizing:border-box}[_nghost-%COMP%]   .q-button[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .q-switch-label[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#f0f0f0}[_nghost-%COMP%]   .q-switch-label[_ngcontent-%COMP%]{background-color:#e4e4e4;padding:0 8px}[_nghost-%COMP%]   .q-switch-radio[_ngcontent-%COMP%]{position:absolute;clip:rect(0,0,0,0);height:1px;width:1px;border:0;overflow:hidden}[_nghost-%COMP%]   .q-switch-radio[_ngcontent-%COMP%]:checked + .q-switch-label[_ngcontent-%COMP%]{border:1px solid #619ed7;background:#fff;color:#3176b3}[_nghost-%COMP%]   .q-switch-radio[_ngcontent-%COMP%]:disabled + .q-switch-label[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .q-switch-radio[_ngcontent-%COMP%]:checked:disabled + .q-switch-label[_ngcontent-%COMP%]{display:initial;color:initial;cursor:default;border-color:transparent}[_nghost-%COMP%]   .q-invalid-ruleset[_ngcontent-%COMP%]{border:1px solid rgba(179,65,93,.5)!important;background:rgba(179,65,93,.1)!important}[_nghost-%COMP%]   .q-empty-warning[_ngcontent-%COMP%]{color:#8d252e;text-align:center}[_nghost-%COMP%]   .q-ruleset[_ngcontent-%COMP%]{border:1px solid #ccc}[_nghost-%COMP%]   .q-rule[_ngcontent-%COMP%]{border:1px solid #ccc;background:#fff}[_nghost-%COMP%]   .q-transition[_ngcontent-%COMP%]{-webkit-transition:.1s ease-in-out;transition:.1s ease-in-out}[_nghost-%COMP%]   .q-tree-container[_ngcontent-%COMP%]{width:100%;overflow:hidden;-webkit-transition:max-height .25s ease-in;transition:max-height .25s ease-in}[_nghost-%COMP%]   .q-tree-container.q-collapsed[_ngcontent-%COMP%]{max-height:0!important}[_nghost-%COMP%]   .q-tree[_ngcontent-%COMP%]{list-style:none;margin:4px 0 2px}[_nghost-%COMP%]   .q-row[_ngcontent-%COMP%]{padding:6px 8px;margin-top:6px}[_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]::before{top:-5px;border-width:0 0 2px 2px}[_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]::after{border-width:0 0 0 2px;top:50%}[_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]::after, [_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]::before{content:'';left:-12px;border-color:#ccc;border-style:solid;width:9px;height:calc(50% + 6px);position:absolute}[_nghost-%COMP%]   .q-connector[_ngcontent-%COMP%]:last-child::after{content:none}[_nghost-%COMP%]   .q-inline-block-display[_ngcontent-%COMP%]{display:inline-block;vertical-align:top}"]}),e}(),hN=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[C.CommonModule,d.u5]]}),e}();function mN(e,n){if(1&e&&o.\u0275\u0275element(0,"div",3),2&e){const t=n.index,r=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngStyle",r.gridRenderer.getGridColumnStyle(t))}}function gN(e,n){if(1&e&&o.\u0275\u0275element(0,"div",4),2&e){const t=n.index,r=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngStyle",r.gridRenderer.getGridRowStyle(t))}}const Pb=["*"];function vN(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",8),o.\u0275\u0275listener("mousedown",function(s){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().resize.dragStartDelay(s)})("touchstart",function(s){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().resize.dragStartDelay(s)}),o.\u0275\u0275elementEnd()}}function yN(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",9),o.\u0275\u0275listener("mousedown",function(s){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().resize.dragStartDelay(s)})("touchstart",function(s){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().resize.dragStartDelay(s)}),o.\u0275\u0275elementEnd()}}function _N(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",10),o.\u0275\u0275listener("mousedown",function(s){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().resize.dragStartDelay(s)})("touchstart",function(s){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().resize.dragStartDelay(s)}),o.\u0275\u0275elementEnd()}}function bN(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",11),o.\u0275\u0275listener("mousedown",function(s){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().resize.dragStartDelay(s)})("touchstart",function(s){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().resize.dragStartDelay(s)}),o.\u0275\u0275elementEnd()}}function wN(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",12),o.\u0275\u0275listener("mousedown",function(s){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().resize.dragStartDelay(s)})("touchstart",function(s){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().resize.dragStartDelay(s)}),o.\u0275\u0275elementEnd()}}function CN(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",13),o.\u0275\u0275listener("mousedown",function(s){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().resize.dragStartDelay(s)})("touchstart",function(s){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().resize.dragStartDelay(s)}),o.\u0275\u0275elementEnd()}}function xN(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",14),o.\u0275\u0275listener("mousedown",function(s){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().resize.dragStartDelay(s)})("touchstart",function(s){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().resize.dragStartDelay(s)}),o.\u0275\u0275elementEnd()}}function SN(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",15),o.\u0275\u0275listener("mousedown",function(s){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().resize.dragStartDelay(s)})("touchstart",function(s){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().resize.dragStartDelay(s)}),o.\u0275\u0275elementEnd()}}var xn=(()=>{return(e=xn||(xn={})).Fit="fit",e.ScrollVertical="scrollVertical",e.ScrollHorizontal="scrollHorizontal",e.Fixed="fixed",e.VerticalFixed="verticalFixed",e.HorizontalFixed="horizontalFixed",xn;var e})(),sf=(()=>{return(e=sf||(sf={})).Always="always",e.OnDragAndResize="onDrag&Resize",e.None="none",sf;var e})(),Wn=(()=>{return(e=Wn||(Wn={})).None="none",e.CompactUp="compactUp",e.CompactLeft="compactLeft",e.CompactUpAndLeft="compactUp&Left",e.CompactLeftAndUp="compactLeft&Up",e.CompactRight="compactRight",e.CompactUpAndRight="compactUp&Right",e.CompactRightAndUp="compactRight&Up",e.CompactDown="compactDown",e.CompactDownAndLeft="compactDown&Left",e.CompactLeftAndDown="compactLeft&Down",e.CompactDownAndRight="compactDown&Right",e.CompactRightAndDown="compactRight&Down",Wn;var e})(),qr=(()=>{return(e=qr||(qr={})).LTR="ltr",e.RTL="rtl",qr;var e})();class EN{constructor(n){this.gridster=n}destroy(){delete this.gridster}checkCompact(){this.gridster.$options.compactType!==Wn.None&&(this.gridster.$options.compactType===Wn.CompactUp?this.checkCompactMovement("y",-1):this.gridster.$options.compactType===Wn.CompactLeft?this.checkCompactMovement("x",-1):this.gridster.$options.compactType===Wn.CompactUpAndLeft?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===Wn.CompactLeftAndUp?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===Wn.CompactRight?this.checkCompactMovement("x",1):this.gridster.$options.compactType===Wn.CompactUpAndRight?(this.checkCompactMovement("y",-1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===Wn.CompactRightAndUp?(this.checkCompactMovement("x",1),this.checkCompactMovement("y",-1)):this.gridster.$options.compactType===Wn.CompactDown?this.checkCompactMovement("y",1):this.gridster.$options.compactType===Wn.CompactDownAndLeft?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",-1)):this.gridster.$options.compactType===Wn.CompactDownAndRight?(this.checkCompactMovement("y",1),this.checkCompactMovement("x",1)):this.gridster.$options.compactType===Wn.CompactLeftAndDown?(this.checkCompactMovement("x",-1),this.checkCompactMovement("y",1)):this.gridster.$options.compactType===Wn.CompactRightAndDown&&(this.checkCompactMovement("x",1),this.checkCompactMovement("y",1)))}checkCompactItem(n){this.gridster.$options.compactType!==Wn.None&&(this.gridster.$options.compactType===Wn.CompactUp?this.moveTillCollision(n,"y",-1):this.gridster.$options.compactType===Wn.CompactLeft?this.moveTillCollision(n,"x",-1):this.gridster.$options.compactType===Wn.CompactUpAndLeft?(this.moveTillCollision(n,"y",-1),this.moveTillCollision(n,"x",-1)):this.gridster.$options.compactType===Wn.CompactLeftAndUp?(this.moveTillCollision(n,"x",-1),this.moveTillCollision(n,"y",-1)):this.gridster.$options.compactType===Wn.CompactUpAndRight?(this.moveTillCollision(n,"y",-1),this.moveTillCollision(n,"x",1)):this.gridster.$options.compactType===Wn.CompactDown?this.moveTillCollision(n,"y",1):this.gridster.$options.compactType===Wn.CompactDownAndLeft?(this.moveTillCollision(n,"y",1),this.moveTillCollision(n,"x",-1)):this.gridster.$options.compactType===Wn.CompactLeftAndDown?(this.moveTillCollision(n,"x",-1),this.moveTillCollision(n,"y",1)):this.gridster.$options.compactType===Wn.CompactDownAndRight?(this.moveTillCollision(n,"y",1),this.moveTillCollision(n,"x",1)):this.gridster.$options.compactType===Wn.CompactRightAndDown&&(this.moveTillCollision(n,"x",1),this.moveTillCollision(n,"y",1)))}checkCompactMovement(n,t){let r=!1;this.gridster.grid.forEach(s=>{!1!==s.$item.compactEnabled&&this.moveTillCollision(s.$item,n,t)&&(r=!0,s.item[n]=s.$item[n],s.itemChanged())}),r&&this.checkCompact()}moveTillCollision(n,t,r){return n[t]+=r,this.gridster.checkCollision(n)?(n[t]-=r,!1):(this.moveTillCollision(n,t,r),!0)}}const AN={gridType:xn.Fit,scale:1,fixedColWidth:250,fixedRowHeight:250,keepFixedHeightInMobile:!1,keepFixedWidthInMobile:!1,setGridSize:!1,compactType:Wn.None,mobileBreakpoint:640,allowMultiLayer:!1,defaultLayerIndex:0,maxLayerIndex:2,baseLayerIndex:1,minCols:1,maxCols:100,minRows:1,maxRows:100,defaultItemCols:1,defaultItemRows:1,maxItemCols:50,maxItemRows:50,minItemCols:1,minItemRows:1,minItemArea:1,maxItemArea:2500,addEmptyRowsCount:0,rowHeightRatio:1,margin:10,outerMargin:!0,outerMarginTop:null,outerMarginRight:null,outerMarginBottom:null,outerMarginLeft:null,useTransformPositioning:!0,scrollSensitivity:10,scrollSpeed:20,initCallback:void 0,destroyCallback:void 0,gridSizeChangedCallback:void 0,itemChangeCallback:void 0,itemResizeCallback:void 0,itemInitCallback:void 0,itemRemovedCallback:void 0,itemValidateCallback:void 0,enableEmptyCellClick:!1,enableEmptyCellContextMenu:!1,enableEmptyCellDrop:!1,enableEmptyCellDrag:!1,enableOccupiedCellDrop:!1,emptyCellClickCallback:void 0,emptyCellContextMenuCallback:void 0,emptyCellDropCallback:void 0,emptyCellDragCallback:void 0,emptyCellDragMaxCols:50,emptyCellDragMaxRows:50,ignoreMarginInRow:!1,draggable:{delayStart:0,enabled:!1,ignoreContentClass:"gridster-item-content",ignoreContent:!1,dragHandleClass:"drag-handler",stop:void 0,start:void 0,dropOverItems:!1,dropOverItemsCallback:void 0},resizable:{delayStart:0,enabled:!1,handles:{s:!0,e:!0,n:!0,w:!0,se:!0,ne:!0,sw:!0,nw:!0},stop:void 0,start:void 0},swap:!0,swapWhileDragging:!1,pushItems:!1,disablePushOnDrag:!1,disablePushOnResize:!1,pushDirections:{north:!0,east:!0,south:!0,west:!0},pushResizeItems:!1,displayGrid:sf.OnDragAndResize,disableWindowResize:!1,disableWarnings:!1,scrollToNewItems:!1,disableScrollHorizontal:!1,disableScrollVertical:!1,disableAutoPositionOnConflict:!1,dirType:qr.LTR};class xr{static merge(n,t,r){for(const s in t)void 0!==t[s]&&r.hasOwnProperty(s)&&(n[s]="object"==typeof t[s]?xr.merge(n[s],t[s],r[s]):t[s]);return n}static debounce(n,t){let r;return function(){const s=this,a=arguments,l=()=>{r=void 0,n.apply(s,a)};clearTimeout(r),r=setTimeout(l,t)}}static checkTouchEvent(n){void 0===n.clientX&&n.touches&&(n.touches&&n.touches.length?(n.clientX=n.touches[0].clientX,n.clientY=n.touches[0].clientY):n.changedTouches&&n.changedTouches.length&&(n.clientX=n.changedTouches[0].clientX,n.clientY=n.changedTouches[0].clientY))}static checkContentClassForEvent(n,t){if(n.$options.draggable.ignoreContent){if(!xr.checkDragHandleClass(t.target,t.currentTarget,n.$options.draggable.dragHandleClass,n.$options.draggable.ignoreContentClass))return!0}else if(xr.checkContentClass(t.target,t.currentTarget,n.$options.draggable.ignoreContentClass))return!0;return!1}static checkContentClassForEmptyCellClickEvent(n,t){return xr.checkContentClass(t.target,t.currentTarget,n.$options.draggable.ignoreContentClass)||xr.checkContentClass(t.target,t.currentTarget,n.$options.draggable.dragHandleClass)}static checkDragHandleClass(n,t,r,s){if(!n||n===t)return!1;if(n.hasAttribute("class")){const a=n.getAttribute("class").split(" ");if(a.indexOf(r)>-1)return!0;if(a.indexOf(s)>-1)return!1}return xr.checkDragHandleClass(n.parentNode,t,r,s)}static checkContentClass(n,t,r){return!(!n||n===t)&&(!!(n.hasAttribute("class")&&n.getAttribute("class").split(" ").indexOf(r)>-1)||xr.checkContentClass(n.parentNode,t,r))}static compareItems(n,t){return n.y>t.y?-1:n.y<t.y?1:n.x>t.x?-1:1}}class PN{constructor(n){this.gridster=n}destroy(){delete this.initialItem,delete this.gridster.movingItem,this.gridster.previewStyle&&this.gridster.previewStyle(),delete this.gridster,this.emptyCellExit&&(this.emptyCellExit(),this.emptyCellExit=null)}updateOptions(){this.gridster.$options.enableEmptyCellClick&&!this.emptyCellClick&&this.gridster.options.emptyCellClickCallback?(this.emptyCellClick=this.gridster.renderer.listen(this.gridster.el,"click",this.emptyCellClickCb.bind(this)),this.emptyCellClickTouch=this.gridster.renderer.listen(this.gridster.el,"touchend",this.emptyCellClickCb.bind(this))):!this.gridster.$options.enableEmptyCellClick&&this.emptyCellClick&&this.emptyCellClickTouch&&(this.emptyCellClick(),this.emptyCellClickTouch(),this.emptyCellClick=null,this.emptyCellClickTouch=null),this.gridster.$options.enableEmptyCellContextMenu&&!this.emptyCellContextMenu&&this.gridster.options.emptyCellContextMenuCallback?this.emptyCellContextMenu=this.gridster.renderer.listen(this.gridster.el,"contextmenu",this.emptyCellContextMenuCb.bind(this)):!this.gridster.$options.enableEmptyCellContextMenu&&this.emptyCellContextMenu&&(this.emptyCellContextMenu(),this.emptyCellContextMenu=null),this.gridster.$options.enableEmptyCellDrop&&!this.emptyCellDrop&&this.gridster.options.emptyCellDropCallback?(this.emptyCellDrop=this.gridster.renderer.listen(this.gridster.el,"drop",this.emptyCellDragDrop.bind(this)),this.gridster.zone.runOutsideAngular(()=>{this.emptyCellMove=this.gridster.renderer.listen(this.gridster.el,"dragover",this.emptyCellDragOver.bind(this))}),this.emptyCellExit=this.gridster.renderer.listen("document","dragend",()=>{this.gridster.movingItem=null,this.gridster.previewStyle()})):!this.gridster.$options.enableEmptyCellDrop&&this.emptyCellDrop&&this.emptyCellMove&&this.emptyCellExit&&(this.emptyCellDrop(),this.emptyCellMove(),this.emptyCellExit(),this.emptyCellMove=null,this.emptyCellDrop=null,this.emptyCellExit=null),this.gridster.$options.enableEmptyCellDrag&&!this.emptyCellDrag&&this.gridster.options.emptyCellDragCallback?(this.emptyCellDrag=this.gridster.renderer.listen(this.gridster.el,"mousedown",this.emptyCellMouseDown.bind(this)),this.emptyCellDragTouch=this.gridster.renderer.listen(this.gridster.el,"touchstart",this.emptyCellMouseDown.bind(this))):!this.gridster.$options.enableEmptyCellDrag&&this.emptyCellDrag&&this.emptyCellDragTouch&&(this.emptyCellDrag(),this.emptyCellDragTouch(),this.emptyCellDrag=null,this.emptyCellDragTouch=null)}emptyCellClickCb(n){if(!this.gridster||this.gridster.movingItem||xr.checkContentClassForEmptyCellClickEvent(this.gridster,n))return;const t=this.getValidItemFromEvent(n);!t||(this.gridster.options.emptyCellClickCallback&&this.gridster.options.emptyCellClickCallback(n,t),this.gridster.cdRef.markForCheck())}emptyCellContextMenuCb(n){if(this.gridster.movingItem||xr.checkContentClassForEmptyCellClickEvent(this.gridster,n))return;n.preventDefault(),n.stopPropagation();const t=this.getValidItemFromEvent(n);!t||(this.gridster.options.emptyCellContextMenuCallback&&this.gridster.options.emptyCellContextMenuCallback(n,t),this.gridster.cdRef.markForCheck())}emptyCellDragDrop(n){const t=this.getValidItemFromEvent(n);!t||(this.gridster.options.emptyCellDropCallback&&this.gridster.options.emptyCellDropCallback(n,t),this.gridster.cdRef.markForCheck())}emptyCellDragOver(n){n.preventDefault(),n.stopPropagation();const t=this.getValidItemFromEvent(n);t?(n.dataTransfer&&(n.dataTransfer.dropEffect="move"),this.gridster.movingItem=t):(n.dataTransfer&&(n.dataTransfer.dropEffect="none"),this.gridster.movingItem=null),this.gridster.previewStyle()}emptyCellMouseDown(n){if(xr.checkContentClassForEmptyCellClickEvent(this.gridster,n))return;n.preventDefault(),n.stopPropagation();const t=this.getValidItemFromEvent(n);!t||1!==n.buttons&&!(n instanceof TouchEvent)||(this.initialItem=t,this.gridster.movingItem=t,this.gridster.previewStyle(),this.gridster.zone.runOutsideAngular(()=>{this.emptyCellMMove=this.gridster.renderer.listen("window","mousemove",this.emptyCellMouseMove.bind(this)),this.emptyCellMMoveTouch=this.gridster.renderer.listen("window","touchmove",this.emptyCellMouseMove.bind(this))}),this.emptyCellUp=this.gridster.renderer.listen("window","mouseup",this.emptyCellMouseUp.bind(this)),this.emptyCellUpTouch=this.gridster.renderer.listen("window","touchend",this.emptyCellMouseUp.bind(this)))}emptyCellMouseMove(n){n.preventDefault(),n.stopPropagation();const t=this.getValidItemFromEvent(n,this.initialItem);!t||(this.gridster.movingItem=t,this.gridster.previewStyle())}emptyCellMouseUp(n){this.emptyCellMMove(),this.emptyCellMMoveTouch(),this.emptyCellUp(),this.emptyCellUpTouch();const t=this.getValidItemFromEvent(n,this.initialItem);t&&(this.gridster.movingItem=t),this.gridster.options.emptyCellDragCallback&&this.gridster.movingItem&&this.gridster.options.emptyCellDragCallback(n,this.gridster.movingItem),setTimeout(()=>{this.initialItem=null,this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle())}),this.gridster.cdRef.markForCheck()}getPixelsX(n,t){const r=this.gridster.options.scale;return r?(n.clientX-t.left)/r+this.gridster.el.scrollLeft-this.gridster.gridRenderer.getLeftMargin():n.clientX+this.gridster.el.scrollLeft-t.left-this.gridster.gridRenderer.getLeftMargin()}getPixelsY(n,t){const r=this.gridster.options.scale;return r?(n.clientY-t.top)/r+this.gridster.el.scrollTop-this.gridster.gridRenderer.getTopMargin():n.clientY+this.gridster.el.scrollTop-t.top-this.gridster.gridRenderer.getTopMargin()}getValidItemFromEvent(n,t){n.preventDefault(),n.stopPropagation(),xr.checkTouchEvent(n);const r=this.gridster.el.getBoundingClientRect(),s=this.getPixelsX(n,r),a=this.getPixelsY(n,r),l={x:this.gridster.pixelsToPositionX(s,Math.floor,!0),y:this.gridster.pixelsToPositionY(a,Math.floor,!0),cols:this.gridster.$options.defaultItemCols,rows:this.gridster.$options.defaultItemRows};if(t&&(l.cols=Math.min(Math.abs(t.x-l.x)+1,this.gridster.$options.emptyCellDragMaxCols),l.rows=Math.min(Math.abs(t.y-l.y)+1,this.gridster.$options.emptyCellDragMaxRows),t.x<l.x?l.x=t.x:t.x-l.x>this.gridster.$options.emptyCellDragMaxCols-1&&(l.x=this.gridster.movingItem?this.gridster.movingItem.x:0),t.y<l.y?l.y=t.y:t.y-l.y>this.gridster.$options.emptyCellDragMaxRows-1&&(l.y=this.gridster.movingItem?this.gridster.movingItem.y:0)),this.gridster.$options.enableOccupiedCellDrop||!this.gridster.checkCollision(l))return l}}class IN{constructor(n){this.gridster=n}destroy(){delete this.gridster}updateItem(n,t,r){if(this.gridster.mobile)this.clearCellPosition(r,n),r.setStyle(n,"height",this.gridster.$options.keepFixedHeightInMobile?(t.rows-1)*this.gridster.$options.margin+t.rows*this.gridster.$options.fixedRowHeight+"px":t.rows*this.gridster.curWidth/t.cols+"px"),r.setStyle(n,"width",this.gridster.$options.keepFixedWidthInMobile?this.gridster.$options.fixedColWidth+"px":""),r.setStyle(n,"margin-bottom",this.gridster.$options.margin+"px"),r.setStyle(n,qr.LTR?"margin-right":"margin-left","");else{const s=Math.round(this.gridster.curColWidth*t.x),a=Math.round(this.gridster.curRowHeight*t.y),l=this.gridster.curColWidth*t.cols-this.gridster.$options.margin,u=this.gridster.curRowHeight*t.rows-this.gridster.$options.margin;this.setCellPosition(r,n,s,a),r.setStyle(n,"width",l+"px"),r.setStyle(n,"height",u+"px");let p=null,h=null;this.gridster.$options.outerMargin&&(this.gridster.rows===t.rows+t.y&&(p=null!==this.gridster.$options.outerMarginBottom?this.gridster.$options.outerMarginBottom+"px":this.gridster.$options.margin+"px"),this.gridster.columns===t.cols+t.x&&(h=null!==this.gridster.$options.outerMarginBottom?this.gridster.$options.outerMarginRight+"px":this.gridster.$options.margin+"px")),r.setStyle(n,"margin-bottom",p),r.setStyle(n,qr.LTR?"margin-right":"margin-left",h)}}updateGridster(){let n="",t="",r="",s="";if(this.gridster.$options.gridType===xn.Fit)n=xn.Fit,t=xn.ScrollVertical,r=xn.ScrollHorizontal,s=xn.Fixed;else if(this.gridster.$options.gridType===xn.ScrollVertical)this.gridster.curRowHeight=this.gridster.curColWidth*this.gridster.$options.rowHeightRatio,n=xn.ScrollVertical,t=xn.Fit,r=xn.ScrollHorizontal,s=xn.Fixed;else if(this.gridster.$options.gridType===xn.ScrollHorizontal){const a=this.gridster.$options.rowHeightRatio;this.gridster.curColWidth=this.gridster.curRowHeight*(a>=1?a:a+1),n=xn.ScrollHorizontal,t=xn.Fit,r=xn.ScrollVertical,s=xn.Fixed}else this.gridster.$options.gridType===xn.Fixed?(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),n=xn.Fixed,t=xn.Fit,r=xn.ScrollVertical,s=xn.ScrollHorizontal):this.gridster.$options.gridType===xn.VerticalFixed?(this.gridster.curRowHeight=this.gridster.$options.fixedRowHeight+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),n=xn.ScrollVertical,t=xn.Fit,r=xn.ScrollHorizontal,s=xn.Fixed):this.gridster.$options.gridType===xn.HorizontalFixed&&(this.gridster.curColWidth=this.gridster.$options.fixedColWidth+(this.gridster.$options.ignoreMarginInRow?0:this.gridster.$options.margin),n=xn.ScrollHorizontal,t=xn.Fit,r=xn.ScrollVertical,s=xn.Fixed);this.gridster.mobile||this.gridster.$options.setGridSize&&this.gridster.$options.gridType!==xn.Fit?this.gridster.renderer.removeClass(this.gridster.el,n):this.gridster.renderer.addClass(this.gridster.el,n),this.gridster.renderer.removeClass(this.gridster.el,t),this.gridster.renderer.removeClass(this.gridster.el,r),this.gridster.renderer.removeClass(this.gridster.el,s)}getGridColumnStyle(n){return{...this.getLeftPosition(this.gridster.curColWidth*n),width:this.gridster.curColWidth-this.gridster.$options.margin+"px",height:this.gridster.gridRows.length*this.gridster.curRowHeight-this.gridster.$options.margin+"px"}}getGridRowStyle(n){return{...this.getTopPosition(this.gridster.curRowHeight*n),width:this.gridster.gridColumns.length*this.gridster.curColWidth-this.gridster.$options.margin+"px",height:this.gridster.curRowHeight-this.gridster.$options.margin+"px"}}getLeftPosition(n){const t=this.gridster.$options.dirType===qr.RTL?-n:n;return this.gridster.$options.useTransformPositioning?{transform:"translateX("+t+"px)"}:{left:this.getLeftMargin()+t+"px"}}getTopPosition(n){return this.gridster.$options.useTransformPositioning?{transform:"translateY("+n+"px)"}:{top:this.getTopMargin()+n+"px"}}clearCellPosition(n,t){this.gridster.$options.useTransformPositioning?n.setStyle(t,"transform",""):(n.setStyle(t,"top",""),n.setStyle(t,"left",""))}setCellPosition(n,t,r,s){const a=this.gridster.$options.dirType===qr.RTL?-r:r;this.gridster.$options.useTransformPositioning?n.setStyle(t,"transform","translate3d("+a+"px, "+s+"px, 0)"):(n.setStyle(t,"left",this.getLeftMargin()+a+"px"),n.setStyle(t,"top",this.getTopMargin()+s+"px"))}getLeftMargin(){return this.gridster.$options.outerMargin?null!==this.gridster.$options.outerMarginLeft?this.gridster.$options.outerMarginLeft:this.gridster.$options.margin:0}getTopMargin(){return this.gridster.$options.outerMargin?null!==this.gridster.$options.outerMarginTop?this.gridster.$options.outerMarginTop:this.gridster.$options.margin:0}}let af,zl,ko,lf,ia,uf,cf,df,ff,TN=(()=>{class e{constructor(t,r){this.renderer=r,this.el=t.nativeElement}ngOnInit(){this.sub=this.previewStyle$.subscribe(t=>this.previewStyle(t))}ngOnDestroy(){this.sub.unsubscribe(),delete this.el}previewStyle(t){t?(this.renderer.setStyle(this.el,"display","block"),this.gridRenderer.updateItem(this.el,t,this.renderer)):this.renderer.setStyle(this.el,"display","")}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(o.Renderer2))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["gridster-preview"]],inputs:{previewStyle$:"previewStyle$",gridRenderer:"gridRenderer"},decls:0,vars:0,template:function(t,r){},styles:["gridster-preview{position:absolute;display:none;background:rgba(0,0,0,.15)}\n"],encapsulation:2}),e})(),rv=(()=>{class e{constructor(t,r,s,a){this.renderer=r,this.cdRef=s,this.zone=a,this.columns=0,this.rows=0,this.gridColumns=[],this.gridRows=[],this.previewStyle$=new o.EventEmitter,this.el=t.nativeElement,this.$options=JSON.parse(JSON.stringify(AN)),this.calculateLayoutDebounce=xr.debounce(this.calculateLayout.bind(this),0),this.mobile=!1,this.curWidth=0,this.curHeight=0,this.grid=[],this.curColWidth=0,this.curRowHeight=0,this.dragInProgress=!1,this.emptyCell=new PN(this),this.compact=new EN(this),this.gridRenderer=new IN(this)}static checkCollisionTwoItemsForSwaping(t,r){return t.x+(1===t.cols?0:1)<r.x+r.cols&&t.x+t.cols>r.x+(1===r.cols?0:1)&&t.y+(1===t.rows?0:1)<r.y+r.rows&&t.y+t.rows>r.y+(1===r.rows?0:1)}checkCollisionTwoItems(t,r){if(!(t.x<r.x+r.cols&&t.x+t.cols>r.x&&t.y<r.y+r.rows&&t.y+t.rows>r.y))return!1;if(!this.$options.allowMultiLayer)return!0;const a=this.$options.defaultLayerIndex;return(void 0===t.layerIndex?a:t.layerIndex)===(void 0===r.layerIndex?a:r.layerIndex)}ngOnInit(){this.options.initCallback&&this.options.initCallback(this)}ngOnChanges(t){t.options&&(this.setOptions(),this.options.api={optionsChanged:this.optionsChanged.bind(this),resize:this.onResize.bind(this),getNextPossiblePosition:this.getNextPossiblePosition.bind(this),getFirstPossiblePosition:this.getFirstPossiblePosition.bind(this),getLastPossiblePosition:this.getLastPossiblePosition.bind(this),getItemComponent:r=>this.getItemComponent(r)},this.columns=this.$options.minCols,this.rows=this.$options.minRows+this.$options.addEmptyRowsCount,this.setGridSize(),this.calculateLayout())}resize(){let t,r;"fit"!==this.$options.gridType||this.mobile?(r=this.el.clientWidth,t=this.el.clientHeight):(r=this.el.offsetWidth,t=this.el.offsetHeight),(r!==this.curWidth||t!==this.curHeight)&&this.checkIfToResize()&&this.onResize()}setOptions(){this.$options=xr.merge(this.$options,this.options,this.$options),this.$options.disableWindowResize||this.windowResize?this.$options.disableWindowResize&&this.windowResize&&(this.windowResize(),this.windowResize=null):this.windowResize=this.renderer.listen("window","resize",this.onResize.bind(this)),this.emptyCell.updateOptions()}optionsChanged(){this.setOptions();let r,t=this.grid.length-1;for(;t>=0;t--)r=this.grid[t],r.updateOptions();this.calculateLayout()}ngOnDestroy(){this.previewStyle$.complete(),this.windowResize&&this.windowResize(),this.options&&this.options.destroyCallback&&this.options.destroyCallback(this),this.options&&this.options.api&&(this.options.api.resize=void 0,this.options.api.optionsChanged=void 0,this.options.api.getNextPossiblePosition=void 0,this.options.api=void 0),this.emptyCell.destroy(),delete this.emptyCell,this.compact.destroy(),delete this.compact}onResize(){this.el.clientWidth&&(this.options.setGridSize&&(this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.setGridSize(),this.calculateLayout())}checkIfToResize(){const t=this.el.clientWidth,r=this.el.offsetWidth,s=this.el.scrollWidth,a=this.el.clientHeight,l=this.el.offsetHeight,u=this.el.scrollHeight;return!(t<r&&u>l&&u-l<r-t||a<l&&s>r&&s-r<l-a)}setGridSize(){const t=this.el;let r,s;this.$options.setGridSize||this.$options.gridType===xn.Fit&&!this.mobile?(r=t.offsetWidth,s=t.offsetHeight):(r=t.clientWidth,s=t.clientHeight),this.curWidth=r,this.curHeight=s}setGridDimensions(){this.setGridSize(),!this.mobile&&this.$options.mobileBreakpoint>this.curWidth?(this.mobile=!this.mobile,this.renderer.addClass(this.el,"mobile")):this.mobile&&this.$options.mobileBreakpoint<this.curWidth&&(this.mobile=!this.mobile,this.renderer.removeClass(this.el,"mobile"));let a,t=this.$options.minRows,r=this.$options.minCols,s=this.grid.length-1;for(;s>=0;s--)a=this.grid[s],a.notPlaced||(t=Math.max(t,a.$item.y+a.$item.rows),r=Math.max(r,a.$item.x+a.$item.cols));t+=this.$options.addEmptyRowsCount,(this.columns!==r||this.rows!==t)&&(this.columns=r,this.rows=t,this.options.gridSizeChangedCallback&&this.options.gridSizeChangedCallback(this))}calculateLayout(){if(this.compact&&this.compact.checkCompact(),this.setGridDimensions(),this.$options.outerMargin){let s=-this.$options.margin;null!==this.$options.outerMarginLeft?(s+=this.$options.outerMarginLeft,this.renderer.setStyle(this.el,"padding-left",this.$options.outerMarginLeft+"px")):(s+=this.$options.margin,this.renderer.setStyle(this.el,"padding-left",this.$options.margin+"px")),null!==this.$options.outerMarginRight?(s+=this.$options.outerMarginRight,this.renderer.setStyle(this.el,"padding-right",this.$options.outerMarginRight+"px")):(s+=this.$options.margin,this.renderer.setStyle(this.el,"padding-right",this.$options.margin+"px")),this.curColWidth=(this.curWidth-s)/this.columns;let a=-this.$options.margin;null!==this.$options.outerMarginTop?(a+=this.$options.outerMarginTop,this.renderer.setStyle(this.el,"padding-top",this.$options.outerMarginTop+"px")):(a+=this.$options.margin,this.renderer.setStyle(this.el,"padding-top",this.$options.margin+"px")),null!==this.$options.outerMarginBottom?(a+=this.$options.outerMarginBottom,this.renderer.setStyle(this.el,"padding-bottom",this.$options.outerMarginBottom+"px")):(a+=this.$options.margin,this.renderer.setStyle(this.el,"padding-bottom",this.$options.margin+"px")),this.curRowHeight=(this.curHeight-a)/this.rows*this.$options.rowHeightRatio}else this.curColWidth=(this.curWidth+this.$options.margin)/this.columns,this.curRowHeight=(this.curHeight+this.$options.margin)/this.rows*this.$options.rowHeightRatio,this.renderer.setStyle(this.el,"padding-left","0px"),this.renderer.setStyle(this.el,"padding-right","0px"),this.renderer.setStyle(this.el,"padding-top","0px"),this.renderer.setStyle(this.el,"padding-bottom","0px");this.gridRenderer.updateGridster(),this.$options.setGridSize?(this.renderer.addClass(this.el,"gridSize"),this.mobile||(this.renderer.setStyle(this.el,"width",this.columns*this.curColWidth+this.$options.margin+"px"),this.renderer.setStyle(this.el,"height",this.rows*this.curRowHeight+this.$options.margin+"px"))):(this.renderer.removeClass(this.el,"gridSize"),this.renderer.setStyle(this.el,"width",""),this.renderer.setStyle(this.el,"height","")),this.updateGrid();let r,t=this.grid.length-1;for(;t>=0;t--)r=this.grid[t],r.setSize(),r.drag.toggle(),r.resize.toggle();setTimeout(this.resize.bind(this),100)}updateGrid(){"always"!==this.$options.displayGrid||this.mobile?"onDrag&Resize"===this.$options.displayGrid&&this.dragInProgress?this.renderer.addClass(this.el,"display-grid"):("none"===this.$options.displayGrid||!this.dragInProgress||this.mobile)&&this.renderer.removeClass(this.el,"display-grid"):this.renderer.addClass(this.el,"display-grid"),this.setGridDimensions(),this.gridColumns.length=e.getNewArrayLength(this.columns,this.curWidth,this.curColWidth),this.gridRows.length=e.getNewArrayLength(this.rows,this.curHeight,this.curRowHeight),this.cdRef.markForCheck()}addItem(t){void 0===t.$item.cols&&(t.$item.cols=this.$options.defaultItemCols,t.item.cols=t.$item.cols,t.itemChanged()),void 0===t.$item.rows&&(t.$item.rows=this.$options.defaultItemRows,t.item.rows=t.$item.rows,t.itemChanged()),-1===t.$item.x||-1===t.$item.y?this.autoPositionItem(t):this.checkCollision(t.$item)&&(this.$options.disableWarnings||(t.notPlaced=!0,console.warn("Can't be placed in the bounds of the dashboard, trying to auto position!/n"+JSON.stringify(t.item,["cols","rows","x","y"]))),this.$options.disableAutoPositionOnConflict?t.notPlaced=!0:this.autoPositionItem(t)),this.grid.push(t),this.calculateLayoutDebounce()}removeItem(t){this.grid.splice(this.grid.indexOf(t),1),this.calculateLayoutDebounce(),this.options.itemRemovedCallback&&this.options.itemRemovedCallback(t.item,t)}checkCollision(t){let r=!1;if(this.options.itemValidateCallback&&(r=!this.options.itemValidateCallback(t)),!r&&this.checkGridCollision(t)&&(r=!0),!r){const s=this.findItemWithItem(t);s&&(r=s)}return r}checkGridCollision(t){const ve=t.cols*t.rows;return!(t.y>-1&&t.x>-1&&t.cols+t.x<=this.$options.maxCols&&t.rows+t.y<=this.$options.maxRows&&t.cols<=(void 0===t.maxItemCols?this.$options.maxItemCols:t.maxItemCols)&&t.cols>=(void 0===t.minItemCols?this.$options.minItemCols:t.minItemCols)&&t.rows<=(void 0===t.maxItemRows?this.$options.maxItemRows:t.maxItemRows)&&t.rows>=(void 0===t.minItemRows?this.$options.minItemRows:t.minItemRows)&&(void 0===t.minItemArea?this.$options.minItemArea:t.minItemArea)<=ve&&(void 0===t.maxItemArea?this.$options.maxItemArea:t.maxItemArea)>=ve)}findItemWithItem(t){let s,r=0;for(;r<this.grid.length;r++)if(s=this.grid[r],s.$item!==t&&this.checkCollisionTwoItems(s.$item,t))return s;return!1}findItemsWithItem(t){const r=[];let a,s=0;for(;s<this.grid.length;s++)a=this.grid[s],a.$item!==t&&this.checkCollisionTwoItems(a.$item,t)&&r.push(a);return r}autoPositionItem(t){this.getNextPossiblePosition(t.$item)?(t.notPlaced=!1,t.item.x=t.$item.x,t.item.y=t.$item.y,t.itemChanged()):(t.notPlaced=!0,this.$options.disableWarnings||console.warn("Can't be placed in the bounds of the dashboard!/n"+JSON.stringify(t.item,["cols","rows","x","y"])))}getNextPossiblePosition(t,r={}){-1===t.cols&&(t.cols=this.$options.defaultItemCols),-1===t.rows&&(t.rows=this.$options.defaultItemRows),this.setGridDimensions();let a,s=r.y||0;for(;s<this.rows;s++)for(t.y=s,a=r.x||0;a<this.columns;a++)if(t.x=a,!this.checkCollision(t))return!0;const l=this.$options.maxRows>=this.rows+t.rows;return this.rows<=this.columns&&l||!(this.$options.maxCols>=this.columns+t.cols)?!!l&&(t.y=this.rows,t.x=0,!0):(t.x=this.columns,t.y=0,!0)}getFirstPossiblePosition(t){const r=Object.assign({},t);return this.getNextPossiblePosition(r),r}getLastPossiblePosition(t){let r={y:0,x:0};r=this.grid.reduce((a,l)=>{const u={y:l.$item.y+l.$item.rows-1,x:l.$item.x+l.$item.cols-1};return 1===xr.compareItems(a,u)?u:a},r);const s=Object.assign({},t);return this.getNextPossiblePosition(s,r),s}pixelsToPositionX(t,r,s){const a=r(t/this.curColWidth);return s?a:Math.max(a,0)}pixelsToPositionY(t,r,s){const a=r(t/this.curRowHeight);return s?a:Math.max(a,0)}positionXToPixels(t){return t*this.curColWidth}positionYToPixels(t){return t*this.curRowHeight}getItemComponent(t){return this.grid.find(r=>r.item===t)}checkCollisionForSwaping(t){let r=!1;if(this.options.itemValidateCallback&&(r=!this.options.itemValidateCallback(t)),!r&&this.checkGridCollision(t)&&(r=!0),!r){const s=this.findItemWithItemForSwapping(t);s&&(r=s)}return r}findItemWithItemForSwapping(t){let s,r=this.grid.length-1;for(;r>-1;r--)if(s=this.grid[r],s.$item!==t&&e.checkCollisionTwoItemsForSwaping(s.$item,t))return s;return!1}previewStyle(t=!1){this.movingItem?(this.compact&&t&&this.compact.checkCompactItem(this.movingItem),this.previewStyle$.next(this.movingItem)):this.previewStyle$.next(null)}static getNewArrayLength(t,r,s){const a=Math.max(t,Math.floor(r/s));return a<0?0:Number.isFinite(a)?Math.floor(a):0}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(o.Renderer2),o.\u0275\u0275directiveInject(o.ChangeDetectorRef),o.\u0275\u0275directiveInject(o.NgZone))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["gridster"]],inputs:{options:"options"},features:[o.\u0275\u0275NgOnChangesFeature],ngContentSelectors:Pb,decls:4,vars:4,consts:[["class","gridster-column",3,"ngStyle",4,"ngFor","ngForOf"],["class","gridster-row",3,"ngStyle",4,"ngFor","ngForOf"],[1,"gridster-preview",3,"gridRenderer","previewStyle$"],[1,"gridster-column",3,"ngStyle"],[1,"gridster-row",3,"ngStyle"]],template:function(t,r){1&t&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275template(0,mN,1,1,"div",0),o.\u0275\u0275template(1,gN,1,1,"div",1),o.\u0275\u0275projection(2),o.\u0275\u0275element(3,"gridster-preview",2)),2&t&&(o.\u0275\u0275property("ngForOf",r.gridColumns),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",r.gridRows),o.\u0275\u0275advance(2),o.\u0275\u0275property("gridRenderer",r.gridRenderer)("previewStyle$",r.previewStyle$))},directives:[TN,C.NgForOf,C.NgStyle],styles:["gridster{position:relative;box-sizing:border-box;background:grey;width:100%;height:100%;-webkit-user-select:none;user-select:none;display:block}gridster.fit{overflow-x:hidden;overflow-y:hidden}gridster.scrollVertical{overflow-x:hidden;overflow-y:auto}gridster.scrollHorizontal{overflow-x:auto;overflow-y:hidden}gridster.fixed{overflow:auto}gridster.mobile{overflow-x:hidden;overflow-y:auto}gridster.mobile gridster-item{position:relative}gridster.gridSize{height:initial;width:initial}gridster.gridSize.fit{height:100%;width:100%}gridster .gridster-column,gridster .gridster-row{position:absolute;display:none;transition:.3s;box-sizing:border-box}gridster.display-grid .gridster-column,gridster.display-grid .gridster-row{display:block}gridster .gridster-column{border-left:1px solid white;border-right:1px solid white}gridster .gridster-row{border-top:1px solid white;border-bottom:1px solid white}\n"],encapsulation:2}),e})();class Ib{constructor(n){this.iteration=0,this.pushedItems=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],this.pushedItemsPath=[],this.gridsterItem=n,this.gridster=n.gridster,this.tryPattern={fromEast:[this.tryWest,this.trySouth,this.tryNorth,this.tryEast],fromWest:[this.tryEast,this.trySouth,this.tryNorth,this.tryWest],fromNorth:[this.trySouth,this.tryEast,this.tryWest,this.tryNorth],fromSouth:[this.tryNorth,this.tryEast,this.tryWest,this.trySouth]},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}destroy(){delete this.gridster,delete this.gridsterItem}pushItems(n,t){if(this.gridster.$options.pushItems&&!t){this.pushedItemsOrder=[],this.iteration=0;const r=this.push(this.gridsterItem,n);return r||this.restoreTempItems(),this.pushedItemsOrder=[],this.pushedItemsTemp=[],this.pushedItemsTempPath=[],r}return!1}restoreTempItems(){let n=this.pushedItemsTemp.length-1;for(;n>-1;n--)this.removeFromTempPushed(this.pushedItemsTemp[n])}restoreItems(){let n=0;const t=this.pushedItems.length;let r;for(;n<t;n++)r=this.pushedItems[n],r.$item.x=r.item.x||0,r.$item.y=r.item.y||0,r.setSize();this.pushedItems=[],this.pushedItemsPath=[]}setPushedItems(){let n=0;const t=this.pushedItems.length;let r;for(;n<t;n++)r=this.pushedItems[n],r.checkItemChanges(r.$item,r.item);this.pushedItems=[],this.pushedItemsPath=[]}checkPushBack(){let n=this.pushedItems.length-1,t=!1;for(;n>-1;n--)this.checkPushedItem(this.pushedItems[n],n)&&(t=!0);t&&this.checkPushBack()}push(n,t){if(this.iteration>100)return console.warn("max iteration reached"),!1;if(this.gridster.checkGridCollision(n.$item)||""===t)return!1;const r=this.gridster.findItemsWithItem(n.$item),s=t===this.fromNorth||t===this.fromWest;r.sort((h,S)=>s?S.$item.y-h.$item.y||S.$item.x-h.$item.x:h.$item.y-S.$item.y||h.$item.x-S.$item.x);let l,a=0,u=!0;const p=[];for(;a<r.length;a++){if(l=r[a],l===this.gridsterItem)continue;if(!l.canBeDragged()){u=!1;break}const h=this.pushedItemsTemp.indexOf(l);if(h>-1&&this.pushedItemsTempPath[h].length>10){u=!1;break}if(this.tryPattern[t][0].call(this,l,n))this.pushedItemsOrder.push(l),p.push(l);else if(this.tryPattern[t][1].call(this,l,n))this.pushedItemsOrder.push(l),p.push(l);else if(this.tryPattern[t][2].call(this,l,n))this.pushedItemsOrder.push(l),p.push(l);else{if(!this.tryPattern[t][3].call(this,l,n)){u=!1;break}this.pushedItemsOrder.push(l),p.push(l)}}if(!u&&(a=this.pushedItemsOrder.lastIndexOf(p[0]),a>-1)){let h=this.pushedItemsOrder.length-1;for(;h>=a;h--)l=this.pushedItemsOrder[h],this.pushedItemsOrder.pop(),this.removeFromTempPushed(l),this.removeFromPushedItem(l)}return this.iteration++,u}trySouth(n,t){return!!this.gridster.$options.pushDirections.south&&(this.addToTempPushed(n),n.$item.y=t.$item.y+t.$item.rows,this.push(n,this.fromNorth)?(n.setSize(),this.addToPushed(n),!0):(this.removeFromTempPushed(n),!1))}tryNorth(n,t){return!!this.gridster.$options.pushDirections.north&&(this.addToTempPushed(n),n.$item.y=t.$item.y-n.$item.rows,this.push(n,this.fromSouth)?(n.setSize(),this.addToPushed(n),!0):(this.removeFromTempPushed(n),!1))}tryEast(n,t){return!!this.gridster.$options.pushDirections.east&&(this.addToTempPushed(n),n.$item.x=t.$item.x+t.$item.cols,this.push(n,this.fromWest)?(n.setSize(),this.addToPushed(n),!0):(this.removeFromTempPushed(n),!1))}tryWest(n,t){return!!this.gridster.$options.pushDirections.west&&(this.addToTempPushed(n),n.$item.x=t.$item.x-n.$item.cols,this.push(n,this.fromEast)?(n.setSize(),this.addToPushed(n),!0):(this.removeFromTempPushed(n),!1))}addToTempPushed(n){let t=this.pushedItemsTemp.indexOf(n);-1===t&&(t=this.pushedItemsTemp.push(n)-1,this.pushedItemsTempPath[t]=[]),this.pushedItemsTempPath[t].push({x:n.$item.x,y:n.$item.y})}removeFromTempPushed(n){const t=this.pushedItemsTemp.indexOf(n),r=this.pushedItemsTempPath[t].pop();!r||(n.$item.x=r.x,n.$item.y=r.y,n.setSize(),this.pushedItemsTempPath[t].length||(this.pushedItemsTemp.splice(t,1),this.pushedItemsTempPath.splice(t,1)))}addToPushed(n){if(this.pushedItems.indexOf(n)<0)this.pushedItems.push(n),this.pushedItemsPath.push([{x:n.item.x||0,y:n.item.y||0},{x:n.$item.x,y:n.$item.y}]);else{const t=this.pushedItems.indexOf(n);this.pushedItemsPath[t].push({x:n.$item.x,y:n.$item.y})}}removeFromPushed(n){n>-1&&(this.pushedItems.splice(n,1),this.pushedItemsPath.splice(n,1))}removeFromPushedItem(n){const t=this.pushedItems.indexOf(n);t>-1&&(this.pushedItemsPath[t].pop(),this.pushedItemsPath.length||(this.pushedItems.splice(t,1),this.pushedItemsPath.splice(t,1)))}checkPushedItem(n,t){const r=this.pushedItemsPath[t];let a,l,u,s=r.length-2,p=!1;for(;s>-1;s--)a=r[s],l=n.$item.x,u=n.$item.y,n.$item.x=a.x,n.$item.y=a.y,this.gridster.findItemWithItem(n.$item)?(n.$item.x=l,n.$item.y=u):(n.setSize(),r.splice(s+1,r.length-s-1),p=!0);return r.length<2&&this.removeFromPushed(t),p}}function Rb(e,n,t,r,s,a,l,u,p,h){af=e.$options.scrollSensitivity,zl=e.$options.scrollSpeed,ko=e.el,lf=p,ia=h;const S=ko.offsetWidth,W=ko.scrollLeft,J=ko.scrollTop,ve=t-J;if(!e.$options.disableScrollVertical)if(l.clientY<a.clientY&&ko.offsetHeight+J-t-s<af){if(jb(),lf&&ia&&!ia.s||ff)return;ff=kb(1,u,l)}else if(l.clientY>a.clientY&&J>0&&ve<af){if(Nb(),lf&&ia&&!ia.n||df)return;df=kb(-1,u,l)}else l.clientY!==a.clientY&&ov();const De=n-W;if(!e.$options.disableScrollHorizontal)if(l.clientX<a.clientX&&W+S-n-r<=af){if(Mb(),lf&&ia&&!ia.e||uf)return;uf=Ob(1,u,l)}else if(l.clientX>a.clientX&&W>0&&De<af){if(Db(),lf&&ia&&!ia.w||cf)return;cf=Ob(-1,u,l)}else l.clientX!==a.clientX&&iv()}function kb(e,n,t){let r=t.clientY;return setInterval(()=>{(!ko||-1===e&&ko.scrollTop-zl<0)&&ov(),ko.scrollTop+=e*zl,r+=e*zl,n({clientX:t.clientX,clientY:r})},50)}function Ob(e,n,t){let r=t.clientX;return setInterval(()=>{(!ko||-1===e&&ko.scrollLeft-zl<0)&&iv(),ko.scrollLeft+=e*zl,r+=e*zl,n({clientX:r,clientY:t.clientY})},50)}function Fb(){iv(),ov(),ko=null}function iv(){Db(),Mb()}function ov(){jb(),Nb()}function Db(){uf&&(clearInterval(uf),uf=0)}function Mb(){cf&&(clearInterval(cf),cf=0)}function Nb(){ff&&(clearInterval(ff),ff=0)}function jb(){df&&(clearInterval(df),df=0)}class RN{constructor(n){this.gridsterItem=n,this.gridster=n.gridster}destroy(){delete this.gridster,delete this.gridsterItem,delete this.swapedItem}swapItems(){this.gridster.$options.swap&&(this.checkSwapBack(),this.checkSwap(this.gridsterItem))}checkSwapBack(){if(this.swapedItem){const n=this.swapedItem.$item.x,t=this.swapedItem.$item.y;this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.gridster.checkCollision(this.swapedItem.$item)?(this.swapedItem.$item.x=n,this.swapedItem.$item.y=t):(this.swapedItem.setSize(),this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.swapedItem=void 0)}}restoreSwapItem(){this.swapedItem&&(this.swapedItem.$item.x=this.swapedItem.item.x||0,this.swapedItem.$item.y=this.swapedItem.item.y||0,this.swapedItem.setSize(),this.swapedItem=void 0)}setSwapItem(){this.swapedItem&&(this.swapedItem.checkItemChanges(this.swapedItem.$item,this.swapedItem.item),this.swapedItem=void 0)}checkSwap(n){let t;if(t=this.gridster.$options.swapWhileDragging?this.gridster.checkCollisionForSwaping(n.$item):this.gridster.checkCollision(n.$item),t&&!0!==t&&t.canBeDragged()){const r=t,s=r.$item.x,a=r.$item.y,l=n.$item.x,u=n.$item.y,p=l-s,h=u-a;r.$item.x=n.item.x-p,r.$item.y=n.item.y-h,n.$item.x=r.item.x+p,n.$item.y=r.item.y+h,this.gridster.checkCollision(r.$item)||this.gridster.checkCollision(n.$item)?(n.$item.x=l,n.$item.y=u,r.$item.x=s,r.$item.y=a):(r.setSize(),this.swapedItem=r,this.gridster.$options.swapWhileDragging&&(this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.setSwapItem()))}}}class kN{constructor(n,t,r){this.zone=r,this.collision=!1,this.gridsterItem=n,this.gridster=t,this.lastMouse={clientX:0,clientY:0},this.path=[]}destroy(){this.gridster.previewStyle&&this.gridster.previewStyle(!0),delete this.gridsterItem,delete this.gridster,delete this.collision,this.mousedown&&(this.mousedown(),this.touchstart())}dragStart(n){n.which&&1!==n.which||(this.gridster.options.draggable&&this.gridster.options.draggable.start&&this.gridster.options.draggable.start(this.gridsterItem.item,this.gridsterItem,n),n.stopPropagation(),n.preventDefault(),this.dragFunction=this.dragMove.bind(this),this.dragStopFunction=this.dragStop.bind(this),this.zone.runOutsideAngular(()=>{this.mousemove=this.gridsterItem.renderer.listen("document","mousemove",this.dragFunction),this.touchmove=this.gridster.renderer.listen(this.gridster.el,"touchmove",this.dragFunction)}),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStopFunction),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStopFunction),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStopFunction),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStopFunction),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStopFunction),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-moving"),this.margin=this.gridster.$options.margin,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.left=this.gridsterItem.left-this.margin,this.top=this.gridsterItem.top-this.margin,this.originalClientX=n.clientX,this.originalClientY=n.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.diffLeft=this.gridster.$options.dirType===qr.RTL?n.clientX-this.gridster.el.scrollWidth+this.gridsterItem.left:n.clientX+this.offsetLeft-this.margin-this.left,this.diffTop=n.clientY+this.offsetTop-this.margin-this.top,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(!0),this.push=new Ib(this.gridsterItem),this.swap=new RN(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid(),this.path.push({x:this.gridsterItem.item.x||0,y:this.gridsterItem.item.y||0}))}dragMove(n){n.stopPropagation(),n.preventDefault(),xr.checkTouchEvent(n),this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,Rb(this.gridster,this.left,this.top,this.width,this.height,n,this.lastMouse,this.calculateItemPositionFromMousePosition.bind(this)),this.calculateItemPositionFromMousePosition(n)}calculateItemPositionFromMousePosition(n){this.gridster.options.scale?this.calculateItemPositionWithScale(n,this.gridster.options.scale):this.calculateItemPositionWithoutScale(n),this.calculateItemPosition(),this.lastMouse.clientX=n.clientX,this.lastMouse.clientY=n.clientY,this.zone.run(()=>{this.gridster.updateGrid()})}calculateItemPositionWithScale(n,t){this.left=this.gridster.$options.dirType===qr.RTL?this.gridster.el.scrollWidth-this.originalClientX+(n.clientX-this.originalClientX)/t+this.diffLeft:this.originalClientX+(n.clientX-this.originalClientX)/t+this.offsetLeft-this.diffLeft,this.top=this.originalClientY+(n.clientY-this.originalClientY)/t+this.offsetTop-this.diffTop}calculateItemPositionWithoutScale(n){this.left=this.gridster.$options.dirType===qr.RTL?this.gridster.el.scrollWidth-n.clientX+this.diffLeft:n.clientX+this.offsetLeft-this.diffLeft,this.top=n.clientY+this.offsetTop-this.diffTop}dragStop(n){n.stopPropagation(),n.preventDefault(),Fb(),this.cancelOnBlur(),this.mousemove(),this.mouseup(),this.mouseleave(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridsterItem.renderer.removeClass(this.gridsterItem.el,"gridster-item-moving"),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.path=[],this.gridster.options.draggable&&this.gridster.options.draggable.stop?Promise.resolve(this.gridster.options.draggable.stop(this.gridsterItem.item,this.gridsterItem,n)).then(this.makeDrag.bind(this),this.cancelDrag.bind(this)):this.makeDrag(),setTimeout(()=>{this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle(!0))})}cancelDrag(){this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push&&this.push.restoreItems(),this.swap&&this.swap.restoreSwapItem(),this.push&&(this.push.destroy(),delete this.push),this.swap&&(this.swap.destroy(),delete this.swap)}makeDrag(){this.gridster.$options.draggable.dropOverItems&&this.gridster.options.draggable&&this.gridster.options.draggable.dropOverItemsCallback&&this.collision&&!0!==this.collision&&this.collision.$item&&this.gridster.options.draggable.dropOverItemsCallback(this.gridsterItem.item,this.collision.item,this.gridster),this.collision=!1,this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push&&this.push.setPushedItems(),this.swap&&this.swap.setSwapItem(),this.push&&(this.push.destroy(),delete this.push),this.swap&&(this.swap.destroy(),delete this.swap)}calculateItemPosition(){if(this.gridster.movingItem=this.gridsterItem.$item,this.positionX=this.gridster.pixelsToPositionX(this.left,Math.round),this.positionY=this.gridster.pixelsToPositionY(this.top,Math.round),this.positionXBackup=this.gridsterItem.$item.x,this.positionYBackup=this.gridsterItem.$item.y,this.gridsterItem.$item.x=this.positionX,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.x=this.positionXBackup),this.gridsterItem.$item.y=this.positionY,this.gridster.checkGridCollision(this.gridsterItem.$item)&&(this.gridsterItem.$item.y=this.positionYBackup),this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,this.top),this.positionXBackup!==this.gridsterItem.$item.x||this.positionYBackup!==this.gridsterItem.$item.y){const n=this.path[this.path.length-1];let t="";n.x<this.gridsterItem.$item.x?t=this.push.fromWest:n.x>this.gridsterItem.$item.x?t=this.push.fromEast:n.y<this.gridsterItem.$item.y?t=this.push.fromNorth:n.y>this.gridsterItem.$item.y&&(t=this.push.fromSouth),this.push.pushItems(t,this.gridster.$options.disablePushOnDrag),this.swap.swapItems(),this.collision=this.gridster.checkCollision(this.gridsterItem.$item),this.collision?(this.gridsterItem.$item.x=this.positionXBackup,this.gridsterItem.$item.y=this.positionYBackup,this.gridster.$options.draggable.dropOverItems&&!0!==this.collision&&this.collision.$item&&(this.gridster.movingItem=null)):this.path.push({x:this.gridsterItem.$item.x,y:this.gridsterItem.$item.y}),this.push.checkPushBack()}this.gridster.previewStyle(!0)}toggle(){const n=this.gridsterItem.canBeDragged();!this.enabled&&n?(this.enabled=!this.enabled,this.dragStartFunction=this.dragStartDelay.bind(this),this.mousedown=this.gridsterItem.renderer.listen(this.gridsterItem.el,"mousedown",this.dragStartFunction),this.touchstart=this.gridsterItem.renderer.listen(this.gridsterItem.el,"touchstart",this.dragStartFunction)):this.enabled&&!n&&(this.enabled=!this.enabled,this.mousedown(),this.touchstart())}dragStartDelay(n){if(n.target.hasAttribute("class")&&n.target.getAttribute("class").split(" ").indexOf("gridster-item-resizable-handler")>-1||xr.checkContentClassForEvent(this.gridster,n))return;if(xr.checkTouchEvent(n),!this.gridster.$options.draggable.delayStart)return void this.dragStart(n);const t=setTimeout(()=>{this.dragStart(n),S()},this.gridster.$options.draggable.delayStart),r=this.gridsterItem.renderer.listen("document","mouseup",S),s=this.gridsterItem.renderer.listen("document","mouseleave",S),a=this.gridsterItem.renderer.listen("window","blur",S),l=this.gridsterItem.renderer.listen("document","touchmove",function h(G){xr.checkTouchEvent(G),(Math.abs(G.clientX-n.clientX)>9||Math.abs(G.clientY-n.clientY)>9)&&S()}),u=this.gridsterItem.renderer.listen("document","touchend",S),p=this.gridsterItem.renderer.listen("document","touchcancel",S);function S(){clearTimeout(t),a(),r(),s(),l(),u(),p()}}}class ON{constructor(n){this.pushedItems=[],this.pushedItemsPath=[],this.gridsterItem=n,this.gridster=n.gridster,this.tryPattern={fromEast:this.tryWest,fromWest:this.tryEast,fromNorth:this.trySouth,fromSouth:this.tryNorth},this.fromSouth="fromSouth",this.fromNorth="fromNorth",this.fromEast="fromEast",this.fromWest="fromWest"}destroy(){delete this.gridster,delete this.gridsterItem}pushItems(n){return!!this.gridster.$options.pushResizeItems&&this.push(this.gridsterItem,n)}restoreItems(){let n=0;const t=this.pushedItems.length;let r;for(;n<t;n++)r=this.pushedItems[n],r.$item.x=r.item.x||0,r.$item.y=r.item.y||0,r.$item.cols=r.item.cols||1,r.$item.row=r.item.row||1,r.setSize();this.pushedItems=[],this.pushedItemsPath=[]}setPushedItems(){let n=0;const t=this.pushedItems.length;let r;for(;n<t;n++)r=this.pushedItems[n],r.checkItemChanges(r.$item,r.item);this.pushedItems=[],this.pushedItemsPath=[]}checkPushBack(){let n=this.pushedItems.length-1,t=!1;for(;n>-1;n--)this.checkPushedItem(this.pushedItems[n],n)&&(t=!0);t&&this.checkPushBack()}push(n,t){const r=this.gridster.checkCollision(n.$item);if(r&&!0!==r&&r!==this.gridsterItem&&r.canBeResized()){if(this.tryPattern[t].call(this,r,n,t))return!0}else if(!1===r)return!0;return!1}trySouth(n,t,r){const s=n.$item.y,a=n.$item.rows;return n.$item.y=t.$item.y+t.$item.rows,n.$item.rows=a+s-n.$item.y,this.gridster.checkCollisionTwoItems(n.$item,t.$item)||this.gridster.checkGridCollision(n.$item)?(n.$item.y=s,n.$item.rows=a,!1):(n.setSize(),this.addToPushed(n),this.push(t,r),!0)}tryNorth(n,t,r){const s=n.$item.rows;return n.$item.rows=t.$item.y-n.$item.y,this.gridster.checkCollisionTwoItems(n.$item,t.$item)||this.gridster.checkGridCollision(n.$item)?(n.$item.rows=s,!1):(n.setSize(),this.addToPushed(n),this.push(t,r),!0)}tryEast(n,t,r){const s=n.$item.x,a=n.$item.cols;return n.$item.x=t.$item.x+t.$item.cols,n.$item.cols=a+s-n.$item.x,this.gridster.checkCollisionTwoItems(n.$item,t.$item)||this.gridster.checkGridCollision(n.$item)?(n.$item.x=s,n.$item.cols=a,!1):(n.setSize(),this.addToPushed(n),this.push(t,r),!0)}tryWest(n,t,r){const s=n.$item.cols;return n.$item.cols=t.$item.x-n.$item.x,this.gridster.checkCollisionTwoItems(n.$item,t.$item)||this.gridster.checkGridCollision(n.$item)?(n.$item.cols=s,!1):(n.setSize(),this.addToPushed(n),this.push(t,r),!0)}addToPushed(n){if(this.pushedItems.indexOf(n)<0)this.pushedItems.push(n),this.pushedItemsPath.push([{x:n.item.x||0,y:n.item.y||0,cols:n.item.cols||0,rows:n.item.rows||0},{x:n.$item.x,y:n.$item.y,cols:n.$item.cols,rows:n.$item.rows}]);else{const t=this.pushedItems.indexOf(n);this.pushedItemsPath[t].push({x:n.$item.x,y:n.$item.y,cols:n.$item.cols,rows:n.$item.rows})}}removeFromPushed(n){n>-1&&(this.pushedItems.splice(n,1),this.pushedItemsPath.splice(n,1))}checkPushedItem(n,t){const r=this.pushedItemsPath[t];let a,l,u,p,h,s=r.length-2;for(;s>-1;s--)a=r[s],l=n.$item.x,u=n.$item.y,p=n.$item.cols,h=n.$item.rows,n.$item.x=a.x,n.$item.y=a.y,n.$item.cols=a.cols,n.$item.rows=a.rows,this.gridster.findItemWithItem(n.$item)?(n.$item.x=l,n.$item.y=u,n.$item.cols=p,n.$item.rows=h):(n.setSize(),r.splice(s+1,r.length-1-s));return r.length<2&&(this.removeFromPushed(t),!0)}}class FN{constructor(n,t,r){this.zone=r,this.gridsterItem=n,this.gridster=t,this.lastMouse={clientX:0,clientY:0},this.itemBackup=[0,0,0,0],this.resizeEventScrollType={w:!1,e:!1,n:!1,s:!1}}destroy(){this.gridster.previewStyle&&this.gridster.previewStyle(),delete this.gridsterItem,delete this.gridster}dragStart(n){n.which&&1!==n.which||(this.gridster.options.resizable&&this.gridster.options.resizable.start&&this.gridster.options.resizable.start(this.gridsterItem.item,this.gridsterItem,n),n.stopPropagation(),n.preventDefault(),this.dragFunction=this.dragMove.bind(this),this.dragStopFunction=this.dragStop.bind(this),this.zone.runOutsideAngular(()=>{this.mousemove=this.gridsterItem.renderer.listen("document","mousemove",this.dragFunction),this.touchmove=this.gridster.renderer.listen(this.gridster.el,"touchmove",this.dragFunction)}),this.mouseup=this.gridsterItem.renderer.listen("document","mouseup",this.dragStopFunction),this.mouseleave=this.gridsterItem.renderer.listen("document","mouseleave",this.dragStopFunction),this.cancelOnBlur=this.gridsterItem.renderer.listen("window","blur",this.dragStopFunction),this.touchend=this.gridsterItem.renderer.listen("document","touchend",this.dragStopFunction),this.touchcancel=this.gridsterItem.renderer.listen("document","touchcancel",this.dragStopFunction),this.gridsterItem.renderer.addClass(this.gridsterItem.el,"gridster-item-resizing"),this.lastMouse.clientX=n.clientX,this.lastMouse.clientY=n.clientY,this.left=this.gridsterItem.left,this.top=this.gridsterItem.top,this.originalClientX=n.clientX,this.originalClientY=n.clientY,this.width=this.gridsterItem.width,this.height=this.gridsterItem.height,this.bottom=this.gridsterItem.top+this.gridsterItem.height,this.right=this.gridsterItem.left+this.gridsterItem.width,this.margin=this.gridster.$options.margin,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.diffLeft=n.clientX+this.offsetLeft-this.left,this.diffRight=n.clientX+this.offsetLeft-this.right,this.diffTop=n.clientY+this.offsetTop-this.top,this.diffBottom=n.clientY+this.offsetTop-this.bottom,this.minHeight=this.gridster.positionYToPixels(this.gridsterItem.$item.minItemRows||this.gridster.$options.minItemRows)-this.margin,this.minWidth=this.gridster.positionXToPixels(this.gridsterItem.$item.minItemCols||this.gridster.$options.minItemCols)-this.margin,this.gridster.movingItem=this.gridsterItem.$item,this.gridster.previewStyle(),this.push=new Ib(this.gridsterItem),this.pushResize=new ON(this.gridsterItem),this.gridster.dragInProgress=!0,this.gridster.updateGrid(),n.target?.hasAttribute("class")&&n.target.getAttribute("class").split(" ").indexOf("handle-n")>-1?(this.resizeEventScrollType.n=!0,this.directionFunction=this.handleN):n.target?.hasAttribute("class")&&n.target.getAttribute("class").split(" ").indexOf("handle-w")>-1?this.gridster.$options.dirType===qr.RTL?(this.resizeEventScrollType.e=!0,this.directionFunction=this.handleE):(this.resizeEventScrollType.w=!0,this.directionFunction=this.handleW):n.target?.hasAttribute("class")&&n.target.getAttribute("class").split(" ").indexOf("handle-s")>-1?(this.resizeEventScrollType.s=!0,this.directionFunction=this.handleS):n.target.hasAttribute("class")&&n.target.getAttribute("class").split(" ").indexOf("handle-e")>-1?this.gridster.$options.dirType===qr.RTL?(this.resizeEventScrollType.w=!0,this.directionFunction=this.handleW):(this.resizeEventScrollType.e=!0,this.directionFunction=this.handleE):n.target.hasAttribute("class")&&n.target.getAttribute("class").split(" ").indexOf("handle-nw")>-1?this.gridster.$options.dirType===qr.RTL?(this.resizeEventScrollType.n=!0,this.resizeEventScrollType.e=!0,this.directionFunction=this.handleNE):(this.resizeEventScrollType.n=!0,this.resizeEventScrollType.w=!0,this.directionFunction=this.handleNW):n.target.hasAttribute("class")&&n.target.getAttribute("class").split(" ").indexOf("handle-ne")>-1?this.gridster.$options.dirType===qr.RTL?(this.resizeEventScrollType.n=!0,this.resizeEventScrollType.w=!0,this.directionFunction=this.handleNW):(this.resizeEventScrollType.n=!0,this.resizeEventScrollType.e=!0,this.directionFunction=this.handleNE):n.target.hasAttribute("class")&&n.target.getAttribute("class").split(" ").indexOf("handle-sw")>-1?this.gridster.$options.dirType===qr.RTL?(this.resizeEventScrollType.s=!0,this.resizeEventScrollType.e=!0,this.directionFunction=this.handleSE):(this.resizeEventScrollType.s=!0,this.resizeEventScrollType.w=!0,this.directionFunction=this.handleSW):n.target.hasAttribute("class")&&n.target.getAttribute("class").split(" ").indexOf("handle-se")>-1&&(this.gridster.$options.dirType===qr.RTL?(this.resizeEventScrollType.s=!0,this.resizeEventScrollType.w=!0,this.directionFunction=this.handleSW):(this.resizeEventScrollType.s=!0,this.resizeEventScrollType.e=!0,this.directionFunction=this.handleSE)))}dragMove(n){n.stopPropagation(),n.preventDefault(),xr.checkTouchEvent(n),this.offsetTop=this.gridster.el.scrollTop-this.gridster.el.offsetTop,this.offsetLeft=this.gridster.el.scrollLeft-this.gridster.el.offsetLeft,Rb(this.gridster,this.left,this.top,this.width,this.height,n,this.lastMouse,this.directionFunction.bind(this),!0,this.resizeEventScrollType);const t=this.gridster.options.scale||1;this.directionFunction({clientX:this.originalClientX+(n.clientX-this.originalClientX)/t,clientY:this.originalClientY+(n.clientY-this.originalClientY)/t}),this.lastMouse.clientX=n.clientX,this.lastMouse.clientY=n.clientY,this.zone.run(()=>{this.gridster.updateGrid()})}dragStop(n){n.stopPropagation(),n.preventDefault(),Fb(),this.mousemove(),this.mouseup(),this.mouseleave(),this.cancelOnBlur(),this.touchmove(),this.touchend(),this.touchcancel(),this.gridster.dragInProgress=!1,this.gridster.updateGrid(),this.gridster.options.resizable&&this.gridster.options.resizable.stop?Promise.resolve(this.gridster.options.resizable.stop(this.gridsterItem.item,this.gridsterItem,n)).then(this.makeResize.bind(this),this.cancelResize.bind(this)):this.makeResize(),setTimeout(()=>{this.gridsterItem.renderer.removeClass(this.gridsterItem.el,"gridster-item-resizing"),this.gridster&&(this.gridster.movingItem=null,this.gridster.previewStyle())})}cancelResize(){this.gridsterItem.$item.cols=this.gridsterItem.item.cols||1,this.gridsterItem.$item.rows=this.gridsterItem.item.rows||1,this.gridsterItem.$item.x=this.gridsterItem.item.x||0,this.gridsterItem.$item.y=this.gridsterItem.item.y||0,this.gridsterItem.setSize(),this.push.restoreItems(),this.pushResize.restoreItems(),this.push.destroy(),delete this.push,this.pushResize.destroy(),delete this.pushResize}makeResize(){this.gridsterItem.setSize(),this.gridsterItem.checkItemChanges(this.gridsterItem.$item,this.gridsterItem.item),this.push.setPushedItems(),this.pushResize.setPushedItems(),this.push.destroy(),delete this.push,this.pushResize.destroy(),delete this.pushResize}handleN(n){if(this.top=n.clientY+this.offsetTop-this.diffTop,this.height=this.bottom-this.top,this.minHeight>this.height&&(this.height=this.minHeight,this.top=this.bottom-this.minHeight),this.newPosition=this.gridster.pixelsToPositionY(this.top+this.margin,Math.floor),this.gridsterItem.$item.y!==this.newPosition){if(this.itemBackup[1]=this.gridsterItem.$item.y,this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows+=this.gridsterItem.$item.y-this.newPosition,this.gridsterItem.$item.y=this.newPosition,this.pushResize.pushItems(this.pushResize.fromSouth),this.push.pushItems(this.push.fromSouth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.y=this.itemBackup[1],this.gridsterItem.$item.rows=this.itemBackup[3],this.setItemTop(this.gridster.positionYToPixels(this.gridsterItem.$item.y)),void this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemTop(this.top),this.setItemHeight(this.height)}handleW(n){if(this.left=(this.gridster.$options.dirType===qr.RTL?this.originalClientX+(this.originalClientX-n.clientX):n.clientX)+this.offsetLeft-this.diffLeft,this.width=this.right-this.left,this.minWidth>this.width&&(this.width=this.minWidth,this.left=this.right-this.minWidth),this.newPosition=this.gridster.pixelsToPositionX(this.left+this.margin,Math.floor),this.gridsterItem.$item.x!==this.newPosition){if(this.itemBackup[0]=this.gridsterItem.$item.x,this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols+=this.gridsterItem.$item.x-this.newPosition,this.gridsterItem.$item.x=this.newPosition,this.pushResize.pushItems(this.pushResize.fromEast),this.push.pushItems(this.push.fromEast,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.x=this.itemBackup[0],this.gridsterItem.$item.cols=this.itemBackup[2],this.setItemLeft(this.gridster.positionXToPixels(this.gridsterItem.$item.x)),void this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemLeft(this.left),this.setItemWidth(this.width)}handleS(n){if(this.height=n.clientY+this.offsetTop-this.diffBottom-this.top,this.minHeight>this.height&&(this.height=this.minHeight),this.bottom=this.top+this.height,this.newPosition=this.gridster.pixelsToPositionY(this.bottom,Math.ceil),this.gridsterItem.$item.y+this.gridsterItem.$item.rows!==this.newPosition){if(this.itemBackup[3]=this.gridsterItem.$item.rows,this.gridsterItem.$item.rows=this.newPosition-this.gridsterItem.$item.y,this.pushResize.pushItems(this.pushResize.fromNorth),this.push.pushItems(this.push.fromNorth,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.rows=this.itemBackup[3],void this.setItemHeight(this.gridster.positionYToPixels(this.gridsterItem.$item.rows)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemHeight(this.height)}handleE(n){if(this.width=(this.gridster.$options.dirType===qr.RTL?this.originalClientX+(this.originalClientX-n.clientX):n.clientX)+this.offsetLeft-this.diffRight-this.left,this.minWidth>this.width&&(this.width=this.minWidth),this.right=this.left+this.width,this.newPosition=this.gridster.pixelsToPositionX(this.right,Math.ceil),this.gridsterItem.$item.x+this.gridsterItem.$item.cols!==this.newPosition){if(this.itemBackup[2]=this.gridsterItem.$item.cols,this.gridsterItem.$item.cols=this.newPosition-this.gridsterItem.$item.x,this.pushResize.pushItems(this.pushResize.fromWest),this.push.pushItems(this.push.fromWest,this.gridster.$options.disablePushOnResize),this.gridster.checkCollision(this.gridsterItem.$item))return this.gridsterItem.$item.cols=this.itemBackup[2],void this.setItemWidth(this.gridster.positionXToPixels(this.gridsterItem.$item.cols)-this.margin);this.gridster.previewStyle(),this.pushResize.checkPushBack(),this.push.checkPushBack()}this.setItemWidth(this.width)}handleNW(n){this.handleN(n),this.handleW(n)}handleNE(n){this.handleN(n),this.handleE(n)}handleSW(n){this.handleS(n),this.handleW(n)}handleSE(n){this.handleS(n),this.handleE(n)}toggle(){this.resizeEnabled=this.gridsterItem.canBeResized()}dragStartDelay(n){if(xr.checkTouchEvent(n),!this.gridster.$options.resizable.delayStart)return void this.dragStart(n);const t=setTimeout(()=>{this.dragStart(n),S()},this.gridster.$options.resizable.delayStart),r=this.gridsterItem.renderer.listen("document","mouseup",S),s=this.gridsterItem.renderer.listen("document","mouseleave",S),a=this.gridsterItem.renderer.listen("window","blur",S),l=this.gridsterItem.renderer.listen("document","touchmove",function h(G){xr.checkTouchEvent(G),(Math.abs(G.clientX-n.clientX)>9||Math.abs(G.clientY-n.clientY)>9)&&S()}),u=this.gridsterItem.renderer.listen("document","touchend",S),p=this.gridsterItem.renderer.listen("document","touchcancel",S);function S(){clearTimeout(t),a(),r(),s(),l(),u(),p()}}setItemTop(n){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,this.left,n)}setItemLeft(n){this.gridster.gridRenderer.setCellPosition(this.gridsterItem.renderer,this.gridsterItem.el,n,this.top)}setItemHeight(n){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"height",n+"px")}setItemWidth(n){this.gridsterItem.renderer.setStyle(this.gridsterItem.el,"width",n+"px")}}let DN=(()=>{class e{constructor(t,r,s,a){this.renderer=s,this.zone=a,this.itemInit=new o.EventEmitter,this.itemChange=new o.EventEmitter,this.itemResize=new o.EventEmitter,this.el=t.nativeElement,this.$item={cols:-1,rows:-1,x:-1,y:-1},this.gridster=r,this.drag=new kN(this,r,this.zone),this.resize=new FN(this,r,this.zone)}get zIndex(){return this.getLayerIndex()+this.gridster.$options.baseLayerIndex}ngOnInit(){this.gridster.addItem(this)}ngOnChanges(t){t.item&&(this.updateOptions(),this.init||this.gridster.calculateLayoutDebounce()),t.item&&t.item.previousValue&&this.setSize()}updateOptions(){this.$item=xr.merge(this.$item,this.item,{cols:void 0,rows:void 0,x:void 0,y:void 0,layerIndex:void 0,dragEnabled:void 0,resizeEnabled:void 0,compactEnabled:void 0,maxItemRows:void 0,minItemRows:void 0,maxItemCols:void 0,minItemCols:void 0,maxItemArea:void 0,minItemArea:void 0})}ngOnDestroy(){this.gridster.removeItem(this),delete this.gridster,this.drag.destroy(),delete this.drag,this.resize.destroy(),delete this.resize}setSize(){this.renderer.setStyle(this.el,"display",this.notPlaced?"":"block"),this.gridster.gridRenderer.updateItem(this.el,this.$item,this.renderer),this.updateItemSize()}updateItemSize(){const r=this.$item.x*this.gridster.curColWidth,s=this.$item.cols*this.gridster.curColWidth-this.gridster.$options.margin,a=this.$item.rows*this.gridster.curRowHeight-this.gridster.$options.margin;this.top=this.$item.y*this.gridster.curRowHeight,this.left=r,!this.init&&s>0&&a>0&&(this.init=!0,this.item.initCallback&&this.item.initCallback(this.item,this),this.gridster.options.itemInitCallback&&this.gridster.options.itemInitCallback(this.item,this),this.itemInit.next({item:this.item,itemComponent:this}),this.gridster.$options.scrollToNewItems&&this.el.scrollIntoView(!1)),(s!==this.width||a!==this.height)&&(this.width=s,this.height=a,this.gridster.options.itemResizeCallback&&this.gridster.options.itemResizeCallback(this.item,this),this.itemResize.next({item:this.item,itemComponent:this}))}itemChanged(){this.gridster.options.itemChangeCallback&&this.gridster.options.itemChangeCallback(this.item,this),this.itemChange.next({item:this.item,itemComponent:this})}checkItemChanges(t,r){t.rows===r.rows&&t.cols===r.cols&&t.x===r.x&&t.y===r.y||(this.gridster.checkCollision(this.$item)?(this.$item.x=r.x||0,this.$item.y=r.y||0,this.$item.cols=r.cols||1,this.$item.rows=r.rows||1,this.setSize()):(this.item.cols=this.$item.cols,this.item.rows=this.$item.rows,this.item.x=this.$item.x,this.item.y=this.$item.y,this.gridster.calculateLayoutDebounce(),this.itemChanged()))}canBeDragged(){const t=this.gridster.$options.draggable.enabled;return!this.gridster.mobile&&t&&(void 0===this.$item.dragEnabled?t:this.$item.dragEnabled)}canBeResized(){const t=this.gridster.$options.resizable.enabled;return!this.gridster.mobile&&t&&(void 0===this.$item.resizeEnabled?t:this.$item.resizeEnabled)}bringToFront(t){if(t&&t<=0)return;const r=this.getLayerIndex(),s=this.gridster.$options.maxLayerIndex;if(r<s){const a=t?r+t:s;this.item.layerIndex=this.$item.layerIndex=a>s?s:a}}sendToBack(t){if(t&&t<=0)return;const r=this.getLayerIndex();if(r>0){const s=t?r-t:0;this.item.layerIndex=this.$item.layerIndex=s<0?0:s}}getLayerIndex(){return void 0!==this.item.layerIndex?this.item.layerIndex:void 0!==this.gridster.$options.defaultLayerIndex?this.gridster.$options.defaultLayerIndex:0}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(rv),o.\u0275\u0275directiveInject(o.Renderer2),o.\u0275\u0275directiveInject(o.NgZone))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["gridster-item"]],hostVars:2,hostBindings:function(t,r){2&t&&o.\u0275\u0275styleProp("z-index",r.zIndex)},inputs:{item:"item"},outputs:{itemInit:"itemInit",itemChange:"itemChange",itemResize:"itemResize"},features:[o.\u0275\u0275NgOnChangesFeature],ngContentSelectors:Pb,decls:9,vars:8,consts:[["class","gridster-item-resizable-handler handle-s",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-e",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-n",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-w",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-se",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-ne",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-sw",3,"mousedown","touchstart",4,"ngIf"],["class","gridster-item-resizable-handler handle-nw",3,"mousedown","touchstart",4,"ngIf"],[1,"gridster-item-resizable-handler","handle-s",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-e",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-n",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-w",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-se",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-ne",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-sw",3,"mousedown","touchstart"],[1,"gridster-item-resizable-handler","handle-nw",3,"mousedown","touchstart"]],template:function(t,r){1&t&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275projection(0),o.\u0275\u0275template(1,vN,1,0,"div",0),o.\u0275\u0275template(2,yN,1,0,"div",1),o.\u0275\u0275template(3,_N,1,0,"div",2),o.\u0275\u0275template(4,bN,1,0,"div",3),o.\u0275\u0275template(5,wN,1,0,"div",4),o.\u0275\u0275template(6,CN,1,0,"div",5),o.\u0275\u0275template(7,xN,1,0,"div",6),o.\u0275\u0275template(8,SN,1,0,"div",7)),2&t&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.gridster.$options.resizable.handles.s&&r.resize.resizeEnabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.gridster.$options.resizable.handles.e&&r.resize.resizeEnabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.gridster.$options.resizable.handles.n&&r.resize.resizeEnabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.gridster.$options.resizable.handles.w&&r.resize.resizeEnabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.gridster.$options.resizable.handles.se&&r.resize.resizeEnabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.gridster.$options.resizable.handles.ne&&r.resize.resizeEnabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.gridster.$options.resizable.handles.sw&&r.resize.resizeEnabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.gridster.$options.resizable.handles.nw&&r.resize.resizeEnabled))},directives:[C.NgIf],styles:["gridster-item{box-sizing:border-box;z-index:1;position:absolute;overflow:hidden;transition:.3s;display:none;background:white;-webkit-user-select:text;user-select:text}gridster-item.gridster-item-moving{cursor:move}gridster-item.gridster-item-resizing,gridster-item.gridster-item-moving{transition:0s;z-index:2;box-shadow:0 0 5px 5px #0003,0 6px 10px #00000024,0 1px 18px #0000001f}.gridster-item-resizable-handler{position:absolute;z-index:2}.gridster-item-resizable-handler.handle-n{cursor:ns-resize;height:10px;right:0;top:0;left:0}.gridster-item-resizable-handler.handle-e{cursor:ew-resize;width:10px;bottom:0;right:0;top:0}.gridster-item-resizable-handler.handle-s{cursor:ns-resize;height:10px;right:0;bottom:0;left:0}.gridster-item-resizable-handler.handle-w{cursor:ew-resize;width:10px;left:0;top:0;bottom:0}.gridster-item-resizable-handler.handle-ne{cursor:ne-resize;width:10px;height:10px;right:0;top:0}.gridster-item-resizable-handler.handle-nw{cursor:nw-resize;width:10px;height:10px;left:0;top:0}.gridster-item-resizable-handler.handle-se{cursor:se-resize;width:0;height:0;right:0;bottom:0;border-style:solid;border-width:0 0 10px 10px;border-color:transparent}.gridster-item-resizable-handler.handle-sw{cursor:sw-resize;width:10px;height:10px;left:0;bottom:0}gridster-item:hover .gridster-item-resizable-handler.handle-se{border-color:transparent transparent #ccc}\n"],encapsulation:2}),e})(),Bb=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[C.CommonModule]]}),e})();var pf=x(7392),Ni=x(8255),lc=x(3267),MN=x(4850),uc=x(4098),Ul=x(1206);const Oh=["innerGridItem"];function NN(e,n){1&e&&o.\u0275\u0275elementContainer(0)}const Gl=function(e){return{i:e}};function jN(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div",2),o.\u0275\u0275elementStart(1,"p",4),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"div",5),o.\u0275\u0275template(4,NN,1,0,"ng-container",6),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e){const t=n.index,r=o.\u0275\u0275nextContext().index,s=o.\u0275\u0275nextContext();o.\u0275\u0275property("fxFlex",s.dashboard[s.itemIndex(r,t)].cols),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate3("row: ",r," | column: ",t," | size: ",s.dashboard[s.itemIndex(r,t)].cols,""),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngStyle",s.gridItemInnerStyles(r,t)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",s.innerGridItemTmpl)("ngTemplateOutletContext",o.\u0275\u0275pureFunction1(7,Gl,s.itemIndex(r,t)))}}const BN=function(){return{height:"100%"}};function LN(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div",2),o.\u0275\u0275elementStart(1,"div",3),o.\u0275\u0275template(2,jN,5,9,"div",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e){const t=n.index,r=o.\u0275\u0275nextContext();o.\u0275\u0275property("fxFlex",r.rowFlex(t)),o.\u0275\u0275advance(1),o.\u0275\u0275property("fxLayout",r.rowDirection(t))("ngStyle",o.\u0275\u0275pureFunction0(4,BN)),o.\u0275\u0275advance(1),o.\u0275\u0275property("for",r.totalColumns(t))}}const sv=["gridItemActions"],av=["extraActions"],Lb=["mainControls"],zb=["itemHeader"];function zN(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function UN(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function GN(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function VN(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"gridster-item",8),o.\u0275\u0275elementStart(1,"div",9),o.\u0275\u0275elementStart(2,"div",10,11),o.\u0275\u0275template(4,UN,1,0,"ng-container",12),o.\u0275\u0275elementStart(5,"button",13),o.\u0275\u0275listener("mousedown",function(){const a=o.\u0275\u0275restoreView(t).index;return o.\u0275\u0275nextContext().removeItem(a)})("touchstart",function(){const a=o.\u0275\u0275restoreView(t).index;return o.\u0275\u0275nextContext().removeItem(a)}),o.\u0275\u0275text(6,"Delete"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"div",14),o.\u0275\u0275template(8,GN,1,0,"ng-container",12),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){const t=n.$implicit,r=n.index,s=o.\u0275\u0275nextContext();o.\u0275\u0275property("item",t),o.\u0275\u0275advance(2),o.\u0275\u0275property("hidden",!s.displayItemHeader),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngTemplateOutlet",s.gridItemActionsTmpl)("ngTemplateOutletContext",o.\u0275\u0275pureFunction1(6,Gl,r)),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngTemplateOutlet",s.innerGridItemTmpl)("ngTemplateOutletContext",o.\u0275\u0275pureFunction1(8,Gl,r))}}function $N(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function HN(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function qN(e,n){1&e&&o.\u0275\u0275elementContainer(0)}const Ub=function(){return{i:0}};function KN(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function XN(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function WN(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function JN(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"as-split-area",15),o.\u0275\u0275elementStart(1,"div",16),o.\u0275\u0275elementStart(2,"div",17,18),o.\u0275\u0275template(4,XN,1,0,"ng-container",19),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"div",20),o.\u0275\u0275template(6,WN,1,0,"ng-container",19),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e){const t=n.index,r=o.\u0275\u0275nextContext().index,s=o.\u0275\u0275nextContext();o.\u0275\u0275property("size",s.itemSize(r,t)),o.\u0275\u0275advance(2),o.\u0275\u0275property("hidden",!s.displayItemHeader),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngTemplateOutlet",s.gridItemActionsTmpl)("ngTemplateOutletContext",o.\u0275\u0275pureFunction1(6,Gl,s.itemIndex(r,t))),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngTemplateOutlet",s.innerGridItemTmpl)("ngTemplateOutletContext",o.\u0275\u0275pureFunction1(8,Gl,s.itemIndex(r,t)))}}function QN(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",6),o.\u0275\u0275elementStart(1,"div",7),o.\u0275\u0275elementStart(2,"button",8),o.\u0275\u0275elementStart(3,"mat-icon"),o.\u0275\u0275text(4,"menu"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"mat-menu",null,9),o.\u0275\u0275elementStart(7,"button",10),o.\u0275\u0275listener("mousedown",function(){const a=o.\u0275\u0275restoreView(t).index;return o.\u0275\u0275nextContext().addColumn(a)}),o.\u0275\u0275text(8,"Add Column"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"button",10),o.\u0275\u0275listener("mousedown",function(){const a=o.\u0275\u0275restoreView(t).index;return o.\u0275\u0275nextContext().layoutSettings("row",a)}),o.\u0275\u0275text(10,"Layout Settings"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(11,"button",11),o.\u0275\u0275listener("mousedown",function(){const a=o.\u0275\u0275restoreView(t).index;return o.\u0275\u0275nextContext().removeRow(a)}),o.\u0275\u0275text(12,"Delete"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(13,"div",12),o.\u0275\u0275elementStart(14,"as-split",13),o.\u0275\u0275listener("dragEnd",function(s){const l=o.\u0275\u0275restoreView(t).index;return o.\u0275\u0275nextContext().dragEnd(l,s)}),o.\u0275\u0275template(15,JN,7,10,"as-split-area",14),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){const t=n.index,r=o.\u0275\u0275reference(6),s=o.\u0275\u0275nextContext();o.\u0275\u0275advance(2),o.\u0275\u0275property("matMenuTriggerFor",r),o.\u0275\u0275advance(13),o.\u0275\u0275property("for",s.totalColumns(t))}}function YN(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",6),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().login()}),o.\u0275\u0275text(1,"login"),o.\u0275\u0275elementEnd()}}const ZN=function(e){return[e,"manage"]};function e3(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div",7),o.\u0275\u0275elementStart(1,"a",8),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275property("routerLink",o.\u0275\u0275pureFunction1(2,ZN,t.path)),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(t.path)}}const t3=["*"];function n3(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275elementStart(1,"button",15),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.submit()}),o.\u0275\u0275text(2,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function r3(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275elementStart(1,"button",16),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.onPropertiesClick()}),o.\u0275\u0275text(2,"Properties"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function o3(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275elementStart(1,"button",16),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.onDeleteClick()}),o.\u0275\u0275text(2,"Delete"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function s3(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275elementStart(1,"button",16),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.onRulesClick()}),o.\u0275\u0275text(2,"Rules"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function a3(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275elementStart(1,"button",17),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.onPersistenceClick()}),o.\u0275\u0275text(2,"Persistence"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function l3(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275elementStart(1,"button",17),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.onInteractionsClick()}),o.\u0275\u0275text(2,"Interactions"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function u3(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275elementStart(1,"button",18),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.applyStyle(0)})("touchstart",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.applyStyle(0)}),o.\u0275\u0275text(2,"Apply Style"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function c3(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275elementStart(1,"button",18),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.removeStyle(0)})("touchstart",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.removeStyle(0)}),o.\u0275\u0275text(2,"Remove Style"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function d3(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",35),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext(2),o.\u0275\u0275reference(2).toggle()}),o.\u0275\u0275elementStart(1,"mat-icon"),o.\u0275\u0275text(2,"menu"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function f3(e,n){1&e&&(o.\u0275\u0275elementStart(0,"mat-icon"),o.\u0275\u0275text(1,"arrow_drop_down"),o.\u0275\u0275elementEnd())}function p3(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"button",36),o.\u0275\u0275template(1,f3,2,0,"mat-icon",4),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext(2),r=o.\u0275\u0275reference(29);o.\u0275\u0275property("matMenuTriggerFor",r),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.nested)}}function h3(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function m3(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,h3,1,0,"ng-container",23),o.\u0275\u0275elementContainerEnd()),2&e){const t=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",t.contextsMenuTpl)}}function g3(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div",37),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(t.editor.panelStyleTitle(0))}}function v3(e,n){1&e&&o.\u0275\u0275element(0,"span",38)}function y3(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function _3(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",39),o.\u0275\u0275text(1,"Quell"),o.\u0275\u0275elementEnd())}function b3(e,n){if(1&e&&(o.\u0275\u0275template(0,d3,3,0,"button",19),o.\u0275\u0275template(1,p3,2,2,"button",20),o.\u0275\u0275elementStart(2,"div"),o.\u0275\u0275template(3,m3,2,1,"ng-container",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(4,g3,2,1,"div",21),o.\u0275\u0275template(5,v3,1,0,"span",22),o.\u0275\u0275template(6,y3,1,0,"ng-container",23),o.\u0275\u0275elementStart(7,"div",24),o.\u0275\u0275elementStart(8,"mat-form-field"),o.\u0275\u0275elementStart(9,"mat-select",25),o.\u0275\u0275elementStart(10,"mat-option",26),o.\u0275\u0275text(11,"page"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(12,"mat-option",27),o.\u0275\u0275text(13,"form"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(14,"mat-option",28),o.\u0275\u0275text(15,"json"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(16,"div",29),o.\u0275\u0275elementStart(17,"mat-form-field"),o.\u0275\u0275elementStart(18,"mat-select",30),o.\u0275\u0275elementStart(19,"mat-option",31),o.\u0275\u0275text(20,"grid"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(21,"mat-option",32),o.\u0275\u0275text(22,"gridless"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(23,"mat-option",33),o.\u0275\u0275text(24,"split"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(25,_3,2,0,"div",34)),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngIf",!t.nested),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.nested),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",t.savable),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.editor.hasPanelStyle(0)&&t.nested),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.nested),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",t.extraActionsAreaTmpl),o.\u0275\u0275advance(19),o.\u0275\u0275property("ngIf",!t.nested)}}function w3(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div",37),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(t.editor.panelStyleTitle(0))}}function C3(e,n){if(1&e&&o.\u0275\u0275template(0,w3,2,1,"div",21),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngIf",t.editor.hasPanelStyle(0)&&!t.nested)}}function x3(e,n){1&e&&o.\u0275\u0275elementContainer(0)}const lv=function(e,n){return{i:e,j:n}};function S3(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div",43),o.\u0275\u0275template(1,x3,1,0,"ng-container",44),o.\u0275\u0275elementEnd()),2&e){const t=n.index,r=o.\u0275\u0275nextContext().i,s=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",s.editablePaneTpl)("ngTemplateOutletContext",o.\u0275\u0275pureFunction2(2,lv,r,t))}}function E3(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"ngx-dropzone",40),o.\u0275\u0275listener("change",function(s){const l=o.\u0275\u0275restoreView(t).i;return o.\u0275\u0275nextContext().editor.onFileChange(s,l)})("cdkDropListDropped",function(s){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.onDrop(s)}),o.\u0275\u0275elementStart(1,"div",null,41),o.\u0275\u0275template(3,S3,2,5,"div",42),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){const t=n.i,r=o.\u0275\u0275nextContext();o.\u0275\u0275property("cdkDropListData",t)("multiple",!0)("disableClick",!0),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngForOf",r.editor.panelPanes(t).controls)}}function A3(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",15),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.submit()}),o.\u0275\u0275text(1,"Save"),o.\u0275\u0275elementEnd()}}function P3(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",16),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.onPropertiesClick()}),o.\u0275\u0275text(1,"Properties"),o.\u0275\u0275elementEnd()}}function I3(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",16),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.onDeleteClick()}),o.\u0275\u0275text(1,"Delete"),o.\u0275\u0275elementEnd()}}function T3(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",16),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.onRulesClick()}),o.\u0275\u0275text(1,"Rules"),o.\u0275\u0275elementEnd()}}function R3(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",17),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.onPersistenceClick()}),o.\u0275\u0275text(1,"Persistence"),o.\u0275\u0275elementEnd()}}function k3(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",17),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.onInteractionsClick()}),o.\u0275\u0275text(1,"Interactions"),o.\u0275\u0275elementEnd()}}function O3(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",18),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.applyStyle(0)})("touchstart",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.applyStyle(0)}),o.\u0275\u0275text(1,"Apply Style"),o.\u0275\u0275elementEnd()}}function F3(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",18),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.removeStyle(0)})("touchstart",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.removeStyle(0)}),o.\u0275\u0275text(1,"Remove Style"),o.\u0275\u0275elementEnd()}}function D3(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function M3(e,n){if(1&e&&o.\u0275\u0275template(0,D3,1,0,"ng-container",2),2&e){const t=n.i,r=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngTemplateOutlet",r.renderPanelTpl)("ngTemplateOutletContext",o.\u0275\u0275pureFunction1(2,Gl,t))}}function N3(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275elementStart(1,"button",16),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.submit()}),o.\u0275\u0275text(2,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function j3(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275elementStart(1,"button",17),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.onRulesClick()}),o.\u0275\u0275text(2,"Rules"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function B3(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275elementStart(1,"button",5),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.onPersistenceClick()}),o.\u0275\u0275text(2,"Persistence"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function L3(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275elementStart(1,"button",5),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.onInteractionsClick()}),o.\u0275\u0275text(2,"Interactions"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function z3(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275elementStart(1,"button",17),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.onDeleteClick()}),o.\u0275\u0275text(2,"Delete"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function U3(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",32),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext(2),o.\u0275\u0275reference(2).toggle()}),o.\u0275\u0275elementStart(1,"mat-icon"),o.\u0275\u0275text(2,"menu"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}}function G3(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"button",33),o.\u0275\u0275elementStart(1,"mat-icon"),o.\u0275\u0275text(2,"menu"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e){o.\u0275\u0275nextContext(2);const t=o.\u0275\u0275reference(30);o.\u0275\u0275property("matMenuTriggerFor",t)}}function V3(e,n){1&e&&o.\u0275\u0275element(0,"span",34)}function $3(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function H3(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,$3,1,0,"ng-container",30),o.\u0275\u0275elementContainerEnd()),2&e){const t=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",t.contextsMenuTpl)}}function q3(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function K3(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",35),o.\u0275\u0275text(1,"Quell"),o.\u0275\u0275elementEnd())}function X3(e,n){if(1&e&&(o.\u0275\u0275template(0,U3,3,0,"button",18),o.\u0275\u0275template(1,G3,3,1,"button",19),o.\u0275\u0275template(2,V3,1,0,"span",20),o.\u0275\u0275elementStart(3,"div"),o.\u0275\u0275template(4,H3,2,1,"ng-container",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"div",21),o.\u0275\u0275elementStart(6,"mat-form-field"),o.\u0275\u0275elementStart(7,"mat-select",22),o.\u0275\u0275elementStart(8,"mat-option",23),o.\u0275\u0275text(9,"page"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(10,"mat-option",24),o.\u0275\u0275text(11,"form"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(12,"mat-option",25),o.\u0275\u0275text(13,"json"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(14,"div",26),o.\u0275\u0275elementStart(15,"mat-form-field"),o.\u0275\u0275elementStart(16,"mat-select",27),o.\u0275\u0275elementStart(17,"mat-option",28),o.\u0275\u0275text(18,"gridless"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(19,"mat-option",29),o.\u0275\u0275text(20,"split"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(21,q3,1,0,"ng-container",30),o.\u0275\u0275template(22,K3,2,0,"div",31)),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngIf",!t.nested),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.nested),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.nested),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",t.savable),o.\u0275\u0275advance(17),o.\u0275\u0275property("ngTemplateOutlet",t.extraActionsAreaTmpl),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!t.nested)}}function W3(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",42),o.\u0275\u0275listener("mousedown",function(){o.\u0275\u0275restoreView(t);const s=o.\u0275\u0275nextContext().i;return o.\u0275\u0275nextContext().editor.applyStyle(s)})("touchstart",function(){o.\u0275\u0275restoreView(t);const s=o.\u0275\u0275nextContext().i;return o.\u0275\u0275nextContext().editor.applyStyle(s)}),o.\u0275\u0275text(1,"Apply Style"),o.\u0275\u0275elementEnd()}}function J3(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",42),o.\u0275\u0275listener("mousedown",function(){o.\u0275\u0275restoreView(t);const s=o.\u0275\u0275nextContext().i;return o.\u0275\u0275nextContext().editor.removeStyle(s)})("touchstart",function(){o.\u0275\u0275restoreView(t);const s=o.\u0275\u0275nextContext().i;return o.\u0275\u0275nextContext().editor.removeStyle(s)}),o.\u0275\u0275text(1,"Remove Style"),o.\u0275\u0275elementEnd()}}function Q3(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div",43),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext().i,r=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(r.editor.panelStyleTitle(t))}}function Y3(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",36),o.\u0275\u0275elementStart(1,"mat-icon"),o.\u0275\u0275text(2,"arrow_drop_down"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"mat-menu",null,37),o.\u0275\u0275elementStart(5,"button",5),o.\u0275\u0275listener("mousedown",function(){const a=o.\u0275\u0275restoreView(t).i;return o.\u0275\u0275nextContext(),o.\u0275\u0275reference(22).layoutSettings("column",a)}),o.\u0275\u0275text(6,"Layout Settings"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"button",38),o.\u0275\u0275listener("mousedown",function(){const a=o.\u0275\u0275restoreView(t).i;return o.\u0275\u0275nextContext().editor.addContent(a)})("touchstart",function(){const a=o.\u0275\u0275restoreView(t).i;return o.\u0275\u0275nextContext().editor.addContent(a)}),o.\u0275\u0275text(8,"Add Content"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"button",38),o.\u0275\u0275listener("mousedown",function(){const a=o.\u0275\u0275restoreView(t).i;return o.\u0275\u0275nextContext().editor.editPanelProps(a)})("touchstart",function(){const a=o.\u0275\u0275restoreView(t).i;return o.\u0275\u0275nextContext().editor.editPanelProps(a)}),o.\u0275\u0275text(10,"Props"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(11,W3,2,0,"button",39),o.\u0275\u0275template(12,J3,2,0,"button",39),o.\u0275\u0275elementStart(13,"button",40),o.\u0275\u0275listener("mousedown",function(){const a=o.\u0275\u0275restoreView(t).i;return o.\u0275\u0275nextContext(),o.\u0275\u0275reference(22).removeColumn2(a)})("touchstart",function(){const a=o.\u0275\u0275restoreView(t).i;return o.\u0275\u0275nextContext(),o.\u0275\u0275reference(22).removeColumn2(a)}),o.\u0275\u0275text(14,"Delete"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(15,Q3,2,1,"div",41)}if(2&e){const t=n.i,r=o.\u0275\u0275reference(4),s=o.\u0275\u0275nextContext();o.\u0275\u0275property("matMenuTriggerFor",r),o.\u0275\u0275advance(11),o.\u0275\u0275property("ngIf",!s.editor.hasPanelStyle(t)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",s.editor.hasPanelStyle(t)),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",s.editor.hasPanelStyle(t))}}function Z3(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function ej(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div",47),o.\u0275\u0275template(1,Z3,1,0,"ng-container",48),o.\u0275\u0275elementEnd()),2&e){const t=n.index,r=o.\u0275\u0275nextContext().i,s=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",s.editablePaneTpl)("ngTemplateOutletContext",o.\u0275\u0275pureFunction2(2,lv,r,t))}}function tj(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"ngx-dropzone",44),o.\u0275\u0275listener("change",function(s){const l=o.\u0275\u0275restoreView(t).i;return o.\u0275\u0275nextContext().editor.onFileChange(s,l)})("cdkDropListDropped",function(s){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.onDrop(s)}),o.\u0275\u0275elementStart(1,"div",null,45),o.\u0275\u0275template(3,ej,2,5,"div",46),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){const t=n.i,r=o.\u0275\u0275nextContext();o.\u0275\u0275property("cdkDropListData",t)("multiple",!0)("disableClick",!0),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngForOf",r.editor.panelPanes(t).controls)}}function nj(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",16),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.submit()}),o.\u0275\u0275text(1,"Save"),o.\u0275\u0275elementEnd()}}function rj(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",17),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.onRulesClick()}),o.\u0275\u0275text(1,"Rules"),o.\u0275\u0275elementEnd()}}function ij(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",5),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.onPersistenceClick()}),o.\u0275\u0275text(1,"Persistence"),o.\u0275\u0275elementEnd()}}function oj(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",5),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.onInteractionsClick()}),o.\u0275\u0275text(1,"Interactions"),o.\u0275\u0275elementEnd()}}function sj(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",17),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().editor.onDeleteClick()}),o.\u0275\u0275text(1,"Delete"),o.\u0275\u0275elementEnd()}}function aj(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function lj(e,n){if(1&e&&o.\u0275\u0275template(0,aj,1,0,"ng-container",2),2&e){const t=n.i,r=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngTemplateOutlet",r.renderPanelTpl)("ngTemplateOutletContext",o.\u0275\u0275pureFunction1(2,Gl,t))}}let Cj=(()=>{class e{constructor(t){this.attributeMatcher=t,this.dashboard=[],this.layoutSetting=new Fn,this.rowSettings=[],this.columnSettings=[]}get totalRows(){return 0==this.dashboard.length?0:this.dashboard.reduce((t,r)=>r.y>t?r.y:t,0)+1}get direction(){const t=this.attributeMatcher.getComputedValue("direction",this.layoutSetting?this.layoutSetting.settings:[]);return!t||"column"!==t.trim()&&"row"!==t.trim()?"column":t}ngOnInit(){console.log(this.dashboard)}itemIndex(t,r){return this.dashboard.findIndex(s=>s.y===t&&s.x===r)}totalColumns(t){return this.dashboard.reduce((r,s)=>s.y===t?r+1:r,0)}rowDirection(t){const r=this.attributeMatcher.getComputedValue("direction",this.rowSettings&&this.rowSettings[t]?this.rowSettings[t].settings:[]);return!r||"column"!==r.trim()&&"row"!==r.trim()?"row":r}rowFlex(t){return["flexGrow","flexShrink","flexBasis"].map(l=>this.attributeMatcher.getComputedValue(l,this.rowSettings&&this.rowSettings[t]?this.rowSettings[t].settings:[])).map(l=>null!=l&&""!==l&&""!==l.trim()?`${l.trim()}`:"").join(" ")}gridItemInnerStyles(t,r){const s=this.itemIndex(t,r);return{height:this.calculateHeight(this.attributeMatcher.getComputedValue("height",this.columnSettings&&this.columnSettings[s]?this.columnSettings[s].settings:[]))}}calculateHeight(t){return null!=t?t.trim():"auto"}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Ct.AttributeMatcherService))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-flex-layout"]],contentQueries:function(t,r,s){if(1&t&&o.\u0275\u0275contentQuery(s,Oh,5),2&t){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r.innerGridItemTmpl=a.first)}},inputs:{dashboard:"dashboard",layoutSetting:"layoutSetting",rowSettings:"rowSettings",columnSettings:"columnSettings"},decls:2,vars:2,consts:[["fxFill","",3,"fxLayout"],[3,"fxFlex",4,"for"],[3,"fxFlex"],[3,"fxLayout","ngStyle"],["hidden",""],[1,"grid-item-inner",3,"ngStyle"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275template(1,LN,3,5,"div",1),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("fxLayout",r.direction),o.\u0275\u0275advance(1),o.\u0275\u0275property("for",r.totalRows))},directives:[An,ue,on.ForDirective,Ut,C.NgStyle,Co,C.NgTemplateOutlet],styles:[""]}),e})(),Gb=(()=>{class e{constructor(){this.itemAdded=new o.EventEmitter,this.itemRemoved=new o.EventEmitter,this.dashboard=[],this.displayMainControls=!0,this.displayItemHeader=!0,this.itemHeights=[],this.rows=0}get grid(){return this.dashboard}get cumulativeHeight(){const t=[];return this.heightsMatrix.forEach(r=>{t.push(this.itemHeights.reduce((s,a)=>a>s?a:s))}),t.reduce((r,s)=>r+s)}get heightsMatrix(){return this.dashboard.reduce((t,r,s)=>(t[r.y]=void 0!==t[r.y]?[...t[r.y],this.itemHeights[s]]:[this.itemHeights[s]],t),[])}ngOnInit(){}removeItem(t){this.dashboard.splice(t,1),this.itemHeights.splice(t,1),this.itemRemoved.emit(t)}addColumn(){console.log("add column grid"),this.dashboard.push({cols:1,rows:1,y:0,x:this.dashboard.length}),this.itemAdded.emit()}addRow(){this.dashboard.push({cols:1,rows:1,y:this.rows++,x:0}),this.itemAdded.emit()}setItemContentHeight(t,r){this.itemHeights[t]=r+(this.displayItemHeader?this.itemHeaderHeight(t):0),this.refreshGridHeight()}refreshGridHeight(){this.gridHeight=this.cumulativeHeight+16*this.gridster.rows}itemHeaderHeight(t){return this.itemHeaders.find((r,s)=>s===t).nativeElement.offsetHeight}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-grid-layout"]],contentQueries:function(t,r,s){if(1&t&&(o.\u0275\u0275contentQuery(s,sv,5),o.\u0275\u0275contentQuery(s,Oh,5),o.\u0275\u0275contentQuery(s,av,5)),2&t){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r.gridItemActionsTmpl=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r.innerGridItemTmpl=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r.extraActionsTmpl=a.first)}},viewQuery:function(t,r){if(1&t&&(o.\u0275\u0275viewQuery(rv,5),o.\u0275\u0275viewQuery(Lb,5),o.\u0275\u0275viewQuery(zb,5)),2&t){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.gridster=s.first),o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.mainControls=s.first),o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.itemHeaders=s)}},inputs:{dashboard:"dashboard",displayMainControls:"displayMainControls",displayItemHeader:"displayItemHeader",options:"options"},outputs:{itemAdded:"itemAdded",itemRemoved:"itemRemoved"},decls:11,vars:6,consts:[[1,"layout-wrapper"],[1,"main-controls",3,"hidden"],["mainControls",""],["type","button",3,"mousedown"],[4,"ngTemplateOutlet"],[1,"layout-inner"],[3,"options"],[3,"item",4,"ngFor","ngForOf"],[3,"item"],["fxLayout","column","fxFill",""],["fxFlex","0 1 auto",1,"grid-item-header",3,"hidden"],["itemHeader",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button",1,"delete",3,"mousedown","touchstart"],["fxFlex","",1,"grid-item-inner"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div",1,2),o.\u0275\u0275elementStart(3,"button",3),o.\u0275\u0275listener("mousedown",function(){return r.addColumn()}),o.\u0275\u0275text(4,"Add Column"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"button",3),o.\u0275\u0275listener("mousedown",function(){return r.addRow()}),o.\u0275\u0275text(6,"Add Row"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(7,zN,1,0,"ng-container",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(8,"div",5),o.\u0275\u0275elementStart(9,"gridster",6),o.\u0275\u0275template(10,VN,9,10,"gridster-item",7),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("hidden",!r.displayMainControls),o.\u0275\u0275advance(6),o.\u0275\u0275property("ngTemplateOutlet",r.extraActionsTmpl),o.\u0275\u0275advance(1),o.\u0275\u0275styleProp("height",r.gridHeight,"px"),o.\u0275\u0275advance(1),o.\u0275\u0275property("options",r.options),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",r.dashboard))},directives:[rv,DN,C.NgTemplateOutlet,C.NgForOf,ue,An,Ut],styles:[".layout-wrapper[_ngcontent-%COMP%], .layout-inner[_ngcontent-%COMP%]{height:100%}.grid-item-header[_ngcontent-%COMP%]{background-color:#ccc;padding:.5em}button.delete[_ngcontent-%COMP%]{float:right}.main-controls[_ngcontent-%COMP%]{background-color:#fff;padding:.5em}"]}),e})(),Vb=(()=>{class e{constructor(){this.displayMainControls=!0,this.displayItemHeader=!0,this.nested=!1}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-gridless-layout"]],contentQueries:function(t,r,s){if(1&t&&(o.\u0275\u0275contentQuery(s,sv,5),o.\u0275\u0275contentQuery(s,Oh,5),o.\u0275\u0275contentQuery(s,av,5)),2&t){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r.gridItemActionsTmpl=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r.innerGridItemTmpl=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r.extraActionsTmpl=a.first)}},hostVars:2,hostBindings:function(t,r){2&t&&o.\u0275\u0275classProp("is-nested",r.nested)},inputs:{displayMainControls:"displayMainControls",displayItemHeader:"displayItemHeader",nested:"nested"},decls:11,vars:9,consts:[[1,"layout-wrapper"],[1,"main-controls",3,"hidden"],["mainControls",""],[4,"ngTemplateOutlet"],[1,"layout-inner"],["fxLayout","column","fxFill",""],["fxFlex","0 1 auto",1,"grid-item-header",3,"hidden"],["itemHeader",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["fxFlex","",1,"grid-item-inner"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div",1,2),o.\u0275\u0275template(3,$N,1,0,"ng-container",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"div",4),o.\u0275\u0275elementStart(5,"div",5),o.\u0275\u0275elementStart(6,"div",6,7),o.\u0275\u0275template(8,HN,1,0,"ng-container",8),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"div",9),o.\u0275\u0275template(10,qN,1,0,"ng-container",8),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("hidden",!r.displayMainControls),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngTemplateOutlet",r.extraActionsTmpl),o.\u0275\u0275advance(3),o.\u0275\u0275property("hidden",!r.displayItemHeader),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngTemplateOutlet",r.gridItemActionsTmpl)("ngTemplateOutletContext",o.\u0275\u0275pureFunction0(7,Ub)),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngTemplateOutlet",r.innerGridItemTmpl)("ngTemplateOutletContext",o.\u0275\u0275pureFunction0(8,Ub)))},directives:[C.NgTemplateOutlet,ue,An,Ut],styles:[".layout-wrapper[_ngcontent-%COMP%], .layout-inner[_ngcontent-%COMP%]{height:100%}.is-nested[_nghost-%COMP%]   .layout-wrapper[_ngcontent-%COMP%]{padding:0 .25em;border:1px solid #ccc}.main-controls[_ngcontent-%COMP%]{display:flex;padding:0;align-items:baseline;border-bottom:1px solid #ccc;margin-bottom:.25em}.grid-item-header[_ngcontent-%COMP%]{padding:0;display:flex;align-items:baseline}"]}),e})(),xj=(()=>{class e{constructor(t){this.fb=t,this.settingValues=[],this.layoutForm=this.fb.group({settings:this.fb.control("")}),this.onTouched=()=>{}}get attributes(){return this.layout.settings.has(this.type)?this.layout.settings.get(this.type):[]}ngOnInit(){}writeValue(t){t&&this.layoutForm.setValue(t,{emitEvent:!1})}registerOnChange(t){this.layoutForm.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.layoutForm.disable():this.layoutForm.enable()}validate(t){return this.layoutForm.valid?null:{invalidForm:{valid:!1,message:"layout is invalid"}}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-layout-form"]],inputs:{layout:"layout",type:"type",settingValues:"settingValues"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>e),multi:!0}])],decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","settings",3,"attributes","attributeValues"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275element(1,"classifieds-ui-attributes-builder",1),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.layoutForm),o.\u0275\u0275advance(1),o.\u0275\u0275property("attributes",r.attributes)("attributeValues",r.settingValues))},directives:[Ct.AttributesBuilderComponent,d.JL,d.sg,d.JJ,d.u],styles:[""]}),e})(),Sj=(()=>{class e{constructor(t,r,s,a){this.data=t,this.dialogRef=r,this.valueComputerService=s,this.fb=a,this.settingValues=[],this.dialogForm=this.fb.group({layout:this.fb.control("")})}get attrValues(){return""===this.dialogForm.get("layout").value?this.settingValues:this.dialogForm.get("layout").value.settings.map(t=>new Ct.AttributeValue(t))}ngOnInit(){this.layout=this.data.layout,this.type=this.data.type,this.settingValues=this.data.settingValues}submit(){console.log(this.attrValues);const t=this.valueComputerService.compute(this.attrValues);this.dialogRef.close(t)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(Ct.ValueComputerService),o.\u0275\u0275directiveInject(d.qu))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-layout-dialog"]],decls:6,vars:5,consts:[[1,"layout-form",3,"formGroup","ngSubmit"],["formControlName","layout",3,"layout","type","settingValues"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return r.submit()}),o.\u0275\u0275elementStart(1,"mat-dialog-content"),o.\u0275\u0275element(2,"druid-layout-form",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"mat-dialog-actions"),o.\u0275\u0275elementStart(4,"button",2),o.\u0275\u0275text(5,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.dialogForm),o.\u0275\u0275advance(2),o.\u0275\u0275property("layout",r.layout)("type",r.type)("settingValues",r.settingValues),o.\u0275\u0275advance(2),o.\u0275\u0275property("disabled",!r.dialogForm.valid))},directives:[xj,Dr.lW,d._Y,d.JL,d.sg,Dt.xY,d.JJ,d.u,Dt.H8,Dt.ZT],styles:[""]}),e})(),Fh=(()=>{class e extends en.BasePluginManager{constructor(t,r){super(t,r)}pluginDef(){return(0,Be.of)(new en.PluginDef({name:"layout"}))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(en.PluginConfigurationManager),o.\u0275\u0275inject(on.ModuleLoaderService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),$b=(()=>{class e{constructor(t,r,s){this.el=t,this.dialog=r,this.lpm=s,this.itemAdded=new o.EventEmitter,this.itemRemoved=new o.EventEmitter,this.dashboard=[],this.displayMainControls=!0,this.displayItemHeader=!0,this.nested=!1,this.layoutSettingChange=new o.EventEmitter,this.rowSettingsChange=new o.EventEmitter,this.columnSettingsChange=new o.EventEmitter,this.rows=0,this.sizes=[]}get totalRows(){return 0==this.dashboard.length?0:this.dashboard.reduce((t,r)=>r.y>t?r.y:t,0)+1}ngOnInit(){if(0===this.dashboard.length)this.addRow();else{for(let r=0;r<this.totalRows;r++){const s=this.totalColumns(r);this.sizes.push([]);for(let a=0;a<s;a++){const l=this.itemIndex(r,a);this.sizes[r].push(this.dashboard[l].cols)}}if(this.totalRows!==this.rowSettings.length&&0===this.rowSettings.length){const r=[];for(let s=0;s<this.totalRows;s++)r.push(new Fn);this.rowSettings=r,this.rowSettingsChange.emit(this.rowSettings)}let t=0;for(let r=0;r<this.totalRows;r++)t+=this.totalColumns(r);if(t!==this.columnSettings.length&&0===this.columnSettings.length){const r=[];for(let s=0;s<this.totalRows;s++)for(let a=0;a<this.totalColumns(s);a++)r.push(new Fn);this.columnSettings=r,this.columnSettingsChange.emit(this.columnSettings)}}}removeRow(t){const r=this.dashboard.reduce((l,u,p)=>[...l,...u.y===t?[p]:[]],[]);let s=r.length,a=0;for(let l=0;l<s;l++)this.dashboard.splice(r[l]-a,1),this.rowSettings.splice(t,1),a++,this.itemRemoved.emit(r[l]),this.rowSettingsChange.emit(this.rowSettings);s=this.dashboard.length;for(let l=0;l<s;l++)this.dashboard[l].y>t&&(this.dashboard[l].y=this.dashboard[l].y-1)}removeColumn(t,r){const s=this.itemIndex(t,r);this.dashboard.splice(s,1),this.itemRemoved.emit(s)}removeColumn2(t){this.dashboard.splice(t,1),this.itemRemoved.emit(t)}addRow(){this.sizes.push([]),this.rowSettings=[...this.rowSettings.map(t=>new Fn(t)),new Fn],this.addColumn(0===this.totalRows?0:this.totalRows),this.rowSettingsChange.emit(this.rowSettings)}addColumn(t){const r=this.totalColumns(t),s=0===r?100:100/(r+1);this.sizes[t][r]=s,this.dashboard.push({cols:s,rows:1,y:t,x:r}),this.itemAdded.emit(),setTimeout(()=>this.resetGutter())}dragEnd(t,{sizes:r}){const s=this.dashboard.length;let a=0;this.sizes[t]=[...r];const l=this.dashboard.map(u=>({...u}));for(let u=0;u<s;u++)this.dashboard[u].y===t&&(l[u].cols=r[a],a+=1);this.dashboard=l}itemIndex(t,r){return this.dashboard.findIndex(s=>s.y===t&&s.x===r)}itemSize(t,r){return this.dashboard[this.itemIndex(t,r)].cols}totalColumns(t){return this.dashboard.reduce((r,s)=>s.y===t?r+1:r,0)}resetGutter(){this.el.nativeElement.querySelectorAll(".as-split-gutter").forEach(t=>{t.style.height="auto"})}settingValues(t,r){switch(t){case"column":return this.columnSettings[r].settings;case"row":return this.rowSettings[r].settings;case"global":return this.layoutSetting.settings;default:return[]}}layoutSettings(t,r){this.lpm.getPlugin("split").pipe((0,tt.w)(s=>this.dialog.open(Sj,{data:{layout:s,type:t,settingValues:this.settingValues(t,r)}}).afterClosed()),(0,U.h)(s=>!!s)).subscribe(s=>{switch(t){case"column":this.columnSettings=this.columnSettings.map((a,l)=>new Fn(l===r?{settings:s.map(u=>new Ct.AttributeValue(u))}:a)),console.log(this.columnSettings),this.columnSettingsChange.emit(this.columnSettings);break;case"row":this.rowSettings=this.rowSettings.map((a,l)=>new Fn(l===r?{settings:s.map(u=>new Ct.AttributeValue(u))}:a)),console.log(this.rowSettings),this.rowSettingsChange.emit(this.rowSettings);break;case"global":this.layoutSetting=new Fn({settings:s.map(a=>new Ct.AttributeValue(a))}),this.layoutSettingChange.emit(this.layoutSetting)}})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(Dt.uw),o.\u0275\u0275directiveInject(Fh))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-split-layout"]],contentQueries:function(t,r,s){if(1&t&&(o.\u0275\u0275contentQuery(s,sv,5),o.\u0275\u0275contentQuery(s,Oh,5),o.\u0275\u0275contentQuery(s,av,5)),2&t){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r.gridItemActionsTmpl=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r.innerGridItemTmpl=a.first),o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r.extraActionsTmpl=a.first)}},viewQuery:function(t,r){if(1&t&&(o.\u0275\u0275viewQuery(Lb,5),o.\u0275\u0275viewQuery(zb,5),o.\u0275\u0275viewQuery(Gd,5)),2&t){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.mainControls=s.first),o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.itemHeaders=s),o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.splitAreas=s)}},hostVars:2,hostBindings:function(t,r){2&t&&o.\u0275\u0275classProp("is-nested",r.nested)},inputs:{dashboard:"dashboard",displayMainControls:"displayMainControls",displayItemHeader:"displayItemHeader",nested:"nested",layoutSetting:"layoutSetting",rowSettings:"rowSettings",columnSettings:"columnSettings"},outputs:{itemAdded:"itemAdded",itemRemoved:"itemRemoved",layoutSettingChange:"layoutSettingChange",rowSettingsChange:"rowSettingsChange",columnSettingsChange:"columnSettingsChange"},decls:6,vars:3,consts:[[1,"layout-wrapper"],[1,"main-controls",3,"hidden"],["mainControls",""],[4,"ngTemplateOutlet"],[1,"layout-inner"],["class","rows-wrapper",4,"for"],[1,"rows-wrapper"],[1,"row-controls"],["mat-button","","type","button",3,"matMenuTriggerFor"],["rowActions","matMenu"],["type","button","mat-menu-item","",3,"mousedown"],["type","button","mat-menu-item","",1,"remove-row",3,"mousedown"],[1,"rows-inner"],["unit","percent","direction","horizontal",3,"dragEnd"],[3,"size",4,"for"],[3,"size"],["fxLayout","column","fxFill",""],[1,"grid-item-header",3,"hidden"],["itemHeader",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["fxFlex","",1,"grid-item-inner"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div",1,2),o.\u0275\u0275template(3,KN,1,0,"ng-container",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"div",4),o.\u0275\u0275template(5,QN,16,2,"div",5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("hidden",!r.displayMainControls),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngTemplateOutlet",r.extraActionsTmpl),o.\u0275\u0275advance(2),o.\u0275\u0275property("for",r.totalRows))},directives:[Dr.lW,pf.Hw,Ni.VK,Ni.OP,Ud,C.NgTemplateOutlet,on.ForDirective,Ni.p6,Gd,ue,An,Ut],styles:[".layout-wrapper[_ngcontent-%COMP%], .layout-inner[_ngcontent-%COMP%]{height:100%}.grid-item-header[_ngcontent-%COMP%]{padding:0;display:flex;align-items:baseline}button.delete[_ngcontent-%COMP%]{float:right}.main-controls[_ngcontent-%COMP%]{display:flex;padding:0;align-items:baseline}.rows-inner[_ngcontent-%COMP%]{height:auto;background-color:#fff}.row-controls[_ngcontent-%COMP%]{background-color:gray;padding:0}.remove-row[_ngcontent-%COMP%]{float:right}.is-nested[_nghost-%COMP%]   .layout-wrapper[_ngcontent-%COMP%]{padding:0 .25em;border:1px solid #ccc}.mat-menu-trigger[_ngcontent-%COMP%]{min-width:0;padding:0;margin:0;color:#fff}.mat-menu-trigger[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{transform:rotate(-90deg)}"]}),e})();class Hb extends en.Plugin{constructor(n){if(super(n),this.settings=new Map,n.settings){const t=[];this.renderer=n.renderer,this.editor=n.editor,n.settings.forEach((r,s)=>{t.push([s,r.map(a=>new Ct.Attribute(a))])}),this.settings=new Map(t)}}}let qb=(()=>{class e{constructor(t,r,s,a){this.siteName=t,this.authFacade=r,this.controlContainer=s,this.close=new o.EventEmitter,this.panelPageListItemsService=a.getEntityCollectionService("PanelPageListItem")}ngOnInit(){this.panelPageListItems$=this.panelPageListItemsService.getWithQuery(`site=${encodeURIComponent(`{"term":{"site.keyword":{"value":"${this.siteName}"}}}`)}`),this.isAuthenticated$=this.authFacade.getUser$.pipe((0,be.U)(t=>!!t))}login(){this.authFacade.login()}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(on.SITE_NAME),o.\u0275\u0275directiveInject(ei),o.\u0275\u0275directiveInject(d.gN),o.\u0275\u0275directiveInject(Yn))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-layout-sidenav"]],outputs:{close:"close"},ngContentSelectors:t3,decls:12,vars:6,consts:[[1,"close-wrapper"],[3,"click"],["type","button","class","login","mat-button","",3,"click",4,"ngIf"],[1,"viewport-container"],["appendOnly","","itemSize","48",1,"viewport"],["class","pp-item",4,"cdkVirtualFor","cdkVirtualForOf"],["type","button","mat-button","",1,"login",3,"click"],[1,"pp-item"],[3,"routerLink"]],template:function(t,r){1&t&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"mat-icon",1),o.\u0275\u0275listener("click",function(){return r.close.emit()}),o.\u0275\u0275text(2,"close"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(3,YN,2,0,"button",2),o.\u0275\u0275pipe(4,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(5,"mat-divider"),o.\u0275\u0275projection(6),o.\u0275\u0275element(7,"mat-divider"),o.\u0275\u0275elementStart(8,"div",3),o.\u0275\u0275elementStart(9,"cdk-virtual-scroll-viewport",4),o.\u0275\u0275template(10,e3,3,4,"div",5),o.\u0275\u0275pipe(11,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",!o.\u0275\u0275pipeBind1(4,2,r.isAuthenticated$)),o.\u0275\u0275advance(7),o.\u0275\u0275property("cdkVirtualForOf",o.\u0275\u0275pipeBind1(11,4,r.panelPageListItems$)))},directives:[pf.Hw,Dr.lW,MN.d,uc.N7,C.NgIf,uc.xd,uc.x0,Pn.RouterLinkWithHref],pipes:[C.AsyncPipe],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column}.close-wrapper[_ngcontent-%COMP%]{padding:16px 16px 0;position:relative}.login[_ngcontent-%COMP%]{position:absolute;top:7px;right:5px}.pp-item[_ngcontent-%COMP%]{line-height:48px}.viewport[_ngcontent-%COMP%]{height:100%;width:300px}.viewport-container[_ngcontent-%COMP%]{flex:1;padding:0 0 0 16px;box-sizing:border-box}"]}),e})(),Ej=(()=>{class e extends fb{constructor(t,r,s,a){super(s),this.siteName=t,this.authFacade=r,this.controlContainer=s,this.panelPageListItemsService=a.getEntityCollectionService("PanelPageListItem")}ngOnInit(){this.panelPageListItems$=this.panelPageListItemsService.getWithQuery(`site=${encodeURIComponent(`{"term":{"site.keyword":{"value":"${this.siteName}"}}}`)}`),this.isAuthenticated$=this.authFacade.getUser$.pipe((0,be.U)(t=>!!t))}login(){this.authFacade.login()}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(on.SITE_NAME),o.\u0275\u0275directiveInject(ei),o.\u0275\u0275directiveInject(d.gN),o.\u0275\u0275directiveInject(Yn))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-gridless-layout-editor"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:42,vars:19,consts:[["autosize","",3,"hasBackdrop"],["fixedInViewport","","mode","over"],["drawer",""],[3,"close"],[4,"ngIf"],["type","button","mat-menu-item","",3,"mousedown","touchstart"],["cdkDropListGroup","",3,"formGroup","nested"],["extraActions",""],["gridItemActions",""],["innerGridItem",""],["topActions","matMenu"],["mat-menu-item","","type","submit",3,"click",4,"ngIf"],["type","button","mat-menu-item","",3,"click",4,"ngIf"],["type","button","mat-menu-item","",3,"mousedown",4,"ngIf"],["mat-menu-item","","type","button",3,"mousedown","touchstart",4,"ngIf"],["mat-menu-item","","type","submit",3,"click"],["type","button","mat-menu-item","",3,"click"],["type","button","mat-menu-item","",3,"mousedown"],["mat-menu-item","","type","button",3,"mousedown","touchstart"],["mat-button","","type","button","class","drawer-trigger",3,"click",4,"ngIf"],["mat-button","","type","button",3,"matMenuTriggerFor",4,"ngIf"],["class","style-title",4,"ngIf"],["class","spacer",4,"ngIf"],[4,"ngTemplateOutlet"],[1,"display-type"],["required","","formControlName","displayType"],["value","page"],["value","form"],["value","json"],[1,"layout-type"],["required","","formControlName","layoutType"],["value","grid"],["value","gridless"],["value","split"],["class","brand",4,"ngIf"],["mat-button","","type","button",1,"drawer-trigger",3,"click"],["mat-button","","type","button",3,"matMenuTriggerFor"],[1,"style-title"],[1,"spacer"],[1,"brand"],["cdkDropList","",1,"panel-dropzone",3,"cdkDropListData","multiple","disableClick","change","cdkDropListDropped"],["panes",""],["cdkDrag","",4,"ngFor","ngForOf"],["cdkDrag",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,r){if(1&t){const s=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"mat-sidenav-container",0),o.\u0275\u0275elementStart(1,"mat-sidenav",1,2),o.\u0275\u0275elementStart(3,"druid-layout-sidenav",3),o.\u0275\u0275listener("close",function(){return o.\u0275\u0275restoreView(s),o.\u0275\u0275reference(2).toggle()}),o.\u0275\u0275elementStart(4,"nav"),o.\u0275\u0275elementStart(5,"ul"),o.\u0275\u0275template(6,n3,3,0,"li",4),o.\u0275\u0275template(7,r3,3,0,"li",4),o.\u0275\u0275template(8,o3,3,0,"li",4),o.\u0275\u0275template(9,s3,3,0,"li",4),o.\u0275\u0275template(10,a3,3,0,"li",4),o.\u0275\u0275template(11,l3,3,0,"li",4),o.\u0275\u0275elementStart(12,"li"),o.\u0275\u0275elementStart(13,"button",5),o.\u0275\u0275listener("mousedown",function(){return r.editor.addContent(0)})("touchstart",function(){return r.editor.addContent(0)}),o.\u0275\u0275text(14,"Add Content"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(15,"li"),o.\u0275\u0275elementStart(16,"button",5),o.\u0275\u0275listener("mousedown",function(){return r.editor.editPanelProps(0)})("touchstart",function(){return r.editor.editPanelProps(0)}),o.\u0275\u0275text(17,"Props"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(18,u3,3,0,"li",4),o.\u0275\u0275template(19,c3,3,0,"li",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(20,"mat-sidenav-content"),o.\u0275\u0275elementStart(21,"classifieds-ui-gridless-layout",6),o.\u0275\u0275template(22,b3,26,7,"ng-template",null,7,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(24,C3,1,1,"ng-template",null,8,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(26,E3,4,4,"ng-template",null,9,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(28,"mat-menu",null,10),o.\u0275\u0275template(30,A3,2,0,"button",11),o.\u0275\u0275template(31,P3,2,0,"button",12),o.\u0275\u0275template(32,I3,2,0,"button",12),o.\u0275\u0275template(33,T3,2,0,"button",12),o.\u0275\u0275template(34,R3,2,0,"button",13),o.\u0275\u0275template(35,k3,2,0,"button",13),o.\u0275\u0275elementStart(36,"button",5),o.\u0275\u0275listener("mousedown",function(){return r.editor.addContent(0)})("touchstart",function(){return r.editor.addContent(0)}),o.\u0275\u0275text(37,"Add Content"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(38,"button",5),o.\u0275\u0275listener("mousedown",function(){return r.editor.editPanelProps(0)})("touchstart",function(){return r.editor.editPanelProps(0)}),o.\u0275\u0275text(39,"Props"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(40,O3,2,0,"button",14),o.\u0275\u0275template(41,F3,2,0,"button",14),o.\u0275\u0275elementEnd()}2&t&&(o.\u0275\u0275property("hasBackdrop",!1),o.\u0275\u0275advance(6),o.\u0275\u0275property("ngIf",r.savable),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.savable||r.nested),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.nested),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.nested),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.savable),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.savable),o.\u0275\u0275advance(7),o.\u0275\u0275property("ngIf",!r.editor.hasPanelStyle(0)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.editor.hasPanelStyle(0)),o.\u0275\u0275advance(2),o.\u0275\u0275property("formGroup",r.controlContainer.control)("nested",r.nested),o.\u0275\u0275advance(9),o.\u0275\u0275property("ngIf",r.savable),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.savable||r.nested),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.nested),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.nested),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.savable),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.savable),o.\u0275\u0275advance(5),o.\u0275\u0275property("ngIf",!r.editor.hasPanelStyle(0)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.editor.hasPanelStyle(0)))},directives:[lc.TM,lc.JX,qb,Ni.OP,lc.Rh,Vb,Dr.lW,pf.Hw,Yt.KE,oi.gD,cr.ey,wh,Ni.VK,C.NgIf,Ul.Fd,d.JL,d.sg,Ni.p6,C.NgTemplateOutlet,d.Q7,d.JJ,d.u,Ul.Wj,C.NgForOf,Ul.Zt],styles:[".layout-type[_ngcontent-%COMP%]     .mat-form-field-wrapper, .display-type[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0}.layout-type[_ngcontent-%COMP%]     .mat-form-field-label-wrapper, .display-type[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{display:none}.layout-type[_ngcontent-%COMP%]     .mat-form-field-infix, .display-type[_ngcontent-%COMP%]     .mat-form-field-infix{border-top:none;padding:0;margin:0}.layout-type[_ngcontent-%COMP%]     .mat-form-field, .display-type[_ngcontent-%COMP%]     .mat-form-field{width:70px}.layout-type[_ngcontent-%COMP%]     .mat-select-value, .display-type[_ngcontent-%COMP%]     .mat-select-value{text-align:right}.layout-type[_ngcontent-%COMP%]     .mat-form-field-underline, .display-type[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.mat-menu-trigger[_ngcontent-%COMP%]{min-width:0;padding:0;margin:0}.cdk-drag[_ngcontent-%COMP%]{padding:.25em}.brand[_ngcontent-%COMP%]{font-family:sans-serif;text-align:right;flex:1;letter-spacing:.2em;font-weight:lighter;color:#c82913}.spacer[_ngcontent-%COMP%]{flex:1}.style-title[_ngcontent-%COMP%]{font-family:sans-serif;font-weight:500;text-transform:lowercase;color:#000}.mat-icon[_ngcontent-%COMP%]{color:#000}.drawer-trigger[_ngcontent-%COMP%]{min-width:0;padding:0;margin:0}"]}),e})(),Aj=(()=>{class e extends pb{constructor(t){super(t),this.controlContainer=t}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.gN,8))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-gridless-layout-renderer"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[[3,"displayMainControls","displayItemHeader"],["innerGridItem",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"classifieds-ui-gridless-layout",0),o.\u0275\u0275template(1,M3,1,4,"ng-template",null,1,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd()),2&t&&o.\u0275\u0275property("displayMainControls",r.displayMainControls)("displayItemHeader",r.displayItemHeader)},directives:[Vb,C.NgTemplateOutlet],styles:["[_nghost-%COMP%]{height:100%}"]}),e})(),Pj=(()=>{class e extends fb{constructor(t){super(t),this.controlContainer=t}get gridItems(){return this.dashboard.map((t,r)=>({...t,cols:Math.floor(t.cols),weight:r}))}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-split-layout-editor"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:42,vars:17,consts:[["autosize","",3,"hasBackdrop"],["fixedInViewport","","mode","over"],["drawer",""],[3,"close"],[4,"ngIf"],["type","button","mat-menu-item","",3,"mousedown"],["type","button","mat-menu-item","",3,"click"],["cdkDropListGroup","",3,"nested","formGroup","dashboard","layoutSetting","rowSettings","columnSettings","itemAdded","itemRemoved","layoutSettingChange","rowSettingsChange","columnSettingsChange"],["splitLayout",""],["extraActions",""],["gridItemActions",""],["innerGridItem",""],["topActions","matMenu"],["mat-menu-item","","type","submit",3,"click",4,"ngIf"],["mat-menu-item","","type","button",3,"click",4,"ngIf"],["type","button","mat-menu-item","",3,"mousedown",4,"ngIf"],["mat-menu-item","","type","submit",3,"click"],["mat-menu-item","","type","button",3,"click"],["mat-button","","type","button","class","drawer-trigger",3,"click",4,"ngIf"],["mat-button","","type","button",3,"matMenuTriggerFor",4,"ngIf"],["class","spacer",4,"ngIf"],[1,"display-type"],["required","","formControlName","displayType"],["value","page"],["value","form"],["value","json"],[1,"layout-type"],["required","","formControlName","layoutType"],["value","gridless"],["value","split"],[4,"ngTemplateOutlet"],["class","brand",4,"ngIf"],["mat-button","","type","button",1,"drawer-trigger",3,"click"],["mat-button","","type","button",3,"matMenuTriggerFor"],[1,"spacer"],[1,"brand"],["mat-button","","type","button",1,"panel-actions-btn",3,"matMenuTriggerFor"],["panelActions","matMenu"],["type","button","mat-menu-item","",3,"mousedown","touchstart"],["mat-menu-item","","type","button",3,"mousedown","touchstart",4,"ngIf"],["type","button","mat-menu-item","",1,"delete",3,"mousedown","touchstart"],["class","style-title",4,"ngIf"],["mat-menu-item","","type","button",3,"mousedown","touchstart"],[1,"style-title"],["cdkDropList","",1,"panel-dropzone",3,"cdkDropListData","multiple","disableClick","change","cdkDropListDropped"],["panes",""],["cdkDrag","",4,"ngFor","ngForOf"],["cdkDrag",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,r){if(1&t){const s=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"mat-sidenav-container",0),o.\u0275\u0275elementStart(1,"mat-sidenav",1,2),o.\u0275\u0275elementStart(3,"druid-layout-sidenav",3),o.\u0275\u0275listener("close",function(){return o.\u0275\u0275restoreView(s),o.\u0275\u0275reference(2).toggle()}),o.\u0275\u0275elementStart(4,"nav"),o.\u0275\u0275elementStart(5,"ul"),o.\u0275\u0275template(6,N3,3,0,"li",4),o.\u0275\u0275elementStart(7,"li"),o.\u0275\u0275elementStart(8,"button",5),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(s),o.\u0275\u0275reference(22).addRow()}),o.\u0275\u0275text(9,"Add Row"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(10,"li"),o.\u0275\u0275elementStart(11,"button",6),o.\u0275\u0275listener("click",function(){return r.editor.onPropertiesClick()}),o.\u0275\u0275text(12,"Props"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(13,"li"),o.\u0275\u0275elementStart(14,"button",5),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(s),o.\u0275\u0275reference(22).layoutSettings("global")}),o.\u0275\u0275text(15,"Layout Settings"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(16,j3,3,0,"li",4),o.\u0275\u0275template(17,B3,3,0,"li",4),o.\u0275\u0275template(18,L3,3,0,"li",4),o.\u0275\u0275template(19,z3,3,0,"li",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(20,"mat-sidenav-content"),o.\u0275\u0275elementStart(21,"classifieds-ui-split-layout",7,8),o.\u0275\u0275listener("itemAdded",function(){return r.editor.onItemAdded()})("itemRemoved",function(l){return r.editor.onItemRemoved(l)})("layoutSettingChange",function(l){return r.editor.onLayoutSettingChange(l)})("rowSettingsChange",function(l){return r.editor.onRowSettingsChange(l)})("columnSettingsChange",function(l){return r.editor.onColumnSettingsChange(l)}),o.\u0275\u0275template(23,X3,23,6,"ng-template",null,9,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(25,Y3,16,4,"ng-template",null,10,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(27,tj,4,4,"ng-template",null,11,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(29,"mat-menu",null,12),o.\u0275\u0275template(31,nj,2,0,"button",13),o.\u0275\u0275elementStart(32,"button",5),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(s),o.\u0275\u0275reference(22).addRow()}),o.\u0275\u0275text(33,"Add Row"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(34,"button",6),o.\u0275\u0275listener("click",function(){return r.editor.onPropertiesClick()}),o.\u0275\u0275text(35,"Props"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(36,"button",5),o.\u0275\u0275listener("mousedown",function(){return o.\u0275\u0275restoreView(s),o.\u0275\u0275reference(22).layoutSettings("global")}),o.\u0275\u0275text(37,"Layout Settings"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(38,rj,2,0,"button",14),o.\u0275\u0275template(39,ij,2,0,"button",15),o.\u0275\u0275template(40,oj,2,0,"button",15),o.\u0275\u0275template(41,sj,2,0,"button",14),o.\u0275\u0275elementEnd()}2&t&&(o.\u0275\u0275property("hasBackdrop",!1),o.\u0275\u0275advance(6),o.\u0275\u0275property("ngIf",r.savable),o.\u0275\u0275advance(10),o.\u0275\u0275property("ngIf",r.nested),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.savable),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.savable),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.nested),o.\u0275\u0275advance(2),o.\u0275\u0275property("nested",r.nested)("formGroup",r.controlContainer.control)("dashboard",r.dashboard)("layoutSetting",r.layoutSetting)("rowSettings",r.rowSettings)("columnSettings",r.columnSettings),o.\u0275\u0275advance(10),o.\u0275\u0275property("ngIf",r.savable),o.\u0275\u0275advance(7),o.\u0275\u0275property("ngIf",r.nested),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.savable),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.savable),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.nested))},directives:[lc.TM,lc.JX,qb,Ni.OP,lc.Rh,$b,Dr.lW,pf.Hw,Yt.KE,oi.gD,cr.ey,Ni.VK,wh,C.NgIf,Ul.Fd,d.JL,d.sg,Ni.p6,C.NgTemplateOutlet,d.Q7,d.JJ,d.u,Ul.Wj,C.NgForOf,Ul.Zt],styles:[".layout-type[_ngcontent-%COMP%]     .mat-form-field-wrapper, .display-type[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0}.layout-type[_ngcontent-%COMP%]     .mat-form-field-label-wrapper, .display-type[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{display:none}.layout-type[_ngcontent-%COMP%]     .mat-form-field-infix, .display-type[_ngcontent-%COMP%]     .mat-form-field-infix{border-top:none;padding:0;margin:0}.layout-type[_ngcontent-%COMP%]     .mat-form-field, .display-type[_ngcontent-%COMP%]     .mat-form-field{width:70px}.layout-type[_ngcontent-%COMP%]     .mat-select-value, .display-type[_ngcontent-%COMP%]     .mat-select-value{text-align:right}.layout-type[_ngcontent-%COMP%]     .mat-form-field-underline, .display-type[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.mat-menu-trigger[_ngcontent-%COMP%]{min-width:0;padding:0;margin:0}.cdk-drag[_ngcontent-%COMP%]{padding:.25em}.panel-actions-btn[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{transform:rotate(-90deg)}.brand[_ngcontent-%COMP%]{font-family:sans-serif;text-align:right;flex:1;letter-spacing:.2em;font-weight:lighter;color:#c82913}.spacer[_ngcontent-%COMP%]{flex:1}.style-title[_ngcontent-%COMP%]{font-family:sans-serif;font-weight:500;text-transform:lowercase;color:#000}.drawer-trigger[_ngcontent-%COMP%]{min-width:0;padding:0;margin:0}"]}),e})(),Ij=(()=>{class e extends pb{constructor(t){super(t),this.controlContainer=t}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.gN,8))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-flex-layout-renderer"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[3,"dashboard","layoutSetting","rowSettings","columnSettings"],["innerGridItem",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"classifieds-ui-flex-layout",0),o.\u0275\u0275template(1,lj,1,4,"ng-template",null,1,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd()),2&t&&o.\u0275\u0275property("dashboard",null==r.panelPage?null:r.panelPage.gridItems)("layoutSetting",r.panelPage.layoutSetting)("rowSettings",r.panelPage.rowSettings)("columnSettings",r.columnSettings)},directives:[Cj,C.NgTemplateOutlet],encapsulation:2}),e})();const Tj=()=>{const e=new Map([["row",[new Ct.Attribute({name:"flexGrow",type:Ct.AttributeTypes.Text,label:"Flex Grow",required:!1,widget:"text",options:{},attributes:[]}),new Ct.Attribute({name:"flexShrink",type:Ct.AttributeTypes.Text,label:"Flex Shrink",required:!1,widget:"text",options:{},attributes:[]}),new Ct.Attribute({name:"flexBasis",type:Ct.AttributeTypes.Text,label:"Flex Basis",required:!1,widget:"text",options:{},attributes:[]}),new Ct.Attribute({name:"height",type:Ct.AttributeTypes.Text,label:"Height",required:!1,widget:"text",options:{},attributes:[]}),new Ct.Attribute({name:"direction",type:Ct.AttributeTypes.Text,label:"Direction",required:!1,widget:"text",options:{},attributes:[]})]],["column",[new Ct.Attribute({name:"height",type:Ct.AttributeTypes.Text,label:"Height",required:!1,widget:"text",options:{},attributes:[]})]],["global",[new Ct.Attribute({name:"direction",type:Ct.AttributeTypes.Text,label:"Direction",required:!1,widget:"text",options:{},attributes:[]})]]]);return new Hb({id:"split",title:"Split",editor:Pj,renderer:Ij,settings:e})};let Kb=(()=>{class e{constructor(t){[Tj(),new Hb({id:"gridless",title:"Gridless",editor:Ej,renderer:Aj,settings:new Map})].forEach(r=>{t.register(r)})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Fh))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[C.CommonModule,d.u5,Pn.RouterModule,d.UX,ri.MaterialModule,al,sh,Bb,Ch,on.UtilsModule,Bd,Ct.AttributesModule]]}),e})();function kj(e,n){if(1&e&&o.\u0275\u0275element(0,"ngx-json-viewer",12),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275property("json",t.jsonData)("expanded",!1)}}class Dh{constructor(n){this.params=[],n&&(this.url=n.url,this.method=n.method?n.method:void 0,void 0!==n.renderer&&(this.renderer=new Ig(n.renderer)),void 0!==n.params&&(this.params=n.params.map(t=>new si(t))),n.body&&(this.body=new Ol(n.body)))}}let hf=(()=>{class e{constructor(t,r,s){this.fb=t,this.datasourceApi=r,this.tokenizerService=s,this.dataChange=new o.EventEmitter,this.contexts=[],this.sourceForm=this.fb.group({url:this.fb.control("",d.kI.required),params:this.fb.control([]),body:this.fb.control(""),method:this.fb.control("get",[d.kI.required])}),this.restSource$=new m.X(new Dh),this.componentDestroyed=new M.x,this.refreshData$=new M.x,this.refreshSubscription=this.refreshData$.pipe((0,be.U)(()=>this.generateUrl()),(0,ee.b)(a=>console.log(a)),(0,U.h)(a=>a&&""!==a.trim()),(0,tt.w)(a=>this.datasourceApi.getData(a).pipe((0,kr.K)(l=>(console.log(l),(0,Be.of)([]))))),(0,Ir.R)(this.componentDestroyed)).subscribe(a=>{this.jsonData=a,this.dataChange.emit(a)}),this.urlChangeSub=this.sourceForm.get("url").valueChanges.pipe((0,qn.b)(500),(0,U.h)(a=>a&&""!==a.trim()),(0,be.U)(a=>[a,a.indexOf("?")]),(0,be.U)(([a,l])=>[l>-1?a.substring(0,l):a,l>-1?a.substring(l+1):""])).subscribe(([a,l])=>{const p={...a.split("/").reduce((h,S,G)=>0===S.indexOf(":")?{...h,[S.substr(1)]:S}:h,{}),...Zi.parse(l)};this.paramsParsed=p}),this.restSourceSub=this.restSource$.pipe((0,ee.b)(a=>{a?(this.sourceForm.get("url").setValue(a.url),this.sourceForm.get("method").setValue(a.method?a.method:""),this.sourceForm.get("body").setValue(a.body?{...a.body,jsScript:""}:"")):(this.sourceForm.get("url").setValue(""),this.sourceForm.get("method").setValue(""),this.sourceForm.get("body").setValue(""))})).subscribe(),this.onTouched=()=>{}}set restSource(t){this.restSource$.next(t)}ngOnInit(){this.sourceForm.valueChanges.pipe((0,qn.b)(1e3)).subscribe(()=>{console.log("refresh data"),this.refreshData$.next(void 0)})}ngOnDestroy(){this.componentDestroyed.next(void 0),this.componentDestroyed.complete()}writeValue(t){t&&this.sourceForm.setValue(t,{emitEvent:!1})}registerOnChange(t){this.sourceForm.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.sourceForm.disable():this.sourceForm.enable()}validate(t){return this.sourceForm.valid?null:{invalidForm:{valid:!1,message:"source is invalid"}}}generateUrl(){console.log("generate url");const t=this.sourceForm.get("url").value,[r,s]=t?t.split("?",2):["",""],a=Zi.parse(s),l={},u=r.split("/"),p=u.length,h=[];let S=0;for(let W=0;W<p;W++)if(0===u[W].indexOf(":")){if(!this.sourceForm.get("params").value[S])return"";const J=this.sourceForm.get("params").value[S].mapping;h.push("static"===J.value.type?J.value.value:J.value.testValue),S++}else h.push(u[W]);for(const W in a)if("string"==typeof a[W]&&a[W].indexOf(":")>-1){if(!this.sourceForm.get("params").value[S])return"";const J=this.sourceForm.get("params").value[S].mapping;l[W]="static"===J.type?J.value:J.testValue,S++}const G=h.join("/")+(""!==s?"?"+Zi.stringify({...a,...l}):"");return console.log(G),G}onDataChange(t){this.tokens=this.tokenizerService.generateGenericTokens(t[0])}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(S0),o.\u0275\u0275directiveInject(Gn))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-rest-source-form"]],inputs:{restSource:"restSource",contexts:"contexts"},outputs:{dataChange:"dataChange"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>e),multi:!0}])],decls:19,vars:7,consts:[["direction","horizontal",3,"formGroup"],["as-split-area","","size","50"],["required","","formControlName","method"],["value","get"],["value","post"],["value","put"],["value","delete"],["matInput","","placeholder","Url","formControlName","url","required",""],["formControlName","body","rows","10","cols","40",3,"rootForm","tokens"],["formControlName","params",3,"params","paramValues","contexts"],["size","50"],[3,"json","expanded",4,"ngIf"],[3,"json","expanded"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"as-split",0),o.\u0275\u0275elementStart(1,"div",1),o.\u0275\u0275elementStart(2,"div"),o.\u0275\u0275elementStart(3,"mat-form-field"),o.\u0275\u0275elementStart(4,"mat-select",2),o.\u0275\u0275elementStart(5,"mat-option",3),o.\u0275\u0275text(6,"GET"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"mat-option",4),o.\u0275\u0275text(8,"POST"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"mat-option",5),o.\u0275\u0275text(10,"PUT"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(11,"mat-option",6),o.\u0275\u0275text(12,"DELETE"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(13,"mat-form-field"),o.\u0275\u0275element(14,"input",7),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(15,"classifieds-ui-snippet-form",8),o.\u0275\u0275element(16,"classifieds-ui-params-form",9),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(17,"as-split-area",10),o.\u0275\u0275template(18,kj,1,2,"ngx-json-viewer",11),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.sourceForm),o.\u0275\u0275advance(15),o.\u0275\u0275property("rootForm",!1)("tokens",r.tokens),o.\u0275\u0275advance(1),o.\u0275\u0275property("params",r.paramsParsed)("paramValues",r.restSource$.value.params)("contexts",r.contexts),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",r.jsonData))},directives:[Ud,Yt.KE,oi.gD,cr.ey,dh,qd,_m,d.JL,d.sg,Gd,d.Q7,d.JJ,d.u,sr.Nt,d.Fj,C.NgIf],styles:[""]}),e})(),Oj=(()=>{class e{constructor(t,r){this.attributeSerializer=t,this.controlContainer=r,this.contexts=[]}set settings(t){this.restSource=t?new Dh(this.attributeSerializer.deserializeAsObject(t)):void 0}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-rest-datasource"]],inputs:{settings:"settings",contexts:"contexts"},decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","settings",3,"restSource","contexts"]],template:function(t,r){1&t&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"classifieds-ui-rest-source-form",1),o.\u0275\u0275elementContainerEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("restSource",r.restSource)("contexts",r.contexts))},directives:[hf,d.JL,d.sg,d.JJ,d.u],encapsulation:2}),e})();const mf=({method:e,url:n,data:t,options:r,params:s,http:a})=>{if(t instanceof Error)return(0,Be.of)([]);let u;switch(e){case"DELETE":u=a.delete(n,r),s.has("saveDelay")&&(u=u.pipe((0,Hn.g)(+s.get("saveDelay"))));break;case"GET":{const p=s.has("suffix")?n+s.get("suffix"):n;u=a.get(p,r),s.has("getDelay")&&(u=u.pipe((0,Hn.g)(+s.get("getDelay"))));break}case"POST":u=a.post(n,t,r),s.has("saveDelay")&&(u=u.pipe((0,Hn.g)(+s.get("saveDelay"))));break;case"PUT":u=a.put(n,t,r),s.has("saveDelay")&&(u=u.pipe((0,Hn.g)(+s.get("saveDelay"))));break;default:{const p=new Error("Unimplemented HTTP method, "+e);u=(0,lo._)(p)}}return s.has("timeout")&&(u=u.pipe((0,Pc.V)(+s.get("timeout")+ +s.get("saveDelay")))),u.pipe((0,kr.K)(()=>(0,Be.of)([])))};let Xb=(()=>{class e{constructor(t,r,s,a){this.attrbuteSerializer=t,this.http=r,this.snippetParserService=s,this.urlGenerator=a}fetchDataset({settings:t,metadata:r}){return(0,Be.of)(new Rn).pipe((0,ee.b)(()=>console.log("START rest fetch")),(0,be.U)(()=>this.attrbuteSerializer.deserializeAsObject(t)),(0,be.U)(s=>new Dh(s)),(0,tt.w)(s=>this.urlGenerator.getUrl(s.url,s.params,r).pipe((0,be.U)(a=>new Dh({...s,url:a})))),(0,U.h)(s=>s.url&&""!==s.url.trim()&&s.url.indexOf("http")>-1),(0,tt.w)(s=>mf({url:s.url,method:"POST"===s.method.toUpperCase()?"POST":"GET",http:this.http,params:new Map}).pipe((0,kr.K)(()=>(0,Be.of)([])),(0,be.U)(a=>Array.isArray(a)?a:[a]),(0,be.U)(a=>new Rn({results:a})))),(0,ee.b)(()=>console.log("END rest fetch")))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(F.HttpClient),o.\u0275\u0275inject(d0),o.\u0275\u0275inject(Wd))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Wb=(()=>{class e extends _u{constructor(t){super(t),this.pluralizer2=t}getResourceUrls(t,r,s=!1){const a=s?r:Hc(r);return{entityResourceUrl:`${a}/${t}/`.toLowerCase(),collectionResourceUrl:`${a}/${this.pluralizer2.pluralize(t)}/`.toLowerCase()}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(xa))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Mj=(()=>{class e{constructor(t,r,s,a,l,u,p,h,S){t.register(((e,n,t)=>new xs({id:"rest",title:"Rest",editor:Oj,fetch:({settings:r,metadata:s})=>e.fetchDataset({settings:r,metadata:s}),editorOptions:()=>(0,Be.of)(new fh({fullscreen:!0})),getBindings:({settings:r})=>(0,Be.of)([]).pipe((0,be.U)(()=>t.deserializeAsObject(r)),(0,be.U)(a=>new ea(a)),(0,tt.w)(a=>n.extractContexts(a.params)),(0,be.U)(a=>a.map(l=>new Gt.ContentBinding({id:l,type:"context"}))))}))(r,s,a)),l.register(((e,n,t,r)=>new nc({id:"rest",title:"Rest",create:({object:s,params:a})=>(0,Be.of)({success:!1}).pipe((0,tt.w)(()=>e.paramValues(new Map(Object.keys(a).map(l=>[l,a[l]])))),(0,tt.w)(l=>mf({method:"POST",url:t.entityResource(l.get("entityName"),l.has("root")?l.get("root"):r.root?r.root:"api",!0),data:s||new Error("No entity to add"),params:l,http:n})),(0,be.U)(()=>({success:!0,entity:s}))),read:({})=>(0,Be.of)({success:!1}),update:({object:s,identity:a,params:l,parentObject:u})=>(0,Be.of)({success:!1}).pipe((0,tt.w)(()=>a({object:s,parentObject:u})),(0,tt.w)(({identity:p})=>e.paramValues(new Map(Object.keys(l).map(h=>[h,l[h]]))).pipe((0,be.U)(h=>({identity:p,options:h})))),(0,tt.w)(({identity:p,options:h})=>mf({method:"PUT",url:t.entityResource(h.get("entityName"),h.has("root")?h.get("root"):r.root?r.root:"api",!0)+`${p}`,data:s||new Error("No entity to add"),params:h,http:n})),(0,be.U)(()=>({success:!0,entity:s}))),delete:({})=>(0,Be.of)({success:!1}),query:({params:s,rule:a})=>(0,Be.of)({success:!1}).pipe((0,tt.w)(()=>e.paramValues(new Map(Object.keys(s).map(l=>[l,s[l]])))),(0,tt.w)(l=>new v.y(u=>{const p=a?a.conditions.all.reduce((S,G)=>[...S,...G.any.filter(W=>"identity"!==W.fact).map(W=>`${W.path.substr(2)}=${W.value}`)],[]):[],h=a?a.conditions.all.reduce((S,G)=>S||G.any.find(W=>"identity"===W.fact),void 0):void 0;u.next({identityFact:h,options:l,query:p.length>0?new F.HttpParams({fromString:p.join("&")}):void 0,path:h?h.value:""}),u.complete()})),(0,tt.w)(({options:l,query:u,path:p,identityFact:h})=>Xn(()=>!!h,mf({method:"GET",url:t.entityResource(l.get("entityName"),l.has("root")?l.get("root"):r.root?r.root:"api",!0)+p,options:{params:u},params:l,http:n}).pipe((0,be.U)(S=>({success:!0,entities:Array.isArray(S)?S:[S]}))),mf({method:"GET",url:t.collectionResource(l.get("entityName"),l.has("root")?l.get("root"):r.root?r.root:"api")+p,options:{params:u},params:l,http:n}).pipe((0,be.U)(S=>({success:!0,entities:S}))))))}))(u,p,h,S))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Ro),o.\u0275\u0275inject(Xb),o.\u0275\u0275inject(Ng),o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(Ha),o.\u0275\u0275inject(Zs),o.\u0275\u0275inject(F.HttpClient),o.\u0275\u0275inject(Wb),o.\u0275\u0275inject(fi))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({providers:[Xb,Wb],imports:[[C.CommonModule,d.u5,d.UX,ri.MaterialModule,sh,ru,xg,Dl,Bd,Yd,Ga]]}),e})();var gf=x(5684),uv=x(7084),Nj=x(8737),jj=x(3269),Jb=x(9672),cv=x(8675),Qb=x(6915);let Lj=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[]]}),e})();const cc=({selector:e,document:n})=>{const t=n.createDocumentFragment();if(!e||-1!==e.indexOf("undefined"))return!1;try{t.querySelector(e)}catch{return!1}return!0},zj=/\/\*[\s\S]*?\*\//g,Uj=/([^\:]+):([^\;]*);/,Gj=/(\/\*[\s\S]*?\*\/)|([^\s\;\{\}][^\;\{\}]*(?=\{))|(\})|([^\;\{\}]+\;(?!\s*\*\/))/gim,Mh=function(e){return void 0===e||0==e.length||null==e},Vj={ordered:!1,comments:!1,stripComments:!1,split:!1};let $j=(()=>{class e{constructor(t){this.document=t,this.mutate$=new M.x,this.mutated$=new M.x,this.mutateSub=this.mutate$.pipe((0,U.h)(({record:r})=>"attributes"===r.type&&"style"===r.attributeName&&!!r.target),(0,qn.b)(2e3),(0,tt.w)(({record:r,overlay:s})=>this.mapRecord({record:r,overlay:s})),(0,ee.b)(({stylesheet:r})=>this.mutated$.next({stylesheet:r}))).subscribe()}stylize({targetNode:t}){const r=new Map;new MutationObserver(l=>{l.forEach(u=>{this.mutate$.next({record:u,overlay:r})})}).observe(t,{childList:!0,attributes:!0,subtree:!0,attributeFilter:["style"],attributeOldValue:!0})}mapRecord({record:t,overlay:r}){return new v.y(s=>{const a=Qb.default(t.target),l=this.toJSON(`${a} { ${t.oldValue} }`),u=l.children[a]?Object.keys(l.children[a].attributes).reduce((W,J)=>({...W,[Bl(J.replace("-","_"),!1)]:l.children[a].attributes[J]}),{}):void 0,p=Object.keys(t.target.style).reduce((W,J)=>NaN!==parseInt(J)&&t.target.style.hasOwnProperty(Bl(t.target.style[J].replace("-","_"),!1))?{...W,[Bl(t.target.style[J].replace("-","_"),!1)]:t.target.style[Bl(t.target.style[J].replace("-","_"),!1)]}:W,{}),h=Zd(u,p);r.set(a,h);const S=[];r.forEach((W,J)=>{const Ne=J.split(" ").reduce((Re,De,Je)=>-1!==De.indexOf(".pane-")||-1!==De.indexOf(".panel-")?{selector:[...Re.selector,De.replace(/^(.*?)(\.pane-|\.panel-page|\.panel-)([0-9]*)(.*?)$/,"$2$3")],chars:Re.chars+De.length,lastIndex:Re.chars+Je+De.length}:{...Re,chars:Re.chars+De.length},{selector:[],chars:0,lastIndex:0});if(0!==Ne.selector.length){let Re=(Ne.selector.join(" ")+" "+J.slice(Ne.lastIndex).split(">").join("")).replace(/(\.ng\-[a-zA-Z0-9_-]*)/gm,"").trim();0===Re.indexOf(".panel-page")&&(Re=Re.substr(12).trim()),cc({selector:Re,document:this.document})&&S.push(Re+" { "+Object.keys(W).reduce((Je,et)=>et.match(/^[a-zA-Z-]*$/gm)?`${Je}${function gD(e){return e.replace(/_/g,"-")}(function ef(e){var n=""+e;return(n=(n=(n=(n=n.replace(new RegExp("(?:([A-Za-z\\d])|^)("+Es().acronymRegex.source+")(?=\\b|[^a-z])","g"),function(t,r,s){return(r||"")+(r?"_":"")+s.toLowerCase()})).replace(/([A-Z\d]+)([A-Z][a-z])/g,"$1_$2")).replace(/([a-z\d])([A-Z])/g,"$1_$2")).replace(/-/g,"_")).toLowerCase()}(et))}: ${W[et]};`:Je,"")+" }")}});const G=S.join("\n");s.next({stylesheet:G}),s.complete()})}toJSON(t,r=Vj){const p={children:{},attributes:{}};let h=null,S=0;for(r.stripComments&&(r.comments=!1,t=t.replace(zj,""));null!=(h=Gj.exec(t));)if(!Mh(h[1])&&r.comments)p[S++]=h[1].trim();else if(Mh(h[2])){if(!Mh(h[3]))return p;if(!Mh(h[4])){const G=h[4].trim(),W=Uj.exec(G);if(W){const J=W[1].trim(),ve=W[2].trim();if(r.ordered)p[S++]={name:J,value:ve,type:"attr"};else if(J in p.attributes){const Ne=p.attributes[J];Ne instanceof Array||(p.attributes[J]=[Ne]),p.attributes[J].push(ve)}else p.attributes[J]=ve}else p[S++]=G}}else{const G=h[2].trim(),W=this.toJSON(t,r);if(r.ordered)p[S++]={name:G,value:W,type:"rule"};else{const J=r.split?G.split(","):[G];for(const ve in J){const Ne=J[ve].trim();if(Ne in p.children)for(const Re in W.attributes)p.children[Ne].attributes[Re]=W.attributes[Re];else p.children[Ne]=W}}}return p}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(C.DOCUMENT))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var oa=(()=>{return(e=oa||(oa={}))[e.KEEP=0]="KEEP",e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",oa;var e})();let Hj=(()=>{class e{constructor(t){this.document=t,this.mutate=new M.x,this.mutated$=new M.x,this.mutateub=this.mutate.pipe((0,U.h)(({record:r})=>"attributes"===r.type&&"class"===r.attributeName&&!!r.target),(0,qn.b)(2e3),(0,tt.w)(({record:r,overlay:s,originals:a})=>this.mapRecord({record:r,overlay:s,originals:a}).pipe((0,kr.K)(l=>(0,Be.of)({classes:s})))),(0,ee.b)(({classes:r})=>this.mutated$.next({classes:r}))).subscribe()}classify({targetNode:t}){const r=new Map,s=new Map;new MutationObserver(u=>{u.forEach(p=>{this.mutate.next({record:p,overlay:r,originals:s})})}).observe(t,{childList:!0,attributes:!0,subtree:!0,attributeFilter:["class"],attributeOldValue:!0})}mapRecord({record:t,overlay:r,originals:s}){return new v.y(a=>{const l=Qb.default(t.target);let u="";const p=t.oldValue.split(" ").map(W=>W.trim()),S=l.split(" ").reduce((W,J,ve)=>-1!==J.indexOf(".pane-")||-1!==J.indexOf(".panel-")?{selector:[...W.selector,J.replace(/^(.*?)(\.pane-|\.panel-page|\.panel-)([0-9]*)(.*?)$/,"$2$3")],chars:W.chars+J.length,lastIndex:W.chars+ve+J.length}:{...W,chars:W.chars+J.length},{selector:[],chars:0,lastIndex:0});if(0!==S.selector.length){const W=l.substring(S.lastIndex).split(">").map(J=>J.trim()).filter(J=>""!==J).map((J,ve)=>{const Ne=J.indexOf("."),Re=-1===Ne?W:J.substring(0,Ne),Je=(-1===Ne?[]:J.substring(Ne+1).split(".")).filter(et=>void 0!==p.find(gt=>et===gt));return(0===ve?" > ":"")+Re+(0===Je.length?"":"."+Je.join("."))});u=(S.selector.join(" ")+W.join(" > ")).replace(/(\.ng\-[a-zA-Z0-9_-]*)/gm,""),0===u.indexOf(".panel-page")&&(u=u.substr(12).trim())}if(cc({selector:u,document:this.document})){s.has(u)||s.set(u,new Set(p));const W=t.target.classList,J=new Map(Array.from(W.values()).map(Ne=>[`${Ne}`,!s.has(u)||!s.get(u).has(`${Ne}`)&&0!==`${Ne}`.indexOf("ng-")&&0!==`${Ne}`.indexOf("mat-")?oa.ADD:oa.KEEP])),ve=Array.from(s.get(u)).reduce((Ne,Re)=>[-1===Array.from(W.values()).findIndex(De=>De===Re)?Re:void 0],[]).filter(Ne=>void 0!==Ne);0!==ve.length&&ve.forEach(Ne=>J.set(Ne,oa.REMOVE)),0===J.size&&r.has(u)?r.delete(u):0!==J.size&&r.set(u,J),a.next({classes:r}),a.complete()}else a.error(new Error('Selector invalid "'+u+'"')),a.complete()})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(C.DOCUMENT))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const qj=["renderPanelTpl"];function Kj(e,n){}function Xj(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",4),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().submit()}),o.\u0275\u0275text(1,"Submit"),o.\u0275\u0275elementEnd()}}function Wj(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275elementContainerStart(1,5),o.\u0275\u0275element(2,"classifieds-ui-render-panel",6),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementContainerEnd()),2&e){const t=n.i,r=o.\u0275\u0275nextContext();o.\u0275\u0275property("formGroup",r.pageForm),o.\u0275\u0275advance(2),o.\u0275\u0275property("formControlName",t)("panel",r.panelPageCached.panels[t])("nested",r.nested$.value)("contexts",r.contexts$.value)("resolvedContext",r.resolvedContext)("contextsChanged",r.contextsChanged)("displayType",r.panelPageCached.displayType)("indexPosition",t)("css",r.filteredCss)("listeners",r.filteredListeners)("ancestory",r.ancestory$.value)}}function Jj(e,n){}function Qj(e,n){if(1&e&&o.\u0275\u0275element(0,"classifieds-ui-panel-page",4),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275property("panelPage",t.panelPage)("nested",!0)("contexts",t.contexts)("css",t.filteredCss)("listeners",t.filteredListeners)("ancestory",t.ancestoryWithSelf)}}function Yj(e,n){if(1&e&&o.\u0275\u0275element(0,"classifieds-ui-panel-page",5),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275property("id",t.linkedPageId)("nested",!0)("contexts",t.contexts)("ancestory",t.ancestoryWithSelf)}}function Zj(e,n){if(1&e&&o.\u0275\u0275element(0,"classifieds-ui-panel-page",4),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275property("panelPage",t.embedPanel)("nested",!0)("contexts",t.contexts)("css",t.filteredCss)("listeners",t.filteredListeners)("ancestory",t.ancestoryWithSelf)}}const eB=["panes"];function tB(e,n){}function nB(e,n){if(1&e&&o.\u0275\u0275element(0,"classifieds-ui-render-pane",8),2&e){const t=n.$implicit,r=n.index,s=o.\u0275\u0275nextContext(3),a=o.\u0275\u0275reference(1);o.\u0275\u0275property("formControlName",r)("pluginName",t.contentPlugin)("settings",t.settings)("name",t.name)("label",t.label)("originPane",s.panel.panes[s.originMappings[r]])("contexts",t.contexts)("displayType",s.displayType)("resolvedContext",t.resolvedContext)("indexPosition",r)("css",s.filteredCss)("listeners",s.filteredListeners)("ancestory",s.ancestoryWithSelf$.value)("panes",a)("originPanes",s.originPanes)}}function rB(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementContainerStart(1),o.\u0275\u0275elementContainerStart(2,6),o.\u0275\u0275template(3,nB,1,15,"classifieds-ui-render-pane",7),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementContainerEnd()),2&e){const t=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(3),o.\u0275\u0275property("ngForOf",t.resolvedPanes)}}function iB(e,n){if(1&e&&o.\u0275\u0275element(0,"classifieds-ui-render-pane",10),2&e){const t=n.$implicit,r=n.index,s=o.\u0275\u0275nextContext(3),a=o.\u0275\u0275reference(1);o.\u0275\u0275property("pluginName",t.contentPlugin)("settings",t.settings)("name",t.name)("label",t.label)("originPane",s.panel.panes[s.originMappings[r]])("contexts",t.contexts)("linkedPageId",t.linkedPageId)("displayType",s.displayType)("resolvedContext",t.resolvedContext)("indexPosition",r)("css",s.filteredCss)("listeners",s.filteredListeners)("ancestory",s.ancestoryWithSelf$.value)("panes",a)("originPanes",s.originPanes)}}function oB(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,iB,1,15,"classifieds-ui-render-pane",9),o.\u0275\u0275elementContainerEnd()),2&e){const t=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",t.resolvedPanes)}}function sB(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementContainerStart(1,4),o.\u0275\u0275template(2,rB,4,1,"ng-container",5),o.\u0275\u0275template(3,oB,2,1,"ng-container",5),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementContainerEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitch",t.displayType),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase","form"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase","page")}}let Nh=(()=>{class e{constructor(t){this.viewContainerRef=t}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.ViewContainerRef))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["","classifiedsUiPaneContentHost",""]]}),e})(),Yb=(()=>{class e{constructor(t){this.viewContainerRef=t}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.ViewContainerRef))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["","classifiedsUiLayoutRendererHost",""]]}),e})();class ji{constructor(n,t,r,s,a,l,u,p,h,S,G,W,J,ve,Ne,Re,De,Je,et,gt,St,Ft,Kt,Zt,Vn,Pr,Ai){this.platformId=n,this.mediaSettings=t,this.routerStore=r,this.fb=s,this.el=a,this.inlineContextResolver=l,this.pageBuilderFacade=u,this.cpm=p,this.cxm=h,this.lpm=S,this.componentFactoryResolver=G,this.styleLoader=W,this.http=J,this.cssHelper=ve,this.attributeSerializer=Ne,this.formService=Re,this.panelsContextService=De,this.asyncApiCallHelperSvc=Je,this.crudDataHelperService=et,this.entityDefinitionService=gt,this.ngZone=St,this.persistService=Ft,this.stylizerService=Kt,this.classifyService=Zt,this.fileService=Vn,this.authFacade=Pr,this.resolvedContext={},this.contextsChanged=[],this.persistenceEnabled=!1,this.onInit$=new M.x,this.afterViewInit$=new M.x,this.afterContentInit$=new M.x,this.renderLayout$=new M.x,this.id$=new m.X(void 0),this.panelPage$=new m.X(void 0),this.nested$=new m.X(!1),this.ancestory$=new m.X([]),this.contexts$=new m.X([]),this.instanceUniqueIdentity=zn(),this.isStable=!1,this.managedCssCache="",this.managedClassesCache={},this.filteredListeners=[],this.css$=new m.X({css:this.cssHelper.makeJsonNode(),classes:{}}),this.cssSub=this.css$.subscribe(Tt=>{this.nested$.value&&console.log("filtered css nested",Tt),this.filteredCss=Tt}),this.listeners$=new m.X([]),this.listenersSub=this.listeners$.pipe((0,ee.b)(Tt=>{this.filteredListeners=Tt})).subscribe(),this.settingsFormArray=this.fb.array([]),this.pageForm=this.fb.group({panels:this.fb.array([])}),this.bridgeSub=this.pageForm.valueChanges.pipe((0,U.h)(()=>this.nested$.value),(0,qn.b)(500)).subscribe(Tt=>{console.log("write page"),console.log(Tt),this.settingsFormArray.clear();const Sn=this.attributeSerializer.convertToGroup(this.attributeSerializer.serialize(Tt,"value").attributes[0]);this.settingsFormArray.push(Sn),console.log(Sn.value)}),this.idOrPanelPageSub=(0,Bn.a)([this.id$,this.panelPage$]).pipe((0,kl.x)(),(0,be.U)(([Tt,Sn])=>({id:Tt,panelPage:Sn})),(0,U.h)(({id:Tt,panelPage:Sn})=>!!Tt||!!Sn),(0,tt.w)(({id:Tt,panelPage:Sn})=>Xn(()=>!Tt,(0,Be.of)({panelPage:Sn}),new v.y(ai=>{const Bi=this.entityDefinitionService.getDefinition("PanelPage").metadata;return this.crudDataHelperService.evaluateCollectionPlugins({query:`identity=${Tt}`,plugins:Bi.crud,op:"query"}).pipe((0,be.U)(er=>er&&0!==er.length?er[0]:void 0),(0,ee.b)(er=>{ai.next({panelPage:er}),ai.complete()})).subscribe()}))),(0,tt.w)(({panelPage:Tt})=>this.cpm.getPlugins(Tt.panels.reduce((Sn,ai)=>(ai.panes.forEach(Bi=>{Sn.includes(Bi.contentPlugin)||Sn.push(Bi.contentPlugin)}),Sn),[])).pipe((0,be.U)(()=>({panelPage:Tt})))),(0,tt.w)(({panelPage:Tt})=>Xn(()=>!this.nested$.value,this.panelsContextService.allActivePageContexts({panelPage:Tt}).pipe((0,be.U)(Sn=>({panelPage:Tt,contexts:Array.from(Sn)}))),(0,Be.of)({panelPage:Tt,contexts:[]}))),(0,ee.b)(({panelPage:Tt,contexts:Sn})=>{this.hookupFormChange({panelPage:Tt}),this.populatePanelsFormArray({panelPage:Tt}),this.panelPageCached=Tt,this.persistenceEnabled=Tt.persistence&&Tt.persistence.dataduct&&Tt.persistence.dataduct.plugin&&""!==Tt.persistence.dataduct.plugin,this.filteredListeners=Tt.interactions&&Tt.interactions.interactions&&Tt.interactions.interactions.listeners?Tt.interactions.interactions.listeners:[],this.renderLayout$.next(Tt),this.contexts$.next([...Tt.contexts?Tt.contexts.map(ai=>new Ei(ai)):[],...Sn]),this.hookupCss({file:Tt.cssFile?Tt.cssFile.trim():void 0}),console.log(`cached panel page: ${Tt.id}`)})).subscribe(),this.hookupContextSub=(0,Bn.a)(this.contexts$,this.afterContentInit$).pipe((0,be.U)(([Tt])=>Tt),(0,tt.w)(Tt=>this.inlineContextResolver.resolveMerged(Tt,`panelpage:${zn()}`).pipe((0,tt.w)(Sn=>this.cxm.getPlugins().pipe((0,be.U)(ai=>({contexts:Tt,resolvedContext:Sn,globalPlugins:Array.from(ai.values()).filter(Bi=>!0===Bi.global)})))),(0,an.q)(1))),(0,ee.b)(()=>{this.resolveSub&&this.resolveSub.unsubscribe()}),(0,ee.b)(({contexts:Tt,resolvedContext:Sn,globalPlugins:ai})=>{this.resolvedContext=Sn;const Bi=new M.x;if((0,C.isPlatformServer)(this.platformId)){const er=setInterval(()=>{0===ji.registredContextListeners.size&&(Bi.next(),Bi.complete(),clearInterval(er))},1e3)}this.resolveSub=this.inlineContextResolver.resolveMergedSingle(Tt).pipe((0,gf.T)(ai.length+(Tt?Tt.length:0)),(0,ee.b)(()=>ji.registredContextListeners.add(this.instanceUniqueIdentity)),(0,ee.b)(er=>console.log("buffer",er)),function Bj(e,...n){var t,r;const s=null!==(t=(0,jj.yG)(n))&&void 0!==t?t:Ds.z,a=null!==(r=n[0])&&void 0!==r?r:null,l=n[1]||1/0;return(0,ds.e)((u,p)=>{let h=[],S=!1;const G=ve=>{const{buffer:Ne,subs:Re}=ve;Re.unsubscribe(),(0,Nj.P)(h,ve),p.next(Ne),S&&W()},W=()=>{if(h){const ve=new M0.w0;p.add(ve);const Re={buffer:[],subs:ve};h.push(Re),(0,Jb.f)(ve,s,()=>G(Re),e)}};null!==a&&a>=0?(0,Jb.f)(p,s,W,a,!0):S=!0,W();const J=(0,cs.x)(p,ve=>{const Ne=h.slice();for(const Re of Ne){const{buffer:De}=Re;De.push(ve),l<=De.length&&G(Re)}},()=>{for(;null==h?void 0:h.length;)p.next(h.shift().buffer);null==J||J.unsubscribe(),p.complete(),p.unsubscribe()},void 0,()=>h=null);u.subscribe(J)})}(1),(0,ee.b)(er=>{0===er.length&&ji.registredContextListeners.delete(this.instanceUniqueIdentity)}),(0,U.h)(er=>0!==er.length),(0,ee.b)(er=>{this.contextsChanged=er.reduce(($h,[Hh,kw])=>[...$h,...$h.includes(Hh)?[]:[Hh]],[]),this.resolvedContext=er.reduce(($h,[Hh,kw])=>({...$h,[Hh]:kw}),this.resolvedContext)}),(0,ee.b)(()=>ji.registredContextListeners.delete(this.instanceUniqueIdentity)),(0,C.isPlatformServer)(this.platformId)?(0,Ir.R)(Bi):(0,ee.b)(()=>{})).subscribe()})).subscribe(),this.renderLayoutSub=(0,Bn.a)([this.renderLayout$,this.afterViewInit$]).pipe((0,Hn.g)(1),(0,be.U)(([Tt])=>({panelPage:Tt})),(0,tt.w)(({panelPage:Tt})=>this.lpm.getPlugin(Tt.layoutType).pipe((0,be.U)(Sn=>({panelPage:Tt,plugin:Sn})))),(0,ee.b)(()=>console.log("start render layout")),(0,be.U)(({plugin:Tt,panelPage:Sn})=>({panelPage:Sn,plugin:Tt,viewContainerRef:this.layoutRendererHost.viewContainerRef})),(0,ee.b)(({viewContainerRef:Tt})=>Tt.clear()),(0,be.U)(({plugin:Tt,viewContainerRef:Sn,panelPage:ai})=>({panelPage:ai,layoutRendererRef:Sn.createComponent(Tt.renderer)})),(0,ee.b)(({layoutRendererRef:Tt})=>this.layoutRendererRef=Tt),(0,ee.b)(({layoutRendererRef:Tt,panelPage:Sn})=>{Tt.instance.renderPanelTpl=this.renderPanelTpl,Tt.instance.panelPage=Sn}),(0,ee.b)(()=>console.log("end render layout"))).subscribe(),this.stylizerSub=this.afterViewInit$.pipe((0,U.h)(()=>(0,C.isPlatformBrowser)(this.platformId)),(0,ee.b)(()=>{this.stylizerService.stylize({targetNode:this.el.nativeElement})})).subscribe(),this.classifySub=this.afterViewInit$.pipe((0,U.h)(()=>(0,C.isPlatformBrowser)(this.platformId)),(0,ee.b)(()=>{this.classifyService.classify({targetNode:this.el.nativeElement})})).subscribe(),this.stylizerMutatedSub=(0,C.isPlatformBrowser)(this.platformId)?this.stylizerService.mutated$.pipe((0,qn.b)(2e3),(0,gf.T)(1),(0,tt.w)(({stylesheet:Tt})=>this.authFacade.getUser$.pipe((0,be.U)(Sn=>({stylesheet:Tt,isAuthenticated:!!Sn})))),(0,U.h)(({isAuthenticated:Tt})=>Tt),(0,ee.b)(({stylesheet:Tt})=>{console.log("merged css",Tt)}),(0,U.h)(()=>!!this.panelPageCached&&!!this.panelPageCached.id),(0,tt.w)(({stylesheet:Tt})=>this.isStable?(0,Be.of)({stylesheet:Tt}):this.ngZone.onStable.asObservable().pipe((0,be.U)(()=>({stylesheet:Tt})),(0,an.q)(1))),(0,be.U)(({stylesheet:Tt})=>({stylesheet:(this.managedCssCache&&""!==this.managedCssCache.trim()?this.managedCssCache+"\n":"")+Tt})),(0,$o.b)(({stylesheet:Tt})=>this.fileService.bulkUpload({nocache:!0,files:[new File([Tt],`panelpage__${this.panelPageCached.id}.css`)],fileNameOverride:`panelpage__${this.panelPageCached.id}.css`})),(0,ee.b)(()=>{console.log("stylesheet saved.")})).subscribe():void 0,this.classifyMutatedSub=(0,C.isPlatformBrowser)(this.platformId)?this.classifyService.mutated$.pipe((0,qn.b)(2e3),(0,gf.T)(1),(0,tt.w)(({classes:Tt})=>this.authFacade.getUser$.pipe((0,be.U)(Sn=>({classes:Tt,isAuthenticated:!!Sn})))),(0,U.h)(({isAuthenticated:Tt})=>Tt),(0,ee.b)(({classes:Tt})=>{console.log("merged classes",Tt)}),(0,U.h)(()=>!!this.panelPageCached&&!!this.panelPageCached.id),(0,tt.w)(({classes:Tt})=>this.isStable?(0,Be.of)({classes:Tt}):this.ngZone.onStable.asObservable().pipe((0,be.U)(()=>({classes:Tt})),(0,an.q)(1))),(0,be.U)(({classes:Tt})=>({classes:Array.from(Tt.keys()).reduce((Sn,ai)=>({...Sn,[ai]:Array.from(Tt.get(ai).keys()).filter(Bi=>Tt.get(ai).get(Bi)!==oa.KEEP).reduce((Bi,er)=>({...Bi,[er]:Tt.get(ai).get(er)}),{})}),{})})),(0,be.U)(({classes:Tt})=>({classes:Zd(this.managedClassesCache,Tt)})),(0,be.U)(({classes:Tt})=>({json:JSON.stringify(Tt)})),(0,$o.b)(({json:Tt})=>this.fileService.bulkUpload({nocache:!0,files:[new File([Tt],`panelpage__${this.panelPageCached.id}__classes.json`)],fileNameOverride:`panelpage__${this.panelPageCached.id}__classes.json`})),(0,ee.b)(()=>{console.log("classes saved.")})).subscribe():void 0,this.onStableSub=this.ngZone.onStable.asObservable().pipe((0,ee.b)(()=>this.isStable=!0)).subscribe(),this.onUnstableSub=this.ngZone.onUnstable.asObservable().pipe((0,ee.b)(()=>this.isStable=!1)).subscribe(),this.onTouched=()=>{},this.panelPageService=Ai.getEntityCollectionService("PanelPage"),this.panelPageFormService=Ai.getEntityCollectionService("PanelPageForm"),this.panelPageStateService=Ai.getEntityCollectionService("PanelPageState")}set id(n){this.id$.next(n)}set panelPage(n){this.panelPage$.next(n)}set nested(n){this.nested$.next(n)}set contexts(n){this.contexts$.next(n)}set ancestory(n){this.ancestory$.next(n)}set css(n){this.css$.next(n)}set listeners(n){this.listeners$.next(n)}get panelsArray(){return this.pageForm.get("panels")}ngOnInit(){this.onInit$.next(void 0)}ngAfterViewInit(){this.afterViewInit$.next(void 0)}ngAfterContentInit(){this.afterContentInit$.next(void 0)}ngOnDestroy(){ji.registredContextListeners.delete(this.instanceUniqueIdentity)}populatePanelsFormArray({panelPage:n}){this.panelsArray.clear(),n.panels.forEach(()=>{this.panelsArray.push(this.fb.control(""))})}hookupFormChange({panelPage:n}){this.pageForm.valueChanges.pipe((0,qn.b)(100),(0,U.h)(()=>void 0!==n&&"form"===n.displayType)).subscribe(t=>{const r=new qa({...t,name:n.name,title:n.title,derivativeId:n.id});this.pageBuilderFacade.setForm(n.name,r)})}hookupCss({}){(0,pn.D)([(0,Be.of)(void 0),(0,Be.of)(void 0),(0,Be.of)(void 0),this.panelPageCached.id?this.http.get(`${this.mediaSettings.imageUrl}/media/panelpage__${this.panelPageCached.id}__classes.json`).pipe((0,kr.K)(()=>(0,Be.of)(void 0)),(0,zr.d)(void 0)):(0,Be.of)(void 0)]).pipe((0,ee.b)(([t,r,s,a])=>{console.log("fetched managed panelpage css and class files");let l={};this.managedCssCache="",this.managedClassesCache=a,t&&(l=Zd(l,t)),r&&(this.managedCssCache=s,l=Zd(l,r)),this.filteredCss={css:l,classes:a}})).subscribe()}submit(){if(this.pageForm.valid){const n=new qa({...this.pageForm.value}),t=this.formService.serializeForm(n);console.log(n),console.log(this.formService.serializeForm(n)),console.log("form data",t),this.persistService.persist({data:t,persistence:this.panelPageCached.persistence}).subscribe(()=>{console.log("persisted data")})}else console.log("detected form invalid")}writeValue(n){n&&this.settingsFormArray.setValue(n,{emitEvent:!1})}registerOnChange(n){this.settingsFormArray.valueChanges.subscribe(n)}registerOnTouched(n){this.onTouched=n}setDisabledState(n){n?this.settingsFormArray.disable():this.settingsFormArray.enable()}validate(n){return this.settingsFormArray.statusChanges.pipe((0,cv.O)(this.settingsFormArray.status),(0,U.h)(t=>"PENDING"!==t),(0,qn.b)(1),(0,an.q)(1),(0,be.U)(t=>this.settingsFormArray.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}))}}ji.registredContextListeners=new Set,ji.\u0275fac=function(n){return new(n||ji)(o.\u0275\u0275directiveInject(o.PLATFORM_ID),o.\u0275\u0275directiveInject(nh),o.\u0275\u0275directiveInject(xt.yh),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(Yu),o.\u0275\u0275directiveInject(bo),o.\u0275\u0275directiveInject(Gt.ContentPluginManager),o.\u0275\u0275directiveInject(Va),o.\u0275\u0275directiveInject(Fh),o.\u0275\u0275directiveInject(o.ComponentFactoryResolver),o.\u0275\u0275directiveInject(on.StyleLoaderService),o.\u0275\u0275directiveInject(F.HttpClient),o.\u0275\u0275directiveInject(Qg),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(bb),o.\u0275\u0275directiveInject(mb),o.\u0275\u0275directiveInject(on.AsyncApiCallHelperService),o.\u0275\u0275directiveInject(Qd),o.\u0275\u0275directiveInject(pi),o.\u0275\u0275directiveInject(o.NgZone),o.\u0275\u0275directiveInject(XF),o.\u0275\u0275directiveInject($j),o.\u0275\u0275directiveInject(Hj),o.\u0275\u0275directiveInject(rh),o.\u0275\u0275directiveInject(ei),o.\u0275\u0275directiveInject(Yn))},ji.\u0275cmp=o.\u0275\u0275defineComponent({type:ji,selectors:[["classifieds-ui-panel-page"]],viewQuery:function(n,t){if(1&n&&(o.\u0275\u0275viewQuery(Gb,5),o.\u0275\u0275viewQuery(qj,7),o.\u0275\u0275viewQuery(Yb,5)),2&n){let r;o.\u0275\u0275queryRefresh(r=o.\u0275\u0275loadQuery())&&(t.gridLayout=r.first),o.\u0275\u0275queryRefresh(r=o.\u0275\u0275loadQuery())&&(t.renderPanelTpl=r.first),o.\u0275\u0275queryRefresh(r=o.\u0275\u0275loadQuery())&&(t.layoutRendererHost=r.first)}},hostVars:2,hostBindings:function(n,t){2&n&&o.\u0275\u0275classProp("panel-page",!0)},inputs:{id:"id",panelPage:"panelPage",nested:"nested",contexts:"contexts",ancestory:"ancestory",css:"css",listeners:"listeners",resolvedContext:"resolvedContext"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>ji),multi:!0},{provide:d.SD,useExisting:(0,o.forwardRef)(()=>ji),multi:!0}])],decls:6,vars:2,consts:[[3,"formGroup"],["classifiedsUiLayoutRendererHost",""],["type","button",3,"click",4,"ngIf"],["renderPanelTpl",""],["type","button",3,"click"],["formArrayName","panels"],[3,"formControlName","panel","nested","contexts","resolvedContext","contextsChanged","displayType","indexPosition","css","listeners","ancestory"]],template:function(n,t){1&n&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementContainerStart(1),o.\u0275\u0275template(2,Kj,0,0,"ng-template",1),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(3,Xj,2,0,"button",2),o.\u0275\u0275template(4,Wj,3,12,"ng-template",null,3,o.\u0275\u0275templateRefExtractor)),2&n&&(o.\u0275\u0275property("formGroup",t.pageForm),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",t.persistenceEnabled))},directives:function(){return[aB,d.JL,d.sg,Yb,C.NgIf,d.CE,d.JJ,d.u]},styles:["[_nghost-%COMP%]     gridster{background-color:#fff}[_nghost-%COMP%]     gridster-item{background-color:#fff}"]});let vf=(()=>{class e{constructor(t,r,s,a,l,u,p,h,S,G,W){this.document=t,this.platformId=r,this.el=s,this.renderer2=a,this.componentFactoryResolver=l,this.panelHandler=u,this.fb=p,this.cpm=h,this.cssHelper=S,this.paneStateService=G,this.settings=[],this.ancestory=[],this.panes=[],this.originPanes=[],this.afterContentInit$=new M.x,this.resolvedContext$=new m.X({}),this.schedulePluginChange=new M.x,this.ancestoryWithSelf=[],this.filteredListeners=[],this.css$=new m.X({css:this.cssHelper.makeJsonNode(),classes:{}}),this.cssSub=(0,Bn.a)([this.css$,this.afterContentInit$,this.schedulePluginChange]).pipe((0,be.U)(([J])=>J),(0,be.U)(J=>({css:this.cssHelper.reduceCss(J.css,`.pane-${this.indexPosition}`),classes:this.cssHelper.reduceSelector(J.classes,`.pane-${this.indexPosition}`)})),(0,be.U)(({css:J,classes:ve})=>[this.cssHelper.reduceCss(J,".panel-page",!1),this.cssHelper.reduceCss(J,".panel-page"),this.cssHelper.reduceSelector(ve,".panel-page",!1),this.cssHelper.reduceSelector(ve,".panel-page")]),(0,ee.b)(([J,ve,Ne,Re])=>this.filteredCss={css:ve,classes:Re}),(0,be.U)(([J,ve,Ne,Re])=>({css:J,classes:Ne})),(0,be.U)(({css:J,classes:ve})=>({css:{children:Object.keys(J.children).reduce((De,Je)=>({...De,...0===Je.indexOf(">")?{[this.ancestoryWithSelf.map((et,gt)=>(gt+1)%2==0?`.pane-${et}`:`.panel-${et}`).join(" ")+" "+Je]:ve[Je]}:{[Je]:ve[Je]}}),{})},classes:Object.keys(ve).reduce((De,Je)=>({...De,...0===Je.indexOf(">")?{[this.ancestoryWithSelf.map((et,gt)=>(gt+1)%2==0?`.pane-${et}`:`.panel-${et}`).join(" ")+" "+Je]:ve[Je]}:{[Je]:ve[Je]}}),{})})),(0,Hn.g)(500)).subscribe(({css:J,classes:ve})=>{console.log("reduced classes",ve);const Ne=Object.keys(J.children).filter(De=>""===De||cc({selector:De,document:this.document})),Re=Object.keys(ve).filter(De=>""===De||cc({selector:De,document:this.document}));Re.forEach((De,Je)=>{const et=""===De?[this.el.nativeElement]:-1!==De.indexOf(">")?this.document.querySelectorAll(De):this.el.nativeElement.querySelectorAll(De),gt=et.length;for(let St=0;St<gt;St++){const Ft=ve[Re[Je]],Kt=Object.keys(Ft),Zt=Kt.length;for(let Vn=0;Vn<Zt;Vn++)et[St]&&(Ft[Kt[Vn]]===oa.REMOVE?(console.log(`remove class ${Kt[Vn]}`),this.renderer2.removeClass(et[St],Kt[Vn])):(console.log(`add class ${Kt[Vn]}`),this.renderer2.addClass(et[St],Kt[Vn])))}}),Ne.forEach(De=>{console.log(`search: ${De}`);const Je=""===De?[this.el.nativeElement]:-1!==De.indexOf(">")?this.document.querySelectorAll(De):this.el.nativeElement.querySelectorAll(De),et=Je.length,gt=Object.keys(J.children[De].attributes);for(let St=0;St<et;St++)Je[St]&&gt.forEach(Ft=>{console.log(`${De} { ${Ft}: ${J.children[De].attributes[Ft]}; }`);const Kt=Bl(Ft.replace("-","_"),!1);this.renderer2.setStyle(Je[St],Kt,J.children[De].attributes[Ft])})})}),this.listeners$=new m.X([]),this.listenersSub=(0,Bn.a)([this.listeners$,this.schedulePluginChange]).pipe((0,be.U)(([J])=>J),(0,ee.b)(J=>{console.log("pane listeners",J)})).subscribe(),this.paneForm=this.fb.group({contentPlugin:this.fb.control("",d.kI.required),name:this.fb.control(""),label:this.fb.control(""),settings:this.fb.control("")}),this.paneFormSub=this.paneForm.valueChanges.subscribe(J=>{console.log(`pane form value plugin: ${this.pluginName}`),console.log(J)}),this.scheduleStateChange$=new M.x,this.scheduleStateChangeSub=this.scheduleStateChange$.pipe((0,tt.w)(({state:J})=>this.paneStateService.mergeState({state:J,ancestory:[...this.ancestoryWithSelf],settings:this.settings,plugin:this.contentPlugin}))).subscribe(({pageState:J})=>{this.panelPageStateService.upsert(J)}),this.onTouched=()=>{},this.pluginChangeSub=this.schedulePluginChange.pipe((0,U.h)(()=>this.pluginName&&null!==this.pluginName&&""!==this.pluginName),(0,tt.w)(()=>this.cpm.getPlugin(this.pluginName))).subscribe(J=>{this.contentPlugin=J,this.paneForm.get("contentPlugin").setValue(J.name),this.paneForm.get("name").setValue(this.name),this.paneForm.get("label").setValue(this.label),"panel"===this.pluginName?this.resolveNestedPanelPage():this.renderPaneContent()}),this.embedPanelSub=this.resolvedContext$.pipe((0,be.U)(J=>{J&&J._root&&!this.linkedPageId&&0===this.settings.length&&(this.embedPanel=new Cr(J._root))})).subscribe(),this.panelPageStateService=W.getEntityCollectionService("PanelPageState")}set resolvedContext(t){this.resolvedContext$.next(t)}set css(t){this.css$.next(t)}set listeners(t){this.listeners$.next(t)}get indexPositionClass(){return`pane-${this.indexPosition}`}get dynamicPanel(){return new Cr(this.resolvedContext._root)}ngOnInit(){this.ancestoryWithSelf=[...this.ancestory?this.ancestory:[],...null!=this.indexPosition?[this.indexPosition]:[]],this.schedulePluginChange.next(void 0)}ngOnChanges(t){if(t.ancestory||t.indexPosition){const r=[...t.ancestory.currentValue?t.ancestory.currentValue:this.ancestory?this.ancestory:[],...null!=t.indexPosition.currentValue?[t.indexPosition.currentValue]:this.indexPosition?[this.indexPosition]:[]];(r.length!==this.ancestoryWithSelf.length||0!==this.ancestoryWithSelf.filter((s,a)=>r[a]!==s).length)&&(this.ancestoryWithSelf=r)}this.schedulePluginChange.next(void 0)}ngAfterContentInit(){this.afterContentInit$.next(void 0)}writeValue(t){t&&this.paneForm.setValue(t,{emitEvent:!1})}registerOnChange(t){this.paneForm.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.paneForm.disable():this.paneForm.enable()}validate(t){return this.paneForm.statusChanges.pipe((0,cv.O)(this.paneForm.status),(0,U.h)(r=>"PENDING"!==r),(0,qn.b)(1),(0,an.q)(1),(0,be.U)(r=>this.paneForm.valid?null:{invalidForm:{invalidForm:{valid:!1,message:"pane is invalid"}}}))}resolveNestedPanelPage(){this.panelHandler.toObject(this.settings).subscribe(t=>{this.panelPage=new Cr({...t,contexts:this.contexts})})}renderPaneContent(){const t=this.componentFactoryResolver.resolveComponentFactory(this.contentPlugin.renderComponent),r=this.contentPaneHost.viewContainerRef;r.clear(),this.componentRef=r.createComponent(t),this.componentRef.instance.settings=this.settings,this.componentRef.instance.name=this.name,this.componentRef.instance.label=this.label,this.componentRef.instance.panes=this.panes,this.componentRef.instance.originPanes=this.originPanes,this.componentRef.instance.contexts=this.contexts.map(s=>new Ei(s)),this.componentRef.instance.displayType=this.displayType,this.componentRef.instance.resolvedContext=this.resolvedContext$.value,this.componentRef.instance.ancestory=this.ancestoryWithSelf,this.componentRef.instance.state&&this.contentPlugin.handler&&this.contentPlugin.handler.stateDefinition(this.settings).pipe((0,an.q)(1)).subscribe(s=>{this.componentRef.instance.state=s||{}}),this.componentRef.instance.stateChange&&this.componentRef.instance.stateChange.subscribe(s=>{this.scheduleStateChange$.next({state:s})})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(C.DOCUMENT),o.\u0275\u0275directiveInject(o.PLATFORM_ID),o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(o.Renderer2),o.\u0275\u0275directiveInject(o.ComponentFactoryResolver),o.\u0275\u0275directiveInject(Mi),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Gt.ContentPluginManager),o.\u0275\u0275directiveInject(Qg),o.\u0275\u0275directiveInject(tM),o.\u0275\u0275directiveInject(Yn))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-render-pane"]],viewQuery:function(t,r){if(1&t&&o.\u0275\u0275viewQuery(Nh,7),2&t){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.contentPaneHost=s.first)}},hostVars:5,hostBindings:function(t,r){2&t&&(o.\u0275\u0275attribute("data-index",r.indexPosition),o.\u0275\u0275classMap(r.indexPositionClass),o.\u0275\u0275classProp("pane",!0))},inputs:{pluginName:"pluginName",settings:"settings",linkedPageId:"linkedPageId",contexts:"contexts",originPane:"originPane",displayType:"displayType",name:"name",label:"label",indexPosition:"indexPosition",ancestory:"ancestory",panes:"panes",originPanes:"originPanes",resolvedContext:"resolvedContext",css:"css",listeners:"listeners"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.SD,useExisting:(0,o.forwardRef)(()=>e),multi:!0}]),o.\u0275\u0275NgOnChangesFeature],decls:6,vars:4,consts:[["fxFlex","",3,"formGroup"],["classifiedsUiPaneContentHost",""],["fxFlex","","formControlName","settings",3,"panelPage","nested","contexts","css","listeners","ancestory",4,"ngIf"],["fxFlex","","formControlName","settings",3,"id","nested","contexts","ancestory",4,"ngIf"],["fxFlex","","formControlName","settings",3,"panelPage","nested","contexts","css","listeners","ancestory"],["fxFlex","","formControlName","settings",3,"id","nested","contexts","ancestory"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementContainerStart(1),o.\u0275\u0275template(2,Jj,0,0,"ng-template",1),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275template(3,Qj,1,6,"classifieds-ui-panel-page",2),o.\u0275\u0275template(4,Yj,1,4,"classifieds-ui-panel-page",3),o.\u0275\u0275template(5,Zj,1,6,"classifieds-ui-panel-page",2),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.paneForm),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf","panel"==r.pluginName&&!r.linkedPageId&&0!==r.settings.length),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf","panel"==r.pluginName&&r.linkedPageId),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf","panel"==r.pluginName&&!r.linkedPageId&&0===r.settings.length))},directives:[ji,d.JL,d.sg,Nh,C.NgIf,d.JJ,d.u],styles:["[_nghost-%COMP%]{height:100%}"]}),e})(),aB=(()=>{class e{constructor(t,r,s,a,l,u,p,h,S,G){this.platformId=t,this.document=r,this.hostEl=s,this.renderer2=a,this.componentFactoryResolver=l,this.fb=u,this.panelResolverService=p,this.spm=h,this.cssHelper=S,this.styleResolverService=G,this.nested=!1,this.resolvedContext={},this.heightChange=new o.EventEmitter,this.panelForm=this.fb.group({name:this.fb.control(""),label:this.fb.control(""),panes:this.fb.array([])}),this.panelFormSub=this.panelForm.valueChanges.subscribe(W=>{console.log("paneL form value"),console.log(W)}),this.filteredListeners=[],this.afterContentInit$=new M.x,this.schedulePanelRender=new M.x,this.rendered$=new M.x,this.css$=new m.X({css:this.cssHelper.makeJsonNode(),classes:{}}),this.cssSub=(0,Bn.a)([this.css$,this.afterContentInit$,this.rendered$]).pipe((0,ee.b)(([W])=>console.log("css node",W.css)),(0,be.U)(([W])=>W),(0,be.U)(W=>({css:this.cssHelper.reduceCss(W.css,`.panel-${this.indexPosition$.value}`),classes:this.cssHelper.reduceSelector(W.classes,`.panel-${this.indexPosition$.value}`)})),(0,be.U)(({css:W,classes:J})=>[this.cssHelper.reduceCss(W,".pane-",!1),W,this.cssHelper.reduceSelector(J,".pane-",!1),J]),(0,ee.b)(([W,J,ve,Ne])=>this.filteredCss={css:J,classes:Ne}),(0,be.U)(([W,J,ve])=>({css:W,classes:ve})),(0,be.U)(({css:W,classes:J})=>({css:{children:Object.keys(W.children).reduce((Re,De)=>({...Re,...0===De.indexOf(">")?{[this.ancestoryWithSelf$.value.map((Je,et)=>(et+1)%2==0?`.pane-${Je}`:`.panel-${Je}`).join(" ")+" "+De]:J[De]}:{[De]:J[De]}}),{})},classes:Object.keys(J).reduce((Re,De)=>({...Re,...0===De.indexOf(">")?{[this.ancestoryWithSelf$.value.map((Je,et)=>(et+1)%2==0?`.pane-${Je}`:`.panel-${Je}`).join(" ")+" "+De]:J[De]}:{[De]:J[De]}}),{})})),(0,Hn.g)(1)).subscribe(({css:W,classes:J})=>{console.log("classes",J);const ve=Object.keys(W.children).filter(Re=>""===Re||cc({selector:Re,document:this.document})),Ne=Object.keys(J).filter(Re=>""===Re||cc({selector:Re,document:this.document}));Ne.forEach((Re,De)=>{const Je=""===Re?[this.hostEl.nativeElement]:-1!==Re.indexOf(">")?this.document.querySelectorAll(Re):this.hostEl.nativeElement.querySelectorAll(Re),et=Je.length;for(let gt=0;gt<et;gt++){const St=J[Ne[De]],Ft=Object.keys(St),Kt=Ft.length;for(let Zt=0;Zt<Kt;Zt++)Je[gt]&&(St[Ft[Zt]]===oa.REMOVE?(console.log(`remove class ${Ft[Zt]}`),this.renderer2.removeClass(Je[gt],Ft[Zt])):(console.log(`add class ${Ft[Zt]}`),this.renderer2.addClass(Je[gt],Ft[Zt])))}}),ve.forEach(Re=>{console.log(`search: ${Re}`);const De=""===Re?[this.hostEl.nativeElement]:-1!==Re.indexOf(">")?this.document.querySelectorAll(Re):this.hostEl.nativeElement.querySelectorAll(Re),Je=De.length,et=Object.keys(W.children[Re].attributes);for(let gt=0;gt<Je;gt++)De[gt]&&et.forEach(St=>{console.log(`${Re} { ${St}: ${W.children[Re].attributes[St]}; }`);const Ft=Bl(St.replace("-","_"),!1);this.renderer2.setStyle(De[gt],Ft,W.children[Re].attributes[St])})})}),this.listeners$=new m.X([]),this.listenersSub=this.listeners$.pipe((0,ee.b)(W=>{console.log("panel listeners",W),this.filteredListeners=W})).subscribe(),this.scheduleRender=new M.x,this.scheduleRenderSub=this.scheduleRender.pipe((0,ee.b)(()=>console.log(`schdule renderer before [${this.panel.name}]`)),(0,tt.w)(([W,J,ve])=>this.panelResolverService.resolvePanes({panes:W,contexts:J,resolvedContext:ve}).pipe((0,be.U)(({resolvedPanes:Ne,originMappings:Re})=>({resolvedPanes:Ne,originMappings:Re,panes:W})))),(0,tt.w)(({panes:W,resolvedPanes:J,originMappings:ve})=>this.styleResolverService.alterResolvedPanes({panel:this.panel,resolvedPanes:J,originMappings:ve}).pipe((0,be.U)(({resolvedPanes:Ne,originMappings:Re})=>({panes:W,resolvedPanes:Ne,originMappings:Re})))),(0,ee.b)(()=>console.log(`schdule renderer after [${this.panel.name}]`))).subscribe(({panes:W,resolvedPanes:J,originMappings:ve})=>{console.log(`render panel: ${this.panel.name}`),this.resolvedPanes=J,this.originPanes=W,this.originMappings=ve,this.populatePanesFormArray(),void 0!==this.stylePlugin?this.renderPanelContent():this.rendered$.next(void 0)}),this.schduleContextChange=new M.x,this.schedulePanelRenderSub=this.schedulePanelRender.pipe((0,tt.w)(W=>this.spm.getPlugin(W))).subscribe(W=>{const J=this.componentFactoryResolver.resolveComponentFactory(W.renderComponent),ve=this.panelHost.viewContainerRef;ve.clear();const Ne=ve.createComponent(J);this.componentRef=Ne,Ne.instance.settings=this.panel.settings,Ne.instance.panes=this.resolvedPanes,Ne.instance.originPanes=this.panel.panes,Ne.instance.originMappings=this.originMappings,Ne.instance.contexts=this.contexts.map(Re=>new Ei(Re)),Ne.instance.displayType=this.displayType,Ne.instance.ancestory=this.ancestoryWithSelf$.value,Ne.instance.resolvedContext=this.resolvedContext,Ne.instance.panel=this.panel,Ne.instance.indexPosition=this.indexPosition$.value,this.rendered$.next(void 0)}),this.originMappings=[],this.resolvedContexts=[],this.ancestoryWithSelf$=new m.X([]),this.ancestory$=new m.X([]),this.indexPosition$=new m.X(void 0),this.onTouched=()=>{},this.ancestorySub=(0,Bn.a)([this.ancestory$,this.indexPosition$]).pipe((0,ee.b)(([W,J])=>{this.ancestoryWithSelf$.next([...W,J])})).subscribe(),this.counter=e.COUNTER++}set contextChanged(t){}set contextsChanged(t){t.map(r=>this.schduleContextChange.next(r))}set indexPosition(t){this.indexPosition$.next(t)}set ancestory(t){this.ancestory$.next(t)}set css(t){this.css$.next(t)}set listeners(t){this.listeners$.next(t)}get indexPositionClass(){return`panel-${this.indexPosition$.value}`}get panesArray(){return this.panelForm.get("panes")}ngOnInit(){this.stylePlugin=void 0!==this.panel.stylePlugin&&""!==this.panel.stylePlugin?this.panel.stylePlugin:void 0,void 0!==this.panel&&void 0!==this.panelHost&&(console.log(`panel render init [${this.panel.name}`),this.panelResolverService.usedContexts(this.panel.panes).pipe((0,be.U)(t=>t.filter(r=>"_page"!==r&&"_root"!==r&&"."!==r&&0!==r.indexOf("panestate-"+this.ancestoryWithSelf$.value.join("-")))),(0,ee.b)(t=>console.log(`contexts [${this.panel.name}]: ${t.join(",")}`)),(0,tt.w)(t=>this.schduleContextChange.pipe((0,ee.b)(r=>console.log(`detected change [${this.panel.name}]: ${r}`)),(0,be.U)(r=>[t,r]))),(0,ee.b)(([t,r])=>console.log(`detected change [${this.panel.name}]: ${r} : ctx: ${t.join(",")}`)),(0,U.h)(([t,r])=>Array.isArray(t)&&-1!==t.findIndex(s=>s===r)),(0,qn.b)(100)).subscribe(([t,r])=>{console.log(`Context changed [${this.panel.name}]: ${r}`),console.log(`contexts detected [${this.panel.name}]: ${t.join(",")}`),this.scheduleRender.next([this.panel.panes,this.contexts,this.resolvedContext])}))}ngOnChanges(t){this.stylePlugin=void 0!==this.panel.stylePlugin&&""!==this.panel.stylePlugin?this.panel.stylePlugin:void 0,t.resolvedContext&&void 0===t.resolvedContext.previousValue&&this.scheduleRender.next([this.panel.panes,this.contexts,this.resolvedContext])}ngAfterViewInit(){}ngAfterContentInit(){this.afterContentInit$.next(void 0)}writeValue(t){t&&this.panelForm.setValue(t,{emitEvent:!1})}registerOnChange(t){this.panelForm.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.panelForm.disable():this.panelForm.enable()}validate(t){return this.panelForm.statusChanges.pipe((0,cv.O)(this.panelForm.status),(0,U.h)(r=>"PENDING"!==r),(0,qn.b)(1),(0,an.q)(1),(0,be.U)(r=>this.panelForm.valid?null:{invalidForm:{valid:!1,message:"panel are invalid"}}))}populatePanesFormArray(){this.panesArray.clear(),this.resolvedPanes.forEach((t,r)=>{this.panesArray.push(this.fb.control(""))})}renderPanelContent(){this.schedulePanelRender.next(this.stylePlugin)}}return e.COUNTER=0,e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.PLATFORM_ID),o.\u0275\u0275directiveInject(C.DOCUMENT),o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(o.Renderer2),o.\u0275\u0275directiveInject(o.ComponentFactoryResolver),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Wg),o.\u0275\u0275directiveInject(ic),o.\u0275\u0275directiveInject(Qg),o.\u0275\u0275directiveInject(gb))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-render-panel"]],viewQuery:function(t,r){if(1&t&&(o.\u0275\u0275viewQuery(Nh,7),o.\u0275\u0275viewQuery(eB,7),o.\u0275\u0275viewQuery(vf,5)),2&t){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.panelHost=s.first),o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.paneContainer=s.first),o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.renderedPanes=s)}},hostVars:5,hostBindings:function(t,r){2&t&&(o.\u0275\u0275attribute("data-index",r.indexPosition$.value),o.\u0275\u0275classMap(r.indexPositionClass),o.\u0275\u0275classProp("panel",!0))},inputs:{panel:"panel",contexts:"contexts",nested:"nested",displayType:"displayType",resolvedContext:"resolvedContext",contextChanged:"contextChanged",contextsChanged:"contextsChanged",indexPosition:"indexPosition",ancestory:"ancestory",css:"css",listeners:"listeners"},outputs:{heightChange:"heightChange"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.SD,useExisting:(0,o.forwardRef)(()=>e),multi:!0}]),o.\u0275\u0275NgOnChangesFeature],decls:5,vars:2,consts:[[1,"render-panel",3,"formGroup"],["panes",""],["classifiedsUiPaneContentHost",""],[4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],["formArrayName","panes"],[3,"formControlName","pluginName","settings","name","label","originPane","contexts","displayType","resolvedContext","indexPosition","css","listeners","ancestory","panes","originPanes",4,"ngFor","ngForOf"],[3,"formControlName","pluginName","settings","name","label","originPane","contexts","displayType","resolvedContext","indexPosition","css","listeners","ancestory","panes","originPanes"],[3,"pluginName","settings","name","label","originPane","contexts","linkedPageId","displayType","resolvedContext","indexPosition","css","listeners","ancestory","panes","originPanes",4,"ngFor","ngForOf"],[3,"pluginName","settings","name","label","originPane","contexts","linkedPageId","displayType","resolvedContext","indexPosition","css","listeners","ancestory","panes","originPanes"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0,1),o.\u0275\u0275elementContainerStart(2),o.\u0275\u0275template(3,tB,0,0,"ng-template",2),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275template(4,sB,4,3,"ng-container",3),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.panelForm),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngIf",!r.stylePlugin&&r.resolvedPanes))},directives:[vf,d.JL,d.sg,Nh,C.NgIf,C.NgSwitch,C.NgSwitchCase,d.CE,C.NgForOf,d.JJ,d.u],styles:["[_nghost-%COMP%]{height:100%}.render-panel[_ngcontent-%COMP%]{height:100%}"]}),e})(),dv=(()=>{class e{constructor(t){t.register(new G0({id:"panels_form_submit",title:"Submit Panels Form"})),t.register(new G0({id:"panels_dialog",title:"Open Panels Dialog"}))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(U0))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[C.CommonModule,d.u5,on.UtilsModule,d.UX,Xg,Kb]]}),e})();const yf={},Zb={};let ew=!1;function tw(e,n){return(0,re.mG)(this,void 0,void 0,function*(){return Zb[n]||(ew||(yield x.I("default"),ew=!0),yield e.init(x.S.default),Zb[n]=!0),e})}function nw(e,n){return(0,re.mG)(this,void 0,void 0,function*(){return new Promise((t,r)=>{if(yf[n])return void t();const s=document.createElement("script");s.src=e,s.onerror=r,s.onload=()=>{const a=window[n];tw(a,n),yf[n]=a,t()},document.body.appendChild(s)})})}function dc(e){return(0,re.mG)(this,void 0,void 0,function*(){let n,t;return e.type||(e.type="script"),"script"===e.type?(n={type:"script",remoteEntry:e.remoteEntry,remoteName:e.remoteName},t=e.remoteName):"module"===e.type&&(n={type:"module",remoteEntry:e.remoteEntry},t=e.remoteEntry),e.remoteEntry&&(yield function dB(e,n){return(0,re.mG)(this,void 0,void 0,function*(){if("string"==typeof e)return yield nw(e,n);if("script"===e.type){const t=e;return yield nw(t.remoteEntry,t.remoteName)}"module"===e.type&&(yield function fB(e){return(0,re.mG)(this,void 0,void 0,function*(){return yf[e]?Promise.resolve():yield import(e).then(n=>{tw(n,e),yf[e]=n})})}(e.remoteEntry))})}(n)),yield function cB(e,n){return(0,re.mG)(this,void 0,void 0,function*(){return(yield yf[e].get(n))()})}(t,e.exposedModule)})}var jh=x(1948),Bh=x(3525),Ps=x(3626),rw=x(470);function pB(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"a",4),o.\u0275\u0275listener("click",function(){const a=o.\u0275\u0275restoreView(t).$implicit;return o.\u0275\u0275nextContext().onEntitySelected(a.value)}),o.\u0275\u0275elementStart(1,"span",5),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){const t=n.$implicit;o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(t.value.title)}}function hB(e,n){}function mB(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"classifieds-ui-dynamic-content-viewer",1),o.\u0275\u0275listener("docRendered",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onDocRendered()}),o.\u0275\u0275pipe(1,"async"),o.\u0275\u0275elementEnd()}if(2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275property("content",o.\u0275\u0275pipeBind1(1,1,t.content$))}}function gB(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"classifieds-ui-dynamic-content-viewer",1),o.\u0275\u0275listener("docRendered",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onDocRendered()}),o.\u0275\u0275pipe(1,"async"),o.\u0275\u0275elementEnd()}if(2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275property("content",o.\u0275\u0275pipeBind1(1,1,t.content$))}}function vB(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"a",4),o.\u0275\u0275listener("click",function(){const a=o.\u0275\u0275restoreView(t).$implicit;return o.\u0275\u0275nextContext().onStyleSelected(a.value)}),o.\u0275\u0275elementStart(1,"span",5),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){const t=n.$implicit;o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(t.value.title)}}function yB(e,n){}const _B=["contentEditor"];function bB(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function wB(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",19),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext(2).onOverrideClick()}),o.\u0275\u0275text(1,"Override"),o.\u0275\u0275elementEnd()}}function CB(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",19),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext(2).onRemoveOverrideClick()}),o.\u0275\u0275text(1,"Remove Override"),o.\u0275\u0275elementEnd()}}function xB(e,n){}const Lh=function(e){return{settings:e}},SB=function(e){return{visible:e}};function EB(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",9),o.\u0275\u0275elementStart(1,"div",10),o.\u0275\u0275elementStart(2,"div",11),o.\u0275\u0275elementStart(3,"button",12),o.\u0275\u0275elementStart(4,"mat-icon"),o.\u0275\u0275text(5,"more_vert"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"mat-expansion-panel",13),o.\u0275\u0275listener("afterCollapse",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onAfterCollapse()})("afterExpand",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onAfterExpand()}),o.\u0275\u0275elementStart(7,"mat-expansion-panel-header"),o.\u0275\u0275elementStart(8,"mat-panel-title"),o.\u0275\u0275text(9),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(10,"div",14),o.\u0275\u0275elementStart(11,"ul"),o.\u0275\u0275template(12,bB,1,0,"ng-container",15),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(13,"div",16),o.\u0275\u0275template(14,wB,2,0,"button",17),o.\u0275\u0275template(15,CB,2,0,"button",17),o.\u0275\u0275elementContainerStart(16),o.\u0275\u0275template(17,xB,0,0,"ng-template",18),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){const t=o.\u0275\u0275nextContext(),r=o.\u0275\u0275reference(6),s=o.\u0275\u0275reference(2);o.\u0275\u0275advance(3),o.\u0275\u0275property("matMenuTriggerFor",r),o.\u0275\u0275advance(6),o.\u0275\u0275textInterpolate2("",t.contentPlugin.title," : ",t.name,""),o.\u0275\u0275advance(1),o.\u0275\u0275property("hidden",t.preview),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngTemplateOutlet",s)("ngTemplateOutletContext",o.\u0275\u0275pureFunction1(9,Lh,t.settings)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction1(11,SB,t.preview)),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.displayOverride&&!t.hasOverride),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.displayOverride&&t.hasOverride)}}function AB(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"span"),o.\u0275\u0275text(1),o.\u0275\u0275pipe(2,"attribute"),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext().$implicit,r=o.\u0275\u0275nextContext().settings;o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(o.\u0275\u0275pipeBind2(2,1,r,t.name))}}function PB(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function IB(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"ul"),o.\u0275\u0275template(1,PB,1,0,"ng-container",15),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275nextContext(2);const r=o.\u0275\u0275reference(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",r)("ngTemplateOutletContext",o.\u0275\u0275pureFunction1(2,Lh,t.attributes))}}function TB(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"li"),o.\u0275\u0275text(1),o.\u0275\u0275template(2,AB,3,4,"span",21),o.\u0275\u0275template(3,IB,2,4,"ul",21),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,r=o.\u0275\u0275nextContext().settings;o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",t.displayName,": "),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!t.attributes||0==t.attributes.length),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.attributes&&t.attributes.length>0)}}function RB(e,n){1&e&&o.\u0275\u0275template(0,TB,4,3,"li",20),2&e&&o.\u0275\u0275property("ngForOf",n.settings)}function kB(e,n){}function OB(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",22),o.\u0275\u0275elementStart(1,"classifieds-ui-content-editor",23,24),o.\u0275\u0275listener("nestedUpdate",function(s){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onNestedUpdate(s)})("delete",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onDeleteClick()})("rules",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onRulesClick()})("props",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onPropsClick()}),o.\u0275\u0275template(3,kB,0,0,"ng-template",null,25,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("panelPage",t.panelPage)("savable",!1)("nested",!0)("locked",t.locked)("contexts",t.contexts)("rootContext",t.rootContext)("ancestory",t.paneAncestoryWithSelf)}}function FB(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",26),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onPreviewClick()}),o.\u0275\u0275text(1,"Preview"),o.\u0275\u0275elementEnd()}if(2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275property("disabled",t.locked)}}function DB(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",27),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onDisablePreviewClick()}),o.\u0275\u0275text(1,"Disable Preview"),o.\u0275\u0275elementEnd()}}const MB=["extraActionsArea"],NB=["contextsMenuTpl"],jB=["editablePaneTpl"],BB=["panes"];function LB(e,n){}const iw=function(e){return{nested:e}};function zB(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"form",7),o.\u0275\u0275listener("ngSubmit",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().submit()}),o.\u0275\u0275elementContainerStart(1),o.\u0275\u0275template(2,LB,0,0,"ng-template",8),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementEnd()}if(2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275property("formGroup",t.contentForm)("ngClass",o.\u0275\u0275pureFunction1(2,iw,t.nested))}}function UB(e,n){}function GB(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div",9),o.\u0275\u0275elementContainerStart(1),o.\u0275\u0275template(2,UB,0,0,"ng-template",8),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275property("formGroup",t.contentForm)("ngClass",o.\u0275\u0275pureFunction1(2,iw,t.nested))}}function VB(e,n){1&e&&o.\u0275\u0275element(0,"div",12)}function $B(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"classifieds-ui-editable-pane",10),o.\u0275\u0275listener("delete",function(){const s=o.\u0275\u0275restoreView(t),a=s.i,l=s.j;return o.\u0275\u0275nextContext().onDeletePane(a,l)})("rules",function(){const s=o.\u0275\u0275restoreView(t),a=s.i,l=s.j;return o.\u0275\u0275nextContext().onRulesPane(a,l)})("nestedUpdate",function(s){const a=o.\u0275\u0275restoreView(t),l=a.i,u=a.j;return o.\u0275\u0275nextContext().onNestedUpdate(s,l,u)})("rendererOverride",function(){const s=o.\u0275\u0275restoreView(t),a=s.i,l=s.j;return o.\u0275\u0275nextContext().onOverrideRenderer(a,l)})("removeRendererOverride",function(){const s=o.\u0275\u0275restoreView(t),a=s.i,l=s.j;return o.\u0275\u0275nextContext().onRemoveOverrideRenderer(a,l)})("edit",function(){const s=o.\u0275\u0275restoreView(t),a=s.i,l=s.j;return o.\u0275\u0275nextContext().onPaneEdit(a,l)})("props",function(){const s=o.\u0275\u0275restoreView(t),a=s.i,l=s.j;return o.\u0275\u0275nextContext().editPaneProps(a,l)})("delete",function(){const s=o.\u0275\u0275restoreView(t),a=s.i,l=s.j;return o.\u0275\u0275nextContext().onPaneDelete(a,l)}),o.\u0275\u0275template(1,VB,1,0,"div",11),o.\u0275\u0275elementEnd()}if(2&e){const t=n.i,r=n.j,s=o.\u0275\u0275nextContext();o.\u0275\u0275property("panelIndex",t)("paneIndex",r)("name",s.panelPaneName(t,r))("label",s.panelPaneLabel(t,r))("locked",s.panelPaneLocked(t,r))("contexts",s.contexts)("pluginName",s.panelPanePlugin(t,r))("settings",s.panelPaneSettings(t,r))("ancestory",s.ancestory)}}function HB(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"button",13),o.\u0275\u0275text(1,"( x )"),o.\u0275\u0275elementEnd()),2&e){o.\u0275\u0275nextContext();const t=o.\u0275\u0275reference(8);o.\u0275\u0275property("matMenuTriggerFor",t)}}function qB(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"button",5),o.\u0275\u0275listener("click",function(){const a=o.\u0275\u0275restoreView(t).$implicit;return o.\u0275\u0275nextContext().onEditContext(a.name)}),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()}if(2&e){const t=n.$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(t.name)}}function KB(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"a",1),o.\u0275\u0275listener("click",function(){const a=o.\u0275\u0275restoreView(t).$implicit;return o.\u0275\u0275nextContext().onItemSelect(a.value)}),o.\u0275\u0275elementStart(1,"span",2),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){const t=n.$implicit;o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(t.value.name)}}function XB(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function WB(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"span"),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1("",t.displayName,": ")}}function JB(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"span"),o.\u0275\u0275text(1),o.\u0275\u0275pipe(2,"attribute"),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext().$implicit,r=o.\u0275\u0275nextContext().settings;o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(o.\u0275\u0275pipeBind2(2,1,r,t.name))}}function QB(e,n){1&e&&o.\u0275\u0275elementContainer(0)}function YB(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275template(1,QB,1,0,"ng-container",4),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275nextContext(2);const r=o.\u0275\u0275reference(3);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",r)("ngTemplateOutletContext",o.\u0275\u0275pureFunction1(2,Lh,t.attributes))}}function ZB(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275template(1,WB,2,1,"span",2),o.\u0275\u0275template(2,JB,3,4,"span",2),o.\u0275\u0275template(3,YB,2,4,"div",2),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",0==t.attributes.length),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",0==t.attributes.length),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.attributes.length>0)}}function eL(e,n){1&e&&o.\u0275\u0275template(0,ZB,4,3,"div",6),2&e&&o.\u0275\u0275property("ngForOf",n.settings)}function tL(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275template(1,XB,1,0,"ng-container",4),o.\u0275\u0275template(2,eL,1,1,"ng-template",null,5,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275reference(3),r=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngTemplateOutlet",t)("ngTemplateOutletContext",o.\u0275\u0275pureFunction1(2,Lh,r.attributeValues))}}function nL(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div",7),o.\u0275\u0275element(1,"classifieds-ui-attributes-builder",8),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("formGroup",t.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("attributes",t.attributes)("attributeValues",t.attributeValues)}}function rL(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275template(1,tL,4,4,"div",2),o.\u0275\u0275template(2,nL,2,3,"div",3),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf","page"==t.displayType),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf","form"==t.displayType)}}function iL(e,n){if(1&e&&o.\u0275\u0275element(0,"classifieds-ui-snippet-pane-renderer",9),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275property("settings",t.rendererSettings)("tokens",t.tokens)}}function oL(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"ngx-dropzone-image-preview",2),o.\u0275\u0275listener("removed",function(s){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onRemoveMedia(s)}),o.\u0275\u0275elementStart(1,"ngx-dropzone-label"),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275property("removable",!0)("file",t.media),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate2("",t.media.name," (",t.media.type,")")}}const sL=["img"];function aL(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-option",26),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;o.\u0275\u0275property("value",t),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(t)}}function lL(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275elementStart(1,"mat-form-field",23),o.\u0275\u0275elementStart(2,"mat-label"),o.\u0275\u0275text(3,"Pane"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"mat-select",24),o.\u0275\u0275template(5,aL,2,2,"mat-option",25),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e){const t=n.index,r=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("formGroupName",t),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngForOf",r.panes)}}function uL(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",20),o.\u0275\u0275elementStart(1,"button",21),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().addPane()}),o.\u0275\u0275text(2,"Add Pane"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"div"),o.\u0275\u0275template(4,lL,6,2,"div",22),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(4),o.\u0275\u0275property("ngForOf",t.bindings.controls)}}function cL(e,n){1&e&&(o.\u0275\u0275elementStart(0,"div",27),o.\u0275\u0275elementStart(1,"mat-form-field"),o.\u0275\u0275element(2,"input",28),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"mat-form-field"),o.\u0275\u0275element(4,"input",29),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"mat-form-field"),o.\u0275\u0275element(6,"input",30),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"div"),o.\u0275\u0275elementStart(8,"mat-checkbox",31),o.\u0275\u0275text(9,"Multiple"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(10,"mat-form-field"),o.\u0275\u0275element(11,"input",32),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd())}function dL(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-option",7),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;o.\u0275\u0275property("value",t.value),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(t.label)}}function fL(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"mat-form-field"),o.\u0275\u0275elementStart(2,"mat-label"),o.\u0275\u0275text(3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"mat-select",5),o.\u0275\u0275template(5,dL,2,2,"mat-option",6),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate(t.label),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",t.options)}}function pL(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-radio-button",7),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;o.\u0275\u0275property("value",t.value),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(t.label)}}function hL(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"div"),o.\u0275\u0275elementStart(2,"label"),o.\u0275\u0275text(3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"mat-radio-group",5),o.\u0275\u0275template(5,pL,2,2,"mat-radio-button",6),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate(t.label),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",t.options)}}function mL(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275elementStart(1,"div",9),o.\u0275\u0275elementStart(2,"mat-checkbox",10),o.\u0275\u0275text(3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,r=n.index;o.\u0275\u0275advance(1),o.\u0275\u0275property("formGroupName",r),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(t.label)}}function gL(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"div"),o.\u0275\u0275elementStart(2,"div",1),o.\u0275\u0275template(3,mL,4,2,"div",8),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(3),o.\u0275\u0275property("ngForOf",t.options)}}function vL(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-option",7),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;o.\u0275\u0275property("value",t),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(t.label)}}function yL(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"mat-form-field"),o.\u0275\u0275element(2,"input",11),o.\u0275\u0275elementStart(3,"mat-autocomplete",12,13),o.\u0275\u0275listener("optionSelected",function(s){return o.\u0275\u0275restoreView(t),o.\u0275\u0275nextContext().onOptionSelected(s)}),o.\u0275\u0275template(5,vL,2,2,"mat-option",6),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()}if(2&e){const t=o.\u0275\u0275reference(4),r=o.\u0275\u0275nextContext();o.\u0275\u0275advance(2),o.\u0275\u0275property("placeholder",r.label)("matAutocomplete",t),o.\u0275\u0275advance(1),o.\u0275\u0275property("displayWith",r.displayAuto),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",r.options)}}function _L(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-option",8),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;o.\u0275\u0275property("value",t.name),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(t.name)}}function bL(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",5),o.\u0275\u0275element(1,"druid-panels-panelpage-linkedlist",6),o.\u0275\u0275elementStart(2,"button",3),o.\u0275\u0275listener("click",function(){const a=o.\u0275\u0275restoreView(t).index;return o.\u0275\u0275nextContext().onRemoveMapping(a)}),o.\u0275\u0275text(3,"Remove"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){const t=n.index,r=o.\u0275\u0275nextContext();o.\u0275\u0275property("formGroupName",t),o.\u0275\u0275advance(1),o.\u0275\u0275property("panes",r.panes)}}function wL(e,n){if(1&e&&o.\u0275\u0275element(0,"classifieds-ui-render-pane",4),2&e){const t=o.\u0275\u0275nextContext().index,r=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("pluginName",r.panes[2*t].contentPlugin)("settings",r.panes[2*t].settings)("contexts",r.panes[2*t].contexts)}}function CL(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-tab"),o.\u0275\u0275template(1,wL,1,3,"ng-template",3),o.\u0275\u0275element(2,"classifieds-ui-render-pane",4),o.\u0275\u0275elementEnd()),2&e){const t=n.index,r=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(2),o.\u0275\u0275property("pluginName",r.panes[2*t+1].contentPlugin)("settings",r.panes[2*t+1].settings)("contexts",r.panes[2*t+1].contexts)}}function xL(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-tab-group",1),o.\u0275\u0275template(1,CL,3,3,"mat-tab",2),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("for",t.panes.length/2)}}function SL(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-tab",6),o.\u0275\u0275element(1,"classifieds-ui-render-pane",4),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275property("pluginName",t.contentPlugin)("settings",t.settings)("contexts",t.contexts)}}function EL(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-tab-group",1),o.\u0275\u0275template(1,SL,2,3,"mat-tab",5),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",t.panes)}}function AL(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"div",2),o.\u0275\u0275element(1,"classifieds-ui-render-pane",3),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275property("pluginName",t.contentPlugin)("settings",t.settings)("contexts",t.contexts)("resolvedContext",t.resolvedContext)}}function PL(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"th",7),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(t)}}function IL(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"td",8),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit,r=o.\u0275\u0275nextContext().$implicit,s=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(s.rowData(r,t))}}function TL(e,n){1&e&&(o.\u0275\u0275elementContainerStart(0,4),o.\u0275\u0275template(1,PL,2,1,"th",5),o.\u0275\u0275template(2,IL,2,1,"td",6),o.\u0275\u0275elementContainerEnd()),2&e&&o.\u0275\u0275property("matColumnDef",n.$implicit)}function RL(e,n){1&e&&o.\u0275\u0275element(0,"tr",9)}function kL(e,n){1&e&&o.\u0275\u0275element(0,"tr",10)}const OL={GridLayout:{entityName:"GridLayout"},PanelPageForm:{crud:{panelpageform_serialize:{plugins:{idb_keyval:{params:{prefix:"panelpageform__"}}}}}}};let zh=(()=>{class e{constructor(t){this.viewContainerRef=t}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.ViewContainerRef))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["","classifiedsUiContentSelectionHost",""]]}),e})(),FL=(()=>{class e{constructor(t,r,s,a,l,u){this.data=t,this.bottomSheetRef=r,this.dialog=s,this.componentFactoryResolver=a,this.fb=l,this.contentPluginManager=u,this.selectedIndex=0}ngOnInit(){this.contentPlugins=this.contentPluginManager.getPlugins()}onEntitySelected(t){this.plugin=t,void 0!==this.plugin.selectionComponent?(this.selectedIndex=1,this.renderSelectionComponent()):void 0!==this.plugin.editorComponent?(this.bottomSheetRef.dismiss(),t.handler?this.plugin.handler.editorOptions([]).subscribe(r=>{this.dialog.open(this.plugin.editorComponent,{data:{panelFormGroup:this.data.panelForm,panelIndex:this.data.panelIndex,pane:void 0,paneIndex:void 0,contexts:this.data.contexts,contentAdded:this.data.contentAdded,plugin:t},...r.fullscreen?{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%"}:{}})}):this.dialog.open(this.plugin.editorComponent,{data:{panelFormGroup:this.data.panelForm,panelIndex:this.data.panelIndex,pane:void 0,paneIndex:void 0,contexts:this.data.contexts,contentAdded:this.data.contentAdded}})):this.data.panelForm.get("panes").push(this.fb.group({contentPlugin:this.fb.control(this.plugin.id),name:this.fb.control(""),label:this.fb.control(""),settings:this.fb.array([])}))}renderSelectionComponent(){const t=this.componentFactoryResolver.resolveComponentFactory(this.plugin.selectionComponent),r=this.selectionHost.viewContainerRef;r.clear();const s=r.createComponent(t);s.instance.panelFormGroup=this.data.panelForm,s.instance.contexts=this.data.contexts}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(jl.OG),o.\u0275\u0275directiveInject(jl.oL),o.\u0275\u0275directiveInject(Dt.uw),o.\u0275\u0275directiveInject(o.ComponentFactoryResolver),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Gt.ContentPluginManager))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-content-selector"]],viewQuery:function(t,r){if(1&t&&o.\u0275\u0275viewQuery(zh,7),2&t){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.selectionHost=s.first)}},decls:10,vars:6,consts:[[1,"content-selector-wrapper"],[3,"selectedIndex"],["mat-list-item","","mat-list-item","",3,"click",4,"ngFor","ngForOf"],["classifiedsUiContentSelectionHost",""],["mat-list-item","","mat-list-item","",3,"click"],["mat-line",""]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"mat-tab-group",1),o.\u0275\u0275elementStart(2,"mat-tab"),o.\u0275\u0275elementStart(3,"mat-nav-list"),o.\u0275\u0275template(4,pB,3,1,"a",2),o.\u0275\u0275pipe(5,"keyvalue"),o.\u0275\u0275pipe(6,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"mat-tab"),o.\u0275\u0275elementContainerStart(8),o.\u0275\u0275template(9,hB,0,0,"ng-template",3),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("selectedIndex",r.selectedIndex),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(5,2,o.\u0275\u0275pipeBind1(6,4,r.contentPlugins))))},directives:[Ss.SP,Ss.uX,$a.Hk,$a.Tg,C.NgForOf,cr.X2,zh],pipes:[C.KeyValuePipe,C.AsyncPipe],styles:[".content-selector-wrapper[_ngcontent-%COMP%]     .mat-tab-header{display:none}"]}),e})(),Vl=(()=>{class e{constructor(t,r){this.attributeSerializer=t,this.tokenizrService=r,this.types=["text/markdown","text/html"]}handleFile(t){return new v.y(r=>{const s=new FileReader;s.onload=()=>{r.next(this.buildSettings(new Ol({contentType:t.type,content:`${s.result}`}))),r.complete()},s.readAsText(t)})}handlesType(t){return void 0!==this.types.find(r=>r===t)}implementsRendererOverride(){return!1}hasRendererOverride(t){return(0,Be.of)(!1)}isDynamic(t){return!1}isData(t){return!1}getBindings(t,r,s){return"context"===r?this.toObject(t).pipe((0,be.U)(a=>this.tokenizrService.discoverTokens(a.content).map(u=>new Gt.ContentBinding({id:u,type:"context"})))):(0,Be.of)([])}fetchDynamicData(t,r){return(0,Be.of)(new Rn)}buildDynamicItems(t,r){return(0,Be.of)([])}toObject(t){return(0,Be.of)(new Ol(this.attributeSerializer.deserializeAsObject(t)))}buildSettings(t){return this.attributeSerializer.serialize(t,"root").attributes}stateDefinition(t){return(0,Be.of)({})}editorOptions(t){return(0,Be.of)(new Gt.ContentPluginEditorOptions({fullscreen:!0}))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(Gn))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),ow=(()=>{class e{constructor(t,r,s,a){this.hostEl=t,this.handler=r,this.tokenizerService=s,this.markdownService=a,this.contexts=[],this.afterContentInit$=new M.x,this.content="",this.content$=new m.X(""),this.settings$=new m.X([]),this.snippet$=new m.X(void 0),this.resolvedContext$=new m.X(void 0),this.docRendered$=new M.x,this.contentSub=(0,Bn.a)([this.afterContentInit$,this.content$,this.snippet$,this.docRendered$]).subscribe(([l,u,p])=>{p&&p.jsScript&&""!==p.jsScript&&setTimeout(()=>this.appendScript(p.jsScript))}),this.renderContentSub=(0,Bn.a)([this.settings$,this.resolvedContext$]).pipe((0,tt.w)(([l,u])=>this.handler.toObject(l)),(0,tt.w)(l=>this.resolveContexts().pipe((0,be.U)(u=>[l,u])))).subscribe(([l,u])=>{void 0!==u&&(this.tokens=u),this.contentType=l.contentType,this.snippet$.next(l);const p=this.replaceTokens(l.content),h=l.contentType&&-1!==l.contentType.indexOf("markdown")?this.markdownService.compile(p):p;this.content$.next(h)})}set settings(t){this.settings$.next(t)}set resolvedContext(t){this.resolvedContext$.next(t)}ngOnInit(){}ngOnChanges(){console.log("pane changed")}ngAfterContentInit(){this.afterContentInit$.next(),this.afterContentInit$.complete()}replaceTokens(t){return void 0!==this.tokens&&this.tokens.forEach((r,s)=>{t=t.split(`[${s}]`).join(`${r}`)}),t}resolveContexts(){return new v.y(t=>{let r=new Map;if(this.resolvedContext$.value)for(const s in this.resolvedContext$.value)r=new Map([...r,...this.tokenizerService.generateGenericTokens(this.resolvedContext$.value[s],"_root"===s?"":s)]);t.next(r),t.complete()})}appendScript(t){let r=document.createElement("script");r.type="text/javascript",r.appendChild(document.createTextNode(t)),this.hostEl.nativeElement.appendChild(r),console.log("add script")}onDocRendered(){this.docRendered$.next(void 0)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.ElementRef),o.\u0275\u0275directiveInject(Vl),o.\u0275\u0275directiveInject(Gn),o.\u0275\u0275directiveInject(ch))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-snippet-pane-renderer"]],inputs:{settings:"settings",contexts:"contexts",tokens:"tokens",resolvedContext:"resolvedContext"},features:[o.\u0275\u0275NgOnChangesFeature],decls:2,vars:2,consts:[[3,"content","docRendered",4,"ngIf"],[3,"content","docRendered"]],template:function(t,r){1&t&&(o.\u0275\u0275template(0,mB,2,3,"classifieds-ui-dynamic-content-viewer",0),o.\u0275\u0275template(1,gB,2,3,"classifieds-ui-dynamic-content-viewer",0)),2&t&&(o.\u0275\u0275property("ngIf","text/markdown"==r.contentType),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf","text/html"==r.contentType))},directives:[on.DynamicContentViewer,C.NgIf],pipes:[C.AsyncPipe],styles:[""]}),e})(),$l=(()=>{class e{constructor(t){this.snippetHandler=t}handleFile(t){return(0,Be.of)([])}handlesType(t){return!1}implementsRendererOverride(){return!0}hasRendererOverride(t){return this.rendererSnippet(t).pipe((0,be.U)(r=>void 0!==r))}isDynamic(t){return!1}isData(t){return!1}fetchDynamicData(t,r){return(0,Be.of)(new Rn)}buildDynamicItems(t,r){return(0,Be.of)([])}getBindings(t,r,s){return(0,Be.of)([])}valueSettings(t){const r=[];return t.forEach(s=>{"value"===s.name&&r.push(s)}),r}rendererSnippet(t){let r;return t.forEach(s=>{"_renderer"===s.name&&(r=this.snippetHandler.toObject(s.attributes))}),void 0!==r?r:(0,Be.of)(void 0)}rendererOverrideSettings(t){return[new Ct.AttributeValue({name:"_renderer",type:Ct.AttributeTypes.Complex,displayName:"Renderer Override",value:void 0,computedValue:void 0,intValue:0,attributes:this.snippetHandler.buildSettings(t)})]}widgetSettings(t){return[new Ct.AttributeValue({name:"widget",type:t.schema.type,displayName:"Widget",value:t.name,computedValue:t.name,intValue:0,attributes:[]})]}stateDefinition(t){return(0,Be.of)({})}editorOptions(t){return(0,Be.of)(new Gt.ContentPluginEditorOptions)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Vl))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),DL=(()=>{class e{constructor(t,r,s,a,l){this.data=t,this.dialogRef=r,this.tokenizerService=s,this.handler=a,this.fb=l}ngOnInit(){this.tokens=this.tokenizerService.generateTokens(this.data.pane.settings)}submitted(t){this.replaceRenderer(t),this.dialogRef.close()}replaceRenderer(t){let r;const s=this.handler.rendererOverrideSettings(t)[0],a=this.convertToGroup(s),l=this.data.panelFormGroup.get("panes").at(this.data.paneIndex).get("settings");l.controls.forEach((u,p)=>{"_renderer"===u.get("name").value&&(r=p)}),void 0!==r?(l.insert(r,a),l.removeAt(r+1)):l.push(a)}convertToGroup(t){const r=this.fb.group({name:new d.NI(t.name,d.kI.required),type:new d.NI(t.type,d.kI.required),displayName:new d.NI(t.displayName,d.kI.required),value:new d.NI(t.value,d.kI.required),computedValue:new d.NI(t.value,d.kI.required),attributes:new d.Oe([])});return t.attributes&&t.attributes.length>0&&t.attributes.forEach(s=>{r.get("attributes").push(this.convertToGroup(s))}),r}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(Gn),o.\u0275\u0275directiveInject($l),o.\u0275\u0275directiveInject(d.qu))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-rendering-editor"]],decls:2,vars:1,consts:[[3,"tokens","submitted"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"classifieds-ui-snippet-form",0),o.\u0275\u0275listener("submitted",function(a){return r.submitted(a)}),o.\u0275\u0275element(1,"classifieds-ui-snippet-form"),o.\u0275\u0275elementEnd()),2&t&&o.\u0275\u0275property("tokens",r.tokens)},directives:[dh],styles:[""]}),e})(),ML=(()=>{class e{constructor(t,r,s,a,l,u){this.data=t,this.spm=r,this.bottomSheetRef=s,this.dialog=a,this.componentFactoryResolver=l,this.fb=u,this.selectedIndex=0}ngOnInit(){this.stylePlugins=this.spm.getPlugins()}onStyleSelected(t){this.plugin=t,void 0!==this.plugin.editorComponent?(this.bottomSheetRef.dismiss(),this.data.panelForm.get("stylePlugin").setValue(this.plugin.name),this.data.panelForm.get("styleTitle").setValue(this.plugin.title),this.data.panelForm.get("settings").clear(),this.dialog.open(this.plugin.editorComponent,{data:{panelFormGroup:this.data.panelForm,panelIndex:this.data.panelIndex,contexts:this.data.contexts}})):(this.data.panelForm.get("stylePlugin").setValue(this.plugin.name),this.data.panelForm.get("styleTitle").setValue(this.plugin.title),this.data.panelForm.get("settings").clear(),this.bottomSheetRef.dismiss())}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(jl.OG),o.\u0275\u0275directiveInject(ic),o.\u0275\u0275directiveInject(jl.oL),o.\u0275\u0275directiveInject(Dt.uw),o.\u0275\u0275directiveInject(o.ComponentFactoryResolver),o.\u0275\u0275directiveInject(d.qu))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-style-selector"]],viewQuery:function(t,r){if(1&t&&o.\u0275\u0275viewQuery(zh,7),2&t){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.selectionHost=s.first)}},decls:10,vars:6,consts:[[1,"style-selector-wrapper"],[3,"selectedIndex"],["mat-list-item","","mat-list-item","",3,"click",4,"ngFor","ngForOf"],["classifiedsUiContentSelectionHost",""],["mat-list-item","","mat-list-item","",3,"click"],["mat-line",""]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"mat-tab-group",1),o.\u0275\u0275elementStart(2,"mat-tab"),o.\u0275\u0275elementStart(3,"mat-nav-list"),o.\u0275\u0275template(4,vB,3,1,"a",2),o.\u0275\u0275pipe(5,"keyvalue"),o.\u0275\u0275pipe(6,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"mat-tab"),o.\u0275\u0275elementContainerStart(8),o.\u0275\u0275template(9,yB,0,0,"ng-template",3),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("selectedIndex",r.selectedIndex),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(5,2,o.\u0275\u0275pipeBind1(6,4,r.stylePlugins))))},directives:[Ss.SP,Ss.uX,$a.Hk,$a.Tg,C.NgForOf,cr.X2,zh],pipes:[C.KeyValuePipe,C.AsyncPipe],styles:[".style-selector-wrapper[_ngcontent-%COMP%]     .mat-tab-header{display:none}"]}),e})(),NL=(()=>{class e{constructor(t,r,s,a,l){this.data=t,this.dialogRef=r,this.fb=s,this.inlineContextResolver=a,this.rulesParser=l,this.rulesForm=this.fb.group({rules:this.fb.control("")}),this.config={fields:{}}}ngOnInit(){this.inlineContextResolver.resolveMerged(this.data.contexts).subscribe(t=>{const r={};for(const s in t)this.rulesParser.buildFields(t[s],s).forEach((a,l)=>{r[l]=a});this.config={...this.config,fields:r},void 0!==this.data.rule&&this.rulesForm.get("rules").setValue(this.data.rule)})}submit(){console.log("the rules"),console.log(this.rulesForm.get("rules").value),this.dialogRef.close(this.rulesForm.get("rules").value)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Yu),o.\u0275\u0275directiveInject(H0))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-rules-dialog"]],decls:6,vars:3,consts:[[1,"rest-form",3,"formGroup","ngSubmit"],["formControlName","rules",3,"config"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return r.submit()}),o.\u0275\u0275elementStart(1,"mat-dialog-content"),o.\u0275\u0275element(2,"query-builder",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"mat-dialog-actions"),o.\u0275\u0275elementStart(4,"button",2),o.\u0275\u0275text(5,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.rulesForm),o.\u0275\u0275advance(2),o.\u0275\u0275property("config",r.config),o.\u0275\u0275advance(2),o.\u0275\u0275property("disabled",!r.rulesForm.valid))},directives:[nv,Dr.lW,d._Y,d.JL,d.sg,Dt.xY,d.JJ,d.u,Dt.H8,Dt.ZT],styles:[""]}),e})(),jL=(()=>{class e{constructor(t,r,s){this.data=t,this.dialogRef=r,this.fb=s,this.propertiesForm=this.fb.group({name:this.fb.control(this.data.props.name),title:this.fb.control(this.data.props.title),path:this.fb.control(this.data.props.path),cssFile:this.fb.control(this.data.props.cssFile),readUserIds:this.fb.array([this.fb.group({userId:this.fb.control(this.data.props.readUserIds&&this.data.props.readUserIds.length>0?this.data.props.readUserIds[0]:"")})])})}ngOnInit(){}submit(){this.dialogRef.close(new nf({...this.propertiesForm.value,readUserIds:this.propertiesForm.value.readUserIds.map(t=>t.userId)}))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-properties-dialog"]],decls:18,vars:2,consts:[[1,"properties-form",3,"formGroup","ngSubmit"],[1,"content-inner"],["fxLayout","column"],["matInput","","formControlName","name","placeholder","Name"],["matInput","","formControlName","title","placeholder","Title"],["matInput","","formControlName","path","placeholder","Path"],["matInput","","formControlName","cssFile","placeholder","Css File"],["formArrayName","readUserIds"],["formGroupName","0"],["matInput","","formControlName","userId","placeholder","Read User Id"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return r.submit()}),o.\u0275\u0275elementStart(1,"mat-dialog-content"),o.\u0275\u0275elementStart(2,"div",1),o.\u0275\u0275elementStart(3,"div",2),o.\u0275\u0275elementStart(4,"mat-form-field"),o.\u0275\u0275element(5,"input",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"mat-form-field"),o.\u0275\u0275element(7,"input",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(8,"mat-form-field"),o.\u0275\u0275element(9,"input",5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(10,"mat-form-field"),o.\u0275\u0275element(11,"input",6),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(12,"mat-form-field",7),o.\u0275\u0275elementStart(13,"div",8),o.\u0275\u0275element(14,"input",9),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(15,"mat-dialog-actions"),o.\u0275\u0275elementStart(16,"button",10),o.\u0275\u0275text(17,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.propertiesForm),o.\u0275\u0275advance(16),o.\u0275\u0275property("disabled",!r.propertiesForm.valid))},directives:[Yt.KE,Dr.lW,d._Y,d.JL,d.sg,Dt.xY,ue,sr.Nt,d.Fj,d.JJ,d.u,d.CE,d.x0,Dt.H8,Dt.ZT],styles:[""]}),e})(),sw=(()=>{class e{constructor(t,r,s){this.data=t,this.dialogRef=r,this.fb=s,this.contextForm=this.fb.group({context:this.fb.control("")}),this.context=t.context}ngOnInit(){}ngAfterViewInit(){this.data.context&&setTimeout(()=>{this.contextFormComp.contextForm.setValue({name:this.data.context.name,plugin:this.data.context.plugin}),"rest"===this.data.context.plugin?setTimeout(()=>{this.contextFormComp.componentRef.instance.restSourceFormComp.restSource={url:this.data.context.rest.url,params:this.data.context.rest.params}}):"datasource"===this.data.context.plugin&&setTimeout(()=>{this.contextFormComp.componentRef.instance.datasourceFormComp.datasource=this.data.context.datasource})})}submit(){""!==this.contextForm.get("context").value.name?this.dialogRef.close(new Ei(this.contextForm.get("context").value)):this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-context-dialog"]],viewQuery:function(t,r){if(1&t&&o.\u0275\u0275viewQuery(k0,5),2&t){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.contextFormComp=s.first)}},decls:6,vars:3,consts:[[1,"context-form",3,"formGroup","ngSubmit"],["formControlName","context",3,"context"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return r.submit()}),o.\u0275\u0275elementStart(1,"mat-dialog-content"),o.\u0275\u0275element(2,"classifieds-ui-context-form",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"mat-dialog-actions"),o.\u0275\u0275elementStart(4,"button",2),o.\u0275\u0275text(5,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.contextForm),o.\u0275\u0275advance(2),o.\u0275\u0275property("context",r.context),o.\u0275\u0275advance(2),o.\u0275\u0275property("disabled",!r.contextForm.valid))},directives:[k0,Dr.lW,d._Y,d.JL,d.sg,Dt.xY,d.JJ,d.u,Dt.H8,Dt.ZT],styles:[""]}),e})(),BL=(()=>{class e{constructor(t,r,s){this.data=t,this.dialogRef=r,this.fb=s,this.propsForm=this.fb.group({name:this.fb.control(this.data.props.name),label:this.fb.control(this.data.props.label)})}ngOnInit(){}submit(){this.dialogRef.close(new yb(this.propsForm.value))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-panel-props-dialog"]],decls:11,vars:2,consts:[[1,"props-form",3,"formGroup","ngSubmit"],[1,"content-inner"],["fxLayout","column"],["matInput","","formControlName","name","placeholder","Name"],["matInput","","formControlName","label","placeholder","Label"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return r.submit()}),o.\u0275\u0275elementStart(1,"mat-dialog-content"),o.\u0275\u0275elementStart(2,"div",1),o.\u0275\u0275elementStart(3,"div",2),o.\u0275\u0275elementStart(4,"mat-form-field"),o.\u0275\u0275element(5,"input",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"mat-form-field"),o.\u0275\u0275element(7,"input",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(8,"mat-dialog-actions"),o.\u0275\u0275elementStart(9,"button",5),o.\u0275\u0275text(10,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.propsForm),o.\u0275\u0275advance(9),o.\u0275\u0275property("disabled",!r.propsForm.valid))},directives:[Yt.KE,Dr.lW,d._Y,d.JL,d.sg,Dt.xY,ue,sr.Nt,d.Fj,d.JJ,d.u,Dt.H8,Dt.ZT],styles:[""]}),e})(),LL=(()=>{class e{constructor(t,r,s){this.data=t,this.dialogRef=r,this.fb=s,this.propsForm=this.fb.group({name:this.fb.control(this.data.props.name),label:this.fb.control(this.data.props.label)})}ngOnInit(){}submit(){this.dialogRef.close(new _b(this.propsForm.value))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-pane-props-dialog"]],decls:11,vars:2,consts:[[1,"props-form",3,"formGroup","ngSubmit"],[1,"content-inner"],["fxLayout","column"],["matInput","","formControlName","name","placeholder","Name"],["matInput","","formControlName","label","placeholder","Label"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return r.submit()}),o.\u0275\u0275elementStart(1,"mat-dialog-content"),o.\u0275\u0275elementStart(2,"div",1),o.\u0275\u0275elementStart(3,"div",2),o.\u0275\u0275elementStart(4,"mat-form-field"),o.\u0275\u0275element(5,"input",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"mat-form-field"),o.\u0275\u0275element(7,"input",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(8,"mat-dialog-actions"),o.\u0275\u0275elementStart(9,"button",5),o.\u0275\u0275text(10,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.propsForm),o.\u0275\u0275advance(9),o.\u0275\u0275property("disabled",!r.propsForm.valid))},directives:[Yt.KE,Dr.lW,d._Y,d.JL,d.sg,Dt.xY,ue,sr.Nt,d.Fj,d.JJ,d.u,Dt.H8,Dt.ZT],styles:[""]}),e})(),aw=(()=>{class e{constructor(t){this.viewContainerRef=t}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.ViewContainerRef))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["","classifiedsUiLayoutEditorHost",""]]}),e})(),lw=(()=>{class e{constructor(t){this.viewContainerRef=t}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.ViewContainerRef))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["","classifiedsUiPaneContentHost",""]]}),e})(),fv=(()=>{class e{constructor(t,r){this.entityServices=t,this.attributeSerializer=r}get entityCollectionService(){return this.entityServices.getEntityCollectionService("PanelPageState")}resolve(t,r){const s=p=>p.entities,u="$."+r.selectionPath.map((p,h)=>`${(h+1)%2==0?"panes":(0===h?"":"nestedPage.")+"panels"}[${p}]`).join(".");return this.entityCollectionService.collection$.pipe((0,xt.Ys)((({id:p,path:h})=>(0,xt.P1)((({id:p})=>(0,xt.P1)(s,h=>h[p]?h[p]:void 0))({id:p}),S=>(0,na.JSONPath)({path:h,json:S})))({id:r.id,path:u})),(0,be.U)(p=>p&&Array.isArray(p)&&0!==p.length?p[0]:this.defaultPaneState(r.value?r.value:{})),(0,be.U)(p=>this.attributeSerializer.deserialize(p.state)),(0,be.U)(p=>p?p.root?p.root:p:{}),(0,ee.b)(p=>{console.log(`resolved panestate[id=${r.id}]${u}`),console.log(p)}))}defaultPaneState(t){return new _o({state:this.attributeSerializer.serialize(t,"root")})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Yn),o.\u0275\u0275inject(Ct.AttributeSerializerService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),uw=(()=>{class e{constructor(t,r,s){this.componentFactoryResolver=t,this.panelHandler=r,this.cpm=s,this.settings=[],this.locked=!1,this.contexts=[],this.edit=new o.EventEmitter,this.props=new o.EventEmitter,this.delete=new o.EventEmitter,this.rules=new o.EventEmitter,this.rendererOverride=new o.EventEmitter,this.removeRendererOverride=new o.EventEmitter,this.nestedUpdate=new o.EventEmitter,this.heightChange=new o.EventEmitter,this.displayOverride=!1,this.hasOverride=!1,this.preview=!1,this.schedulePluginChange=new M.x,this.pluginChangeSub=this.schedulePluginChange.pipe((0,tt.w)(a=>this.cpm.getPlugin(this.pluginName).pipe((0,tt.w)(l=>l.handler.hasRendererOverride(this.settings).pipe((0,be.U)(u=>[a,l,u])))))).subscribe(([a,l,u])=>{this.contentPlugin=l,this.displayOverride=l.handler.implementsRendererOverride(),this.hasOverride=!!u,a&&"panel"===this.pluginName&&this.panelHandler.toObject(this.settings).subscribe(p=>{this.panelPage=p})}),this.ancestory$=new M.x,this.panelIndex$=new M.x,this.paneIndex$=new M.x,this.paneAncestoryWithSelf=[],this.paneAncestoryWithSelfSub=(0,Bn.a)([this.ancestory$,this.panelIndex$,this.paneIndex$]).pipe((0,be.U)(([a,l,u])=>[...a,l,u])).subscribe(a=>{this.paneAncestoryWithSelf=a})}set panelIndex(t){this.panelIndex$.next(t)}set paneIndex(t){this.paneIndex$.next(t)}set ancestory(t){this.ancestory$.next(t)}ngOnInit(){this.schedulePluginChange.next(!0),console.log("here 1")}ngOnChanges(t){this.schedulePluginChange.next(!1),console.log("here 2"),console.log(t)}onEditClick(){this.edit.emit()}onPropsClick(){this.props.emit()}onRulesClick(){this.rules.emit()}onDeleteClick(){this.delete.emit()}onPreviewClick(){this.preview=!0,void 0!==this.contentPaneHost&&this.renderPaneContent(),setTimeout(()=>this.heightChange.emit())}onOverrideClick(){this.rendererOverride.emit()}onRemoveOverrideClick(){this.removeRendererOverride.emit()}onNestedUpdate(t){this.nestedUpdate.emit(t)}onDisablePreviewClick(){this.preview=!1,void 0!==this.contentPaneHost&&this.contentPaneHost.viewContainerRef.clear(),setTimeout(()=>this.heightChange.emit())}onAfterCollapse(){this.heightChange.emit()}onAfterExpand(){this.heightChange.emit()}renderPaneContent(){const t=this.componentFactoryResolver.resolveComponentFactory(this.contentPlugin.renderComponent),r=this.contentPaneHost.viewContainerRef;r.clear(),r.createComponent(t).instance.settings=this.settings}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.ComponentFactoryResolver),o.\u0275\u0275directiveInject(Mi),o.\u0275\u0275directiveInject(Gt.ContentPluginManager))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-editable-pane"]],viewQuery:function(t,r){if(1&t&&(o.\u0275\u0275viewQuery(lw,5),o.\u0275\u0275viewQuery(_B,5)),2&t){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.contentPaneHost=s.first),o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.contentEditor=s.first)}},inputs:{pluginName:"pluginName",settings:"settings",name:"name",label:"label",panelIndex:"panelIndex",paneIndex:"paneIndex",locked:"locked",rootContext:"rootContext",contexts:"contexts",ancestory:"ancestory"},outputs:{edit:"edit",props:"props",delete:"delete",rules:"rules",rendererOverride:"rendererOverride",removeRendererOverride:"removeRendererOverride",nestedUpdate:"nestedUpdate",heightChange:"heightChange"},features:[o.\u0275\u0275NgOnChangesFeature],decls:17,vars:6,consts:[["class","editable-pane-wrapper",4,"ngIf","ngIfElse"],["settingsTmpl",""],["nestedPanelTpl",""],["paneMenu","matMenu"],["type","button","mat-menu-item","",3,"disabled","click"],["type","button","mat-menu-item","",3,"click"],["mat-menu-item","","type","button",3,"disabled","click",4,"ngIf"],["mat-menu-item","","type","button",3,"click",4,"ngIf"],["type","button","mat-menu-item","",1,"delete",3,"click"],[1,"editable-pane-wrapper"],["fxLayout","row",1,"inner-pane-wrapper"],[1,"pane-menu-trigger-wrapper"],["mat-button","","type","button",3,"matMenuTriggerFor"],["fxFlex","",3,"afterCollapse","afterExpand"],[3,"hidden"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"preview-area",3,"ngClass"],["class","override","type","button",3,"click",4,"ngIf"],["classifiedsUiPaneContentHost",""],["type","button",1,"override",3,"click"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"nested-panel-wrapper"],[3,"panelPage","savable","nested","locked","contexts","rootContext","ancestory","nestedUpdate","delete","rules","props"],["contentEditor",""],["extraActionsArea",""],["mat-menu-item","","type","button",3,"disabled","click"],["mat-menu-item","","type","button",3,"click"]],template:function(t,r){if(1&t&&(o.\u0275\u0275template(0,EB,18,13,"div",0),o.\u0275\u0275template(1,RB,1,1,"ng-template",null,1,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(3,OB,5,7,"ng-template",null,2,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementStart(5,"mat-menu",null,3),o.\u0275\u0275elementStart(7,"button",4),o.\u0275\u0275listener("click",function(){return r.onEditClick()}),o.\u0275\u0275text(8,"Edit"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"button",4),o.\u0275\u0275listener("click",function(){return r.onPropsClick()}),o.\u0275\u0275text(10,"Props"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(11,"button",5),o.\u0275\u0275listener("click",function(){return r.onRulesClick()}),o.\u0275\u0275text(12,"Rules"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(13,FB,2,1,"button",6),o.\u0275\u0275template(14,DB,2,0,"button",7),o.\u0275\u0275elementStart(15,"button",8),o.\u0275\u0275listener("click",function(){return r.onDeleteClick()}),o.\u0275\u0275text(16,"Delete"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t){const s=o.\u0275\u0275reference(4);o.\u0275\u0275property("ngIf","panel"!=r.pluginName||r.locked)("ngIfElse",s),o.\u0275\u0275advance(7),o.\u0275\u0275property("disabled",r.locked),o.\u0275\u0275advance(2),o.\u0275\u0275property("disabled",r.locked&&0!==r.settings.length),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngIf",!r.preview),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.preview)}},directives:function(){return[Dr.lW,pf.Hw,uv.ib,uv.yz,pv,Ni.VK,Ni.OP,C.NgIf,ue,Ni.p6,Ut,uv.yK,C.NgTemplateOutlet,C.NgClass,Ur,lw,C.NgForOf]},pipes:function(){return[Ct.AttributePipe]},styles:[".editable-pane-wrapper[_ngcontent-%COMP%]{margin-bottom:.25em;border-radius:4px;padding-left:.25em;box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f}.nested-panel-wrapper[_ngcontent-%COMP%]{margin-bottom:.25em}.inner-pane-wrapper[_ngcontent-%COMP%]{padding:0}.pane-header[_ngcontent-%COMP%]{background-color:#ccc;padding:0}.mat-menu-trigger[_ngcontent-%COMP%]{min-width:0;padding:0;margin:0}button.delete[_ngcontent-%COMP%]{float:right}.preview-area[_ngcontent-%COMP%]{display:none;position:relative}.preview-area.visible[_ngcontent-%COMP%]{display:block;height:300px;overflow-y:scroll;border:1px solid black;padding:.5em}.panel-name[_ngcontent-%COMP%]{float:right;padding-right:.5em}.pane-menu-trigger-wrapper[_ngcontent-%COMP%]{display:flex}.mat-expansion-panel[_ngcontent-%COMP%]{box-shadow:none}.mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0 1em 0 .25em}"]}),e})(),pv=(()=>{class e{constructor(t,r,s,a,l,u,p,h,S,G,W,J,ve,Ne){this.siteName=t,this.cpm=r,this.spm=s,this.lpm=a,this.cxtm=l,this.fb=u,this.bs=p,this.dialog=h,this.panelHandler=S,this.tokenizerService=G,this.componentFactoryResolver=W,this.pageBuilderFacade=J,this.paneStateContextResolver=ve,this.panelsContextService=Ne,this.submitted=new o.EventEmitter,this.nestedUpdate=new o.EventEmitter,this.delete=new o.EventEmitter,this.rules=new o.EventEmitter,this.props=new o.EventEmitter,this.savable=!0,this.nested=!1,this.locked=!1,this.pageBuilder=!1,this.contexts=[],this.contentAdded=new M.x,this.contentAdddedSub=this.contentAdded.subscribe(([Re,De])=>{this.resolvePaneContexts(Re,De)}),this.dashboard=[],this.pageProperties=new nf,this.persistence=new ec,this.interactions=new Nl,this.layoutSetting=new Fn,this.rowSettings=[],this.ancestory$=new m.X([]),this.onTouched=()=>{},this.contentForm=this.fb.group({name:this.fb.control(""),title:this.fb.control(""),layoutType:this.fb.control("split",d.kI.required),displayType:this.fb.control("page",d.kI.required),panels:this.fb.array([])}),this.options={gridType:xn.Fit,displayGrid:sf.Always,pushItems:!0,draggable:{enabled:!0},resizable:{enabled:!0},mobileBreakpoint:0,itemChangeCallback:(Re,De)=>{},itemInitCallback:(Re,De)=>{if(this.nested&&0!==Re.y){const Je=this.gridLayout.grid.findIndex(et=>et.x===Re.x&&et.y===Re.y&&et.cols===Re.cols&&et.rows===Re.rows);0===this.panelPanes(Je).length&&this.gridLayout.setItemContentHeight(Je,200)}}},this.ancestorySub=this.ancestory$.pipe((0,U.h)(()=>!!this.layoutEditorRef)).subscribe(Re=>{this.layoutEditorRef.instance.ancestory=Re})}set ancestory(t){this.ancestory$.next(t)}get ancestory(){return this.ancestory$.value}get panels(){return this.contentForm.get("panels")}get layoutType(){return this.contentForm.get("layoutType")}get displayType(){return this.contentForm.get("displayType")}get columnSettings(){const t=this.panels.length;let r=[];for(let s=0;s<t;s++)r=[...r,new Fn(this.panels.at(s).get("columnSetting").value)];return r}ngOnInit(){this.contentForm.valueChanges.pipe((0,U.h)(()=>this.nested),(0,qn.b)(500)).subscribe(()=>{this.nestedUpdate.emit(this.packageFormData())}),this.contentForm.get("layoutType").valueChanges.pipe((0,U.h)(t=>"gridless"===t),(0,Hn.g)(1)).subscribe(t=>{0===this.panels.length&&this.panels.push(this.fb.group({name:new d.NI(""),label:new d.NI(""),stylePlugin:new d.NI(""),styleTitle:new d.NI(""),settings:new d.Oe([]),panes:this.fb.array([]),columnSetting:this.fb.group({settings:this.fb.array([])})}))}),this.contentForm.valueChanges.pipe((0,U.h)(()=>!this.nested),(0,qn.b)(500)).subscribe(()=>{const t=this.packageFormData();this.pageBuilderFacade.setPage(t)})}ngAfterViewInit(){this.layoutType.valueChanges.pipe((0,U.h)(()=>!!this.layoutEditorHost)).subscribe(t=>{this.renderEditorLayout(t)}),this.layoutType.value&&this.renderEditorLayout(this.layoutType.value)}ngAfterContentInit(){setTimeout(()=>{this.panelPage||this.contentForm.get("layoutType").setValue("split")},1e3)}ngOnChanges(t){t.panelPage&&t.panelPage.previousValue!==t.panelPage.currentValue&&(this.panels.clear(),this.panelPageId=t.panelPage.currentValue.panelPageId,this.dashboard=t.panelPage.currentValue.gridItems.map(r=>Object.assign({},r)),this.layoutType.setValue(t.panelPage.currentValue.layoutType),this.layoutSetting=new Fn(t.panelPage.currentValue.layoutSetting),this.rowSettings=t.panelPage.currentValue.rowSettings?t.panelPage.currentValue.rowSettings.map(r=>new Fn(r)):[],this.persistence=t.panelPage.currentValue.persistence?new ec(t.panelPage.currentValue.persistence):new ec,this.interactions=t.panelPage.currentValue.interactions?new Nl(t.panelPage.currentValue.interactions):new Nl,this.nested?(this.pageProperties=new nf({name:t.panelPage.currentValue.name,title:t.panelPage.currentValue.title,path:"",readUserIds:[],cssFile:""}),this.contentForm.get("name").setValue(t.panelPage.currentValue.name),this.contentForm.get("title").setValue(t.panelPage.currentValue.title)):(this.pageProperties=new nf({name:t.panelPage.currentValue.name,title:t.panelPage.currentValue.title,path:t.panelPage.currentValue.path,readUserIds:t.panelPage.currentValue.entityPermissions.readUserIds,cssFile:t.panelPage.currentValue.cssFile}),this.contexts=t.panelPage.currentValue.contexts),t.panelPage.currentValue.panels.forEach((r,s)=>{this.panels.push(this.fb.group({name:new d.NI(r.name),label:new d.NI(r.label),stylePlugin:new d.NI(r.stylePlugin),styleTitle:new d.NI(""),settings:this.fb.array(void 0!==r.settings?r.settings.map(a=>this.convertToGroup(a)):[]),panes:this.fb.array([]),columnSetting:this.fb.group({settings:this.fb.array(r.columnSetting?r.columnSetting.settings.map(a=>this.convertToGroup(a)):[])})})),r.stylePlugin&&""!==r.stylePlugin&&this.spm.getPlugin(r.stylePlugin).subscribe(a=>{this.panels.at(s).get("styleTitle").setValue(a.title)}),this.nested&&this.panelPanes(this.panels.length-1).valueChanges.pipe((0,qn.b)(5),(0,Hn.g)(1)).subscribe((a=>()=>{if(void 0!==this.gridLayout){const l=this.paneContainers.find((u,p)=>p===a);this.gridLayout.setItemContentHeight(a,l.nativeElement.offsetHeight)}})(this.panels.length-1)),r.panes.forEach((a,l)=>{this.panels.at(s).get("panes").push(this.fb.group({contentPlugin:a.contentPlugin,name:new d.NI(a.name),label:new d.NI(a.label),locked:new d.NI(a.locked),linkedPageId:new d.NI(a.linkedPageId),rule:new d.NI(a.rule&&null!==a.rule?{...a.rule,rules:a.rule.rules&&Array.isArray(a.rule.rules)?a.rule.rules:[]}:{condition:"",rules:[]}),settings:new d.Oe(a.settings.map(u=>this.convertToGroup(u)))})),setTimeout(()=>this.resolvePaneContexts(s,l))})}),this.layoutEditorRef&&(this.layoutEditorRef.instance.layoutSetting=this.layoutSetting,this.layoutEditorRef.instance.rowSettings=this.rowSettings,this.layoutEditorRef.instance.columnSettings=this.columnSettings))}addContent(t){console.log(this.panels.at(t)),this.pageBuilderFacade.getPage$.pipe((0,tt.w)(r=>this.panelsContextService.allActivePageContexts({panelPage:r})),(0,an.q)(1)).subscribe(r=>{this.bs.open(FL,{data:{panelForm:this.panels.at(t),panelIndex:t,contexts:[...this.rootContext?[this.rootContext]:[],...this.contexts,...r]}})})}editPanelProps(t){const r=this.panels.at(t).get("name"),s=this.panels.at(t).get("label");this.dialog.open(BL,{data:{props:new yb({name:r.value,label:s.value})}}).afterClosed().subscribe(a=>{a&&(r.setValue(a.name),s.setValue(a.label))})}editPaneProps(t,r){const s=this.panelPane(t,r).get("name"),a=this.panelPane(t,r).get("label");this.dialog.open(LL,{data:{props:new _b({name:s.value,label:a.value})}}).afterClosed().subscribe(l=>{l&&(s.setValue(l.name),a.setValue(l.label))})}applyStyle(t){this.bs.open(ML,{data:{panelForm:this.panels.controls[t],panelIndex:t,contexts:this.contexts}})}removeStyle(t){this.panels.controls[t].get("stylePlugin").setValue(""),this.panels.controls[t].get("styleTitle").setValue("")}onItemAdded(){console.log("item added"),this.panels.push(this.fb.group({name:new d.NI(""),label:new d.NI(""),stylePlugin:new d.NI(""),styleTitle:new d.NI(""),settings:new d.Oe([]),panes:this.fb.array([]),columnSetting:this.fb.group({settings:this.fb.array([])})})),this.nested&&void 0!==this.gridLayout&&setTimeout(()=>{this.paneContainers.forEach((t,r)=>{this.gridLayout.setItemContentHeight(r,t.nativeElement.offsetHeight)})}),this.panelPanes(this.panels.length-1).valueChanges.pipe((0,U.h)(()=>this.nested&&void 0!==this.gridLayout),(0,qn.b)(5),(0,Hn.g)(1)).subscribe((t=>()=>{const r=this.paneContainers.find((s,a)=>a===t);this.gridLayout.setItemContentHeight(t,r.nativeElement.offsetHeight)})(this.panels.length-1)),this.layoutEditorRef&&(this.layoutEditorRef.instance.columnSettings=this.columnSettings)}onItemRemoved(t){this.panels.removeAt(t),this.nested&&void 0!==this.gridLayout&&setTimeout(()=>{this.paneContainers.forEach((r,s)=>{this.gridLayout.setItemContentHeight(s,r.nativeElement.offsetHeight)})}),this.layoutEditorRef&&(this.layoutEditorRef.instance.columnSettings=this.columnSettings)}onDrop(t){console.log(t);const r=+t.container.data,s=+t.previousContainer.data;if(r===s){const a=t.currentIndex>t.previousIndex?1:-1,l=t.previousIndex,u=t.currentIndex,p=this.panelPanes(r).at(l);for(let h=l;h*a<u*a;h+=a){const S=this.panelPanes(r).at(h+a);this.panelPanes(r).setControl(h,S)}this.panelPanes(r).setControl(u,p)}else{const a=this.panelPanes(s).at(t.previousIndex);this.panelPanes(s).removeAt(t.previousIndex),this.panelPanes(r).insert(t.currentIndex,a)}}onOverrideRenderer(t,r){const s=new dr(this.panelPane(t,r).value);this.dialog.open(DL,{data:{panelFormGroup:this.panels.at(t),paneIndex:r,pane:s}})}onRemoveOverrideRenderer(t,r){const s=this.panelPane(t,r).get("settings");let a;s.controls.forEach((l,u)=>{"_renderer"===l.get("name").value&&(a=u)}),void 0!==a&&s.removeAt(a)}onNestedUpdate(t,r,s){const a=this.panelHandler.buildSettings(t),l=this.panelPane(r,s).get("settings");l.clear(),a.forEach(u=>l.push(this.convertToGroup(u)))}onPaneHeightChange(t){if(this.nested&&this.gridLayout){const r=this.paneContainers.find((s,a)=>a===t);this.gridLayout.setItemContentHeight(t,r.nativeElement.offsetHeight)}}onDeleteClick(){this.delete.emit()}onRulesClick(){this.rules.emit()}onPropertiesClick(){this.props.emit(),this.dialog.open(jL,{data:{props:this.pageProperties}}).afterClosed().subscribe(t=>{t&&(this.pageProperties=new nf({...t}),this.contentForm.get("name").setValue(t.name),this.contentForm.get("title").setValue(t.title))})}onRulesPane(t,r){const s=new dr(this.panelPane(t,r).value),a=""!==this.panelPane(t,r).get("rule").value?this.panelPane(t,r).get("rule").value:void 0,[l]=this.editablePanes.filter((u,p)=>u.name===s.name);this.pageBuilderFacade.getPage$.pipe((0,ee.b)(()=>{this.pageBuilderFacade.setSelectionPath([...this.ancestory,t,r])}),(0,tt.w)(u=>this.panelsContextService.allActivePageContexts({panelPage:u})),(0,tt.w)(u=>this.dialog.open(NL,{data:{rule:a,contexts:[...l.rootContext?[l.rootContext]:this.rootContext?[this.rootContext]:[],...this.contexts,...u]}}).afterClosed()),(0,an.q)(1)).subscribe(u=>{this.panelPane(t,r).get("rule").setValue(u||a||void 0)})}onDeletePane(t,r){console.log(`delete nested pane: ${t} | ${r}`)}onAddContextClick(){const t=this.packageFormData();this.pageBuilderFacade.setPage(t),this.dialog.open(sw,{data:{}}).afterClosed().subscribe(r=>{r&&(this.contexts=[...this.contexts,r])})}onEditContext(t){const r=this.contexts.find(s=>s.name===t);if(console.log(r),r){const s=this.packageFormData();this.pageBuilderFacade.setPage(s),this.dialog.open(sw,{data:{context:r}}).afterClosed().subscribe(a=>{a&&(this.contexts=this.contexts.map(l=>l.name===t?new Ei(a):l))})}}onLayoutSettingChange(t){this.layoutSetting=new Fn(t),this.nested&&this.nestedUpdate.emit(this.packageFormData()),this.layoutEditorRef&&(this.layoutEditorRef.instance.layoutSetting=this.layoutSetting)}onRowSettingsChange(t){this.rowSettings=t.map(r=>new Fn(r)),this.nested&&this.nestedUpdate.emit(this.packageFormData()),this.layoutEditorRef&&(this.layoutEditorRef.instance.rowSettings=this.rowSettings)}onColumnSettingsChange(t){const r=this.panels.length;for(let s=0;s<r;s++){this.panels.at(s).get("columnSetting").get("settings").clear();for(let a=0;a<t[s].settings.length;a++)this.panels.at(s).get("columnSetting").get("settings").push(this.convertToGroup(t[s].settings[a]))}this.nested&&this.nestedUpdate.emit(this.packageFormData()),this.layoutEditorRef&&(this.layoutEditorRef.instance.columnSettings=this.columnSettings)}submit(){this.submitted.emit(this.packageFormData())}packageFormData(){const r=new Cr({id:this.panelPageId,title:this.pageProperties.title,name:this.pageProperties.name,site:this.siteName,path:this.pageProperties.path,cssFile:this.pageProperties.cssFile,displayType:this.displayType.value,layoutType:this.layoutType.value,gridItems:this.layoutEditorRef.instance.gridItems,contexts:this.contexts,panels:this.panels.value,layoutSetting:new Fn(this.layoutSetting),rowSettings:this.rowSettings.map(s=>new Fn(s)),persistence:this.persistence,interactions:this.interactions,entityPermissions:{readUserIds:this.pageProperties.readUserIds,writeUserIds:[],deleteUserIds:[]}});return console.log(r),r}syncNestedPanelPages(){console.log("sync nested"),this.editablePanes.forEach(t=>{if(void 0!==t.contentEditor){const r=this.panelHandler.buildSettings(t.contentEditor.packageFormData()),s=this.panelPane(t.panelIndex,t.paneIndex).get("settings");s.clear(),r.forEach(a=>s.push(this.convertToGroup(a)))}})}resolvePaneContexts(t,r){const s=new dr(this.panelPane(t,r).value),a=this.panelPanes(t).controls;this.cpm.getPlugin(s.contentPlugin).pipe((0,U.h)(l=>void 0!==l.handler&&l.handler.isDynamic(s.settings)),(0,tt.w)(l=>l.handler.fetchDynamicData(s.settings,new Map([["tag",zn()],["contexts",[...this.contexts]]])).pipe((0,be.U)(u=>new Ei({name:"_root",adaptor:"data",data:0!==u.length?u.results[0]:{}})),(0,tt.w)(u=>l.handler.getBindings(s.settings,"pane").pipe((0,be.U)(p=>[u,p.map(h=>a.findIndex(S=>new dr(S.value).name===h.id))])))))).subscribe(([l,u])=>{this.editablePanes.forEach((p,h)=>{u.findIndex(S=>S===h)>-1&&(p.rootContext=l)})})}onPersistenceClick(){this.dialog.open(qF,{data:{persistence:this.persistence,contexts:this.contexts}}).afterClosed().subscribe(t=>{console.log("persistence closed",t),this.persistence=t||this.persistence})}onInteractionsClick(){this.dialog.open(YF,{data:{interactions:this.interactions,contexts:this.contexts},maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%"}).afterClosed().subscribe(t=>{console.log("interactions closed",t),this.interactions=t||this.interactions})}panelPanes(t){return this.panels.at(t).get("panes")}panelPane(t,r){return this.panelPanes(t).at(r)}panelPanePlugin(t,r){return this.panelPane(t,r).get("contentPlugin").value}panelPaneSettings(t,r){return this.panelPane(t,r).get("settings").value}panelPaneName(t,r){return this.panelPane(t,r).get("name").value}panelPaneLabel(t,r){return this.panelPane(t,r).get("label").value}panelPaneLocked(t,r){if(this.locked)return this.locked;const s=this.panelPane(t,r).get("locked");return null!==s&&s.value}panelPaneIsNested(t,r){return"panel"===this.panelPanePlugin(t,r)}panelPanePanelPage(t,r){let s;return this.panelHandler.toObject(this.panelPaneSettings(t,r)).subscribe(a=>{s=a}),s}hasPanelStyle(t){return void 0!==this.panels.at(t).get("stylePlugin").value&&""!==this.panels.at(t).get("stylePlugin").value}panelStyleTitle(t){return this.panels.at(t).get("styleTitle").value}onPaneEdit(t,r){const s=new dr(this.panelPane(t,r).value),a=this.panelPanePlugin(t,r),[l]=this.editablePanes.filter((u,p)=>u.name===s.name);this.cpm.getPlugin(a).pipe((0,U.h)(u=>void 0!==u.editorComponent),(0,tt.w)(u=>this.pageBuilderFacade.getPage$.pipe((0,tt.w)(p=>this.panelsContextService.allActivePageContexts({panelPage:p}).pipe((0,be.U)(h=>[u,h]),(0,an.q)(1))),(0,an.q)(1))),(0,tt.w)(([u,p])=>u.handler?u.handler.editorOptions(s.settings).pipe((0,be.U)(h=>[u,p,h])):(0,Be.of)([u,p,new Gt.ContentPluginEditorOptions]))).subscribe(([u,p,h])=>{this.dialog.open(u.editorComponent,{data:{panelFormGroup:this.panels.at(t),panelIndex:t,paneIndex:r,contexts:[...l.rootContext?[l.rootContext]:this.rootContext?[this.rootContext]:[],...this.contexts,...p],contentAdded:this.contentAdded,pane:s},...h.fullscreen?{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%"}:{}}).afterClosed().subscribe(()=>{this.resolvePaneContexts(t,r)})})}onPaneDelete(t,r){this.panelPanes(t).removeAt(r)}onFileChange(t,r){const s=t.addedFiles[0];this.cpm.getPlugins().pipe((0,be.U)(a=>Array.from(a.values()).filter(l=>void 0!==l.handler).find(l=>l.handler.handlesType(s.type))),(0,U.h)(a=>void 0!==a)).subscribe(a=>{a.handler.handleFile(s).subscribe(l=>{this.panelPanes(r).push(this.fb.group({contentPlugin:a.id,name:new d.NI(""),label:new d.NI(""),settings:this.fb.array(l.map(u=>this.fb.group({name:new d.NI(u.name,d.kI.required),type:new d.NI(u.type,d.kI.required),displayName:new d.NI(u.displayName,d.kI.required),value:new d.NI(u.value,d.kI.required),computedValue:new d.NI(u.value,d.kI.required)})))}))})})}writeValue(t){t&&this.contentForm.setValue(t,{emitEvent:!1})}registerOnChange(t){this.contentForm.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.contentForm.disable():this.contentForm.enable()}validate(t){return this.contentForm.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}convertToGroup(t){const r=this.fb.group({name:new d.NI(t.name,d.kI.required),type:new d.NI(t.type,d.kI.required),displayName:new d.NI(t.displayName,d.kI.required),value:new d.NI(t.value,d.kI.required),computedValue:new d.NI(t.value,d.kI.required),attributes:new d.Oe([])});return t.attributes&&t.attributes.length>0&&t.attributes.forEach(s=>{r.get("attributes").push(this.convertToGroup(s))}),r}renderEditorLayout(t){console.log(`render editor layout ${t}`),this.lpm.getPlugin(t).subscribe(r=>{const s=this.componentFactoryResolver.resolveComponentFactory(r.editor),a=this.layoutEditorHost.viewContainerRef;a.clear(),this.layoutEditorRef=a.createComponent(s),this.layoutEditorRef.instance.savable=this.savable,this.layoutEditorRef.instance.nested=this.nested,this.layoutEditorRef.instance.ancestory=this.ancestory,this.layoutEditorRef.instance.editor=this,this.layoutEditorRef.instance.extraActionsAreaTmpl=this.extraActionsAreaTmpl,this.layoutEditorRef.instance.contextsMenuTpl=this.contextsMenuTpl,this.layoutEditorRef.instance.editablePaneTpl=this.editablePaneTpl,this.layoutEditorRef.instance.dashboard=this.dashboard,this.layoutEditorRef.instance.layoutSetting=this.layoutSetting,this.layoutEditorRef.instance.rowSettings=this.rowSettings,this.layoutEditorRef.instance.columnSettings=this.columnSettings})}updateEditorLayoutVars(){this.layoutEditorRef.instance.savable=this.savable,this.layoutEditorRef.instance.nested=this.nested,this.layoutEditorRef.instance.ancestory=this.ancestory,this.layoutEditorRef.instance.editor=this,this.layoutEditorRef.instance.extraActionsAreaTmpl=this.extraActionsAreaTmpl,this.layoutEditorRef.instance.contextsMenuTpl=this.contextsMenuTpl,this.layoutEditorRef.instance.editablePaneTpl=this.editablePaneTpl,this.layoutEditorRef.instance.dashboard=this.dashboard,this.layoutEditorRef.instance.layoutSetting=this.layoutSetting,this.layoutEditorRef.instance.rowSettings=this.rowSettings,this.layoutEditorRef.instance.columnSettings=this.columnSettings}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(on.SITE_NAME),o.\u0275\u0275directiveInject(Gt.ContentPluginManager),o.\u0275\u0275directiveInject(ic),o.\u0275\u0275directiveInject(Fh),o.\u0275\u0275directiveInject(Va),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(jl.ch),o.\u0275\u0275directiveInject(Dt.uw),o.\u0275\u0275directiveInject(Mi),o.\u0275\u0275directiveInject(Gn),o.\u0275\u0275directiveInject(o.ComponentFactoryResolver),o.\u0275\u0275directiveInject(bo),o.\u0275\u0275directiveInject(fv),o.\u0275\u0275directiveInject(mb))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-content-editor"]],contentQueries:function(t,r,s){if(1&t&&o.\u0275\u0275contentQuery(s,MB,5),2&t){let a;o.\u0275\u0275queryRefresh(a=o.\u0275\u0275loadQuery())&&(r.extraActionsAreaTmpl=a.first)}},viewQuery:function(t,r){if(1&t&&(o.\u0275\u0275viewQuery(Gb,5),o.\u0275\u0275viewQuery($b,5),o.\u0275\u0275viewQuery(aw,5),o.\u0275\u0275viewQuery(NB,7),o.\u0275\u0275viewQuery(jB,7),o.\u0275\u0275viewQuery(BB,5),o.\u0275\u0275viewQuery(uw,5)),2&t){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.gridLayout=s.first),o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.splitLayout=s.first),o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.layoutEditorHost=s.first),o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.contextsMenuTpl=s.first),o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.editablePaneTpl=s.first),o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.paneContainers=s),o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.editablePanes=s)}},inputs:{panelPage:"panelPage",savable:"savable",nested:"nested",locked:"locked",pageBuilder:"pageBuilder",contexts:"contexts",rootContext:"rootContext",ancestory:"ancestory"},outputs:{submitted:"submitted",nestedUpdate:"nestedUpdate",delete:"delete",rules:"rules",props:"props"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>e),multi:!0}]),o.\u0275\u0275NgOnChangesFeature],decls:12,vars:3,consts:[["class","content-editor-wrapper",3,"formGroup","ngClass","ngSubmit",4,"ngIf","ngIfElse"],["nestedTpl",""],["editablePaneTpl",""],["contextsMenuTpl",""],["contextMenu","matMenu"],["type","button","mat-menu-item","",3,"click"],["type","button","mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"content-editor-wrapper",3,"formGroup","ngClass","ngSubmit"],["classifiedsUiLayoutEditorHost",""],[1,"content-editor-wrapper",3,"formGroup","ngClass"],[1,"editable-pane",3,"panelIndex","paneIndex","name","label","locked","contexts","pluginName","settings","ancestory","delete","rules","nestedUpdate","rendererOverride","removeRendererOverride","edit","props"],["class","custom-placeholder",4,"cdkDragPlaceholder"],[1,"custom-placeholder"],["type","button","mat-menu-item","",1,"context-button",3,"matMenuTriggerFor"]],template:function(t,r){if(1&t&&(o.\u0275\u0275template(0,zB,3,4,"form",0),o.\u0275\u0275template(1,GB,3,4,"ng-template",null,1,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(3,$B,2,9,"ng-template",null,2,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275template(5,HB,2,1,"ng-template",null,3,o.\u0275\u0275templateRefExtractor),o.\u0275\u0275elementStart(7,"mat-menu",null,4),o.\u0275\u0275elementStart(9,"button",5),o.\u0275\u0275listener("click",function(){return r.onAddContextClick()}),o.\u0275\u0275text(10,"define variable"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(11,qB,2,1,"button",6),o.\u0275\u0275elementEnd()),2&t){const s=o.\u0275\u0275reference(2);o.\u0275\u0275property("ngIf",!r.nested&&!r.pageBuilder)("ngIfElse",s),o.\u0275\u0275advance(11),o.\u0275\u0275property("ngForOf",r.contexts)}},directives:[uw,Ni.OP,Ni.VK,C.NgIf,d._Y,d.JL,d.sg,C.NgClass,Ur,aw,Ul.Hk,Ni.p6,C.NgForOf],styles:[".content-editor-wrapper[_ngcontent-%COMP%]{height:100%}.panel-inner[_ngcontent-%COMP%]{padding:1em}.content-editor-wrapper[_ngcontent-%COMP%]     ngx-dropzone{height:100%;display:block;padding:0;border:none}.content-editor-wrapper.nested[_ngcontent-%COMP%]     .grid-item-header{border-bottom:1px solid white}.layout-type[_ngcontent-%COMP%], .display-type[_ngcontent-%COMP%]{float:right}.layout-type[_ngcontent-%COMP%]     .mat-form-field-wrapper, .display-type[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:1.5em}.layout-type[_ngcontent-%COMP%]     .mat-form-field-label-wrapper, .display-type[_ngcontent-%COMP%]     .mat-form-field-label-wrapper{display:none}.layout-type[_ngcontent-%COMP%]     .mat-form-field-infix, .display-type[_ngcontent-%COMP%]     .mat-form-field-infix{border-top:none;padding:0;margin:0}.layout-type[_ngcontent-%COMP%]     .mat-form-field, .display-type[_ngcontent-%COMP%]     .mat-form-field{width:85px}.layout-type[_ngcontent-%COMP%]     .mat-select-value, .display-type[_ngcontent-%COMP%]     .mat-select-value{text-align:right}.layout-type[_ngcontent-%COMP%]     .mat-form-field-underline, .display-type[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}classifieds-ui-gridless-layout[_ngcontent-%COMP%]     .main-controls{background-color:#ccc}classifieds-ui-gridless-layout[_ngcontent-%COMP%]     .layout-inner{background-color:#ccc;padding:.75em}classifieds-ui-gridless-layout[_ngcontent-%COMP%]     .editable-pane-wrapper{border:none;margin-bottom:0}classifieds-ui-gridless-layout[_ngcontent-%COMP%]     .pane-header{background-color:#fff}classifieds-ui-gridless-layout[_ngcontent-%COMP%]     .nested-panel-wrapper{padding:.75em;margin-bottom:0}.custom-placeholder[_ngcontent-%COMP%]{background:#ccc;border:dotted 3px #999;transition:transform .25s cubic-bezier(0,0,.2,1)}.context-button[_ngcontent-%COMP%]{font-style:italic;font-family:serif;font-weight:bolder;font-size:medium}"]}),e})(),zL=(()=>{class e{constructor(t,r,s){this.data=t,this.fb=r,this.handler=s}ngOnInit(){void 0!==this.data.pane&&this.handler.toObject(this.data.pane.settings).subscribe(t=>{this.snippet=t})}onSubmit(t){if(void 0===this.data.paneIndex)this.data.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"snippet",name:new d.NI(""),label:new d.NI(""),rule:new d.NI(""),settings:new d.Oe(this.buildSettings(t))}));else{const r=this.data.panelFormGroup.get("panes").at(this.data.paneIndex);r.get("settings").clear(),this.buildSettings(t).forEach(s=>{r.get("settings").push(s)})}}buildSettings(t){return[this.fb.group({name:new d.NI("contentType",d.kI.required),type:new d.NI(Ct.AttributeTypes.Text,d.kI.required),displayName:new d.NI("Content Type",d.kI.required),value:new d.NI(t.contentType,d.kI.required),computedValue:new d.NI(t.contentType,d.kI.required)}),this.fb.group({name:new d.NI("content",d.kI.required),type:new d.NI(Ct.AttributeTypes.Text,d.kI.required),displayName:new d.NI("Content",d.kI.required),value:new d.NI(t.content,d.kI.required),computedValue:new d.NI(t.content,d.kI.required)}),this.fb.group({name:new d.NI("jsScript",d.kI.required),type:new d.NI(Ct.AttributeTypes.Text,d.kI.required),displayName:new d.NI("jsScript",d.kI.required),value:new d.NI(t.jsScript),computedValue:new d.NI(t.jsScript)})]}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Vl))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-snippet-editor2"]],decls:1,vars:1,consts:[[3,"snippet","submitted"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"classifieds-ui-snippet-form",0),o.\u0275\u0275listener("submitted",function(a){return r.onSubmit(a)}),o.\u0275\u0275elementEnd()),2&t&&o.\u0275\u0275property("snippet",r.snippet)},directives:[dh],styles:[""]}),e})(),Uh=(()=>{class e{constructor(t,r,s,a,l,u,p){this.route=t,this.pageBuilderFacade=r,this.routerStore=s,this.asyncApiCallHelperSvc=a,this.crudDataHelperService=l,this.entityDefinitionService=u,this.paramMapSub=this.route.paramMap.pipe((0,ee.b)(()=>console.log("param map panelPageId")),(0,be.U)(h=>h.get("panelPageId")),(0,U.h)(h=>void 0!==h),(0,tt.w)(()=>this.route.data),(0,ao.M)(this.routerStore.pipe((0,xt.Ys)(Xd(h=>h.router).selectCurrentRoute),(0,be.U)(h=>h.params),(0,an.q)(1))),(0,ee.b)(([h,S])=>{console.log("route page"),this.pageBuilderFacade.setPageInfo(new tf({id:h.panelPageListItem.id,realPath:"/pages/panelpage/"+h.panelPageListItem.id,path:h.panelPageListItem.path,args:S})),this.panelPageId=h.panelPageListItem.id})).subscribe(),this.panelPageService=p.getEntityCollectionService("PanelPage")}ngOnInit(){const{selectCurrentRoute:t}=Xd(r=>r.router);this.route.paramMap.pipe((0,ee.b)(()=>console.log("param map page builder facade info")),(0,ao.M)(this.pageBuilderFacade.getPageInfo$),(0,U.h)(([r,s])=>void 0!==s&&void 0!==r.get("panelPageId")&&r.get("panelPageId")===s.id),(0,tt.w)(([r,s])=>this.routerStore.pipe((0,xt.Ys)(t),(0,be.U)(a=>[s,a.params]),(0,an.q)(1)))).subscribe(([r,s])=>{this.pageBuilderFacade.setPageInfo(new tf({...r,args:s}))})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Pn.ActivatedRoute),o.\u0275\u0275directiveInject(bo),o.\u0275\u0275directiveInject(xt.yh),o.\u0275\u0275directiveInject(on.AsyncApiCallHelperService),o.\u0275\u0275directiveInject(Qd),o.\u0275\u0275directiveInject(pi),o.\u0275\u0275directiveInject(Yn))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-panel-page-router"]],decls:1,vars:1,consts:[[3,"id"]],template:function(t,r){1&t&&o.\u0275\u0275element(0,"classifieds-ui-panel-page",0),2&t&&o.\u0275\u0275property("id",r.panelPageId)},directives:[ji],styles:[""]}),e})(),UL=(()=>{class e{constructor(t){this.panelPageService=t.getEntityCollectionService("PanelPage"),this.panelPageListItemService=t.getEntityCollectionService("PanelPageListItem")}ngOnInit(){console.log("here")}onSubmit(t){console.log("create panel page",t),t.id=zn(),this.panelPageService.add(t).subscribe(()=>{console.log("panel page created")})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Yn))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-create-panel-page"]],decls:1,vars:0,consts:[[3,"submitted"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"classifieds-ui-content-editor",0),o.\u0275\u0275listener("submitted",function(a){return r.onSubmit(a)}),o.\u0275\u0275elementEnd())},directives:[pv],styles:[""]}),e})(),Gh=(()=>{class e{constructor(t,r,s,a,l){this.route=t,this.pageBuilderFacade=r,this.routerStore=s,this.moduleLoader=a,this.panelPageService=l.getEntityCollectionService("PanelPage"),this.panelPageListItemService=l.getEntityCollectionService("PanelPageListItem")}ngOnInit(){this.route.paramMap.pipe((0,be.U)(t=>t.get("panelPageId")),(0,U.h)(t=>void 0!==t),(0,kl.x)(),(0,tt.w)(t=>this.panelPageService.getByKey(t)),(0,tt.w)(t=>t?(0,pn.D)(t.contexts.filter(r=>"module"===r.plugin).map(r=>this.moduleLoader.loadModule(()=>dc({type:"module",remoteEntry:r.data.remoteEntry,exposedModule:r.data.exposedModule}).then(s=>s[r.data.moduleName])))).pipe((0,Hn.g)(1),(0,be.U)(()=>t),(0,zr.d)(t)):(0,Be.of)(t)),(0,tt.w)(t=>this.routerStore.pipe((0,xt.Ys)(Xd(r=>r.router).selectCurrentRoute),(0,be.U)(r=>[t,r.params]),(0,an.q)(1))),(0,ee.b)(([t,r])=>this.pageBuilderFacade.setPageInfo(new tf({id:t.id,realPath:`/pages/panelpage/${t.id}`,path:t.path,args:r})))).subscribe(([t])=>{console.log(t),this.panelPage=t})}onSubmit(t){console.log("submitted"),this.panelPageService.update(new Cr({...t,id:this.panelPage.id})).subscribe(()=>{alert("panel page updated")})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Pn.ActivatedRoute),o.\u0275\u0275directiveInject(bo),o.\u0275\u0275directiveInject(xt.yh),o.\u0275\u0275directiveInject(on.ModuleLoaderService),o.\u0275\u0275directiveInject(Yn))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-edit-panel-page"]],decls:1,vars:1,consts:[[3,"panelPage","submitted"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"classifieds-ui-content-editor",0),o.\u0275\u0275listener("submitted",function(a){return r.onSubmit(a)}),o.\u0275\u0275elementEnd()),2&t&&o.\u0275\u0275property("panelPage",r.panelPage)},directives:[pv],styles:[""]}),e})(),GL=(()=>{class e{constructor(t,r,s,a,l,u){this.bottomSheetRef=t,this.handler=r,this.fb=s,this.dialog=a,this.cpm=l,this.wpm=u}ngOnInit(){this.attributeWidgets=this.wpm.getPlugins()}onItemSelect(t){console.log(t),this.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"attribute",name:new d.NI(""),label:new d.NI(""),rule:new d.NI(""),settings:this.fb.array(this.handler.widgetSettings(t).map(l=>this.fb.group({name:new d.NI(l.name,d.kI.required),type:new d.NI(l.type,d.kI.required),displayName:new d.NI(l.displayName,d.kI.required),value:new d.NI(l.value,d.kI.required),computedValue:new d.NI(l.computedValue,d.kI.required)})))}));const r=this.panelFormGroup.get("panes"),s=r.length-1,a=new dr(r.at(s).value);this.cpm.getPlugin("attribute").subscribe(l=>{this.dialog.open(l.editorComponent,{data:{panelFormGroup:this.panelFormGroup,pane:a,paneIndex:s}})}),this.bottomSheetRef.dismiss()}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(jl.oL),o.\u0275\u0275directiveInject($l),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Dt.uw),o.\u0275\u0275directiveInject(Gt.ContentPluginManager),o.\u0275\u0275directiveInject(Ct.WidgetPluginManager))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-attribute-selector"]],inputs:{panelFormGroup:"panelFormGroup"},decls:4,vars:5,consts:[["mat-list-item","","mat-list-item","",3,"click",4,"ngFor","ngForOf"],["mat-list-item","","mat-list-item","",3,"click"],["mat-line",""]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"mat-nav-list"),o.\u0275\u0275template(1,KB,3,1,"a",0),o.\u0275\u0275pipe(2,"keyvalue"),o.\u0275\u0275pipe(3,"async"),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(2,1,o.\u0275\u0275pipeBind1(3,3,r.attributeWidgets))))},directives:[$a.Hk,$a.Tg,C.NgForOf,cr.X2],pipes:[C.KeyValuePipe,C.AsyncPipe],styles:[""]}),e})(),VL=(()=>{class e{constructor(t,r,s,a,l){this.data=t,this.dialogRef=s,this.fb=a,this.handler=l,this.attributes=[],this.attributeValues=[],this.attributesFormGroup=this.fb.group({name:new d.NI(""),label:new d.NI(""),attributes:new d.NI("")});const u=this.data.pane.settings.find(p=>"widget"===p.name);this.widget=r.find(p=>p.name===u.value)}get name(){return this.attributesFormGroup.get("name")}get label(){return this.attributesFormGroup.get("label")}ngOnInit(){const t=this.data.pane.settings.find(a=>"value"===a.name);this.attributes=[new Ct.Attribute({...this.widget.schema,widget:this.widget.name,label:"Value",name:"value"})];const r=this.data.panelFormGroup.get("panes").at(this.data.paneIndex).get("name").value,s=this.data.panelFormGroup.get("panes").at(this.data.paneIndex).get("label").value;this.attributesFormGroup.get("name").setValue(r),this.attributesFormGroup.get("label").setValue(s),void 0!==t?(this.attributeValues=this.handler.valueSettings(this.data.pane.settings),console.log(this.attributeValues)):this.attributeValues=[new Ct.AttributeValue({name:"value",type:this.widget.schema.type,displayName:"Value",value:"",computedValue:"",intValue:0,attributes:[]})]}submit(){const t=this.name.value,r=this.label.value;this.data.panelFormGroup.get("panes").at(this.data.paneIndex).get("name").setValue(t),this.data.panelFormGroup.get("panes").at(this.data.paneIndex).get("label").setValue(r);const s=new dr({name:t,label:r,contentPlugin:"attribute",settings:""===this.attributesFormGroup.get("attributes").value?[]:this.attributesFormGroup.get("attributes").value});0!==s.settings.length?this.handler.rendererSnippet(this.data.pane.settings).subscribe(a=>{const l=void 0!==a?this.handler.rendererOverrideSettings(a):[],u=this.data.panelFormGroup.get("panes").at(this.data.paneIndex).get("settings");u.clear(),[...this.handler.widgetSettings(this.widget),...s.settings,...l].forEach(p=>u.push(this.convertToGroup(p))),this.dialogRef.close()}):this.dialogRef.close()}convertToGroup(t){const r=this.fb.group({name:new d.NI(t.name,d.kI.required),type:new d.NI(t.type,d.kI.required),displayName:new d.NI(t.displayName,d.kI.required),value:new d.NI(t.value,d.kI.required),computedValue:new d.NI(t.value,d.kI.required),attributes:new d.Oe([])});return t.attributes&&t.attributes.length>0&&t.attributes.forEach(s=>{r.get("attributes").push(this.convertToGroup(s))}),r}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Ct.ATTRIBUTE_WIDGET),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject($l))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-attribute-editor"]],decls:10,vars:3,consts:[[3,"formGroup","ngSubmit"],["fxLayout","column"],["matInput","","placeholder","Name","formControlName","name"],["matInput","","placeholder","Label","formControlName","label"],["formControlName","attributes",3,"attributes","attributeValues"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close",""]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return r.submit()}),o.\u0275\u0275elementStart(1,"mat-dialog-content",1),o.\u0275\u0275elementStart(2,"mat-form-field"),o.\u0275\u0275element(3,"input",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"mat-form-field"),o.\u0275\u0275element(5,"input",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(6,"classifieds-ui-attributes-builder",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"mat-dialog-actions"),o.\u0275\u0275elementStart(8,"button",5),o.\u0275\u0275text(9,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.attributesFormGroup),o.\u0275\u0275advance(6),o.\u0275\u0275property("attributes",r.attributes)("attributeValues",r.attributeValues))},directives:[Yt.KE,Ct.AttributesBuilderComponent,Dr.lW,d._Y,d.JL,d.sg,Dt.xY,ue,sr.Nt,d.Fj,d.JJ,d.u,Dt.H8,Dt.ZT],styles:[""]}),e})(),$L=(()=>{class e{constructor(t,r,s,a,l){this.widgets=t,this.handler=r,this.tokenizerService=s,this.fb=a,this.controlContainer=l,this.settings=[],this.appearance="legacy",this.attributes=[]}ngOnInit(){this.attributes=[new Ct.Attribute({...this.widgets.find(t=>t.name===this.settings.find(r=>"widget"===r.name).value).schema,name:"value",label:"Value"})],this.attributeValues=this.handler.valueSettings(this.settings),this.tokens=this.tokenizerService.generateTokens(this.attributeValues),this.handler.rendererSnippet(this.settings).subscribe(t=>{this.rendererOverride=t,void 0!==t&&(this.rendererSettings=this.handler.rendererOverrideSettings(t)[0].attributes)})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Ct.ATTRIBUTE_WIDGET),o.\u0275\u0275directiveInject($l),o.\u0275\u0275directiveInject(Gn),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(d.gN,8))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-attribute-pane-renderer"]],inputs:{settings:"settings",appearance:"appearance",name:"name",label:"label",displayType:"displayType"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["overrideTpl",""],[4,"ngIf"],[3,"formGroup",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["settingsTmpl",""],[4,"ngFor","ngForOf"],[3,"formGroup"],["formControlName","settings",3,"attributes","attributeValues"],[3,"settings","tokens"]],template:function(t,r){if(1&t&&(o.\u0275\u0275template(0,rL,3,2,"div",0),o.\u0275\u0275template(1,iL,1,2,"ng-template",null,1,o.\u0275\u0275templateRefExtractor)),2&t){const s=o.\u0275\u0275reference(2);o.\u0275\u0275property("ngIf",!r.rendererOverride)("ngIfElse",s)}},directives:[Ct.AttributesBuilderComponent,ow,C.NgIf,C.NgTemplateOutlet,C.NgForOf,d.JL,d.sg,d.JJ,d.u],pipes:[Ct.AttributePipe],styles:[".override[_ngcontent-%COMP%]{position:absolute;top:.5em;right:.5em}"]}),e})(),fc=(()=>{class e{constructor(t,r){this.filesService=t,this.attributeSerializer=r,this.types=["image/png","image/jpg","image/jpeg","image/gif"]}handleFile(t){return this.filesService.bulkUpload({files:[t]}).pipe((0,be.U)(r=>this.buildSettings(r[0])))}handlesType(t){return void 0!==this.types.find(r=>r===t)}implementsRendererOverride(){return!1}hasRendererOverride(t){return(0,Be.of)(!1)}isDynamic(t){return!1}isData(t){return!1}buildDynamicItems(t,r){return(0,Be.of)([])}fetchDynamicData(t,r){return(0,Be.of)(new Rn)}getBindings(t,r,s){return(0,Be.of)([])}toObject(t){return(0,Be.of)(this.attributeSerializer.deserializeAsObject(t))}buildSettings(t){return t.fileName="placeholdername",this.attributeSerializer.serialize(t,"root").attributes}stateDefinition(t){return(0,Be.of)({mediaLoading:"y",mediaLoaded:"n",loadError:"n",loadDuration:"y"})}editorOptions(t){return(0,Be.of)(new Gt.ContentPluginEditorOptions)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(rh),o.\u0275\u0275inject(Ct.AttributeSerializerService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),HL=(()=>{class e{constructor(t,r,s,a,l){this.data=t,this.dialogRef=r,this.fb=s,this.filesService=a,this.handler=l,this.mediaTypes=".png,.jpg,.jpeg,.gif,.svg"}ngOnInit(){void 0!==this.data.pane&&this.handler.toObject(this.data.pane.settings).pipe((0,tt.w)(t=>this.filesService.convertToFiles([t]))).subscribe(t=>{this.media=t[0]})}onSelectMedia(t){this.media=t.addedFiles[0],this.handler.handleFile(this.media).subscribe(r=>{void 0===this.data.paneIndex&&this.data.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"media",name:new d.NI(""),label:new d.NI(""),rule:new d.NI(""),settings:new d.Oe(r.map(s=>this.fb.group({name:new d.NI(s.name,d.kI.required),type:new d.NI(s.type,d.kI.required),displayName:new d.NI(s.displayName,d.kI.required),value:new d.NI(s.value,d.kI.required),computedValue:new d.NI(s.value,d.kI.required)})))})),this.dialogRef.close()})}onRemoveMedia(t){this.media=void 0}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(rh),o.\u0275\u0275directiveInject(fc))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-media-editor"]],decls:4,vars:3,consts:[[3,"multiple","accept","change"],[3,"removable","file","removed",4,"ngIf"],[3,"removable","file","removed"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"ngx-dropzone",0),o.\u0275\u0275listener("change",function(a){return r.onSelectMedia(a)}),o.\u0275\u0275elementStart(1,"ngx-dropzone-label"),o.\u0275\u0275text(2,"Drag and Drop Media Here"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(3,oL,3,4,"ngx-dropzone-image-preview",1),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("multiple",!1)("accept",r.mediaTypes),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",r.media))},directives:[wh,xb,wb,C.NgIf],styles:[""]}),e})(),qL=(()=>{class e{constructor(t,r,s,a){this.mediaSettings=t,this.handler=r,this.attributeSerializer=s,this.settings=[],this.ancestory=[],this.state={},this.stateChange=new o.EventEmitter,this.panelPageStateService=a.getEntityCollectionService("PanelPageState")}ngOnInit(){console.log("media ancestory is"),console.log(this.ancestory),console.log("my state is:"),console.log(this.state),this.mediaBaseUrl=this.mediaSettings.imageUrl,this.handler.toObject(this.settings).subscribe(t=>{this.mediaFile=t})}ngAfterViewInit(){this.image.nativeElement.onload=()=>{console.log("image loaded"),this.stateChange.emit({mediaLoading:"n"})}}ngOnChanges(){this.mediaBaseUrl=this.mediaSettings.imageUrl,this.handler.toObject(this.settings).subscribe(t=>{this.mediaFile=t})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(nh),o.\u0275\u0275directiveInject(fc),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(Yn))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-media-pane-renderer"]],viewQuery:function(t,r){if(1&t&&o.\u0275\u0275viewQuery(sL,7),2&t){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.image=s.first)}},inputs:{settings:"settings",ancestory:"ancestory",state:"state"},outputs:{stateChange:"stateChange"},features:[o.\u0275\u0275NgOnChangesFeature],decls:2,vars:2,consts:[[3,"src"],["img",""]],template:function(t,r){1&t&&o.\u0275\u0275element(0,"img",0,1),2&t&&o.\u0275\u0275propertyInterpolate2("src","",r.mediaBaseUrl,"/",r.mediaFile.path,"",o.\u0275\u0275sanitizeUrl)},styles:["img[_ngcontent-%COMP%]{max-width:100%}"]}),e})(),_f=(()=>{class e{constructor(t,r,s,a,l,u,p,h,S){this.siteName=t,this.snippetHandler=r,this.pageBuilderFacade=s,this.store=a,this.tokenizerService=l,this.panelHandler=u,this.urlGeneratorService=p,this.attributeSerializer=h,this.rulesResolver=S}handleFile(t){return(0,Be.of)([])}handlesType(t){return!1}implementsRendererOverride(){return!0}hasRendererOverride(t){return(0,Be.of)(!1)}isDynamic(t){return["snippet","pane"].indexOf(this.getRenderType(t))>-1}isData(t){return!1}fetchDynamicData(t,r){const s=new M.x;return this.toObject(t).pipe((0,tt.w)(a=>this.urlGeneratorService.getUrl(a.url,a.params,r).pipe((0,be.U)(l=>[a,l])))).subscribe(([a,l])=>{this.pageBuilderFacade.loadRestData(`${r.get("tag")}`,new ea({...a,url:l})),this.store.pipe((0,xt.Ys)(bh(`${r.get("tag")}`)),(0,U.h)(u=>void 0!==u)).subscribe(u=>{s.next(u),s.complete()})}),s}buildDynamicItems(t,r){const s=new M.x;return console.log("build dynamic items rest"),this.toObject(t).pipe((0,tt.w)(a=>this.urlGeneratorService.getUrl(a.url,a.params,r).pipe((0,be.U)(l=>[a,l])))).subscribe(([a,l])=>{console.log("Load in rest data"),this.pageBuilderFacade.loadRestData(`${r.get("tag")}`,new ea({...a,url:l})),this.store.pipe((0,xt.Ys)(bh(`${r.get("tag")}`)),(0,U.h)(u=>void 0!==u),(0,tt.w)(u=>this.getBindings(t,"pane").pipe((0,be.U)(p=>[u,p]))),(0,tt.w)(([u,p])=>Xn(()=>0!==u.results.length&&p.length>0,new v.y(h=>{(0,pn.D)(u.results.map(S=>(0,Ug.D)(p).pipe((0,be.U)(G=>r.get("panes").find(W=>W.name===G.id)),(0,tt.w)(G=>Xn(()=>G.rule&&null!==G.rule&&""!==G.rule.condition,this.rulesResolver.evaluate(G.rule,[...r.get("contexts"),...void 0!==G.contexts?G.contexts:[],new Ei({name:"_root",adaptor:"data",data:S})]).pipe((0,be.U)(W=>[G,W])),(0,Be.of)(!1).pipe((0,be.U)(W=>[G,W])))),(0,U.h)(([G,W])=>W),(0,be.U)(([G,W])=>G.name),(0,zr.d)(p[0].id),(0,an.q)(1)))).pipe((0,be.U)(S=>[u,S])).subscribe(S=>{h.next(S),h.complete()})}),new v.y(h=>{h.next([u]),h.complete()}))),(0,be.U)(([u,p])=>u.results.map("pane"===a.renderer.type?(h,S)=>{const G=r.get("panes").find(J=>J.name===p[S]),W=zn();return new dr({...G,rule:void 0,label:W,contexts:[...r.get("contexts"),new Ei({name:"_root",adaptor:"data",data:h})]})}:h=>new dr({contentPlugin:"snippet",name:zn(),label:void 0,contexts:[...r.get("contexts"),new Ei({name:"_root",adaptor:"data",data:h})],settings:this.snippetHandler.buildSettings({...a.renderer.data,content:a.renderer.data.content})}))),(0,be.U)(u=>new ra({stylePlugin:void 0,settings:[],panes:u,columnSetting:new Fn})),(0,be.U)(u=>this.panelHandler.buildSettings(new Cr({id:void 0,layoutType:"grid",displayType:"page",site:this.siteName,gridItems:[],layoutSetting:new Fn,rowSettings:[],panels:[u]})))).subscribe(u=>{s.next(u.find(p=>"panels"===p.name).attributes[0].attributes.find(p=>"panes"===p.name).attributes),s.complete()})}),s}buildSelectOptionItems(t,r){return this.toObject(t).pipe((0,tt.w)(s=>this.urlGeneratorService.getUrl(s.url,s.params,r).pipe((0,be.U)(a=>[s,a]))),(0,be.U)(([s,a])=>new ea({...s,url:a}))).subscribe(s=>{this.pageBuilderFacade.loadRestData(`${r.get("tag")}`,s)}),this.store.pipe((0,xt.Ys)(bh(`${r.get("tag")}`)),(0,U.h)(s=>void 0!==s),(0,be.U)(s=>[s,s.results.map(a=>this.tokenizerService.generateGenericTokens(a))]),(0,be.U)(([s,a])=>[s,a,new A0(JSON.parse(r.get("snippet").content))]),(0,be.U)(([s,a,l])=>a.map((u,p)=>new E0({dataItem:s.results[p],value:this.attributeSerializer.serialize("[.]"===l.value?s.results[p]:this.tokenizerService.replaceTokens(l.value,u),"value"),label:this.tokenizerService.replaceTokens(l.label,u)}))))}getBindings(t,r,s){return"context"===r?this.toObject(t).pipe((0,be.U)(a=>a.params.reduce((l,u)=>[...l,..."form"===u.mapping.type?[new Gt.ContentBinding({id:`form__${u.mapping.value.split(".",2)[0].trim()}`,type:"context"})]:[]],[]))):this.toObject(t).pipe((0,tt.w)(a=>Xn(()=>a.renderer.type===r,(0,Be.of)(a.renderer.bindings),(0,Be.of)([]))))}toObject(t){return(0,Be.of)(this.attributeSerializer.deserializeAsObject(t))}buildSettings(t){return this.attributeSerializer.serialize(t,"root").attributes}getRenderType(t){const r=[t.find(s=>"renderer"===s.name)].map(s=>s.attributes.find(a=>"type"===a.name));return r.length>0?r[0].value:void 0}stateDefinition(t){return(0,Be.of)({autocomplete:{input:""}})}editorOptions(t){return(0,Be.of)(new Gt.ContentPluginEditorOptions)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(on.SITE_NAME),o.\u0275\u0275inject(Vl),o.\u0275\u0275inject(bo),o.\u0275\u0275inject(xt.yh),o.\u0275\u0275inject(Gn),o.\u0275\u0275inject(Mi),o.\u0275\u0275inject(Wd),o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(zg))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),KL=(()=>{class e{constructor(t,r){this.fb=t,this.tokenizerService=r,this.panes=[],this.submitted=new o.EventEmitter,this.contexts=[],this.forms=[],this.snippetValidation=!0,this.restForm=this.fb.group({source:this.fb.control(""),renderer:this.fb.group({type:"snippet",query:this.fb.control(""),trackBy:this.fb.control(""),data:this.fb.control(""),bindings:this.fb.array([]),select:this.fb.group({value:this.fb.control(""),label:this.fb.control(""),id:this.fb.control(""),multiple:this.fb.control(""),limit:this.fb.control("")})})})}set rest(t){if(void 0!==t){this._rest=t;const r={value:"",label:"",id:"",multiple:"",limit:""};this.restForm.setValue({renderer:{trackBy:"",query:"",...t.renderer,data:t.renderer.data?{...t.renderer.data,jsScript:t.renderer.data.jsScript?t.renderer.data.jsScript:""}:{content:"",contentType:"",jsScript:""},select:["pane","snippet"].findIndex(s=>s===t.renderer.type)>-1?r:JSON.parse(t.renderer.data.content),bindings:[]},source:{url:"",params:[],method:"",body:""}}),"pane"===t.renderer.type&&(this.bindings.clear(),t.renderer.bindings.forEach(s=>{"pane"===s.type&&this.bindings.push(this.fb.group({id:this.fb.control(s.id,d.kI.required),type:this.fb.control(s.type,d.kI.required)}))})),"pane"===t.renderer.type?this.restForm.get("renderer").get("data").disable():this.restForm.get("renderer").get("data").enable(),setTimeout(()=>{this.restSource={url:t.url,params:t.params,method:t.method?t.method:"",body:t.body?{...t.body,jsScript:""}:""},this.sourceForm.refreshData$.next(void 0)})}}get rendererType(){return this.restForm.get("renderer").get("type")}get isSelectable(){return this.restForm.get("renderer").get("type").value&&"snippet"!==this.restForm.get("renderer").get("type").value&&"pane"!==this.restForm.get("renderer").get("type").value}get bindings(){return this.restForm.get("renderer").get("bindings")}get valid(){return this.restForm.valid}ngOnInit(){console.log(this.contexts),this.restForm.get("renderer").get("type").valueChanges.subscribe(t=>{"pane"===this.rendererType.value?this.restForm.get("renderer").get("data").disable():this.restForm.get("renderer").get("data").enable(),this.restForm.get("renderer").get("data").setValue({contentType:"",content:"",jsScript:""})}),this.restForm.get("renderer").get("select").valueChanges.subscribe(t=>{this.restForm.get("renderer").get("data").setValue({contentType:"application/json",content:JSON.stringify({value:t.value,label:t.label,id:t.id,multiple:t.multiple,limit:t.limit}),jsScript:""})})}ngAfterViewInit(){}onDataChange(t){this.tokens=this.tokenizerService.generateGenericTokens(t[0])}addPane(){this.bindings.push(this.fb.group({type:this.fb.control("pane",d.kI.required),id:this.fb.control("",d.kI.required)}))}submit(){const t=new ea({...this.restForm.value,url:this.restForm.value.source.url,params:this.restForm.value.source.params,method:this.restForm.value.source.method,body:this.restForm.value.source.body});this.submitted.emit(t)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Gn))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-rest-form"]],viewQuery:function(t,r){if(1&t&&o.\u0275\u0275viewQuery(hf,7),2&t){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.sourceForm=s.first)}},inputs:{panes:"panes",contexts:"contexts",rest:"rest"},outputs:{submitted:"submitted"},decls:34,vars:9,consts:[[1,"rest-form",3,"formGroup","ngSubmit"],["direction","vertical",1,"content-inner"],["as-split-area","","size","50"],["formControlName","source",3,"contexts","restSource","dataChange"],["size","50","formGroupName","renderer"],["matInput","","formControlName","query","placeholder","Query"],["matInput","","formControlName","trackBy","placeholder","Track By"],["required","","formControlName","type"],["label","Output"],["value","snippet"],["value","pane"],["label","Input"],["value","select"],["value","radiogroup"],["value","checkboxgroup"],["value","autocomplete"],["formControlName","data","splitDirection","horizontal","rows","10","cols","40",3,"hidden","rootForm","tokens"],["formArrayName","bindings",4,"ngIf"],["formGroupName","select",4,"ngIf"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"],["formArrayName","bindings"],["type","button",3,"click"],[4,"ngFor","ngForOf"],[3,"formGroupName"],["required","","formControlName","id"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["formGroupName","select"],["matInput","","formControlName","id","placeholder","Id"],["matInput","","formControlName","value","placeholder","Value"],["matInput","","formControlName","label","placeholder","Label"],["formControlName","multiple"],["matInput","","formControlName","limit","placeholder","Limit"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return r.submit()}),o.\u0275\u0275elementStart(1,"mat-dialog-content"),o.\u0275\u0275elementStart(2,"as-split",1),o.\u0275\u0275elementStart(3,"div",2),o.\u0275\u0275elementStart(4,"classifieds-ui-rest-source-form",3),o.\u0275\u0275listener("dataChange",function(a){return r.onDataChange(a)}),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"as-split-area",4),o.\u0275\u0275elementStart(6,"mat-form-field"),o.\u0275\u0275element(7,"input",5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(8,"mat-form-field"),o.\u0275\u0275element(9,"input",6),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(10,"mat-form-field"),o.\u0275\u0275elementStart(11,"mat-label"),o.\u0275\u0275text(12,"Type"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(13,"mat-select",7),o.\u0275\u0275elementStart(14,"mat-optgroup",8),o.\u0275\u0275elementStart(15,"mat-option",9),o.\u0275\u0275text(16,"Snippet"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(17,"mat-option",10),o.\u0275\u0275text(18,"Pane"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(19,"mat-optgroup",11),o.\u0275\u0275elementStart(20,"mat-option",12),o.\u0275\u0275text(21,"Select"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(22,"mat-option",13),o.\u0275\u0275text(23,"Radio Group"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(24,"mat-option",14),o.\u0275\u0275text(25,"Checkbox Group"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(26,"mat-option",15),o.\u0275\u0275text(27,"Autocomplete"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(28,"classifieds-ui-snippet-form",16),o.\u0275\u0275template(29,uL,5,1,"div",17),o.\u0275\u0275template(30,cL,12,0,"div",18),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(31,"mat-dialog-actions"),o.\u0275\u0275elementStart(32,"button",19),o.\u0275\u0275text(33,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.restForm),o.\u0275\u0275advance(4),o.\u0275\u0275property("contexts",r.contexts)("restSource",r.restSource),o.\u0275\u0275advance(24),o.\u0275\u0275property("hidden","snippet"!=r.rendererType.value)("rootForm",!1)("tokens",r.tokens),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf","pane"==r.rendererType.value),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.isSelectable),o.\u0275\u0275advance(2),o.\u0275\u0275property("disabled",!r.valid))},directives:[Ud,hf,Yt.KE,oi.gD,cr.Nv,cr.ey,dh,Hd.oG,Dr.lW,d._Y,d.JL,d.sg,Dt.xY,Gd,d.JJ,d.u,d.x0,sr.Nt,d.Fj,Yt.hX,d.Q7,C.NgIf,d.CE,C.NgForOf,Dt.H8,Dt.ZT],styles:[".rest-form[_ngcontent-%COMP%]     .content-inner{height:auto}"]}),e})(),XL=(()=>{class e{constructor(t,r,s,a){this.data=t,this.dialogRef=r,this.fb=s,this.handler=a,this.panes=[],this.contexts=[],this.contexts=this.data.contexts}ngOnInit(){this.panes=this.data.panelFormGroup.get("panes").controls.reduce((t,r)=>r.get("name").value?[...t,r.get("name").value]:[...t],[]),void 0!==this.data.pane&&this.handler.toObject(this.data.pane.settings).subscribe(t=>{this.rest=t})}submitted(t){const r=this.data.panelFormGroup.get("panes");if(void 0===this.data.paneIndex)r.push(this.fb.group({contentPlugin:"rest",name:new d.NI(""),label:new d.NI(""),rule:new d.NI(""),settings:this.fb.array(this.handler.buildSettings(t).map(s=>this.convertToGroup(s)))})),this.data.contentAdded.next([this.data.panelIndex,r.length-1]);else{const s=r.at(this.data.paneIndex);s.get("settings").clear(),this.handler.buildSettings(t).forEach(a=>{s.get("settings").push(this.convertToGroup(a))})}this.dialogRef.close()}convertToGroup(t){const r=this.fb.group({name:new d.NI(t.name,d.kI.required),type:new d.NI(t.type,d.kI.required),displayName:new d.NI(t.displayName,d.kI.required),value:new d.NI(t.value,d.kI.required),computedValue:new d.NI(t.value,d.kI.required),attributes:new d.Oe([])});return t.attributes&&t.attributes.length>0&&t.attributes.forEach(s=>{r.get("attributes").push(this.convertToGroup(s))}),r}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(_f))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-rest-editor"]],decls:1,vars:3,consts:[[3,"panes","rest","contexts","submitted"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"classifieds-ui-rest-form",0),o.\u0275\u0275listener("submitted",function(a){return r.submitted(a)}),o.\u0275\u0275elementEnd()),2&t&&o.\u0275\u0275property("panes",r.panes)("rest",r.rest)("contexts",r.contexts)},directives:[KL],styles:[""]}),e})(),WL=(()=>{class e{constructor(t,r,s){this.fb=t,this.attributeSerializer=r,this.tokenizerService=s,this.searchChange=new o.EventEmitter,this.selectionForm=this.fb.group({attributes:this.fb.array([])}),this.onTouched=()=>{},this.displayAuto=a=>s.replaceTokens(this.selectMapping.label,this.tokenizerService.generateGenericTokens(a.dataItem))}set values(t){this.options=t,this.buildOptions()}get attributesArray(){return this.selectionForm.get("attributes")}ngOnInit(){this.attributesArray.push(this.fb.group({name:new d.NI("value",d.kI.required),type:new d.NI(Ct.AttributeTypes.Array,d.kI.required),displayName:new d.NI("Value",d.kI.required),value:new d.NI(""),attributes:["checkboxgroup"].findIndex(t=>t===this.renderType)>-1?this.fb.array([]):new d.NI("")})),"autocomplete"===this.renderType&&(this.attributesArray.at(0).addControl("_proxy",this.fb.control("")),this.attributesArray.at(0).get("_proxy").valueChanges.pipe((0,kl.x)(),(0,qn.b)(500)).subscribe(t=>{this.searchChange.emit(t)}))}onOptionSelected(t){this.attributesArray.at(0).get("attributes").setValue(t.option.value.value),this.attributesArray.at(0).get("attributes").updateValueAndValidity()}writeValue(t){t&&this.attributesArray.setValue(t,{emitEvent:!1})}registerOnChange(t){this.attributesArray.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.attributesArray.disable():this.attributesArray.enable()}validate(t){return this.selectionForm.valid?null:{invalidForm:{valid:!1,message:"selection is invalid"}}}buildOptions(){if("checkboxgroup"===this.renderType&&void 0!==this.options){const t=this.attributesArray.controls[0].get("attributes");t.clear(),this.options.forEach(r=>{const s=this.attributeSerializer.convertToGroup(r.value);s.addControl("_store",new d.NI(!1)),t.push(s)})}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(Gn))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-selection"]],inputs:{name:"name",label:"label",values:"values",renderType:"renderType",selectMapping:"selectMapping"},outputs:{searchChange:"searchChange"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>e),multi:!0}])],decls:9,vars:6,consts:[[3,"formGroup"],["formArrayName","attributes"],["formGroupName","0"],[3,"ngSwitch"],[4,"ngSwitchCase"],["formControlName","attributes"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[4,"ngFor","ngForOf"],[3,"formGroupName"],["formControlName","_store"],["matInput","","formControlName","_proxy",3,"placeholder","matAutocomplete"],[3,"displayWith","optionSelected"],["autocomplete","matAutocomplete"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div",1),o.\u0275\u0275elementStart(2,"div",2),o.\u0275\u0275elementStart(3,"div"),o.\u0275\u0275elementContainerStart(4,3),o.\u0275\u0275template(5,fL,6,2,"ng-container",4),o.\u0275\u0275template(6,hL,6,2,"ng-container",4),o.\u0275\u0275template(7,gL,4,1,"ng-container",4),o.\u0275\u0275template(8,yL,6,4,"ng-container",4),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.selectionForm),o.\u0275\u0275advance(4),o.\u0275\u0275property("ngSwitch",r.renderType),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase","select"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase","radiogroup"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase","checkboxgroup"),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngSwitchCase","autocomplete"))},directives:[Yt.KE,oi.gD,cr.ey,jh.U0,Hd.oG,Bh.XC,d.JL,d.sg,d.CE,d.x0,C.NgSwitch,C.NgSwitchCase,Yt.hX,d.JJ,d.u,C.NgForOf,jh.VQ,sr.Nt,d.Fj,Bh.ZL],styles:[""]}),e})(),JL=(()=>{class e{constructor(t,r){this.restHandler=t,this.controlContainer=r,this.settings=[],this.contexts=[],this.state={},this.stateChange=new o.EventEmitter,this.tag=zn(),this.searchChange$=new M.x}get renderType(){return this.restHandler.getRenderType(this.settings)}ngOnInit(){this.restHandler.toObject(this.settings).pipe((0,ee.b)(t=>{this.snippet=t.renderer.data,this.selectMapping=new A0(JSON.parse(this.snippet.content))}),(0,U.h)(()=>"autocomplete"!==this.renderType),(0,tt.w)(t=>this.restHandler.buildSelectOptionItems(this.settings,new Map([["tag",this.tag],["snippet",t.renderer.data],["contexts",this.contexts]])))).subscribe(t=>{this.options=t}),this.searchChange$.pipe((0,ee.b)(t=>{this.stateChange.emit({autocomplete:{input:t}})}),(0,tt.w)(t=>this.restHandler.buildSelectOptionItems(this.settings,new Map([["tag",zn()],["snippet",this.snippet],["contexts",this.contexts]])))).subscribe(t=>{this.options=t})}onSearchChange(t){this.searchChange$.next(t)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(_f),o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-rest-pane-renderer"]],inputs:{settings:"settings",name:"name",label:"label",displayType:"displayType",contexts:"contexts",state:"state"},outputs:{stateChange:"stateChange"},decls:2,vars:6,consts:[[3,"formGroup"],["formControlName","settings",3,"name","label","renderType","values","selectMapping","searchChange"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"classifieds-ui-selection",1),o.\u0275\u0275listener("searchChange",function(a){return r.onSearchChange(a)}),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("name",r.name)("label",r.label)("renderType",r.renderType)("values",r.options)("selectMapping",r.selectMapping))},directives:[WL,d.JL,d.sg,d.JJ,d.u],styles:[""]}),e})(),Vh=(()=>{class e{constructor(t,r,s,a,l,u){this.siteName=t,this.tokenizerService=r,this.panelHandler=s,this.mediaHandler=a,this.attributeSerializer=l,this.inlineContextResolver=u}handleFile(t){return(0,Be.of)()}handlesType(t){return!1}implementsRendererOverride(){return!1}hasRendererOverride(t){return(0,Be.of)(!1)}isDynamic(t){return!0}isData(t){return!1}fetchDynamicData(t,r){return(0,Be.of)(new Rn)}buildDynamicItems(t,r){return this.toObject(t).pipe((0,be.U)(s=>[s,r.get("contexts").find(a=>a.name===s.context)]),(0,tt.w)(([s,a])=>this.extractDataArray(a,s.query).pipe((0,be.U)(l=>[s,a,l]))),(0,tt.w)(([s,a,l])=>this.transformDataArray(l,s.plugin)),(0,be.U)(s=>new ra({stylePlugin:void 0,settings:[],panes:s,columnSetting:new Fn})),(0,be.U)(s=>this.panelHandler.buildSettings(new Cr({id:void 0,layoutType:"grid",displayType:"page",site:this.siteName,gridItems:[],layoutSetting:new Fn,rowSettings:[],panels:[s]}))),(0,be.U)(s=>s.find(a=>"panels"===a.name).attributes[0].attributes.find(a=>"panes"===a.name).attributes))}getBindings(t,r,s){return"context"===r?this.toObject(t).pipe((0,be.U)(a=>[new Gt.ContentBinding({id:a.context,type:"context"})])):(0,Be.of)([])}toObject(t){return(0,Be.of)(this.attributeSerializer.deserializeAsObject(t))}buildSettings(t){return this.attributeSerializer.serialize(t,"root").attributes}extractDataArray(t,r){return this.inlineContextResolver.resolve(t).pipe((0,be.U)(s=>{const a=r.split("."),l=a.length;if(void 0===t)return(0,Be.of)([]);let u=Array.isArray(s)?s[0]:s;for(let p=0;p<l;p++)""!==a[p]&&(u=u[a[p]]);return u}))}transformDataArray(t,r){return"media"===r?(0,Be.of)(t.map(s=>new bg(s)).map(s=>new dr({contentPlugin:"media",name:void 0,label:void 0,settings:this.mediaHandler.buildSettings(s)}))):(0,Be.of)()}stateDefinition(t){return(0,Be.of)({})}editorOptions(t){return(0,Be.of)(new Gt.ContentPluginEditorOptions)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(on.SITE_NAME),o.\u0275\u0275inject(Gn),o.\u0275\u0275inject(Mi),o.\u0275\u0275inject(fc),o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(Yu))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();class QL{constructor(n){n&&(this.context=n.context,this.query=n.query,this.plugin=n.plugin)}}let YL=(()=>{class e{constructor(t){this.fb=t,this.contexts=[],this.submitted=new o.EventEmitter,this.sliceForm=this.fb.group({context:this.fb.control("",d.kI.required),query:this.fb.control("",d.kI.required),plugin:this.fb.control("",d.kI.required)})}ngOnInit(){}submit(){const t=new QL(this.sliceForm.value);this.submitted.emit(t)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-slice-form"]],inputs:{contexts:"contexts"},outputs:{submitted:"submitted"},decls:20,vars:3,consts:[[1,"slice-form",3,"formGroup","ngSubmit"],["required","","formControlName","context"],["value","_root"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Query","formControlName","query","required",""],["required","","formControlName","plugin"],["value","media"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"],[3,"value"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return r.submit()}),o.\u0275\u0275elementStart(1,"mat-dialog-content"),o.\u0275\u0275elementStart(2,"mat-form-field"),o.\u0275\u0275elementStart(3,"mat-label"),o.\u0275\u0275text(4,"Type"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"mat-select",1),o.\u0275\u0275elementStart(6,"mat-option",2),o.\u0275\u0275text(7,"_root"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(8,_L,2,2,"mat-option",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"mat-form-field"),o.\u0275\u0275element(10,"input",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(11,"mat-form-field"),o.\u0275\u0275elementStart(12,"mat-label"),o.\u0275\u0275text(13,"Plugin"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(14,"mat-select",5),o.\u0275\u0275elementStart(15,"mat-option",6),o.\u0275\u0275text(16,"Media"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(17,"mat-dialog-actions"),o.\u0275\u0275elementStart(18,"button",7),o.\u0275\u0275text(19,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.sliceForm),o.\u0275\u0275advance(8),o.\u0275\u0275property("ngForOf",r.contexts),o.\u0275\u0275advance(10),o.\u0275\u0275property("disabled",!r.sliceForm.valid))},directives:[Yt.KE,oi.gD,cr.ey,Dr.lW,d._Y,d.JL,d.sg,Dt.xY,Yt.hX,d.Q7,d.JJ,d.u,C.NgForOf,sr.Nt,d.Fj,Dt.H8,Dt.ZT],styles:[""]}),e})(),ZL=(()=>{class e{constructor(t,r,s,a){this.data=t,this.dialogRef=r,this.fb=s,this.handler=a,this.contexts=[],this.contexts=this.data.contexts}ngOnInit(){}submitted(t){this.data.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:"slice",name:new d.NI(""),label:new d.NI(""),rule:new d.NI(""),settings:this.fb.array(this.handler.buildSettings(t).map(r=>this.convertToGroup(r)))})),this.dialogRef.close()}convertToGroup(t){const r=this.fb.group({name:new d.NI(t.name,d.kI.required),type:new d.NI(t.type,d.kI.required),displayName:new d.NI(t.displayName,d.kI.required),value:new d.NI(t.value,d.kI.required),computedValue:new d.NI(t.value,d.kI.required),attributes:new d.Oe([])});return t.attributes&&t.attributes.length>0&&t.attributes.forEach(s=>{r.get("attributes").push(this.convertToGroup(s))}),r}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Vh))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-slice-editor"]],decls:1,vars:1,consts:[[3,"contexts","submitted"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"classifieds-ui-slice-form",0),o.\u0275\u0275listener("submitted",function(a){return r.submitted(a)}),o.\u0275\u0275elementEnd()),2&t&&o.\u0275\u0275property("contexts",r.contexts)},directives:[YL],styles:[""]}),e})(),e4=(()=>{class e{constructor(t,r){this.fb=t,this.controlContainer=r}ngOnInit(){this.controlContainer.control.addControl("adaptor",this.fb.control("rest",d.kI.required)),this.controlContainer.control.addControl("rest",this.fb.control(""))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-context-editor"]],viewQuery:function(t,r){if(1&t&&o.\u0275\u0275viewQuery(hf,7),2&t){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.restSourceFormComp=s.first)}},decls:2,vars:1,consts:[[3,"formGroup"],["formControlName","rest"]],template:function(t,r){1&t&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"classifieds-ui-rest-source-form",1),o.\u0275\u0275elementContainerEnd()),2&t&&o.\u0275\u0275property("formGroup",r.controlContainer.control)},directives:[hf,d.JL,d.sg,d.JJ,d.u],styles:[""]}),e})(),t4=(()=>{class e{constructor(t,r,s,a){this.data=t,this.dialogRef=r,this.fb=s,this.attributeSerializer=a,this.contexts=[],this.panes=[],this.formGroup=this.fb.group({labels:this.fb.array([this.buildLabelGroup()])}),this.contexts=this.data.contexts}get labels(){return this.formGroup.get("labels")}ngOnInit(){this.panes=new ra(this.data.panelFormGroup.value).panes}submit(){this.data.panelFormGroup.get("settings").clear(),this.attributeSerializer.serialize(this.formGroup.value,"root").attributes.forEach(t=>{console.log("label mappings"),console.log(this.attributeSerializer.convertToGroup(t)),this.data.panelFormGroup.get("settings").push(this.attributeSerializer.convertToGroup(t))})}onRemoveMapping(t){this.labels.removeAt(t)}onAddMapping(){this.labels.push(this.buildLabelGroup())}buildLabelGroup(){return this.fb.group({mapping:this.fb.control("")})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-tabs-panel-editor"]],decls:7,vars:3,consts:[[3,"formGroup","ngSubmit"],["formArrayName","labels"],[3,"formGroupName",4,"ngFor","ngForOf"],["type","button","mat-raised-button","","color","primary",3,"click"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"],[3,"formGroupName"],["formControlName","mapping",3,"panes"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return r.submit()}),o.\u0275\u0275elementStart(1,"div",1),o.\u0275\u0275template(2,bL,4,2,"div",2),o.\u0275\u0275elementStart(3,"button",3),o.\u0275\u0275listener("click",function(){return r.onAddMapping()}),o.\u0275\u0275text(4,"Add"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"button",4),o.\u0275\u0275text(6,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.formGroup),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",r.labels.controls),o.\u0275\u0275advance(3),o.\u0275\u0275property("disabled",!r.formGroup.valid))},directives:[OD,Dr.lW,d._Y,d.JL,d.sg,d.CE,C.NgForOf,d.x0,d.JJ,d.u,Dt.ZT],encapsulation:2}),e})(),n4=(()=>{class e{constructor(t){this.attributeSerializer=t,this.settings=[],this.panes=[],this.originMappings=[],this.labelMappingsEnabled=!1}ngOnInit(){console.log("tabs panels contexts"),console.log(this.panes);const t=this.attributeSerializer.deserialize(new Ct.AttributeValue({name:"",displayName:"",computedValue:"",type:Ct.AttributeTypes.Complex,value:"",intValue:0,attributes:this.settings}));this.labelMappingsEnabled=!!(t&&void 0!==t.labels&&Array.isArray(t.labels)&&t.labels.length>0)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-tabs-panel-renderer"]],inputs:{settings:"settings",panes:"panes",originPanes:"originPanes",originMappings:"originMappings"},decls:2,vars:2,consts:[["mat-align-tabs","start",4,"ngIf"],["mat-align-tabs","start"],[4,"for"],["mat-tab-label",""],[3,"pluginName","settings","contexts"],["label","The Label",4,"ngFor","ngForOf"],["label","The Label"]],template:function(t,r){1&t&&(o.\u0275\u0275template(0,xL,2,1,"mat-tab-group",0),o.\u0275\u0275template(1,EL,2,1,"mat-tab-group",0)),2&t&&(o.\u0275\u0275property("ngIf",r.labelMappingsEnabled),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!r.labelMappingsEnabled))},directives:[Ss.SP,Ss.uX,vf,C.NgIf,on.ForDirective,Ss.uD,C.NgForOf],styles:[""]}),e})(),cw=(()=>{class e{constructor(t,r){this.fb=t,this.controlContainer=r,this.panelPages=[],this.panelPage$=new m.X(new Cr),this.context$=new m.X(void 0),this.formGroup=this.fb.group({state:this.fb.control("",[d.kI.required])}),this.stateCtrl=this.fb.control(""),this.stateCtrlSub=this.stateCtrl.valueChanges.pipe((0,qn.b)(250),(0,kl.x)(),(0,U.h)(s=>{try{return JSON.parse(s),!0}catch{return!1}}),(0,be.U)(s=>JSON.parse(s))).subscribe(s=>{console.log("write state"),console.log(s),this.formGroup.get("state").setValue(s)}),this.onTouched=()=>{}}set panelPage(t){this.panelPage$.next(t)}set context(t){this.context$.next(t)}ngOnInit(){this.panelPage$.subscribe(t=>{this.panelPages=[t]}),this.context$.subscribe(t=>{this.stateCtrl.setValue(t?JSON.stringify(t.data.state):"")})}writeValue(t){t&&this.formGroup.setValue(t,{emitEvent:!1})}registerOnChange(t){this.formGroup.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.formGroup.disable():this.formGroup.enable()}validate(t){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"source is invalid"}}}flattenSelector(t){const r=[];return null!=t.panel&&r.push(t.panel),null!=t.pane&&r.push(t.pane),null!=t.nested&&"object"==typeof t.nested&&this.flattenSelector(t.nested).forEach(s=>r.push(s)),r}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-page-state-form"]],inputs:{panelPage:"panelPage",context:"context"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>e),multi:!0}])],decls:3,vars:2,consts:[[3,"formGroup"],["cols","40","rows","20","required","",3,"formControl"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275text(1," <"),o.\u0275\u0275element(2,"textarea",1),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.formGroup),o.\u0275\u0275advance(2),o.\u0275\u0275property("formControl",r.stateCtrl))},directives:[d.JL,d.sg,d.Fj,d.Q7,d.JJ,d.oH],styles:[""]}),e})(),r4=(()=>{class e{constructor(t,r,s){this.fb=t,this.pageBuilderFacade=r,this.controlContainer=s}ngOnInit(){this.controlContainer.control.addControl("adaptor",this.fb.control("data",d.kI.required)),this.controlContainer.control.addControl("data",this.fb.control("")),this.pageBuilderFacade.getPage$.pipe((0,an.q)(1)).subscribe(t=>{this.panelPage=t})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(bo),o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-page-state-editor"]],viewQuery:function(t,r){if(1&t&&o.\u0275\u0275viewQuery(cw,7),2&t){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.restSourceFormComp=s.first)}},inputs:{context:"context"},decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","data",3,"panelPage","context"]],template:function(t,r){1&t&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"classifieds-ui-page-state-form",1),o.\u0275\u0275elementContainerEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("panelPage",r.panelPage)("context",r.context))},directives:[cw,d.JL,d.sg,d.JJ,d.u],styles:[""]}),e})(),o4=(()=>{class e{constructor(t,r){this.fb=t,this.attributeSerializer=r,this.settings$=new m.X(void 0),this.formGroup=this.fb.group({name:this.fb.control("",[d.kI.required]),field:this.fb.control("",[d.kI.required])}),this.settingsSub=this.settings$.pipe((0,be.U)(s=>s?new Jg(this.attributeSerializer.deserializeAsObject(s)):void 0)).subscribe(s=>{s?(this.formGroup.get("name").setValue(s.name),this.formGroup.get("field").setValue(s.field)):(this.formGroup.get("name").setValue(""),this.formGroup.get("field").setValue(""))}),this.onTouched=()=>{}}set settings(t){this.settings$.next(t)}ngOnInit(){}writeValue(t){t&&this.formGroup.setValue(t,{emitEvent:!1})}registerOnChange(t){this.formGroup.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.formGroup.disable():this.formGroup.enable()}validate(t){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-form-datasource-form"]],inputs:{settings:"settings"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>e),multi:!0}])],decls:11,vars:1,consts:[[3,"formGroup"],["matInput","","formControlName","name","required",""],["matInput","","formControlName","field","required",""]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div"),o.\u0275\u0275elementStart(2,"mat-form-field"),o.\u0275\u0275elementStart(3,"mat-label"),o.\u0275\u0275text(4,"Name"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(5,"input",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"div"),o.\u0275\u0275elementStart(7,"mat-form-field"),o.\u0275\u0275elementStart(8,"mat-label"),o.\u0275\u0275text(9,"Field"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(10,"input",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&o.\u0275\u0275property("formGroup",r.formGroup)},directives:[Yt.KE,d.JL,d.sg,Yt.hX,sr.Nt,d.Fj,d.JJ,d.u,d.Q7],styles:[""]}),e})(),s4=(()=>{class e{constructor(t){this.controlContainer=t,this.settings=[]}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-form-datasource"]],inputs:{settings:"settings"},decls:2,vars:2,consts:[[3,"formGroup"],["formControlName","settings",3,"settings"]],template:function(t,r){1&t&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"classifieds-ui-form-datasource-form",1),o.\u0275\u0275elementContainerEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("settings",r.settings))},directives:[o4,d.JL,d.sg,d.JJ,d.u],encapsulation:2}),e})();const a4=e=>new Gt.ContentPlugin({id:"snippet",title:"Snippet",selectionComponent:void 0,editorComponent:zL,renderComponent:ow,handler:e}),l4=e=>new Gt.ContentPlugin({id:"attribute",title:"Attribute",selectionComponent:GL,editorComponent:VL,renderComponent:$L,handler:e}),u4=e=>new Gt.ContentPlugin({id:"media",title:"Media",selectionComponent:void 0,editorComponent:HL,renderComponent:qL,handler:e}),c4=e=>new Gt.ContentPlugin({id:"rest",title:"REST",selectionComponent:void 0,editorComponent:XL,renderComponent:JL,handler:e}),d4=e=>new Gt.ContentPlugin({id:"slice",title:"Slice",selectionComponent:void 0,editorComponent:ZL,renderComponent:void 0,handler:e}),f4=e=>new ta({id:"page",name:"page",title:"Page",global:!0,group:"pages",baseObject:{path:""},resolver:e}),p4=e=>{const n={dataset:new Rn};return new ta({id:"rest",name:"rest",title:"Rest",baseObject:n,resolver:e,editorComponent:e4})},h4=e=>{const n={dataset:new Rn};return new ta({id:"form",name:"form",title:"Form",baseObject:n,resolver:e})},m4=e=>{const n=new _o({state:new Ct.AttributeValue});return new ta({id:"panestate",name:"panestate",title:"Pane State",internal:!0,baseObject:n,resolver:e})},g4=e=>{const n=new _o({state:new Ct.AttributeValue});return new ta({id:"pagestate",name:"pagestate",title:"Page State",internal:!0,baseObject:n,resolver:e,editorComponent:r4})},v4=e=>new yh({id:"tabs",name:"tabs",title:"Tabs",handler:e,editorComponent:t4,renderComponent:n4}),hv=e=>n=>{if(0===("/"+n.map(t=>t.path).join("/")).indexOf(e.path)){const t=e.path.substr(1).split("/").length;return{consumed:n,posParams:n.reduce((r,s,a)=>0===a?{...r,panelPageId:new Pn.UrlSegment(e.id,{})}:a>t-1?{...r,["arg"+(a-t)]:new Pn.UrlSegment(s.path,{})}:{...r},{})}}return null},mv=e=>n=>0===("/"+n.map(t=>t.path).join("/")).indexOf(e.path)&&n.map(t=>t.path).join("/").indexOf("/manage")>-1?(e.path.substr(1).split("/"),{consumed:n,posParams:n.reduce((r,s,a)=>0===a?{...r,panelPageId:new Pn.UrlSegment(e.id,{})}:{...r},{})}):null;let x4=(()=>{class e{constructor(t,r,s,a){this.tokenizerService=t,this.panelResolverService=r,this.styleResolverService=s,this.paneDatasource=a,this.settings=[],this.panes=[],this.originMappings=[],this.resolvedContext={}}ngOnInit(){this.paneDatasource.pageChange$.pipe((0,gf.T)(1),(0,tt.w)(t=>this.panelResolverService.resolvePanes({panes:this.originPanes.map(r=>new dr({...r,metadata:new Map([...r.metadata?r.metadata:[],["page",t],["limit",this.paneDatasource.pageSize]])})),contexts:this.contexts,resolvedContext:this.resolvedContext})),(0,tt.w)(({resolvedPanes:t,originMappings:r})=>this.styleResolverService.alterResolvedPanes({panel:this.panel,resolvedPanes:t,originMappings:r}))).subscribe(({resolvedPanes:t,originMappings:r})=>{this.originMappings=r,this.paneDatasource.panes=t}),this.paneDatasource.panes=this.panes,this.trackByTpl="[._root.id]"}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Gn),o.\u0275\u0275directiveInject(Wg),o.\u0275\u0275directiveInject(gb),o.\u0275\u0275directiveInject(_h))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-virtual-list-panel-renderer"]],inputs:{settings:"settings",panes:"panes",originPanes:"originPanes",originMappings:"originMappings",contexts:"contexts",resolvedContext:"resolvedContext",panel:"panel"},features:[o.\u0275\u0275ProvidersFeature([_h])],decls:2,vars:2,consts:[[1,"panes-viewport",3,"itemSize"],["class","pane-item",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"pane-item"],[3,"pluginName","settings","contexts","resolvedContext"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"cdk-virtual-scroll-viewport",0),o.\u0275\u0275template(1,AL,2,4,"div",1),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("itemSize",75),o.\u0275\u0275advance(1),o.\u0275\u0275property("cdkVirtualForOf",r.paneDatasource))},directives:[uc.N7,vf,uc.xd,uc.x0],styles:["[_nghost-%COMP%]{position:relative}.panes-viewport[_ngcontent-%COMP%]{height:100%;width:100%}"]}),e})(),S4=(()=>{class e{constructor(t){this.router=t}ngOnInit(){}onClick(){this.router.navigateByUrl(this.href)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Pn.Router))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-page-router-link"]],inputs:{href:"href",text:"text"},decls:2,vars:1,consts:[[3,"click"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"a",0),o.\u0275\u0275listener("click",function(){return r.onClick()}),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(r.text))},styles:["[_nghost-%COMP%]:hover{cursor:pointer}"]}),e})();const dw=new o.InjectionToken("PagesSettings");class E4{constructor(n){this.disableRouting=!1,n&&(this.disableRouting=n.disableRouting)}}let A4=(()=>{class e{constructor(t,r,s,a){this.siteName=t,this.pagesSettings=r,this.router=s,this.routesLoaded=!1,this.panelPageListItemsService=a.getEntityCollectionService("PanelPageListItem")}canActivate(t,r){return new Promise(this.pagesSettings.disableRouting?s=>s(!0):s=>{let a=r.url;-1!==a.indexOf("?")&&(a=r.url.substr(0,a.indexOf("?")));const l="path="+a.substr(1).split("/").reduce((u,p,h)=>[...u,0===h?`/${p}`:`${u[h-1]}/${p}`],[]).map(u=>this.encodePathComponent(u)).join("&path=")+`&site=${encodeURIComponent(`{"term":{"site.keyword":{"value":"${this.siteName}"}}}`)}`;setTimeout(()=>{}),(0,pn.D)([Xn(()=>!this.routesLoaded,this.panelPageListItemsService.getWithQuery(`site=${encodeURIComponent(`{"term":{"site.keyword":{"value":"${this.siteName}"}}}`)}&path={"wildcard":{"path.keyword":{"value":"*"}}}`).pipe((0,ee.b)(()=>console.log("loaded page list items")),(0,be.U)(u=>u.filter(p=>void 0!==p.path&&""!==p.path)),(0,be.U)(u=>u.map(p=>new Cr(p)).sort((p,h)=>p.path.split("/").length===h.path.split("/").length?p.path.split("/")[p.path.split("/").length-1]>h.path.split("/")[h.path.split("/").length-1]?-1:1:p.path.split("/").length>h.path.split("/").length?-1:1)),(0,ee.b)(u=>u.sort((p,h)=>p.path.length>h.path.length?1:-1)),(0,ee.b)(u=>{const p=this.router.config;u.forEach(h=>{p.unshift({matcher:mv(h),component:Gh}),p.unshift({matcher:hv(h),component:Uh,data:{panelPageListItem:h}}),console.log(`panels matcher: ${h.path}`)}),this.routesLoaded=!0}),(0,be.U)(()=>[])),(0,Be.of)([])),this.panelPageListItemsService.getWithQuery(l).pipe((0,kr.K)(u=>(0,Be.of)([])),(0,ee.b)(()=>console.log("loaded specific matched")),(0,be.U)(u=>u.reduce((p,h)=>void 0===p||p.path.split("/").length<h.path.split("/").length?h:p,void 0)),(0,be.U)(u=>{const p=r.url.substr(1).split("/").slice(u.path.split("/").length-1).join("/");return[u,p]}))]).pipe((0,be.U)(([u,[p,h]])=>[p,h])).subscribe(([u,p])=>{const h=`${u.path}${""===p?"":`/${p}`}?${Zi.stringify(t.queryParams)}`,S=this.router.parseUrl(h);console.log(`panels garud navigate: ${u.path}${""===p?"":`/${p}`}?${Zi.stringify(t.queryParams)}`),s(S)})})}encodePathComponent(t){return`{"term":{"path.keyword":{"value":"${t}"}}}`}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(on.SITE_NAME),o.\u0275\u0275inject(dw),o.\u0275\u0275inject(Pn.Router),o.\u0275\u0275inject(Yn))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),fw=(()=>{class e{constructor(t){this.pageBuilderFacade=t}resolve(t,r){return this.pageBuilderFacade.getPageInfo$}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(bo))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),pw=(()=>{class e{constructor(t,r,s,a){this.pageBuilderFacade=t,this.store=r,this.urlGeneratorService=s,this.routerStore=a}resolve(t,r){const s=new ea(r);return(s.params&&Array.isArray(s.params)&&s.params.length>0?this.changePipeline(s.params):(0,Be.of)([])).pipe((0,tt.w)(()=>s.params&&Array.isArray(s.params)&&s.params.length>0?this.rebuildParams(s.params):(0,Be.of)([])),(0,be.U)(a=>[a,new Map([["tag",zn()]])]),(0,tt.w)(([a,l])=>this.urlGeneratorService.getUrl(s.url,a,l).pipe((0,be.U)(u=>[u,l]))),(0,tt.w)(([a,l])=>(this.pageBuilderFacade.loadRestData(`${l.get("tag")}`,new ea({...s,url:a})),this.store.pipe((0,xt.Ys)(bh(`${l.get("tag")}`)),(0,U.h)(u=>void 0!==u),(0,be.U)(u=>u.results),(0,an.q)(1)))))}changePipeline(t){const r=t.reduce((s,a)=>{switch(a.mapping.type){case"route":return[...s,this.routeArgChange(a.mapping.value)];case"querystring":return[...s,this.queryStringChange(a.mapping.value)];case"form":return[...s,this.formChange(a.mapping.value)];default:return[...s]}},[]);return(0,N.T)(...r)}routeArgChange(t){return this.pageBuilderFacade.getPageInfo$.pipe((0,be.U)(()=>{}))}queryStringChange(t){return new M.x}formChange(t){const[r,s]=t.split(".",2);return this.pageBuilderFacade.getForm$(r).pipe((0,ee.b)(()=>console.log("form change")),(0,be.U)(()=>{}))}rebuildParams(t){return this.pageBuilderFacade.getPageInfo$.pipe((0,be.U)(r=>r?t:this.testParams(t)))}testParams(t){const r=[],s=t.length;for(let a=0;a<s;a++)r.push(new si("route"===t[a].mapping.type?{...t[a],mapping:{type:"static",value:t[a].mapping.testValue,context:void 0,testValue:void 0}}:t[a]));return r}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(bo),o.\u0275\u0275inject(xt.yh),o.\u0275\u0275inject(Wd),o.\u0275\u0275inject(xt.yh))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),hw=(()=>{class e{constructor(t){this.pageBuilderFacade=t}resolve(t,r){return this.pageBuilderFacade.getForm$(r)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(bo))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),P4=(()=>{class e extends VD{constructor(t,r){super(),this.tokenizerService=t,this.paneDatasource=r,this.trackByMapping=(s,a)=>this.tokenizerService.replaceTokens(this.trackByTpl,this.tokenizerService.generateGenericTokens(a.contexts[0].data))}get displayedColumns(){const t=this.panes.findIndex(r=>r.contexts.findIndex(s=>"_root"===s.name)>-1);return t>-1?Object.keys(this.panes[t].contexts.find(r=>"_root"===r.name).data):[]}ngOnInit(){console.log(this.panes),this.paneDatasource.panes=this.panes}rowData(t,r){return console.log(`name: ${t}`),`${r.contexts.find(s=>"_root"===s.name).data[t]}`}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Gn),o.\u0275\u0275directiveInject(_h))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["lib-table-panel-renderer"]],features:[o.\u0275\u0275ProvidersFeature([_h]),o.\u0275\u0275InheritDefinitionFeature],decls:4,vars:4,consts:[["mat-table","","matSort","",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"table",0),o.\u0275\u0275template(1,TL,3,1,"ng-container",1),o.\u0275\u0275template(2,RL,1,0,"tr",2),o.\u0275\u0275template(3,kL,1,0,"tr",3),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("dataSource",r.paneDatasource),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",r.displayedColumns),o.\u0275\u0275advance(1),o.\u0275\u0275property("matHeaderRowDef",r.displayedColumns),o.\u0275\u0275advance(1),o.\u0275\u0275property("matRowDefColumns",r.displayedColumns))},directives:[Ps.BZ,rw.nU,Ps.XQ,Ps.Gk,rw.YE,C.NgForOf,Ps.w1,Ps.fO,Ps.ge,Ps.Dz,Ps.ev,Ps.as,Ps.nj],styles:[""]}),e})(),I4=(()=>{class e{constructor(t){this.attributeSerializer=t}handleFile(t){return(0,Be.of)()}handlesType(t){return!1}implementsRendererOverride(){return!1}hasRendererOverride(t){return(0,Be.of)(!1)}isDynamic(t){return!1}isData(t){return!1}buildDynamicItems(t,r){return(0,Be.of)([])}fetchDynamicData(t,r){return(0,Be.of)(new Rn)}getBindings(t,r){return(0,Be.of)([])}toObject(t){return(0,Be.of)(this.attributeSerializer.deserializeAsObject(t))}buildSettings(t){return this.attributeSerializer.serialize(t,"root").attributes}fromPanes(t){return t.map(r=>new dr(this.attributeSerializer.deserialize(r)))}wrapPanel(t){return new ra({stylePlugin:void 0,settings:[],panes:t,columnSetting:new Fn})}stateDefinition(t){return(0,Be.of)({})}editorOptions(t){return(0,Be.of)(new Gt.ContentPluginEditorOptions)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Ct.AttributeSerializerService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),gv=(()=>{class e{constructor(t,r,s,a){this.panelHandler=t,this.attributeSerializer=r,this.panelsLoaderService=s,this.panelsSelectorService=a}alterResolvedPanes({settings:t,resolvedPanes:r,originMappings:s}){const a=this.attributeSerializer.deserialize(new Ct.AttributeValue({name:"",displayName:"",computedValue:"",type:Ct.AttributeTypes.Complex,value:"",intValue:0,attributes:t})),l=a&&void 0!==a.labels&&Array.isArray(a.labels)?a.labels.map(p=>new vh(p.mapping)):[];let u=[];return 0===l.length?(0,Be.of)({resolvedPanes:r,originMappings:s}):(u=r.length!==l.length?r.map((p,h)=>new vh({...h<l.length?l[h]:l[l.length-1],pane:h})).map(p=>this.flattenSelector(p)):l.map(p=>this.flattenSelector(p)),(0,pn.D)(r.map((p,h)=>this.panelsLoaderService.reducePanes([],p,0)[0])).pipe((0,be.U)(p=>p.reduce((h,[S,G])=>[...h,G],[])),(0,be.U)(p=>{const h=u.map(Ne=>this.selectWithTarget(Ne)),S=u.map(Ne=>this.selectWithoutTarget(Ne)),G=h.map((Ne,Re)=>this.panelsSelectorService.rebuildPage(p[u[Re][0]],Ne.slice(1))),W=S.map((Ne,Re)=>this.panelsSelectorService.rebuildPage(p[u[Re][0]],Ne.slice(1))),J=[],ve=r.length;for(let Ne=0;Ne<ve;Ne++)J.push(new dr({...r[Ne],settings:this.panelHandler.buildSettings(G[Ne])})),J.push(new dr({...r[Ne],settings:this.panelHandler.buildSettings(W[Ne])}));return{resolvedPanes:J,originMappings:s}})))}stateDefinition(t){return(0,Be.of)({})}flattenSelector(t){const r=[];return null!=t.panel&&r.push(t.panel),null!=t.pane&&r.push(t.pane),null!=t.nested&&"object"==typeof t.nested&&this.flattenSelector(t.nested).forEach(s=>r.push(s)),r}selectWithTarget(t){return t.map(r=>r+1)}selectWithoutTarget(t){return t.map((r,s)=>s===t.length-1?-1*(r+1):0)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(I4),o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(hb),o.\u0275\u0275inject($D))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),mw=(()=>{class e{constructor(t,r,s,a){this.entityServices=t,this.pageBuilderFacade=r,this.panelStateConverterService=s,this.attributeSerializer=a,this.resolverCache$=new Map}get emptyPaneState(){return new _o({state:this.attributeSerializer.serialize({displayAssociatedPane:""},"root")})}get entities$(){return this.entityServices.getEntityCollectionService("PanelPageState").entities$.pipe((0,ee.b)(t=>{console.log("entities in store"),console.log(t)}))}get panelPage$(){return(0,Bn.a)([this.pageBuilderFacade.getPageInfo$,this.entityServices.getEntityCollectionService("PanelPage").entities$]).pipe((0,be.U)(([t,r])=>t&&void 0!==t.id&&""!==t.id&&null!==t.id&&-1!==r.findIndex(s=>s.id===t.id)?r.find(s=>s.id===t.id):void 0))}get fakePageInfo(){return new tf({id:"948d6e7b-12ab-11ec-8ecd-661fdd19e6df",path:"",realPath:"",args:new Map})}resolve(t,r){const s=r&&r.selectionMethod&&0!==r.selectionMethod.length&&r.id&&null!==r.id&&""!==r.id?`ps[id=${r.id}]${r.selectionMethod.map(a=>`${a}`).join("")}`:void 0;if(s&&this.resolverCache$.has(s))return this.resolverCache$.get(s);{const a=this.resolve$(t,r);return s&&this.resolverCache$.set(s,a),a}}resolve$(t,r){return(0,Bn.a)([this.panelPage$,this.entities$]).pipe((0,be.U)(([s,a])=>[s,s&&-1!==a.findIndex(l=>l.id===s.id)?a.find(l=>l.id===s.id):new As]),(0,tt.w)(([s,a])=>this.pageBuilderFacade.getSelectionPath$.pipe((0,be.U)(l=>r&&r.selectionPath?r.selectionPath:l),(0,ee.b)(l=>l.join(",")),(0,be.U)(l=>l.map((u,p)=>`${(p+1)%2==0?"panes":(0===p?"":"nestedPage.")+"panels"}[${u}]`)),(0,be.U)(l=>0===l.length?void 0:"$."+l.join(".")),(0,be.U)(l=>[s,a,l]))),(0,ee.b)(([s,a,l])=>{console.log("page state context resolver"),console.log(s),console.log("query: "+l)}),(0,tt.w)(([s,a,l])=>Xn(()=>!!s&&!a,this.panelStateConverterService.convertPageToState(s).pipe((0,be.U)(u=>new As({...u,panels:u.panels.map(p=>new Ll({...p,panes:p.panes.map(h=>new _o({...h,state:this.attributeSerializer.serialize({displayAssociatedPane:"y"},"root")}))}))})),(0,be.U)(u=>[u,l])),(0,Be.of)([a,l]))),(0,ee.b)(([s,a])=>{console.log("rebuilt state from realtime page"),console.log(s)}),(0,be.U)(([s,a])=>a?(0,na.JSONPath)({path:a,json:s}):this.emptyPaneState),(0,be.U)(s=>s&&Array.isArray(s)&&0!==s.length?s[0]:this.emptyPaneState),(0,ee.b)(s=>{console.log("json path match"),console.log(s)}),(0,be.U)(s=>this.attributeSerializer.deserializeAsObject(s.state)),(0,ee.b)(s=>{console.log("final state"),console.log(s)}))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Yn),o.\u0275\u0275inject(bo),o.\u0275\u0275inject(HD),o.\u0275\u0275inject(Ct.AttributeSerializerService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();const T4=[{path:"pages",children:[{path:"create-panel-page",component:UL},{path:"panelpage/:panelPageId/manage",component:Gh}]}];let R4=(()=>{class e{constructor(t,r,s,a,l,u,p,h,S,G,W,J,ve,Ne,Re,De,Je,et,gt,St,Ft,Kt,Zt,Vn,Pr,Ai,Tt,Sn,ai){var n;u.registerMetadataMap(OL),[f4(Ne),p4(Re),h4(De),m4(Je),g4(et)].forEach(er=>{a.register(er)}),t.forEach(er=>s.register(er)),r.forEach(er=>l.register(er)),p.register(((e,n,t)=>new Qs({id:"form",title:"Form",usedContexts:({param:r})=>(0,Be.of)([`form__${r.mapping.value.substr(0,r.mapping.value.indexOf("."))}`]),evalParam:({param:r})=>{const a=r.mapping.value.substr(0,r.mapping.value.indexOf(".")),l=r.mapping.value.substr(r.mapping.value.indexOf(".")+1);return console.log(`form: ${a} || ${l}`),t.getForm$(a).pipe((0,an.q)(1),(0,be.U)(u=>u||new qa),(0,be.U)(u=>n.serializeForm(u)),(0,be.U)(u=>e.generateGenericTokens(u)),(0,ee.b)(u=>console.log(u)),(0,be.U)(u=>u.has(`.${l}`)?e.replaceTokens(`[.${l}]`,u):""),(0,ee.b)(u=>{console.log("form value"),console.log(u)}))}}))(W,J,ve)),h.register((e=>new NF({id:"form",title:"Form",resolve:()=>e.getFormNames$.pipe((0,tt.w)(n=>0===n.length?(0,Be.of)([]):(0,Bn.a)(n.map(t=>e.getForm$(t).pipe((0,be.U)(r=>[t,r]))))),(0,be.U)(n=>n.reduce((t,[r,s])=>({...t,[`form__${r}`]:s}),{}))),resolveSingle:()=>e.getFormNames$.pipe((0,tt.w)(n=>(0,N.T)(...n.map(t=>e.getForm$(t).pipe((0,be.U)(r=>[`form__${t}`,r]))))))}))(ve)),gt.register((e=>new Jd({id:"pages_form",title:"Pages Form",build:()=>{Ml.prototype.serializePageForm=n=>new Promise(t=>{t(e.serializeForm(n))})}}))(J)),gt.getPlugin("pages_form").subscribe(er=>er.build()),Zt.register((n=J,new nc({id:"panelpageform_serialize",title:"Panelpageform Serialize",create:({object:t})=>(0,Be.of)({success:!1,entity:n.serializeForm(new qa(t))}),read:({})=>(0,Be.of)({success:!1}),update:({})=>(0,Be.of)({success:!1}),delete:({})=>(0,Be.of)({success:!1})}))),Tt.register(((e,n,t)=>new xs({id:"form",title:"Form",editor:s4,fetch:({settings:r})=>(0,Be.of)(new Rn).pipe((0,be.U)(()=>new Jg(e.deserializeAsObject(r))),(0,tt.w)(s=>n.getForm$(s.name).pipe((0,be.U)(a=>[s,a||new qa]),(0,zr.d)([s,new qa]),(0,an.q)(1))),(0,be.U)(([s,a])=>[s,t.serializeForm(a)]),(0,be.U)(([s,a])=>new Rn({results:(0,na.JSONPath)({path:`$.${s.field}.*`,json:a})}))),getBindings:({settings:r})=>(0,Be.of)([]).pipe((0,be.U)(()=>new Jg(e.deserializeAsObject(r))),(0,be.U)(a=>[new Gt.ContentBinding({id:`form__${a.name}`,type:"context"})]))}))(Sn,ve,J))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Gt.CONTENT_PLUGIN),o.\u0275\u0275inject(gh),o.\u0275\u0275inject(Gt.ContentPluginManager),o.\u0275\u0275inject(Va),o.\u0275\u0275inject(ic),o.\u0275\u0275inject(pi),o.\u0275\u0275inject(Ua),o.\u0275\u0275inject(O0),o.\u0275\u0275inject(en.PluginConfigurationManager),o.\u0275\u0275inject(MF),o.\u0275\u0275inject(Gn),o.\u0275\u0275inject(bb),o.\u0275\u0275inject(bo),o.\u0275\u0275inject(fw),o.\u0275\u0275inject(pw),o.\u0275\u0275inject(hw),o.\u0275\u0275inject(fv),o.\u0275\u0275inject(mw),o.\u0275\u0275inject(Qu),o.\u0275\u0275inject(F.HttpClient),o.\u0275\u0275inject(xa),o.\u0275\u0275inject(fi),o.\u0275\u0275inject(Ha),o.\u0275\u0275inject(pi),o.\u0275\u0275inject(Fi),o.\u0275\u0275inject(Zs),o.\u0275\u0275inject(Ro),o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(Qd))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({providers:[A4,fw,pw,hw,fv,mw,{provide:on.EMBEDDABLE_COMPONENT,useValue:S4,multi:!0},{provide:on.EMBEDDABLE_COMPONENT,useValue:u0,multi:!0},{provide:on.EMBEDDABLE_COMPONENT,useValue:Uh,multi:!0},{provide:Vl,useClass:Vl},{provide:$l,useClass:$l},{provide:fc,useClass:fc},{provide:_f,useClass:_f},{provide:Vh,useClass:Vh},{provide:gv,useClass:gv},{provide:Gt.CONTENT_PLUGIN,useFactory:a4,multi:!0,deps:[Vl]},{provide:Gt.CONTENT_PLUGIN,useFactory:l4,multi:!0,deps:[$l]},{provide:Gt.CONTENT_PLUGIN,useFactory:u4,multi:!0,deps:[fc]},{provide:Gt.CONTENT_PLUGIN,useFactory:c4,multi:!0,deps:[_f]},{provide:Gt.CONTENT_PLUGIN,useFactory:d4,multi:!0,deps:[Vh]},{provide:gh,useValue:new yh({id:"virtuallist",name:"virtuallist",title:"Virtual List",editorComponent:void 0,renderComponent:x4}),multi:!0},{provide:gh,useFactory:v4,multi:!0,deps:[gv]},{provide:gh,useValue:new yh({id:"table",name:"table",title:"Table",editorComponent:void 0,renderComponent:P4}),multi:!0}],imports:[[C.CommonModule,d.u5,d.UX,ri.MaterialModule,al,sh,Pn.RouterModule.forChild(T4),ru,Cg.forChild(),Ch,Bb,on.UtilsModule,Bd,Zu,Ct.AttributesModule,$_,Kb,hN,Xg,Mj,xg,Ga,I0,Dl,dv]]}),e})();class k4 extends zF{}class O4{constructor(n,t,r){this.siteName=n,this.es=t,this.router=r,this.routesLoaded=!1}get panelPageListItemsService(){return this.es.getEntityCollectionService("PanelPageListItem")}isLoaded(){return this.routesLoaded}load(){return this.panelPageListItemsService.getWithQuery(`site=${encodeURIComponent(`{"term":{"site.keyword":{"value":"${this.siteName}"}}}`)}&path=${encodeURIComponent('{"wildcard":{"path.keyword":{"value":"*"}}}')}`).pipe((0,be.U)(n=>n.filter(t=>void 0!==t.path&&""!==t.path)),(0,be.U)(n=>n.map(t=>new Cr(t)).sort((t,r)=>t.path.split("/").length===r.path.split("/").length?t.path.split("/")[t.path.split("/").length-1]>r.path.split("/")[r.path.split("/").length-1]?-1:1:t.path.split("/").length>r.path.split("/").length?-1:1)),(0,ee.b)(n=>n.sort((t,r)=>t.path.length>r.path.length?1:-1)),(0,ee.b)(n=>{n.forEach(t=>{this.router.config.unshift({matcher:hv(t),component:Uh,data:{panelPageListItem:t}}),this.router.config.unshift({matcher:mv(t),component:Gh,data:{panelPageListItem:t}})}),this.routesLoaded=!0}),(0,ee.b)(()=>console.log("panels routes loaded")),(0,be.U)(()=>!0))}}class F4{constructor(n,t,r){this.siteName=n,this.es=t,this.router=r}get panelPageListItemsService(){return this.es.getEntityCollectionService("PanelPageListItem")}match(n){let t=n.url;-1!==t.indexOf("?")&&(t=n.url.substr(0,t.indexOf("?")));const r="path="+t.substr(1).split("/").reduce((s,a,l)=>[...s,0===l?`/${a}`:`${s[l-1]}/${a}`],[]).map(s=>this.encodePathComponent(s)).join("&path=")+`&site=${encodeURIComponent(`{"term":{"site.keyword":{"value":"${this.siteName}"}}}`)}`;return this.panelPageListItemsService.getWithQuery(r).pipe((0,kr.K)(s=>(0,Be.of)([])),(0,be.U)(s=>s.reduce((a,l)=>void 0===a||a.path.split("/").length<l.path.split("/").length?l:a,void 0)),(0,be.U)(s=>!!s||n.url.indexOf("pages")>-1))}encodePathComponent(n){return`{"term":{"path.keyword":{"value":"${n}"}}}`}}class D4{constructor(n,t,r){this.siteName=n,this.es=t,this.router=r}get panelPageListItemsService(){return this.es.getEntityCollectionService("PanelPageListItem")}redirect(n,t){if(t.url.indexOf("pages")>-1)console.log(`redirect: ${t.url}`),this.router.navigateByUrl(t.url);else{let r=t.url;-1!==r.indexOf("?")&&(r=t.url.substr(0,r.indexOf("?")));const s="path="+r.substr(1).split("/").reduce((a,l,u)=>[...a,0===u?`/${l}`:`${a[u-1]}/${l}`],[]).map(a=>this.encodePathComponent(a)).join("&path=")+`&site=${encodeURIComponent(`{"term":{"site.keyword":{"value":"${this.siteName}"}}}`)}`;this.panelPageListItemsService.getWithQuery(s).pipe((0,be.U)(a=>a.reduce((l,u)=>void 0===l||l.path.split("/").length<u.path.split("/").length?u:l,void 0)),(0,be.U)(a=>{const l=t.url.substr(1).split("/").slice(a.path.split("/").length-1).join("/");return[a,l]})).subscribe(([a,l])=>{this.router.navigate(["reload"])})}}encodePathComponent(n){return`{"term":{"path.keyword":{"value":"${n}"}}}`}}let N4=(()=>{class e{constructor(t,r,s,a){t.register(((e,n,t)=>{const r=new O4(e,n,t),s=new F4(e,n,t),a=new D4(e,n,t);return new k4({id:"panels",title:"Panels",loadingStrategy:r,matchingStrategy:s,redirectHandler:a})})(s,a,r))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(F0),o.\u0275\u0275inject(Pn.Router),o.\u0275\u0275inject(on.SITE_NAME),o.\u0275\u0275inject(Yn))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[C.CommonModule]]}),e})(),gw=(()=>{class e{constructor(t,r){this.fb=t,this.controlContainer=r,this.context$=new m.X(void 0),this.formGroup=this.fb.group({value:this.fb.control("",[d.kI.required])}),this.stateCtrl=this.fb.control(""),this.stateCtrlSub=this.stateCtrl.valueChanges.pipe((0,qn.b)(250),(0,kl.x)(),(0,U.h)(s=>{try{return JSON.parse(s),!0}catch{return!1}}),(0,be.U)(s=>JSON.parse(s))).subscribe(s=>{console.log("write state"),console.log(s),this.formGroup.get("value").setValue(s)}),this.onTouched=()=>{}}set context(t){this.context$.next(t)}ngOnInit(){this.context$.subscribe(t=>{this.stateCtrl.setValue(t?JSON.stringify(t.data.value):"")})}writeValue(t){t&&this.formGroup.setValue(t,{emitEvent:!1})}registerOnChange(t){this.formGroup.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.formGroup.disable():this.formGroup.enable()}validate(t){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"source is invalid"}}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-context-state-form"]],inputs:{context:"context"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>e),multi:!0}])],decls:2,vars:2,consts:[[3,"formGroup"],["cols","40","rows","20","required","",3,"formControl"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275element(1,"textarea",1),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.formGroup),o.\u0275\u0275advance(1),o.\u0275\u0275property("formControl",r.stateCtrl))},directives:[d.JL,d.sg,d.Fj,d.Q7,d.JJ,d.oH],styles:[""]}),e})(),j4=(()=>{class e{constructor(t,r){this.fb=t,this.controlContainer=r}ngOnInit(){this.controlContainer.control.addControl("adaptor",this.fb.control("data",d.kI.required)),this.controlContainer.control.addControl("data",this.fb.control(""))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-context-state-editor"]],viewQuery:function(t,r){if(1&t&&o.\u0275\u0275viewQuery(gw,7),2&t){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.contextStateFormComp=s.first)}},inputs:{context:"context"},decls:2,vars:2,consts:[[3,"formGroup"],["formControlName","data",3,"context"]],template:function(t,r){1&t&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"classifieds-ui-context-state-form",1),o.\u0275\u0275elementContainerEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("context",r.context))},directives:[gw,d.JL,d.sg,d.JJ,d.u],styles:[""]}),e})(),vw=(()=>{class e{constructor(t,r){this.attributeSerializer=t,this.es=r}get entityCollectionService(){return this.es.getEntityCollectionService("GlobalState")}resolve(t,r,s){console.log("hookup globalstate"),console.log(r);const u=s&&s.has("name")&&s.get("name")&&null!==s.get("name")&&""!==s.get("name")?s.get("name"):void 0;return u?this.entityCollectionService.collection$.pipe((0,xt.Ys)((p=u,(0,xt.P1)(p=>p.entities,h=>h[p]?h[p]:void 0))),(0,be.U)(p=>p?this.attributeSerializer.deserialize(p.value):r.value?r.value:{}),(0,be.U)(p=>p.root?p.root:p),(0,ee.b)(p=>{console.log("resolve globalstate"),console.log(p)})):(0,Be.of)(r.value?r.value:{}).pipe((0,ee.b)(p=>{console.log("resolve default globalstate"),console.log(p)}));var p}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(Yn))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();class B4{constructor(n){n&&(this.id=n.id,this.value=new Ct.AttributeValue(n.value))}}const U4={GlobalState:{entityName:"GlobalState"}};let G4=(()=>{class e{constructor(t,r,s,a,l,u,p){t.registerMetadataMap(U4),r.registerService("GlobalState",new on.NoopDataService("GlobalState")),s.register((e=>{const n=new Ct.AttributeValue;return new ta({id:"state",name:"state",title:"State",baseObject:n,resolver:e,editorComponent:j4})})(p)),u.register(((e,n)=>new Jd({id:"state",title:"State",build:()=>{Ml.prototype.writeState=t=>new Promise(r=>{e.getEntityCollectionService("GlobalState").upsert(new B4({id:t.id,value:n.serialize(t.value,"root")})).pipe((0,ee.b)(a=>r(a))).subscribe()})}}))(a,l))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(pi),o.\u0275\u0275inject(Fi),o.\u0275\u0275inject(Va),o.\u0275\u0275inject(Yn),o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(Qu),o.\u0275\u0275inject(vw))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({providers:[vw],imports:[[C.CommonModule,d.u5,d.UX]]}),e})();var V4=x(7359);function eo(e){return new Promise((n,t)=>{e.oncomplete=e.onsuccess=()=>n(e.result),e.onabort=e.onerror=()=>t(e.error)})}let vv;function Yo(){return vv||(vv=function K4(e,n){const t=function H4(){var n;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(t){var r=function(){return indexedDB.databases().finally(t)};n=setInterval(r,100),r()}).finally(function(){return clearInterval(n)}):Promise.resolve()}().then(()=>{const r=indexedDB.open(e);return r.onupgradeneeded=()=>r.result.createObjectStore(n),eo(r)});return(r,s)=>t.then(a=>s(a.transaction(n,r).objectStore(n)))}("keyval-store","keyval")),vv}function yw(e,n,t=Yo()){return t("readwrite",r=>(r.put(n,e),eo(r.transaction)))}const Q4=e=>new nc({id:"idb_keyval",title:"Idb Keyval",create:({object:n,identity:t,params:r,parentObject:s})=>(0,Be.of)({success:!1}).pipe((0,tt.w)(()=>t({object:n,parentObject:s}).pipe((0,be.U)(({identity:a})=>({identity:a})))),(0,tt.w)(({identity:a})=>r&&0!==Object.keys(r).length?(0,pn.D)(Object.keys(r).map(l=>e.paramValue(r[l],new Map).pipe((0,be.U)(u=>({[l]:u}))))).pipe((0,be.U)(l=>l.reduce((u,p)=>({...u,...p}),{})),(0,be.U)(l=>({identity:a,options:l}))):(0,Be.of)({identity:a,options:{}})),(0,be.U)(({identity:a,options:l})=>({name:l.prefix+a})),(0,tt.w)(({name:a})=>new v.y(l=>{yw(a,n).then(u=>{console.log("idb write suceeded"),console.log(u),l.next({success:!0}),l.complete()}).catch(u=>{console.log("idb write failed"),console.log(u),l.next({success:!1}),l.complete()})}))),read:({})=>(0,Be.of)({success:!1}),update:({object:n,identity:t,params:r,parentObject:s})=>(0,Be.of)({success:!1}).pipe((0,tt.w)(()=>t({object:n,parentObject:s}).pipe((0,be.U)(({identity:a})=>({identity:a})))),(0,tt.w)(({identity:a})=>r&&0!==Object.keys(r).length?(0,pn.D)(Object.keys(r).map(l=>e.paramValue(r[l],new Map).pipe((0,be.U)(u=>({[l]:u}))))).pipe((0,be.U)(l=>l.reduce((u,p)=>({...u,...p}),{})),(0,be.U)(l=>({identity:a,options:l}))):(0,Be.of)({identity:a,options:{}})),(0,be.U)(({identity:a,options:l})=>({name:l.prefix+a})),(0,tt.w)(({name:a})=>new v.y(l=>{yw(a,n).then(u=>{console.log("idb write suceeded"),console.log(u),l.next({success:!0}),l.complete()}).catch(u=>{console.log("idb write failed"),console.log(u),l.next({success:!1}),l.complete()})}))),delete:({})=>(0,Be.of)({success:!1}),query:({params:n,rule:t,identity:r})=>e.paramValues(new Map(Object.keys(n).map(s=>[s,n[s]]))).pipe((0,tt.w)(s=>new v.y(a=>{(function J4(e=Yo()){return e("readonly",n=>{if(n.getAllKeys)return eo(n.getAllKeys());const t=[];return function yv(e,n){return e.openCursor().onsuccess=function(){!this.result||(n(this.result),this.result.continue())},eo(e.transaction)}(n,r=>t.push(r.key)).then(()=>t)})})().then(l=>l.filter(u=>0===`${u}`.indexOf(s.get("prefix")))).then(l=>function W4(e,n=Yo()){return n("readonly",t=>Promise.all(e.map(r=>eo(t.get(r)))))}(l)).then(l=>{a.next({entities:l,success:!0}),a.complete()})})),(0,tt.w)(s=>t?new v.y(a=>{const l=new tc.Engine;l.addOperator("startsWith",(u,p)=>"string"==typeof p&&"string"==typeof u&&0===p.indexOf(u)),l.addOperator("term||wildcard",(u,p)=>{const h=JSON.parse(decodeURIComponent(p)),S=(0,na.JSONPath)({path:"$.term.*.value.@string()",json:h,flatten:!0});return void 0!==h.wildcard||h.term&&0!==S.lengh&&S[0]===u}),l.addRule(t),l.addFact("identity",(u,p)=>new v.y(h=>{p.factValue("entity").then(S=>r({object:S}).pipe((0,be.U)(({identity:G})=>G)).toPromise()).then(S=>{h.next(S),h.complete()})}).toPromise(),{cache:!1}),(0,Be.of)(...s.entities).pipe((0,$o.b)(u=>new v.y(p=>{l.removeFact("entity"),l.addFact("entity",u,{cache:!1}),l.run().then(h=>{p.next([u,h.events.findIndex(S=>"visible"===S.type)>-1]),p.complete()})})),(0,U.h)(([u,p])=>p),(0,be.U)(([u])=>u),function $4(e,n){return(0,ds.e)((0,V4.U)(e,n,arguments.length>=2,!1,!0))}((u,p)=>[...u,p],[]),(0,zr.d)([])).subscribe(u=>{a.next({...s,entities:u}),a.complete()})}):(0,Be.of)(s)))}),Y4=({data:e,key:n})=>t=>()=>new v.y(r=>{(0,C.isPlatformBrowser)(t)?function X4(e,n=Yo()){return n("readwrite",t=>(e.forEach(r=>t.put(r[1],r[0])),eo(t.transaction)))}(e.map(a=>[n({data:a}),a])).then(()=>{console.log("data loaded into idb"),r.next(),r.complete()}).catch(()=>{console.log("data load into idb failure"),r.next(),r.complete()}):(r.next(),r.complete())});let Z4=(()=>{class e{constructor(t,r){t.register(Q4(r))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Ha),o.\u0275\u0275inject(Zs))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[Yd]]}),e})(),ez=(()=>{class e{constructor(t,r,s,a){this.authFacade=r,this.router=s,this.title="Spearhead Docs",this.menuClicked=new o.EventEmitter,(0,C.isPlatformBrowser)(t)&&(bridge=a)}ngOnInit(){this.authFacade.getUser$.subscribe(t=>{this.isAuthenticated=!!t})}login(){this.authFacade.login()}menuClick(){this.menuClicked.emit()}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.PLATFORM_ID),o.\u0275\u0275directiveInject(ei),o.\u0275\u0275directiveInject(Pn.Router),o.\u0275\u0275directiveInject(Ml))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["app-root"]],outputs:{menuClicked:"menuClicked"},decls:120,vars:0,consts:[[1,"top-header","border-b","border-b-stone-300","px-4","flex","flex-row","justify-between"],[1,"brand","text-emerald-700","font-semibold"],["href","https://github.com/rollthecloudinc/spearhead-docs"],["width","13.5","height","13.5","aria-hidden","true","viewBox","0 0 24 24",1,"inline","mb-1"],["fill","currentColor","d","M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"],[1,"flex","items-center","h-full"],[1,"mr-6","ml-1"],[1,"text-emerald-700"],[1,"mr-6","text-emerald-700","ml-1"],[1,"ml-1","mr-6"],[1,"bg-white","hover:bg-gray-100","text-gray-800","font-semibold","py-2","px-4","border","border-gray-400","rounded","shadow"],["href","https://github.com/rollthecloudinc",1,"brand","text-slate-600","font-medium","tracking-wide","hover:text-emerald-700","mr-6"],["action","https://www.paypal.com/donate","method","POST","target","_top"],["type","hidden","name","hosted_button_id","value","84YQP5Z9AUZYY"],["type","image","src","https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif","border","0","name","submit","title","PayPal - The safer, easier way to pay online!","alt","Donate with PayPal button"],["type","submit"],["alt","","border","0","src","https://www.paypal.com/en_US/i/scr/pixel.gif","width","1","height","1"],[1,"top-header-push"],[1,"flex-1"],[1,"outlet-wrapper","flex","flex-row"],[1,"px-2","py-2","sidebar"],[1,"text-slate-600"],["routerLink","/",1,"px-2","py-2","flex","hover:bg-neutral-100","hover:text-emerald-700"],["routerLink","/introduction",1,"px-2","py-2","flex","hover:bg-neutral-100","hover:text-emerald-700"],["routerLink","/carbon-efficiency",1,"px-2","py-2","flex","hover:bg-neutral-100","hover:text-emerald-700"],["routerLink","/energy-efficiency",1,"px-2","py-2","flex","hover:bg-neutral-100","hover:text-emerald-700"],["routerLink","/carbon-awareness",1,"px-2","py-2","flex","hover:bg-neutral-100","hover:text-emerald-700"],["routerLink","/hardware-efficiency",1,"px-2","py-2","flex","hover:bg-neutral-100","hover:text-emerald-700"],["routerLink","/measurement",1,"px-2","py-2","flex","hover:bg-neutral-100","hover:text-emerald-700"],["routerLink","/climate-commitments",1,"px-2","py-2","flex","hover:bg-neutral-100","hover:text-emerald-700"],["routerLink","/glossary",1,"px-2","py-2","flex","hover:bg-neutral-100","hover:text-emerald-700"],[1,"px-4","py-4","border-l","border-l-stone-300"],[1,"py-10","px-16"],[1,"grid","grid-cols-3"],[1,"font-medium","tracking-wide","text-lime-400","pb-4"],[1,"space-y-1.5"],["href","",1,"text-sm","text-zinc-400","font-light","tracking-wide","hover:text-white","hover:underline"],[1,"text-center","mt-8","text-sm","text-zinc-400","font-thin","tracking-wide"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"p",1),o.\u0275\u0275elementStart(2,"a",2),o.\u0275\u0275text(3,"Spearhead Docs "),o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(4,"svg",3),o.\u0275\u0275element(5,"path",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275namespaceHTML(),o.\u0275\u0275elementStart(6,"div"),o.\u0275\u0275elementStart(7,"dl",5),o.\u0275\u0275elementStart(8,"dt"),o.\u0275\u0275text(9,"Emissions:"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(10,"dt",6),o.\u0275\u0275text(11,"100g"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(12,"dt",7),o.\u0275\u0275text(13,"Offset:"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(14,"dt",8),o.\u0275\u0275text(15,"50g"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(16,"dt"),o.\u0275\u0275text(17,"Remaining:"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(18,"dt",9),o.\u0275\u0275text(19,"50g"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(20,"dt"),o.\u0275\u0275elementStart(21,"button",10),o.\u0275\u0275text(22," Contribute "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(23,"div"),o.\u0275\u0275elementStart(24,"div",5),o.\u0275\u0275elementStart(25,"a",11),o.\u0275\u0275text(26,"a Roll The Cloud Inc. initiative "),o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(27,"svg",3),o.\u0275\u0275element(28,"path",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275namespaceHTML(),o.\u0275\u0275elementStart(29,"form",12),o.\u0275\u0275element(30,"input",13),o.\u0275\u0275element(31,"input",14),o.\u0275\u0275elementStart(32,"button",15),o.\u0275\u0275element(33,"img",16),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(34,"div",17),o.\u0275\u0275elementStart(35,"div",18),o.\u0275\u0275elementStart(36,"div",19),o.\u0275\u0275elementStart(37,"div",20),o.\u0275\u0275elementStart(38,"nav"),o.\u0275\u0275elementStart(39,"ul",21),o.\u0275\u0275elementStart(40,"li"),o.\u0275\u0275elementStart(41,"a",22),o.\u0275\u0275text(42,"Welcome"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(43,"li"),o.\u0275\u0275elementStart(44,"a",23),o.\u0275\u0275text(45,"Introduction"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(46,"li"),o.\u0275\u0275elementStart(47,"a",24),o.\u0275\u0275text(48,"Carbon Efficency"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(49,"li"),o.\u0275\u0275elementStart(50,"a",25),o.\u0275\u0275text(51,"Energy Efficency"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(52,"li"),o.\u0275\u0275elementStart(53,"a",26),o.\u0275\u0275text(54,"Carbon Awareness"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(55,"li"),o.\u0275\u0275elementStart(56,"a",27),o.\u0275\u0275text(57,"Hardware Efficency"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(58,"li"),o.\u0275\u0275elementStart(59,"a",28),o.\u0275\u0275text(60,"Measurement"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(61,"li"),o.\u0275\u0275elementStart(62,"a",29),o.\u0275\u0275text(63,"Climate Comittments"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(64,"li"),o.\u0275\u0275elementStart(65,"a",30),o.\u0275\u0275text(66,"Glossary"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(67,"div",31),o.\u0275\u0275element(68,"router-outlet"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(69,"footer",32),o.\u0275\u0275elementStart(70,"div",33),o.\u0275\u0275elementStart(71,"div"),o.\u0275\u0275elementStart(72,"div",34),o.\u0275\u0275text(73,"Links"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(74,"ul",35),o.\u0275\u0275elementStart(75,"li"),o.\u0275\u0275elementStart(76,"a",36),o.\u0275\u0275text(77,"Github "),o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(78,"svg",3),o.\u0275\u0275element(79,"path",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275namespaceHTML(),o.\u0275\u0275elementStart(80,"li"),o.\u0275\u0275elementStart(81,"a",36),o.\u0275\u0275text(82,"Website "),o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(83,"svg",3),o.\u0275\u0275element(84,"path",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275namespaceHTML(),o.\u0275\u0275elementStart(85,"div"),o.\u0275\u0275elementStart(86,"div",34),o.\u0275\u0275text(87,"LEGAL"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(88,"ul",35),o.\u0275\u0275elementStart(89,"li"),o.\u0275\u0275elementStart(90,"a",36),o.\u0275\u0275text(91,"Trademark Policy "),o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(92,"svg",3),o.\u0275\u0275element(93,"path",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275namespaceHTML(),o.\u0275\u0275elementStart(94,"li"),o.\u0275\u0275elementStart(95,"a",36),o.\u0275\u0275text(96,"Terms & Privary Policy "),o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(97,"svg",3),o.\u0275\u0275element(98,"path",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275namespaceHTML(),o.\u0275\u0275elementStart(99,"div"),o.\u0275\u0275elementStart(100,"div",34),o.\u0275\u0275text(101,"GSF Info"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(102,"ul",35),o.\u0275\u0275elementStart(103,"li"),o.\u0275\u0275elementStart(104,"a",36),o.\u0275\u0275text(105,"Green Software Foundation "),o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(106,"svg",3),o.\u0275\u0275element(107,"path",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275namespaceHTML(),o.\u0275\u0275elementStart(108,"li"),o.\u0275\u0275elementStart(109,"a",36),o.\u0275\u0275text(110,"Twiiter "),o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(111,"svg",3),o.\u0275\u0275element(112,"path",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275namespaceHTML(),o.\u0275\u0275elementStart(113,"li"),o.\u0275\u0275elementStart(114,"a",36),o.\u0275\u0275text(115,"Linkedin "),o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(116,"svg",3),o.\u0275\u0275element(117,"path",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275namespaceHTML(),o.\u0275\u0275elementStart(118,"p",37),o.\u0275\u0275text(119,"Copyright \xa9 2022 Joint Development Foundation Projects, LLC, Green Software Foundation Series"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd())},directives:[d._Y,d.JL,d.F,Pn.RouterLinkWithHref,Pn.RouterOutlet],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;min-height:100vh}.top-header-push[_ngcontent-%COMP%]{height:3.75rem}.brand[_ngcontent-%COMP%]{line-height:3.75em;position:relative}.outlet-wrapper[_ngcontent-%COMP%]{height:100%}.top-header[_ngcontent-%COMP%]{height:3.75rem;position:fixed;top:0;width:100%;background-color:#fff}.sidebar[_ngcontent-%COMP%]{min-width:20%}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{position:fixed;width:19%}footer[_ngcontent-%COMP%]{background-color:#032629}"]}),e})();var tz=x(825);const Zo_production=!0,Zo_site="spearhead-docs",Zo_apiGatewaySettings={endpointUrl:"https://edge.hedge.earth/octostore/rollthecloudinc/spearhead-docs-objects-prod/shapeshifter"},Zo_mediaSettings={endpointUrl:"https://edge.hedge.earth/octostore/rollthecloudinc/spearhead-docs-objects-prod/media",cloudinaryUrl:"https://api.cloudinary.com/v1_1/dj4vvkgzw",uploadPreset:"i0hm4opm",imageUrl:"https://edge.hedge.earth/octostore/rollthecloudinc/spearhead-docs-objects-prod",bucket:"classifieds-ui-prod",prefix:"media/"},Zo_cognitoSettings={identityPoolId:"us-east-1:51af715f-31cf-4200-b43b-6c1ea1b62f5e",region:"us-east-1",userPoolId:"us-east-1_ObsPF5JdM"},Zo_panelsSettings={openSearchDomain:"search-classifieds-ui-prod-o5unofrr3c4qb3ykfrxebh2e4a",s3Bucket:"classifieds-ui-prod",objectsRootUrl:"https://rollthecloudinc.github.io/spearhead-docs-objects-prod"},Zo_alienaliasSettings={openSearchDomain:"search-classifieds-ui-prod-o5unofrr3c4qb3ykfrxebh2e4a"},Zo_rumSettings={appId:"",guestRoleArn:"",identityPoolId:"",region:""},Zo_clientSettings={authority:"https://sso.druidcloud.io",client_id:"37lke0kuqac07fs1mk9mp2h471",redirect_uri:"https://spearhead-docs.carbonfreed.app/auth-callback",silent_redirect_uri:"https://spearhead-docs.carbonfreed.app/silent-refresh.html",response_type:"code",scope:"openid profile aws.cognito.signin.user.admin ads_api/ads_api taxonomy_api/taxonomy_api chat/chat media_api/media_api profiles_api/profiles_api",filterProtocolClaims:!0,loadUserInfo:!0,automaticSilentRenew:!0,stateStore:void 0,userStore:void 0,metadata:{issuer:"https://cognito-idp.us-east-1.amazonaws.com/us-east-1_ObsPF5JdM",authorization_endpoint:"https://sso.druidcloud.io/oauth2/authorize",userinfo_endpoint:"https://sso.druidcloud.io/oauth2/userInfo",end_session_endpoint:"https://sso.druidcloud.io/logout",token_endpoint:"https://sso.druidcloud.io/oauth2/token",jwks_uri:"https://sso.druidcloud.io/us-east-1_z8PhK3D8V"},signingKeys:[{alg:"RS256",e:"AQAB",kid:"zObBQ6QfR5HnKAJd9HhoObmJqojropaz54zqf2+1zqk=",kty:"RSA",n:"o_K4yCMajjivLFuH48oM9u2m5OXg-hAJ7wRv97lpm0o_ZZAM2rY6oFwwL7lVGVCKcH048mifadzadH1Jooa6VGPq6I4zFOey0cbMAwMCyNR-rzHN0jMlHyBEExFSgtAWF1Q0u7j28F3F8LX2zEhyaPFC7ir42e1q2zyQ6Oh8kutRQm4pkrWjajrpmOI-KnkYjpmyFOFdgDYNgdFIduGhT0kZNVPPxyoOsZ6nuIJOZP4o7yTa9vJSRIdtD9k17tzFMympQoW9ZVccVMomey1iQKinHmRkcPwVFjiU8H1gSWkfdv3WsnJPNzGo2e3gAEF8d-JlRQ_XhZpAOi1_NSaGfQ",use:"sig"},{alg:"RS256",e:"AQAB",kid:"ZxSNiLaZMDgs5ev5t0foAVvoY3qvghD8MltmUceD/0I=",kty:"RSA",n:"lzC78mzfHoxtE5KVfAvkbVUw-X6tUrBAIcVujFpdGF8He0FlWxctGnisByT1s00mdAZ44YUFSDbx4gArHRRAYlYgMlI3njFKuoRGcHIkL1w4fQcisij3OM8nWdZJXdNSueb1SzhoR5xsDhPZnRGMMs3f0QohA_gCQ0Z51cSUN0EadUBW66dCT3lVdeSwnc8jwwbTas-mKY5958u9kT9fdj69F_9HwTfaFKyYu3nnO04E2InoPD_K4xZ4_oDfCVyKyjB2HLVtwhxfx6ly4Wh_p-McXOg75WcfPgSQg6IopJ5m9AteTiLDld9kHrey0KvH4K3Sztc90SvZOiV4AWHrKQ",use:"sig"}]},nz={router:function YO(e,n){const t=n;switch(t.type){case Sg:case Ag:case Eg:return{state:t.payload.routerState,navigationId:t.payload.event.id};default:return e}}},rz=[];class _w{constructor(n){n&&(this.query=n.query)}}let iz=(()=>{class e{constructor(t,r){this.fb=t,this.attributeSerializer=r,this.settings$=new m.X(void 0),this.formGroup=this.fb.group({query:this.fb.control("",[d.kI.required])}),this.settingsSub=this.settings$.pipe((0,be.U)(s=>s?new _w(this.attributeSerializer.deserializeAsObject(s)):void 0)).subscribe(s=>{s?this.formGroup.get("query").setValue(s.query):this.formGroup.get("query").setValue("")}),this.onTouched=()=>{}}set settings(t){this.settings$.next(t)}ngOnInit(){}writeValue(t){t&&this.formGroup.setValue(t,{emitEvent:!1})}registerOnChange(t){this.formGroup.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.formGroup.disable():this.formGroup.enable()}validate(t){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-select-source-form"]],inputs:{settings:"settings"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>e),multi:!0}])],decls:5,vars:1,consts:[[3,"formGroup"],["matInput","","formControlName","query","required",""]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"mat-form-field"),o.\u0275\u0275elementStart(2,"mat-label"),o.\u0275\u0275text(3,"Query"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(4,"input",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&o.\u0275\u0275property("formGroup",r.formGroup)},directives:[Yt.KE,d.JL,d.sg,Yt.hX,sr.Nt,d.Fj,d.JJ,d.u,d.Q7],styles:[""]}),e})(),oz=(()=>{class e{constructor(t){this.controlContainer=t,this.settings=[]}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-transform-select"]],inputs:{settings:"settings"},decls:2,vars:2,consts:[[3,"formGroup"],["formControlName","settings",3,"settings"]],template:function(t,r){1&t&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"classifieds-ui-select-source-form",1),o.\u0275\u0275elementContainerEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("settings",r.settings))},directives:[iz,d.JL,d.sg,d.JJ,d.u],encapsulation:2}),e})(),sz=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-transform-merge"]],decls:2,vars:0,template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"p"),o.\u0275\u0275text(1,"transform merge"),o.\u0275\u0275elementEnd())},styles:[""]}),e})();const az=e=>new xs({id:"select",title:"Select",editor:oz,fetch:({settings:n,dataset:t})=>Xn(()=>!!t,(0,Be.of)(t).pipe((0,be.U)(()=>new _w(e.deserializeAsObject(n))),(0,be.U)(r=>new Rn({results:(0,na.JSONPath)({path:r.query,json:t.results})}))),(0,Be.of)(new Rn))});let uz=(()=>{class e{constructor(t,r){[az(r),new xs({id:"merge",title:"Merge",editor:sz,fetch:({})=>(0,Be.of)(new Rn)})].forEach(s=>t.register(s))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Ro),o.\u0275\u0275inject(Ct.AttributeSerializerService))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[C.CommonModule,d.u5,d.UX,ri.MaterialModule,Dl]]}),e})(),cz=(()=>{class e{constructor(t,r){this.fb=t,this.attributeSerializer=r,this.contexts=[],this.settings$=new m.X(void 0),this.paramValues$=new m.X([]),this.formGroup=this.fb.group({entityName:this.fb.control(""),queryString:this.fb.control(""),params:this.fb.control([])}),this.settingsSub=this.settings$.pipe((0,be.U)(s=>s?this.attributeSerializer.deserializeAsObject(s):void 0)).subscribe(s=>{s?(this.formGroup.get("entityName").setValue(s.entityName),this.formGroup.get("queryString").setValue(s.queryString)):(this.formGroup.get("entityName").setValue(""),this.formGroup.get("queryString").setValue(""))}),this.queryStringChangeSub=this.formGroup.get("queryString").valueChanges.pipe((0,qn.b)(500)).subscribe(s=>{const a=Zi.parse("?"+s);this.paramsParsed=a}),this.onTouched=()=>{}}set settings(t){this.settings$.next(t)}ngOnInit(){}writeValue(t){t&&this.formGroup.setValue(t,{emitEvent:!1})}registerOnChange(t){this.formGroup.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.formGroup.disable():this.formGroup.enable()}validate(t){return this.formGroup.valid?null:this.formGroup.errors}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-entity-datasource-form"]],inputs:{contexts:"contexts",settings:"settings"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>e),multi:!0}])],decls:8,vars:4,consts:[[3,"formGroup"],["matInput","","placeholder","Name","formControlName","entityName","required",""],["matInput","","placeholder","Query String","formControlName","queryString"],["formControlName","params",3,"params","paramValues","contexts"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div"),o.\u0275\u0275elementStart(2,"mat-form-field"),o.\u0275\u0275element(3,"input",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"div"),o.\u0275\u0275elementStart(5,"mat-form-field"),o.\u0275\u0275element(6,"input",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(7,"classifieds-ui-params-form",3),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.formGroup),o.\u0275\u0275advance(7),o.\u0275\u0275property("params",r.paramsParsed)("paramValues",r.paramValues$.value)("contexts",r.contexts))},directives:[Yt.KE,qd,d.JL,d.sg,sr.Nt,d.Fj,d.JJ,d.u,d.Q7],styles:[""]}),e})(),bw=(()=>{class e{constructor(t){this.controlContainer=t,this.settings=[],this.contexts=[]}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-entity-datasource"]],inputs:{settings:"settings",contexts:"contexts"},decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","settings",3,"settings","contexts"]],template:function(t,r){1&t&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"classifieds-ui-entity-datasource-form",1),o.\u0275\u0275elementContainerEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("settings",r.settings)("contexts",r.contexts))},directives:[cz,d.JL,d.sg,d.JJ,d.u],encapsulation:2}),e})();class ww{constructor(n){this.params=[],n&&(this.entityName=n.entityName,this.queryString=n.queryString?n.queryString:"",n.params&&Array.isArray(n.params)&&(this.params=n.params.map(t=>new si(t))))}}let pz=(()=>{class e{constructor(t,r,s,a,l,u){t.register(((e,n,t,r)=>new xs({id:"entity",title:"Entity",editor:bw,fetch:({settings:s,metadata:a})=>(0,Be.of)(new Rn).pipe((0,be.U)(()=>n.deserializeAsObject(s)),(0,be.U)(l=>new ww(l)),(0,tt.w)(l=>t.getUrl("?"+l.queryString,l.params,a).pipe((0,be.U)(u=>({e:l,queryString:u})))),(0,be.U)(({e:l,queryString:u})=>({e:l,queryString:u.substr(1)})),(0,tt.w)(({e:l,queryString:u})=>u&&""!==u?r.getEntityCollectionService(l.entityName).getWithQuery(u):r.getEntityCollectionService(l.entityName).getAll()),(0,be.U)(l=>new Rn({results:l}))),editorOptions:()=>(0,Be.of)(new fh({fullscreen:!0})),getBindings:({settings:s})=>(0,Be.of)([]).pipe((0,be.U)(()=>n.deserializeAsObject(s)),(0,be.U)(l=>new ww(l)),(0,tt.w)(l=>e.extractContexts(l.params)),(0,be.U)(l=>l.map(u=>new Gt.ContentBinding({id:u,type:"context"}))))}))(s,a,l,u)),r.register(new N0({id:"entity",title:"Entity",editor:bw,send:e=>(0,Be.of)(new jg({}))}))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Ro),o.\u0275\u0275inject(ph),o.\u0275\u0275inject(Ng),o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(Wd),o.\u0275\u0275inject(Yn))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[C.CommonModule,d.UX,d.u5,ri.MaterialModule,Zu,Ga]]}),e})(),hz=(()=>{class e{constructor(t){this.fb=t,this.contexts=[],this.settings$=new m.X(void 0),this.datasource$=new m.X(void 0),this.formGroup=this.fb.group({}),this.onTouched=()=>{}}set settings(t){this.settings$.next(t)}ngOnInit(){}writeValue(t){t&&this.formGroup.setValue(t,{emitEvent:!1})}registerOnChange(t){this.formGroup.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.formGroup.disable():this.formGroup.enable()}validate(t){return this.formGroup.valid?null:this.formGroup.errors}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-loop-datasource-form"]],inputs:{contexts:"contexts",settings:"settings"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>e),multi:!0}])],decls:1,vars:1,consts:[[3,"formGroup"]],template:function(t,r){1&t&&o.\u0275\u0275element(0,"div",0),2&t&&o.\u0275\u0275property("formGroup",r.formGroup)},directives:[d.JL,d.sg],styles:[""]}),e})(),mz=(()=>{class e{constructor(t){this.controlContainer=t,this.settings=[],this.contexts=[]}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-loop-datasource"]],inputs:{settings:"settings",contexts:"contexts"},decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","settings",3,"settings","contexts"]],template:function(t,r){1&t&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"classifieds-ui-loop-datasource-form",1),o.\u0275\u0275elementContainerEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("settings",r.settings)("contexts",r.contexts))},directives:[hz,d.JL,d.sg,d.JJ,d.u],encapsulation:2}),e})();class gz{constructor(n){}}const vz=(e,n)=>new xs({id:"loop",title:"loop",editor:mz,fetch:({settings:t,dataset:r,datasource:s,metadata:a,datasources:l})=>(0,Be.of)(new Rn).pipe((0,be.U)(()=>e.deserializeAsObject(t)),(0,be.U)(u=>u?new gz(u):void 0),(0,tt.w)(u=>(0,pn.D)(r?r.results.map(p=>n.evalDatasource({datasource:new Fl({plugin:"data",renderer:s.renderer,settings:e.serialize({data:JSON.stringify(r.results)},"root").attributes}),datasources:l,metadata:new Map([...a?Array.from(a).filter(([h])=>"contexts"!==h):[],["contexts",[...a.has("contexts")&&Array.isArray(a.get("contexts"))?a.get("contexts").filter(h=>"_root"!==h.name):[],new Ei({name:"_root",adaptor:"data",data:p})]]])}).pipe((0,an.q)(1))):[]).pipe((0,be.U)(p=>new Rn({results:p.reduce((h,S)=>[...h,...S.results],[])})),(0,zr.d)(new Rn({results:[]})))))});let yz=(()=>{class e{constructor(t,r,s){[vz(r,s)].forEach(a=>t.register(a))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Ro),o.\u0275\u0275inject(Ct.AttributeSerializerService),o.\u0275\u0275inject(P0))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[C.CommonModule,d.UX,ri.MaterialModule,Zu,Dl]]}),e})();function _z(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-option",6),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;o.\u0275\u0275property("value",t.value.id),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(t.value.title)}}function bz(e,n){}function wz(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275element(1,"druid-ordain-validation-validator",4),o.\u0275\u0275elementStart(2,"button",3),o.\u0275\u0275listener("click",function(){const a=o.\u0275\u0275restoreView(t).index;return o.\u0275\u0275nextContext().deleteValidator$.next(a)}),o.\u0275\u0275text(3,"Delete"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){const t=n.index,r=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("formControlName",t)("validation",r.validation$.value.validators[t])}}class sa extends en.Plugin{constructor(n){super(n),n&&(this.editor=n.editor,this.errorMessage=n.errorMessage,this.builder=n.builder)}}class Cz{constructor(n){n&&(this.name=n.name,this.validator=n.validator,this.overrideErrorMessage=n.overrideErrorMessage,n.paramSettings&&"string"!=typeof n.paramSettings&&(this.paramSettings=new xz(n.paramSettings)))}}class xz{constructor(n){this.params=[],n&&(this.paramsString=n.paramsString,n.params&&Array.isArray(n.params)&&(this.params=n.params.map(t=>new si(t))))}}class bf{constructor(n){n&&Array.isArray(n.validators)&&(this.validators=n.validators.map(t=>new Cz(t)))}}let Cw=(()=>{class e{constructor(t){this.viewContainerRef=t}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.ViewContainerRef))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["","druidValidationRendererHost",""]]}),e})(),Sz=(()=>{class e{constructor(t){this.fb=t,this.contexts=[],this.settings$=new m.X(void 0),this.afterViewInit$=new M.x,this.paramValues$=new m.X([]),this.formGroup=this.fb.group({paramsString:this.fb.control(""),params:this.fb.control([])}),this.paramsStringChangeSub=this.formGroup.get("paramsString").valueChanges.pipe((0,qn.b)(500)).subscribe(r=>{const s=Zi.parse("?"+r);this.paramsParsed=s}),this.settingsSub=this.settings$.pipe((0,ee.b)(r=>{r&&this.formGroup.get("paramsString").setValue(r.paramsString?r.paramsString:"")})).subscribe(),this.settingsParamsSub=(0,Bn.a)([this.settings$,this.formGroup.get("paramsString").valueChanges]).pipe((0,U.h)(([r])=>void 0!==r),(0,Hn.g)(1),(0,ee.b)(([r])=>this.paramValues$.next(r.params))).subscribe(),this.onTouched=()=>{}}set settings(t){this.settings$.next(t)}writeValue(t){t&&this.formGroup.setValue(t,{emitEvent:!1})}registerOnChange(t){this.formGroup.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.formGroup.disable():this.formGroup.enable()}validate(t){return this.formGroup.valid?null:this.formGroup.errors}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-ordain-validation-params-editor-form"]],inputs:{contexts:"contexts",settings:"settings"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>e),multi:!0}])],decls:6,vars:4,consts:[[3,"formGroup"],[1,"params-container"],["matInput","","placeholder","Params","formControlName","paramsString"],["formControlName","params",3,"params","paramValues","contexts"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div",1),o.\u0275\u0275elementStart(2,"div"),o.\u0275\u0275elementStart(3,"mat-form-field"),o.\u0275\u0275element(4,"input",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(5,"classifieds-ui-params-form",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.formGroup),o.\u0275\u0275advance(5),o.\u0275\u0275property("params",r.paramsParsed)("paramValues",r.paramValues$.value)("contexts",r.contexts))},directives:[Yt.KE,qd,d.JL,d.sg,sr.Nt,d.Fj,d.JJ,d.u],styles:[""]}),e})(),aa=(()=>{class e{constructor(t){this.controlContainer=t,this.settings=[],this.contexts=[]}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-ordain-validation-params-editor"]],inputs:{settings:"settings",contexts:"contexts"},decls:2,vars:3,consts:[[3,"formGroup"],["formControlName","paramSettings",3,"settings","contexts"]],template:function(t,r){1&t&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"druid-ordain-validation-params-editor-form",1),o.\u0275\u0275elementContainerEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("settings",r.settings)("contexts",r.contexts))},directives:[Sz,d.JL,d.sg,d.JJ,d.u],encapsulation:2}),e})();class Ez{constructor(n,t){this.pluginManager=n,this.formsValidationUtils=t}loadPlugins(n,t=[]){return(0,Be.of)(!1).pipe((0,ee.b)(()=>this.pluginManager.register(this.makeRequired())),(0,ee.b)(()=>this.pluginManager.register(this.makeRequiredTrue())),(0,ee.b)(()=>{this.pluginManager.register(this.makeMin()),this.pluginManager.register(this.makeMax()),this.pluginManager.register(this.makeMinLength()),this.pluginManager.register(this.makeMaxLength())}),(0,be.U)(()=>this.pluginManager.register(this.makeEmail())),(0,be.U)(()=>this.pluginManager.register(this.makePattern())),(0,be.U)(()=>this.pluginManager.register(this.nullValidator())),(0,be.U)(()=>!0))}makeRequired(){return new sa({id:"required",title:"Required",errorMessage:"Field is required",editor:aa,builder:({serialized:n})=>(0,Be.of)(t=>(0,Be.of)(d.kI.required(this.formsValidationUtils.rebuildControl({c:t,serialized:n}))))})}makeRequiredTrue(){return new sa({id:"required_true",title:"Required True",errorMessage:"Field is required",editor:aa,builder:({serialized:n})=>(0,Be.of)(t=>(0,Be.of)(d.kI.requiredTrue(this.formsValidationUtils.rebuildControl({c:t,serialized:n}))))})}makeEmail(){return new sa({id:"email",title:"Email",errorMessage:"Invalid email",editor:aa,builder:({serialized:n})=>(0,Be.of)(t=>(0,Be.of)(d.kI.email(this.formsValidationUtils.rebuildControl({c:t,serialized:n}))))})}nullValidator(){return new sa({id:"null",title:"Null",errorMessage:"nota",editor:aa,builder:({serialized:n})=>(0,Be.of)(t=>(0,Be.of)(d.kI.nullValidator(this.formsValidationUtils.rebuildControl({c:t,serialized:n}))))})}makeMin(){return new sa({id:"min",title:"Min",errorMessage:"Field min [.min]",editor:aa,builder:({v:n,serialized:t})=>(0,Be.of)(r=>this.formsValidationUtils.resolveParams({v:n}).pipe((0,be.U)(s=>d.kI.min(+s.min)(this.formsValidationUtils.rebuildControl({c:r,serialized:t})))))})}makeMax(){return new sa({id:"max",title:"Max",errorMessage:"Field max [.max]",editor:aa,builder:({v:n,serialized:t})=>(0,Be.of)(r=>this.formsValidationUtils.resolveParams({v:n}).pipe((0,be.U)(s=>d.kI.max(+s.max)(this.formsValidationUtils.rebuildControl({c:r,serialized:t})))))})}makeMinLength(){return new sa({id:"min_length",title:"Min Length",errorMessage:"minimum of [.min] characters",editor:aa,builder:({v:n,serialized:t})=>(0,Be.of)(r=>this.formsValidationUtils.resolveParams({v:n}).pipe((0,be.U)(s=>d.kI.minLength(+s.minLength)(this.formsValidationUtils.rebuildControl({c:r,serialized:t})))))})}makeMaxLength(){return new sa({id:"max_length",title:"Max Length",errorMessage:"Maximum of [.max] characters",editor:aa,builder:({v:n,serialized:t})=>(0,Be.of)(r=>this.formsValidationUtils.resolveParams({v:n}).pipe((0,be.U)(s=>d.kI.maxLength(+s.maxLength)(this.formsValidationUtils.rebuildControl({c:r,serialized:t})))))})}makePattern(){return new sa({id:"pattern",title:"Pattern",errorMessage:"Must match pattern",editor:aa,builder:({v:n,serialized:t})=>(0,Be.of)(r=>this.formsValidationUtils.resolveParams({v:n}).pipe((0,be.U)(s=>d.kI.pattern(new RegExp(s.pattern))(this.formsValidationUtils.rebuildControl({c:r,serialized:t})))))})}}let Az=(()=>{class e{constructor(t,r){this.paramEvaluatorService=t,this.attributesSerializerService=r}resolveParams({v:t}){return(0,Be.of)({}).pipe((0,be.U)(()=>({paramNames:t.paramSettings.paramsString?t.paramSettings.paramsString.split("&").filter(r=>-1!==r.indexOf("=:")).map(r=>r.split("=",2)[1].substr(1)):[]})),(0,tt.w)(({paramNames:r})=>this.paramEvaluatorService.paramValues(t.paramSettings.params.reduce((s,a,l)=>new Map([...s,[r[l],a]]),new Map)).pipe((0,be.U)(s=>Array.from(s).reduce((a,[l,u])=>({...a,[l]:u}),{})))))}rebuildControl({c:t,serialized:r}){return r?new d.NI(this.attributesSerializerService.deserializeAsObject(t.value).value):t}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Zs),o.\u0275\u0275inject(Ct.AttributeSerializerService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),to=(()=>{class e extends en.BasePluginManager{constructor(t,r,s){super(r,s),this.addDiscovery(new Ez(this,t))}pluginDef(){return(0,Be.of)(new en.PluginDef({name:"validation"}))}discovery(){super.discovery()}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Az),o.\u0275\u0275inject(en.PluginConfigurationManager),o.\u0275\u0275inject(on.ModuleLoaderService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Pz=(()=>{class e{constructor(t,r,s){this.fb=t,this.vpm=r,this.componentFactoryResolver=s,this.contexts=[],this.settings$=new m.X(void 0),this.formGroup=this.fb.group({name:this.fb.control("",[d.kI.required]),validator:this.fb.control("",[d.kI.required]),overrideErrorMessage:this.fb.control(""),paramSettings:this.fb.control("")}),this.validationPlugins$=this.vpm.getPlugins(),this.componentRef$=new m.X(void 0),this.afterViewInit$=new M.x,this.onInit$=new M.x,this.validation$=new m.X(void 0),this.validatorChangeSub=this.formGroup.get("validator").valueChanges.pipe((0,ee.b)(a=>{console.log("validator change",a)})).subscribe(),this.validatorSub=(0,Bn.a)([this.formGroup.get("validator").valueChanges,this.afterViewInit$]).pipe((0,be.U)(([a])=>a),(0,tt.w)(a=>a&&""!==a?this.vpm.getPlugin(a):(0,Be.of)(void 0)),(0,ee.b)(a=>{a&&this.renderValidation(a)})).subscribe(),this.validationSub=this.validation$.pipe((0,ee.b)(a=>{a?(this.formGroup.get("name").setValue(a.name),this.formGroup.get("validator").setValue(a.validator),this.formGroup.get("overrideErrorMessage").setValue(a.overrideErrorMessage),setTimeout(()=>this.formGroup.get("paramSettings").setValue(a.paramSettings))):(this.formGroup.get("name").setValue(""),this.formGroup.get("overrideErrorMessage").setValue(""),this.formGroup.get("validator").setValue(""))})).subscribe(),this.contextForwardingSub=this.componentRef$.pipe((0,U.h)(a=>!!a)).subscribe(a=>{a.instance.contexts=this.contexts,a.instance.settings=this.validation$.value?this.validation$.value.paramSettings:void 0}),this.onTouched=()=>{}}set validation(t){this.validation$.next(t)}ngOnInit(){this.onInit$.next(void 0),this.onInit$.complete()}ngAfterViewInit(){this.afterViewInit$.next(void 0),this.afterViewInit$.complete()}writeValue(t){t&&this.formGroup.setValue({...t,settings:t.settings?t.settings:""},{emitEvent:!1})}registerOnChange(t){this.formGroup.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.formGroup.disable():this.formGroup.enable()}validate(t){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}renderValidation(t){const r=this.componentFactoryResolver.resolveComponentFactory(t.editor),s=this.validationHost.viewContainerRef;s.clear(),this.componentRef$.next(s.createComponent(r))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(to),o.\u0275\u0275directiveInject(o.ComponentFactoryResolver))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-ordain-validation-validator"]],viewQuery:function(t,r){if(1&t&&o.\u0275\u0275viewQuery(Cw,7),2&t){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.validationHost=s.first)}},inputs:{contexts:"contexts",validation:"validation"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>e),multi:!0}])],decls:19,vars:6,consts:[[3,"formGroup"],["matInput","","type","text","formControlName","name"],["required","","formControlName","validator"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","overrideErrorMessage"],["druidValidationRendererHost",""],[3,"value"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div"),o.\u0275\u0275elementStart(2,"mat-form-field"),o.\u0275\u0275elementStart(3,"mat-label"),o.\u0275\u0275text(4,"Name"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(5,"input",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"mat-form-field"),o.\u0275\u0275elementStart(7,"mat-label"),o.\u0275\u0275text(8,"Validator"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"mat-select",2),o.\u0275\u0275template(10,_z,2,2,"mat-option",3),o.\u0275\u0275pipe(11,"keyvalue"),o.\u0275\u0275pipe(12,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(13,"mat-form-field"),o.\u0275\u0275elementStart(14,"mat-label"),o.\u0275\u0275text(15,"Error Message"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(16,"input",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerStart(17),o.\u0275\u0275template(18,bz,0,0,"ng-template",5),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.formGroup),o.\u0275\u0275advance(10),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(11,2,o.\u0275\u0275pipeBind1(12,4,r.validationPlugins$))))},directives:[Yt.KE,oi.gD,cr.ey,d.JL,d.sg,Yt.hX,sr.Nt,d.Fj,d.JJ,d.u,d.Q7,C.NgForOf,Cw],pipes:[C.KeyValuePipe,C.AsyncPipe],styles:[""]}),e})(),Iz=(()=>{class e{constructor(t){this.fb=t,this.formGroup=this.fb.group({validators:this.fb.array([])}),this.addValidator$=new M.x,this.deleteValidator$=new M.x,this.afterViewInit$=new M.x,this.validation$=new m.X(new bf({validators:[]})),this.addValidatorSub=this.addValidator$.pipe((0,ee.b)(()=>{this.validators.push(this.fb.control(""))})).subscribe(),this.deleteValidatorSub=this.deleteValidator$.pipe((0,ee.b)(r=>{this.validation$.value.validators.splice(r,1),this.validators.removeAt(r)})).subscribe(),this.validationSub=(0,Bn.a)([this.validation$,this.afterViewInit$]).pipe((0,be.U)(([r])=>r),(0,U.h)(r=>0!==r.validators.length),(0,ee.b)(r=>{this.validators.clear(),r.validators.forEach((s,a)=>{this.validators.push(this.fb.control(""))})})).subscribe(),this.onTouched=()=>{}}set validation(t){this.validation$.next(t)}get validators(){return this.formGroup.get("validators")}ngAfterViewInit(){this.afterViewInit$.next(void 0),this.afterViewInit$.complete()}writeValue(t){t&&this.formGroup.setValue(t,{emitEvent:!1})}registerOnChange(t){this.formGroup.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.formGroup.disable():this.formGroup.enable()}validate(t){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"content is invalid"}}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-ordain-validation-editor"]],inputs:{validation:"validation"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>e),multi:!0}])],decls:5,vars:2,consts:[[3,"formGroup"],["formArrayName","validators"],[4,"ngFor","ngForOf"],["type","button",3,"click"],[3,"formControlName","validation"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div",1),o.\u0275\u0275template(2,wz,4,2,"div",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"button",3),o.\u0275\u0275listener("click",function(){return r.addValidator$.next(void 0)}),o.\u0275\u0275text(4,"Add Validator"),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.formGroup),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",r.validators.controls))},directives:[Pz,d.JL,d.sg,d.CE,C.NgForOf,d.JJ,d.u],styles:[""]}),e})(),Tz=(()=>{class e{constructor(t,r){this.vpm=t,this.tokenizerService=r,this.validators$=new m.X([]),this.errors$=new m.X(null),this.message$=new m.X("Field is invalid"),this.resolvedContext$=new m.X(void 0),this.messageSub=(0,Bn.a)([this.validators$,this.errors$,this.resolvedContext$]).pipe((0,U.h)(([s,a])=>null!==a&&0!==Object.keys(a).length),(0,be.U)(([s,a])=>{const[l]=Object.keys(a),u=s.find(p=>p.validator===l);return{k:l,v:u,e:a[l]}}),(0,tt.w)(({k:s,v:a,e:l})=>this.vpm.getPlugin(a.validator).pipe((0,be.U)(u=>({k:s,v:a,p:u,e:l})))),(0,tt.w)(({k:s,v:a,p:l,e:u})=>this.resolveContexts({errors:u}).pipe((0,be.U)(p=>({k:s,v:a,p:l,t:p})))),(0,ee.b)(({p:s,t:a,v:l})=>{const u=this.replaceTokens({message:l.overrideErrorMessage&&""!==l.overrideErrorMessage?l.overrideErrorMessage:s.errorMessage,tokens:a});this.message$.next(u)})).subscribe()}set validators(t){this.validators$.next(t)}set errors(t){this.errors$.next(t)}set resolvedContext(t){this.resolvedContext$.next(t)}replaceTokens({message:t,tokens:r}){return void 0!==r&&r.forEach((s,a)=>{t=t.split(`[${a}]`).join(`${s}`)}),t}resolveContexts({errors:t}){return new v.y(r=>{let s=new Map(this.tokenizerService.generateGenericTokens(t,""));if(this.resolvedContext$.value)for(const a in this.resolvedContext$.value)s=new Map([...s,...this.tokenizerService.generateGenericTokens(this.resolvedContext$.value[a],"_root"===a?"":a)]);r.next(s),r.complete()})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(to),o.\u0275\u0275directiveInject(Gn))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-ordain-default-validation-error"]],inputs:{validators:"validators",errors:"errors",resolvedContext:"resolvedContext"},decls:1,vars:1,template:function(t,r){1&t&&o.\u0275\u0275text(0),2&t&&o.\u0275\u0275textInterpolate(r.message$.value)},styles:[""]}),e})(),xw=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[C.CommonModule,d.u5,d.UX,ri.MaterialModule,Ga]]}),e})();var Rz=x(7314),kz=x(455),_v=x(9602);function Oz(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-error"),o.\u0275\u0275element(1,"druid-ordain-default-validation-error",2),o.\u0275\u0275elementEnd()),2&e){const t=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("validators",null==t.formSettings$.value||null==t.formSettings$.value.validation?null:t.formSettings$.value.validation.validators)("errors",t.formControl.errors)("resolvedContext",t.resolvedContext$.value)}}function Fz(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-option",2),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;o.\u0275\u0275property("value",t.value),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(t.label)}}function Dz(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275element(1,"classifieds-ui-render-pane",4),o.\u0275\u0275elementStart(2,"button",3),o.\u0275\u0275listener("click",function(){const a=o.\u0275\u0275restoreView(t).index;return o.\u0275\u0275nextContext().remove$.next(a)}),o.\u0275\u0275text(3,"Remove"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){const t=n.$implicit,r=n.index,s=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("formControlName",r)("pluginName",t.contentPlugin)("settings",t.settings)("name",t.name)("label",t.label)("contexts",t.contexts)("panes",s.panes)("resolvedContext",t.resolvedContext)("indexPosition",r)("ancestory",s.ancestory)}}function Mz(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-option",9),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;o.\u0275\u0275property("value",t),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(t)}}function Nz(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-radio-button",2),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;o.\u0275\u0275property("value",t.value),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(t.label)}}function jz(e,n){if(1&e&&(o.\u0275\u0275elementStart(0,"mat-option",4),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){const t=n.$implicit;o.\u0275\u0275property("value",t),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(t.label)}}function Bz(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"ngx-dropzone-image-preview",4),o.\u0275\u0275listener("removed",function(){o.\u0275\u0275restoreView(t);const s=o.\u0275\u0275nextContext().$implicit;return o.\u0275\u0275nextContext().onRemove(s)}),o.\u0275\u0275elementStart(1,"ngx-dropzone-label"),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){const t=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275property("file",t)("removable",!0),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate2("",t.name," (",t.type,")")}}function Lz(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"ngx-dropzone-video-preview",4),o.\u0275\u0275listener("removed",function(){o.\u0275\u0275restoreView(t);const s=o.\u0275\u0275nextContext().$implicit;return o.\u0275\u0275nextContext().onRemove(s)}),o.\u0275\u0275elementStart(1,"ngx-dropzone-label"),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){const t=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275property("file",t)("removable",!0),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate2("",t.name," (",t.type,")")}}function zz(e,n){if(1&e){const t=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"ngx-dropzone-preview",5),o.\u0275\u0275listener("removed",function(){o.\u0275\u0275restoreView(t);const s=o.\u0275\u0275nextContext().$implicit;return o.\u0275\u0275nextContext().onRemove(s)}),o.\u0275\u0275elementStart(1,"ngx-dropzone-label"),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){const t=o.\u0275\u0275nextContext().$implicit;o.\u0275\u0275property("removable",!0),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate2("",t.name," (",t.type,")")}}function Uz(e,n){if(1&e&&(o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275template(1,Bz,3,4,"ngx-dropzone-image-preview",2),o.\u0275\u0275template(2,Lz,3,4,"ngx-dropzone-video-preview",2),o.\u0275\u0275template(3,zz,3,3,"ngx-dropzone-preview",3),o.\u0275\u0275elementContainerEnd()),2&e){const t=n.$implicit,r=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.isType(t,"image")),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.isType(t,"video")),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!r.isType(t,"image")&&!r.isType(t,"video"))}}class bv{constructor(n){n&&(this.value=n.value?n.value:"",n.datasourceBinding&&"object"==typeof n.datasourceBinding&&(this.datasourceBinding=new Gt.ContentBinding(n.datasourceBinding)),n.datasourceOptions&&"object"==typeof n.datasourceOptions&&(this.datasourceOptions=new C0(n.datasourceOptions)),n.validation&&(this.validation=new bf(n.validation)))}}class Gz{constructor(n){n&&(this.valuesMapping=n.valuesMapping)}}let Oo=(()=>{class e{constructor(t,r,s,a){this.tokenizerService=t,this.datasourceContentHandler=r,this.panelResolver=s,this.attributeSerializer=a}resolveElementOptions(t,r){return(0,Be.of)(t).pipe((0,tt.w)(s=>{if(s.datasourceBinding&&s.datasourceBinding.id&&""!==s.datasourceBinding.id){const a=r.has("panes")?r.get("panes").find(l=>l.name===s.datasourceBinding.id):void 0;return this.panelResolver.dataPanes(r.get("panes")).pipe((0,tt.w)(l=>a?this.datasourceContentHandler.fetchDynamicData(a.settings,new Map([...r,["dataPanes",l]])):(0,Be.of)([])),(0,be.U)(l=>[s,l.results]))}return(0,Be.of)([s,[]])}),(0,be.U)(([s,a])=>[s,s.datasourceOptions&&""!==s.datasourceOptions.query?(0,na.JSONPath)({path:s.datasourceOptions.query,json:a}):a]),(0,tt.w)(([s,a])=>this.mapDataOptions(s,a)))}mapDataOptions(t,r){return(0,Be.of)([t,r]).pipe((0,be.U)(([s,a])=>[s,a,a?a.map(l=>this.tokenizerService.generateGenericTokens(l)):[]]),(0,be.U)(([s,a,l])=>l.map(u=>this.mapDataItem(s,u))))}mapDataItem(t,r){return new E0({value:this.tokenizerService.replaceTokens(`${t.datasourceOptions.valueMapping}`,r),label:this.tokenizerService.replaceTokens(`${t.datasourceOptions.labelMapping}`,r),dataItem:void 0})}hasDataOptions(t){return t.datasourceBinding&&t.datasourceBinding.id&&""!==t.datasourceBinding.id}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Gn),o.\u0275\u0275inject(Hg),o.\u0275\u0275inject(Wg),o.\u0275\u0275inject(Ct.AttributeSerializerService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Fo=(()=>{class e{constructor(t){this.tokenizerService=t,this.cachedResolvedContexts=[],this.scheduleResolution$=new M.x,this.scheduleResolutionSub=this.scheduleResolution$.pipe((0,ee.b)(({resolvedContext:r,index:s})=>{let a=new Map;if(r)for(const l in r)r[l]instanceof qa||(a=new Map([...a,...this.tokenizerService.generateGenericTokens(r[l],"_root"===l?"":l)]));this.cachedResolvedContexts[s].resolution$.next(a)})).subscribe()}resolveContexts({resolvedContext:t}){let r=this.cachedResolvedContexts.findIndex(({rContext:s})=>0===(0,Bg.getDiff)(s,t).length);return-1===r?(console.log("resolved context no cache",t),r=this.cachedResolvedContexts.length,this.cachedResolvedContexts.push({rContext:t,resolution$:new kg.t}),this.scheduleResolution$.next({resolvedContext:t,index:r})):console.log("resolved context cache hit",t),this.cachedResolvedContexts[r].resolution$.pipe((0,an.q)(1))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Gn))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),es=(()=>{class e{constructor(t,r,s,a,l,u){this.attributeSerializer=t,this.optionsResolver=r,this.tokenizerService=s,this.formsContextHelper=a,this.vpm=l,this.controlContainer=u,this.formControl=new d.NI(""),this.formControlValueChangesSub=this.formControl.valueChanges.pipe((0,ee.b)(p=>console.log("serialized form value",this.attributeSerializer.serialize(p,"value"))),(0,ee.b)(p=>this.controlContainer.control.get("settings").setValue([this.attributeSerializer.serialize(p,"value")]))).subscribe(),this.formSettings$=new m.X(void 0),this.settings$=new m.X([]),this.options$=new m.X([]),this.init$=new M.x,this.afterViewInit$=new M.x,this.panes$=new m.X([]),this.originPanes$=new m.X([]),this.contexts$=new m.X([]),this.resolvedContext$=new m.X(void 0),this.value$=new M.x,this.settingsSub=this.settings$.pipe((0,be.U)(p=>p?this.settingsToObject(this.attributeSerializer.deserializeAsObject(p)):void 0),(0,ee.b)(p=>this.formSettings$.next(p))).subscribe(),this.loadOptionsSub=(0,Bn.a)([this.formSettings$,this.panes$,this.originPanes$,this.contexts$,this.init$]).pipe((0,be.U)(([p,h,S,G])=>({settings:p,metadata:new Map([["panes",[...h&&Array.isArray(h)?h:[],...S&&Array.isArray(S)?S:[]]],["contexts",G]])})),(0,tt.w)(({settings:p,metadata:h})=>this.optionsResolver.resolveElementOptions(p,h)),(0,ee.b)(p=>this.options$.next(p))).subscribe(),this.renderContentSub=(0,Bn.a)([this.formSettings$,this.resolvedContext$,this.afterViewInit$]).pipe((0,be.U)(([p,h])=>({settings:p,resolvedContext:h})),(0,tt.w)(({settings:p,resolvedContext:h})=>this.formsContextHelper.resolveContexts({resolvedContext:h}).pipe((0,be.U)(S=>({settings:p,tokens:S})))),(0,tt.w)(({settings:p,tokens:h})=>(0,pn.D)(p.validation&&p.validation.validators?p.validation.validators.map(S=>this.vpm.getPlugin(S.validator).pipe((0,tt.w)(G=>G.builder({v:S,serialized:!1}).pipe((0,be.U)(W=>({v:S,vf:W})))))):[]).pipe((0,be.U)(S=>({settings:p,tokens:h,validators:S})),(0,zr.d)({settings:p,tokens:h,validators:[]}))),(0,tt.w)(({settings:p,tokens:h,validators:S})=>(0,pn.D)(p.validation&&p.validation.validators?p.validation.validators.map(G=>this.vpm.getPlugin(G.validator).pipe((0,tt.w)(W=>W.builder({v:G,serialized:!0}).pipe((0,be.U)(J=>({v:G,vf:J})))))):[]).pipe((0,be.U)(G=>({settings:p,tokens:h,validators:S,validatorsSerialized:G})),(0,zr.d)({settings:p,tokens:h,validators:S,validatorsSerialized:[]}))),(0,ee.b)(({settings:p,tokens:h,validators:S,validatorsSerialized:G})=>{if(this.formControl.setAsyncValidators(S.map(({vf:W})=>W)),this.controlContainer.control.get("settings").setAsyncValidators(G.map(({vf:W})=>W)),this.formControl.updateValueAndValidity(),this.controlContainer.control.updateValueAndValidity(),void 0!==h&&(this.tokens=h),p.value&&null!==p.value&&""!==p.value){(-1!==p.value.indexOf(".$i.")||-1!==p.value.indexOf(".$j.")||-1!==p.value.indexOf(".$k."))&&console.log(p.value,this.ancestory);const W=p.value.split("$i"),J=W.map((De,Je)=>this.ancestory[1*Je+(3+(0===Je?0:3))]),ve=W.reduce((De,Je,et)=>[...De,0===et?"":et-1<J.length?`${J[et-1]}`:"",Je],[]).join("");console.log("path",ve);const Ne=this.replaceTokens(ve);this.formControl.setValue(Ne);const Re=this.tokenizerService.discoverTokens(Ne,!0);if(0!==Re.length)if(Re[0].trim().lastIndexOf(".id")===Re[0].trim().length-3){const De=zn();this.formControl.setValue(De),this.value$.next(De)}else{const De=Array.from(h).filter(([Je])=>0===Je.indexOf(ve.substr(1,ve.length-2)));if(0!==De.length){const Je=De.reduce((et,[gt,St])=>({...et,[gt.substr(gt.lastIndexOf(".")+1)]:St}),{});this.formControl.setValue(Je),this.value$.next(Je)}else{const Je=this.tokenizerService.replaceTokens(p.value,new Map(Array.from(Re).map(et=>[et,""])));this.formControl.setValue(Je),this.value$.next(Je)}}else this.value$.next(Ne)}else this.formControl.setValue("")}),(0,an.q)(1)).subscribe()}set settings(t){this.settings$.next(t)}set panes(t){this.panes$.next(t)}set originPanes(t){this.originPanes$.next(t)}set contexts(t){this.contexts$.next(t)}set resolvedContext(t){this.resolvedContext$.next(t)}ngOnInit(){this.init$.next(void 0)}ngAfterViewInit(){this.afterViewInit$.next(void 0)}settingsToObject(t){return new bv(t)}replaceTokens(t){return void 0!==this.tokens&&this.tokens.forEach((r,s)=>{t=t.split(`[${s}]`).join(`${r}`)}),t}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(Oo),o.\u0275\u0275directiveInject(Gn),o.\u0275\u0275directiveInject(Fo),o.\u0275\u0275directiveInject(to),o.\u0275\u0275directiveInject(d.gN))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["","druid-forms-form-element-base",""]],inputs:{tokens:"tokens",settings:"settings",panes:"panes",originPanes:"originPanes",contexts:"contexts",resolvedContext:"resolvedContext",ancestory:"ancestory"}}),e})(),Vz=(()=>{class e extends es{constructor(t,r,s,a,l,u){super(t,r,s,a,l,u)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(Oo),o.\u0275\u0275directiveInject(Gn),o.\u0275\u0275directiveInject(Fo),o.\u0275\u0275directiveInject(to),o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-forms-form-input"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:3,vars:2,consts:[["matInput","",3,"formControl"],[4,"ngIf"],[3,"validators","errors","resolvedContext"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"mat-form-field"),o.\u0275\u0275element(1,"input",0),o.\u0275\u0275template(2,Oz,2,3,"mat-error",1),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("formControl",r.formControl),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.formControl.invalid))},directives:[Yt.KE,Tz,sr.Nt,d.Fj,d.JJ,d.oH,C.NgIf,Yt.TO],styles:[""]}),e})(),$z=(()=>{class e extends es{constructor(t,r,s,a,l,u){super(t,r,s,a,l,u)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(Oo),o.\u0275\u0275directiveInject(Gn),o.\u0275\u0275directiveInject(Fo),o.\u0275\u0275directiveInject(to),o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-forms-form-select"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:4,vars:4,consts:[[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"mat-form-field"),o.\u0275\u0275elementStart(1,"mat-select",0),o.\u0275\u0275template(2,Fz,2,2,"mat-option",1),o.\u0275\u0275pipe(3,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("formControl",r.formControl),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(3,2,r.options$)))},directives:[Yt.KE,oi.gD,cr.ey,d.JJ,d.oH,C.NgForOf],pipes:[C.AsyncPipe],styles:[""]}),e})(),Hz=(()=>{class e{constructor(t,r,s){this.attributeSerializer=t,this.fb=r,this.controlContainer=s,this.panes=[],this.originMappings=[],this.ancestory=[],this.add$=new M.x,this.remove$=new M.x,this.panes$=new m.X([]),this.settings$=new M.x,this.resolvedContext$=new M.x,this.panel$=new M.x,this.afterViewInit$=new M.x,this.addSub=this.add$.pipe((0,be.U)(()=>new dr(this.panes[0])),(0,ee.b)(()=>this.panesFormArray.push(this.fb.control(""))),(0,ee.b)(a=>this.panes.push(a))).subscribe(),this.removeSub=this.remove$.pipe((0,ee.b)(a=>this.panesFormArray.removeAt(a)),(0,ee.b)(a=>this.panes.splice(a,1))).subscribe(),this.populateDefaultValues=(0,Bn.a)([this.settings$.pipe((0,be.U)(a=>a?new Gz(this.attributeSerializer.deserializeAsObject(a)):void 0)),this.resolvedContext$,this.panel$,this.afterViewInit$]).pipe((0,be.U)(([a,l,u])=>({s:a,rc:l,p:u})),(0,ee.b)(({s:a})=>console.log(a.valuesMapping,this.ancestory)),(0,be.U)(({s:a,rc:l,p:u})=>{if(l&&a&&a.valuesMapping&&""!==a.valuesMapping.trim()){const p=a.valuesMapping.split("[$i]"),h=p.map((W,J)=>this.ancestory[1*J+3]),S=p.reduce((W,J,ve)=>[...W,0===ve?"":ve-1<h.length?`[${h[ve-1]}]`:"",J],[]).join("");return console.log("path",S),{items:(0,na.JSONPath)({path:`$.${S}.*`,json:l}),s:a,p:u}}return{items:[],p:u}}),(0,ee.b)(({items:a})=>{const l=a.length-this.panesFormArray.length;for(let u=0;u<l;u++)this.add$.next(void 0)})).subscribe()}set settings(t){this.settings$.next(t)}set resolvedContext(t){this.resolvedContext$.next(t)}set panel(t){this.panel$.next(t)}get panesFormArray(){return this.controlContainer.control.get("panes")}ngOnInit(){}ngAfterViewInit(){this.afterViewInit$.next(void 0)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-form-section"]],inputs:{panes:"panes",originPanes:"originPanes",originMappings:"originMappings",ancestory:"ancestory",settings:"settings",resolvedContext:"resolvedContext",panel:"panel"},decls:5,vars:2,consts:[[3,"formGroup"],["formArrayName","panes"],[4,"ngFor","ngForOf"],["type","button",3,"click"],[3,"formControlName","pluginName","settings","name","label","contexts","panes","resolvedContext","indexPosition","ancestory"]],template:function(t,r){1&t&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275elementContainerStart(1,1),o.\u0275\u0275template(2,Dz,4,10,"div",2),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementContainerEnd(),o.\u0275\u0275elementStart(3,"button",3),o.\u0275\u0275listener("click",function(){return r.add$.next(void 0)}),o.\u0275\u0275text(4,"Add Item"),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.controlContainer.control),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",r.panes))},directives:[vf,d.JL,d.sg,d.CE,C.NgForOf,d.JJ,d.u],styles:[""]}),e})(),qz=(()=>{class e extends es{constructor(t,r,s,a,l,u){super(t,r,s,a,l,u),this.cols=20,this.rows=20}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(Oo),o.\u0275\u0275directiveInject(Gn),o.\u0275\u0275directiveInject(Fo),o.\u0275\u0275directiveInject(to),o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-forms-form-textarea"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:1,vars:3,consts:[[3,"formControl","cols","rows"]],template:function(t,r){1&t&&o.\u0275\u0275element(0,"textarea",0),2&t&&o.\u0275\u0275property("formControl",r.formControl)("cols",r.cols)("rows",r.rows)},directives:[d.Fj,d.JJ,d.oH],styles:[""]}),e})(),Kz=(()=>{class e{constructor(t){this.attributeSerializer=t}handleFile(t){return(0,Be.of)([])}handlesType(t){return!1}implementsRendererOverride(){return!1}hasRendererOverride(t){return(0,Be.of)(!1)}isDynamic(t){return!1}isData(t){return!1}getBindings(t,r,s){return"pane"===r?this.toObject(t).pipe((0,tt.w)(a=>Xn(()=>a.datasourceBinding&&a.datasourceBinding.id&&null!==a.datasourceBinding.id,(0,Be.of)([a.datasourceBinding]),(0,Be.of)([])))):(0,Be.of)([])}fetchDynamicData(t,r){return(0,Be.of)(new Rn)}buildDynamicItems(t,r){return(0,Be.of)([])}toObject(t){return(0,Be.of)(new bv(this.attributeSerializer.deserializeAsObject(t)))}buildSettings(t){return this.attributeSerializer.serialize(t,"root").attributes}stateDefinition(t){return(0,Be.of)({autocomplete:{input:""},value:void 0})}editorOptions(t){return(0,Be.of)(new Gt.ContentPluginEditorOptions)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Ct.AttributeSerializerService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Sw=(()=>{class e extends Kz{}return e.\u0275fac=function(){let n;return function(r){return(n||(n=o.\u0275\u0275getInheritedFactory(e)))(r||e)}}(),e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),ts=(()=>{class e{constructor(t,r,s,a,l){this.data=t,this.dialogRef=r,this.fb=s,this.handler=a,this.attributeSerializer=l,this.datasourceOptions=Tg,this.validation=new bf({validators:[]}),this.bindableOptions=[],this.formGroup=this.fb.group({value:this.fb.control(""),datasourceOptions:this.fb.control(""),validation:this.fb.control(""),datasourceBinding:this.fb.group({id:this.fb.control(""),type:this.fb.control("pane")})}),this.paneIndex=t.paneIndex,this.pane=t.pane}get paneGroup(){return this.data.panelFormGroup.get("panes").at(this.paneIndex)}ngOnInit(){this.data.pane?this.handler.toObject(this.data.pane.settings).subscribe(t=>{this.formGroup.get("value").setValue(t.value),this.datasourceOptions=t.datasourceOptions?t.datasourceOptions:Tg,this.validation=new bf(t.validation?t.validation:{validators:[]}),this.formGroup.get("datasourceBinding").get("id").setValue(t.datasourceBinding&&t.datasourceBinding.id&&null!==t.datasourceBinding.id?t.datasourceBinding.id:"")}):(this.data.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:this.data.plugin.id,name:new d.NI(""),label:new d.NI(""),rule:new d.NI(""),settings:this.fb.array([])})),this.paneIndex=this.data.panelFormGroup.get("panes").length-1,this.pane=new dr(this.data.panelFormGroup.get("panes").at(this.paneIndex).value)),this.bindableOptions=this.data.panelFormGroup.get("panes").controls.reduce((t,r)=>r.get("name").value?[...t,r.get("name").value]:[...t],[])}submit(){console.log(this.formGroup.value);const t=new bv(this.formGroup.value);console.log(t),this.paneGroup.get("settings").clear(),this.handler.buildSettings(t).map(s=>this.attributeSerializer.convertToGroup(s)).forEach(s=>this.paneGroup.get("settings").push(s)),this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Sw),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-forms-form-element-editor"]],inputs:{bindableOptions:"bindableOptions"},decls:17,vars:4,consts:[[3,"formGroup","ngSubmit"],["fxLayout","column"],["matInput","","formControlName","value"],["formGroupName","datasourceBinding"],["required","","formControlName","id"],[3,"value",4,"ngFor","ngForOf"],["formControlName","datasourceOptions",3,"datasourceOptions"],["formControlName","validation",3,"validation"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close",""],[3,"value"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return r.submit()}),o.\u0275\u0275elementStart(1,"mat-dialog-content",1),o.\u0275\u0275elementStart(2,"div"),o.\u0275\u0275elementStart(3,"mat-form-field"),o.\u0275\u0275elementStart(4,"mat-label"),o.\u0275\u0275text(5,"Value"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(6,"input",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"mat-form-field",3),o.\u0275\u0275elementStart(8,"mat-label"),o.\u0275\u0275text(9,"Datasource"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(10,"mat-select",4),o.\u0275\u0275template(11,Mz,2,2,"mat-option",5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(12,"classifieds-ui-datasource-options",6),o.\u0275\u0275element(13,"druid-ordain-validation-editor",7),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(14,"mat-dialog-actions"),o.\u0275\u0275elementStart(15,"button",8),o.\u0275\u0275text(16,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.formGroup),o.\u0275\u0275advance(11),o.\u0275\u0275property("ngForOf",r.bindableOptions),o.\u0275\u0275advance(1),o.\u0275\u0275property("datasourceOptions",r.datasourceOptions),o.\u0275\u0275advance(1),o.\u0275\u0275property("validation",r.validation))},directives:[Yt.KE,oi.gD,cr.ey,pF,Iz,Dr.lW,d._Y,d.JL,d.sg,Dt.xY,Yt.hX,sr.Nt,d.Fj,d.JJ,d.u,d.x0,d.Q7,C.NgForOf,Dt.H8,Dt.ZT],styles:[""]}),e})(),Xz=(()=>{class e extends es{constructor(t,r,s,a,l,u){super(t,r,s,a,l,u)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(Oo),o.\u0275\u0275directiveInject(Gn),o.\u0275\u0275directiveInject(Fo),o.\u0275\u0275directiveInject(to),o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-forms-form-radiogroup"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:3,vars:4,consts:[[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"mat-radio-group",0),o.\u0275\u0275template(1,Nz,2,2,"mat-radio-button",1),o.\u0275\u0275pipe(2,"async"),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formControl",r.formControl),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(2,2,r.options$)))},directives:[jh.U0,jh.VQ,d.JJ,d.oH,C.NgForOf],pipes:[C.AsyncPipe],styles:[""]}),e})(),Wz=(()=>{class e extends es{constructor(t,r,s,a,l,u){super(t,r,s,a,l,u)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(Oo),o.\u0275\u0275directiveInject(Gn),o.\u0275\u0275directiveInject(Fo),o.\u0275\u0275directiveInject(to),o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-forms-form-slider"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"formControl"]],template:function(t,r){1&t&&o.\u0275\u0275element(0,"mat-slider",0),2&t&&o.\u0275\u0275property("formControl",r.formControl)},directives:[Rz.pH,d.JJ,d.oH],styles:[""]}),e})(),Jz=(()=>{class e extends es{constructor(t,r,s,a,l,u){super(t,r,s,a,l,u)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(Oo),o.\u0275\u0275directiveInject(Gn),o.\u0275\u0275directiveInject(Fo),o.\u0275\u0275directiveInject(to),o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-forms-form-toggle"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:2,vars:1,consts:[[3,"formControl"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"mat-slide-toggle",0),o.\u0275\u0275text(1,"Toggle Label"),o.\u0275\u0275elementEnd()),2&t&&o.\u0275\u0275property("formControl",r.formControl)},directives:[kz.Rr,d.JJ,d.oH],styles:[""]}),e})(),Qz=(()=>{class e extends es{constructor(t,r,s,a,l,u){super(t,r,s,a,l,u)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(Oo),o.\u0275\u0275directiveInject(Gn),o.\u0275\u0275directiveInject(Fo),o.\u0275\u0275directiveInject(to),o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-forms-form-checkbox"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:1,vars:1,consts:[[3,"formControl"]],template:function(t,r){1&t&&o.\u0275\u0275element(0,"mat-checkbox",0),2&t&&o.\u0275\u0275property("formControl",r.formControl)},directives:[Hd.oG,d.JJ,d.oH],styles:[""]}),e})(),Yz=(()=>{class e extends es{constructor(t,r,s,a,l,u){super(t,r,s,a,l,u)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(Oo),o.\u0275\u0275directiveInject(Gn),o.\u0275\u0275directiveInject(Fo),o.\u0275\u0275directiveInject(to),o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-forms-form-datepicker"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:7,vars:3,consts:[["appearance","fill"],["matInput","",3,"matDatepicker","formControl"],["matSuffix","",3,"for"],["picker",""]],template:function(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-form-field",0),o.\u0275\u0275elementStart(1,"mat-label"),o.\u0275\u0275text(2,"Choose a date"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(3,"input",1),o.\u0275\u0275element(4,"mat-datepicker-toggle",2),o.\u0275\u0275element(5,"mat-datepicker",null,3),o.\u0275\u0275elementEnd()),2&t){const s=o.\u0275\u0275reference(6);o.\u0275\u0275advance(3),o.\u0275\u0275property("matDatepicker",s)("formControl",r.formControl),o.\u0275\u0275advance(1),o.\u0275\u0275property("for",s)}},directives:[Yt.KE,_v.nW,_v.Mq,Yt.hX,sr.Nt,_v.hl,d.Fj,d.JJ,d.oH,Yt.R9],styles:[""]}),e})(),Zz=(()=>{class e extends es{constructor(t,r,s,a,l,u){super(t,r,s,a,l,u),this.proxyControl=new d.NI(""),this.optionSelected$=new M.x,this.proxyControlValueChangesSub=this.proxyControl.valueChanges.pipe((0,qn.b)(1e3),(0,kl.x)(),(0,ao.M)((0,Bn.a)([this.formSettings$,this.panes$,this.originPanes$,this.contexts$]).pipe((0,be.U)(([p,h,S,G])=>({settings:p,panes:h,originPanes:S,contexts:G})))),(0,be.U)(([p,{settings:h,panes:S,originPanes:G,contexts:W}])=>({term:p,settings:h,metadata:new Map([["panes",[...S&&Array.isArray(S)?S:[],...G&&Array.isArray(G)?G:[]]],["contexts",W],["inputparams",new Map([["term",new si({flags:[],mapping:new f0({value:p,testValue:p,type:"static",context:void 0})})]])]])})),(0,tt.w)(({settings:p,metadata:h})=>this.optionsResolver.resolveElementOptions(p,h)),(0,ee.b)(p=>this.options$.next(p))).subscribe(),this.optionSelectedSub=this.optionSelected$.pipe((0,ee.b)(p=>this.formControl.setValue(p.option&&p.option.value?p.option.value.value:""))).subscribe(),this.displayAuto=p=>p.label}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(Oo),o.\u0275\u0275directiveInject(Gn),o.\u0275\u0275directiveInject(Fo),o.\u0275\u0275directiveInject(to),o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-forms-form-autocomplete"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:8,vars:6,consts:[["matInput","",3,"matAutocomplete","formControl"],[3,"displayWith","optionSelected"],["autocomplete","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,r){if(1&t&&(o.\u0275\u0275elementStart(0,"mat-form-field"),o.\u0275\u0275elementStart(1,"mat-label"),o.\u0275\u0275text(2,"Autocomplete"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(3,"input",0),o.\u0275\u0275elementStart(4,"mat-autocomplete",1,2),o.\u0275\u0275listener("optionSelected",function(a){return r.optionSelected$.next(a)}),o.\u0275\u0275template(6,jz,2,2,"mat-option",3),o.\u0275\u0275pipe(7,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t){const s=o.\u0275\u0275reference(5);o.\u0275\u0275advance(3),o.\u0275\u0275property("matAutocomplete",s)("formControl",r.proxyControl),o.\u0275\u0275advance(1),o.\u0275\u0275property("displayWith",r.displayAuto),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngForOf",o.\u0275\u0275pipeBind1(7,4,r.options$))}},directives:[Yt.KE,Bh.XC,cr.ey,Yt.hX,sr.Nt,Bh.ZL,d.Fj,d.JJ,d.oH,C.NgForOf],pipes:[C.AsyncPipe],styles:[""]}),e})(),eU=(()=>{class e extends es{constructor(t,r,s,a,l,u,p){super(t,r,a,l,u,p),this.files=[],this.select$=new M.x,this.selectSub=this.select$.pipe((0,ee.b)(h=>console.log(h)),(0,Vo.z)(h=>this.filesService.bulkUpload({files:[h.addedFiles[0]]}).pipe((0,be.U)(S=>({mfs:S,e:h})))),(0,ee.b)(({mfs:h})=>this.formControl.setValue(h[0])),(0,ee.b)(({e:h})=>this.files.push(...h.addedFiles))).subscribe(),this.valueSub=this.value$.pipe((0,U.h)(h=>"object"==typeof h),(0,be.U)(h=>new bg(h)),(0,ee.b)(h=>{console.log("populate value",h)}),(0,tt.w)(h=>this.filesService.convertToFiles([h])),(0,ee.b)(h=>{console.log("populate as file",h),this.files=h})).subscribe(),this.filesService=s}onSelect(t){this.select$.next(t)}onRemove(t){console.log(t),this.formControl.setValue(""),this.files.splice(this.files.indexOf(t),1)}isType(t,r){switch(r){case"image":return this.filesService.isImage({file:t});case"video":return this.filesService.isVideo({file:t});default:return!1}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(Oo),o.\u0275\u0275directiveInject(rh),o.\u0275\u0275directiveInject(Gn),o.\u0275\u0275directiveInject(Fo),o.\u0275\u0275directiveInject(to),o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-forms-form-media"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:4,vars:1,consts:[[3,"change"],[4,"ngFor","ngForOf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed",4,"ngIf"],[3,"removable","removed",4,"ngIf"],["ngProjectAs","ngx-dropzone-preview",5,["ngx-dropzone-preview"],3,"file","removable","removed"],[3,"removable","removed"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"ngx-dropzone",0),o.\u0275\u0275listener("change",function(a){return r.onSelect(a)}),o.\u0275\u0275elementStart(1,"ngx-dropzone-label"),o.\u0275\u0275text(2,"Drop it, baby!"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(3,Uz,4,3,"ng-container",1),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275advance(3),o.\u0275\u0275property("ngForOf",r.files))},directives:[wh,xb,dM,ac,wb,C.NgForOf,C.NgIf],styles:[""]}),e})(),tU=(()=>{class e extends es{constructor(t,r,s,a,l,u){super(t,r,s,a,l,u)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService),o.\u0275\u0275directiveInject(Oo),o.\u0275\u0275directiveInject(Gn),o.\u0275\u0275directiveInject(Fo),o.\u0275\u0275directiveInject(to),o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-forms-form-hidden"]],features:[o.\u0275\u0275InheritDefinitionFeature],decls:0,vars:0,template:function(t,r){},encapsulation:2}),e})(),nU=(()=>{class e{constructor(t,r,s,a){this.data=t,this.dialogRef=r,this.fb=s,this.attributeSerializer=a,this.contexts=[],this.formGroup=this.fb.group({valuesMapping:this.fb.control("")})}ngOnInit(){}submit(){this.data.panelFormGroup.get("settings").clear(),this.attributeSerializer.serialize(this.formGroup.value,"root").attributes.forEach(t=>{console.log("formly repeating editor form"),console.log(this.attributeSerializer.convertToGroup(t)),this.data.panelFormGroup.get("settings").push(this.attributeSerializer.convertToGroup(t))})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-form-section-editor"]],decls:8,vars:2,consts:[[3,"formGroup","ngSubmit"],["matInput","","formControlName","valuesMapping"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close","",3,"disabled"]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return r.submit()}),o.\u0275\u0275elementStart(1,"div"),o.\u0275\u0275elementStart(2,"mat-form-field"),o.\u0275\u0275elementStart(3,"mat-label"),o.\u0275\u0275text(4,"Values Mapping"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(5,"input",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"button",2),o.\u0275\u0275text(7,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.formGroup),o.\u0275\u0275advance(6),o.\u0275\u0275property("disabled",!r.formGroup.valid))},directives:[Yt.KE,Dr.lW,d._Y,d.JL,d.sg,Yt.hX,sr.Nt,d.Fj,d.JJ,d.u,Dt.ZT],styles:[""]}),e})();const rU=({handler:e})=>new Gt.ContentPlugin({id:"form_input",title:"Form Input",selectionComponent:void 0,editorComponent:ts,renderComponent:Vz,handler:e}),iU=({handler:e})=>new Gt.ContentPlugin({id:"form_select",title:"Form Select",selectionComponent:void 0,editorComponent:ts,renderComponent:$z,handler:e}),oU=({handler:e})=>new Gt.ContentPlugin({id:"form_radiogroup",title:"Form Radiogroup",selectionComponent:void 0,editorComponent:ts,renderComponent:Xz,handler:e}),sU=({handler:e})=>new Gt.ContentPlugin({id:"form_textarea",title:"Form Textarea",selectionComponent:void 0,editorComponent:ts,renderComponent:qz,handler:e}),aU=({handler:e})=>new Gt.ContentPlugin({id:"form_slider",title:"Form Slider",selectionComponent:void 0,editorComponent:ts,renderComponent:Wz,handler:e}),lU=({handler:e})=>new Gt.ContentPlugin({id:"form_toggle",title:"Form Toggle",selectionComponent:void 0,editorComponent:ts,renderComponent:Jz,handler:e}),uU=({handler:e})=>new Gt.ContentPlugin({id:"form_checkbox",title:"Form Checkbox",selectionComponent:void 0,editorComponent:ts,renderComponent:Qz,handler:e}),cU=({handler:e})=>new Gt.ContentPlugin({id:"form_datepicker",title:"Form Datepicker",selectionComponent:void 0,editorComponent:ts,renderComponent:Yz,handler:e}),dU=({handler:e})=>new Gt.ContentPlugin({id:"form_autocomplete",title:"Form Autocomplete",selectionComponent:void 0,editorComponent:ts,renderComponent:Zz,handler:e}),fU=({handler:e})=>new Gt.ContentPlugin({id:"form_media",title:"Form Media",selectionComponent:void 0,editorComponent:ts,renderComponent:eU,handler:e}),pU=({handler:e})=>new Gt.ContentPlugin({id:"form_hidden",title:"Form Hidden",selectionComponent:void 0,editorComponent:ts,renderComponent:tU,handler:e});let mU=(()=>{class e{constructor(t,r,s){[rU({handler:s}),iU({handler:s}),sU({handler:s}),oU({handler:s}),aU({handler:s}),lU({handler:s}),uU({handler:s}),cU({handler:s}),dU({handler:s}),fU({handler:s}),pU({handler:s})].forEach(a=>t.register(a)),[new yh({id:"form_section",name:"form_section",title:"Form Section",editorComponent:nU,renderComponent:Hz})].forEach(a=>r.register(a))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Gt.ContentPluginManager),o.\u0275\u0275inject(ic),o.\u0275\u0275inject(Sw))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[C.CommonModule,d.u5,d.UX,ri.MaterialModule,dv,Dl,Ch,xw]]}),e})();function gU(e){const n={};for(const t of e.keys()){const r=e.getAll(t);null!==r&&(n[t]=r)}return n}let Ew=(()=>{class e{constructor(t,r){this.transferState=r,this.isCacheActive=!0,t.isStable.pipe((0,U.h)(s=>s),(0,an.q)(1)).subscribe(()=>{this.isCacheActive=!1})}invalidateCacheEntry(t){Object.keys(this.transferState.store).forEach(r=>r.includes(t)?this.transferState.remove((0,I.Cb)(r)):null)}makeCacheKey(t,r,s){const a=s.keys().sort().map(u=>`${u}=${s.getAll(u)}`).join("&");return(0,I.Cb)(("GET"===t?"G.":"H.")+r+"?"+a)}intercept(t,r){if("GET"!==t.method&&"HEAD"!==t.method&&(this.isCacheActive=!1,this.invalidateCacheEntry(t.url)),!this.isCacheActive)return r.handle(t);const s=this.makeCacheKey(t.method,t.url,t.params);if(this.transferState.hasKey(s)){const a=this.transferState.get(s,{});return(0,Be.of)(new F.HttpResponse({body:a.body,headers:new F.HttpHeaders(a.headers),status:a.status,statusText:a.statusText,url:a.url}))}return r.handle(t).pipe((0,ee.b)(l=>{l instanceof F.HttpResponse&&this.transferState.set(s,{body:l.body,headers:gU(l.headers),status:l.status,statusText:l.statusText,url:l.url||""})}))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(o.ApplicationRef),o.\u0275\u0275inject(I.ki))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),vU=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({providers:[Ew,{provide:F.HTTP_INTERCEPTORS,useExisting:Ew,multi:!0}],imports:[[I.Cu]]}),e})();const yU=new o.InjectionToken("AlienaliasSettings");class wU{constructor(n){n&&(this.openSearchDomain=n.openSearchDomain)}}var Aw=x(1291);const EU=["mfeReactComponent"];let AU=(()=>{class e{constructor(){}ngOnChanges(t){this.render()}ngAfterViewInit(){this.render()}ngOnDestroy(){Aw.unmountComponentAtNode(this.containerRef.nativeElement)}render(){const t=this.component();Aw.render(t,this.containerRef.nativeElement)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-mfe-react"]],viewQuery:function(t,r){if(1&t&&o.\u0275\u0275viewQuery(EU,5),2&t){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.containerRef=s.first)}},inputs:{component:"component"},features:[o.\u0275\u0275NgOnChangesFeature],decls:2,vars:0,consts:[["mfeReactComponent",""]],template:function(t,r){1&t&&o.\u0275\u0275element(0,"span",null,0)},encapsulation:2}),e})();const PU=["appContainer"];class wv{constructor(n){n&&(this.type=n.type&&""!==n.type?n.type:"module",this.remoteEntry=n.remoteEntry,this.componentName=n.componentName,this.exposedModule=n.exposedModule,this.remoteName=n.remoteName&&""!==n.remoteName?n.remoteName:void 0)}}let Pw=(()=>{class e{constructor(t){this.attributeSerializer=t}handleFile(t){return(0,Be.of)([])}handlesType(t){return!1}implementsRendererOverride(){return!1}hasRendererOverride(t){return(0,Be.of)(!1)}isDynamic(t){return!1}isData(t){return!1}getBindings(t,r,s){return(0,Be.of)([])}fetchDynamicData(t,r){return(0,Be.of)(new Rn)}buildDynamicItems(t,r){return(0,Be.of)([])}toObject(t){return(0,Be.of)(new wv(this.attributeSerializer.deserializeAsObject(t)))}buildSettings(t){return this.attributeSerializer.serialize(t,"root").attributes}stateDefinition(t){return(0,Be.of)({autocomplete:{input:""},value:void 0})}editorOptions(t){return(0,Be.of)(new Gt.ContentPluginEditorOptions)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Ct.AttributeSerializerService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),IU=(()=>{class e{constructor(t,r,s,a,l){this.data=t,this.dialogRef=r,this.fb=s,this.handler=a,this.attributeSerializer=l,this.bindableOptions=[],this.formGroup=this.fb.group({type:this.fb.control("module",[d.kI.required]),remoteEntry:this.fb.control("",[d.kI.required]),exposedModule:this.fb.control("",[d.kI.required]),componentName:this.fb.control("",[d.kI.required]),remoteName:this.fb.control("")}),this.paneIndex=t.paneIndex,this.pane=t.pane}get paneGroup(){return this.data.panelFormGroup.get("panes").at(this.paneIndex)}ngOnInit(){this.data.pane?this.handler.toObject(this.data.pane.settings).subscribe(t=>{this.formGroup.get("type").setValue(t.type&&""!==t.type?t.type:"module"),this.formGroup.get("remoteEntry").setValue(t.remoteEntry),this.formGroup.get("exposedModule").setValue(t.exposedModule),this.formGroup.get("componentName").setValue(t.componentName),this.formGroup.get("remoteName").setValue(t.remoteName)}):(this.data.panelFormGroup.get("panes").push(this.fb.group({contentPlugin:this.data.plugin.id,name:new d.NI(""),label:new d.NI(""),rule:new d.NI(""),settings:this.fb.array([])})),this.paneIndex=this.data.panelFormGroup.get("panes").length-1,this.pane=new dr(this.data.panelFormGroup.get("panes").at(this.paneIndex).value)),this.bindableOptions=this.data.panelFormGroup.get("panes").controls.reduce((t,r)=>r.get("name").value?[...t,r.get("name").value]:[...t],[])}submit(){console.log(this.formGroup.value);const t=new wv(this.formGroup.value);console.log(t),this.paneGroup.get("settings").clear(),this.handler.buildSettings(t).map(s=>this.attributeSerializer.convertToGroup(s)).forEach(s=>this.paneGroup.get("settings").push(s)),this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Dt.WI),o.\u0275\u0275directiveInject(Dt.so),o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(Pw),o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-outsider-outside-app-editor"]],inputs:{bindableOptions:"bindableOptions"},decls:32,vars:1,consts:[[3,"formGroup","ngSubmit"],["formControlName","type","required",""],["value","module"],["value","script"],["matInput","","formControlName","remoteEntry","required",""],["matInput","","formControlName","exposedModule","required",""],["matInput","","formControlName","componentName","required",""],["matInput","","formControlName","remoteName"],["type","submit","mat-raised-button","","color","primary","mat-dialog-close",""]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"form",0),o.\u0275\u0275listener("ngSubmit",function(){return r.submit()}),o.\u0275\u0275elementStart(1,"div"),o.\u0275\u0275elementStart(2,"mat-form-field"),o.\u0275\u0275elementStart(3,"mat-label"),o.\u0275\u0275text(4,"Remote Entry"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"mat-select",1),o.\u0275\u0275elementStart(6,"mat-option",2),o.\u0275\u0275text(7,"Module"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(8,"mat-option",3),o.\u0275\u0275text(9,"Script"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(10,"div"),o.\u0275\u0275elementStart(11,"mat-form-field"),o.\u0275\u0275elementStart(12,"mat-label"),o.\u0275\u0275text(13,"Remote Entry"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(14,"input",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(15,"div"),o.\u0275\u0275elementStart(16,"mat-form-field"),o.\u0275\u0275elementStart(17,"mat-label"),o.\u0275\u0275text(18,"Exposed Module"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(19,"input",5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(20,"div"),o.\u0275\u0275elementStart(21,"mat-form-field"),o.\u0275\u0275elementStart(22,"mat-label"),o.\u0275\u0275text(23,"Component Name"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(24,"input",6),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(25,"div"),o.\u0275\u0275elementStart(26,"mat-form-field"),o.\u0275\u0275elementStart(27,"mat-label"),o.\u0275\u0275text(28,"Remote Name"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(29,"input",7),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(30,"button",8),o.\u0275\u0275text(31,"Save"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&o.\u0275\u0275property("formGroup",r.formGroup)},directives:[Yt.KE,oi.gD,cr.ey,Dr.lW,d._Y,d.JL,d.sg,Yt.hX,d.JJ,d.u,d.Q7,sr.Nt,d.Fj,Dt.ZT],styles:[""]}),e})(),TU=(()=>{class e{constructor(t){this.attributeSerializer=t,this.objectSettings$=new m.X(void 0),this.contexts$=new m.X([]),this.settings$=new m.X([]),this.settingsSub=this.settings$.pipe((0,be.U)(r=>r?new wv(this.attributeSerializer.deserializeAsObject(r)):void 0),(0,ee.b)(r=>this.objectSettings$.next(r))).subscribe(),this.renderAppSub=this.objectSettings$.pipe((0,gf.T)(1),(0,tt.w)(r=>new v.y(s=>{dc(r.type&&"script"!==r.type?{type:"module",remoteEntry:r.remoteEntry,exposedModule:r.exposedModule}:{type:"script",remoteEntry:r.remoteEntry,exposedModule:r.exposedModule,remoteName:r.remoteName}).then(a=>{s.next(a[r.componentName&&""!==r.componentName?r.componentName:"default"]),s.complete()})}).pipe((0,be.U)(s=>({s:r,c:s})))),(0,ee.b)(({s:r,c:s})=>{this.viewContainer.clear(),r.type&&"script"!==r.type?this.viewContainer.createComponent(s):this.viewContainer.createComponent(AU).instance.component=s})).subscribe()}set settings(t){this.settings$.next(t)}set contexts(t){this.contexts$.next(t)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(Ct.AttributeSerializerService))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["druid-outsider-outside-app-renderer"]],viewQuery:function(t,r){if(1&t&&o.\u0275\u0275viewQuery(PU,7,o.ViewContainerRef),2&t){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.viewContainer=s.first)}},inputs:{settings:"settings",contexts:"contexts"},decls:2,vars:0,consts:[["appContainer",""]],template:function(t,r){1&t&&o.\u0275\u0275elementContainer(0,null,0)},styles:[""]}),e})(),kU=(()=>{class e{constructor(t,r){t.register((({handler:e})=>new Gt.ContentPlugin({id:"outside_app",title:"Outside App",selectionComponent:void 0,editorComponent:IU,renderComponent:TU,handler:e}))({handler:r}))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Gt.ContentPluginManager),o.\u0275\u0275inject(Pw))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[C.CommonModule,ri.MaterialModule,d.UX]]}),e})(),Iw=(()=>{class e{constructor(t,r){this.fb=t,this.controlContainer=r,this.context$=new m.X(void 0),this.formGroup=this.fb.group({remoteEntry:this.fb.control("",[d.kI.required]),exposedModule:this.fb.control("",[d.kI.required]),moduleName:this.fb.control("",[d.kI.required])}),this.onTouched=()=>{}}set context(t){this.context$.next(t)}ngOnInit(){this.context$.subscribe(t=>{this.formGroup.setValue(t?{remoteEntry:t.data.remoteEntry,exposedModule:t.data.exposedModule,moduleName:t.data.moduleName}:{remoteEntry:"",exposedModule:"",moduleName:""})})}writeValue(t){t&&this.formGroup.setValue(t,{emitEvent:!1})}registerOnChange(t){this.formGroup.valueChanges.subscribe(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.formGroup.disable():this.formGroup.enable()}validate(t){return this.formGroup.valid?null:{invalidForm:{valid:!1,message:"source is invalid"}}}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-context-module-form"]],inputs:{context:"context"},features:[o.\u0275\u0275ProvidersFeature([{provide:d.JU,useExisting:(0,o.forwardRef)(()=>e),multi:!0},{provide:d.Cf,useExisting:(0,o.forwardRef)(()=>e),multi:!0}])],decls:16,vars:1,consts:[[3,"formGroup"],["matInput","","formControlName","remoteEntry","required",""],["matInput","","formControlName","exposedModule","required",""],["matInput","","formControlName","moduleName","required",""]],template:function(t,r){1&t&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div"),o.\u0275\u0275elementStart(2,"mat-form-field"),o.\u0275\u0275elementStart(3,"mat-label"),o.\u0275\u0275text(4,"Remote Entry"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(5,"input",1),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"div"),o.\u0275\u0275elementStart(7,"mat-form-field"),o.\u0275\u0275elementStart(8,"mat-label"),o.\u0275\u0275text(9,"Exposed Module"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(10,"input",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(11,"div"),o.\u0275\u0275elementStart(12,"mat-form-field"),o.\u0275\u0275elementStart(13,"mat-label"),o.\u0275\u0275text(14,"Module Name"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(15,"input",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&t&&o.\u0275\u0275property("formGroup",r.formGroup)},directives:[Yt.KE,d.JL,d.sg,Yt.hX,sr.Nt,d.Fj,d.JJ,d.u,d.Q7],styles:[""]}),e})(),OU=(()=>{class e{constructor(t,r){this.fb=t,this.controlContainer=r}ngOnInit(){this.controlContainer.control.addControl("adaptor",this.fb.control("data",d.kI.required)),this.controlContainer.control.addControl("data",this.fb.control(""))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(d.qu),o.\u0275\u0275directiveInject(d.gN))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["classifieds-ui-context-module-editor"]],viewQuery:function(t,r){if(1&t&&o.\u0275\u0275viewQuery(Iw,7),2&t){let s;o.\u0275\u0275queryRefresh(s=o.\u0275\u0275loadQuery())&&(r.contextModuleFormComp=s.first)}},inputs:{context:"context"},decls:2,vars:2,consts:[[3,"formGroup"],["formControlName","data",3,"context"]],template:function(t,r){1&t&&(o.\u0275\u0275elementContainerStart(0,0),o.\u0275\u0275element(1,"classifieds-ui-context-module-form",1),o.\u0275\u0275elementContainerEnd()),2&t&&(o.\u0275\u0275property("formGroup",r.controlContainer.control),o.\u0275\u0275advance(1),o.\u0275\u0275property("context",r.context))},directives:[Iw,d.JL,d.sg,d.JJ,d.u],styles:[""]}),e})(),FU=(()=>{class e{constructor(t,r,s){this.actions$=t,this.moduleLoaderService=r,this.es=s,this.setPage$=di(()=>this.actions$.pipe(ki(Kg),(0,ee.b)(({page:a})=>{console.log("tractor beam capture page",a),a.contexts&&Array.isArray(a.contexts)&&a.contexts.forEach(l=>{if("module"===l.plugin)return this.moduleLoaderService.loadModule(()=>dc({type:"module",remoteEntry:l.data.remoteEntry,exposedModule:l.data.exposedModule}).then(u=>u[l.data.moduleName])).subscribe()})})),{dispatch:!1}),this.setPageInfo$=di(()=>this.actions$.pipe(ki(qg),(0,ee.b)(({info:a})=>{console.log("tractor beam info",a)}),(0,tt.w)(({info:a})=>this.es.getEntityCollectionService("PanelPage").getByKey(a.id)),(0,ee.b)(a=>{a.contexts&&Array.isArray(a.contexts)&&a.contexts.forEach(l=>{if("module"===l.plugin)return this.moduleLoaderService.loadModule(()=>dc({type:"module",remoteEntry:l.data.remoteEntry,exposedModule:l.data.exposedModule}).then(u=>u[l.data.moduleName])).subscribe()})})),{dispatch:!1})}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(co),o.\u0275\u0275inject(on.ModuleLoaderService),o.\u0275\u0275inject(Yn))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Tw=(()=>{class e{constructor(t){this.moduleLoaderService=t}resolve(t,r,s){return console.log("module resolver context",t,r,s),this.moduleLoaderService.loadModule(()=>dc({type:"module",remoteEntry:r.remoteEntry,exposedModule:r.exposedModule}).then(a=>a[r.moduleName]))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(on.ModuleLoaderService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),MU=(()=>{class e{constructor(t,r,s){this.moduleLoader=t,this.pageBuilderFacade=r,this.es=s}loadPlugins(){return this.pageBuilderFacade.getPageInfo$.pipe((0,ee.b)(()=>console.log("started loading external modules")),(0,tt.w)(t=>(t&&t.id?this.es.getEntityCollectionService("PanelPage").getByKey(t.id):(0,Be.of)(void 0)).pipe((0,zr.d)(void 0))),(0,tt.w)(t=>t?(0,pn.D)(t.contexts.filter(r=>"module"===r.plugin).map(r=>this.moduleLoader.loadModule(()=>dc({type:"module",remoteEntry:r.data.remoteEntry,exposedModule:r.data.exposedModule}).then(s=>s[r.data.moduleName])))).pipe((0,Hn.g)(1),(0,zr.d)([])):(0,Be.of)([])),(0,ee.b)(()=>console.log("completed loading external modules")),(0,be.U)(()=>!0),(0,an.q)(1))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(on.ModuleLoaderService),o.\u0275\u0275inject(bo),o.\u0275\u0275inject(Yn))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),NU=(()=>{class e{constructor(t,r,s,a){r.addDiscovery(a),t.register((({moduleResolver:e})=>new ta({id:"module",name:"module",title:"Module",baseObject:{},resolver:e,editorComponent:OU}))({moduleResolver:s}))}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(Va),o.\u0275\u0275inject(Gt.ContentPluginManager),o.\u0275\u0275inject(Tw),o.\u0275\u0275inject(MU))},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({providers:[Tw],imports:[[C.CommonModule,d.u5,d.UX,Zu,ri.MaterialModule,po.forFeature([FU])]]}),e})();class jU{constructor(n){n&&(this.appId=n.appId,this.guestRoleArn=n.guestRoleArn,this.region=n.region,this.identityPoolId=n.identityPoolId)}}const BU=new o.InjectionToken("RumSettings"),Rw=[["50747a0d-f25e-4872-9596-d95bbfb801b0","/test"],["e182762d-b3db-49a2-9207-a389d5209d64","/introduction"]],LU=[{contexts:[],displayType:"page",entityPermissions:{deleteUserIds:[],readUserIds:["*"],writeUserIds:[]},gridItems:[],id:"50747a0d-f25e-4872-9596-d95bbfb801b0",interactions:{interactions:{listeners:[]}},layoutSetting:{settings:[]},layoutType:"gridless",name:"test",panels:[{columnSetting:{settings:[]},panes:[{contentPlugin:"snippet",contexts:[],label:"",locked:!1,name:"",rule:{condition:"",rules:[]},settings:[{attributes:[],computedValue:"text/html",displayName:"Content Type",name:"contentType",type:1,value:"text/html"},{attributes:[],computedValue:'<article class="prose">\n<p>Test Added new content</p>\n<ul>\n  <li>One</li>\n<li>Two</li>\n<li>Three</li>\n<ul>\n</article>',displayName:"Content",name:"content",type:1,value:'<article class="prose">\n<p>Test Added new content</p>\n<ul>\n  <li>One</li>\n<li>Two</li>\n<li>Three</li>\n<ul>\n</article>'},{attributes:[],computedValue:null,displayName:"jsScript",name:"jsScript",type:1,value:null}]}],settings:[],stylePlugin:""}],path:"/test",persistence:{dataduct:{settings:[]}},rowSettings:[{settings:[]}],site:"spearhead-docs",title:"test",userId:"b7a9bac5-5fef-4aa6-bf12-d536c156e453"},{contexts:[],displayType:"page",entityPermissions:{deleteUserIds:[],readUserIds:["*"],writeUserIds:[]},gridItems:[],id:"72c3231a-5ec1-4fec-99c1-78bff619fb6f",interactions:{interactions:{listeners:[]}},layoutSetting:{settings:[]},layoutType:"gridless",name:"test",panels:[{columnSetting:{settings:[]},panes:[{contentPlugin:"snippet",contexts:[],label:"",locked:!1,name:"",settings:[{attributes:[],computedValue:"text/html",displayName:"Content Type",name:"contentType",type:1,value:"text/html"},{attributes:[],computedValue:"Test",displayName:"Content",name:"content",type:1,value:"Test"},{attributes:[],computedValue:null,displayName:"jsScript",name:"jsScript",type:1,value:null}]}],settings:[],stylePlugin:""}],path:"/test",persistence:{dataduct:{settings:[]}},rowSettings:[{settings:[]}],site:"spearhead-docs",title:"test",userId:"b7a9bac5-5fef-4aa6-bf12-d536c156e453"},{contexts:[],displayType:"page",entityPermissions:{deleteUserIds:[],readUserIds:["*"],writeUserIds:[]},gridItems:[],id:"e182762d-b3db-49a2-9207-a389d5209d64",interactions:{interactions:{listeners:[]}},layoutSetting:{settings:[]},layoutType:"gridless",name:"introduction",panels:[{columnSetting:{settings:[]},panes:[{contentPlugin:"panel",contexts:[],label:"a57ea94f-9d9f-41aa-aff3-19745c3cbda4",locked:!1,name:"a57ea94f-9d9f-41aa-aff3-19745c3cbda4",rule:{condition:"",rules:[]},settings:[{attributes:[],computedValue:null,displayName:"gridItems",name:"gridItems",type:4,value:null},{attributes:[{attributes:[{attributes:[],computedValue:null,displayName:"settings",name:"settings",type:2,value:null},{attributes:[{attributes:[{attributes:[{attributes:[],computedValue:"text/html",displayName:"Content Type",name:"contentType",type:1,value:"text/html"},{attributes:[],computedValue:'<article id="what-is-green-software" class="prose">\n\n<h1 class="text-emerald-700">Introduction</h1>\n\n<h2 class="text-emerald-700">What is green software?</h2>\n\n<p>Green software is an emerging discipline at the intersection of climate science, software design, electricity markets, hardware, and data center design.</p>\n\n<p>Green software is carbon-efficient software, meaning it emits the least carbon possible. Only three activities reduce the carbon emissions of software; energy efficiency, carbon awareness, and hardware efficiency. This training will explain all of these concepts, how to apply them to your processes and how to measure them, as well as some of the international guidelines and organizations that guide and monitor this space.</p>\n\n</article>',displayName:"Content",name:"content",type:1,value:'<article id="what-is-green-software" class="prose">\n\n<h1 class="text-emerald-700">Introduction</h1>\n\n<h2 class="text-emerald-700">What is green software?</h2>\n\n<p>Green software is an emerging discipline at the intersection of climate science, software design, electricity markets, hardware, and data center design.</p>\n\n<p>Green software is carbon-efficient software, meaning it emits the least carbon possible. Only three activities reduce the carbon emissions of software; energy efficiency, carbon awareness, and hardware efficiency. This training will explain all of these concepts, how to apply them to your processes and how to measure them, as well as some of the international guidelines and organizations that guide and monitor this space.</p>\n\n</article>'},{attributes:[],computedValue:null,displayName:"jsScript",name:"jsScript",type:1,value:null}],computedValue:null,displayName:"settings",name:"settings",type:2,value:null},{attributes:[],computedValue:"false",displayName:"locked",name:"locked",type:5,value:"false"},{attributes:[],computedValue:null,displayName:"contexts",name:"contexts",type:4,value:null},{attributes:[],computedValue:"",displayName:"name",name:"name",type:1,value:""},{attributes:[],computedValue:"",displayName:"label",name:"label",type:1,value:""},{attributes:[],computedValue:"snippet",displayName:"contentPlugin",name:"contentPlugin",type:1,value:"snippet"},{attributes:[{attributes:[],computedValue:"",displayName:"condition",name:"condition",type:1,value:""},{attributes:[],computedValue:null,displayName:"rules",name:"rules",type:4,value:null}],computedValue:null,displayName:"rule",name:"rule",type:2,value:null}],computedValue:null,displayName:"0",name:"0",type:2,value:null},{attributes:[{attributes:[{attributes:[],computedValue:'form-data; name="File"; filename="01_carbon_efficiency-e5ce9cc2af3c13c4154ff61a0267b2b5.png"',displayName:"contentDisposition",name:"contentDisposition",type:1,value:'form-data; name="File"; filename="01_carbon_efficiency-e5ce9cc2af3c13c4154ff61a0267b2b5.png"'},{attributes:[],computedValue:"",displayName:"contentType",name:"contentType",type:1,value:""},{attributes:[],computedValue:"01_carbon_efficiency-e5ce9cc2af3c13c4154ff61a0267b2b5",displayName:"id",name:"id",type:1,value:"01_carbon_efficiency-e5ce9cc2af3c13c4154ff61a0267b2b5"},{attributes:[],computedValue:"69087",displayName:"length",name:"length",type:1,value:"69087"},{attributes:[],computedValue:"media/01_carbon_efficiency-e5ce9cc2af3c13c4154ff61a0267b2b5.png",displayName:"path",name:"path",type:1,value:"media/01_carbon_efficiency-e5ce9cc2af3c13c4154ff61a0267b2b5.png"},{attributes:[],computedValue:"placeholdername",displayName:"fileName",name:"fileName",type:1,value:"placeholdername"}],computedValue:null,displayName:"settings",name:"settings",type:2,value:null},{attributes:[],computedValue:"false",displayName:"locked",name:"locked",type:5,value:"false"},{attributes:[],computedValue:null,displayName:"contexts",name:"contexts",type:4,value:null},{attributes:[],computedValue:"",displayName:"name",name:"name",type:1,value:""},{attributes:[],computedValue:"",displayName:"label",name:"label",type:1,value:""},{attributes:[],computedValue:"media",displayName:"contentPlugin",name:"contentPlugin",type:1,value:"media"},{attributes:[{attributes:[],computedValue:"",displayName:"condition",name:"condition",type:1,value:""},{attributes:[],computedValue:null,displayName:"rules",name:"rules",type:4,value:null}],computedValue:null,displayName:"rule",name:"rule",type:2,value:null}],computedValue:null,displayName:"1",name:"1",type:2,value:null},{attributes:[{attributes:[{attributes:[],computedValue:"text/html",displayName:"Content Type",name:"contentType",type:1,value:"text/html"},{attributes:[],computedValue:'<article class="prose">\n\n<h2 class="text-emerald-700">Who should read this?</h2>\n<p>Anyone involved in the process of building, deploying, or managing software. By studying these principles, a green software practitioner can make decisions that have a meaningful impact on the carbon pollution of their applications.</p>\n\n<h2 class="text-emerald-700">History</h2>\n<p>In 2019 the original eight principles of green software engineering were released. This 2022 update of the principles took on feedback received over the years, merging some principles and adding a new one regarding understanding climate commitments.</p>\n\n<h2 class="text-emerald-700">How to be a green software practitioner</h2>\n<p>The following training covers 6 key areas that a green software practitioner should know:</p>\n\n<ol>\n<li>Carbon Efficiency: Emit the least amount of carbon possible.</li>\n<li>Energy Efficiency: Use the least amount of energy possible.</li>\n<li>Carbon Awareness: Do more when the electricity is cleaner and do less when the electricity is dirtier.</li>\n<li>Hardware Efficiency: Use the least amount of embodied carbon possible.</li>\n<li>Measurement: What you can\'t measure, you can\'t improve.</li>\n<li>Climate Commitments: Understand the exact mechanism of carbon reduction.</li>\n</ol>\n\n<p>Each of these chapters will introduce some new concepts and explain in detail why they are important in terms of the climate, and how you can apply them to your green software practices.</p>\n\n\n\n</article>',displayName:"Content",name:"content",type:1,value:'<article class="prose">\n\n<h2 class="text-emerald-700">Who should read this?</h2>\n<p>Anyone involved in the process of building, deploying, or managing software. By studying these principles, a green software practitioner can make decisions that have a meaningful impact on the carbon pollution of their applications.</p>\n\n<h2 class="text-emerald-700">History</h2>\n<p>In 2019 the original eight principles of green software engineering were released. This 2022 update of the principles took on feedback received over the years, merging some principles and adding a new one regarding understanding climate commitments.</p>\n\n<h2 class="text-emerald-700">How to be a green software practitioner</h2>\n<p>The following training covers 6 key areas that a green software practitioner should know:</p>\n\n<ol>\n<li>Carbon Efficiency: Emit the least amount of carbon possible.</li>\n<li>Energy Efficiency: Use the least amount of energy possible.</li>\n<li>Carbon Awareness: Do more when the electricity is cleaner and do less when the electricity is dirtier.</li>\n<li>Hardware Efficiency: Use the least amount of embodied carbon possible.</li>\n<li>Measurement: What you can\'t measure, you can\'t improve.</li>\n<li>Climate Commitments: Understand the exact mechanism of carbon reduction.</li>\n</ol>\n\n<p>Each of these chapters will introduce some new concepts and explain in detail why they are important in terms of the climate, and how you can apply them to your green software practices.</p>\n\n\n\n</article>'},{attributes:[],computedValue:null,displayName:"jsScript",name:"jsScript",type:1,value:null}],computedValue:null,displayName:"settings",name:"settings",type:2,value:null},{attributes:[],computedValue:"false",displayName:"locked",name:"locked",type:5,value:"false"},{attributes:[],computedValue:null,displayName:"contexts",name:"contexts",type:4,value:null},{attributes:[],computedValue:"",displayName:"name",name:"name",type:1,value:""},{attributes:[],computedValue:"",displayName:"label",name:"label",type:1,value:""},{attributes:[],computedValue:"snippet",displayName:"contentPlugin",name:"contentPlugin",type:1,value:"snippet"},{attributes:[{attributes:[],computedValue:"",displayName:"condition",name:"condition",type:1,value:""},{attributes:[],computedValue:null,displayName:"rules",name:"rules",type:4,value:null}],computedValue:null,displayName:"rule",name:"rule",type:2,value:null}],computedValue:null,displayName:"2",name:"2",type:2,value:null},{attributes:[{attributes:[{attributes:[],computedValue:'form-data; name="File"; filename="GSF_Principles_Patterns_Practices_v2-c5e2753b6270473d1da02b97a1321d51.png"',displayName:"contentDisposition",name:"contentDisposition",type:1,value:'form-data; name="File"; filename="GSF_Principles_Patterns_Practices_v2-c5e2753b6270473d1da02b97a1321d51.png"'},{attributes:[],computedValue:"",displayName:"contentType",name:"contentType",type:1,value:""},{attributes:[],computedValue:"GSF_Principles_Patterns_Practices_v2-c5e2753b6270473d1da02b97a1321d51",displayName:"id",name:"id",type:1,value:"GSF_Principles_Patterns_Practices_v2-c5e2753b6270473d1da02b97a1321d51"},{attributes:[],computedValue:"113058",displayName:"length",name:"length",type:1,value:"113058"},{attributes:[],computedValue:"media/GSF_Principles_Patterns_Practices_v2-c5e2753b6270473d1da02b97a1321d51.png",displayName:"path",name:"path",type:1,value:"media/GSF_Principles_Patterns_Practices_v2-c5e2753b6270473d1da02b97a1321d51.png"},{attributes:[],computedValue:"placeholdername",displayName:"fileName",name:"fileName",type:1,value:"placeholdername"}],computedValue:null,displayName:"settings",name:"settings",type:2,value:null},{attributes:[],computedValue:"false",displayName:"locked",name:"locked",type:5,value:"false"},{attributes:[],computedValue:null,displayName:"contexts",name:"contexts",type:4,value:null},{attributes:[],computedValue:"",displayName:"name",name:"name",type:1,value:""},{attributes:[],computedValue:"",displayName:"label",name:"label",type:1,value:""},{attributes:[],computedValue:"media",displayName:"contentPlugin",name:"contentPlugin",type:1,value:"media"},{attributes:[{attributes:[],computedValue:"",displayName:"condition",name:"condition",type:1,value:""},{attributes:[],computedValue:null,displayName:"rules",name:"rules",type:4,value:null}],computedValue:null,displayName:"rule",name:"rule",type:2,value:null}],computedValue:null,displayName:"3",name:"3",type:2,value:null},{attributes:[{attributes:[{attributes:[],computedValue:"text/html",displayName:"Content Type",name:"contentType",type:1,value:"text/html"},{attributes:[],computedValue:'<classifieds-ui-page-router-link href="[_page.path]/manage" text="Edit this Page"></classifieds-ui-page-router-link>',displayName:"Content",name:"content",type:1,value:'<classifieds-ui-page-router-link href="[_page.path]/manage" text="Edit this Page"></classifieds-ui-page-router-link>'},{attributes:[],computedValue:null,displayName:"jsScript",name:"jsScript",type:1,value:null}],computedValue:null,displayName:"settings",name:"settings",type:2,value:null},{attributes:[],computedValue:"false",displayName:"locked",name:"locked",type:5,value:"false"},{attributes:[],computedValue:null,displayName:"contexts",name:"contexts",type:4,value:null},{attributes:[],computedValue:"",displayName:"name",name:"name",type:1,value:""},{attributes:[],computedValue:"",displayName:"label",name:"label",type:1,value:""},{attributes:[],computedValue:"snippet",displayName:"contentPlugin",name:"contentPlugin",type:1,value:"snippet"}],computedValue:null,displayName:"4",name:"4",type:2,value:null}],computedValue:null,displayName:"panes",name:"panes",type:4,value:null},{attributes:[],computedValue:"undefined",displayName:"name",name:"name",type:0,value:"undefined"},{attributes:[],computedValue:"undefined",displayName:"label",name:"label",type:0,value:"undefined"},{attributes:[],computedValue:"",displayName:"stylePlugin",name:"stylePlugin",type:1,value:""},{attributes:[{attributes:[],computedValue:null,displayName:"settings",name:"settings",type:2,value:null}],computedValue:null,displayName:"columnSetting",name:"columnSetting",type:2,value:null}],computedValue:null,displayName:"0",name:"0",type:2,value:null}],computedValue:null,displayName:"panels",name:"panels",type:4,value:null},{attributes:[],computedValue:null,displayName:"contexts",name:"contexts",type:4,value:null},{attributes:[{attributes:[{attributes:[],computedValue:null,displayName:"settings",name:"settings",type:2,value:null}],computedValue:null,displayName:"0",name:"0",type:2,value:null}],computedValue:null,displayName:"rowSettings",name:"rowSettings",type:4,value:null},{attributes:[{attributes:[],computedValue:null,displayName:"readUserIds",name:"readUserIds",type:4,value:null},{attributes:[],computedValue:null,displayName:"writeUserIds",name:"writeUserIds",type:4,value:null},{attributes:[],computedValue:null,displayName:"deleteUserIds",name:"deleteUserIds",type:4,value:null}],computedValue:null,displayName:"entityPermissions",name:"entityPermissions",type:2,value:null},{attributes:[],computedValue:"undefined",displayName:"id",name:"id",type:0,value:"undefined"},{attributes:[],computedValue:"gridless",displayName:"layoutType",name:"layoutType",type:1,value:"gridless"},{attributes:[],computedValue:"page",displayName:"displayType",name:"displayType",type:1,value:"page"},{attributes:[],computedValue:"undefined",displayName:"name",name:"name",type:0,value:"undefined"},{attributes:[],computedValue:"undefined",displayName:"title",name:"title",type:0,value:"undefined"},{attributes:[],computedValue:"spearhead-docs",displayName:"site",name:"site",type:1,value:"spearhead-docs"},{attributes:[],computedValue:"undefined",displayName:"userId",name:"userId",type:0,value:"undefined"},{attributes:[],computedValue:"undefined",displayName:"path",name:"path",type:0,value:"undefined"},{attributes:[{attributes:[{attributes:[],computedValue:null,displayName:"settings",name:"settings",type:2,value:null},{attributes:[],computedValue:"undefined",displayName:"plugin",name:"plugin",type:0,value:"undefined"}],computedValue:null,displayName:"dataduct",name:"dataduct",type:2,value:null}],computedValue:null,displayName:"persistence",name:"persistence",type:2,value:null},{attributes:[{attributes:[{attributes:[],computedValue:null,displayName:"listeners",name:"listeners",type:4,value:null}],computedValue:null,displayName:"interactions",name:"interactions",type:2,value:null}],computedValue:null,displayName:"interactions",name:"interactions",type:2,value:null},{attributes:[{attributes:[],computedValue:null,displayName:"settings",name:"settings",type:2,value:null}],computedValue:null,displayName:"layoutSetting",name:"layoutSetting",type:2,value:null}]},{contentPlugin:"panel",contexts:[],label:"f4fe327d-dd32-4397-a90a-a6aa6032ed99",locked:!1,name:"f4fe327d-dd32-4397-a90a-a6aa6032ed99",rule:{condition:"",rules:[]},settings:[{attributes:[],computedValue:null,displayName:"gridItems",name:"gridItems",type:4,value:null},{attributes:[{attributes:[{attributes:[],computedValue:null,displayName:"settings",name:"settings",type:2,value:null},{attributes:[{attributes:[{attributes:[{attributes:[],computedValue:"text/html",displayName:"Content Type",name:"contentType",type:1,value:"text/html"},{attributes:[],computedValue:'<ul class="px-2 py-2 border-l border-l-stone-300">\n  <li class="px-2 py-2 text-sm">\n    <a href="/introduction#what-is-green-software">What is green software?</a>\n  </li>\n  <li class="px-2 py-2 text-sm">Who should read this?</li>\n  <li class="px-2 py-2 text-sm">History</li>\n  <li class="px-2 py-2 text-sm">How to be a green software practitioner</li>\n  <li class="px-2 py-2 text-sm">Principles, Patterns, and Practices.</li>\n</ul>',displayName:"Content",name:"content",type:1,value:'<ul class="px-2 py-2 border-l border-l-stone-300">\n  <li class="px-2 py-2 text-sm">\n    <a href="/introduction#what-is-green-software">What is green software?</a>\n  </li>\n  <li class="px-2 py-2 text-sm">Who should read this?</li>\n  <li class="px-2 py-2 text-sm">History</li>\n  <li class="px-2 py-2 text-sm">How to be a green software practitioner</li>\n  <li class="px-2 py-2 text-sm">Principles, Patterns, and Practices.</li>\n</ul>'},{attributes:[],computedValue:null,displayName:"jsScript",name:"jsScript",type:1,value:null}],computedValue:null,displayName:"settings",name:"settings",type:2,value:null},{attributes:[],computedValue:"false",displayName:"locked",name:"locked",type:5,value:"false"},{attributes:[],computedValue:null,displayName:"contexts",name:"contexts",type:4,value:null},{attributes:[],computedValue:"",displayName:"name",name:"name",type:1,value:""},{attributes:[],computedValue:"",displayName:"label",name:"label",type:1,value:""},{attributes:[],computedValue:"snippet",displayName:"contentPlugin",name:"contentPlugin",type:1,value:"snippet"},{attributes:[{attributes:[],computedValue:"",displayName:"condition",name:"condition",type:1,value:""},{attributes:[],computedValue:null,displayName:"rules",name:"rules",type:4,value:null}],computedValue:null,displayName:"rule",name:"rule",type:2,value:null}],computedValue:null,displayName:"0",name:"0",type:2,value:null}],computedValue:null,displayName:"panes",name:"panes",type:4,value:null},{attributes:[],computedValue:"undefined",displayName:"name",name:"name",type:0,value:"undefined"},{attributes:[],computedValue:"undefined",displayName:"label",name:"label",type:0,value:"undefined"},{attributes:[],computedValue:"",displayName:"stylePlugin",name:"stylePlugin",type:1,value:""},{attributes:[{attributes:[],computedValue:null,displayName:"settings",name:"settings",type:2,value:null}],computedValue:null,displayName:"columnSetting",name:"columnSetting",type:2,value:null}],computedValue:null,displayName:"0",name:"0",type:2,value:null}],computedValue:null,displayName:"panels",name:"panels",type:4,value:null},{attributes:[],computedValue:null,displayName:"contexts",name:"contexts",type:4,value:null},{attributes:[{attributes:[{attributes:[],computedValue:null,displayName:"settings",name:"settings",type:2,value:null}],computedValue:null,displayName:"0",name:"0",type:2,value:null}],computedValue:null,displayName:"rowSettings",name:"rowSettings",type:4,value:null},{attributes:[{attributes:[],computedValue:null,displayName:"readUserIds",name:"readUserIds",type:4,value:null},{attributes:[],computedValue:null,displayName:"writeUserIds",name:"writeUserIds",type:4,value:null},{attributes:[],computedValue:null,displayName:"deleteUserIds",name:"deleteUserIds",type:4,value:null}],computedValue:null,displayName:"entityPermissions",name:"entityPermissions",type:2,value:null},{attributes:[],computedValue:"undefined",displayName:"id",name:"id",type:0,value:"undefined"},{attributes:[],computedValue:"gridless",displayName:"layoutType",name:"layoutType",type:1,value:"gridless"},{attributes:[],computedValue:"page",displayName:"displayType",name:"displayType",type:1,value:"page"},{attributes:[],computedValue:"undefined",displayName:"name",name:"name",type:0,value:"undefined"},{attributes:[],computedValue:"undefined",displayName:"title",name:"title",type:0,value:"undefined"},{attributes:[],computedValue:"spearhead-docs",displayName:"site",name:"site",type:1,value:"spearhead-docs"},{attributes:[],computedValue:"undefined",displayName:"userId",name:"userId",type:0,value:"undefined"},{attributes:[],computedValue:"undefined",displayName:"path",name:"path",type:0,value:"undefined"},{attributes:[{attributes:[{attributes:[],computedValue:null,displayName:"settings",name:"settings",type:2,value:null},{attributes:[],computedValue:"undefined",displayName:"plugin",name:"plugin",type:0,value:"undefined"}],computedValue:null,displayName:"dataduct",name:"dataduct",type:2,value:null}],computedValue:null,displayName:"persistence",name:"persistence",type:2,value:null},{attributes:[{attributes:[{attributes:[],computedValue:null,displayName:"listeners",name:"listeners",type:4,value:null}],computedValue:null,displayName:"interactions",name:"interactions",type:2,value:null}],computedValue:null,displayName:"interactions",name:"interactions",type:2,value:null},{attributes:[{attributes:[],computedValue:null,displayName:"settings",name:"settings",type:2,value:null}],computedValue:null,displayName:"layoutSetting",name:"layoutSetting",type:2,value:null}]}],settings:[],stylePlugin:""}],path:"/introduction",persistence:{dataduct:{settings:[]}},rowSettings:[{settings:[]}],site:"spearhead-docs",title:"Introduction",userId:"b7a9bac5-5fef-4aa6-bf12-d536c156e453"},{contexts:[],displayType:"page",entityPermissions:{deleteUserIds:[],readUserIds:["*"],writeUserIds:[]},gridItems:[],id:"e8d71f89-8dfc-4e0d-9cee-90b29741727b",interactions:{interactions:{listeners:[]}},layoutSetting:{settings:[]},layoutType:"gridless",name:"introduction",panels:[{columnSetting:{settings:[]},panes:[{contentPlugin:"panel",contexts:[],label:"a57ea94f-9d9f-41aa-aff3-19745c3cbda4",locked:!1,name:"a57ea94f-9d9f-41aa-aff3-19745c3cbda4",settings:[{attributes:[],computedValue:null,displayName:"gridItems",name:"gridItems",type:4,value:null},{attributes:[{attributes:[{attributes:[],computedValue:null,displayName:"settings",name:"settings",type:2,value:null},{attributes:[{attributes:[{attributes:[{attributes:[],computedValue:"text/html",displayName:"Content Type",name:"contentType",type:1,value:"text/html"},{attributes:[],computedValue:"Intro main content",displayName:"Content",name:"content",type:1,value:"Intro main content"},{attributes:[],computedValue:null,displayName:"jsScript",name:"jsScript",type:1,value:null}],computedValue:null,displayName:"settings",name:"settings",type:2,value:null},{attributes:[],computedValue:"false",displayName:"locked",name:"locked",type:5,value:"false"},{attributes:[],computedValue:null,displayName:"contexts",name:"contexts",type:4,value:null},{attributes:[],computedValue:"",displayName:"name",name:"name",type:1,value:""},{attributes:[],computedValue:"",displayName:"label",name:"label",type:1,value:""},{attributes:[],computedValue:"snippet",displayName:"contentPlugin",name:"contentPlugin",type:1,value:"snippet"}],computedValue:null,displayName:"0",name:"0",type:2,value:null}],computedValue:null,displayName:"panes",name:"panes",type:4,value:null},{attributes:[],computedValue:"undefined",displayName:"name",name:"name",type:0,value:"undefined"},{attributes:[],computedValue:"undefined",displayName:"label",name:"label",type:0,value:"undefined"},{attributes:[],computedValue:"",displayName:"stylePlugin",name:"stylePlugin",type:1,value:""},{attributes:[{attributes:[],computedValue:null,displayName:"settings",name:"settings",type:2,value:null}],computedValue:null,displayName:"columnSetting",name:"columnSetting",type:2,value:null}],computedValue:null,displayName:"0",name:"0",type:2,value:null}],computedValue:null,displayName:"panels",name:"panels",type:4,value:null},{attributes:[],computedValue:null,displayName:"contexts",name:"contexts",type:4,value:null},{attributes:[{attributes:[{attributes:[],computedValue:null,displayName:"settings",name:"settings",type:2,value:null}],computedValue:null,displayName:"0",name:"0",type:2,value:null}],computedValue:null,displayName:"rowSettings",name:"rowSettings",type:4,value:null},{attributes:[{attributes:[],computedValue:null,displayName:"readUserIds",name:"readUserIds",type:4,value:null},{attributes:[],computedValue:null,displayName:"writeUserIds",name:"writeUserIds",type:4,value:null},{attributes:[],computedValue:null,displayName:"deleteUserIds",name:"deleteUserIds",type:4,value:null}],computedValue:null,displayName:"entityPermissions",name:"entityPermissions",type:2,value:null},{attributes:[],computedValue:"undefined",displayName:"id",name:"id",type:0,value:"undefined"},{attributes:[],computedValue:"gridless",displayName:"layoutType",name:"layoutType",type:1,value:"gridless"},{attributes:[],computedValue:"page",displayName:"displayType",name:"displayType",type:1,value:"page"},{attributes:[],computedValue:"undefined",displayName:"name",name:"name",type:0,value:"undefined"},{attributes:[],computedValue:"undefined",displayName:"title",name:"title",type:0,value:"undefined"},{attributes:[],computedValue:"spearhead-docs",displayName:"site",name:"site",type:1,value:"spearhead-docs"},{attributes:[],computedValue:"undefined",displayName:"userId",name:"userId",type:0,value:"undefined"},{attributes:[],computedValue:"undefined",displayName:"path",name:"path",type:0,value:"undefined"},{attributes:[{attributes:[{attributes:[],computedValue:null,displayName:"settings",name:"settings",type:2,value:null}],computedValue:null,displayName:"dataduct",name:"dataduct",type:2,value:null}],computedValue:null,displayName:"persistence",name:"persistence",type:2,value:null},{attributes:[{attributes:[{attributes:[],computedValue:null,displayName:"listeners",name:"listeners",type:4,value:null}],computedValue:null,displayName:"interactions",name:"interactions",type:2,value:null}],computedValue:null,displayName:"interactions",name:"interactions",type:2,value:null},{attributes:[{attributes:[],computedValue:null,displayName:"settings",name:"settings",type:2,value:null}],computedValue:null,displayName:"layoutSetting",name:"layoutSetting",type:2,value:null}]},{contentPlugin:"panel",contexts:[],label:"f4fe327d-dd32-4397-a90a-a6aa6032ed99",locked:!1,name:"f4fe327d-dd32-4397-a90a-a6aa6032ed99",settings:[{attributes:[],computedValue:null,displayName:"gridItems",name:"gridItems",type:4,value:null},{attributes:[{attributes:[{attributes:[],computedValue:null,displayName:"settings",name:"settings",type:2,value:null},{attributes:[{attributes:[{attributes:[{attributes:[],computedValue:"text/html",displayName:"Content Type",name:"contentType",type:1,value:"text/html"},{attributes:[],computedValue:"Sidebar",displayName:"Content",name:"content",type:1,value:"Sidebar"},{attributes:[],computedValue:null,displayName:"jsScript",name:"jsScript",type:1,value:null}],computedValue:null,displayName:"settings",name:"settings",type:2,value:null},{attributes:[],computedValue:"false",displayName:"locked",name:"locked",type:5,value:"false"},{attributes:[],computedValue:null,displayName:"contexts",name:"contexts",type:4,value:null},{attributes:[],computedValue:"",displayName:"name",name:"name",type:1,value:""},{attributes:[],computedValue:"",displayName:"label",name:"label",type:1,value:""},{attributes:[],computedValue:"snippet",displayName:"contentPlugin",name:"contentPlugin",type:1,value:"snippet"}],computedValue:null,displayName:"0",name:"0",type:2,value:null}],computedValue:null,displayName:"panes",name:"panes",type:4,value:null},{attributes:[],computedValue:"undefined",displayName:"name",name:"name",type:0,value:"undefined"},{attributes:[],computedValue:"undefined",displayName:"label",name:"label",type:0,value:"undefined"},{attributes:[],computedValue:"",displayName:"stylePlugin",name:"stylePlugin",type:1,value:""},{attributes:[{attributes:[],computedValue:null,displayName:"settings",name:"settings",type:2,value:null}],computedValue:null,displayName:"columnSetting",name:"columnSetting",type:2,value:null}],computedValue:null,displayName:"0",name:"0",type:2,value:null}],computedValue:null,displayName:"panels",name:"panels",type:4,value:null},{attributes:[],computedValue:null,displayName:"contexts",name:"contexts",type:4,value:null},{attributes:[{attributes:[{attributes:[],computedValue:null,displayName:"settings",name:"settings",type:2,value:null}],computedValue:null,displayName:"0",name:"0",type:2,value:null}],computedValue:null,displayName:"rowSettings",name:"rowSettings",type:4,value:null},{attributes:[{attributes:[],computedValue:null,displayName:"readUserIds",name:"readUserIds",type:4,value:null},{attributes:[],computedValue:null,displayName:"writeUserIds",name:"writeUserIds",type:4,value:null},{attributes:[],computedValue:null,displayName:"deleteUserIds",name:"deleteUserIds",type:4,value:null}],computedValue:null,displayName:"entityPermissions",name:"entityPermissions",type:2,value:null},{attributes:[],computedValue:"undefined",displayName:"id",name:"id",type:0,value:"undefined"},{attributes:[],computedValue:"gridless",displayName:"layoutType",name:"layoutType",type:1,value:"gridless"},{attributes:[],computedValue:"page",displayName:"displayType",name:"displayType",type:1,value:"page"},{attributes:[],computedValue:"undefined",displayName:"name",name:"name",type:0,value:"undefined"},{attributes:[],computedValue:"undefined",displayName:"title",name:"title",type:0,value:"undefined"},{attributes:[],computedValue:"spearhead-docs",displayName:"site",name:"site",type:1,value:"spearhead-docs"},{attributes:[],computedValue:"undefined",displayName:"userId",name:"userId",type:0,value:"undefined"},{attributes:[],computedValue:"undefined",displayName:"path",name:"path",type:0,value:"undefined"},{attributes:[{attributes:[{attributes:[],computedValue:null,displayName:"settings",name:"settings",type:2,value:null}],computedValue:null,displayName:"dataduct",name:"dataduct",type:2,value:null}],computedValue:null,displayName:"persistence",name:"persistence",type:2,value:null},{attributes:[{attributes:[{attributes:[],computedValue:null,displayName:"listeners",name:"listeners",type:4,value:null}],computedValue:null,displayName:"interactions",name:"interactions",type:2,value:null}],computedValue:null,displayName:"interactions",name:"interactions",type:2,value:null},{attributes:[{attributes:[],computedValue:null,displayName:"settings",name:"settings",type:2,value:null}],computedValue:null,displayName:"layoutSetting",name:"layoutSetting",type:2,value:null}]}],settings:[],stylePlugin:""}],path:"/introduction",persistence:{dataduct:{settings:[]}},rowSettings:[{settings:[]}],site:"spearhead-docs",title:"Introduction",userId:"b7a9bac5-5fef-4aa6-bf12-d536c156e453"}],zU=[{path:"auth-callback",component:ku},...Rw.map(([e,n])=>({matcher:mv(new Cr({id:e,layoutType:"",displayType:"",gridItems:[],panels:[],layoutSetting:void 0,rowSettings:[],path:n})),component:Gh,data:{panelPageListItem:new Cr({id:e,layoutType:"",displayType:"",gridItems:[],panels:[],layoutSetting:void 0,rowSettings:[],path:n})}})),...Rw.map(([e,n])=>({matcher:hv(new Cr({id:e,layoutType:"",displayType:"",gridItems:[],panels:[],layoutSetting:void 0,rowSettings:[],path:n})),component:Uh,data:{panelPageListItem:new Cr({id:e,layoutType:"",displayType:"",gridItems:[],panels:[],layoutSetting:void 0,rowSettings:[],path:n})}})),{path:"**",component:jF,canActivate:[D0]}],UU={root:Zo_apiGatewaySettings.endpointUrl,timeout:2e4};function GU(){const e=new Vd;return e.link=(n,t,r)=>"page"===r?`<classifieds-ui-panel-page id="${n}"></classifieds-ui-panel-page>`:`<classifieds-ui-page-router-link href="${n}" text="${r}"></classifieds-ui-page-router-link>`,{renderer:e}}let VU=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e,bootstrap:[ez]}),e.\u0275inj=o.\u0275\u0275defineInjector({providers:[D0,{provide:on.SITE_NAME,useValue:Zo_site},{provide:Mu,useValue:new Jo(Zo_clientSettings)},{provide:nh,useValue:new Y2(Zo_mediaSettings)},{provide:db,useValue:new kD(Zo_panelsSettings)},{provide:yU,useValue:new wU(Zo_alienaliasSettings)},{provide:dw,useValue:new E4({disableRouting:!1})},{provide:xl,useValue:new Dm(Zo_cognitoSettings)},{provide:BU,useValue:new jU(Zo_rumSettings)},{provide:F.HTTP_INTERCEPTORS,useClass:Ks,multi:!0},{provide:F.HTTP_INTERCEPTORS,useClass:$s,multi:!0},{provide:fi,useValue:UU},{provide:o.APP_INITIALIZER,useFactory:Y4({key:({data:n})=>"panelpage__"+n.id,data:LU.map(n=>new Cr(n))}),multi:!0,deps:[o.PLATFORM_ID]}],imports:[[I.b2.withServerTransition({appId:"serverApp"}),C.CommonModule,F.HttpClientModule,F.HttpClientJsonpModule,I.Cu,d.u5,d.UX,j.PW,al,ru,vU,Cg.forRoot({sanitize:o.SecurityContext.NONE,markedOptions:{provide:a0,useFactory:GU}}),Pn.RouterModule.forRoot(zU,{initialNavigation:"enabled",relativeLinkResolution:"legacy"}),Zo_production?[]:tz.FT.instrument({maxAge:25,logOnly:Zo_production}),eF.forRoot({serializer:Pg}),xt.Aw.forRoot(nz,{metaReducers:rz,runtimeChecks:{strictActionImmutability:!0,strictStateImmutability:!0}}),po.forRoot([]),I0,G4,on.UtilsModule,Bd,Gt.ContentModule,Zu,_i.forRoot(),yd.forRoot(),$_,Pu.forRoot({}),LF,Xg,dv,N4,uz,Fm,Z4,pz,yz,mU,kU,NU,KF,Lj,Ch,R4,xw,Ga,tD]]}),e})();console.log("bootstrap"),Zo_production&&(0,o.enableProdMode)(),I.q6().bootstrapModule(VU).catch(e=>console.log(e))},548:(we,O)=>{O.byteLength=function m(H){var Q=d(H),Y=Q[1];return 3*(Q[0]+Y)/4-Y},O.toByteArray=function N(H){var Q,ee,q=d(H),Y=q[0],le=q[1],B=new o(function v(H,Q,q){return 3*(Q+q)/4-q}(0,Y,le)),z=0,U=le>0?Y-4:Y;for(ee=0;ee<U;ee+=4)Q=I[H.charCodeAt(ee)]<<18|I[H.charCodeAt(ee+1)]<<12|I[H.charCodeAt(ee+2)]<<6|I[H.charCodeAt(ee+3)],B[z++]=Q>>16&255,B[z++]=Q>>8&255,B[z++]=255&Q;return 2===le&&(Q=I[H.charCodeAt(ee)]<<2|I[H.charCodeAt(ee+1)]>>4,B[z++]=255&Q),1===le&&(Q=I[H.charCodeAt(ee)]<<10|I[H.charCodeAt(ee+1)]<<4|I[H.charCodeAt(ee+2)]>>2,B[z++]=Q>>8&255,B[z++]=255&Q),B},O.fromByteArray=function X(H){for(var Q,q=H.length,Y=q%3,le=[],B=16383,z=0,U=q-Y;z<U;z+=B)le.push(L(H,z,z+B>U?U:z+B));return 1===Y?le.push(x[(Q=H[q-1])>>2]+x[Q<<4&63]+"=="):2===Y&&le.push(x[(Q=(H[q-2]<<8)+H[q-1])>>10]+x[Q>>4&63]+x[Q<<2&63]+"="),le.join("")};for(var x=[],I=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",F=0,j=C.length;F<j;++F)x[F]=C[F],I[C.charCodeAt(F)]=F;function d(H){var Q=H.length;if(Q%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var q=H.indexOf("=");return-1===q&&(q=Q),[q,q===Q?0:4-q%4]}function M(H){return x[H>>18&63]+x[H>>12&63]+x[H>>6&63]+x[63&H]}function L(H,Q,q){for(var le=[],B=Q;B<q;B+=3)le.push(M((H[B]<<16&16711680)+(H[B+1]<<8&65280)+(255&H[B+2])));return le.join("")}I["-".charCodeAt(0)]=62,I["_".charCodeAt(0)]=63},7230:function(we){we.exports=function(O){var x={};function I(o){if(x[o])return x[o].exports;var C=x[o]={i:o,l:!1,exports:{}};return O[o].call(C.exports,C,C.exports,I),C.l=!0,C.exports}return I.m=O,I.c=x,I.d=function(o,C,F){I.o(o,C)||Object.defineProperty(o,C,{enumerable:!0,get:F})},I.r=function(o){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},I.t=function(o,C){if(1&C&&(o=I(o)),8&C||4&C&&"object"==typeof o&&o&&o.__esModule)return o;var F=Object.create(null);if(I.r(F),Object.defineProperty(F,"default",{enumerable:!0,value:o}),2&C&&"string"!=typeof o)for(var j in o)I.d(F,j,function(d){return o[d]}.bind(null,j));return F},I.n=function(o){var C=o&&o.__esModule?function(){return o.default}:function(){return o};return I.d(C,"a",C),C},I.o=function(o,C){return Object.prototype.hasOwnProperty.call(o,C)},I.p="",I(I.s=90)}({17:function(O,x,I){"use strict";x.__esModule=!0,x.default=void 0;var o=I(18),C=function(){function F(){}return F.getFirstMatch=function(j,d){var m=d.match(j);return m&&m.length>0&&m[1]||""},F.getSecondMatch=function(j,d){var m=d.match(j);return m&&m.length>1&&m[2]||""},F.matchAndReturnConst=function(j,d,m){if(j.test(d))return m},F.getWindowsVersionName=function(j){switch(j){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},F.getMacOSVersionName=function(j){var d=j.split(".").splice(0,2).map(function(m){return parseInt(m,10)||0});if(d.push(0),10===d[0])switch(d[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},F.getAndroidVersionName=function(j){var d=j.split(".").splice(0,2).map(function(m){return parseInt(m,10)||0});if(d.push(0),!(1===d[0]&&d[1]<5))return 1===d[0]&&d[1]<6?"Cupcake":1===d[0]&&d[1]>=6?"Donut":2===d[0]&&d[1]<2?"Eclair":2===d[0]&&2===d[1]?"Froyo":2===d[0]&&d[1]>2?"Gingerbread":3===d[0]?"Honeycomb":4===d[0]&&d[1]<1?"Ice Cream Sandwich":4===d[0]&&d[1]<4?"Jelly Bean":4===d[0]&&d[1]>=4?"KitKat":5===d[0]?"Lollipop":6===d[0]?"Marshmallow":7===d[0]?"Nougat":8===d[0]?"Oreo":9===d[0]?"Pie":void 0},F.getVersionPrecision=function(j){return j.split(".").length},F.compareVersions=function(j,d,m){void 0===m&&(m=!1);var v=F.getVersionPrecision(j),N=F.getVersionPrecision(d),M=Math.max(v,N),L=0,X=F.map([j,d],function(H){var Q=M-F.getVersionPrecision(H),q=H+new Array(Q+1).join(".0");return F.map(q.split("."),function(Y){return new Array(20-Y.length).join("0")+Y}).reverse()});for(m&&(L=M-Math.min(v,N)),M-=1;M>=L;){if(X[0][M]>X[1][M])return 1;if(X[0][M]===X[1][M]){if(M===L)return 0;M-=1}else if(X[0][M]<X[1][M])return-1}},F.map=function(j,d){var m,v=[];if(Array.prototype.map)return Array.prototype.map.call(j,d);for(m=0;m<j.length;m+=1)v.push(d(j[m]));return v},F.find=function(j,d){var m,v;if(Array.prototype.find)return Array.prototype.find.call(j,d);for(m=0,v=j.length;m<v;m+=1){var N=j[m];if(d(N,m))return N}},F.assign=function(j){for(var d,m,v=j,N=arguments.length,M=new Array(N>1?N-1:0),L=1;L<N;L++)M[L-1]=arguments[L];if(Object.assign)return Object.assign.apply(Object,[j].concat(M));var X=function(){var H=M[d];"object"==typeof H&&null!==H&&Object.keys(H).forEach(function(Q){v[Q]=H[Q]})};for(d=0,m=M.length;d<m;d+=1)X();return j},F.getBrowserAlias=function(j){return o.BROWSER_ALIASES_MAP[j]},F.getBrowserTypeByAlias=function(j){return o.BROWSER_MAP[j]||""},F}();x.default=C,O.exports=x.default},18:function(O,x,I){"use strict";x.__esModule=!0,x.ENGINE_MAP=x.OS_MAP=x.PLATFORMS_MAP=x.BROWSER_MAP=x.BROWSER_ALIASES_MAP=void 0,x.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},x.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},x.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},x.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},x.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(O,x,I){"use strict";x.__esModule=!0,x.default=void 0;var o,C=(o=I(91))&&o.__esModule?o:{default:o},F=I(18);function j(m,v){for(var N=0;N<v.length;N++){var M=v[N];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(m,M.key,M)}}var d=function(){function m(){}var v,M;return m.getParser=function(L,X){if(void 0===X&&(X=!1),"string"!=typeof L)throw new Error("UserAgent should be a string");return new C.default(L,X)},m.parse=function(L){return new C.default(L).getResult()},v=m,M=[{key:"BROWSER_MAP",get:function(){return F.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return F.ENGINE_MAP}},{key:"OS_MAP",get:function(){return F.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return F.PLATFORMS_MAP}}],null&&j(v.prototype,null),M&&j(v,M),m}();x.default=d,O.exports=x.default},91:function(O,x,I){"use strict";x.__esModule=!0,x.default=void 0;var o=m(I(92)),C=m(I(93)),F=m(I(94)),j=m(I(95)),d=m(I(17));function m(N){return N&&N.__esModule?N:{default:N}}var v=function(){function N(L,X){if(void 0===X&&(X=!1),null==L||""===L)throw new Error("UserAgent parameter can't be empty");this._ua=L,this.parsedResult={},!0!==X&&this.parse()}var M=N.prototype;return M.getUA=function(){return this._ua},M.test=function(L){return L.test(this._ua)},M.parseBrowser=function(){var L=this;this.parsedResult.browser={};var X=d.default.find(o.default,function(H){if("function"==typeof H.test)return H.test(L);if(H.test instanceof Array)return H.test.some(function(Q){return L.test(Q)});throw new Error("Browser's test function is not valid")});return X&&(this.parsedResult.browser=X.describe(this.getUA())),this.parsedResult.browser},M.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},M.getBrowserName=function(L){return L?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},M.getBrowserVersion=function(){return this.getBrowser().version},M.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},M.parseOS=function(){var L=this;this.parsedResult.os={};var X=d.default.find(C.default,function(H){if("function"==typeof H.test)return H.test(L);if(H.test instanceof Array)return H.test.some(function(Q){return L.test(Q)});throw new Error("Browser's test function is not valid")});return X&&(this.parsedResult.os=X.describe(this.getUA())),this.parsedResult.os},M.getOSName=function(L){var X=this.getOS().name;return L?String(X).toLowerCase()||"":X||""},M.getOSVersion=function(){return this.getOS().version},M.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},M.getPlatformType=function(L){void 0===L&&(L=!1);var X=this.getPlatform().type;return L?String(X).toLowerCase()||"":X||""},M.parsePlatform=function(){var L=this;this.parsedResult.platform={};var X=d.default.find(F.default,function(H){if("function"==typeof H.test)return H.test(L);if(H.test instanceof Array)return H.test.some(function(Q){return L.test(Q)});throw new Error("Browser's test function is not valid")});return X&&(this.parsedResult.platform=X.describe(this.getUA())),this.parsedResult.platform},M.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},M.getEngineName=function(L){return L?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},M.parseEngine=function(){var L=this;this.parsedResult.engine={};var X=d.default.find(j.default,function(H){if("function"==typeof H.test)return H.test(L);if(H.test instanceof Array)return H.test.some(function(Q){return L.test(Q)});throw new Error("Browser's test function is not valid")});return X&&(this.parsedResult.engine=X.describe(this.getUA())),this.parsedResult.engine},M.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},M.getResult=function(){return d.default.assign({},this.parsedResult)},M.satisfies=function(L){var X=this,H={},Q=0,q={},Y=0;if(Object.keys(L).forEach(function(pe){var g=L[pe];"string"==typeof g?(q[pe]=g,Y+=1):"object"==typeof g&&(H[pe]=g,Q+=1)}),Q>0){var le=Object.keys(H),B=d.default.find(le,function(pe){return X.isOS(pe)});if(B){var z=this.satisfies(H[B]);if(void 0!==z)return z}var U=d.default.find(le,function(pe){return X.isPlatform(pe)});if(U){var ee=this.satisfies(H[U]);if(void 0!==ee)return ee}}if(Y>0){var ge=Object.keys(q),_e=d.default.find(ge,function(pe){return X.isBrowser(pe,!0)});if(void 0!==_e)return this.compareVersion(q[_e])}},M.isBrowser=function(L,X){void 0===X&&(X=!1);var H=this.getBrowserName().toLowerCase(),Q=L.toLowerCase(),q=d.default.getBrowserTypeByAlias(Q);return X&&q&&(Q=q.toLowerCase()),Q===H},M.compareVersion=function(L){var X=[0],H=L,Q=!1,q=this.getBrowserVersion();if("string"==typeof q)return">"===L[0]||"<"===L[0]?(H=L.substr(1),"="===L[1]?(Q=!0,H=L.substr(2)):X=[],X.push(">"===L[0]?1:-1)):"="===L[0]?H=L.substr(1):"~"===L[0]&&(Q=!0,H=L.substr(1)),X.indexOf(d.default.compareVersions(q,H,Q))>-1},M.isOS=function(L){return this.getOSName(!0)===String(L).toLowerCase()},M.isPlatform=function(L){return this.getPlatformType(!0)===String(L).toLowerCase()},M.isEngine=function(L){return this.getEngineName(!0)===String(L).toLowerCase()},M.is=function(L,X){return void 0===X&&(X=!1),this.isBrowser(L,X)||this.isOS(L)||this.isPlatform(L)},M.some=function(L){var X=this;return void 0===L&&(L=[]),L.some(function(H){return X.is(H)})},N}();x.default=v,O.exports=x.default},92:function(O,x,I){"use strict";x.__esModule=!0,x.default=void 0;var o,C=(o=I(17))&&o.__esModule?o:{default:o},F=/version\/(\d+(\.?_?\d+)+)/i;x.default=[{test:[/googlebot/i],describe:function(d){var m={name:"Googlebot"},v=C.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,d)||C.default.getFirstMatch(F,d);return v&&(m.version=v),m}},{test:[/opera/i],describe:function(d){var m={name:"Opera"},v=C.default.getFirstMatch(F,d)||C.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,d);return v&&(m.version=v),m}},{test:[/opr\/|opios/i],describe:function(d){var m={name:"Opera"},v=C.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,d)||C.default.getFirstMatch(F,d);return v&&(m.version=v),m}},{test:[/SamsungBrowser/i],describe:function(d){var m={name:"Samsung Internet for Android"},v=C.default.getFirstMatch(F,d)||C.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,d);return v&&(m.version=v),m}},{test:[/Whale/i],describe:function(d){var m={name:"NAVER Whale Browser"},v=C.default.getFirstMatch(F,d)||C.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,d);return v&&(m.version=v),m}},{test:[/MZBrowser/i],describe:function(d){var m={name:"MZ Browser"},v=C.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,d)||C.default.getFirstMatch(F,d);return v&&(m.version=v),m}},{test:[/focus/i],describe:function(d){var m={name:"Focus"},v=C.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,d)||C.default.getFirstMatch(F,d);return v&&(m.version=v),m}},{test:[/swing/i],describe:function(d){var m={name:"Swing"},v=C.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,d)||C.default.getFirstMatch(F,d);return v&&(m.version=v),m}},{test:[/coast/i],describe:function(d){var m={name:"Opera Coast"},v=C.default.getFirstMatch(F,d)||C.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,d);return v&&(m.version=v),m}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(d){var m={name:"Opera Touch"},v=C.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,d)||C.default.getFirstMatch(F,d);return v&&(m.version=v),m}},{test:[/yabrowser/i],describe:function(d){var m={name:"Yandex Browser"},v=C.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,d)||C.default.getFirstMatch(F,d);return v&&(m.version=v),m}},{test:[/ucbrowser/i],describe:function(d){var m={name:"UC Browser"},v=C.default.getFirstMatch(F,d)||C.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,d);return v&&(m.version=v),m}},{test:[/Maxthon|mxios/i],describe:function(d){var m={name:"Maxthon"},v=C.default.getFirstMatch(F,d)||C.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,d);return v&&(m.version=v),m}},{test:[/epiphany/i],describe:function(d){var m={name:"Epiphany"},v=C.default.getFirstMatch(F,d)||C.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,d);return v&&(m.version=v),m}},{test:[/puffin/i],describe:function(d){var m={name:"Puffin"},v=C.default.getFirstMatch(F,d)||C.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,d);return v&&(m.version=v),m}},{test:[/sleipnir/i],describe:function(d){var m={name:"Sleipnir"},v=C.default.getFirstMatch(F,d)||C.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,d);return v&&(m.version=v),m}},{test:[/k-meleon/i],describe:function(d){var m={name:"K-Meleon"},v=C.default.getFirstMatch(F,d)||C.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,d);return v&&(m.version=v),m}},{test:[/micromessenger/i],describe:function(d){var m={name:"WeChat"},v=C.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,d)||C.default.getFirstMatch(F,d);return v&&(m.version=v),m}},{test:[/qqbrowser/i],describe:function(d){var m={name:/qqbrowserlite/i.test(d)?"QQ Browser Lite":"QQ Browser"},v=C.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,d)||C.default.getFirstMatch(F,d);return v&&(m.version=v),m}},{test:[/msie|trident/i],describe:function(d){var m={name:"Internet Explorer"},v=C.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,d);return v&&(m.version=v),m}},{test:[/\sedg\//i],describe:function(d){var m={name:"Microsoft Edge"},v=C.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,d);return v&&(m.version=v),m}},{test:[/edg([ea]|ios)/i],describe:function(d){var m={name:"Microsoft Edge"},v=C.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,d);return v&&(m.version=v),m}},{test:[/vivaldi/i],describe:function(d){var m={name:"Vivaldi"},v=C.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,d);return v&&(m.version=v),m}},{test:[/seamonkey/i],describe:function(d){var m={name:"SeaMonkey"},v=C.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,d);return v&&(m.version=v),m}},{test:[/sailfish/i],describe:function(d){var m={name:"Sailfish"},v=C.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,d);return v&&(m.version=v),m}},{test:[/silk/i],describe:function(d){var m={name:"Amazon Silk"},v=C.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,d);return v&&(m.version=v),m}},{test:[/phantom/i],describe:function(d){var m={name:"PhantomJS"},v=C.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,d);return v&&(m.version=v),m}},{test:[/slimerjs/i],describe:function(d){var m={name:"SlimerJS"},v=C.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,d);return v&&(m.version=v),m}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(d){var m={name:"BlackBerry"},v=C.default.getFirstMatch(F,d)||C.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,d);return v&&(m.version=v),m}},{test:[/(web|hpw)[o0]s/i],describe:function(d){var m={name:"WebOS Browser"},v=C.default.getFirstMatch(F,d)||C.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,d);return v&&(m.version=v),m}},{test:[/bada/i],describe:function(d){var m={name:"Bada"},v=C.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,d);return v&&(m.version=v),m}},{test:[/tizen/i],describe:function(d){var m={name:"Tizen"},v=C.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,d)||C.default.getFirstMatch(F,d);return v&&(m.version=v),m}},{test:[/qupzilla/i],describe:function(d){var m={name:"QupZilla"},v=C.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,d)||C.default.getFirstMatch(F,d);return v&&(m.version=v),m}},{test:[/firefox|iceweasel|fxios/i],describe:function(d){var m={name:"Firefox"},v=C.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,d);return v&&(m.version=v),m}},{test:[/electron/i],describe:function(d){var m={name:"Electron"},v=C.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,d);return v&&(m.version=v),m}},{test:[/MiuiBrowser/i],describe:function(d){var m={name:"Miui"},v=C.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,d);return v&&(m.version=v),m}},{test:[/chromium/i],describe:function(d){var m={name:"Chromium"},v=C.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,d)||C.default.getFirstMatch(F,d);return v&&(m.version=v),m}},{test:[/chrome|crios|crmo/i],describe:function(d){var m={name:"Chrome"},v=C.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,d);return v&&(m.version=v),m}},{test:[/GSA/i],describe:function(d){var m={name:"Google Search"},v=C.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,d);return v&&(m.version=v),m}},{test:function(d){var m=!d.test(/like android/i),v=d.test(/android/i);return m&&v},describe:function(d){var m={name:"Android Browser"},v=C.default.getFirstMatch(F,d);return v&&(m.version=v),m}},{test:[/playstation 4/i],describe:function(d){var m={name:"PlayStation 4"},v=C.default.getFirstMatch(F,d);return v&&(m.version=v),m}},{test:[/safari|applewebkit/i],describe:function(d){var m={name:"Safari"},v=C.default.getFirstMatch(F,d);return v&&(m.version=v),m}},{test:[/.*/i],describe:function(d){var m=-1!==d.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:C.default.getFirstMatch(m,d),version:C.default.getSecondMatch(m,d)}}}],O.exports=x.default},93:function(O,x,I){"use strict";x.__esModule=!0,x.default=void 0;var o,C=(o=I(17))&&o.__esModule?o:{default:o},F=I(18);x.default=[{test:[/Roku\/DVP/],describe:function(d){var m=C.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,d);return{name:F.OS_MAP.Roku,version:m}}},{test:[/windows phone/i],describe:function(d){var m=C.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,d);return{name:F.OS_MAP.WindowsPhone,version:m}}},{test:[/windows /i],describe:function(d){var m=C.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,d),v=C.default.getWindowsVersionName(m);return{name:F.OS_MAP.Windows,version:m,versionName:v}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(d){var m={name:F.OS_MAP.iOS},v=C.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,d);return v&&(m.version=v),m}},{test:[/macintosh/i],describe:function(d){var m=C.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,d).replace(/[_\s]/g,"."),v=C.default.getMacOSVersionName(m),N={name:F.OS_MAP.MacOS,version:m};return v&&(N.versionName=v),N}},{test:[/(ipod|iphone|ipad)/i],describe:function(d){var m=C.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,d).replace(/[_\s]/g,".");return{name:F.OS_MAP.iOS,version:m}}},{test:function(d){var m=!d.test(/like android/i),v=d.test(/android/i);return m&&v},describe:function(d){var m=C.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,d),v=C.default.getAndroidVersionName(m),N={name:F.OS_MAP.Android,version:m};return v&&(N.versionName=v),N}},{test:[/(web|hpw)[o0]s/i],describe:function(d){var m=C.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,d),v={name:F.OS_MAP.WebOS};return m&&m.length&&(v.version=m),v}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(d){var m=C.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,d)||C.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,d)||C.default.getFirstMatch(/\bbb(\d+)/i,d);return{name:F.OS_MAP.BlackBerry,version:m}}},{test:[/bada/i],describe:function(d){var m=C.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,d);return{name:F.OS_MAP.Bada,version:m}}},{test:[/tizen/i],describe:function(d){var m=C.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,d);return{name:F.OS_MAP.Tizen,version:m}}},{test:[/linux/i],describe:function(){return{name:F.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:F.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(d){var m=C.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,d);return{name:F.OS_MAP.PlayStation4,version:m}}}],O.exports=x.default},94:function(O,x,I){"use strict";x.__esModule=!0,x.default=void 0;var o,C=(o=I(17))&&o.__esModule?o:{default:o},F=I(18);x.default=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(d){var m=C.default.getFirstMatch(/(can-l01)/i,d)&&"Nova",v={type:F.PLATFORMS_MAP.mobile,vendor:"Huawei"};return m&&(v.model=m),v}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:F.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:F.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:F.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:F.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:F.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:F.PLATFORMS_MAP.tablet}}},{test:function(d){var m=d.test(/ipod|iphone/i),v=d.test(/like (ipod|iphone)/i);return m&&!v},describe:function(d){var m=C.default.getFirstMatch(/(ipod|iphone)/i,d);return{type:F.PLATFORMS_MAP.mobile,vendor:"Apple",model:m}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:F.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:F.PLATFORMS_MAP.mobile}}},{test:function(d){return"blackberry"===d.getBrowserName(!0)},describe:function(){return{type:F.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(d){return"bada"===d.getBrowserName(!0)},describe:function(){return{type:F.PLATFORMS_MAP.mobile}}},{test:function(d){return"windows phone"===d.getBrowserName()},describe:function(){return{type:F.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(d){var m=Number(String(d.getOSVersion()).split(".")[0]);return"android"===d.getOSName(!0)&&m>=3},describe:function(){return{type:F.PLATFORMS_MAP.tablet}}},{test:function(d){return"android"===d.getOSName(!0)},describe:function(){return{type:F.PLATFORMS_MAP.mobile}}},{test:function(d){return"macos"===d.getOSName(!0)},describe:function(){return{type:F.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(d){return"windows"===d.getOSName(!0)},describe:function(){return{type:F.PLATFORMS_MAP.desktop}}},{test:function(d){return"linux"===d.getOSName(!0)},describe:function(){return{type:F.PLATFORMS_MAP.desktop}}},{test:function(d){return"playstation 4"===d.getOSName(!0)},describe:function(){return{type:F.PLATFORMS_MAP.tv}}},{test:function(d){return"roku"===d.getOSName(!0)},describe:function(){return{type:F.PLATFORMS_MAP.tv}}}],O.exports=x.default},95:function(O,x,I){"use strict";x.__esModule=!0,x.default=void 0;var o,C=(o=I(17))&&o.__esModule?o:{default:o},F=I(18);x.default=[{test:function(d){return"microsoft edge"===d.getBrowserName(!0)},describe:function(d){if(/\sedg\//i.test(d))return{name:F.ENGINE_MAP.Blink};var m=C.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,d);return{name:F.ENGINE_MAP.EdgeHTML,version:m}}},{test:[/trident/i],describe:function(d){var m={name:F.ENGINE_MAP.Trident},v=C.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,d);return v&&(m.version=v),m}},{test:function(d){return d.test(/presto/i)},describe:function(d){var m={name:F.ENGINE_MAP.Presto},v=C.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,d);return v&&(m.version=v),m}},{test:function(d){var m=d.test(/gecko/i),v=d.test(/like gecko/i);return m&&!v},describe:function(d){var m={name:F.ENGINE_MAP.Gecko},v=C.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,d);return v&&(m.version=v),m}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:F.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(d){var m={name:F.ENGINE_MAP.WebKit},v=C.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,d);return v&&(m.version=v),m}}],O.exports=x.default}})},8219:we=>{we.exports=function I(o){return"[object String]"=={}.toString.call(o)?o.replace(O,".$1").replace(x,""):""};var O=/\[([^\[\]]+)\]/g,x=/^[.]*|[.]*$/g},3172:(we,O,x)=>{var I=x(548),o=x(8461),C="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;O.Buffer=m,O.SlowBuffer=function B(ye){return+ye!=ye&&(ye=0),m.alloc(+ye)},O.INSPECT_MAX_BYTES=50;var F=2147483647;function d(ye){if(ye>F)throw new RangeError('The value "'+ye+'" is invalid for option "size"');var $=new Uint8Array(ye);return Object.setPrototypeOf($,m.prototype),$}function m(ye,$,k){if("number"==typeof ye){if("string"==typeof $)throw new TypeError('The "string" argument must be of type string. Received type number');return L(ye)}return v(ye,$,k)}function v(ye,$,k){if("string"==typeof ye)return function X(ye,$){if(("string"!=typeof $||""===$)&&($="utf8"),!m.isEncoding($))throw new TypeError("Unknown encoding: "+$);var k=0|z(ye,$),K=d(k),he=K.write(ye,$);return he!==k&&(K=K.slice(0,he)),K}(ye,$);if(ArrayBuffer.isView(ye))return function Q(ye){if(ce(ye,Uint8Array)){var $=new Uint8Array(ye);return q($.buffer,$.byteOffset,$.byteLength)}return H(ye)}(ye);if(null==ye)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ye);if(ce(ye,ArrayBuffer)||ye&&ce(ye.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(ce(ye,SharedArrayBuffer)||ye&&ce(ye.buffer,SharedArrayBuffer)))return q(ye,$,k);if("number"==typeof ye)throw new TypeError('The "value" argument must not be of type number. Received type number');var K=ye.valueOf&&ye.valueOf();if(null!=K&&K!==ye)return m.from(K,$,k);var he=function Y(ye){if(m.isBuffer(ye)){var $=0|le(ye.length),k=d($);return 0===k.length||ye.copy(k,0,0,$),k}return void 0!==ye.length?"number"!=typeof ye.length||me(ye.length)?d(0):H(ye):"Buffer"===ye.type&&Array.isArray(ye.data)?H(ye.data):void 0}(ye);if(he)return he;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof ye[Symbol.toPrimitive])return m.from(ye[Symbol.toPrimitive]("string"),$,k);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ye)}function N(ye){if("number"!=typeof ye)throw new TypeError('"size" argument must be of type number');if(ye<0)throw new RangeError('The value "'+ye+'" is invalid for option "size"')}function L(ye){return N(ye),d(ye<0?0:0|le(ye))}function H(ye){for(var $=ye.length<0?0:0|le(ye.length),k=d($),K=0;K<$;K+=1)k[K]=255&ye[K];return k}function q(ye,$,k){if($<0||ye.byteLength<$)throw new RangeError('"offset" is outside of buffer bounds');if(ye.byteLength<$+(k||0))throw new RangeError('"length" is outside of buffer bounds');var K;return K=void 0===$&&void 0===k?new Uint8Array(ye):void 0===k?new Uint8Array(ye,$):new Uint8Array(ye,$,k),Object.setPrototypeOf(K,m.prototype),K}function le(ye){if(ye>=F)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+F.toString(16)+" bytes");return 0|ye}function z(ye,$){if(m.isBuffer(ye))return ye.length;if(ArrayBuffer.isView(ye)||ce(ye,ArrayBuffer))return ye.byteLength;if("string"!=typeof ye)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ye);var k=ye.length,K=arguments.length>2&&!0===arguments[2];if(!K&&0===k)return 0;for(var he=!1;;)switch($){case"ascii":case"latin1":case"binary":return k;case"utf8":case"utf-8":return de(ye).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*k;case"hex":return k>>>1;case"base64":return Te(ye).length;default:if(he)return K?-1:de(ye).length;$=(""+$).toLowerCase(),he=!0}}function U(ye,$,k){var K=!1;if((void 0===$||$<0)&&($=0),$>this.length||((void 0===k||k>this.length)&&(k=this.length),k<=0)||(k>>>=0)<=($>>>=0))return"";for(ye||(ye="utf8");;)switch(ye){case"hex":return Ge(this,$,k);case"utf8":case"utf-8":return P(this,$,k);case"ascii":return Oe(this,$,k);case"latin1":case"binary":return oe(this,$,k);case"base64":return D(this,$,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return at(this,$,k);default:if(K)throw new TypeError("Unknown encoding: "+ye);ye=(ye+"").toLowerCase(),K=!0}}function ee(ye,$,k){var K=ye[$];ye[$]=ye[k],ye[k]=K}function ge(ye,$,k,K,he){if(0===ye.length)return-1;if("string"==typeof k?(K=k,k=0):k>2147483647?k=2147483647:k<-2147483648&&(k=-2147483648),me(k=+k)&&(k=he?0:ye.length-1),k<0&&(k=ye.length+k),k>=ye.length){if(he)return-1;k=ye.length-1}else if(k<0){if(!he)return-1;k=0}if("string"==typeof $&&($=m.from($,K)),m.isBuffer($))return 0===$.length?-1:_e(ye,$,k,K,he);if("number"==typeof $)return $&=255,"function"==typeof Uint8Array.prototype.indexOf?he?Uint8Array.prototype.indexOf.call(ye,$,k):Uint8Array.prototype.lastIndexOf.call(ye,$,k):_e(ye,[$],k,K,he);throw new TypeError("val must be string, number or Buffer")}function _e(ye,$,k,K,he){var At,Me=1,Ye=ye.length,it=$.length;if(void 0!==K&&("ucs2"===(K=String(K).toLowerCase())||"ucs-2"===K||"utf16le"===K||"utf-16le"===K)){if(ye.length<2||$.length<2)return-1;Me=2,Ye/=2,it/=2,k/=2}function It(Dn,Wt){return 1===Me?Dn[Wt]:Dn.readUInt16BE(Wt*Me)}if(he){var zt=-1;for(At=k;At<Ye;At++)if(It(ye,At)===It($,-1===zt?0:At-zt)){if(-1===zt&&(zt=At),At-zt+1===it)return zt*Me}else-1!==zt&&(At-=At-zt),zt=-1}else for(k+it>Ye&&(k=Ye-it),At=k;At>=0;At--){for(var Xt=!0,Pe=0;Pe<it;Pe++)if(It(ye,At+Pe)!==It($,Pe)){Xt=!1;break}if(Xt)return At}return-1}function pe(ye,$,k,K){k=Number(k)||0;var he=ye.length-k;K?(K=Number(K))>he&&(K=he):K=he;var Me=$.length;K>Me/2&&(K=Me/2);for(var Ye=0;Ye<K;++Ye){var it=parseInt($.substr(2*Ye,2),16);if(me(it))return Ye;ye[k+Ye]=it}return Ye}function g(ye,$,k,K){return ze(de($,ye.length-k),ye,k,K)}function A(ye,$,k,K){return ze(function te(ye){for(var $=[],k=0;k<ye.length;++k)$.push(255&ye.charCodeAt(k));return $}($),ye,k,K)}function y(ye,$,k,K){return ze(Te($),ye,k,K)}function E(ye,$,k,K){return ze(function ae(ye,$){for(var k,K,Me=[],Ye=0;Ye<ye.length&&!(($-=2)<0);++Ye)K=(k=ye.charCodeAt(Ye))>>8,Me.push(k%256),Me.push(K);return Me}($,ye.length-k),ye,k,K)}function D(ye,$,k){return I.fromByteArray(0===$&&k===ye.length?ye:ye.slice($,k))}function P(ye,$,k){k=Math.min(ye.length,k);for(var K=[],he=$;he<k;){var It,At,zt,Xt,Me=ye[he],Ye=null,it=Me>239?4:Me>223?3:Me>191?2:1;if(he+it<=k)switch(it){case 1:Me<128&&(Ye=Me);break;case 2:128==(192&(It=ye[he+1]))&&(Xt=(31&Me)<<6|63&It)>127&&(Ye=Xt);break;case 3:At=ye[he+2],128==(192&(It=ye[he+1]))&&128==(192&At)&&(Xt=(15&Me)<<12|(63&It)<<6|63&At)>2047&&(Xt<55296||Xt>57343)&&(Ye=Xt);break;case 4:At=ye[he+2],zt=ye[he+3],128==(192&(It=ye[he+1]))&&128==(192&At)&&128==(192&zt)&&(Xt=(15&Me)<<18|(63&It)<<12|(63&At)<<6|63&zt)>65535&&Xt<1114112&&(Ye=Xt)}null===Ye?(Ye=65533,it=1):Ye>65535&&(K.push((Ye-=65536)>>>10&1023|55296),Ye=56320|1023&Ye),K.push(Ye),he+=it}return function fe(ye){var $=ye.length;if($<=4096)return String.fromCharCode.apply(String,ye);for(var k="",K=0;K<$;)k+=String.fromCharCode.apply(String,ye.slice(K,K+=4096));return k}(K)}function Oe(ye,$,k){var K="";k=Math.min(ye.length,k);for(var he=$;he<k;++he)K+=String.fromCharCode(127&ye[he]);return K}function oe(ye,$,k){var K="";k=Math.min(ye.length,k);for(var he=$;he<k;++he)K+=String.fromCharCode(ye[he]);return K}function Ge(ye,$,k){var K=ye.length;(!$||$<0)&&($=0),(!k||k<0||k>K)&&(k=K);for(var he="",Me=$;Me<k;++Me)he+=rt[ye[Me]];return he}function at(ye,$,k){for(var K=ye.slice($,k),he="",Me=0;Me<K.length-1;Me+=2)he+=String.fromCharCode(K[Me]+256*K[Me+1]);return he}function Fe(ye,$,k){if(ye%1!=0||ye<0)throw new RangeError("offset is not uint");if(ye+$>k)throw new RangeError("Trying to access beyond buffer length")}function We(ye,$,k,K,he,Me){if(!m.isBuffer(ye))throw new TypeError('"buffer" argument must be a Buffer instance');if($>he||$<Me)throw new RangeError('"value" argument is out of bounds');if(k+K>ye.length)throw new RangeError("Index out of range")}function Qe(ye,$,k,K,he,Me){if(k+K>ye.length)throw new RangeError("Index out of range");if(k<0)throw new RangeError("Index out of range")}function ft(ye,$,k,K,he){return $=+$,k>>>=0,he||Qe(ye,0,k,4),o.write(ye,$,k,K,23,4),k+4}function Ze(ye,$,k,K,he){return $=+$,k>>>=0,he||Qe(ye,0,k,8),o.write(ye,$,k,K,52,8),k+8}O.kMaxLength=F,!(m.TYPED_ARRAY_SUPPORT=function j(){try{var ye=new Uint8Array(1),$={foo:function(){return 42}};return Object.setPrototypeOf($,Uint8Array.prototype),Object.setPrototypeOf(ye,$),42===ye.foo()}catch{return!1}}())&&"undefined"!=typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}}),m.poolSize=8192,m.from=function(ye,$,k){return v(ye,$,k)},Object.setPrototypeOf(m.prototype,Uint8Array.prototype),Object.setPrototypeOf(m,Uint8Array),m.alloc=function(ye,$,k){return function M(ye,$,k){return N(ye),ye<=0?d(ye):void 0!==$?"string"==typeof k?d(ye).fill($,k):d(ye).fill($):d(ye)}(ye,$,k)},m.allocUnsafe=function(ye){return L(ye)},m.allocUnsafeSlow=function(ye){return L(ye)},m.isBuffer=function($){return null!=$&&!0===$._isBuffer&&$!==m.prototype},m.compare=function($,k){if(ce($,Uint8Array)&&($=m.from($,$.offset,$.byteLength)),ce(k,Uint8Array)&&(k=m.from(k,k.offset,k.byteLength)),!m.isBuffer($)||!m.isBuffer(k))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if($===k)return 0;for(var K=$.length,he=k.length,Me=0,Ye=Math.min(K,he);Me<Ye;++Me)if($[Me]!==k[Me]){K=$[Me],he=k[Me];break}return K<he?-1:he<K?1:0},m.isEncoding=function($){switch(String($).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function($,k){if(!Array.isArray($))throw new TypeError('"list" argument must be an Array of Buffers');if(0===$.length)return m.alloc(0);var K;if(void 0===k)for(k=0,K=0;K<$.length;++K)k+=$[K].length;var he=m.allocUnsafe(k),Me=0;for(K=0;K<$.length;++K){var Ye=$[K];if(ce(Ye,Uint8Array))Me+Ye.length>he.length?m.from(Ye).copy(he,Me):Uint8Array.prototype.set.call(he,Ye,Me);else{if(!m.isBuffer(Ye))throw new TypeError('"list" argument must be an Array of Buffers');Ye.copy(he,Me)}Me+=Ye.length}return he},m.byteLength=z,m.prototype._isBuffer=!0,m.prototype.swap16=function(){var $=this.length;if($%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var k=0;k<$;k+=2)ee(this,k,k+1);return this},m.prototype.swap32=function(){var $=this.length;if($%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var k=0;k<$;k+=4)ee(this,k,k+3),ee(this,k+1,k+2);return this},m.prototype.swap64=function(){var $=this.length;if($%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var k=0;k<$;k+=8)ee(this,k,k+7),ee(this,k+1,k+6),ee(this,k+2,k+5),ee(this,k+3,k+4);return this},m.prototype.toLocaleString=m.prototype.toString=function(){var $=this.length;return 0===$?"":0===arguments.length?P(this,0,$):U.apply(this,arguments)},m.prototype.equals=function($){if(!m.isBuffer($))throw new TypeError("Argument must be a Buffer");return this===$||0===m.compare(this,$)},m.prototype.inspect=function(){var $="",k=O.INSPECT_MAX_BYTES;return $=this.toString("hex",0,k).replace(/(.{2})/g,"$1 ").trim(),this.length>k&&($+=" ... "),"<Buffer "+$+">"},C&&(m.prototype[C]=m.prototype.inspect),m.prototype.compare=function($,k,K,he,Me){if(ce($,Uint8Array)&&($=m.from($,$.offset,$.byteLength)),!m.isBuffer($))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof $);if(void 0===k&&(k=0),void 0===K&&(K=$?$.length:0),void 0===he&&(he=0),void 0===Me&&(Me=this.length),k<0||K>$.length||he<0||Me>this.length)throw new RangeError("out of range index");if(he>=Me&&k>=K)return 0;if(he>=Me)return-1;if(k>=K)return 1;if(this===$)return 0;for(var Ye=(Me>>>=0)-(he>>>=0),it=(K>>>=0)-(k>>>=0),It=Math.min(Ye,it),At=this.slice(he,Me),zt=$.slice(k,K),Xt=0;Xt<It;++Xt)if(At[Xt]!==zt[Xt]){Ye=At[Xt],it=zt[Xt];break}return Ye<it?-1:it<Ye?1:0},m.prototype.includes=function($,k,K){return-1!==this.indexOf($,k,K)},m.prototype.indexOf=function($,k,K){return ge(this,$,k,K,!0)},m.prototype.lastIndexOf=function($,k,K){return ge(this,$,k,K,!1)},m.prototype.write=function($,k,K,he){if(void 0===k)he="utf8",K=this.length,k=0;else if(void 0===K&&"string"==typeof k)he=k,K=this.length,k=0;else{if(!isFinite(k))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");k>>>=0,isFinite(K)?(K>>>=0,void 0===he&&(he="utf8")):(he=K,K=void 0)}var Me=this.length-k;if((void 0===K||K>Me)&&(K=Me),$.length>0&&(K<0||k<0)||k>this.length)throw new RangeError("Attempt to write outside buffer bounds");he||(he="utf8");for(var Ye=!1;;)switch(he){case"hex":return pe(this,$,k,K);case"utf8":case"utf-8":return g(this,$,k,K);case"ascii":case"latin1":case"binary":return A(this,$,k,K);case"base64":return y(this,$,k,K);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,$,k,K);default:if(Ye)throw new TypeError("Unknown encoding: "+he);he=(""+he).toLowerCase(),Ye=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},m.prototype.slice=function($,k){var K=this.length;($=~~$)<0?($+=K)<0&&($=0):$>K&&($=K),(k=void 0===k?K:~~k)<0?(k+=K)<0&&(k=0):k>K&&(k=K),k<$&&(k=$);var he=this.subarray($,k);return Object.setPrototypeOf(he,m.prototype),he},m.prototype.readUintLE=m.prototype.readUIntLE=function($,k,K){$>>>=0,k>>>=0,K||Fe($,k,this.length);for(var he=this[$],Me=1,Ye=0;++Ye<k&&(Me*=256);)he+=this[$+Ye]*Me;return he},m.prototype.readUintBE=m.prototype.readUIntBE=function($,k,K){$>>>=0,k>>>=0,K||Fe($,k,this.length);for(var he=this[$+--k],Me=1;k>0&&(Me*=256);)he+=this[$+--k]*Me;return he},m.prototype.readUint8=m.prototype.readUInt8=function($,k){return $>>>=0,k||Fe($,1,this.length),this[$]},m.prototype.readUint16LE=m.prototype.readUInt16LE=function($,k){return $>>>=0,k||Fe($,2,this.length),this[$]|this[$+1]<<8},m.prototype.readUint16BE=m.prototype.readUInt16BE=function($,k){return $>>>=0,k||Fe($,2,this.length),this[$]<<8|this[$+1]},m.prototype.readUint32LE=m.prototype.readUInt32LE=function($,k){return $>>>=0,k||Fe($,4,this.length),(this[$]|this[$+1]<<8|this[$+2]<<16)+16777216*this[$+3]},m.prototype.readUint32BE=m.prototype.readUInt32BE=function($,k){return $>>>=0,k||Fe($,4,this.length),16777216*this[$]+(this[$+1]<<16|this[$+2]<<8|this[$+3])},m.prototype.readIntLE=function($,k,K){$>>>=0,k>>>=0,K||Fe($,k,this.length);for(var he=this[$],Me=1,Ye=0;++Ye<k&&(Me*=256);)he+=this[$+Ye]*Me;return he>=(Me*=128)&&(he-=Math.pow(2,8*k)),he},m.prototype.readIntBE=function($,k,K){$>>>=0,k>>>=0,K||Fe($,k,this.length);for(var he=k,Me=1,Ye=this[$+--he];he>0&&(Me*=256);)Ye+=this[$+--he]*Me;return Ye>=(Me*=128)&&(Ye-=Math.pow(2,8*k)),Ye},m.prototype.readInt8=function($,k){return $>>>=0,k||Fe($,1,this.length),128&this[$]?-1*(255-this[$]+1):this[$]},m.prototype.readInt16LE=function($,k){$>>>=0,k||Fe($,2,this.length);var K=this[$]|this[$+1]<<8;return 32768&K?4294901760|K:K},m.prototype.readInt16BE=function($,k){$>>>=0,k||Fe($,2,this.length);var K=this[$+1]|this[$]<<8;return 32768&K?4294901760|K:K},m.prototype.readInt32LE=function($,k){return $>>>=0,k||Fe($,4,this.length),this[$]|this[$+1]<<8|this[$+2]<<16|this[$+3]<<24},m.prototype.readInt32BE=function($,k){return $>>>=0,k||Fe($,4,this.length),this[$]<<24|this[$+1]<<16|this[$+2]<<8|this[$+3]},m.prototype.readFloatLE=function($,k){return $>>>=0,k||Fe($,4,this.length),o.read(this,$,!0,23,4)},m.prototype.readFloatBE=function($,k){return $>>>=0,k||Fe($,4,this.length),o.read(this,$,!1,23,4)},m.prototype.readDoubleLE=function($,k){return $>>>=0,k||Fe($,8,this.length),o.read(this,$,!0,52,8)},m.prototype.readDoubleBE=function($,k){return $>>>=0,k||Fe($,8,this.length),o.read(this,$,!1,52,8)},m.prototype.writeUintLE=m.prototype.writeUIntLE=function($,k,K,he){$=+$,k>>>=0,K>>>=0,he||We(this,$,k,K,Math.pow(2,8*K)-1,0);var Ye=1,it=0;for(this[k]=255&$;++it<K&&(Ye*=256);)this[k+it]=$/Ye&255;return k+K},m.prototype.writeUintBE=m.prototype.writeUIntBE=function($,k,K,he){$=+$,k>>>=0,K>>>=0,he||We(this,$,k,K,Math.pow(2,8*K)-1,0);var Ye=K-1,it=1;for(this[k+Ye]=255&$;--Ye>=0&&(it*=256);)this[k+Ye]=$/it&255;return k+K},m.prototype.writeUint8=m.prototype.writeUInt8=function($,k,K){return $=+$,k>>>=0,K||We(this,$,k,1,255,0),this[k]=255&$,k+1},m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function($,k,K){return $=+$,k>>>=0,K||We(this,$,k,2,65535,0),this[k]=255&$,this[k+1]=$>>>8,k+2},m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function($,k,K){return $=+$,k>>>=0,K||We(this,$,k,2,65535,0),this[k]=$>>>8,this[k+1]=255&$,k+2},m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function($,k,K){return $=+$,k>>>=0,K||We(this,$,k,4,4294967295,0),this[k+3]=$>>>24,this[k+2]=$>>>16,this[k+1]=$>>>8,this[k]=255&$,k+4},m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function($,k,K){return $=+$,k>>>=0,K||We(this,$,k,4,4294967295,0),this[k]=$>>>24,this[k+1]=$>>>16,this[k+2]=$>>>8,this[k+3]=255&$,k+4},m.prototype.writeIntLE=function($,k,K,he){if($=+$,k>>>=0,!he){var Me=Math.pow(2,8*K-1);We(this,$,k,K,Me-1,-Me)}var Ye=0,it=1,It=0;for(this[k]=255&$;++Ye<K&&(it*=256);)$<0&&0===It&&0!==this[k+Ye-1]&&(It=1),this[k+Ye]=($/it>>0)-It&255;return k+K},m.prototype.writeIntBE=function($,k,K,he){if($=+$,k>>>=0,!he){var Me=Math.pow(2,8*K-1);We(this,$,k,K,Me-1,-Me)}var Ye=K-1,it=1,It=0;for(this[k+Ye]=255&$;--Ye>=0&&(it*=256);)$<0&&0===It&&0!==this[k+Ye+1]&&(It=1),this[k+Ye]=($/it>>0)-It&255;return k+K},m.prototype.writeInt8=function($,k,K){return $=+$,k>>>=0,K||We(this,$,k,1,127,-128),$<0&&($=255+$+1),this[k]=255&$,k+1},m.prototype.writeInt16LE=function($,k,K){return $=+$,k>>>=0,K||We(this,$,k,2,32767,-32768),this[k]=255&$,this[k+1]=$>>>8,k+2},m.prototype.writeInt16BE=function($,k,K){return $=+$,k>>>=0,K||We(this,$,k,2,32767,-32768),this[k]=$>>>8,this[k+1]=255&$,k+2},m.prototype.writeInt32LE=function($,k,K){return $=+$,k>>>=0,K||We(this,$,k,4,2147483647,-2147483648),this[k]=255&$,this[k+1]=$>>>8,this[k+2]=$>>>16,this[k+3]=$>>>24,k+4},m.prototype.writeInt32BE=function($,k,K){return $=+$,k>>>=0,K||We(this,$,k,4,2147483647,-2147483648),$<0&&($=4294967295+$+1),this[k]=$>>>24,this[k+1]=$>>>16,this[k+2]=$>>>8,this[k+3]=255&$,k+4},m.prototype.writeFloatLE=function($,k,K){return ft(this,$,k,!0,K)},m.prototype.writeFloatBE=function($,k,K){return ft(this,$,k,!1,K)},m.prototype.writeDoubleLE=function($,k,K){return Ze(this,$,k,!0,K)},m.prototype.writeDoubleBE=function($,k,K){return Ze(this,$,k,!1,K)},m.prototype.copy=function($,k,K,he){if(!m.isBuffer($))throw new TypeError("argument should be a Buffer");if(K||(K=0),!he&&0!==he&&(he=this.length),k>=$.length&&(k=$.length),k||(k=0),he>0&&he<K&&(he=K),he===K||0===$.length||0===this.length)return 0;if(k<0)throw new RangeError("targetStart out of bounds");if(K<0||K>=this.length)throw new RangeError("Index out of range");if(he<0)throw new RangeError("sourceEnd out of bounds");he>this.length&&(he=this.length),$.length-k<he-K&&(he=$.length-k+K);var Me=he-K;return this===$&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(k,K,he):Uint8Array.prototype.set.call($,this.subarray(K,he),k),Me},m.prototype.fill=function($,k,K,he){if("string"==typeof $){if("string"==typeof k?(he=k,k=0,K=this.length):"string"==typeof K&&(he=K,K=this.length),void 0!==he&&"string"!=typeof he)throw new TypeError("encoding must be a string");if("string"==typeof he&&!m.isEncoding(he))throw new TypeError("Unknown encoding: "+he);if(1===$.length){var Me=$.charCodeAt(0);("utf8"===he&&Me<128||"latin1"===he)&&($=Me)}}else"number"==typeof $?$&=255:"boolean"==typeof $&&($=Number($));if(k<0||this.length<k||this.length<K)throw new RangeError("Out of range index");if(K<=k)return this;var Ye;if(k>>>=0,K=void 0===K?this.length:K>>>0,$||($=0),"number"==typeof $)for(Ye=k;Ye<K;++Ye)this[Ye]=$;else{var it=m.isBuffer($)?$:m.from($,he),It=it.length;if(0===It)throw new TypeError('The value "'+$+'" is invalid for argument "value"');for(Ye=0;Ye<K-k;++Ye)this[Ye+k]=it[Ye%It]}return this};var Ue=/[^+/0-9A-Za-z-_]/g;function de(ye,$){$=$||1/0;for(var k,K=ye.length,he=null,Me=[],Ye=0;Ye<K;++Ye){if((k=ye.charCodeAt(Ye))>55295&&k<57344){if(!he){if(k>56319){($-=3)>-1&&Me.push(239,191,189);continue}if(Ye+1===K){($-=3)>-1&&Me.push(239,191,189);continue}he=k;continue}if(k<56320){($-=3)>-1&&Me.push(239,191,189),he=k;continue}k=65536+(he-55296<<10|k-56320)}else he&&($-=3)>-1&&Me.push(239,191,189);if(he=null,k<128){if(($-=1)<0)break;Me.push(k)}else if(k<2048){if(($-=2)<0)break;Me.push(k>>6|192,63&k|128)}else if(k<65536){if(($-=3)<0)break;Me.push(k>>12|224,k>>6&63|128,63&k|128)}else{if(!(k<1114112))throw new Error("Invalid code point");if(($-=4)<0)break;Me.push(k>>18|240,k>>12&63|128,k>>6&63|128,63&k|128)}}return Me}function Te(ye){return I.toByteArray(function nt(ye){if((ye=(ye=ye.split("=")[0]).trim().replace(Ue,"")).length<2)return"";for(;ye.length%4!=0;)ye+="=";return ye}(ye))}function ze(ye,$,k,K){for(var he=0;he<K&&!(he+k>=$.length||he>=ye.length);++he)$[he+k]=ye[he];return he}function ce(ye,$){return ye instanceof $||null!=ye&&null!=ye.constructor&&null!=ye.constructor.name&&ye.constructor.name===$.name}function me(ye){return ye!=ye}var rt=function(){for(var ye="0123456789abcdef",$=new Array(256),k=0;k<16;++k)for(var K=16*k,he=0;he<16;++he)$[K+he]=ye[k]+ye[he];return $}()},5834:(we,O,x)=>{var I=x(5203),o=x(5685),C=o(I("String.prototype.indexOf"));we.exports=function(j,d){var m=I(j,!!d);return"function"==typeof m&&C(j,".prototype.")>-1?o(m):m}},5685:(we,O,x)=>{var I=x(4444),o=x(5203),C=o("%Function.prototype.apply%"),F=o("%Function.prototype.call%"),j=o("%Reflect.apply%",!0)||I.call(F,C),d=o("%Object.getOwnPropertyDescriptor%",!0),m=o("%Object.defineProperty%",!0),v=o("%Math.max%");if(m)try{m({},"a",{value:1})}catch{m=null}we.exports=function(L){var X=j(I,F,arguments);if(d&&m){var H=d(X,"length");H.configurable&&m(X,"length",{value:1+v(0,L.length-(arguments.length-1))})}return X};var N=function(){return j(I,C,arguments)};m?m(we.exports,"apply",{value:N}):we.exports.apply=N},1510:function(we,O){var o;void 0!==(o=function(){return new function(){var F=this;F.init=function(){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.repeat=function(B){return new Array(1+B).join(this)}},F.init();var v=/\/\*[\s\S]*?\*\//g,N=/([^\:]+):([^\;]*);/,M=/(\/\*[\s\S]*?\*\/)|([^\s\;\{\}][^\;\{\}]*(?=\{))|(\})|([^\;\{\}]+\;(?!\s*\*\/))/gim,q=function(B){return void 0===B||0==B.length||null==B};F.toJSON=function(B,z){var U={children:{},attributes:{}},ee=null,ge=0;for(void 0===z&&(z={ordered:!1,comments:!1,stripComments:!1,split:!1}),z.stripComments&&(z.comments=!1,B=B.replace(v,""));null!=(ee=M.exec(B));)if(!q(ee[1])&&z.comments){var _e=ee[1].trim();U[ge++]=_e}else if(q(ee[2])){if(!q(ee[3]))return U;if(!q(ee[4])){var P=ee[4].trim(),ne=N.exec(P);if(ne){var pe=ne[1].trim(),fe=ne[2].trim();if(z.ordered)(A={}).name=pe,A.value=fe,A.type="attr",U[ge++]=A;else if(pe in U.attributes){var Oe=U.attributes[pe];Oe instanceof Array||(U.attributes[pe]=[Oe]),U.attributes[pe].push(fe)}else U.attributes[pe]=fe}else U[ge++]=P}}else{pe=ee[2].trim();var g=F.toJSON(B,z);if(z.ordered){var A;(A={}).name=pe,A.value=g,A.type="rule",U[ge++]=A}else{if(z.split)var y=pe.split(",");else y=[pe];for(i in y){var E=y[i].trim();if(E in U.children)for(var D in g.attributes)U.children[E].attributes[D]=g.attributes[D];else U.children[E]=g}}}return U},F.toCSS=function(B,z,U){var ee="";if(void 0===z&&(z=0),void 0===U&&(U=!1),B.attributes)for(i in B.attributes){var ge=B.attributes[i];if(ge instanceof Array)for(var _e=0;_e<ge.length;_e++)ee+=Y(i,ge[_e],z);else ee+=Y(i,ge,z)}if(B.children){var pe=!0;for(i in B.children)U&&!pe?ee+="\n":pe=!1,ee+=le(i,B.children[i],z)}return ee};var Y=function(B,z,U){return"\t".repeat(U)+B+": "+z+";\n"},le=function(B,z,U){var ee="\t".repeat(U)+B+" {\n";return(ee+=F.toCSS(z,U+1))+("\t".repeat(U)+"}\n")}}}.apply(O,[]))&&(we.exports=o)},1539:function(we,O){!function(x){"use strict";var I="function"==typeof Symbol?Symbol("curriable placeholder"):60881;function C(d,m){var v="number"==typeof m?m:d.length,N=function o(d,m){return function v(N){return function(){var Y,M=N.length,L=arguments,X=L.length,H=[],Q=0,q=m;if(M)for(var le=-1;++le<M;)H[le]=Y=N[le]===I&&Q<X?L[Q++]:N[le],Y!==I&&--q;if(Q<X)for(;Q<X;)H[H.length]=Y=L[Q],Y!==I&&Q<m&&--q,++Q;return q>0?v(H):d.apply(this,H)}}([])}(d,v);return N.arity=v,N.fn=d,N}function F(d){return d===I}function j(d){return d.fn}C.__=I,C.isPlaceholder=F,C.uncurry=j,x.__=I,x.curry=C,x.default=C,x.isPlaceholder=F,x.uncurry=j,Object.defineProperty(x,"__esModule",{value:!0})}(O)},2766:(we,O,x)=>{var I=Function.prototype.bind||x(3128);we.exports=function o(C,F){var j=function(){return 0===arguments.length?j:arguments.length>1?C.apply(F,arguments):I.call(C,F,arguments[0])};return j.uncurry=function(){return C},j}},9303:function(we){we.exports=function(){"use strict";const O=(M,L)=>L,x=(M,L)=>Object.assign({},L),I=(M,L)=>L.slice(),m={$push:(M,L)=>M.concat(L),$append:(M,L)=>M.concat(L),$prepend:(M,L)=>L.concat(M),$replace:function(M,L){let X;return M=M.slice(),Object.keys(L).forEach(H=>{if(X=Number.parseInt(H),X<0||Number.isNaN(X))throw Error(`Invalid index for $replace: ${H}`);M[X]=N(M[X],L[H])}),M},$insert:function(M,L){let X;return M=M.slice(),Object.keys(L).forEach(H=>{if(X=Number.parseInt(H),Number.isNaN(X))throw Error(`Invalid index for $insert: ${H}`);M.splice(X,0,L[H])}),M},$set:I},v={oo:function(M,L){return M=Object.assign({},M),Object.keys(L).forEach(X=>M[X]=N(M[X],L[X])),M},oa:x,ob:O,aa:function(M,L){return M=M.slice(),L.forEach((X,H)=>M[H]=N(M[H],X)),M},ao:function(M,L){const X=Object.keys(L)[0];return X in m?m[X](M.slice(),L[X]):L},ab:O,bb:O,bo:x,ba:I};function N(M,L){if(!L)return L;const X=Array.isArray(M)?"a":"object"==typeof M?"o":"b",H=Array.isArray(L)?"a":"object"==typeof L?"o":"b";return v[X+H](M,L)}return N}()},6915:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.default=O.nthElement=O.parentElements=void 0;var x=function(m){for(var v=[];m;){var N=m.nodeName.toLowerCase(),M=m.id?"#".concat(m.id):"",L="";m.className&&"string"==typeof m.className&&(L=".".concat(m.className.replace(/\s+/g,".").replace(/[:*+?^${}()|[\]\\]/gi,"\\$&"))),v.unshift({element:m,selector:N+M+L}),m=m.parentNode!==document&&m.parentNode}return v};O.parentElements=x;var I=function(m){for(var v=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],N=m,M=1;null!==N.previousElementSibling;)(!v||N.previousElementSibling.nodeName===m.nodeName)&&M++,N=N.previousElementSibling;return M};O.nthElement=I;O.default=function(m){if(!(m instanceof HTMLElement))throw new Error("element must be of type `HTMLElement`.");return function(m){var v=[];return m.forEach(function(N){(function(m,v){var N=""===v?m:"".concat(v," > ").concat(m);return document.querySelectorAll(N).length>1})(N.selector,v.join(" > "))&&(N.selector+=":nth-of-type(".concat(I(N.element),")")),v.push(N.selector)}),v.join(" > ")}(x(m))}},9925:we=>{var O=Object.prototype.toString;function C(F){return F.replace(/\uffff/g,".")}we.exports=function x(F){for(var j=-1,d=function o(F){for(var j=-1,d=F.length,m=[];++j<d;)F[j]&&m.push(F[j]);return m}(function I(F){return("[object String]"===O.call(F)?F:"").replace(/\\\./g,"\uffff")}(F).split(".")),m=d.length,v=[];++j<m;)v.push(C(d[j]));return v}},9069:we=>{var I,O="object"==typeof Reflect?Reflect:null,x=O&&"function"==typeof O.apply?O.apply:function(U,ee,ge){return Function.prototype.apply.call(U,ee,ge)};I=O&&"function"==typeof O.ownKeys?O.ownKeys:Object.getOwnPropertySymbols?function(U){return Object.getOwnPropertyNames(U).concat(Object.getOwnPropertySymbols(U))}:function(U){return Object.getOwnPropertyNames(U)};var C=Number.isNaN||function(U){return U!=U};function F(){F.init.call(this)}we.exports=F,we.exports.once=function Y(z,U){return new Promise(function(ee,ge){function _e(g){z.removeListener(U,pe),ge(g)}function pe(){"function"==typeof z.removeListener&&z.removeListener("error",_e),ee([].slice.call(arguments))}B(z,U,pe,{once:!0}),"error"!==U&&function le(z,U,ee){"function"==typeof z.on&&B(z,"error",U,ee)}(z,_e,{once:!0})})},F.EventEmitter=F,F.prototype._events=void 0,F.prototype._eventsCount=0,F.prototype._maxListeners=void 0;var j=10;function d(z){if("function"!=typeof z)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof z)}function m(z){return void 0===z._maxListeners?F.defaultMaxListeners:z._maxListeners}function v(z,U,ee,ge){var _e,pe,g;if(d(ee),void 0===(pe=z._events)?(pe=z._events=Object.create(null),z._eventsCount=0):(void 0!==pe.newListener&&(z.emit("newListener",U,ee.listener?ee.listener:ee),pe=z._events),g=pe[U]),void 0===g)g=pe[U]=ee,++z._eventsCount;else if("function"==typeof g?g=pe[U]=ge?[ee,g]:[g,ee]:ge?g.unshift(ee):g.push(ee),(_e=m(z))>0&&g.length>_e&&!g.warned){g.warned=!0;var A=new Error("Possible EventEmitter memory leak detected. "+g.length+" "+String(U)+" listeners added. Use emitter.setMaxListeners() to increase limit");A.name="MaxListenersExceededWarning",A.emitter=z,A.type=U,A.count=g.length,function o(z){console&&console.warn&&console.warn(z)}(A)}return z}function N(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function M(z,U,ee){var ge={fired:!1,wrapFn:void 0,target:z,type:U,listener:ee},_e=N.bind(ge);return _e.listener=ee,ge.wrapFn=_e,_e}function L(z,U,ee){var ge=z._events;if(void 0===ge)return[];var _e=ge[U];return void 0===_e?[]:"function"==typeof _e?ee?[_e.listener||_e]:[_e]:ee?function q(z){for(var U=new Array(z.length),ee=0;ee<U.length;++ee)U[ee]=z[ee].listener||z[ee];return U}(_e):H(_e,_e.length)}function X(z){var U=this._events;if(void 0!==U){var ee=U[z];if("function"==typeof ee)return 1;if(void 0!==ee)return ee.length}return 0}function H(z,U){for(var ee=new Array(U),ge=0;ge<U;++ge)ee[ge]=z[ge];return ee}function B(z,U,ee,ge){if("function"==typeof z.on)ge.once?z.once(U,ee):z.on(U,ee);else{if("function"!=typeof z.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof z);z.addEventListener(U,function _e(pe){ge.once&&z.removeEventListener(U,_e),ee(pe)})}}Object.defineProperty(F,"defaultMaxListeners",{enumerable:!0,get:function(){return j},set:function(z){if("number"!=typeof z||z<0||C(z))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+z+".");j=z}}),F.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},F.prototype.setMaxListeners=function(U){if("number"!=typeof U||U<0||C(U))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+U+".");return this._maxListeners=U,this},F.prototype.getMaxListeners=function(){return m(this)},F.prototype.emit=function(U){for(var ee=[],ge=1;ge<arguments.length;ge++)ee.push(arguments[ge]);var _e="error"===U,pe=this._events;if(void 0!==pe)_e=_e&&void 0===pe.error;else if(!_e)return!1;if(_e){var g;if(ee.length>0&&(g=ee[0]),g instanceof Error)throw g;var A=new Error("Unhandled error."+(g?" ("+g.message+")":""));throw A.context=g,A}var y=pe[U];if(void 0===y)return!1;if("function"==typeof y)x(y,this,ee);else{var E=y.length,D=H(y,E);for(ge=0;ge<E;++ge)x(D[ge],this,ee)}return!0},F.prototype.on=F.prototype.addListener=function(U,ee){return v(this,U,ee,!1)},F.prototype.prependListener=function(U,ee){return v(this,U,ee,!0)},F.prototype.once=function(U,ee){return d(ee),this.on(U,M(this,U,ee)),this},F.prototype.prependOnceListener=function(U,ee){return d(ee),this.prependListener(U,M(this,U,ee)),this},F.prototype.off=F.prototype.removeListener=function(U,ee){var ge,_e,pe,g,A;if(d(ee),void 0===(_e=this._events))return this;if(void 0===(ge=_e[U]))return this;if(ge===ee||ge.listener===ee)0==--this._eventsCount?this._events=Object.create(null):(delete _e[U],_e.removeListener&&this.emit("removeListener",U,ge.listener||ee));else if("function"!=typeof ge){for(pe=-1,g=ge.length-1;g>=0;g--)if(ge[g]===ee||ge[g].listener===ee){A=ge[g].listener,pe=g;break}if(pe<0)return this;0===pe?ge.shift():function Q(z,U){for(;U+1<z.length;U++)z[U]=z[U+1];z.pop()}(ge,pe),1===ge.length&&(_e[U]=ge[0]),void 0!==_e.removeListener&&this.emit("removeListener",U,A||ee)}return this},F.prototype.removeAllListeners=function(U){var ee,ge,_e;if(void 0===(ge=this._events))return this;if(void 0===ge.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==ge[U]&&(0==--this._eventsCount?this._events=Object.create(null):delete ge[U]),this;if(0===arguments.length){var g,pe=Object.keys(ge);for(_e=0;_e<pe.length;++_e)"removeListener"!==(g=pe[_e])&&this.removeAllListeners(g);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(ee=ge[U]))this.removeListener(U,ee);else if(void 0!==ee)for(_e=ee.length-1;_e>=0;_e--)this.removeListener(U,ee[_e]);return this},F.prototype.listeners=function(U){return L(this,U,!0)},F.prototype.rawListeners=function(U){return L(this,U,!1)},F.listenerCount=function(z,U){return"function"==typeof z.listenerCount?z.listenerCount(U):X.call(z,U)},F.prototype.listenerCount=X,F.prototype.eventNames=function(){return this._eventsCount>0?I(this._events):[]}},3128:we=>{we.exports=function(O){var I,x=this;if(arguments.length<2)I=function(){if(this instanceof I){var F=x.apply(this,arguments);return Object(F)===F?F:this}return x.apply(O,arguments)};else{for(var o=new Array(arguments.length-1),C=1;C<arguments.length;C++)o[C-1]=arguments[C];I=function(){var d,F=o.length,j=new Array(F+arguments.length);for(d=0;d<F;d++)j[d]=o[d];for(d=0;d<arguments.length;d++)j[F+d]=arguments[d];if(this instanceof I){var m=x.apply(this,j);return Object(m)===m?m:this}return x.apply(O,j)}}return I.prototype=x.prototype,I}},3457:we=>{var O="Function.prototype.bind called on incompatible ",x=Array.prototype.slice,I=Object.prototype.toString,o="[object Function]";we.exports=function(F){var j=this;if("function"!=typeof j||I.call(j)!==o)throw new TypeError(O+j);for(var m,d=x.call(arguments,1),v=function(){if(this instanceof m){var H=j.apply(this,d.concat(x.call(arguments)));return Object(H)===H?H:this}return j.apply(F,d.concat(x.call(arguments)))},N=Math.max(0,j.length-d.length),M=[],L=0;L<N;L++)M.push("$"+L);if(m=Function("binder","return function ("+M.join(",")+"){ return binder.apply(this,arguments); }")(v),j.prototype){var X=function(){};X.prototype=j.prototype,m.prototype=new X,X.prototype=null}return m}},4444:(we,O,x)=>{var I=x(3457);we.exports=Function.prototype.bind||I},5203:(we,O,x)=>{var I,o=SyntaxError,C=Function,F=TypeError,j=function(A){try{return C('"use strict"; return ('+A+").constructor;")()}catch{}},d=Object.getOwnPropertyDescriptor;if(d)try{d({},"")}catch{d=null}var m=function(){throw new F},v=d?function(){try{return m}catch{try{return d(arguments,"callee").get}catch{return m}}}():m,N=x(2969)(),M=Object.getPrototypeOf||function(A){return A.__proto__},L={},X="undefined"==typeof Uint8Array?I:M(Uint8Array),H={"%AggregateError%":"undefined"==typeof AggregateError?I:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?I:ArrayBuffer,"%ArrayIteratorPrototype%":N?M([][Symbol.iterator]()):I,"%AsyncFromSyncIteratorPrototype%":I,"%AsyncFunction%":L,"%AsyncGenerator%":L,"%AsyncGeneratorFunction%":L,"%AsyncIteratorPrototype%":L,"%Atomics%":"undefined"==typeof Atomics?I:Atomics,"%BigInt%":"undefined"==typeof BigInt?I:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?I:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?I:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?I:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?I:FinalizationRegistry,"%Function%":C,"%GeneratorFunction%":L,"%Int8Array%":"undefined"==typeof Int8Array?I:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?I:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?I:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":N?M(M([][Symbol.iterator]())):I,"%JSON%":"object"==typeof JSON?JSON:I,"%Map%":"undefined"==typeof Map?I:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&N?M((new Map)[Symbol.iterator]()):I,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?I:Promise,"%Proxy%":"undefined"==typeof Proxy?I:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?I:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?I:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&N?M((new Set)[Symbol.iterator]()):I,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?I:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":N?M(""[Symbol.iterator]()):I,"%Symbol%":N?Symbol:I,"%SyntaxError%":o,"%ThrowTypeError%":v,"%TypedArray%":X,"%TypeError%":F,"%Uint8Array%":"undefined"==typeof Uint8Array?I:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?I:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?I:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?I:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?I:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?I:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?I:WeakSet},Q=function A(y){var E;if("%AsyncFunction%"===y)E=j("async function () {}");else if("%GeneratorFunction%"===y)E=j("function* () {}");else if("%AsyncGeneratorFunction%"===y)E=j("async function* () {}");else if("%AsyncGenerator%"===y){var D=A("%AsyncGeneratorFunction%");D&&(E=D.prototype)}else if("%AsyncIteratorPrototype%"===y){var P=A("%AsyncGenerator%");P&&(E=M(P.prototype))}return H[y]=E,E},q={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Y=x(4444),le=x(3164),B=Y.call(Function.call,Array.prototype.concat),z=Y.call(Function.apply,Array.prototype.splice),U=Y.call(Function.call,String.prototype.replace),ee=Y.call(Function.call,String.prototype.slice),ge=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,_e=/\\(\\)?/g,pe=function(y){var E=ee(y,0,1),D=ee(y,-1);if("%"===E&&"%"!==D)throw new o("invalid intrinsic syntax, expected closing `%`");if("%"===D&&"%"!==E)throw new o("invalid intrinsic syntax, expected opening `%`");var P=[];return U(y,ge,function(ne,fe,Oe,oe){P[P.length]=Oe?U(oe,_e,"$1"):fe||ne}),P},g=function(y,E){var P,D=y;if(le(q,D)&&(D="%"+(P=q[D])[0]+"%"),le(H,D)){var ne=H[D];if(ne===L&&(ne=Q(D)),void 0===ne&&!E)throw new F("intrinsic "+y+" exists, but is not available. Please file an issue!");return{alias:P,name:D,value:ne}}throw new o("intrinsic "+y+" does not exist!")};we.exports=function(y,E){if("string"!=typeof y||0===y.length)throw new F("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof E)throw new F('"allowMissing" argument must be a boolean');var D=pe(y),P=D.length>0?D[0]:"",ne=g("%"+P+"%",E),fe=ne.name,Oe=ne.value,oe=!1,Ge=ne.alias;Ge&&(P=Ge[0],z(D,B([0,1],Ge)));for(var at=1,Fe=!0;at<D.length;at+=1){var We=D[at],Qe=ee(We,0,1),ft=ee(We,-1);if(('"'===Qe||"'"===Qe||"`"===Qe||'"'===ft||"'"===ft||"`"===ft)&&Qe!==ft)throw new o("property names with quotes must have matching quotes");if(("constructor"===We||!Fe)&&(oe=!0),le(H,fe="%"+(P+="."+We)+"%"))Oe=H[fe];else if(null!=Oe){if(!(We in Oe)){if(!E)throw new F("base intrinsic for "+y+" exists, but the property is not available.");return}if(d&&at+1>=D.length){var Ze=d(Oe,We);Oe=(Fe=!!Ze)&&"get"in Ze&&!("originalValue"in Ze.get)?Ze.get:Oe[We]}else Fe=le(Oe,We),Oe=Oe[We];Fe&&!oe&&(H[fe]=Oe)}}return Oe}},2969:(we,O,x)=>{var I="undefined"!=typeof Symbol&&Symbol,o=x(1983);we.exports=function(){return"function"==typeof I&&"function"==typeof Symbol&&"symbol"==typeof I("foo")&&"symbol"==typeof Symbol("bar")&&o()}},1983:we=>{we.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var x={},I=Symbol("test"),o=Object(I);if("string"==typeof I||"[object Symbol]"!==Object.prototype.toString.call(I)||"[object Symbol]"!==Object.prototype.toString.call(o))return!1;for(I in x[I]=42,x)return!1;if("function"==typeof Object.keys&&0!==Object.keys(x).length||"function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(x).length)return!1;var F=Object.getOwnPropertySymbols(x);if(1!==F.length||F[0]!==I||!Object.prototype.propertyIsEnumerable.call(x,I))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var j=Object.getOwnPropertyDescriptor(x,I);if(42!==j.value||!0!==j.enumerable)return!1}return!0}},3164:(we,O,x)=>{var I=x(4444);we.exports=I.call(Function.call,Object.prototype.hasOwnProperty)},6308:(we,O,x)=>{x.r(O),x.d(O,{default:()=>ft,hash:()=>Qe});var o,C,F,j,I=x(1539),d="undefined"!=typeof Buffer&&"function"==typeof Buffer.from,m="function"==typeof Uint16Array,v=/\[object (HTML(.*)Element)\]/,N=/\[object (SVG(.*)Element)\]/,L=["Arguments","Array","ArrayBuffer","Boolean","DataView","Date","DocumentFragment","Error","Event","Float32Array","Float64Array","Function","Generator","GeneratorFunction","HTMLElement","Int8Array","Int16Array","Int32Array","Map","Null","Number","Object","Promise","RegExp","Set","String","Symbol","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","Undefined","WeakMap","WeakSet","Window"].reduce(function(Ze,Ue){return Ze["[object "+Ue+"]"]=Ue,Ze},{}),X=Object.keys(L).reduce(function(Ze,Ue){return Ze[L[Ue].toUpperCase()]=Ue,Ze},{}),H={"[object Map]":!0,"[object Set]":!0},Q={boolean:!0,function:!0,number:!0,string:!0,undefined:!0},q=((o={})[X.ARGUMENTS]=!0,o[X.ARRAY]=!0,o),Y=((C={})[X.REGEXP]=!0,C[X.SYMBOL]=!0,C),le=((F={})[X.FLOAT32ARRAY]=!0,F[X.FLOAT64ARRAY]=!0,F[X.INT8ARRAY]=!0,F[X.INT16ARRAY]=!0,F[X.INT32ARRAY]=!0,F[X.UINT8ARRAY]=!0,F[X.UINT8CLAMPEDARRAY]=!0,F[X.UINT16ARRAY]=!0,F[X.UINT32ARRAY]=!0,F),B=((j={})[X.GENERATOR]=!0,j[X.PROMISE]=!0,j[X.WEAKMAP]=!0,j[X.WEAKSET]=!0,j),z=/^\s*function\s*([^(]*)/i,U=Object.prototype.toString,ee=Object.keys;function g(Ze,Ue){return Ze>Ue}function A(Ze,Ue){return Ze[0]>Ue[0]}function y(Ze,Ue){for(var nt,de,te=0;te<Ze.length;++te){for(de=Ze[te],nt=te-1;~nt&&Ue(Ze[nt],de);--nt)Ze[nt+1]=Ze[nt];Ze[nt+1]=de}return Ze}var Oe=d?function ne(Ze){return Buffer.from(Ze).toString("utf8")}:m?function P(Ze){return String.fromCharCode.apply(null,new Uint16Array(Ze))}:function fe(){return""};function Ge(Ze,Ue){for(var nt=0;nt<Ze.length;++nt)if(Ze[nt]===Ue)return nt+1;return 0}function at(Ze,Ue,nt,de){if(void 0===de){var te=typeof Ze;if("string"===te||Q[te])return te+"|"+Ze;if(null===Ze)return"null|"+Ze}var ae=de||U.call(Ze);return q[ae]?Ze:ae===X.OBJECT?function D(Ze){for(var de,Ue=y(ee(Ze),g),nt={},te=0;te<Ue.length;++te)nt[de=Ue[te]]=Ze[de];return nt}(Ze):Y[ae]?L[ae]+"|"+Ze.toString():H[ae]?function E(Ze,Ue,nt){var de="function"==typeof Ze.get,te=[];de?(Ze.forEach(function(me,rt){te.push([We(rt,Ue,nt),We(me,Ue,nt)])}),y(te,A)):(Ze.forEach(function(me){te.push(We(me,Ue,nt))}),y(te,g));for(var ce,ae=function ge(Ze){return Ze.name||(Ze.toString().match(z)||[])[1]||"anonymous"}(Ze.constructor)+"|[",Te=0,ze=te.length;Te<ze;++Te)ce=te[Te],ae+=(Te?",":"")+(de?"["+ce[0]+","+ce[1]+"]":ce);return ae+"]"}(Ze,Ue,nt):ae===X.DATE?L[ae]+"|"+Ze.getTime():ae===X.ERROR?L[ae]+"|"+Ze.stack:ae===X.EVENT?function pe(Ze){return{bubbles:Ze.bubbles,cancelBubble:Ze.cancelBubble,cancelable:Ze.cancelable,composed:Ze.composed,currentTarget:Ze.currentTarget,defaultPrevented:Ze.defaultPrevented,eventPhase:Ze.eventPhase,isTrusted:Ze.isTrusted,returnValue:Ze.returnValue,target:Ze.target,type:Ze.type}}(Ze):B[ae]?L[ae]+"|NOT_ENUMERABLE":v.test(ae)||N.test(ae)?ae.slice(8,-1)+"|"+Ze.outerHTML:ae===X.DOCUMENTFRAGMENT?L[ae]+"|"+function oe(Ze){for(var Ue=Ze.children,nt="",de=0;de<Ue.length;++de)nt+=Ue[de].outerHTML;return nt}(Ze):le[ae]?L[ae]+"|"+Ze.join(","):ae===X.ARRAYBUFFER?L[ae]+"|"+Oe(Ze):ae===X.DATAVIEW?L[ae]+"|"+Oe(Ze.buffer):Ze}function We(Ze,Ue,nt){if(!Ze||"object"!=typeof Ze)return at(Ze,Ue,nt);var de=U.call(Ze);return de===X.DATE||de===X.REGEXP?at(Ze,Ue,nt,de):JSON.stringify(Ze,function Fe(Ze,Ue){return void 0===Ze&&(Ze=[]),void 0===Ue&&(Ue=[]),function(nt,de){if("object"==typeof de)if(Ze.length){var te=Ge(Ze,this);0===te?Ze.push(this):(Ze.splice(te),Ue.splice(te)),Ue.push(nt);var ae=Ge(Ze,de);if(0!==ae)return"[~"+(Ue.slice(0,ae).join(".")||".")+"]";Ze.push(de)}else Ze[0]=de,Ue[0]=nt;return nt&&this[nt]instanceof Date?at(this[nt],Ze,Ue,X.DATE):at(de,Ze,Ue)}}(Ue,nt))}function Qe(Ze){return function _e(Ze){for(var te,Ue=Ze.length,nt=5381,de=52711;Ue--;)nt=33*nt^(te=Ze.charCodeAt(Ue)),de=33*de^te;return 4096*(nt>>>0)+(de>>>0)}(We(Ze))}(Qe.is=(0,I.curry)(function(Ze,Ue){return Qe(Ze)===Qe(Ue)})).all=(0,I.curry)(function(Ze){for(var Ue=Qe.is(Ze),nt=1;nt<arguments.length;++nt)if(!Ue(arguments[nt]))return!1;return!0},2),Qe.is.any=(0,I.curry)(function(Ze){for(var Ue=Qe.is(Ze),nt=1;nt<arguments.length;nt++)if(Ue(arguments[nt]))return!0;return!1},2),Qe.is.not=(0,I.curry)(function(Ze,Ue){return Qe(Ze)!==Qe(Ue)});const ft=Qe},8461:(we,O)=>{O.read=function(x,I,o,C,F){var j,d,m=8*F-C-1,v=(1<<m)-1,N=v>>1,M=-7,L=o?F-1:0,X=o?-1:1,H=x[I+L];for(L+=X,j=H&(1<<-M)-1,H>>=-M,M+=m;M>0;j=256*j+x[I+L],L+=X,M-=8);for(d=j&(1<<-M)-1,j>>=-M,M+=C;M>0;d=256*d+x[I+L],L+=X,M-=8);if(0===j)j=1-N;else{if(j===v)return d?NaN:1/0*(H?-1:1);d+=Math.pow(2,C),j-=N}return(H?-1:1)*d*Math.pow(2,j-C)},O.write=function(x,I,o,C,F,j){var d,m,v,N=8*j-F-1,M=(1<<N)-1,L=M>>1,X=23===F?Math.pow(2,-24)-Math.pow(2,-77):0,H=C?0:j-1,Q=C?1:-1,q=I<0||0===I&&1/I<0?1:0;for(I=Math.abs(I),isNaN(I)||I===1/0?(m=isNaN(I)?1:0,d=M):(d=Math.floor(Math.log(I)/Math.LN2),I*(v=Math.pow(2,-d))<1&&(d--,v*=2),(I+=d+L>=1?X/v:X*Math.pow(2,1-L))*v>=2&&(d++,v/=2),d+L>=M?(m=0,d=M):d+L>=1?(m=(I*v-1)*Math.pow(2,F),d+=L):(m=I*Math.pow(2,L-1)*Math.pow(2,F),d=0));F>=8;x[o+H]=255&m,H+=Q,m/=256,F-=8);for(d=d<<F|m,N+=F;N>0;x[o+H]=255&d,H+=Q,d/=256,N-=8);x[o+H-Q]|=128*q}},3894:we=>{we.exports="function"==typeof Object.create?function(x,I){I&&(x.super_=I,x.prototype=Object.create(I.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}))}:function(x,I){if(I){x.super_=I;var o=function(){};o.prototype=I.prototype,x.prototype=new o,x.prototype.constructor=x}}},7355:(we,O,x)=>{var I,o,C;void 0!==(o="function"==typeof(I=C=function(){function C(){for(var d=0,m={};d<arguments.length;d++){var v=arguments[d];for(var N in v)m[N]=v[N]}return m}function F(d){return d.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function j(d){function m(){}function v(M,L,X){if("undefined"!=typeof document){"number"==typeof(X=C({path:"/"},m.defaults,X)).expires&&(X.expires=new Date(1*new Date+864e5*X.expires)),X.expires=X.expires?X.expires.toUTCString():"";try{var H=JSON.stringify(L);/^[\{\[]/.test(H)&&(L=H)}catch{}L=d.write?d.write(L,M):encodeURIComponent(String(L)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),M=encodeURIComponent(String(M)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var Q="";for(var q in X)!X[q]||(Q+="; "+q,!0!==X[q]&&(Q+="="+X[q].split(";")[0]));return document.cookie=M+"="+L+Q}}function N(M,L){if("undefined"!=typeof document){for(var X={},H=document.cookie?document.cookie.split("; "):[],Q=0;Q<H.length;Q++){var q=H[Q].split("="),Y=q.slice(1).join("=");!L&&'"'===Y.charAt(0)&&(Y=Y.slice(1,-1));try{var le=F(q[0]);if(Y=(d.read||d)(Y,le)||F(Y),L)try{Y=JSON.parse(Y)}catch{}if(X[le]=Y,M===le)break}catch{}}return M?X[M]:X}}return m.set=v,m.get=function(M){return N(M,!1)},m.getJSON=function(M){return N(M,!0)},m.remove=function(M,L){v(M,"",C(L,{expires:-1}))},m.defaults={},m.withConverter=j,m}(function(){})})?I.call(O,x,O,we):I)&&(we.exports=o),we.exports=C()},2230:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0});var I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Q){return typeof Q}:function(Q){return Q&&"function"==typeof Symbol&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},o=function(){function Q(q,Y){for(var le=0;le<Y.length;le++){var B=Y[le];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(q,B.key,B)}}return function(q,Y,le){return Y&&Q(q.prototype,Y),le&&Q(q,le),q}}(),F=L(x(5173)),j=x(1268),m=L(x(305)),v=x(9056),M=L(x(6729));function L(Q){return Q&&Q.__esModule?Q:{default:Q}}function X(Q,q){if(!(Q instanceof q))throw new TypeError("Cannot call a class as a function")}var H=function(){function Q(q){var Y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},le=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var B in X(this,Q),this.factMap=new Map(q),this.factResultsCache=new Map,this.allowUndefinedFacts=Boolean(le.allowUndefinedFacts),Y){var z=void 0;z=Y[B]instanceof F.default?Y[B]:new F.default(B,Y[B]),this._addConstantFact(z),(0,m.default)("almanac::constructor initialized runtime fact:"+z.id+" with "+z.value+"<"+I(z.value)+">")}}return o(Q,[{key:"_getFact",value:function(Y){return this.factMap.get(Y)}},{key:"_addConstantFact",value:function(Y){this.factMap.set(Y.id,Y),this._setFactValue(Y,{},Y.value)}},{key:"_setFactValue",value:function(Y,le,B){var z=Y.getCacheKey(le),U=Promise.resolve(B);return z&&this.factResultsCache.set(z,U),U}},{key:"addRuntimeFact",value:function(Y,le){(0,m.default)("almanac::addRuntimeFact id:"+Y);var B=new F.default(Y,le);return this._addConstantFact(B)}},{key:"factValue",value:function(Y){var le=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},B=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",z=void 0,U=this._getFact(Y);if(void 0===U)return this.allowUndefinedFacts?Promise.resolve(void 0):Promise.reject(new j.UndefinedFactError("Undefined fact: "+Y));if(U.isConstant())z=Promise.resolve(U.calculate(le,this));else{var ee=U.getCacheKey(le),ge=ee&&this.factResultsCache.get(ee);ge?(z=Promise.resolve(ge),(0,m.default)("almanac::factValue cache hit for fact:"+Y)):((0,m.default)("almanac::factValue cache miss for fact:"+Y+"; calculating"),z=this._setFactValue(U,le,U.calculate(le,this)))}if(B){if("string"==typeof B&&B.startsWith("$"))return(0,m.default)("condition::evaluate extracting object property "+B),z.then(function(pe){if((0,M.default)(pe)){var g=(0,v.JSONPath)({path:B,json:pe,wrap:!1});return(0,m.default)("condition::evaluate extracting object property "+B+", received: "+g),g}return(0,m.default)("condition::evaluate could not compute object path("+B+") of non-object: "+pe+" <"+(void 0===pe?"undefined":I(pe))+">; continuing with "+pe),pe});var _e=void 0;try{_e=x(9495)}catch{throw console.error('Oops! Looks like you\'re trying to use the deprecated syntax for the ".path" property.'),console.error('Please convert your "path" properties to JsonPath syntax (ensure your path starts with "$")'),console.error('Alternatively, if you wish to continue using old syntax (provided by selectn), you may "npm install selectn" as a direct dependency.'),console.error("See https://github.com/CacheControl/json-rules-engine/blob/master/CHANGELOG.md#500--2019-10-27 for more information."),new Error('json-rules-engine: Unmet peer dependency "selectn" required for use of deprecated ".path" syntax. please "npm install selectn" or convert to json-path syntax')}return z.then(function(pe){if((0,M.default)(pe)){var g=_e(B)(pe);return(0,m.default)("condition::evaluate extracting object property "+B+", received: "+g),g}return(0,m.default)("condition::evaluate could not compute object path("+B+") of non-object: "+pe+" <"+(void 0===pe?"undefined":I(pe))+">; continuing with "+pe),pe})}return z}}]),Q}();O.default=H},7762:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0});var I=function(){function N(M,L){for(var X=0;X<L.length;X++){var H=L[X];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(M,H.key,H)}}return function(M,L,X){return L&&N(M.prototype,L),X&&N(M,X),M}}(),C=d(x(305)),j=d(x(6729));function d(N){return N&&N.__esModule?N:{default:N}}var v=function(){function N(M){if(function m(N,M){if(!(N instanceof M))throw new TypeError("Cannot call a class as a function")}(this,N),!M)throw new Error("Condition: constructor options required");var L=N.booleanOperator(M);if(Object.assign(this,M),L){var X=M[L];if(!Array.isArray(X))throw new Error('"'+L+'" must be an array');this.operator=L,this.priority=parseInt(M.priority,10)||1,this[L]=X.map(function(H){return new N(H)})}else{if(!Object.prototype.hasOwnProperty.call(M,"fact"))throw new Error('Condition: constructor "fact" property required');if(!Object.prototype.hasOwnProperty.call(M,"operator"))throw new Error('Condition: constructor "operator" property required');if(!Object.prototype.hasOwnProperty.call(M,"value"))throw new Error('Condition: constructor "value" property required');Object.prototype.hasOwnProperty.call(M,"priority")&&(M.priority=parseInt(M.priority,10))}}return I(N,[{key:"toJSON",value:function(){var L=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],X={};this.priority&&(X.priority=this.priority);var H=N.booleanOperator(this);return H?X[H]=this[H].map(function(Q){return Q.toJSON(L)}):(X.operator=this.operator,X.value=this.value,X.fact=this.fact,void 0!==this.factResult&&(X.factResult=this.factResult),void 0!==this.result&&(X.result=this.result),this.params&&(X.params=this.params),this.path&&(X.path=this.path)),L?JSON.stringify(X):X}},{key:"_getValue",value:function(L){var X=this.value;return(0,j.default)(X)&&Object.prototype.hasOwnProperty.call(X,"fact")?L.factValue(X.fact,X.params,X.path):Promise.resolve(X)}},{key:"evaluate",value:function(L,X){var H=this;if(!L)return Promise.reject(new Error("almanac required"));if(!X)return Promise.reject(new Error("operatorMap required"));if(this.isBooleanOperator())return Promise.reject(new Error("Cannot evaluate() a boolean condition"));var Q=X.get(this.operator);return Q?this._getValue(L).then(function(q){return L.factValue(H.fact,H.params,H.path).then(function(Y){var le=Q.evaluate(Y,q);return(0,C.default)("condition::evaluate <"+Y+" "+H.operator+" "+q+"?> ("+le+")"),{result:le,leftHandSideValue:Y,rightHandSideValue:q,operator:H.operator}})}):Promise.reject(new Error("Unknown operator: "+this.operator))}},{key:"booleanOperator",value:function(){return N.booleanOperator(this)}},{key:"isBooleanOperator",value:function(){return void 0!==N.booleanOperator(this)}}],[{key:"booleanOperator",value:function(L){return Object.prototype.hasOwnProperty.call(L,"any")?"any":Object.prototype.hasOwnProperty.call(L,"all")?"all":void 0}}]),N}();O.default=v},305:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.default=function x(I){try{("undefined"!=typeof process&&process.env&&process.env.DEBUG&&process.env.DEBUG.match(/json-rules-engine/)||"undefined"!=typeof window&&window.localStorage&&window.localStorage.debug&&window.localStorage.debug.match(/json-rules-engine/))&&console.log(I)}catch{}}},3094:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0});var o=function C(d){return d&&d.__esModule?d:{default:d}}(x(5010)),F=[];function j(d){return"NaN"!==Number.parseFloat(d).toString()}F.push(new o.default("equal",function(d,m){return d===m})),F.push(new o.default("notEqual",function(d,m){return d!==m})),F.push(new o.default("in",function(d,m){return m.indexOf(d)>-1})),F.push(new o.default("notIn",function(d,m){return-1===m.indexOf(d)})),F.push(new o.default("contains",function(d,m){return d.indexOf(m)>-1},Array.isArray)),F.push(new o.default("doesNotContain",function(d,m){return-1===d.indexOf(m)},Array.isArray)),F.push(new o.default("lessThan",function(d,m){return d<m},j)),F.push(new o.default("lessThanInclusive",function(d,m){return d<=m},j)),F.push(new o.default("greaterThan",function(d,m){return d>m},j)),F.push(new o.default("greaterThanInclusive",function(d,m){return d>=m},j)),O.default=F},2272:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.SuccessEventFact=function(){var o=[];return function(){var C=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return C.event&&o.push(C.event),o}}},3350:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0}),O.FINISHED=O.RUNNING=O.READY=void 0;var I=function(){function pe(g,A){for(var y=0;y<A.length;y++){var E=A[y];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(g,E.key,E)}}return function(g,A,y){return A&&pe(g.prototype,A),y&&pe(g,y),g}}(),C=Y(x(5173)),j=Y(x(7287)),m=Y(x(5010)),N=Y(x(2230)),M=x(9069),L=x(2272),H=Y(x(3094)),q=Y(x(305));function Y(pe){return pe&&pe.__esModule?pe:{default:pe}}function le(pe,g){if(!(pe instanceof g))throw new TypeError("Cannot call a class as a function")}function B(pe,g){if(!pe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||"object"!=typeof g&&"function"!=typeof g?pe:g}var U=O.READY="READY",ee=O.RUNNING="RUNNING",ge=O.FINISHED="FINISHED",_e=function(pe){function g(){var A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};le(this,g);var E=B(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));return E.rules=[],E.allowUndefinedFacts=y.allowUndefinedFacts||!1,E.operators=new Map,E.facts=new Map,E.status=U,A.map(function(D){return E.addRule(D)}),H.default.map(function(D){return E.addOperator(D)}),E}return function z(pe,g){if("function"!=typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+typeof g);pe.prototype=Object.create(g&&g.prototype,{constructor:{value:pe,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(pe,g):pe.__proto__=g)}(g,pe),I(g,[{key:"addRule",value:function(y){if(!y)throw new Error("Engine: addRule() requires options");if(!Object.prototype.hasOwnProperty.call(y,"conditions"))throw new Error('Engine: addRule() argument requires "conditions" property');if(!Object.prototype.hasOwnProperty.call(y,"event"))throw new Error('Engine: addRule() argument requires "event" property');var E=void 0;return(E=y instanceof j.default?y:new j.default(y)).setEngine(this),this.rules.push(E),this.prioritizedRules=null,this}},{key:"removeRule",value:function(y){if(!(y instanceof j.default))throw new Error("Engine: removeRule() rule must be a instance of Rule");var E=this.rules.indexOf(y);return-1!==E&&(this.prioritizedRules=null,Boolean(this.rules.splice(E,1).length))}},{key:"addOperator",value:function(y,E){var D;D=y instanceof m.default?y:new m.default(y,E),(0,q.default)("engine::addOperator name:"+D.name),this.operators.set(D.name,D)}},{key:"removeOperator",value:function(y){return this.operators.delete(y instanceof m.default?y.name:y)}},{key:"addFact",value:function(y,E,D){var P=y,ne=void 0;return y instanceof C.default?(P=y.id,ne=y):ne=new C.default(y,E,D),(0,q.default)("engine::addFact id:"+P),this.facts.set(P,ne),this}},{key:"removeFact",value:function(y){return this.facts.delete(y instanceof C.default?y.id:y)}},{key:"prioritizeRules",value:function(){if(!this.prioritizedRules){var y=this.rules.reduce(function(E,D){var P=D.priority;return E[P]||(E[P]=[]),E[P].push(D),E},{});this.prioritizedRules=Object.keys(y).sort(function(E,D){return Number(E)>Number(D)?-1:1}).map(function(E){return y[E]})}return this.prioritizedRules}},{key:"stop",value:function(){return this.status=ge,this}},{key:"getFact",value:function(y){return this.facts.get(y)}},{key:"evaluateRules",value:function(y,E){var D=this;return Promise.all(y.map(function(P){if(D.status===ee)return P.evaluate(E).then(function(ne){(0,q.default)("engine::run ruleResult:"+ne.result),ne.result?(D.emit("success",P.event,E,ne),D.emit(P.event.type,P.event.params,E,ne),E.factValue("success-events",{event:P.event})):D.emit("failure",P.event,E,ne)});(0,q.default)("engine::run status:"+D.status+"; skipping remaining rules")}))}},{key:"run",value:function(){var y=this,E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,q.default)("engine::run started"),(0,q.default)("engine::run runtimeFacts:",E),E["success-events"]=new C.default("success-events",(0,L.SuccessEventFact)(),{cache:!1}),this.status=ee;var D=new N.default(this.facts,E,{allowUndefinedFacts:this.allowUndefinedFacts}),P=this.prioritizeRules(),ne=Promise.resolve();return new Promise(function(fe,Oe){P.map(function(oe){return ne=ne.then(function(){return y.evaluateRules(oe,D)}).catch(Oe)}),ne.then(function(){return y.status=ge,(0,q.default)("engine::run completed"),D.factValue("success-events")}).then(function(oe){fe({events:oe,almanac:D})}).catch(Oe)})}}]),g}(M.EventEmitter);O.default=_e},1268:(we,O)=>{function x(F,j){if(!(F instanceof j))throw new TypeError("Cannot call a class as a function")}function I(F,j){if(!F)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!j||"object"!=typeof j&&"function"!=typeof j?F:j}Object.defineProperty(O,"__esModule",{value:!0}),O.UndefinedFactError=function(F){function j(){var d;x(this,j);for(var m=arguments.length,v=Array(m),N=0;N<m;N++)v[N]=arguments[N];var M=I(this,(d=j.__proto__||Object.getPrototypeOf(j)).call.apply(d,[this].concat(v)));return M.code="UNDEFINED_FACT",M}return function o(F,j){if("function"!=typeof j&&null!==j)throw new TypeError("Super expression must either be null or a function, not "+typeof j);F.prototype=Object.create(j&&j.prototype,{constructor:{value:F,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(F,j):F.__proto__=j)}(j,Error),j}()},5173:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0});var I=function(){function m(v,N){for(var M=0;M<N.length;M++){var L=N[M];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(v,L.key,L)}}return function(v,N,M){return N&&m(v.prototype,N),M&&m(v,M),v}}(),C=function F(m){return m&&m.__esModule?m:{default:m}}(x(6308)),d=function(){function m(v,N,M){(function j(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")})(this,m),this.id=v;var L={cache:!0};if(void 0===M&&(M=L),"function"!=typeof N?(this.value=N,this.type=this.constructor.CONSTANT):(this.calculationMethod=N,this.type=this.constructor.DYNAMIC),!this.id)throw new Error("factId required");return this.priority=parseInt(M.priority||1,10),this.options=Object.assign({},L,M),this.cacheKeyMethod=this.defaultCacheKeys,this}return I(m,[{key:"isConstant",value:function(){return this.type===this.constructor.CONSTANT}},{key:"isDynamic",value:function(){return this.type===this.constructor.DYNAMIC}},{key:"calculate",value:function(N,M){return Object.prototype.hasOwnProperty.call(this,"value")?this.value:this.calculationMethod(N,M)}},{key:"defaultCacheKeys",value:function(N,M){return{params:M,id:N}}},{key:"getCacheKey",value:function(N){if(!0===this.options.cache){var M=this.cacheKeyMethod(this.id,N);return m.hashFromObject(M)}}}],[{key:"hashFromObject",value:function(N){return(0,C.default)(N)}}]),m}();d.CONSTANT="CONSTANT",d.DYNAMIC="DYNAMIC",O.default=d},926:(we,O,x)=>{we.exports=x(4308)},4308:(we,O,x)=>{O.Engine=O.Rule=void 0;var C=M(x(3350)),m=(M(x(5173)),M(x(7287)));M(x(5010));function M(L){return L&&L.__esModule?L:{default:L}}O.Rule=m.default,O.Engine=C.default},5010:(we,O)=>{Object.defineProperty(O,"__esModule",{value:!0});var x=function(){function C(F,j){for(var d=0;d<j.length;d++){var m=j[d];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(F,m.key,m)}}return function(F,j,d){return j&&C(F.prototype,j),d&&C(F,d),F}}(),o=function(){function C(F,j,d){if(function I(C,F){if(!(C instanceof F))throw new TypeError("Cannot call a class as a function")}(this,C),this.name=String(F),!F)throw new Error("Missing operator name");if("function"!=typeof j)throw new Error("Missing operator callback");this.cb=j,this.factValueValidator=d,this.factValueValidator||(this.factValueValidator=function(){return!0})}return x(C,[{key:"evaluate",value:function(j,d){return this.factValueValidator(j)&&this.cb(j,d)}}]),C}();O.default=o},6219:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0});var I=function(){function m(v,N){for(var M=0;M<N.length;M++){var L=N[M];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(v,L.key,L)}}return function(v,N,M){return N&&m(v.prototype,N),M&&m(v,M),v}}(),C=function F(m){return m&&m.__esModule?m:{default:m}}(x(1433)),d=function(){function m(v,N,M,L){(function j(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")})(this,m),this.conditions=(0,C.default)(v),this.event=(0,C.default)(N),this.priority=(0,C.default)(M),this.name=(0,C.default)(L),this.result=null}return I(m,[{key:"setResult",value:function(N){this.result=N}},{key:"toJSON",value:function(){var N=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],M={conditions:this.conditions.toJSON(!1),event:this.event,priority:this.priority,name:this.name,result:this.result};return N?JSON.stringify(M):M}}]),m}();O.default=d},7287:(we,O,x)=>{Object.defineProperty(O,"__esModule",{value:!0});var I=function(){function Q(q,Y){for(var le=0;le<Y.length;le++){var B=Y[le];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(q,B.key,B)}}return function(q,Y,le){return Y&&Q(q.prototype,Y),le&&Q(q,le),q}}(),C=N(x(7762)),j=N(x(6219)),d=x(9069),v=N(x(305));function N(Q){return Q&&Q.__esModule?Q:{default:Q}}var H=function(Q){function q(Y){!function M(Q,q){if(!(Q instanceof q))throw new TypeError("Cannot call a class as a function")}(this,q);var le=function L(Q,q){if(!Q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!q||"object"!=typeof q&&"function"!=typeof q?Q:q}(this,(q.__proto__||Object.getPrototypeOf(q)).call(this));return"string"==typeof Y&&(Y=JSON.parse(Y)),Y&&Y.conditions&&le.setConditions(Y.conditions),Y&&Y.onSuccess&&le.on("success",Y.onSuccess),Y&&Y.onFailure&&le.on("failure",Y.onFailure),Y&&(Y.name||0===Y.name)&&le.setName(Y.name),le.setPriority(Y&&Y.priority||1),le.setEvent(Y&&Y.event||{type:"unknown"}),le}return function X(Q,q){if("function"!=typeof q&&null!==q)throw new TypeError("Super expression must either be null or a function, not "+typeof q);Q.prototype=Object.create(q&&q.prototype,{constructor:{value:Q,enumerable:!1,writable:!0,configurable:!0}}),q&&(Object.setPrototypeOf?Object.setPrototypeOf(Q,q):Q.__proto__=q)}(q,Q),I(q,[{key:"setPriority",value:function(le){if((le=parseInt(le,10))<=0)throw new Error("Priority must be greater than zero");return this.priority=le,this}},{key:"setName",value:function(le){if(!le&&0!==le)throw new Error('Rule "name" must be defined');return this.name=le,this}},{key:"setConditions",value:function(le){if(!Object.prototype.hasOwnProperty.call(le,"all")&&!Object.prototype.hasOwnProperty.call(le,"any"))throw new Error('"conditions" root must contain a single instance of "all" or "any"');return this.conditions=new C.default(le),this}},{key:"setEvent",value:function(le){if(!le)throw new Error("Rule: setEvent() requires event object");if(!Object.prototype.hasOwnProperty.call(le,"type"))throw new Error('Rule: setEvent() requires event object with "type" property');return this.event={type:le.type},le.params&&(this.event.params=le.params),this}},{key:"setEngine",value:function(le){return this.engine=le,this}},{key:"toJSON",value:function(){var le=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],B={conditions:this.conditions.toJSON(!1),priority:this.priority,event:this.event,name:this.name};return le?JSON.stringify(B):B}},{key:"prioritizeConditions",value:function(le){var B=this,z=le.reduce(function(U,ee){var ge=ee.priority;if(!ge){var _e=B.engine.getFact(ee.fact);ge=_e&&_e.priority||1}return U[ge]||(U[ge]=[]),U[ge].push(ee),U},{});return Object.keys(z).sort(function(U,ee){return Number(U)>Number(ee)?-1:1}).map(function(U){return z[U]})}},{key:"evaluate",value:function(le){var B=this,z=new j.default(this.conditions,this.event,this.priority,this.name),ge=function(y,E){if(0===y.length)return Promise.resolve(!0);var D=Array.prototype.some;"all"===E&&(D=Array.prototype.every);for(var P=B.prioritizeConditions(y),ne=Promise.resolve(),fe=function(Ge){var at=P[Ge],Fe=!1;ne=ne.then(function(We){return"any"===E&&!0===We||Fe?((0,v.default)("prioritizeAndRun::detected truthy result; skipping remaining conditions"),Fe=!0,!0):"all"===E&&!1===We||Fe?((0,v.default)("prioritizeAndRun::detected falsey result; skipping remaining conditions"),Fe=!0,!1):function(y,E){return Array.isArray(y)||(y=[y]),Promise.all(y.map(function(D){return function(y){if(y.isBooleanOperator()){var E=y[y.operator];return("all"===y.operator?pe(E):_e(E)).then(function(P){var ne=!0===P;return y.result=ne,ne})}return y.evaluate(le,B.engine.operators).then(function(P){var ne=P.result;return y.factResult=P.leftHandSideValue,y.result=ne,ne})}(D)})).then(function(D){return(0,v.default)("rule::evaluateConditions results",D),E.call(D,function(P){return!0===P})})}(at,D)})},Oe=0;Oe<P.length;Oe++)fe(Oe);return ne},_e=function(y){return ge(y,"any")},pe=function(y){return ge(y,"all")},g=function(y){return z.setResult(y),B.emit(y?"success":"failure",z.event,le,z),z};return z.conditions.any?_e(z.conditions.any).then(function(A){return g(A)}):pe(z.conditions.all).then(function(A){return g(A)})}}]),q}(d.EventEmitter);O.default=H},1433:we=>{var O=function(){"use strict";function x(M,L){return null!=L&&M instanceof L}var I,o,C;try{I=Map}catch{I=function(){}}try{o=Set}catch{o=function(){}}try{C=Promise}catch{C=function(){}}function F(M,L,X,H,Q){"object"==typeof L&&(X=L.depth,H=L.prototype,Q=L.includeNonEnumerable,L=L.circular);var q=[],Y=[],le="undefined"!=typeof Buffer;return void 0===L&&(L=!0),void 0===X&&(X=1/0),function B(z,U){if(null===z)return null;if(0===U)return z;var ee,ge;if("object"!=typeof z)return z;if(x(z,I))ee=new I;else if(x(z,o))ee=new o;else if(x(z,C))ee=new C(function(ne,fe){z.then(function(Oe){ne(B(Oe,U-1))},function(Oe){fe(B(Oe,U-1))})});else if(F.__isArray(z))ee=[];else if(F.__isRegExp(z))ee=new RegExp(z.source,N(z)),z.lastIndex&&(ee.lastIndex=z.lastIndex);else if(F.__isDate(z))ee=new Date(z.getTime());else{if(le&&Buffer.isBuffer(z))return ee=Buffer.allocUnsafe?Buffer.allocUnsafe(z.length):new Buffer(z.length),z.copy(ee),ee;x(z,Error)?ee=Object.create(z):void 0===H?(ge=Object.getPrototypeOf(z),ee=Object.create(ge)):(ee=Object.create(H),ge=H)}if(L){var _e=q.indexOf(z);if(-1!=_e)return Y[_e];q.push(z),Y.push(ee)}for(var pe in x(z,I)&&z.forEach(function(ne,fe){var Oe=B(fe,U-1),oe=B(ne,U-1);ee.set(Oe,oe)}),x(z,o)&&z.forEach(function(ne){var fe=B(ne,U-1);ee.add(fe)}),z){var g;ge&&(g=Object.getOwnPropertyDescriptor(ge,pe)),(!g||null!=g.set)&&(ee[pe]=B(z[pe],U-1))}if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(z);for(pe=0;pe<A.length;pe++){var y=A[pe];(E=Object.getOwnPropertyDescriptor(z,y))&&!E.enumerable&&!Q||(ee[y]=B(z[y],U-1),E.enumerable||Object.defineProperty(ee,y,{enumerable:!1}))}}if(Q){var D=Object.getOwnPropertyNames(z);for(pe=0;pe<D.length;pe++){var E,P=D[pe];(E=Object.getOwnPropertyDescriptor(z,P))&&E.enumerable||(ee[P]=B(z[P],U-1),Object.defineProperty(ee,P,{enumerable:!1}))}}return ee}(M,X)}function j(M){return Object.prototype.toString.call(M)}function N(M){var L="";return M.global&&(L+="g"),M.ignoreCase&&(L+="i"),M.multiline&&(L+="m"),L}return F.clonePrototype=function(L){if(null===L)return null;var X=function(){};return X.prototype=L,new X},F.__objToStr=j,F.__isDate=function d(M){return"object"==typeof M&&"[object Date]"===j(M)},F.__isArray=function m(M){return"object"==typeof M&&"[object Array]"===j(M)},F.__isRegExp=function v(M){return"object"==typeof M&&"[object RegExp]"===j(M)},F.__getRegExpFlags=N,F}();we.exports&&(we.exports=O)},9056:(we,O,x)=>{function I(E){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(D){return typeof D}:function(D){return D&&"function"==typeof Symbol&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(E)}function F(E){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(P){return P.__proto__||Object.getPrototypeOf(P)})(E)}function j(E,D){return(j=Object.setPrototypeOf||function(ne,fe){return ne.__proto__=fe,ne})(E,D)}function d(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function m(E,D,P){return(m=d()?Reflect.construct:function(fe,Oe,oe){var Ge=[null];Ge.push.apply(Ge,Oe);var Fe=new(Function.bind.apply(fe,Ge));return oe&&j(Fe,oe.prototype),Fe}).apply(null,arguments)}function N(E){var D="function"==typeof Map?new Map:void 0;return N=function(ne){if(null===ne||!function v(E){return-1!==Function.toString.call(E).indexOf("[native code]")}(ne))return ne;if("function"!=typeof ne)throw new TypeError("Super expression must either be null or a function");if(void 0!==D){if(D.has(ne))return D.get(ne);D.set(ne,fe)}function fe(){return m(ne,arguments,F(this).constructor)}return fe.prototype=Object.create(ne.prototype,{constructor:{value:fe,enumerable:!1,writable:!0,configurable:!0}}),j(fe,ne)},N(E)}function L(E,D){return!D||"object"!=typeof D&&"function"!=typeof D?function M(E){if(void 0===E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}(E):D}function H(E){return function Q(E){if(Array.isArray(E))return le(E)}(E)||function q(E){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(E))return Array.from(E)}(E)||Y(E)||function B(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(E,D){if(E){if("string"==typeof E)return le(E,D);var P=Object.prototype.toString.call(E).slice(8,-1);if("Object"===P&&E.constructor&&(P=E.constructor.name),"Map"===P||"Set"===P)return Array.from(P);if("Arguments"===P||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P))return le(E,D)}}function le(E,D){(null==D||D>E.length)&&(D=E.length);for(var P=0,ne=new Array(D);P<D;P++)ne[P]=E[P];return ne}x.r(O),x.d(O,{JSONPath:()=>y});var ee=Object.prototype.hasOwnProperty,_e=(y.nodeVMSupported=function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}())?x(6989):{runInNewContext:function(D,P){var ne=Object.keys(P),fe=[];!function(D,P,ne){for(var fe=D.length,Oe=0;Oe<fe;Oe++)ne(D[Oe])&&P.push(D.splice(Oe--,1)[0])}(ne,fe,function(Fe){return"function"==typeof P[Fe]});var Oe=ne.map(function(Fe,We){return P[Fe]});!(D=fe.reduce(function(Fe,We){var Qe=P[We].toString();return/function/.test(Qe)||(Qe="function "+Qe),"var "+We+"="+Qe+";"+Fe},"")+D).match(/(["'])use strict\1/)&&!ne.includes("arguments")&&(D="var arguments = undefined;"+D);var Ge=(D=D.replace(/;[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*$/,"")).lastIndexOf(";"),at=Ge>-1?D.slice(0,Ge+1)+" return "+D.slice(Ge+1):" return "+D;return m(Function,H(ne).concat([at])).apply(void 0,H(Oe))}};function pe(E,D){return(E=E.slice()).push(D),E}function g(E,D){return(D=D.slice()).unshift(E),D}var A=function(E){!function C(E,D){if("function"!=typeof D&&null!==D)throw new TypeError("Super expression must either be null or a function");E.prototype=Object.create(D&&D.prototype,{constructor:{value:E,writable:!0,configurable:!0}}),D&&j(E,D)}(P,E);var D=function X(E){return function(){var P,D=F(E);if(d()){var ne=F(this).constructor;P=Reflect.construct(D,arguments,ne)}else P=D.apply(this,arguments);return L(this,P)}}(P);function P(ne){var fe;return function o(E,D){if(!(E instanceof D))throw new TypeError("Cannot call a class as a function")}(this,P),(fe=D.call(this,'JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)')).avoidNew=!0,fe.value=ne,fe.name="NewError",fe}return P}(N(Error));function y(E,D,P,ne,fe){if(!(this instanceof y))try{return new y(E,D,P,ne,fe)}catch(at){if(!at.avoidNew)throw at;return at.value}"string"==typeof E&&(fe=ne,ne=P,P=D,D=E,E=null);var Oe=E&&"object"===I(E);if(this.json=(E=E||{}).json||P,this.path=E.path||D,this.resultType=E.resultType||"value",this.flatten=E.flatten||!1,this.wrap=!ee.call(E,"wrap")||E.wrap,this.sandbox=E.sandbox||{},this.preventEval=E.preventEval||!1,this.parent=E.parent||null,this.parentProperty=E.parentProperty||null,this.callback=E.callback||ne||null,this.otherTypeCallback=E.otherTypeCallback||fe||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},!1!==E.autostart){var oe={path:Oe?E.path:D};Oe?"json"in E&&(oe.json=E.json):oe.json=P;var Ge=this.evaluate(oe);if(!Ge||"object"!==I(Ge))throw new A(Ge);return Ge}}y.prototype.evaluate=function(E,D,P,ne){var fe=this,Oe=this.parent,oe=this.parentProperty,Ge=this.flatten,at=this.wrap;if(this.currResultType=this.resultType,this.currPreventEval=this.preventEval,this.currSandbox=this.sandbox,P=P||this.callback,this.currOtherTypeCallback=ne||this.otherTypeCallback,D=D||this.json,(E=E||this.path)&&"object"===I(E)&&!Array.isArray(E)){if(!E.path&&""!==E.path)throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!ee.call(E,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');D=E.json,Ge=ee.call(E,"flatten")?E.flatten:Ge,this.currResultType=ee.call(E,"resultType")?E.resultType:this.currResultType,this.currSandbox=ee.call(E,"sandbox")?E.sandbox:this.currSandbox,at=ee.call(E,"wrap")?E.wrap:at,this.currPreventEval=ee.call(E,"preventEval")?E.preventEval:this.currPreventEval,P=ee.call(E,"callback")?E.callback:P,this.currOtherTypeCallback=ee.call(E,"otherTypeCallback")?E.otherTypeCallback:this.currOtherTypeCallback,Oe=ee.call(E,"parent")?E.parent:Oe,oe=ee.call(E,"parentProperty")?E.parentProperty:oe,E=E.path}if(Oe=Oe||null,oe=oe||null,Array.isArray(E)&&(E=y.toPathString(E)),(E||""===E)&&D){this._obj=D;var We=y.toPathArray(E);"$"===We[0]&&We.length>1&&We.shift(),this._hasParentSelector=null;var Qe=this._trace(We,D,["$"],Oe,oe,P).filter(function(ft){return ft&&!ft.isParentSelector});return Qe.length?at||1!==Qe.length||Qe[0].hasArrExpr?Qe.reduce(function(ft,Ze){var Ue=fe._getPreferredOutput(Ze);return Ge&&Array.isArray(Ue)?ft=ft.concat(Ue):ft.push(Ue),ft},[]):this._getPreferredOutput(Qe[0]):at?[]:void 0}},y.prototype._getPreferredOutput=function(E){var D=this.currResultType;switch(D){default:throw new TypeError("Unknown result type");case"all":var P=Array.isArray(E.path)?E.path:y.toPathArray(E.path);return E.pointer=y.toPointer(P),E.path="string"==typeof E.path?E.path:y.toPathString(E.path),E;case"value":case"parent":case"parentProperty":return E[D];case"path":return y.toPathString(E[D]);case"pointer":return y.toPointer(E.path)}},y.prototype._handleCallback=function(E,D,P){if(D){var ne=this._getPreferredOutput(E);E.path="string"==typeof E.path?E.path:y.toPathString(E.path),D(ne,P,E)}},y.prototype._trace=function(E,D,P,ne,fe,Oe,oe,Ge){var at,Fe=this;if(!E.length)return this._handleCallback(at={path:P,value:D,parent:ne,parentProperty:fe,hasArrExpr:oe},Oe,"value"),at;var We=E[0],Qe=E.slice(1),ft=[];function Ze(k){Array.isArray(k)?k.forEach(function(K){ft.push(K)}):ft.push(k)}if(("string"!=typeof We||Ge)&&D&&ee.call(D,We))Ze(this._trace(Qe,D[We],pe(P,We),D,We,Oe,oe));else if("*"===We)this._walk(We,Qe,D,P,ne,fe,Oe,function(k,K,he,Me,Ye,it,It,At){Ze(Fe._trace(g(k,he),Me,Ye,it,It,At,!0,!0))});else if(".."===We)Ze(this._trace(Qe,D,P,ne,fe,Oe,oe)),this._walk(We,Qe,D,P,ne,fe,Oe,function(k,K,he,Me,Ye,it,It,At){"object"===I(Me[k])&&Ze(Fe._trace(g(K,he),Me[k],pe(Ye,k),Me,k,At,!0))});else{if("^"===We)return this._hasParentSelector=!0,{path:P.slice(0,-1),expr:Qe,isParentSelector:!0};if("~"===We)return at={path:pe(P,We),value:fe,parent:ne,parentProperty:null},this._handleCallback(at,Oe,"property"),at;if("$"===We)Ze(this._trace(Qe,D,P,null,null,Oe,oe));else if(/^(\x2D?[0-9]*):(\x2D?[0-9]*):?([0-9]*)$/.test(We))Ze(this._slice(We,Qe,D,P,ne,fe,Oe));else if(0===We.indexOf("?(")){if(this.currPreventEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");this._walk(We,Qe,D,P,ne,fe,Oe,function(k,K,he,Me,Ye,it,It,At){Fe._eval(K.replace(/^\?\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)\)$/,"$1"),Me[k],k,Ye,it,It)&&Ze(Fe._trace(g(k,he),Me,Ye,it,It,At,!0))})}else if("("===We[0]){if(this.currPreventEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");Ze(this._trace(g(this._eval(We,D,P[P.length-1],P.slice(0,-1),ne,fe),Qe),D,P,ne,fe,Oe,oe))}else if("@"===We[0]){var Ue=!1,nt=We.slice(1,-2);switch(nt){default:throw new TypeError("Unknown value type "+nt);case"scalar":(!D||!["object","function"].includes(I(D)))&&(Ue=!0);break;case"boolean":case"string":case"undefined":case"function":I(D)===nt&&(Ue=!0);break;case"integer":Number.isFinite(D)&&!(D%1)&&(Ue=!0);break;case"number":Number.isFinite(D)&&(Ue=!0);break;case"nonFinite":"number"==typeof D&&!Number.isFinite(D)&&(Ue=!0);break;case"object":D&&I(D)===nt&&(Ue=!0);break;case"array":Array.isArray(D)&&(Ue=!0);break;case"other":Ue=this.currOtherTypeCallback(D,P,ne,fe);break;case"null":null===D&&(Ue=!0)}if(Ue)return this._handleCallback(at={path:P,value:D,parent:ne,parentProperty:fe},Oe,"value"),at}else if("`"===We[0]&&D&&ee.call(D,We.slice(1))){var de=We.slice(1);Ze(this._trace(Qe,D[de],pe(P,de),D,de,Oe,oe,!0))}else if(We.includes(",")){var Te,ae=function z(E){if("undefined"==typeof Symbol||null==E[Symbol.iterator]){if(Array.isArray(E)||(E=Y(E))){var D=0,P=function(){};return{s:P,n:function(){return D>=E.length?{done:!0}:{done:!1,value:E[D++]}},e:function(Ge){throw Ge},f:P}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var ne,oe,fe=!0,Oe=!1;return{s:function(){ne=E[Symbol.iterator]()},n:function(){var Ge=ne.next();return fe=Ge.done,Ge},e:function(Ge){Oe=!0,oe=Ge},f:function(){try{!fe&&null!=ne.return&&ne.return()}finally{if(Oe)throw oe}}}}(We.split(","));try{for(ae.s();!(Te=ae.n()).done;)Ze(this._trace(g(Te.value,Qe),D,P,ne,fe,Oe,!0))}catch(k){ae.e(k)}finally{ae.f()}}else!Ge&&D&&ee.call(D,We)&&Ze(this._trace(Qe,D[We],pe(P,We),D,We,Oe,oe,!0))}if(this._hasParentSelector)for(var ce=0;ce<ft.length;ce++){var me=ft[ce];if(me&&me.isParentSelector){var rt=Fe._trace(me.expr,D,me.path,ne,fe,Oe,oe);if(Array.isArray(rt)){ft[ce]=rt[0];for(var ye=rt.length,$=1;$<ye;$++)ce++,ft.splice(ce,0,rt[$])}else ft[ce]=rt}}return ft},y.prototype._walk=function(E,D,P,ne,fe,Oe,oe,Ge){if(Array.isArray(P))for(var at=P.length,Fe=0;Fe<at;Fe++)Ge(Fe,E,D,P,ne,fe,Oe,oe);else P&&"object"===I(P)&&Object.keys(P).forEach(function(We){Ge(We,E,D,P,ne,fe,Oe,oe)})},y.prototype._slice=function(E,D,P,ne,fe,Oe,oe){if(Array.isArray(P)){var Ge=P.length,at=E.split(":"),Fe=at[2]&&Number.parseInt(at[2])||1,We=at[0]&&Number.parseInt(at[0])||0,Qe=at[1]&&Number.parseInt(at[1])||Ge;We=We<0?Math.max(0,We+Ge):Math.min(Ge,We),Qe=Qe<0?Math.max(0,Qe+Ge):Math.min(Ge,Qe);for(var ft=[],Ze=We;Ze<Qe;Ze+=Fe)this._trace(g(Ze,D),P,ne,fe,Oe,oe,!0).forEach(function(nt){ft.push(nt)});return ft}},y.prototype._eval=function(E,D,P,ne,fe,Oe){if(!this._obj||!D)return!1;E.includes("@parentProperty")&&(this.currSandbox._$_parentProperty=Oe,E=E.replace(/@parentProperty/g,"_$_parentProperty")),E.includes("@parent")&&(this.currSandbox._$_parent=fe,E=E.replace(/@parent/g,"_$_parent")),E.includes("@property")&&(this.currSandbox._$_property=P,E=E.replace(/@property/g,"_$_property")),E.includes("@path")&&(this.currSandbox._$_path=y.toPathString(ne.concat([P])),E=E.replace(/@path/g,"_$_path")),E.includes("@root")&&(this.currSandbox._$_root=this.json,E=E.replace(/@root/g,"_$_root")),E.match(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/)&&(this.currSandbox._$_v=D,E=E.replace(/@([\t-\r \)\.\[\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF])/g,"_$_v$1"));try{return _e.runInNewContext(E,this.currSandbox)}catch(oe){throw console.log(oe),new Error("jsonPath: "+oe.message+": "+E)}},y.cache={},y.toPathString=function(E){for(var D=E,P=D.length,ne="$",fe=1;fe<P;fe++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(D[fe])||(ne+=/^[\*0-9]+$/.test(D[fe])?"["+D[fe]+"]":"['"+D[fe]+"']");return ne},y.toPointer=function(E){for(var D=E,P=D.length,ne="",fe=1;fe<P;fe++)/^(~|\^|@(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\(\))$/.test(D[fe])||(ne+="/"+D[fe].toString().replace(/~/g,"~0").replace(/\//g,"~1"));return ne},y.toPathArray=function(E){var D=y.cache;if(D[E])return D[E].concat();var P=[],fe=E.replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/g,";$&;").replace(/['\[](\??\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\))['\]]/g,function(Oe,oe){return"[#"+(P.push(oe)-1)+"]"}).replace(/\['((?:[\0-&\(-\\\^-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)'\]/g,function(Oe,oe){return"['"+oe.replace(/\./g,"%@%").replace(/~/g,"%%@@%%")+"']"}).replace(/~/g,";~;").replace(/'?\.'?(?!(?:[\0-Z\\-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*\])|\['?/g,";").replace(/%@%/g,".").replace(/%%@@%%/g,"~").replace(/(?:;)?(\^+)(?:;)?/g,function(Oe,oe){return";"+oe.split("").join(";")+";"}).replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"").split(";").map(function(Oe){var oe=Oe.match(/#([0-9]+)/);return oe&&oe[1]?P[oe[1]]:Oe});return D[E]=fe,D[E]}},6729:we=>{we.exports=function O(x){return!!x&&"object"==typeof x}},9188:(we,O)=>{function I(m){return m.replace(/[-[\]/{}()*+?.\\^$]/g,"\\$&")}function o(m,v){var M=(void 0===v?{}:v).decimalMark,L=void 0===M?".":M;if("number"==typeof m)return m.toString();if("string"!=typeof m)return"NaN";var X=I(L),H=m.trim(),Q=H.match(/^\(.*\)$|^-/),q=new RegExp("[^\\d"+X+"]|"+X+"(?=.*"+X+")|^\\D*"+X+"\\D*$","g");return""===(H=H.replace(q,"").replace(L,"."))?H="NaN":Q&&(H="-"+H),H}O.He=void 0,O.He=function C(m,v){var M=(void 0===v?{}:v).decimalMark,X=o(m,{decimalMark:void 0===M?".":M});return"NaN"===X?NaN:Number(X)}},5943:we=>{var O=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;function o(F){if(null==F)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(F)}we.exports=function C(){try{if(!Object.assign)return!1;var F=new String("abc");if(F[5]="de","5"===Object.getOwnPropertyNames(F)[0])return!1;for(var j={},d=0;d<10;d++)j["_"+String.fromCharCode(d)]=d;if("0123456789"!==Object.getOwnPropertyNames(j).map(function(N){return j[N]}).join(""))return!1;var v={};return"abcdefghijklmnopqrst".split("").forEach(function(N){v[N]=N}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},v)).join("")}catch{return!1}}()?Object.assign:function(F,j){for(var d,v,m=o(F),N=1;N<arguments.length;N++){for(var M in d=Object(arguments[N]))x.call(d,M)&&(m[M]=d[M]);if(O){v=O(d);for(var L=0;L<v.length;L++)I.call(d,v[L])&&(m[v[L]]=d[v[L]])}}return m}},7024:(we,O,x)=>{var I="function"==typeof Map&&Map.prototype,o=Object.getOwnPropertyDescriptor&&I?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,C=I&&o&&"function"==typeof o.get?o.get:null,F=I&&Map.prototype.forEach,j="function"==typeof Set&&Set.prototype,d=Object.getOwnPropertyDescriptor&&j?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,m=j&&d&&"function"==typeof d.get?d.get:null,v=j&&Set.prototype.forEach,M="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,X="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,Q="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,q=Boolean.prototype.valueOf,Y=Object.prototype.toString,le=Function.prototype.toString,B=String.prototype.match,z=String.prototype.slice,U=String.prototype.replace,ee=String.prototype.toUpperCase,ge=String.prototype.toLowerCase,_e=RegExp.prototype.test,pe=Array.prototype.concat,g=Array.prototype.join,A=Array.prototype.slice,y=Math.floor,E="function"==typeof BigInt?BigInt.prototype.valueOf:null,D=Object.getOwnPropertySymbols,P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,ne="function"==typeof Symbol&&"object"==typeof Symbol.iterator,fe="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol,1)?Symbol.toStringTag:null,Oe=Object.prototype.propertyIsEnumerable,oe=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(ct){return ct.__proto__}:null);function Ge(ct,vt){if(ct===1/0||ct===-1/0||ct!=ct||ct&&ct>-1e3&&ct<1e3||_e.call(/e/,vt))return vt;var sn=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof ct){var mn=ct<0?-y(-ct):y(ct);if(mn!==ct){var kn=String(mn),Lt=z.call(vt,kn.length+1);return U.call(kn,sn,"$&_")+"."+U.call(U.call(Lt,/([0-9]{3})/g,"$&_"),/_$/,"")}}return U.call(vt,sn,"$&_")}var at=x(4654).custom,Fe=at&&Te(at)?at:null;function We(ct,vt,sn){var mn="double"===(sn.quoteStyle||vt)?'"':"'";return mn+ct+mn}function Qe(ct){return U.call(String(ct),/"/g,"&quot;")}function ft(ct){return!("[object Array]"!==rt(ct)||fe&&"object"==typeof ct&&fe in ct)}function Te(ct){if(ne)return ct&&"object"==typeof ct&&ct instanceof Symbol;if("symbol"==typeof ct)return!0;if(!ct||"object"!=typeof ct||!P)return!1;try{return P.call(ct),!0}catch{}return!1}we.exports=function ct(vt,sn,mn,kn){var Lt=sn||{};if(me(Lt,"quoteStyle")&&"single"!==Lt.quoteStyle&&"double"!==Lt.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(me(Lt,"maxStringLength")&&("number"==typeof Lt.maxStringLength?Lt.maxStringLength<0&&Lt.maxStringLength!==1/0:null!==Lt.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var gn=!me(Lt,"customInspect")||Lt.customInspect;if("boolean"!=typeof gn&&"symbol"!==gn)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(me(Lt,"indent")&&null!==Lt.indent&&"\t"!==Lt.indent&&!(parseInt(Lt.indent,10)===Lt.indent&&Lt.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(me(Lt,"numericSeparator")&&"boolean"!=typeof Lt.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Sr=Lt.numericSeparator;if(void 0===vt)return"undefined";if(null===vt)return"null";if("boolean"==typeof vt)return vt?"true":"false";if("string"==typeof vt)return It(vt,Lt);if("number"==typeof vt){if(0===vt)return 1/0/vt>0?"0":"-0";var _n=String(vt);return Sr?Ge(vt,_n):_n}if("bigint"==typeof vt){var Mn=String(vt)+"n";return Sr?Ge(vt,Mn):Mn}var fr=void 0===Lt.depth?5:Lt.depth;if(void 0===mn&&(mn=0),mn>=fr&&fr>0&&"object"==typeof vt)return ft(vt)?"[Array]":"[Object]";var Kr=function Wt(ct,vt){var sn;if("\t"===ct.indent)sn="\t";else{if(!("number"==typeof ct.indent&&ct.indent>0))return null;sn=g.call(Array(ct.indent+1)," ")}return{base:sn,prev:g.call(Array(vt+1),sn)}}(Lt,mn);if(void 0===kn)kn=[];else if($(kn,vt)>=0)return"[Circular]";function Nn(Xr,ci,Gi){if(ci&&(kn=A.call(kn)).push(ci),Gi){var En={depth:Lt.depth};return me(Lt,"quoteStyle")&&(En.quoteStyle=Lt.quoteStyle),ct(Xr,En,mn+1,kn)}return ct(Xr,Lt,mn+1,kn)}if("function"==typeof vt){var Ir=function ye(ct){if(ct.name)return ct.name;var vt=B.call(le.call(ct),/^function\s*([\w$]+)/);return vt?vt[1]:null}(vt),ar=wn(vt,Nn);return"[Function"+(Ir?": "+Ir:" (anonymous)")+"]"+(ar.length>0?" { "+g.call(ar,", ")+" }":"")}if(Te(vt)){var Tr=ne?U.call(String(vt),/^(Symbol\(.*\))_[^)]*$/,"$1"):P.call(vt);return"object"!=typeof vt||ne?Tr:zt(Tr)}if(function it(ct){return!(!ct||"object"!=typeof ct)&&("undefined"!=typeof HTMLElement&&ct instanceof HTMLElement||"string"==typeof ct.nodeName&&"function"==typeof ct.getAttribute)}(vt)){for(var li="<"+ge.call(String(vt.nodeName)),no=vt.attributes||[],Li=0;Li<no.length;Li++)li+=" "+no[Li].name+"="+We(Qe(no[Li].value),"double",Lt);return li+=">",vt.childNodes&&vt.childNodes.length&&(li+="..."),li+"</"+ge.call(String(vt.nodeName))+">"}if(ft(vt)){if(0===vt.length)return"[]";var mi=wn(vt,Nn);return Kr&&!function Dn(ct){for(var vt=0;vt<ct.length;vt++)if($(ct[vt],"\n")>=0)return!1;return!0}(mi)?"["+Ot(mi,Kr)+"]":"[ "+g.call(mi,", ")+" ]"}if(function nt(ct){return!("[object Error]"!==rt(ct)||fe&&"object"==typeof ct&&fe in ct)}(vt)){var ui=wn(vt,Nn);return"cause"in vt&&!Oe.call(vt,"cause")?"{ ["+String(vt)+"] "+g.call(pe.call("[cause]: "+Nn(vt.cause),ui),", ")+" }":0===ui.length?"["+String(vt)+"]":"{ ["+String(vt)+"] "+g.call(ui,", ")+" }"}if("object"==typeof vt&&gn){if(Fe&&"function"==typeof vt[Fe])return vt[Fe]();if("symbol"!==gn&&"function"==typeof vt.inspect)return vt.inspect()}if(function k(ct){if(!C||!ct||"object"!=typeof ct)return!1;try{C.call(ct);try{m.call(ct)}catch{return!0}return ct instanceof Map}catch{}return!1}(vt)){var Pi=[];return F.call(vt,function(Xr,ci){Pi.push(Nn(ci,vt,!0)+" => "+Nn(Xr,vt))}),Pe("Map",C.call(vt),Pi,Kr)}if(function Me(ct){if(!m||!ct||"object"!=typeof ct)return!1;try{m.call(ct);try{C.call(ct)}catch{return!0}return ct instanceof Set}catch{}return!1}(vt)){var wo=[];return v.call(vt,function(Xr){wo.push(Nn(Xr,vt))}),Pe("Set",m.call(vt),wo,Kr)}if(function K(ct){if(!M||!ct||"object"!=typeof ct)return!1;try{M.call(ct,M);try{X.call(ct,X)}catch{return!0}return ct instanceof WeakMap}catch{}return!1}(vt))return Xt("WeakMap");if(function Ye(ct){if(!X||!ct||"object"!=typeof ct)return!1;try{X.call(ct,X);try{M.call(ct,M)}catch{return!0}return ct instanceof WeakSet}catch{}return!1}(vt))return Xt("WeakSet");if(function he(ct){if(!Q||!ct||"object"!=typeof ct)return!1;try{return Q.call(ct),!0}catch{}return!1}(vt))return Xt("WeakRef");if(function te(ct){return!("[object Number]"!==rt(ct)||fe&&"object"==typeof ct&&fe in ct)}(vt))return zt(Nn(Number(vt)));if(function ze(ct){if(!ct||"object"!=typeof ct||!E)return!1;try{return E.call(ct),!0}catch{}return!1}(vt))return zt(Nn(E.call(vt)));if(function ae(ct){return!("[object Boolean]"!==rt(ct)||fe&&"object"==typeof ct&&fe in ct)}(vt))return zt(q.call(vt));if(function de(ct){return!("[object String]"!==rt(ct)||fe&&"object"==typeof ct&&fe in ct)}(vt))return zt(Nn(String(vt)));if(!function Ze(ct){return!("[object Date]"!==rt(ct)||fe&&"object"==typeof ct&&fe in ct)}(vt)&&!function Ue(ct){return!("[object RegExp]"!==rt(ct)||fe&&"object"==typeof ct&&fe in ct)}(vt)){var Ur=wn(vt,Nn),ro=oe?oe(vt)===Object.prototype:vt instanceof Object||vt.constructor===Object,zi=vt instanceof Object?"":"null prototype",Ui=!ro&&fe&&Object(vt)===vt&&fe in vt?z.call(rt(vt),8,-1):zi?"Object":"",io=(ro||"function"!=typeof vt.constructor?"":vt.constructor.name?vt.constructor.name+" ":"")+(Ui||zi?"["+g.call(pe.call([],Ui||[],zi||[]),": ")+"] ":"");return 0===Ur.length?io+"{}":Kr?io+"{"+Ot(Ur,Kr)+"}":io+"{ "+g.call(Ur,", ")+" }"}return String(vt)};var ce=Object.prototype.hasOwnProperty||function(ct){return ct in this};function me(ct,vt){return ce.call(ct,vt)}function rt(ct){return Y.call(ct)}function $(ct,vt){if(ct.indexOf)return ct.indexOf(vt);for(var sn=0,mn=ct.length;sn<mn;sn++)if(ct[sn]===vt)return sn;return-1}function It(ct,vt){if(ct.length>vt.maxStringLength){var sn=ct.length-vt.maxStringLength,mn="... "+sn+" more character"+(sn>1?"s":"");return It(z.call(ct,0,vt.maxStringLength),vt)+mn}return We(U.call(U.call(ct,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,At),"single",vt)}function At(ct){var vt=ct.charCodeAt(0),sn={8:"b",9:"t",10:"n",12:"f",13:"r"}[vt];return sn?"\\"+sn:"\\x"+(vt<16?"0":"")+ee.call(vt.toString(16))}function zt(ct){return"Object("+ct+")"}function Xt(ct){return ct+" { ? }"}function Pe(ct,vt,sn,mn){return ct+" ("+vt+") {"+(mn?Ot(sn,mn):g.call(sn,", "))+"}"}function Ot(ct,vt){if(0===ct.length)return"";var sn="\n"+vt.prev+vt.base;return sn+g.call(ct,","+sn)+"\n"+vt.prev}function wn(ct,vt){var sn=ft(ct),mn=[];if(sn){mn.length=ct.length;for(var kn=0;kn<ct.length;kn++)mn[kn]=me(ct,kn)?vt(ct[kn],ct):""}var gn,Lt="function"==typeof D?D(ct):[];if(ne){gn={};for(var Sr=0;Sr<Lt.length;Sr++)gn["$"+Lt[Sr]]=Lt[Sr]}for(var _n in ct)!me(ct,_n)||sn&&String(Number(_n))===_n&&_n<ct.length||ne&&gn["$"+_n]instanceof Symbol||(_e.call(/[^\w$]/,_n)?mn.push(vt(_n,ct)+": "+vt(ct[_n],ct)):mn.push(_n+": "+vt(ct[_n],ct)));if("function"==typeof D)for(var Mn=0;Mn<Lt.length;Mn++)Oe.call(ct,Lt[Mn])&&mn.push("["+vt(Lt[Mn])+"]: "+vt(ct[Lt[Mn]],ct));return mn}},9687:function(we){we.exports=function(O){var x={};function I(o){if(x[o])return x[o].exports;var C=x[o]={i:o,l:!1,exports:{}};return O[o].call(C.exports,C,C.exports,I),C.l=!0,C.exports}return I.m=O,I.c=x,I.d=function(o,C,F){I.o(o,C)||Object.defineProperty(o,C,{enumerable:!0,get:F})},I.r=function(o){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},I.t=function(o,C){if(1&C&&(o=I(o)),8&C||4&C&&"object"==typeof o&&o&&o.__esModule)return o;var F=Object.create(null);if(I.r(F),Object.defineProperty(F,"default",{enumerable:!0,value:o}),2&C&&"string"!=typeof o)for(var j in o)I.d(F,j,function(d){return o[d]}.bind(null,j));return F},I.n=function(o){var C=o&&o.__esModule?function(){return o.default}:function(){return o};return I.d(C,"a",C),C},I.o=function(o,C){return Object.prototype.hasOwnProperty.call(o,C)},I.p="",I(I.s=22)}([function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0});var o=function(){function d(m,v){for(var N=0;N<v.length;N++){var M=v[N];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(m,M.key,M)}}return function(m,v,N){return v&&d(m.prototype,v),N&&d(m,N),m}}(),C={debug:function(){},info:function(){},warn:function(){},error:function(){}},F=void 0,j=void 0;(x.Log=function(){function d(){!function(v,N){if(!(v instanceof N))throw new TypeError("Cannot call a class as a function")}(this,d)}return d.reset=function(){j=3,F=C},d.debug=function(){if(j>=4){for(var v=arguments.length,N=Array(v),M=0;M<v;M++)N[M]=arguments[M];F.debug.apply(F,Array.from(N))}},d.info=function(){if(j>=3){for(var v=arguments.length,N=Array(v),M=0;M<v;M++)N[M]=arguments[M];F.info.apply(F,Array.from(N))}},d.warn=function(){if(j>=2){for(var v=arguments.length,N=Array(v),M=0;M<v;M++)N[M]=arguments[M];F.warn.apply(F,Array.from(N))}},d.error=function(){if(j>=1){for(var v=arguments.length,N=Array(v),M=0;M<v;M++)N[M]=arguments[M];F.error.apply(F,Array.from(N))}},o(d,null,[{key:"NONE",get:function(){return 0}},{key:"ERROR",get:function(){return 1}},{key:"WARN",get:function(){return 2}},{key:"INFO",get:function(){return 3}},{key:"DEBUG",get:function(){return 4}},{key:"level",get:function(){return j},set:function(v){if(!(0<=v&&v<=4))throw new Error("Invalid log level");j=v}},{key:"logger",get:function(){return F},set:function(v){if(!v.debug&&v.info&&(v.debug=v.info),!(v.debug&&v.info&&v.warn&&v.error))throw new Error("Invalid logger");F=v}}]),d}()).reset()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0});var o=function(){function d(m,v){for(var N=0;N<v.length;N++){var M=v[N];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(m,M.key,M)}}return function(m,v,N){return v&&d(m.prototype,v),N&&d(m,N),m}}(),C={setInterval:function(d){function m(v,N){return d.apply(this,arguments)}return m.toString=function(){return d.toString()},m}(function(d,m){return setInterval(d,m)}),clearInterval:function(d){function m(v){return d.apply(this,arguments)}return m.toString=function(){return d.toString()},m}(function(d){return clearInterval(d)})},F=!1,j=null;x.Global=function(){function d(){!function(v,N){if(!(v instanceof N))throw new TypeError("Cannot call a class as a function")}(this,d)}return d._testing=function(){F=!0},d.setXMLHttpRequest=function(v){j=v},o(d,null,[{key:"location",get:function(){if(!F)return location}},{key:"localStorage",get:function(){if(!F&&"undefined"!=typeof window)return localStorage}},{key:"sessionStorage",get:function(){if(!F&&"undefined"!=typeof window)return sessionStorage}},{key:"XMLHttpRequest",get:function(){if(!F&&"undefined"!=typeof window)return j||XMLHttpRequest}},{key:"timer",get:function(){if(!F)return C}}]),d}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.MetadataService=void 0;var o=function(){function m(v,N){for(var M=0;M<N.length;M++){var L=N[M];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(v,L.key,L)}}return function(v,N,M){return N&&m(v.prototype,N),M&&m(v,M),v}}(),C=I(0),F=I(7);function j(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}var d=".well-known/openid-configuration";x.MetadataService=function(){function m(v){var N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F.JsonService;if(j(this,m),!v)throw C.Log.error("MetadataService: No settings passed to MetadataService"),new Error("settings");this._settings=v,this._jsonService=new N(["application/jwk-set+json"])}return m.prototype.resetSigningKeys=function(){this._settings=this._settings||{},this._settings.signingKeys=void 0},m.prototype.getMetadata=function(){var N=this;return this._settings.metadata?(C.Log.debug("MetadataService.getMetadata: Returning metadata from settings"),Promise.resolve(this._settings.metadata)):this.metadataUrl?(C.Log.debug("MetadataService.getMetadata: getting metadata from",this.metadataUrl),this._jsonService.getJson(this.metadataUrl).then(function(M){return C.Log.debug("MetadataService.getMetadata: json received"),N._settings.metadata=Object.assign({},N._settings.metadataSeed||{},M),N._settings.metadata})):(C.Log.error("MetadataService.getMetadata: No authority or metadataUrl configured on settings"),Promise.reject(new Error("No authority or metadataUrl configured on settings")))},m.prototype.getIssuer=function(){return this._getMetadataProperty("issuer")},m.prototype.getAuthorizationEndpoint=function(){return this._getMetadataProperty("authorization_endpoint")},m.prototype.getUserInfoEndpoint=function(){return this._getMetadataProperty("userinfo_endpoint")},m.prototype.getTokenEndpoint=function(){return this._getMetadataProperty("token_endpoint",!(arguments.length>0&&void 0!==arguments[0])||arguments[0])},m.prototype.getCheckSessionIframe=function(){return this._getMetadataProperty("check_session_iframe",!0)},m.prototype.getEndSessionEndpoint=function(){return this._getMetadataProperty("end_session_endpoint",!0)},m.prototype.getRevocationEndpoint=function(){return this._getMetadataProperty("revocation_endpoint",!0)},m.prototype.getKeysEndpoint=function(){return this._getMetadataProperty("jwks_uri",!0)},m.prototype._getMetadataProperty=function(N){var M=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return C.Log.debug("MetadataService.getMetadataProperty for: "+N),this.getMetadata().then(function(L){if(C.Log.debug("MetadataService.getMetadataProperty: metadata recieved"),void 0===L[N]){if(!0===M)return void C.Log.warn("MetadataService.getMetadataProperty: Metadata does not contain optional property "+N);throw C.Log.error("MetadataService.getMetadataProperty: Metadata does not contain property "+N),new Error("Metadata does not contain property "+N)}return L[N]})},m.prototype.getSigningKeys=function(){var N=this;return this._settings.signingKeys?(C.Log.debug("MetadataService.getSigningKeys: Returning signingKeys from settings"),Promise.resolve(this._settings.signingKeys)):this._getMetadataProperty("jwks_uri").then(function(M){return C.Log.debug("MetadataService.getSigningKeys: jwks_uri received",M),N._jsonService.getJson(M).then(function(L){if(C.Log.debug("MetadataService.getSigningKeys: key set received",L),!L.keys)throw C.Log.error("MetadataService.getSigningKeys: Missing keys on keyset"),new Error("Missing keys on keyset");return N._settings.signingKeys=L.keys,N._settings.signingKeys})})},o(m,[{key:"metadataUrl",get:function(){return this._metadataUrl||(this._settings.metadataUrl?this._metadataUrl=this._settings.metadataUrl:(this._metadataUrl=this._settings.authority,this._metadataUrl&&this._metadataUrl.indexOf(d)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=d))),this._metadataUrl}}]),m}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.UrlUtility=void 0;var o=I(0),C=I(1);x.UrlUtility=function(){function F(){!function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")}(this,F)}return F.addQueryParam=function(d,m,v){return d.indexOf("?")<0&&(d+="?"),"?"!==d[d.length-1]&&(d+="&"),d+=encodeURIComponent(m),(d+="=")+encodeURIComponent(v)},F.parseUrlFragment=function(d){var m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";"string"!=typeof d&&(d=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:C.Global).location.href);var N=d.lastIndexOf(m);N>=0&&(d=d.substr(N+1)),"?"===m&&(N=d.indexOf("#"))>=0&&(d=d.substr(0,N));for(var M,L={},X=/([^&=]+)=([^&]*)/g,H=0;M=X.exec(d);)if(L[decodeURIComponent(M[1])]=decodeURIComponent(M[2].replace(/\+/g," ")),H++>50)return o.Log.error("UrlUtility.parseUrlFragment: response exceeded expected number of parameters",d),{error:"Response exceeded expected number of parameters"};for(var Q in L)return L;return{}},F}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.JoseUtil=void 0;var j,o=I(26),C=(j=I(33))&&j.__esModule?j:{default:j};x.JoseUtil=(0,C.default)({jws:o.jws,KeyUtil:o.KeyUtil,X509:o.X509,crypto:o.crypto,hextob64u:o.hextob64u,b64tohex:o.b64tohex,AllowedSigningAlgs:o.AllowedSigningAlgs})},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.OidcClientSettings=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Q){return typeof Q}:function(Q){return Q&&"function"==typeof Symbol&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},C=function(){function Q(q,Y){for(var le=0;le<Y.length;le++){var B=Y[le];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(q,B.key,B)}}return function(q,Y,le){return Y&&Q(q.prototype,Y),le&&Q(q,le),q}}(),F=I(0),j=I(23),d=I(6),m=I(24),v=I(2);function N(Q,q){if(!(Q instanceof q))throw new TypeError("Cannot call a class as a function")}var M=".well-known/openid-configuration",L="id_token",X="openid",H="client_secret_post";x.OidcClientSettings=function(){function Q(){var q=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Y=q.authority,le=q.metadataUrl,B=q.metadata,z=q.signingKeys,U=q.metadataSeed,ee=q.client_id,ge=q.client_secret,_e=q.response_type,pe=void 0===_e?L:_e,g=q.scope,A=void 0===g?X:g,y=q.redirect_uri,E=q.post_logout_redirect_uri,D=q.client_authentication,P=void 0===D?H:D,ne=q.prompt,fe=q.display,Oe=q.max_age,oe=q.ui_locales,Ge=q.acr_values,at=q.resource,Fe=q.response_mode,We=q.filterProtocolClaims,Qe=void 0===We||We,ft=q.loadUserInfo,Ze=void 0===ft||ft,Ue=q.staleStateAge,nt=void 0===Ue?900:Ue,de=q.clockSkew,te=void 0===de?300:de,ae=q.clockService,Te=void 0===ae?new j.ClockService:ae,ze=q.userInfoJwtIssuer,ce=void 0===ze?"OP":ze,me=q.mergeClaims,rt=void 0!==me&&me,ye=q.stateStore,$=void 0===ye?new d.WebStorageStateStore:ye,k=q.ResponseValidatorCtor,K=void 0===k?m.ResponseValidator:k,he=q.MetadataServiceCtor,Me=void 0===he?v.MetadataService:he,Ye=q.extraQueryParams,it=void 0===Ye?{}:Ye,It=q.extraTokenParams,At=void 0===It?{}:It;N(this,Q),this._authority=Y,this._metadataUrl=le,this._metadata=B,this._metadataSeed=U,this._signingKeys=z,this._client_id=ee,this._client_secret=ge,this._response_type=pe,this._scope=A,this._redirect_uri=y,this._post_logout_redirect_uri=E,this._client_authentication=P,this._prompt=ne,this._display=fe,this._max_age=Oe,this._ui_locales=oe,this._acr_values=Ge,this._resource=at,this._response_mode=Fe,this._filterProtocolClaims=!!Qe,this._loadUserInfo=!!Ze,this._staleStateAge=nt,this._clockSkew=te,this._clockService=Te,this._userInfoJwtIssuer=ce,this._mergeClaims=!!rt,this._stateStore=$,this._validator=new K(this),this._metadataService=new Me(this),this._extraQueryParams="object"===(void 0===it?"undefined":o(it))?it:{},this._extraTokenParams="object"===(void 0===At?"undefined":o(At))?At:{}}return Q.prototype.getEpochTime=function(){return this._clockService.getEpochTime()},C(Q,[{key:"client_id",get:function(){return this._client_id},set:function(Y){if(this._client_id)throw F.Log.error("OidcClientSettings.set_client_id: client_id has already been assigned."),new Error("client_id has already been assigned.");this._client_id=Y}},{key:"client_secret",get:function(){return this._client_secret}},{key:"response_type",get:function(){return this._response_type}},{key:"scope",get:function(){return this._scope}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"post_logout_redirect_uri",get:function(){return this._post_logout_redirect_uri}},{key:"client_authentication",get:function(){return this._client_authentication}},{key:"prompt",get:function(){return this._prompt}},{key:"display",get:function(){return this._display}},{key:"max_age",get:function(){return this._max_age}},{key:"ui_locales",get:function(){return this._ui_locales}},{key:"acr_values",get:function(){return this._acr_values}},{key:"resource",get:function(){return this._resource}},{key:"response_mode",get:function(){return this._response_mode}},{key:"authority",get:function(){return this._authority},set:function(Y){if(this._authority)throw F.Log.error("OidcClientSettings.set_authority: authority has already been assigned."),new Error("authority has already been assigned.");this._authority=Y}},{key:"metadataUrl",get:function(){return this._metadataUrl||(this._metadataUrl=this.authority,this._metadataUrl&&this._metadataUrl.indexOf(M)<0&&("/"!==this._metadataUrl[this._metadataUrl.length-1]&&(this._metadataUrl+="/"),this._metadataUrl+=M)),this._metadataUrl}},{key:"metadata",get:function(){return this._metadata},set:function(Y){this._metadata=Y}},{key:"metadataSeed",get:function(){return this._metadataSeed},set:function(Y){this._metadataSeed=Y}},{key:"signingKeys",get:function(){return this._signingKeys},set:function(Y){this._signingKeys=Y}},{key:"filterProtocolClaims",get:function(){return this._filterProtocolClaims}},{key:"loadUserInfo",get:function(){return this._loadUserInfo}},{key:"staleStateAge",get:function(){return this._staleStateAge}},{key:"clockSkew",get:function(){return this._clockSkew}},{key:"userInfoJwtIssuer",get:function(){return this._userInfoJwtIssuer}},{key:"mergeClaims",get:function(){return this._mergeClaims}},{key:"stateStore",get:function(){return this._stateStore}},{key:"validator",get:function(){return this._validator}},{key:"metadataService",get:function(){return this._metadataService}},{key:"extraQueryParams",get:function(){return this._extraQueryParams},set:function(Y){this._extraQueryParams="object"===(void 0===Y?"undefined":o(Y))?Y:{}}},{key:"extraTokenParams",get:function(){return this._extraTokenParams},set:function(Y){this._extraTokenParams="object"===(void 0===Y?"undefined":o(Y))?Y:{}}}]),Q}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.WebStorageStateStore=void 0;var o=I(0),C=I(1);function F(j,d){if(!(j instanceof d))throw new TypeError("Cannot call a class as a function")}x.WebStorageStateStore=function(){function j(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},m=d.prefix,v=void 0===m?"oidc.":m,N=d.store,M=void 0===N?C.Global.localStorage:N;F(this,j),this._store=M,this._prefix=v}return j.prototype.set=function(m,v){return o.Log.debug("WebStorageStateStore.set",m),this._store.setItem(m=this._prefix+m,v),Promise.resolve()},j.prototype.get=function(m){o.Log.debug("WebStorageStateStore.get",m);var v=this._store.getItem(m=this._prefix+m);return Promise.resolve(v)},j.prototype.remove=function(m){o.Log.debug("WebStorageStateStore.remove",m);var v=this._store.getItem(m=this._prefix+m);return this._store.removeItem(m),Promise.resolve(v)},j.prototype.getAllKeys=function(){o.Log.debug("WebStorageStateStore.getAllKeys");for(var m=[],v=0;v<this._store.length;v++){var N=this._store.key(v);0===N.indexOf(this._prefix)&&m.push(N.substr(this._prefix.length))}return Promise.resolve(m)},j}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.JsonService=void 0;var o=I(0),C=I(1);function F(j,d){if(!(j instanceof d))throw new TypeError("Cannot call a class as a function")}x.JsonService=function(){function j(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:C.Global.XMLHttpRequest,v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;F(this,j),this._contentTypes=d&&Array.isArray(d)?d.slice():[],this._contentTypes.push("application/json"),v&&this._contentTypes.push("application/jwt"),this._XMLHttpRequest=m,this._jwtHandler=v}return j.prototype.getJson=function(m,v){var N=this;if(!m)throw o.Log.error("JsonService.getJson: No url passed"),new Error("url");return o.Log.debug("JsonService.getJson, url: ",m),new Promise(function(M,L){var X=new N._XMLHttpRequest;X.open("GET",m);var H=N._contentTypes,Q=N._jwtHandler;X.onload=function(){if(o.Log.debug("JsonService.getJson: HTTP response received, status",X.status),200===X.status){var q=X.getResponseHeader("Content-Type");if(q){var Y=H.find(function(le){if(q.startsWith(le))return!0});if("application/jwt"==Y)return void Q(X).then(M,L);if(Y)try{return void M(JSON.parse(X.responseText))}catch(le){return o.Log.error("JsonService.getJson: Error parsing JSON response",le.message),void L(le)}}L(Error("Invalid response Content-Type: "+q+", from URL: "+m))}else L(Error(X.statusText+" ("+X.status+")"))},X.onerror=function(){o.Log.error("JsonService.getJson: network error"),L(Error("Network Error"))},v&&(o.Log.debug("JsonService.getJson: token passed, setting Authorization header"),X.setRequestHeader("Authorization","Bearer "+v)),X.send()})},j.prototype.postForm=function(m,v,N){var M=this;if(!m)throw o.Log.error("JsonService.postForm: No url passed"),new Error("url");return o.Log.debug("JsonService.postForm, url: ",m),new Promise(function(L,X){var H=new M._XMLHttpRequest;H.open("POST",m);var Q=M._contentTypes;H.onload=function(){if(o.Log.debug("JsonService.postForm: HTTP response received, status",H.status),200!==H.status){if(400===H.status&&(z=H.getResponseHeader("Content-Type"))&&Q.find(function(U){if(z.startsWith(U))return!0}))try{var B=JSON.parse(H.responseText);if(B&&B.error)return o.Log.error("JsonService.postForm: Error from server: ",B.error),void X(new Error(B.error))}catch(U){return o.Log.error("JsonService.postForm: Error parsing JSON response",U.message),void X(U)}X(Error(H.statusText+" ("+H.status+")"))}else{var z;if((z=H.getResponseHeader("Content-Type"))&&Q.find(function(U){if(z.startsWith(U))return!0}))try{return void L(JSON.parse(H.responseText))}catch(U){return o.Log.error("JsonService.postForm: Error parsing JSON response",U.message),void X(U)}X(Error("Invalid response Content-Type: "+z+", from URL: "+m))}},H.onerror=function(){o.Log.error("JsonService.postForm: network error"),X(Error("Network Error"))};var q="";for(var Y in v){var le=v[Y];le&&(q.length>0&&(q+="&"),q+=encodeURIComponent(Y),q+="=",q+=encodeURIComponent(le))}H.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),void 0!==N&&H.setRequestHeader("Authorization","Basic "+btoa(N)),H.send(q)})},j}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.SigninRequest=void 0;var o=I(0),C=I(3),F=I(13);x.SigninRequest=function(){function j(d){var m=d.url,v=d.client_id,N=d.redirect_uri,M=d.response_type,L=d.scope,X=d.authority,H=d.data,Q=d.prompt,q=d.display,Y=d.max_age,le=d.ui_locales,B=d.id_token_hint,z=d.login_hint,U=d.acr_values,ee=d.resource,ge=d.response_mode,_e=d.request,pe=d.request_uri,g=d.extraQueryParams,A=d.request_type,y=d.client_secret,E=d.extraTokenParams,D=d.skipUserInfo;if(function(at,Fe){if(!(at instanceof Fe))throw new TypeError("Cannot call a class as a function")}(this,j),!m)throw o.Log.error("SigninRequest.ctor: No url passed"),new Error("url");if(!v)throw o.Log.error("SigninRequest.ctor: No client_id passed"),new Error("client_id");if(!N)throw o.Log.error("SigninRequest.ctor: No redirect_uri passed"),new Error("redirect_uri");if(!M)throw o.Log.error("SigninRequest.ctor: No response_type passed"),new Error("response_type");if(!L)throw o.Log.error("SigninRequest.ctor: No scope passed"),new Error("scope");if(!X)throw o.Log.error("SigninRequest.ctor: No authority passed"),new Error("authority");var P=j.isOidc(M),ne=j.isCode(M);ge||(ge=j.isCode(M)?"query":null),this.state=new F.SigninState({nonce:P,data:H,client_id:v,authority:X,redirect_uri:N,code_verifier:ne,request_type:A,response_mode:ge,client_secret:y,scope:L,extraTokenParams:E,skipUserInfo:D}),m=C.UrlUtility.addQueryParam(m,"client_id",v),m=C.UrlUtility.addQueryParam(m,"redirect_uri",N),m=C.UrlUtility.addQueryParam(m,"response_type",M),m=C.UrlUtility.addQueryParam(m,"scope",L),m=C.UrlUtility.addQueryParam(m,"state",this.state.id),P&&(m=C.UrlUtility.addQueryParam(m,"nonce",this.state.nonce)),ne&&(m=C.UrlUtility.addQueryParam(m,"code_challenge",this.state.code_challenge),m=C.UrlUtility.addQueryParam(m,"code_challenge_method","S256"));var fe={prompt:Q,display:q,max_age:Y,ui_locales:le,id_token_hint:B,login_hint:z,acr_values:U,resource:ee,request:_e,request_uri:pe,response_mode:ge};for(var Oe in fe)fe[Oe]&&(m=C.UrlUtility.addQueryParam(m,Oe,fe[Oe]));for(var oe in g)m=C.UrlUtility.addQueryParam(m,oe,g[oe]);this.url=m}return j.isOidc=function(m){return!!m.split(/\s+/g).filter(function(v){return"id_token"===v})[0]},j.isOAuth=function(m){return!!m.split(/\s+/g).filter(function(v){return"token"===v})[0]},j.isCode=function(m){return!!m.split(/\s+/g).filter(function(v){return"code"===v})[0]},j}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.State=void 0;var m,o=function(){function d(m,v){for(var N=0;N<v.length;N++){var M=v[N];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(m,M.key,M)}}return function(m,v,N){return v&&d(m.prototype,v),N&&d(m,N),m}}(),C=I(0),F=(m=I(14))&&m.__esModule?m:{default:m};function j(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")}x.State=function(){function d(){var m=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},v=m.id,N=m.data,M=m.created,L=m.request_type;j(this,d),this._id=v||(0,F.default)(),this._data=N,this._created="number"==typeof M&&M>0?M:parseInt(Date.now()/1e3),this._request_type=L}return d.prototype.toStorageString=function(){return C.Log.debug("State.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type})},d.fromStorageString=function(v){return C.Log.debug("State.fromStorageString"),new d(JSON.parse(v))},d.clearStaleState=function(v,N){var M=Date.now()/1e3-N;return v.getAllKeys().then(function(L){C.Log.debug("State.clearStaleState: got keys",L);for(var X=[],H=function(le){var B=L[le];q=v.get(B).then(function(z){var U=!1;if(z)try{var ee=d.fromStorageString(z);C.Log.debug("State.clearStaleState: got item from key: ",B,ee.created),ee.created<=M&&(U=!0)}catch(ge){C.Log.error("State.clearStaleState: Error parsing state for key",B,ge.message),U=!0}else C.Log.debug("State.clearStaleState: no item in storage for key: ",B),U=!0;if(U)return C.Log.debug("State.clearStaleState: removed item for key: ",B),v.remove(B)}),X.push(q)},Q=0;Q<L.length;Q++){var q;H(Q)}return C.Log.debug("State.clearStaleState: waiting on promise count:",X.length),Promise.all(X)})},o(d,[{key:"id",get:function(){return this._id}},{key:"data",get:function(){return this._data}},{key:"created",get:function(){return this._created}},{key:"request_type",get:function(){return this._request_type}}]),d}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.OidcClient=void 0;var o=function(){function H(Q,q){for(var Y=0;Y<q.length;Y++){var le=q[Y];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(Q,le.key,le)}}return function(Q,q,Y){return q&&H(Q.prototype,q),Y&&H(Q,Y),Q}}(),C=I(0),F=I(5),j=I(12),d=I(8),m=I(34),v=I(35),N=I(36),M=I(13),L=I(9);function X(H,Q){if(!(H instanceof Q))throw new TypeError("Cannot call a class as a function")}x.OidcClient=function(){function H(){var Q=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};X(this,H),this._settings=Q instanceof F.OidcClientSettings?Q:new F.OidcClientSettings(Q)}return H.prototype.createSigninRequest=function(){var q=this,Y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},le=Y.response_type,B=Y.scope,z=Y.redirect_uri,U=Y.data,ee=Y.state,ge=Y.prompt,_e=Y.display,pe=Y.max_age,g=Y.ui_locales,A=Y.id_token_hint,y=Y.login_hint,E=Y.acr_values,D=Y.resource,P=Y.request,ne=Y.request_uri,fe=Y.response_mode,Oe=Y.extraQueryParams,oe=Y.extraTokenParams,Ge=Y.request_type,at=Y.skipUserInfo,Fe=arguments[1];C.Log.debug("OidcClient.createSigninRequest");var We=this._settings.client_id;B=B||this._settings.scope,z=z||this._settings.redirect_uri,ge=ge||this._settings.prompt,_e=_e||this._settings.display,pe=pe||this._settings.max_age,g=g||this._settings.ui_locales,E=E||this._settings.acr_values,D=D||this._settings.resource,fe=fe||this._settings.response_mode,Oe=Oe||this._settings.extraQueryParams,oe=oe||this._settings.extraTokenParams;var Qe=this._settings.authority;return d.SigninRequest.isCode(le=le||this._settings.response_type)&&"code"!==le?Promise.reject(new Error("OpenID Connect hybrid flow is not supported")):this._metadataService.getAuthorizationEndpoint().then(function(ft){C.Log.debug("OidcClient.createSigninRequest: Received authorization endpoint",ft);var Ze=new d.SigninRequest({url:ft,client_id:We,redirect_uri:z,response_type:le,scope:B,data:U||ee,authority:Qe,prompt:ge,display:_e,max_age:pe,ui_locales:g,id_token_hint:A,login_hint:y,acr_values:E,resource:D,request:P,request_uri:ne,extraQueryParams:Oe,extraTokenParams:oe,request_type:Ge,response_mode:fe,client_secret:q._settings.client_secret,skipUserInfo:at}),Ue=Ze.state;return(Fe=Fe||q._stateStore).set(Ue.id,Ue.toStorageString()).then(function(){return Ze})})},H.prototype.readSigninResponseState=function(q,Y){var le=arguments.length>2&&void 0!==arguments[2]&&arguments[2];C.Log.debug("OidcClient.readSigninResponseState");var B="query"===this._settings.response_mode||!this._settings.response_mode&&d.SigninRequest.isCode(this._settings.response_type),U=new m.SigninResponse(q,B?"?":"#");return U.state?(Y=Y||this._stateStore,(le?Y.remove.bind(Y):Y.get.bind(Y))(U.state).then(function(ge){if(!ge)throw C.Log.error("OidcClient.readSigninResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:M.SigninState.fromStorageString(ge),response:U}})):(C.Log.error("OidcClient.readSigninResponseState: No state in response"),Promise.reject(new Error("No state in response")))},H.prototype.processSigninResponse=function(q,Y){var le=this;return C.Log.debug("OidcClient.processSigninResponse"),this.readSigninResponseState(q,Y,!0).then(function(B){var z=B.state,U=B.response;return C.Log.debug("OidcClient.processSigninResponse: Received state from storage; validating response"),le._validator.validateSigninResponse(z,U)})},H.prototype.createSignoutRequest=function(){var q=this,Y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},le=Y.id_token_hint,B=Y.data,z=Y.state,U=Y.post_logout_redirect_uri,ee=Y.extraQueryParams,ge=Y.request_type,_e=arguments[1];return C.Log.debug("OidcClient.createSignoutRequest"),U=U||this._settings.post_logout_redirect_uri,ee=ee||this._settings.extraQueryParams,this._metadataService.getEndSessionEndpoint().then(function(pe){if(!pe)throw C.Log.error("OidcClient.createSignoutRequest: No end session endpoint url returned"),new Error("no end session endpoint");C.Log.debug("OidcClient.createSignoutRequest: Received end session endpoint",pe);var g=new v.SignoutRequest({url:pe,id_token_hint:le,post_logout_redirect_uri:U,data:B||z,extraQueryParams:ee,request_type:ge}),A=g.state;return A&&(C.Log.debug("OidcClient.createSignoutRequest: Signout request has state to persist"),(_e=_e||q._stateStore).set(A.id,A.toStorageString())),g})},H.prototype.readSignoutResponseState=function(q,Y){var le=arguments.length>2&&void 0!==arguments[2]&&arguments[2];C.Log.debug("OidcClient.readSignoutResponseState");var B=new N.SignoutResponse(q);if(!B.state)return C.Log.debug("OidcClient.readSignoutResponseState: No state in response"),B.error?(C.Log.warn("OidcClient.readSignoutResponseState: Response was error: ",B.error),Promise.reject(new j.ErrorResponse(B))):Promise.resolve({state:void 0,response:B});var z=B.state;return Y=Y||this._stateStore,(le?Y.remove.bind(Y):Y.get.bind(Y))(z).then(function(ee){if(!ee)throw C.Log.error("OidcClient.readSignoutResponseState: No matching state found in storage"),new Error("No matching state found in storage");return{state:L.State.fromStorageString(ee),response:B}})},H.prototype.processSignoutResponse=function(q,Y){var le=this;return C.Log.debug("OidcClient.processSignoutResponse"),this.readSignoutResponseState(q,Y,!0).then(function(B){var z=B.state,U=B.response;return z?(C.Log.debug("OidcClient.processSignoutResponse: Received state from storage; validating response"),le._validator.validateSignoutResponse(z,U)):(C.Log.debug("OidcClient.processSignoutResponse: No state from storage; skipping validating response"),U)})},H.prototype.clearStaleState=function(q){return C.Log.debug("OidcClient.clearStaleState"),L.State.clearStaleState(q=q||this._stateStore,this.settings.staleStateAge)},o(H,[{key:"_stateStore",get:function(){return this.settings.stateStore}},{key:"_validator",get:function(){return this.settings.validator}},{key:"_metadataService",get:function(){return this.settings.metadataService}},{key:"settings",get:function(){return this._settings}},{key:"metadataService",get:function(){return this._metadataService}}]),H}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.TokenClient=void 0;var o=I(7),C=I(2),F=I(0);function j(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")}x.TokenClient=function(){function d(m){var v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.JsonService,N=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C.MetadataService;if(j(this,d),!m)throw F.Log.error("TokenClient.ctor: No settings passed"),new Error("settings");this._settings=m,this._jsonService=new v,this._metadataService=new N(this._settings)}return d.prototype.exchangeCode=function(){var v=this,N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(N=Object.assign({},N)).grant_type=N.grant_type||"authorization_code",N.client_id=N.client_id||this._settings.client_id,N.client_secret=N.client_secret||this._settings.client_secret,N.redirect_uri=N.redirect_uri||this._settings.redirect_uri;var M=void 0,L=N._client_authentication||this._settings._client_authentication;return delete N._client_authentication,N.code?N.redirect_uri?N.code_verifier?N.client_id?N.client_secret||"client_secret_basic"!=L?("client_secret_basic"==L&&(M=N.client_id+":"+N.client_secret,delete N.client_id,delete N.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(X){return F.Log.debug("TokenClient.exchangeCode: Received token endpoint"),v._jsonService.postForm(X,N,M).then(function(H){return F.Log.debug("TokenClient.exchangeCode: response received"),H})})):(F.Log.error("TokenClient.exchangeCode: No client_secret passed"),Promise.reject(new Error("A client_secret is required"))):(F.Log.error("TokenClient.exchangeCode: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(F.Log.error("TokenClient.exchangeCode: No code_verifier passed"),Promise.reject(new Error("A code_verifier is required"))):(F.Log.error("TokenClient.exchangeCode: No redirect_uri passed"),Promise.reject(new Error("A redirect_uri is required"))):(F.Log.error("TokenClient.exchangeCode: No code passed"),Promise.reject(new Error("A code is required")))},d.prototype.exchangeRefreshToken=function(){var v=this,N=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(N=Object.assign({},N)).grant_type=N.grant_type||"refresh_token",N.client_id=N.client_id||this._settings.client_id,N.client_secret=N.client_secret||this._settings.client_secret;var M=void 0,L=N._client_authentication||this._settings._client_authentication;return delete N._client_authentication,N.refresh_token?N.client_id?("client_secret_basic"==L&&(M=N.client_id+":"+N.client_secret,delete N.client_id,delete N.client_secret),this._metadataService.getTokenEndpoint(!1).then(function(X){return F.Log.debug("TokenClient.exchangeRefreshToken: Received token endpoint"),v._jsonService.postForm(X,N,M).then(function(H){return F.Log.debug("TokenClient.exchangeRefreshToken: response received"),H})})):(F.Log.error("TokenClient.exchangeRefreshToken: No client_id passed"),Promise.reject(new Error("A client_id is required"))):(F.Log.error("TokenClient.exchangeRefreshToken: No refresh_token passed"),Promise.reject(new Error("A refresh_token is required")))},d}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.ErrorResponse=void 0;var o=I(0);function C(j,d){if(!(j instanceof d))throw new TypeError("Cannot call a class as a function")}function F(j,d){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!d||"object"!=typeof d&&"function"!=typeof d?j:d}x.ErrorResponse=function(j){function d(){var m=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},v=m.error,N=m.error_description,M=m.error_uri,L=m.state,X=m.session_state;if(C(this,d),!v)throw o.Log.error("No error passed to ErrorResponse"),new Error("error");var H=F(this,j.call(this,N||v));return H.name="ErrorResponse",H.error=v,H.error_description=N,H.error_uri=M,H.state=L,H.session_state=X,H}return function(v,N){if("function"!=typeof N&&null!==N)throw new TypeError("Super expression must either be null or a function, not "+typeof N);v.prototype=Object.create(N&&N.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(v,N):v.__proto__=N)}(d,j),d}(Error)},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.SigninState=void 0;var M,o=function(){function N(M,L){for(var X=0;X<L.length;X++){var H=L[X];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(M,H.key,H)}}return function(M,L,X){return L&&N(M.prototype,L),X&&N(M,X),M}}(),C=I(0),F=I(9),j=I(4),d=(M=I(14))&&M.__esModule?M:{default:M};function m(N,M){if(!(N instanceof M))throw new TypeError("Cannot call a class as a function")}function v(N,M){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!M||"object"!=typeof M&&"function"!=typeof M?N:M}x.SigninState=function(N){function M(){var L=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},X=L.nonce,H=L.authority,Q=L.client_id,q=L.redirect_uri,Y=L.code_verifier,le=L.response_mode,B=L.client_secret,z=L.scope,U=L.extraTokenParams,ee=L.skipUserInfo;m(this,M);var ge=v(this,N.call(this,arguments[0]));if(!0===X?ge._nonce=(0,d.default)():X&&(ge._nonce=X),!0===Y?ge._code_verifier=(0,d.default)()+(0,d.default)()+(0,d.default)():Y&&(ge._code_verifier=Y),ge.code_verifier){var _e=j.JoseUtil.hashString(ge.code_verifier,"SHA256");ge._code_challenge=j.JoseUtil.hexToBase64Url(_e)}return ge._redirect_uri=q,ge._authority=H,ge._client_id=Q,ge._response_mode=le,ge._client_secret=B,ge._scope=z,ge._extraTokenParams=U,ge._skipUserInfo=ee,ge}return function(X,H){if("function"!=typeof H&&null!==H)throw new TypeError("Super expression must either be null or a function, not "+typeof H);X.prototype=Object.create(H&&H.prototype,{constructor:{value:X,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf(X,H):X.__proto__=H)}(M,N),M.prototype.toStorageString=function(){return C.Log.debug("SigninState.toStorageString"),JSON.stringify({id:this.id,data:this.data,created:this.created,request_type:this.request_type,nonce:this.nonce,code_verifier:this.code_verifier,redirect_uri:this.redirect_uri,authority:this.authority,client_id:this.client_id,response_mode:this.response_mode,client_secret:this.client_secret,scope:this.scope,extraTokenParams:this.extraTokenParams,skipUserInfo:this.skipUserInfo})},M.fromStorageString=function(X){return C.Log.debug("SigninState.fromStorageString"),new M(JSON.parse(X))},o(M,[{key:"nonce",get:function(){return this._nonce}},{key:"authority",get:function(){return this._authority}},{key:"client_id",get:function(){return this._client_id}},{key:"redirect_uri",get:function(){return this._redirect_uri}},{key:"code_verifier",get:function(){return this._code_verifier}},{key:"code_challenge",get:function(){return this._code_challenge}},{key:"response_mode",get:function(){return this._response_mode}},{key:"client_secret",get:function(){return this._client_secret}},{key:"scope",get:function(){return this._scope}},{key:"extraTokenParams",get:function(){return this._extraTokenParams}},{key:"skipUserInfo",get:function(){return this._skipUserInfo}}]),M}(F.State)},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.default=function(){return("undefined"!=o&&null!==o&&void 0!==o.getRandomValues?C:F)().replace(/-/g,"")};var o="undefined"!=typeof window?window.crypto||window.msCrypto:null;function C(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(j){return(j^o.getRandomValues(new Uint8Array(1))[0]&15>>j/4).toString(16)})}function F(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(j){return(j^16*Math.random()>>j/4).toString(16)})}O.exports=x.default},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.User=void 0;var o=function(){function F(j,d){for(var m=0;m<d.length;m++){var v=d[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(j,v.key,v)}}return function(j,d,m){return d&&F(j.prototype,d),m&&F(j,m),j}}(),C=I(0);x.User=function(){function F(j){var d=j.id_token,m=j.session_state,v=j.access_token,N=j.refresh_token,M=j.token_type,L=j.scope,X=j.profile,H=j.expires_at,Q=j.state;(function(Y,le){if(!(Y instanceof le))throw new TypeError("Cannot call a class as a function")})(this,F),this.id_token=d,this.session_state=m,this.access_token=v,this.refresh_token=N,this.token_type=M,this.scope=L,this.profile=X,this.expires_at=H,this.state=Q}return F.prototype.toStorageString=function(){return C.Log.debug("User.toStorageString"),JSON.stringify({id_token:this.id_token,session_state:this.session_state,access_token:this.access_token,refresh_token:this.refresh_token,token_type:this.token_type,scope:this.scope,profile:this.profile,expires_at:this.expires_at})},F.fromStorageString=function(d){return C.Log.debug("User.fromStorageString"),new F(JSON.parse(d))},o(F,[{key:"expires_in",get:function(){if(this.expires_at){var d=parseInt(Date.now()/1e3);return this.expires_at-d}},set:function(d){var m=parseInt(d);if("number"==typeof m&&m>0){var v=parseInt(Date.now()/1e3);this.expires_at=v+m}}},{key:"expired",get:function(){var d=this.expires_in;if(void 0!==d)return d<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}}]),F}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.AccessTokenEvents=void 0;var o=I(0),C=I(46);function F(j,d){if(!(j instanceof d))throw new TypeError("Cannot call a class as a function")}x.AccessTokenEvents=function(){function j(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},m=d.accessTokenExpiringNotificationTime,v=void 0===m?60:m,N=d.accessTokenExpiringTimer,M=void 0===N?new C.Timer("Access token expiring"):N,L=d.accessTokenExpiredTimer,X=void 0===L?new C.Timer("Access token expired"):L;F(this,j),this._accessTokenExpiringNotificationTime=v,this._accessTokenExpiring=M,this._accessTokenExpired=X}return j.prototype.load=function(m){if(m.access_token&&void 0!==m.expires_in){var v=m.expires_in;if(o.Log.debug("AccessTokenEvents.load: access token present, remaining duration:",v),v>0){var N=v-this._accessTokenExpiringNotificationTime;N<=0&&(N=1),o.Log.debug("AccessTokenEvents.load: registering expiring timer in:",N),this._accessTokenExpiring.init(N)}else o.Log.debug("AccessTokenEvents.load: canceling existing expiring timer becase we're past expiration."),this._accessTokenExpiring.cancel();var M=v+1;o.Log.debug("AccessTokenEvents.load: registering expired timer in:",M),this._accessTokenExpired.init(M)}else this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},j.prototype.unload=function(){o.Log.debug("AccessTokenEvents.unload: canceling existing access token timers"),this._accessTokenExpiring.cancel(),this._accessTokenExpired.cancel()},j.prototype.addAccessTokenExpiring=function(m){this._accessTokenExpiring.addHandler(m)},j.prototype.removeAccessTokenExpiring=function(m){this._accessTokenExpiring.removeHandler(m)},j.prototype.addAccessTokenExpired=function(m){this._accessTokenExpired.addHandler(m)},j.prototype.removeAccessTokenExpired=function(m){this._accessTokenExpired.removeHandler(m)},j}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.Event=void 0;var o=I(0);x.Event=function(){function C(F){(function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C),this._name=F,this._callbacks=[]}return C.prototype.addHandler=function(j){this._callbacks.push(j)},C.prototype.removeHandler=function(j){var d=this._callbacks.findIndex(function(m){return m===j});d>=0&&this._callbacks.splice(d,1)},C.prototype.raise=function(){o.Log.debug("Event: Raising event: "+this._name);for(var j=0;j<this._callbacks.length;j++){var d;(d=this._callbacks)[j].apply(d,arguments)}},C}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.SessionMonitor=void 0;var o=function(){function m(v,N){for(var M=0;M<N.length;M++){var L=N[M];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(v,L.key,L)}}return function(v,N,M){return N&&m(v.prototype,N),M&&m(v,M),v}}(),C=I(0),F=I(19),j=I(1);function d(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}x.SessionMonitor=function(){function m(v){var N=this,M=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F.CheckSessionIFrame,L=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j.Global.timer;if(d(this,m),!v)throw C.Log.error("SessionMonitor.ctor: No user manager passed to SessionMonitor"),new Error("userManager");this._userManager=v,this._CheckSessionIFrameCtor=M,this._timer=L,this._userManager.events.addUserLoaded(this._start.bind(this)),this._userManager.events.addUserUnloaded(this._stop.bind(this)),Promise.resolve(this._userManager.getUser().then(function(X){X?N._start(X):N._settings.monitorAnonymousSession&&N._userManager.querySessionStatus().then(function(H){var Q={session_state:H.session_state};H.sub&&H.sid&&(Q.profile={sub:H.sub,sid:H.sid}),N._start(Q)}).catch(function(H){C.Log.error("SessionMonitor ctor: error from querySessionStatus:",H.message)})}).catch(function(X){C.Log.error("SessionMonitor ctor: error from getUser:",X.message)}))}return m.prototype._start=function(N){var M=this,L=N.session_state;L&&(N.profile?(this._sub=N.profile.sub,this._sid=N.profile.sid,C.Log.debug("SessionMonitor._start: session_state:",L,", sub:",this._sub)):(this._sub=void 0,this._sid=void 0,C.Log.debug("SessionMonitor._start: session_state:",L,", anonymous user")),this._checkSessionIFrame?this._checkSessionIFrame.start(L):this._metadataService.getCheckSessionIframe().then(function(X){if(X){C.Log.debug("SessionMonitor._start: Initializing check session iframe");var H=M._client_id,Q=M._checkSessionInterval,q=M._stopCheckSessionOnError;M._checkSessionIFrame=new M._CheckSessionIFrameCtor(M._callback.bind(M),H,X,Q,q),M._checkSessionIFrame.load().then(function(){M._checkSessionIFrame.start(L)})}else C.Log.warn("SessionMonitor._start: No check session iframe found in the metadata")}).catch(function(X){C.Log.error("SessionMonitor._start: Error from getCheckSessionIframe:",X.message)}))},m.prototype._stop=function(){var N=this;if(this._sub=void 0,this._sid=void 0,this._checkSessionIFrame&&(C.Log.debug("SessionMonitor._stop"),this._checkSessionIFrame.stop()),this._settings.monitorAnonymousSession)var M=this._timer.setInterval(function(){N._timer.clearInterval(M),N._userManager.querySessionStatus().then(function(L){var X={session_state:L.session_state};L.sub&&L.sid&&(X.profile={sub:L.sub,sid:L.sid}),N._start(X)}).catch(function(L){C.Log.error("SessionMonitor: error from querySessionStatus:",L.message)})},1e3)},m.prototype._callback=function(){var N=this;this._userManager.querySessionStatus().then(function(M){var L=!0;M?M.sub===N._sub?(L=!1,N._checkSessionIFrame.start(M.session_state),M.sid===N._sid?C.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, restarting check session iframe; session_state:",M.session_state):(C.Log.debug("SessionMonitor._callback: Same sub still logged in at OP, session state has changed, restarting check session iframe; session_state:",M.session_state),N._userManager.events._raiseUserSessionChanged())):C.Log.debug("SessionMonitor._callback: Different subject signed into OP:",M.sub):C.Log.debug("SessionMonitor._callback: Subject no longer signed into OP"),L&&(N._sub?(C.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed out event"),N._userManager.events._raiseUserSignedOut()):(C.Log.debug("SessionMonitor._callback: SessionMonitor._callback; raising signed in event"),N._userManager.events._raiseUserSignedIn()))}).catch(function(M){N._sub&&(C.Log.debug("SessionMonitor._callback: Error calling queryCurrentSigninSession; raising signed out event",M.message),N._userManager.events._raiseUserSignedOut())})},o(m,[{key:"_settings",get:function(){return this._userManager.settings}},{key:"_metadataService",get:function(){return this._userManager.metadataService}},{key:"_client_id",get:function(){return this._settings.client_id}},{key:"_checkSessionInterval",get:function(){return this._settings.checkSessionInterval}},{key:"_stopCheckSessionOnError",get:function(){return this._settings.stopCheckSessionOnError}}]),m}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.CheckSessionIFrame=void 0;var o=I(0);function C(F,j){if(!(F instanceof j))throw new TypeError("Cannot call a class as a function")}x.CheckSessionIFrame=function(){function F(j,d,m,v){var N=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];C(this,F),this._callback=j,this._client_id=d,this._url=m,this._interval=v||2e3,this._stopOnError=N;var M=m.indexOf("/",m.indexOf("//")+2);this._frame_origin=m.substr(0,M),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.style.display="none",this._frame.width=0,this._frame.height=0,this._frame.src=m}return F.prototype.load=function(){var d=this;return new Promise(function(m){d._frame.onload=function(){m()},window.document.body.appendChild(d._frame),d._boundMessageEvent=d._message.bind(d),window.addEventListener("message",d._boundMessageEvent,!1)})},F.prototype._message=function(d){d.origin===this._frame_origin&&d.source===this._frame.contentWindow&&("error"===d.data?(o.Log.error("CheckSessionIFrame: error message from check session op iframe"),this._stopOnError&&this.stop()):"changed"===d.data?(o.Log.debug("CheckSessionIFrame: changed message from check session op iframe"),this.stop(),this._callback()):o.Log.debug("CheckSessionIFrame: "+d.data+" message from check session op iframe"))},F.prototype.start=function(d){var m=this;if(this._session_state!==d){o.Log.debug("CheckSessionIFrame.start"),this.stop(),this._session_state=d;var v=function(){m._frame.contentWindow.postMessage(m._client_id+" "+m._session_state,m._frame_origin)};v(),this._timer=window.setInterval(v,this._interval)}},F.prototype.stop=function(){this._session_state=null,this._timer&&(o.Log.debug("CheckSessionIFrame.stop"),window.clearInterval(this._timer),this._timer=null)},F}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.TokenRevocationClient=void 0;var o=I(0),C=I(2),F=I(1);function j(v,N){if(!(v instanceof N))throw new TypeError("Cannot call a class as a function")}var d="access_token",m="refresh_token";x.TokenRevocationClient=function(){function v(N){var M=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F.Global.XMLHttpRequest,L=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C.MetadataService;if(j(this,v),!N)throw o.Log.error("TokenRevocationClient.ctor: No settings provided"),new Error("No settings provided.");this._settings=N,this._XMLHttpRequestCtor=M,this._metadataService=new L(this._settings)}return v.prototype.revoke=function(M,L){var X=this,H=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"access_token";if(!M)throw o.Log.error("TokenRevocationClient.revoke: No token provided"),new Error("No token provided.");if(H!==d&&H!=m)throw o.Log.error("TokenRevocationClient.revoke: Invalid token type"),new Error("Invalid token type.");return this._metadataService.getRevocationEndpoint().then(function(Q){if(Q)return o.Log.debug("TokenRevocationClient.revoke: Revoking "+H),X._revoke(Q,X._settings.client_id,X._settings.client_secret,M,H);if(L)throw o.Log.error("TokenRevocationClient.revoke: Revocation not supported"),new Error("Revocation not supported")})},v.prototype._revoke=function(M,L,X,H,Q){var q=this;return new Promise(function(Y,le){var B=new q._XMLHttpRequestCtor;B.open("POST",M),B.onload=function(){o.Log.debug("TokenRevocationClient.revoke: HTTP response received, status",B.status),200===B.status?Y():le(Error(B.statusText+" ("+B.status+")"))},B.onerror=function(){o.Log.debug("TokenRevocationClient.revoke: Network Error."),le("Network Error")};var z="client_id="+encodeURIComponent(L);X&&(z+="&client_secret="+encodeURIComponent(X)),z+="&token_type_hint="+encodeURIComponent(Q),z+="&token="+encodeURIComponent(H),B.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),B.send(z)})},v}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.CordovaPopupWindow=void 0;var o=function(){function F(j,d){for(var m=0;m<d.length;m++){var v=d[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(j,v.key,v)}}return function(j,d,m){return d&&F(j.prototype,d),m&&F(j,m),j}}(),C=I(0);x.CordovaPopupWindow=function(){function F(j){var d=this;(function(v,N){if(!(v instanceof N))throw new TypeError("Cannot call a class as a function")})(this,F),this._promise=new Promise(function(m,v){d._resolve=m,d._reject=v}),this.features=j.popupWindowFeatures||"location=no,toolbar=no,zoom=no",this.target=j.popupWindowTarget||"_blank",this.redirect_uri=j.startUrl,C.Log.debug("CordovaPopupWindow.ctor: redirect_uri: "+this.redirect_uri)}return F.prototype._isInAppBrowserInstalled=function(d){return["cordova-plugin-inappbrowser","cordova-plugin-inappbrowser.inappbrowser","org.apache.cordova.inappbrowser"].some(function(m){return d.hasOwnProperty(m)})},F.prototype.navigate=function(d){if(d&&d.url){if(!window.cordova)return this._error("cordova is undefined");var m=window.cordova.require("cordova/plugin_list").metadata;if(!1===this._isInAppBrowserInstalled(m))return this._error("InAppBrowser plugin not found");this._popup=cordova.InAppBrowser.open(d.url,this.target,this.features),this._popup?(C.Log.debug("CordovaPopupWindow.navigate: popup successfully created"),this._exitCallbackEvent=this._exitCallback.bind(this),this._loadStartCallbackEvent=this._loadStartCallback.bind(this),this._popup.addEventListener("exit",this._exitCallbackEvent,!1),this._popup.addEventListener("loadstart",this._loadStartCallbackEvent,!1)):this._error("Error opening popup window")}else this._error("No url provided");return this.promise},F.prototype._loadStartCallback=function(d){0===d.url.indexOf(this.redirect_uri)&&this._success({url:d.url})},F.prototype._exitCallback=function(d){this._error(d)},F.prototype._success=function(d){this._cleanup(),C.Log.debug("CordovaPopupWindow: Successful response from cordova popup window"),this._resolve(d)},F.prototype._error=function(d){this._cleanup(),C.Log.error(d),this._reject(new Error(d))},F.prototype.close=function(){this._cleanup()},F.prototype._cleanup=function(){this._popup&&(C.Log.debug("CordovaPopupWindow: cleaning up popup"),this._popup.removeEventListener("exit",this._exitCallbackEvent,!1),this._popup.removeEventListener("loadstart",this._loadStartCallbackEvent,!1),this._popup.close()),this._popup=null},o(F,[{key:"promise",get:function(){return this._promise}}]),F}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0});var o=I(0),C=I(10),F=I(5),j=I(6),d=I(37),m=I(38),v=I(16),N=I(2),M=I(48),L=I(49),X=I(19),H=I(20),Q=I(18),q=I(1),Y=I(15),le=I(50);x.default={Version:le.Version,Log:o.Log,OidcClient:C.OidcClient,OidcClientSettings:F.OidcClientSettings,WebStorageStateStore:j.WebStorageStateStore,InMemoryWebStorage:d.InMemoryWebStorage,UserManager:m.UserManager,AccessTokenEvents:v.AccessTokenEvents,MetadataService:N.MetadataService,CordovaPopupNavigator:M.CordovaPopupNavigator,CordovaIFrameNavigator:L.CordovaIFrameNavigator,CheckSessionIFrame:X.CheckSessionIFrame,TokenRevocationClient:H.TokenRevocationClient,SessionMonitor:Q.SessionMonitor,Global:q.Global,User:Y.User},O.exports=x.default},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.ClockService=function(){function o(){!function(F,j){if(!(F instanceof j))throw new TypeError("Cannot call a class as a function")}(this,o)}return o.prototype.getEpochTime=function(){return Promise.resolve(Date.now()/1e3|0)},o}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.ResponseValidator=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(L){return typeof L}:function(L){return L&&"function"==typeof Symbol&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},C=I(0),F=I(2),j=I(25),d=I(11),m=I(12),v=I(4);function N(L,X){if(!(L instanceof X))throw new TypeError("Cannot call a class as a function")}var M=["nonce","at_hash","iat","nbf","exp","aud","iss","c_hash"];x.ResponseValidator=function(){function L(X){var H=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F.MetadataService,Q=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j.UserInfoService,q=arguments.length>3&&void 0!==arguments[3]?arguments[3]:v.JoseUtil,Y=arguments.length>4&&void 0!==arguments[4]?arguments[4]:d.TokenClient;if(N(this,L),!X)throw C.Log.error("ResponseValidator.ctor: No settings passed to ResponseValidator"),new Error("settings");this._settings=X,this._metadataService=new H(this._settings),this._userInfoService=new Q(this._settings),this._joseUtil=q,this._tokenClient=new Y(this._settings)}return L.prototype.validateSigninResponse=function(H,Q){var q=this;return C.Log.debug("ResponseValidator.validateSigninResponse"),this._processSigninParams(H,Q).then(function(Y){return C.Log.debug("ResponseValidator.validateSigninResponse: state processed"),q._validateTokens(H,Y).then(function(le){return C.Log.debug("ResponseValidator.validateSigninResponse: tokens validated"),q._processClaims(H,le).then(function(B){return C.Log.debug("ResponseValidator.validateSigninResponse: claims processed"),B})})})},L.prototype.validateSignoutResponse=function(H,Q){return H.id!==Q.state?(C.Log.error("ResponseValidator.validateSignoutResponse: State does not match"),Promise.reject(new Error("State does not match"))):(C.Log.debug("ResponseValidator.validateSignoutResponse: state validated"),Q.state=H.data,Q.error?(C.Log.warn("ResponseValidator.validateSignoutResponse: Response was error",Q.error),Promise.reject(new m.ErrorResponse(Q))):Promise.resolve(Q))},L.prototype._processSigninParams=function(H,Q){if(H.id!==Q.state)return C.Log.error("ResponseValidator._processSigninParams: State does not match"),Promise.reject(new Error("State does not match"));if(!H.client_id)return C.Log.error("ResponseValidator._processSigninParams: No client_id on state"),Promise.reject(new Error("No client_id on state"));if(!H.authority)return C.Log.error("ResponseValidator._processSigninParams: No authority on state"),Promise.reject(new Error("No authority on state"));if(this._settings.authority){if(this._settings.authority&&this._settings.authority!==H.authority)return C.Log.error("ResponseValidator._processSigninParams: authority mismatch on settings vs. signin state"),Promise.reject(new Error("authority mismatch on settings vs. signin state"))}else this._settings.authority=H.authority;if(this._settings.client_id){if(this._settings.client_id&&this._settings.client_id!==H.client_id)return C.Log.error("ResponseValidator._processSigninParams: client_id mismatch on settings vs. signin state"),Promise.reject(new Error("client_id mismatch on settings vs. signin state"))}else this._settings.client_id=H.client_id;return C.Log.debug("ResponseValidator._processSigninParams: state validated"),Q.state=H.data,Q.error?(C.Log.warn("ResponseValidator._processSigninParams: Response was error",Q.error),Promise.reject(new m.ErrorResponse(Q))):H.nonce&&!Q.id_token?(C.Log.error("ResponseValidator._processSigninParams: Expecting id_token in response"),Promise.reject(new Error("No id_token in response"))):!H.nonce&&Q.id_token?(C.Log.error("ResponseValidator._processSigninParams: Not expecting id_token in response"),Promise.reject(new Error("Unexpected id_token in response"))):H.code_verifier&&!Q.code?(C.Log.error("ResponseValidator._processSigninParams: Expecting code in response"),Promise.reject(new Error("No code in response"))):!H.code_verifier&&Q.code?(C.Log.error("ResponseValidator._processSigninParams: Not expecting code in response"),Promise.reject(new Error("Unexpected code in response"))):(Q.scope||(Q.scope=H.scope),Promise.resolve(Q))},L.prototype._processClaims=function(H,Q){var q=this;if(Q.isOpenIdConnect){if(C.Log.debug("ResponseValidator._processClaims: response is OIDC, processing claims"),Q.profile=this._filterProtocolClaims(Q.profile),!0!==H.skipUserInfo&&this._settings.loadUserInfo&&Q.access_token)return C.Log.debug("ResponseValidator._processClaims: loading user info"),this._userInfoService.getClaims(Q.access_token).then(function(Y){return C.Log.debug("ResponseValidator._processClaims: user info claims received from user info endpoint"),Y.sub!==Q.profile.sub?(C.Log.error("ResponseValidator._processClaims: sub from user info endpoint does not match sub in id_token"),Promise.reject(new Error("sub from user info endpoint does not match sub in id_token"))):(Q.profile=q._mergeClaims(Q.profile,Y),C.Log.debug("ResponseValidator._processClaims: user info claims received, updated profile:",Q.profile),Q)});C.Log.debug("ResponseValidator._processClaims: not loading user info")}else C.Log.debug("ResponseValidator._processClaims: response is not OIDC, not processing claims");return Promise.resolve(Q)},L.prototype._mergeClaims=function(H,Q){var q=Object.assign({},H);for(var Y in Q){var le=Q[Y];Array.isArray(le)||(le=[le]);for(var B=0;B<le.length;B++){var z=le[B];q[Y]?Array.isArray(q[Y])?q[Y].indexOf(z)<0&&q[Y].push(z):q[Y]!==z&&(q[Y]="object"===(void 0===z?"undefined":o(z))&&this._settings.mergeClaims?this._mergeClaims(q[Y],z):[q[Y],z]):q[Y]=z}}return q},L.prototype._filterProtocolClaims=function(H){C.Log.debug("ResponseValidator._filterProtocolClaims, incoming claims:",H);var Q=Object.assign({},H);return this._settings._filterProtocolClaims?(M.forEach(function(q){delete Q[q]}),C.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims filtered",Q)):C.Log.debug("ResponseValidator._filterProtocolClaims: protocol claims not filtered"),Q},L.prototype._validateTokens=function(H,Q){return Q.code?(C.Log.debug("ResponseValidator._validateTokens: Validating code"),this._processCode(H,Q)):Q.id_token?Q.access_token?(C.Log.debug("ResponseValidator._validateTokens: Validating id_token and access_token"),this._validateIdTokenAndAccessToken(H,Q)):(C.Log.debug("ResponseValidator._validateTokens: Validating id_token"),this._validateIdToken(H,Q)):(C.Log.debug("ResponseValidator._validateTokens: No code to process or id_token to validate"),Promise.resolve(Q))},L.prototype._processCode=function(H,Q){var q=this,Y={client_id:H.client_id,client_secret:H.client_secret,code:Q.code,redirect_uri:H.redirect_uri,code_verifier:H.code_verifier};return H.extraTokenParams&&"object"===o(H.extraTokenParams)&&Object.assign(Y,H.extraTokenParams),this._tokenClient.exchangeCode(Y).then(function(le){for(var B in le)Q[B]=le[B];return Q.id_token?(C.Log.debug("ResponseValidator._processCode: token response successful, processing id_token"),q._validateIdTokenAttributes(H,Q)):(C.Log.debug("ResponseValidator._processCode: token response successful, returning response"),Q)})},L.prototype._validateIdTokenAttributes=function(H,Q){var q=this;return this._metadataService.getIssuer().then(function(Y){var le=H.client_id,B=q._settings.clockSkew;return C.Log.debug("ResponseValidator._validateIdTokenAttributes: Validaing JWT attributes; using clock skew (in seconds) of: ",B),q._settings.getEpochTime().then(function(z){return q._joseUtil.validateJwtAttributes(Q.id_token,Y,le,B,z).then(function(U){return H.nonce&&H.nonce!==U.nonce?(C.Log.error("ResponseValidator._validateIdTokenAttributes: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):U.sub?(Q.profile=U,Q):(C.Log.error("ResponseValidator._validateIdTokenAttributes: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})})},L.prototype._validateIdTokenAndAccessToken=function(H,Q){var q=this;return this._validateIdToken(H,Q).then(function(Y){return q._validateAccessToken(Y)})},L.prototype._getSigningKeyForJwt=function(H){var Q=this;return this._metadataService.getSigningKeys().then(function(q){var Y=H.header.kid;if(!q)return C.Log.error("ResponseValidator._validateIdToken: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));C.Log.debug("ResponseValidator._validateIdToken: Received signing keys");var le=void 0;if(Y)le=q.filter(function(B){return B.kid===Y})[0];else{if((q=Q._filterByAlg(q,H.header.alg)).length>1)return C.Log.error("ResponseValidator._validateIdToken: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));le=q[0]}return Promise.resolve(le)})},L.prototype._getSigningKeyForJwtWithSingleRetry=function(H){var Q=this;return this._getSigningKeyForJwt(H).then(function(q){return q?Promise.resolve(q):(Q._metadataService.resetSigningKeys(),Q._getSigningKeyForJwt(H))})},L.prototype._validateIdToken=function(H,Q){var q=this;if(!H.nonce)return C.Log.error("ResponseValidator._validateIdToken: No nonce on state"),Promise.reject(new Error("No nonce on state"));var Y=this._joseUtil.parseJwt(Q.id_token);return Y&&Y.header&&Y.payload?H.nonce!==Y.payload.nonce?(C.Log.error("ResponseValidator._validateIdToken: Invalid nonce in id_token"),Promise.reject(new Error("Invalid nonce in id_token"))):this._metadataService.getIssuer().then(function(le){return C.Log.debug("ResponseValidator._validateIdToken: Received issuer"),q._getSigningKeyForJwtWithSingleRetry(Y).then(function(B){if(!B)return C.Log.error("ResponseValidator._validateIdToken: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var z=H.client_id,U=q._settings.clockSkew;return C.Log.debug("ResponseValidator._validateIdToken: Validaing JWT; using clock skew (in seconds) of: ",U),q._joseUtil.validateJwt(Q.id_token,B,le,z,U).then(function(){return C.Log.debug("ResponseValidator._validateIdToken: JWT validation successful"),Y.payload.sub?(Q.profile=Y.payload,Q):(C.Log.error("ResponseValidator._validateIdToken: No sub present in id_token"),Promise.reject(new Error("No sub present in id_token")))})})}):(C.Log.error("ResponseValidator._validateIdToken: Failed to parse id_token",Y),Promise.reject(new Error("Failed to parse id_token")))},L.prototype._filterByAlg=function(H,Q){var q=null;if(Q.startsWith("RS"))q="RSA";else if(Q.startsWith("PS"))q="PS";else{if(!Q.startsWith("ES"))return C.Log.debug("ResponseValidator._filterByAlg: alg not supported: ",Q),[];q="EC"}return C.Log.debug("ResponseValidator._filterByAlg: Looking for keys that match kty: ",q),H=H.filter(function(Y){return Y.kty===q}),C.Log.debug("ResponseValidator._filterByAlg: Number of keys that match kty: ",q,H.length),H},L.prototype._validateAccessToken=function(H){if(!H.profile)return C.Log.error("ResponseValidator._validateAccessToken: No profile loaded from id_token"),Promise.reject(new Error("No profile loaded from id_token"));if(!H.profile.at_hash)return C.Log.error("ResponseValidator._validateAccessToken: No at_hash in id_token"),Promise.reject(new Error("No at_hash in id_token"));if(!H.id_token)return C.Log.error("ResponseValidator._validateAccessToken: No id_token"),Promise.reject(new Error("No id_token"));var Q=this._joseUtil.parseJwt(H.id_token);if(!Q||!Q.header)return C.Log.error("ResponseValidator._validateAccessToken: Failed to parse id_token",Q),Promise.reject(new Error("Failed to parse id_token"));var q=Q.header.alg;if(!q||5!==q.length)return C.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",q),Promise.reject(new Error("Unsupported alg: "+q));var Y=q.substr(2,3);if(!Y)return C.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",q,Y),Promise.reject(new Error("Unsupported alg: "+q));if(256!==(Y=parseInt(Y))&&384!==Y&&512!==Y)return C.Log.error("ResponseValidator._validateAccessToken: Unsupported alg:",q,Y),Promise.reject(new Error("Unsupported alg: "+q));var le="sha"+Y,B=this._joseUtil.hashString(H.access_token,le);if(!B)return C.Log.error("ResponseValidator._validateAccessToken: access_token hash failed:",le),Promise.reject(new Error("Failed to validate at_hash"));var z=B.substr(0,B.length/2),U=this._joseUtil.hexToBase64Url(z);return U!==H.profile.at_hash?(C.Log.error("ResponseValidator._validateAccessToken: Failed to validate at_hash",U,H.profile.at_hash),Promise.reject(new Error("Failed to validate at_hash"))):(C.Log.debug("ResponseValidator._validateAccessToken: success"),Promise.resolve(H))},L}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.UserInfoService=void 0;var o=I(7),C=I(2),F=I(0),j=I(4);function d(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}x.UserInfoService=function(){function m(v){var N=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.JsonService,M=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C.MetadataService,L=arguments.length>3&&void 0!==arguments[3]?arguments[3]:j.JoseUtil;if(d(this,m),!v)throw F.Log.error("UserInfoService.ctor: No settings passed"),new Error("settings");this._settings=v,this._jsonService=new N(void 0,void 0,this._getClaimsFromJwt.bind(this)),this._metadataService=new M(this._settings),this._joseUtil=L}return m.prototype.getClaims=function(N){var M=this;return N?this._metadataService.getUserInfoEndpoint().then(function(L){return F.Log.debug("UserInfoService.getClaims: received userinfo url",L),M._jsonService.getJson(L,N).then(function(X){return F.Log.debug("UserInfoService.getClaims: claims received",X),X})}):(F.Log.error("UserInfoService.getClaims: No token passed"),Promise.reject(new Error("A token is required")))},m.prototype._getClaimsFromJwt=function(N){var M=this;try{var L=this._joseUtil.parseJwt(N.responseText);if(!L||!L.header||!L.payload)return F.Log.error("UserInfoService._getClaimsFromJwt: Failed to parse JWT",L),Promise.reject(new Error("Failed to parse id_token"));var X=L.header.kid,H=void 0;switch(this._settings.userInfoJwtIssuer){case"OP":H=this._metadataService.getIssuer();break;case"ANY":H=Promise.resolve(L.payload.iss);break;default:H=Promise.resolve(this._settings.userInfoJwtIssuer)}return H.then(function(Q){return F.Log.debug("UserInfoService._getClaimsFromJwt: Received issuer:"+Q),M._metadataService.getSigningKeys().then(function(q){if(!q)return F.Log.error("UserInfoService._getClaimsFromJwt: No signing keys from metadata"),Promise.reject(new Error("No signing keys from metadata"));F.Log.debug("UserInfoService._getClaimsFromJwt: Received signing keys");var Y=void 0;if(X)Y=q.filter(function(z){return z.kid===X})[0];else{if((q=M._filterByAlg(q,L.header.alg)).length>1)return F.Log.error("UserInfoService._getClaimsFromJwt: No kid found in id_token and more than one key found in metadata"),Promise.reject(new Error("No kid found in id_token and more than one key found in metadata"));Y=q[0]}if(!Y)return F.Log.error("UserInfoService._getClaimsFromJwt: No key matching kid or alg found in signing keys"),Promise.reject(new Error("No key matching kid or alg found in signing keys"));var le=M._settings.client_id,B=M._settings.clockSkew;return F.Log.debug("UserInfoService._getClaimsFromJwt: Validaing JWT; using clock skew (in seconds) of: ",B),M._joseUtil.validateJwt(N.responseText,Y,Q,le,B,void 0,!0).then(function(){return F.Log.debug("UserInfoService._getClaimsFromJwt: JWT validation successful"),L.payload})})})}catch(Q){return F.Log.error("UserInfoService._getClaimsFromJwt: Error parsing JWT response",Q.message),void reject(Q)}},m.prototype._filterByAlg=function(N,M){var L=null;if(M.startsWith("RS"))L="RSA";else if(M.startsWith("PS"))L="PS";else{if(!M.startsWith("ES"))return F.Log.debug("UserInfoService._filterByAlg: alg not supported: ",M),[];L="EC"}return F.Log.debug("UserInfoService._filterByAlg: Looking for keys that match kty: ",L),N=N.filter(function(X){return X.kty===L}),F.Log.debug("UserInfoService._filterByAlg: Number of keys that match kty: ",L,N.length),N},m}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.AllowedSigningAlgs=x.b64tohex=x.hextob64u=x.crypto=x.X509=x.KeyUtil=x.jws=void 0;var o=I(27);x.jws=o.jws,x.KeyUtil=o.KEYUTIL,x.X509=o.X509,x.crypto=o.crypto,x.hextob64u=o.hextob64u,x.b64tohex=o.b64tohex,x.AllowedSigningAlgs=["RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"]},function(O,x,I){"use strict";(function(o){Object.defineProperty(x,"__esModule",{value:!0});var C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},F={userAgent:!1},j={};if(void 0===d)var d={};d.lang={extend:function(_,R,T){if(!R||!_)throw new Error("YAHOO.lang.extend failed, please check that all dependencies are included.");var Z=function(){};if(Z.prototype=R.prototype,_.prototype=new Z,_.prototype.constructor=_,_.superclass=R.prototype,R.prototype.constructor==Object.prototype.constructor&&(R.prototype.constructor=R),T){var se;for(se in T)_.prototype[se]=T[se];var ue=function(){},Se=["toString","valueOf"];try{/MSIE/.test(F.userAgent)&&(ue=function(ke,je){for(se=0;se<Se.length;se+=1){var Le=Se[se],$e=je[Le];"function"==typeof $e&&$e!=Object.prototype[Le]&&(ke[Le]=$e)}})}catch{}ue(_.prototype,T)}}};var m,v,N,M,L,X,H,Q,q,Y,le,_,R,T,Z,B=B||(m=Math,N=(v={}).lib={},M=N.Base=function(){function b(){}return{extend:function(R){b.prototype=this;var T=new b;return R&&T.mixIn(R),T.hasOwnProperty("init")||(T.init=function(){T.$super.init.apply(this,arguments)}),T.init.prototype=T,T.$super=this,T},create:function(){var R=this.extend();return R.init.apply(R,arguments),R},init:function(){},mixIn:function(R){for(var T in R)R.hasOwnProperty(T)&&(this[T]=R[T]);R.hasOwnProperty("toString")&&(this.toString=R.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),L=N.WordArray=M.extend({init:function(_,R){_=this.words=_||[],this.sigBytes=R??4*_.length},toString:function(_){return(_||H).stringify(this)},concat:function(_){var R=this.words,T=_.words,Z=this.sigBytes,se=_.sigBytes;if(this.clamp(),Z%4)for(var ue=0;ue<se;ue++)R[Z+ue>>>2]|=(T[ue>>>2]>>>24-ue%4*8&255)<<24-(Z+ue)%4*8;else for(ue=0;ue<se;ue+=4)R[Z+ue>>>2]=T[ue>>>2];return this.sigBytes+=se,this},clamp:function(){var _=this.words,R=this.sigBytes;_[R>>>2]&=4294967295<<32-R%4*8,_.length=m.ceil(R/4)},clone:function(){var _=M.clone.call(this);return _.words=this.words.slice(0),_},random:function(_){for(var R=[],T=0;T<_;T+=4)R.push(4294967296*m.random()|0);return new L.init(R,_)}}),X=v.enc={},H=X.Hex={stringify:function(_){for(var R=_.words,T=_.sigBytes,Z=[],se=0;se<T;se++){var ue=R[se>>>2]>>>24-se%4*8&255;Z.push((ue>>>4).toString(16)),Z.push((15&ue).toString(16))}return Z.join("")},parse:function(_){for(var R=_.length,T=[],Z=0;Z<R;Z+=2)T[Z>>>3]|=parseInt(_.substr(Z,2),16)<<24-Z%8*4;return new L.init(T,R/2)}},Q=X.Latin1={stringify:function(_){for(var R=_.words,T=_.sigBytes,Z=[],se=0;se<T;se++)Z.push(String.fromCharCode(R[se>>>2]>>>24-se%4*8&255));return Z.join("")},parse:function(_){for(var R=_.length,T=[],Z=0;Z<R;Z++)T[Z>>>2]|=(255&_.charCodeAt(Z))<<24-Z%4*8;return new L.init(T,R)}},q=X.Utf8={stringify:function(_){try{return decodeURIComponent(escape(Q.stringify(_)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(_){return Q.parse(unescape(encodeURIComponent(_)))}},Y=N.BufferedBlockAlgorithm=M.extend({reset:function(){this._data=new L.init,this._nDataBytes=0},_append:function(_){"string"==typeof _&&(_=q.parse(_)),this._data.concat(_),this._nDataBytes+=_.sigBytes},_process:function(_){var R=this._data,T=R.words,Z=R.sigBytes,se=this.blockSize,ue=Z/(4*se),Se=(ue=_?m.ceil(ue):m.max((0|ue)-this._minBufferSize,0))*se,Ce=m.min(4*Se,Z);if(Se){for(var ke=0;ke<Se;ke+=se)this._doProcessBlock(T,ke);var je=T.splice(0,Se);R.sigBytes-=Ce}return new L.init(je,Ce)},clone:function(){var _=M.clone.call(this);return _._data=this._data.clone(),_},_minBufferSize:0}),N.Hasher=Y.extend({cfg:M.extend(),init:function(_){this.cfg=this.cfg.extend(_),this.reset()},reset:function(){Y.reset.call(this),this._doReset()},update:function(_){return this._append(_),this._process(),this},finalize:function(_){return _&&this._append(_),this._doFinalize()},blockSize:16,_createHelper:function(_){return function(R,T){return new _.init(T).finalize(R)}},_createHmacHelper:function(_){return function(R,T){return new le.HMAC.init(_,T).finalize(R)}}}),le=v.algo={},v);R=(_=B).lib,T=R.Base,Z=R.WordArray,(_=_.x64={}).Word=T.extend({init:function(ue,Se){this.high=ue,this.low=Se}}),_.WordArray=T.extend({init:function(ue,Se){ue=this.words=ue||[],this.sigBytes=Se??8*ue.length},toX32:function(){for(var ue=this.words,Se=ue.length,Ce=[],ke=0;ke<Se;ke++){var je=ue[ke];Ce.push(je.high),Ce.push(je.low)}return Z.create(Ce,this.sigBytes)},clone:function(){for(var ue=T.clone.call(this),Se=ue.words=this.words.slice(0),Ce=Se.length,ke=0;ke<Ce;ke++)Se[ke]=Se[ke].clone();return ue}}),function(){var _=B.lib.WordArray;B.enc.Base64={stringify:function(T){var Z=T.words,se=T.sigBytes,ue=this._map;T.clamp(),T=[];for(var Se=0;Se<se;Se+=3)for(var Ce=(Z[Se>>>2]>>>24-Se%4*8&255)<<16|(Z[Se+1>>>2]>>>24-(Se+1)%4*8&255)<<8|Z[Se+2>>>2]>>>24-(Se+2)%4*8&255,ke=0;4>ke&&Se+.75*ke<se;ke++)T.push(ue.charAt(Ce>>>6*(3-ke)&63));if(Z=ue.charAt(64))for(;T.length%4;)T.push(Z);return T.join("")},parse:function(T){var Z=T.length,se=this._map;(ue=se.charAt(64))&&-1!=(ue=T.indexOf(ue))&&(Z=ue);for(var ue=[],Se=0,Ce=0;Ce<Z;Ce++)if(Ce%4){var ke=se.indexOf(T.charAt(Ce-1))<<Ce%4*2,je=se.indexOf(T.charAt(Ce))>>>6-Ce%4*2;ue[Se>>>2]|=(ke|je)<<24-Se%4*8,Se++}return _.create(ue,Se)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(b){for(var _=B,R=(Z=_.lib).WordArray,T=Z.Hasher,Z=_.algo,se=[],ue=[],Se=function(pt){return 4294967296*(pt-(0|pt))|0},Ce=2,ke=0;64>ke;){var je;e:{for(var Le=b.sqrt(je=Ce),$e=2;$e<=Le;$e++)if(!(je%$e)){je=!1;break e}je=!0}je&&(8>ke&&(se[ke]=Se(b.pow(Ce,.5))),ue[ke]=Se(b.pow(Ce,1/3)),ke++),Ce++}var Ke=[];Z=Z.SHA256=T.extend({_doReset:function(){this._hash=new R.init(se.slice(0))},_doProcessBlock:function(pt,ht){for(var Ae=this._hash.words,Ve=Ae[0],He=Ae[1],Xe=Ae[2],ut=Ae[3],mt=Ae[4],jt=Ae[5],Pt=Ae[6],cn=Ae[7],Mt=0;64>Mt;Mt++){if(16>Mt)Ke[Mt]=0|pt[ht+Mt];else{var Ut=Ke[Mt-15],On=Ke[Mt-2];Ke[Mt]=((Ut<<25|Ut>>>7)^(Ut<<14|Ut>>>18)^Ut>>>3)+Ke[Mt-7]+((On<<15|On>>>17)^(On<<13|On>>>19)^On>>>10)+Ke[Mt-16]}Ut=cn+((mt<<26|mt>>>6)^(mt<<21|mt>>>11)^(mt<<7|mt>>>25))+(mt&jt^~mt&Pt)+ue[Mt]+Ke[Mt],On=((Ve<<30|Ve>>>2)^(Ve<<19|Ve>>>13)^(Ve<<10|Ve>>>22))+(Ve&He^Ve&Xe^He&Xe),cn=Pt,Pt=jt,jt=mt,mt=ut+Ut|0,ut=Xe,Xe=He,He=Ve,Ve=Ut+On|0}Ae[0]=Ae[0]+Ve|0,Ae[1]=Ae[1]+He|0,Ae[2]=Ae[2]+Xe|0,Ae[3]=Ae[3]+ut|0,Ae[4]=Ae[4]+mt|0,Ae[5]=Ae[5]+jt|0,Ae[6]=Ae[6]+Pt|0,Ae[7]=Ae[7]+cn|0},_doFinalize:function(){var pt=this._data,ht=pt.words,Ae=8*this._nDataBytes,Ve=8*pt.sigBytes;return ht[Ve>>>5]|=128<<24-Ve%32,ht[14+(Ve+64>>>9<<4)]=b.floor(Ae/4294967296),ht[15+(Ve+64>>>9<<4)]=Ae,pt.sigBytes=4*ht.length,this._process(),this._hash},clone:function(){var pt=T.clone.call(this);return pt._hash=this._hash.clone(),pt}}),_.SHA256=T._createHelper(Z),_.HmacSHA256=T._createHmacHelper(Z)}(Math),function(){function b(){return T.create.apply(T,arguments)}for(var _=B,R=_.lib.Hasher,T=(se=_.x64).Word,Z=se.WordArray,se=_.algo,ue=[b(1116352408,3609767458),b(1899447441,602891725),b(3049323471,3964484399),b(3921009573,2173295548),b(961987163,4081628472),b(1508970993,3053834265),b(2453635748,2937671579),b(2870763221,3664609560),b(3624381080,2734883394),b(310598401,1164996542),b(607225278,1323610764),b(1426881987,3590304994),b(1925078388,4068182383),b(2162078206,991336113),b(2614888103,633803317),b(3248222580,3479774868),b(3835390401,2666613458),b(4022224774,944711139),b(264347078,2341262773),b(604807628,2007800933),b(770255983,1495990901),b(1249150122,1856431235),b(1555081692,3175218132),b(1996064986,2198950837),b(2554220882,3999719339),b(2821834349,766784016),b(2952996808,2566594879),b(3210313671,3203337956),b(3336571891,1034457026),b(3584528711,2466948901),b(113926993,3758326383),b(338241895,168717936),b(666307205,1188179964),b(773529912,1546045734),b(1294757372,1522805485),b(1396182291,2643833823),b(1695183700,2343527390),b(1986661051,1014477480),b(2177026350,1206759142),b(2456956037,344077627),b(2730485921,1290863460),b(2820302411,3158454273),b(3259730800,3505952657),b(3345764771,106217008),b(3516065817,3606008344),b(3600352804,1432725776),b(4094571909,1467031594),b(275423344,851169720),b(430227734,3100823752),b(506948616,1363258195),b(659060556,3750685593),b(883997877,3785050280),b(958139571,3318307427),b(1322822218,3812723403),b(1537002063,2003034995),b(1747873779,3602036899),b(1955562222,1575990012),b(2024104815,1125592928),b(2227730452,2716904306),b(2361852424,442776044),b(2428436474,593698344),b(2756734187,3733110249),b(3204031479,2999351573),b(3329325298,3815920427),b(3391569614,3928383900),b(3515267271,566280711),b(3940187606,3454069534),b(4118630271,4000239992),b(116418474,1914138554),b(174292421,2731055270),b(289380356,3203993006),b(460393269,320620315),b(685471733,587496836),b(852142971,1086792851),b(1017036298,365543100),b(1126000580,2618297676),b(1288033470,3409855158),b(1501505948,4234509866),b(1607167915,987167468),b(1816402316,1246189591)],Se=[],Ce=0;80>Ce;Ce++)Se[Ce]=b();se=se.SHA512=R.extend({_doReset:function(){this._hash=new Z.init([new T.init(1779033703,4089235720),new T.init(3144134277,2227873595),new T.init(1013904242,4271175723),new T.init(2773480762,1595750129),new T.init(1359893119,2917565137),new T.init(2600822924,725511199),new T.init(528734635,4215389547),new T.init(1541459225,327033209)])},_doProcessBlock:function(je,Le){for(var $e=(He=this._hash.words)[0],Ke=He[1],st=He[2],pt=He[3],ht=He[4],Ae=He[5],Ve=He[6],He=He[7],Xe=$e.high,ut=$e.low,mt=Ke.high,jt=Ke.low,Pt=st.high,cn=st.low,Mt=pt.high,Ut=pt.low,On=ht.high,Kn=ht.low,$n=Ae.high,Mr=Ae.low,Rr=Ve.high,pr=Ve.low,lr=He.high,hr=He.low,ur=Xe,Nr=ut,Rs=mt,Vi=jt,ks=Pt,Do=cn,da=Mt,Mo=Ut,Ii=On,Wr=Kn,Os=$n,No=Mr,fa=Rr,pa=pr,is=lr,jn=hr,Gr=0;80>Gr;Gr++){var jo=Se[Gr];if(16>Gr)var so=jo.high=0|je[Le+2*Gr],An=jo.low=0|je[Le+2*Gr+1];else{so=((An=(so=Se[Gr-15]).high)>>>1|(Ti=so.low)<<31)^(An>>>8|Ti<<24)^An>>>7;var Ti=(Ti>>>1|An<<31)^(Ti>>>8|An<<24)^(Ti>>>7|An<<25),$i=((An=($i=Se[Gr-2]).high)>>>19|(mr=$i.low)<<13)^(An<<3|mr>>>29)^An>>>6,mr=(mr>>>19|An<<13)^(mr<<3|An>>>29)^(mr>>>6|An<<26),Xa=(An=Se[Gr-7]).high,xo=(Bo=Se[Gr-16]).high,Bo=Bo.low;so=(so=(so=so+Xa+((An=Ti+An.low)>>>0<Ti>>>0?1:0))+$i+((An+=mr)>>>0<mr>>>0?1:0))+xo+((An+=Bo)>>>0<Bo>>>0?1:0),jo.high=so,jo.low=An}Xa=Ii&Os^~Ii&fa,Bo=Wr&No^~Wr&pa,jo=ur&Rs^ur&ks^Rs&ks;var Wa=Nr&Vi^Nr&Do^Vi&Do,Ja=(Ti=(ur>>>28|Nr<<4)^(ur<<30|Nr>>>2)^(ur<<25|Nr>>>7),$i=(Nr>>>28|ur<<4)^(Nr<<30|ur>>>2)^(Nr<<25|ur>>>7),(mr=ue[Gr]).high),Qa=mr.low;xo=is+((Ii>>>14|Wr<<18)^(Ii>>>18|Wr<<14)^(Ii<<23|Wr>>>9))+((mr=jn+((Wr>>>14|Ii<<18)^(Wr>>>18|Ii<<14)^(Wr<<23|Ii>>>9)))>>>0<jn>>>0?1:0),is=fa,jn=pa,fa=Os,pa=No,Os=Ii,No=Wr,Ii=da+(xo=(xo=(xo=xo+Xa+((mr+=Bo)>>>0<Bo>>>0?1:0))+Ja+((mr+=Qa)>>>0<Qa>>>0?1:0))+so+((mr+=An)>>>0<An>>>0?1:0))+((Wr=Mo+mr|0)>>>0<Mo>>>0?1:0)|0,da=ks,Mo=Do,ks=Rs,Do=Vi,Rs=ur,Vi=Nr,ur=xo+(jo=Ti+jo+((An=$i+Wa)>>>0<$i>>>0?1:0))+((Nr=mr+An|0)>>>0<mr>>>0?1:0)|0}ut=$e.low=ut+Nr,$e.high=Xe+ur+(ut>>>0<Nr>>>0?1:0),jt=Ke.low=jt+Vi,Ke.high=mt+Rs+(jt>>>0<Vi>>>0?1:0),cn=st.low=cn+Do,st.high=Pt+ks+(cn>>>0<Do>>>0?1:0),Ut=pt.low=Ut+Mo,pt.high=Mt+da+(Ut>>>0<Mo>>>0?1:0),Kn=ht.low=Kn+Wr,ht.high=On+Ii+(Kn>>>0<Wr>>>0?1:0),Mr=Ae.low=Mr+No,Ae.high=$n+Os+(Mr>>>0<No>>>0?1:0),pr=Ve.low=pr+pa,Ve.high=Rr+fa+(pr>>>0<pa>>>0?1:0),hr=He.low=hr+jn,He.high=lr+is+(hr>>>0<jn>>>0?1:0)},_doFinalize:function(){var je=this._data,Le=je.words,$e=8*this._nDataBytes,Ke=8*je.sigBytes;return Le[Ke>>>5]|=128<<24-Ke%32,Le[30+(Ke+128>>>10<<5)]=Math.floor($e/4294967296),Le[31+(Ke+128>>>10<<5)]=$e,je.sigBytes=4*Le.length,this._process(),this._hash.toX32()},clone:function(){var je=R.clone.call(this);return je._hash=this._hash.clone(),je},blockSize:32}),_.SHA512=R._createHelper(se),_.HmacSHA512=R._createHmacHelper(se)}(),function(){var b=B,_=(Z=b.x64).Word,R=Z.WordArray,T=(Z=b.algo).SHA512,Z=Z.SHA384=T.extend({_doReset:function(){this._hash=new R.init([new _.init(3418070365,3238371032),new _.init(1654270250,914150663),new _.init(2438529370,812702999),new _.init(355462360,4144912697),new _.init(1731405415,4290775857),new _.init(2394180231,1750603025),new _.init(3675008525,1694076839),new _.init(1203062813,3204075428)])},_doFinalize:function(){var ue=T._doFinalize.call(this);return ue.sigBytes-=16,ue}});b.SHA384=T._createHelper(Z),b.HmacSHA384=T._createHmacHelper(Z)}();var z,U="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function ee(b){var _,R,T="";for(_=0;_+3<=b.length;_+=3)R=parseInt(b.substring(_,_+3),16),T+=U.charAt(R>>6)+U.charAt(63&R);for(_+1==b.length?(R=parseInt(b.substring(_,_+1),16),T+=U.charAt(R<<2)):_+2==b.length&&(R=parseInt(b.substring(_,_+2),16),T+=U.charAt(R>>2)+U.charAt((3&R)<<4));(3&T.length)>0;)T+="=";return T}function ge(b){var _,R,T,Z="",se=0;for(_=0;_<b.length&&"="!=b.charAt(_);++_)(T=U.indexOf(b.charAt(_)))<0||(0==se?(Z+=D(T>>2),R=3&T,se=1):1==se?(Z+=D(R<<2|T>>4),R=15&T,se=2):2==se?(Z+=D(R),Z+=D(T>>2),R=3&T,se=3):(Z+=D(R<<2|T>>4),Z+=D(15&T),se=0));return 1==se&&(Z+=D(R<<2)),Z}function _e(b){var _,R=ge(b),T=new Array;for(_=0;2*_<R.length;++_)T[_]=parseInt(R.substring(2*_,2*_+2),16);return T}function pe(b,_,R){null!=b&&("number"==typeof b?this.fromNumber(b,_,R):this.fromString(b,null==_&&"string"!=typeof b?256:_))}function g(){return new pe(null)}"Microsoft Internet Explorer"==F.appName?(pe.prototype.am=function(_,R,T,Z,se,ue){for(var Se=32767&R,Ce=R>>15;--ue>=0;){var ke=32767&this[_],je=this[_++]>>15,Le=Ce*ke+je*Se;se=((ke=Se*ke+((32767&Le)<<15)+T[Z]+(1073741823&se))>>>30)+(Le>>>15)+Ce*je+(se>>>30),T[Z++]=1073741823&ke}return se},z=30):"Netscape"!=F.appName?(pe.prototype.am=function(_,R,T,Z,se,ue){for(;--ue>=0;){var Se=R*this[_++]+T[Z]+se;se=Math.floor(Se/67108864),T[Z++]=67108863&Se}return se},z=26):(pe.prototype.am=function(_,R,T,Z,se,ue){for(var Se=16383&R,Ce=R>>14;--ue>=0;){var ke=16383&this[_],je=this[_++]>>14,Le=Ce*ke+je*Se;se=((ke=Se*ke+((16383&Le)<<14)+T[Z]+se)>>28)+(Le>>14)+Ce*je,T[Z++]=268435455&ke}return se},z=28),pe.prototype.DB=z,pe.prototype.DM=(1<<z)-1,pe.prototype.DV=1<<z,pe.prototype.FV=Math.pow(2,52),pe.prototype.F1=52-z,pe.prototype.F2=2*z-52;var A,y,E=new Array;for(A="0".charCodeAt(0),y=0;y<=9;++y)E[A++]=y;for(A="a".charCodeAt(0),y=10;y<36;++y)E[A++]=y;for(A="A".charCodeAt(0),y=10;y<36;++y)E[A++]=y;function D(b){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(b)}function P(b,_){return E[b.charCodeAt(_)]??-1}function ne(b){var _=g();return _.fromInt(b),_}function fe(b){var _,R=1;return 0!=(_=b>>>16)&&(b=_,R+=16),0!=(_=b>>8)&&(b=_,R+=8),0!=(_=b>>4)&&(b=_,R+=4),0!=(_=b>>2)&&(b=_,R+=2),0!=(_=b>>1)&&(b=_,R+=1),R}function Oe(b){this.m=b}function oe(b){this.m=b,this.mp=b.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<b.DB-15)-1,this.mt2=2*b.t}function Ge(b,_){return b&_}function at(b,_){return b|_}function Fe(b,_){return b^_}function We(b,_){return b&~_}function Qe(b){if(0==b)return-1;var _=0;return 0==(65535&b)&&(b>>=16,_+=16),0==(255&b)&&(b>>=8,_+=8),0==(15&b)&&(b>>=4,_+=4),0==(3&b)&&(b>>=2,_+=2),0==(1&b)&&++_,_}function ft(b){for(var _=0;0!=b;)b&=b-1,++_;return _}function Ze(){}function Ue(b){return b}function nt(b){this.r2=g(),this.q3=g(),pe.ONE.dlShiftTo(2*b.t,this.r2),this.mu=this.r2.divide(b),this.m=b}Oe.prototype.convert=function(_){return _.s<0||_.compareTo(this.m)>=0?_.mod(this.m):_},Oe.prototype.revert=function(_){return _},Oe.prototype.reduce=function(_){_.divRemTo(this.m,null,_)},Oe.prototype.mulTo=function(_,R,T){_.multiplyTo(R,T),this.reduce(T)},Oe.prototype.sqrTo=function(_,R){_.squareTo(R),this.reduce(R)},oe.prototype.convert=function(_){var R=g();return _.abs().dlShiftTo(this.m.t,R),R.divRemTo(this.m,null,R),_.s<0&&R.compareTo(pe.ZERO)>0&&this.m.subTo(R,R),R},oe.prototype.revert=function(_){var R=g();return _.copyTo(R),this.reduce(R),R},oe.prototype.reduce=function(_){for(;_.t<=this.mt2;)_[_.t++]=0;for(var R=0;R<this.m.t;++R){var T=32767&_[R],Z=T*this.mpl+((T*this.mph+(_[R]>>15)*this.mpl&this.um)<<15)&_.DM;for(_[T=R+this.m.t]+=this.m.am(0,Z,_,R,0,this.m.t);_[T]>=_.DV;)_[T]-=_.DV,_[++T]++}_.clamp(),_.drShiftTo(this.m.t,_),_.compareTo(this.m)>=0&&_.subTo(this.m,_)},oe.prototype.mulTo=function(_,R,T){_.multiplyTo(R,T),this.reduce(T)},oe.prototype.sqrTo=function(_,R){_.squareTo(R),this.reduce(R)},pe.prototype.copyTo=function(_){for(var R=this.t-1;R>=0;--R)_[R]=this[R];_.t=this.t,_.s=this.s},pe.prototype.fromInt=function(_){this.t=1,this.s=_<0?-1:0,_>0?this[0]=_:_<-1?this[0]=_+this.DV:this.t=0},pe.prototype.fromString=function(_,R){var T;if(16==R)T=4;else if(8==R)T=3;else if(256==R)T=8;else if(2==R)T=1;else if(32==R)T=5;else{if(4!=R)return void this.fromRadix(_,R);T=2}this.t=0,this.s=0;for(var Z=_.length,se=!1,ue=0;--Z>=0;){var Se=8==T?255&_[Z]:P(_,Z);Se<0?"-"==_.charAt(Z)&&(se=!0):(se=!1,0==ue?this[this.t++]=Se:ue+T>this.DB?(this[this.t-1]|=(Se&(1<<this.DB-ue)-1)<<ue,this[this.t++]=Se>>this.DB-ue):this[this.t-1]|=Se<<ue,(ue+=T)>=this.DB&&(ue-=this.DB))}8==T&&0!=(128&_[0])&&(this.s=-1,ue>0&&(this[this.t-1]|=(1<<this.DB-ue)-1<<ue)),this.clamp(),se&&pe.ZERO.subTo(this,this)},pe.prototype.clamp=function(){for(var _=this.s&this.DM;this.t>0&&this[this.t-1]==_;)--this.t},pe.prototype.dlShiftTo=function(_,R){var T;for(T=this.t-1;T>=0;--T)R[T+_]=this[T];for(T=_-1;T>=0;--T)R[T]=0;R.t=this.t+_,R.s=this.s},pe.prototype.drShiftTo=function(_,R){for(var T=_;T<this.t;++T)R[T-_]=this[T];R.t=Math.max(this.t-_,0),R.s=this.s},pe.prototype.lShiftTo=function(_,R){var T,Z=_%this.DB,se=this.DB-Z,ue=(1<<se)-1,Se=Math.floor(_/this.DB),Ce=this.s<<Z&this.DM;for(T=this.t-1;T>=0;--T)R[T+Se+1]=this[T]>>se|Ce,Ce=(this[T]&ue)<<Z;for(T=Se-1;T>=0;--T)R[T]=0;R[Se]=Ce,R.t=this.t+Se+1,R.s=this.s,R.clamp()},pe.prototype.rShiftTo=function(_,R){R.s=this.s;var T=Math.floor(_/this.DB);if(T>=this.t)R.t=0;else{var Z=_%this.DB,se=this.DB-Z,ue=(1<<Z)-1;R[0]=this[T]>>Z;for(var Se=T+1;Se<this.t;++Se)R[Se-T-1]|=(this[Se]&ue)<<se,R[Se-T]=this[Se]>>Z;Z>0&&(R[this.t-T-1]|=(this.s&ue)<<se),R.t=this.t-T,R.clamp()}},pe.prototype.subTo=function(_,R){for(var T=0,Z=0,se=Math.min(_.t,this.t);T<se;)Z+=this[T]-_[T],R[T++]=Z&this.DM,Z>>=this.DB;if(_.t<this.t){for(Z-=_.s;T<this.t;)Z+=this[T],R[T++]=Z&this.DM,Z>>=this.DB;Z+=this.s}else{for(Z+=this.s;T<_.t;)Z-=_[T],R[T++]=Z&this.DM,Z>>=this.DB;Z-=_.s}R.s=Z<0?-1:0,Z<-1?R[T++]=this.DV+Z:Z>0&&(R[T++]=Z),R.t=T,R.clamp()},pe.prototype.multiplyTo=function(_,R){var T=this.abs(),Z=_.abs(),se=T.t;for(R.t=se+Z.t;--se>=0;)R[se]=0;for(se=0;se<Z.t;++se)R[se+T.t]=T.am(0,Z[se],R,se,0,T.t);R.s=0,R.clamp(),this.s!=_.s&&pe.ZERO.subTo(R,R)},pe.prototype.squareTo=function(_){for(var R=this.abs(),T=_.t=2*R.t;--T>=0;)_[T]=0;for(T=0;T<R.t-1;++T){var Z=R.am(T,R[T],_,2*T,0,1);(_[T+R.t]+=R.am(T+1,2*R[T],_,2*T+1,Z,R.t-T-1))>=R.DV&&(_[T+R.t]-=R.DV,_[T+R.t+1]=1)}_.t>0&&(_[_.t-1]+=R.am(T,R[T],_,2*T,0,1)),_.s=0,_.clamp()},pe.prototype.divRemTo=function(_,R,T){var Z=_.abs();if(!(Z.t<=0)){var se=this.abs();if(se.t<Z.t)return null!=R&&R.fromInt(0),void(null!=T&&this.copyTo(T));null==T&&(T=g());var ue=g(),Se=this.s,Ce=_.s,ke=this.DB-fe(Z[Z.t-1]);ke>0?(Z.lShiftTo(ke,ue),se.lShiftTo(ke,T)):(Z.copyTo(ue),se.copyTo(T));var je=ue.t,Le=ue[je-1];if(0!=Le){var $e=Le*(1<<this.F1)+(je>1?ue[je-2]>>this.F2:0),Ke=this.FV/$e,st=(1<<this.F1)/$e,pt=1<<this.F2,ht=T.t,Ae=ht-je,Ve=R??g();for(ue.dlShiftTo(Ae,Ve),T.compareTo(Ve)>=0&&(T[T.t++]=1,T.subTo(Ve,T)),pe.ONE.dlShiftTo(je,Ve),Ve.subTo(ue,ue);ue.t<je;)ue[ue.t++]=0;for(;--Ae>=0;){var He=T[--ht]==Le?this.DM:Math.floor(T[ht]*Ke+(T[ht-1]+pt)*st);if((T[ht]+=ue.am(0,He,T,Ae,0,je))<He)for(ue.dlShiftTo(Ae,Ve),T.subTo(Ve,T);T[ht]<--He;)T.subTo(Ve,T)}null!=R&&(T.drShiftTo(je,R),Se!=Ce&&pe.ZERO.subTo(R,R)),T.t=je,T.clamp(),ke>0&&T.rShiftTo(ke,T),Se<0&&pe.ZERO.subTo(T,T)}}},pe.prototype.invDigit=function(){if(this.t<1)return 0;var _=this[0];if(0==(1&_))return 0;var R=3&_;return(R=(R=(R=(R=R*(2-(15&_)*R)&15)*(2-(255&_)*R)&255)*(2-((65535&_)*R&65535))&65535)*(2-_*R%this.DV)%this.DV)>0?this.DV-R:-R},pe.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},pe.prototype.exp=function(_,R){if(_>4294967295||_<1)return pe.ONE;var T=g(),Z=g(),se=R.convert(this),ue=fe(_)-1;for(se.copyTo(T);--ue>=0;)if(R.sqrTo(T,Z),(_&1<<ue)>0)R.mulTo(Z,se,T);else{var Se=T;T=Z,Z=Se}return R.revert(T)},pe.prototype.toString=function(_){if(this.s<0)return"-"+this.negate().toString(_);var R;if(16==_)R=4;else if(8==_)R=3;else if(2==_)R=1;else if(32==_)R=5;else{if(4!=_)return this.toRadix(_);R=2}var T,Z=(1<<R)-1,se=!1,ue="",Se=this.t,Ce=this.DB-Se*this.DB%R;if(Se-- >0)for(Ce<this.DB&&(T=this[Se]>>Ce)>0&&(se=!0,ue=D(T));Se>=0;)Ce<R?(T=(this[Se]&(1<<Ce)-1)<<R-Ce,T|=this[--Se]>>(Ce+=this.DB-R)):(T=this[Se]>>(Ce-=R)&Z,Ce<=0&&(Ce+=this.DB,--Se)),T>0&&(se=!0),se&&(ue+=D(T));return se?ue:"0"},pe.prototype.negate=function(){var _=g();return pe.ZERO.subTo(this,_),_},pe.prototype.abs=function(){return this.s<0?this.negate():this},pe.prototype.compareTo=function(_){var R=this.s-_.s;if(0!=R)return R;var T=this.t;if(0!=(R=T-_.t))return this.s<0?-R:R;for(;--T>=0;)if(0!=(R=this[T]-_[T]))return R;return 0},pe.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+fe(this[this.t-1]^this.s&this.DM)},pe.prototype.mod=function(_){var R=g();return this.abs().divRemTo(_,null,R),this.s<0&&R.compareTo(pe.ZERO)>0&&_.subTo(R,R),R},pe.prototype.modPowInt=function(_,R){var T;return T=_<256||R.isEven()?new Oe(R):new oe(R),this.exp(_,T)},pe.ZERO=ne(0),pe.ONE=ne(1),Ze.prototype.convert=Ue,Ze.prototype.revert=Ue,Ze.prototype.mulTo=function(_,R,T){_.multiplyTo(R,T)},Ze.prototype.sqrTo=function(_,R){_.squareTo(R)},nt.prototype.convert=function(_){if(_.s<0||_.t>2*this.m.t)return _.mod(this.m);if(_.compareTo(this.m)<0)return _;var R=g();return _.copyTo(R),this.reduce(R),R},nt.prototype.revert=function(_){return _},nt.prototype.reduce=function(_){for(_.drShiftTo(this.m.t-1,this.r2),_.t>this.m.t+1&&(_.t=this.m.t+1,_.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);_.compareTo(this.r2)<0;)_.dAddOffset(1,this.m.t+1);for(_.subTo(this.r2,_);_.compareTo(this.m)>=0;)_.subTo(this.m,_)},nt.prototype.mulTo=function(_,R,T){_.multiplyTo(R,T),this.reduce(T)},nt.prototype.sqrTo=function(_,R){_.squareTo(R),this.reduce(R)};var Te,ze,ce,de=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],te=(1<<26)/de[de.length-1];function ae(){this.i=0,this.j=0,this.S=new Array}function me(){!function(_){ze[ce++]^=255&_,ze[ce++]^=_>>8&255,ze[ce++]^=_>>16&255,ze[ce++]^=_>>24&255,ce>=256&&(ce-=256)}((new Date).getTime())}if(pe.prototype.chunkSize=function(_){return Math.floor(Math.LN2*this.DB/Math.log(_))},pe.prototype.toRadix=function(_){if(null==_&&(_=10),0==this.signum()||_<2||_>36)return"0";var R=this.chunkSize(_),T=Math.pow(_,R),Z=ne(T),se=g(),ue=g(),Se="";for(this.divRemTo(Z,se,ue);se.signum()>0;)Se=(T+ue.intValue()).toString(_).substr(1)+Se,se.divRemTo(Z,se,ue);return ue.intValue().toString(_)+Se},pe.prototype.fromRadix=function(_,R){this.fromInt(0),null==R&&(R=10);for(var T=this.chunkSize(R),Z=Math.pow(R,T),se=!1,ue=0,Se=0,Ce=0;Ce<_.length;++Ce){var ke=P(_,Ce);ke<0?"-"==_.charAt(Ce)&&0==this.signum()&&(se=!0):(Se=R*Se+ke,++ue>=T&&(this.dMultiply(Z),this.dAddOffset(Se,0),ue=0,Se=0))}ue>0&&(this.dMultiply(Math.pow(R,ue)),this.dAddOffset(Se,0)),se&&pe.ZERO.subTo(this,this)},pe.prototype.fromNumber=function(_,R,T){if("number"==typeof R)if(_<2)this.fromInt(1);else for(this.fromNumber(_,T),this.testBit(_-1)||this.bitwiseTo(pe.ONE.shiftLeft(_-1),at,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(R);)this.dAddOffset(2,0),this.bitLength()>_&&this.subTo(pe.ONE.shiftLeft(_-1),this);else{var Z=new Array,se=7&_;Z.length=1+(_>>3),R.nextBytes(Z),se>0?Z[0]&=(1<<se)-1:Z[0]=0,this.fromString(Z,256)}},pe.prototype.bitwiseTo=function(_,R,T){var Z,se,ue=Math.min(_.t,this.t);for(Z=0;Z<ue;++Z)T[Z]=R(this[Z],_[Z]);if(_.t<this.t){for(se=_.s&this.DM,Z=ue;Z<this.t;++Z)T[Z]=R(this[Z],se);T.t=this.t}else{for(se=this.s&this.DM,Z=ue;Z<_.t;++Z)T[Z]=R(se,_[Z]);T.t=_.t}T.s=R(this.s,_.s),T.clamp()},pe.prototype.changeBit=function(_,R){var T=pe.ONE.shiftLeft(_);return this.bitwiseTo(T,R,T),T},pe.prototype.addTo=function(_,R){for(var T=0,Z=0,se=Math.min(_.t,this.t);T<se;)Z+=this[T]+_[T],R[T++]=Z&this.DM,Z>>=this.DB;if(_.t<this.t){for(Z+=_.s;T<this.t;)Z+=this[T],R[T++]=Z&this.DM,Z>>=this.DB;Z+=this.s}else{for(Z+=this.s;T<_.t;)Z+=_[T],R[T++]=Z&this.DM,Z>>=this.DB;Z+=_.s}R.s=Z<0?-1:0,Z>0?R[T++]=Z:Z<-1&&(R[T++]=this.DV+Z),R.t=T,R.clamp()},pe.prototype.dMultiply=function(_){this[this.t]=this.am(0,_-1,this,0,0,this.t),++this.t,this.clamp()},pe.prototype.dAddOffset=function(_,R){if(0!=_){for(;this.t<=R;)this[this.t++]=0;for(this[R]+=_;this[R]>=this.DV;)this[R]-=this.DV,++R>=this.t&&(this[this.t++]=0),++this[R]}},pe.prototype.multiplyLowerTo=function(_,R,T){var Z,se=Math.min(this.t+_.t,R);for(T.s=0,T.t=se;se>0;)T[--se]=0;for(Z=T.t-this.t;se<Z;++se)T[se+this.t]=this.am(0,_[se],T,se,0,this.t);for(Z=Math.min(_.t,R);se<Z;++se)this.am(0,_[se],T,se,0,R-se);T.clamp()},pe.prototype.multiplyUpperTo=function(_,R,T){--R;var Z=T.t=this.t+_.t-R;for(T.s=0;--Z>=0;)T[Z]=0;for(Z=Math.max(R-this.t,0);Z<_.t;++Z)T[this.t+Z-R]=this.am(R-Z,_[Z],T,0,0,this.t+Z-R);T.clamp(),T.drShiftTo(1,T)},pe.prototype.modInt=function(_){if(_<=0)return 0;var R=this.DV%_,T=this.s<0?_-1:0;if(this.t>0)if(0==R)T=this[0]%_;else for(var Z=this.t-1;Z>=0;--Z)T=(R*T+this[Z])%_;return T},pe.prototype.millerRabin=function(_){var R=this.subtract(pe.ONE),T=R.getLowestSetBit();if(T<=0)return!1;var Z=R.shiftRight(T);(_=_+1>>1)>de.length&&(_=de.length);for(var se=g(),ue=0;ue<_;++ue){se.fromInt(de[Math.floor(Math.random()*de.length)]);var Se=se.modPow(Z,this);if(0!=Se.compareTo(pe.ONE)&&0!=Se.compareTo(R)){for(var Ce=1;Ce++<T&&0!=Se.compareTo(R);)if(0==(Se=Se.modPowInt(2,this)).compareTo(pe.ONE))return!1;if(0!=Se.compareTo(R))return!1}}return!0},pe.prototype.clone=function(){var _=g();return this.copyTo(_),_},pe.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},pe.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},pe.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},pe.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},pe.prototype.toByteArray=function(){var _=this.t,R=new Array;R[0]=this.s;var T,Z=this.DB-_*this.DB%8,se=0;if(_-- >0)for(Z<this.DB&&(T=this[_]>>Z)!=(this.s&this.DM)>>Z&&(R[se++]=T|this.s<<this.DB-Z);_>=0;)Z<8?(T=(this[_]&(1<<Z)-1)<<8-Z,T|=this[--_]>>(Z+=this.DB-8)):(T=this[_]>>(Z-=8)&255,Z<=0&&(Z+=this.DB,--_)),0!=(128&T)&&(T|=-256),0==se&&(128&this.s)!=(128&T)&&++se,(se>0||T!=this.s)&&(R[se++]=T);return R},pe.prototype.equals=function(_){return 0==this.compareTo(_)},pe.prototype.min=function(_){return this.compareTo(_)<0?this:_},pe.prototype.max=function(_){return this.compareTo(_)>0?this:_},pe.prototype.and=function(_){var R=g();return this.bitwiseTo(_,Ge,R),R},pe.prototype.or=function(_){var R=g();return this.bitwiseTo(_,at,R),R},pe.prototype.xor=function(_){var R=g();return this.bitwiseTo(_,Fe,R),R},pe.prototype.andNot=function(_){var R=g();return this.bitwiseTo(_,We,R),R},pe.prototype.not=function(){for(var _=g(),R=0;R<this.t;++R)_[R]=this.DM&~this[R];return _.t=this.t,_.s=~this.s,_},pe.prototype.shiftLeft=function(_){var R=g();return _<0?this.rShiftTo(-_,R):this.lShiftTo(_,R),R},pe.prototype.shiftRight=function(_){var R=g();return _<0?this.lShiftTo(-_,R):this.rShiftTo(_,R),R},pe.prototype.getLowestSetBit=function(){for(var _=0;_<this.t;++_)if(0!=this[_])return _*this.DB+Qe(this[_]);return this.s<0?this.t*this.DB:-1},pe.prototype.bitCount=function(){for(var _=0,R=this.s&this.DM,T=0;T<this.t;++T)_+=ft(this[T]^R);return _},pe.prototype.testBit=function(_){var R=Math.floor(_/this.DB);return R>=this.t?0!=this.s:0!=(this[R]&1<<_%this.DB)},pe.prototype.setBit=function(_){return this.changeBit(_,at)},pe.prototype.clearBit=function(_){return this.changeBit(_,We)},pe.prototype.flipBit=function(_){return this.changeBit(_,Fe)},pe.prototype.add=function(_){var R=g();return this.addTo(_,R),R},pe.prototype.subtract=function(_){var R=g();return this.subTo(_,R),R},pe.prototype.multiply=function(_){var R=g();return this.multiplyTo(_,R),R},pe.prototype.divide=function(_){var R=g();return this.divRemTo(_,R,null),R},pe.prototype.remainder=function(_){var R=g();return this.divRemTo(_,null,R),R},pe.prototype.divideAndRemainder=function(_){var R=g(),T=g();return this.divRemTo(_,R,T),new Array(R,T)},pe.prototype.modPow=function(_,R){var T,Z,se=_.bitLength(),ue=ne(1);if(se<=0)return ue;T=se<18?1:se<48?3:se<144?4:se<768?5:6,Z=se<8?new Oe(R):R.isEven()?new nt(R):new oe(R);var Se=new Array,Ce=3,ke=T-1,je=(1<<T)-1;if(Se[1]=Z.convert(this),T>1){var Le=g();for(Z.sqrTo(Se[1],Le);Ce<=je;)Se[Ce]=g(),Z.mulTo(Le,Se[Ce-2],Se[Ce]),Ce+=2}var $e,Ke,st=_.t-1,pt=!0,ht=g();for(se=fe(_[st])-1;st>=0;){for(se>=ke?$e=_[st]>>se-ke&je:($e=(_[st]&(1<<se+1)-1)<<ke-se,st>0&&($e|=_[st-1]>>this.DB+se-ke)),Ce=T;0==(1&$e);)$e>>=1,--Ce;if((se-=Ce)<0&&(se+=this.DB,--st),pt)Se[$e].copyTo(ue),pt=!1;else{for(;Ce>1;)Z.sqrTo(ue,ht),Z.sqrTo(ht,ue),Ce-=2;Ce>0?Z.sqrTo(ue,ht):(Ke=ue,ue=ht,ht=Ke),Z.mulTo(ht,Se[$e],ue)}for(;st>=0&&0==(_[st]&1<<se);)Z.sqrTo(ue,ht),Ke=ue,ue=ht,ht=Ke,--se<0&&(se=this.DB-1,--st)}return Z.revert(ue)},pe.prototype.modInverse=function(_){var R=_.isEven();if(this.isEven()&&R||0==_.signum())return pe.ZERO;for(var T=_.clone(),Z=this.clone(),se=ne(1),ue=ne(0),Se=ne(0),Ce=ne(1);0!=T.signum();){for(;T.isEven();)T.rShiftTo(1,T),R?(se.isEven()&&ue.isEven()||(se.addTo(this,se),ue.subTo(_,ue)),se.rShiftTo(1,se)):ue.isEven()||ue.subTo(_,ue),ue.rShiftTo(1,ue);for(;Z.isEven();)Z.rShiftTo(1,Z),R?(Se.isEven()&&Ce.isEven()||(Se.addTo(this,Se),Ce.subTo(_,Ce)),Se.rShiftTo(1,Se)):Ce.isEven()||Ce.subTo(_,Ce),Ce.rShiftTo(1,Ce);T.compareTo(Z)>=0?(T.subTo(Z,T),R&&se.subTo(Se,se),ue.subTo(Ce,ue)):(Z.subTo(T,Z),R&&Se.subTo(se,Se),Ce.subTo(ue,Ce))}return 0!=Z.compareTo(pe.ONE)?pe.ZERO:Ce.compareTo(_)>=0?Ce.subtract(_):Ce.signum()<0?(Ce.addTo(_,Ce),Ce.signum()<0?Ce.add(_):Ce):Ce},pe.prototype.pow=function(_){return this.exp(_,new Ze)},pe.prototype.gcd=function(_){var R=this.s<0?this.negate():this.clone(),T=_.s<0?_.negate():_.clone();if(R.compareTo(T)<0){var Z=R;R=T,T=Z}var se=R.getLowestSetBit(),ue=T.getLowestSetBit();if(ue<0)return R;for(se<ue&&(ue=se),ue>0&&(R.rShiftTo(ue,R),T.rShiftTo(ue,T));R.signum()>0;)(se=R.getLowestSetBit())>0&&R.rShiftTo(se,R),(se=T.getLowestSetBit())>0&&T.rShiftTo(se,T),R.compareTo(T)>=0?(R.subTo(T,R),R.rShiftTo(1,R)):(T.subTo(R,T),T.rShiftTo(1,T));return ue>0&&T.lShiftTo(ue,T),T},pe.prototype.isProbablePrime=function(_){var R,T=this.abs();if(1==T.t&&T[0]<=de[de.length-1]){for(R=0;R<de.length;++R)if(T[0]==de[R])return!0;return!1}if(T.isEven())return!1;for(R=1;R<de.length;){for(var Z=de[R],se=R+1;se<de.length&&Z<te;)Z*=de[se++];for(Z=T.modInt(Z);R<se;)if(Z%de[R++]==0)return!1}return T.millerRabin(_)},pe.prototype.square=function(){var _=g();return this.squareTo(_),_},ae.prototype.init=function(_){var R,T,Z;for(R=0;R<256;++R)this.S[R]=R;for(T=0,R=0;R<256;++R)Z=this.S[R],this.S[R]=this.S[T=T+this.S[R]+_[R%_.length]&255],this.S[T]=Z;this.i=0,this.j=0},ae.prototype.next=function(){var _;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,_=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=_,this.S[_+this.S[this.i]&255]},null==ze){var rt;if(ze=new Array,ce=0,void 0!==j&&(void 0!==j.crypto||void 0!==j.msCrypto)){var ye=j.crypto||j.msCrypto;if(ye.getRandomValues){var $=new Uint8Array(32);for(ye.getRandomValues($),rt=0;rt<32;++rt)ze[ce++]=$[rt]}else if("Netscape"==F.appName&&F.appVersion<"5"){var k=j.crypto.random(32);for(rt=0;rt<k.length;++rt)ze[ce++]=255&k.charCodeAt(rt)}}for(;ce<256;)rt=Math.floor(65536*Math.random()),ze[ce++]=rt>>>8,ze[ce++]=255&rt;ce=0,me()}function K(){if(null==Te){for(me(),(Te=new ae).init(ze),ce=0;ce<ze.length;++ce)ze[ce]=0;ce=0}return Te.next()}function he(){}function Me(b,_){return new pe(b,_)}function Ye(b,_,R){for(var T="",Z=0;T.length<_;)T+=R(String.fromCharCode.apply(String,b.concat([(4278190080&Z)>>24,(16711680&Z)>>16,(65280&Z)>>8,255&Z]))),Z+=1;return T}function it(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function It(b,_){this.x=_,this.q=b}function At(b,_,R,T){this.curve=b,this.x=_,this.y=R,this.z=T??pe.ONE,this.zinv=null}function zt(b,_,R){this.q=b,this.a=this.fromBigInteger(_),this.b=this.fromBigInteger(R),this.infinity=new At(this,null,null)}he.prototype.nextBytes=function(_){var R;for(R=0;R<_.length;++R)_[R]=K()},it.prototype.doPublic=function(_){return _.modPowInt(this.e,this.n)},it.prototype.setPublic=function(_,R){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof _)this.n=_,this.e=R;else{if(!(null!=_&&null!=R&&_.length>0&&R.length>0))throw"Invalid RSA public key";this.n=Me(_,16),this.e=parseInt(R,16)}},it.prototype.encrypt=function(_){var R=function(ue,Se){if(Se<ue.length+11)throw"Message too long for RSA";for(var Ce=new Array,ke=ue.length-1;ke>=0&&Se>0;){var je=ue.charCodeAt(ke--);je<128?Ce[--Se]=je:je>127&&je<2048?(Ce[--Se]=63&je|128,Ce[--Se]=je>>6|192):(Ce[--Se]=63&je|128,Ce[--Se]=je>>6&63|128,Ce[--Se]=je>>12|224)}Ce[--Se]=0;for(var Le=new he,$e=new Array;Se>2;){for($e[0]=0;0==$e[0];)Le.nextBytes($e);Ce[--Se]=$e[0]}return Ce[--Se]=2,Ce[--Se]=0,new pe(Ce)}(_,this.n.bitLength()+7>>3);if(null==R)return null;var T=this.doPublic(R);if(null==T)return null;var Z=T.toString(16);return 0==(1&Z.length)?Z:"0"+Z},it.prototype.encryptOAEP=function(_,R,T){var Z=function(Ce,ke,je,Le){var $e=Pe.crypto.MessageDigest,Ke=Pe.crypto.Util,st=null;if(je||(je="sha1"),"string"==typeof je&&(st=$e.getCanonicalAlgName(je),Le=$e.getHashLength(st),je=function(Pt){return Mn(Ke.hashHex(fr(Pt),st))}),Ce.length+2*Le+2>ke)throw"Message too long for RSA";var pt,ht="";for(pt=0;pt<ke-Ce.length-2*Le-2;pt+=1)ht+="\0";var Ae=je("")+ht+"\x01"+Ce,Ve=new Array(Le);(new he).nextBytes(Ve);var He=Ye(Ve,Ae.length,je),Xe=[];for(pt=0;pt<Ae.length;pt+=1)Xe[pt]=Ae.charCodeAt(pt)^He.charCodeAt(pt);var ut=Ye(Xe,Ve.length,je),mt=[0];for(pt=0;pt<Ve.length;pt+=1)mt[pt+1]=Ve[pt]^ut.charCodeAt(pt);return new pe(mt.concat(Xe))}(_,this.n.bitLength()+7>>3,R,T);if(null==Z)return null;var se=this.doPublic(Z);if(null==se)return null;var ue=se.toString(16);return 0==(1&ue.length)?ue:"0"+ue},it.prototype.type="RSA",It.prototype.equals=function(_){return _==this||this.q.equals(_.q)&&this.x.equals(_.x)},It.prototype.toBigInteger=function(){return this.x},It.prototype.negate=function(){return new It(this.q,this.x.negate().mod(this.q))},It.prototype.add=function(_){return new It(this.q,this.x.add(_.toBigInteger()).mod(this.q))},It.prototype.subtract=function(_){return new It(this.q,this.x.subtract(_.toBigInteger()).mod(this.q))},It.prototype.multiply=function(_){return new It(this.q,this.x.multiply(_.toBigInteger()).mod(this.q))},It.prototype.square=function(){return new It(this.q,this.x.square().mod(this.q))},It.prototype.divide=function(_){return new It(this.q,this.x.multiply(_.toBigInteger().modInverse(this.q)).mod(this.q))},At.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},At.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},At.prototype.equals=function(_){return _==this||(this.isInfinity()?_.isInfinity():_.isInfinity()?this.isInfinity():!!_.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(_.z)).mod(this.curve.q).equals(pe.ZERO)&&_.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(_.z)).mod(this.curve.q).equals(pe.ZERO))},At.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(pe.ZERO)&&!this.y.toBigInteger().equals(pe.ZERO)},At.prototype.negate=function(){return new At(this.curve,this.x,this.y.negate(),this.z)},At.prototype.add=function(_){if(this.isInfinity())return _;if(_.isInfinity())return this;var R=_.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(_.z)).mod(this.curve.q),T=_.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(_.z)).mod(this.curve.q);if(pe.ZERO.equals(T))return pe.ZERO.equals(R)?this.twice():this.curve.getInfinity();var Z=new pe("3"),se=this.x.toBigInteger(),ue=this.y.toBigInteger(),Se=(_.x.toBigInteger(),_.y.toBigInteger(),T.square()),Ce=Se.multiply(T),ke=se.multiply(Se),je=R.square().multiply(this.z),Le=je.subtract(ke.shiftLeft(1)).multiply(_.z).subtract(Ce).multiply(T).mod(this.curve.q),$e=ke.multiply(Z).multiply(R).subtract(ue.multiply(Ce)).subtract(je.multiply(R)).multiply(_.z).add(R.multiply(Ce)).mod(this.curve.q),Ke=Ce.multiply(this.z).multiply(_.z).mod(this.curve.q);return new At(this.curve,this.curve.fromBigInteger(Le),this.curve.fromBigInteger($e),Ke)},At.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var _=new pe("3"),R=this.x.toBigInteger(),T=this.y.toBigInteger(),Z=T.multiply(this.z),se=Z.multiply(T).mod(this.curve.q),ue=this.curve.a.toBigInteger(),Se=R.square().multiply(_);pe.ZERO.equals(ue)||(Se=Se.add(this.z.square().multiply(ue)));var Ce=(Se=Se.mod(this.curve.q)).square().subtract(R.shiftLeft(3).multiply(se)).shiftLeft(1).multiply(Z).mod(this.curve.q),ke=Se.multiply(_).multiply(R).subtract(se.shiftLeft(1)).shiftLeft(2).multiply(se).subtract(Se.square().multiply(Se)).mod(this.curve.q),je=Z.square().multiply(Z).shiftLeft(3).mod(this.curve.q);return new At(this.curve,this.curve.fromBigInteger(Ce),this.curve.fromBigInteger(ke),je)},At.prototype.multiply=function(_){if(this.isInfinity())return this;if(0==_.signum())return this.curve.getInfinity();var R,T=_,Z=T.multiply(new pe("3")),se=this.negate(),ue=this,Se=this.curve.q.subtract(_),Ce=Se.multiply(new pe("3")),ke=new At(this.curve,this.x,this.y),je=ke.negate();for(R=Z.bitLength()-2;R>0;--R){ue=ue.twice();var Le=Z.testBit(R);Le!=T.testBit(R)&&(ue=ue.add(Le?this:se))}for(R=Ce.bitLength()-2;R>0;--R){ke=ke.twice();var $e=Ce.testBit(R);$e!=Se.testBit(R)&&(ke=ke.add($e?ke:je))}return ue},At.prototype.multiplyTwo=function(_,R,T){var Z;Z=_.bitLength()>T.bitLength()?_.bitLength()-1:T.bitLength()-1;for(var se=this.curve.getInfinity(),ue=this.add(R);Z>=0;)se=se.twice(),_.testBit(Z)?se=T.testBit(Z)?se.add(ue):se.add(this):T.testBit(Z)&&(se=se.add(R)),--Z;return se},zt.prototype.getQ=function(){return this.q},zt.prototype.getA=function(){return this.a},zt.prototype.getB=function(){return this.b},zt.prototype.equals=function(_){return _==this||this.q.equals(_.q)&&this.a.equals(_.a)&&this.b.equals(_.b)},zt.prototype.getInfinity=function(){return this.infinity},zt.prototype.fromBigInteger=function(_){return new It(this.q,_)},zt.prototype.decodePointHex=function(_){switch(parseInt(_.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:default:return null;case 4:case 6:case 7:var R=(_.length-2)/2,T=_.substr(2,R),Z=_.substr(R+2,R);return new At(this,this.fromBigInteger(new pe(T,16)),this.fromBigInteger(new pe(Z,16)))}},It.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},At.prototype.getEncoded=function(b){var _=function(ue,Se){var Ce=ue.toByteArrayUnsigned();if(Se<Ce.length)Ce=Ce.slice(Ce.length-Se);else for(;Se>Ce.length;)Ce.unshift(0);return Ce},R=this.getX().toBigInteger(),T=this.getY().toBigInteger(),Z=_(R,32);return b?T.isEven()?Z.unshift(2):Z.unshift(3):(Z.unshift(4),Z=Z.concat(_(T,32))),Z},At.decodeFrom=function(b,_){var R=_.length-1,T=_.slice(1,1+R/2),Z=_.slice(1+R/2,1+R);T.unshift(0),Z.unshift(0);var se=new pe(T),ue=new pe(Z);return new At(b,b.fromBigInteger(se),b.fromBigInteger(ue))},At.decodeFromHex=function(b,_){_.substr(0,2);var R=_.length-2,T=_.substr(2,R/2),Z=_.substr(2+R/2,R/2),se=new pe(T,16),ue=new pe(Z,16);return new At(b,b.fromBigInteger(se),b.fromBigInteger(ue))},At.prototype.add2D=function(b){if(this.isInfinity())return b;if(b.isInfinity())return this;if(this.x.equals(b.x))return this.y.equals(b.y)?this.twice():this.curve.getInfinity();var _=b.x.subtract(this.x),R=b.y.subtract(this.y).divide(_),T=R.square().subtract(this.x).subtract(b.x),Z=R.multiply(this.x.subtract(T)).subtract(this.y);return new At(this.curve,T,Z)},At.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var b=this.curve.fromBigInteger(pe.valueOf(2)),_=this.curve.fromBigInteger(pe.valueOf(3)),R=this.x.square().multiply(_).add(this.curve.a).divide(this.y.multiply(b)),T=R.square().subtract(this.x.multiply(b)),Z=R.multiply(this.x.subtract(T)).subtract(this.y);return new At(this.curve,T,Z)},At.prototype.multiply2D=function(b){if(this.isInfinity())return this;if(0==b.signum())return this.curve.getInfinity();var _,R=b,T=R.multiply(new pe("3")),Z=this.negate(),se=this;for(_=T.bitLength()-2;_>0;--_){se=se.twice();var ue=T.testBit(_);ue!=R.testBit(_)&&(se=se.add2D(ue?this:Z))}return se},At.prototype.isOnCurve=function(){var b=this.getX().toBigInteger(),_=this.getY().toBigInteger(),R=this.curve.getA().toBigInteger(),T=this.curve.getB().toBigInteger(),Z=this.curve.getQ(),se=_.multiply(_).mod(Z),ue=b.multiply(b).multiply(b).add(R.multiply(b)).add(T).mod(Z);return se.equals(ue)},At.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},At.prototype.validate=function(){var b=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var _=this.getX().toBigInteger(),R=this.getY().toBigInteger();if(_.compareTo(pe.ONE)<0||_.compareTo(b.subtract(pe.ONE))>0)throw new Error("x coordinate out of bounds");if(R.compareTo(pe.ONE)<0||R.compareTo(b.subtract(pe.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(b).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};var Xt=function(){var b=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),_=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),R={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function T(ue,Se,Ce){return Se?R[Se]:String.fromCharCode(parseInt(Ce,16))}var Z=new String(""),se=Object.hasOwnProperty;return function(ue,Se){var Ce,ke,je=ue.match(b),Le=je[0],$e=!1;"{"===Le?Ce={}:"["===Le?Ce=[]:(Ce=[],$e=!0);for(var Ke=[Ce],st=1-$e,pt=je.length;st<pt;++st){var ht;switch((Le=je[st]).charCodeAt(0)){default:(ht=Ke[0])[ke||ht.length]=+Le,ke=void 0;break;case 34:if(-1!==(Le=Le.substring(1,Le.length-1)).indexOf("\\")&&(Le=Le.replace(_,T)),ht=Ke[0],!ke){if(!(ht instanceof Array)){ke=Le||Z;break}ke=ht.length}ht[ke]=Le,ke=void 0;break;case 91:Ke.unshift((ht=Ke[0])[ke||ht.length]=[]),ke=void 0;break;case 93:case 125:Ke.shift();break;case 102:(ht=Ke[0])[ke||ht.length]=!1,ke=void 0;break;case 110:(ht=Ke[0])[ke||ht.length]=null,ke=void 0;break;case 116:(ht=Ke[0])[ke||ht.length]=!0,ke=void 0;break;case 123:Ke.unshift((ht=Ke[0])[ke||ht.length]={}),ke=void 0}}if($e){if(1!==Ke.length)throw new Error;Ce=Ce[0]}else if(Ke.length)throw new Error;return Se&&(Ce=function Ae(Ve,He){var Xe=Ve[He];if(Xe&&"object"===(void 0===Xe?"undefined":C(Xe))){var ut=null;for(var mt in Xe)if(se.call(Xe,mt)&&Xe!==Ve){var jt=Ae(Xe,mt);void 0!==jt?Xe[mt]=jt:(ut||(ut=[]),ut.push(mt))}if(ut)for(var Pt=ut.length;--Pt>=0;)delete Xe[ut[Pt]]}return Se.call(Ve,He,Xe)}({"":Ce},"")),Ce}}();void 0!==Pe&&Pe||(x.KJUR=Pe={}),void 0!==Pe.asn1&&Pe.asn1||(Pe.asn1={}),Pe.asn1.ASN1Util=new function(){this.integerToByteHex=function(b){var _=b.toString(16);return _.length%2==1&&(_="0"+_),_},this.bigIntToMinTwosComplementsHex=function(b){var _=b.toString(16);if("-"!=_.substr(0,1))_.length%2==1?_="0"+_:_.match(/^[0-7]/)||(_="00"+_);else{var R=_.substr(1).length;R%2==1?R+=1:_.match(/^[0-7]/)||(R+=2);for(var T="",Z=0;Z<R;Z++)T+="f";_=new pe(T,16).xor(b).add(pe.ONE).toString(16).replace(/^-/,"")}return _},this.getPEMStringFromHex=function(b,_){return ar(b,_)},this.newObject=function(b){var _=Pe.asn1,R=_.ASN1Object,T=_.DERBoolean,Z=_.DERInteger,se=_.DERBitString,ue=_.DEROctetString,Se=_.DERNull,Ce=_.DERObjectIdentifier,ke=_.DEREnumerated,je=_.DERUTF8String,Le=_.DERNumericString,$e=_.DERPrintableString,Ke=_.DERTeletexString,st=_.DERIA5String,pt=_.DERUTCTime,ht=_.DERGeneralizedTime,Ae=_.DERVisibleString,Ve=_.DERBMPString,He=_.DERSequence,Xe=_.DERSet,ut=_.DERTaggedObject,mt=_.ASN1Util.newObject;if(b instanceof _.ASN1Object)return b;var jt=Object.keys(b);if(1!=jt.length)throw new Error("key of param shall be only one.");var Pt=jt[0];if(-1==":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+Pt+":"))throw new Error("undefined key: "+Pt);if("bool"==Pt)return new T(b[Pt]);if("int"==Pt)return new Z(b[Pt]);if("bitstr"==Pt)return new se(b[Pt]);if("octstr"==Pt)return new ue(b[Pt]);if("null"==Pt)return new Se(b[Pt]);if("oid"==Pt)return new Ce(b[Pt]);if("enum"==Pt)return new ke(b[Pt]);if("utf8str"==Pt)return new je(b[Pt]);if("numstr"==Pt)return new Le(b[Pt]);if("prnstr"==Pt)return new $e(b[Pt]);if("telstr"==Pt)return new Ke(b[Pt]);if("ia5str"==Pt)return new st(b[Pt]);if("utctime"==Pt)return new pt(b[Pt]);if("gentime"==Pt)return new ht(b[Pt]);if("visstr"==Pt)return new Ae(b[Pt]);if("bmpstr"==Pt)return new Ve(b[Pt]);if("asn1"==Pt)return new R(b[Pt]);if("seq"==Pt){for(var cn=b[Pt],Mt=[],Ut=0;Ut<cn.length;Ut++){var On=mt(cn[Ut]);Mt.push(On)}return new He({array:Mt})}if("set"==Pt){for(cn=b[Pt],Mt=[],Ut=0;Ut<cn.length;Ut++)On=mt(cn[Ut]),Mt.push(On);return new Xe({array:Mt})}if("tag"==Pt){var Kn=b[Pt];if("[object Array]"===Object.prototype.toString.call(Kn)&&3==Kn.length){var $n=mt(Kn[2]);return new ut({tag:Kn[0],explicit:Kn[1],obj:$n})}return new ut(Kn)}},this.jsonToASN1HEX=function(b){return this.newObject(b).getEncodedHex()}},Pe.asn1.ASN1Util.oidHexToInt=function(b){for(var _="",R=parseInt(b.substr(0,2),16),T=(_=Math.floor(R/40)+"."+R%40,""),Z=2;Z<b.length;Z+=2){var se=("00000000"+parseInt(b.substr(Z,2),16).toString(2)).slice(-8);T+=se.substr(1,7),"0"==se.substr(0,1)&&(_=_+"."+new pe(T,2).toString(10),T="")}return _},Pe.asn1.ASN1Util.oidIntToHex=function(b){var _=function(Ce){var ke=Ce.toString(16);return 1==ke.length&&(ke="0"+ke),ke},R=function(Ce){var ke="",je=new pe(Ce,10).toString(2),Le=7-je.length%7;7==Le&&(Le=0);for(var $e="",Ke=0;Ke<Le;Ke++)$e+="0";for(je=$e+je,Ke=0;Ke<je.length-1;Ke+=7){var st=je.substr(Ke,7);Ke!=je.length-7&&(st="1"+st),ke+=_(parseInt(st,2))}return ke};if(!b.match(/^[0-9.]+$/))throw"malformed oid string: "+b;var T="",Z=b.split("."),se=40*parseInt(Z[0])+parseInt(Z[1]);T+=_(se),Z.splice(0,2);for(var ue=0;ue<Z.length;ue++)T+=R(Z[ue]);return T},Pe.asn1.ASN1Object=function(b){this.params=null,this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n="+"".length+",v="+this.hV);var _=this.hV.length/2,R=_.toString(16);if(R.length%2==1&&(R="0"+R),_<128)return R;var T=R.length/2;if(T>15)throw"ASN.1 length too long to represent by 8x: n = "+_.toString(16);return(128+T).toString(16)+R},this.getEncodedHex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getValueHex=function(){return this.getEncodedHex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(_){this.params=_},null!=b&&null!=b.tlv&&(this.hTLV=b.tlv,this.isModified=!1)},Pe.asn1.DERAbstractString=function(b){Pe.asn1.DERAbstractString.superclass.constructor.call(this),this.getString=function(){return this.s},this.setString=function(_){this.hTLV=null,this.isModified=!0,this.s=_,this.hV=Sr(this.s).toLowerCase()},this.setStringHex=function(_){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=_},this.getFreshValueHex=function(){return this.hV},void 0!==b&&("string"==typeof b?this.setString(b):void 0!==b.str?this.setString(b.str):void 0!==b.hex&&this.setStringHex(b.hex))},d.lang.extend(Pe.asn1.DERAbstractString,Pe.asn1.ASN1Object),Pe.asn1.DERAbstractTime=function(b){Pe.asn1.DERAbstractTime.superclass.constructor.call(this),this.localDateToUTC=function(_){var R=_.getTime()+6e4*_.getTimezoneOffset();return new Date(R)},this.formatDate=function(_,R,T){var Z=this.zeroPadding,se=this.localDateToUTC(_),ue=String(se.getFullYear());"utc"==R&&(ue=ue.substr(2,2));var Se=ue+Z(String(se.getMonth()+1),2)+Z(String(se.getDate()),2)+Z(String(se.getHours()),2)+Z(String(se.getMinutes()),2)+Z(String(se.getSeconds()),2);if(!0===T){var Ce=se.getMilliseconds();if(0!=Ce){var ke=Z(String(Ce),3);Se=Se+"."+(ke=ke.replace(/[0]+$/,""))}}return Se+"Z"},this.zeroPadding=function(_,R){return _.length>=R?_:new Array(R-_.length+1).join("0")+_},this.getString=function(){return this.s},this.setString=function(_){this.hTLV=null,this.isModified=!0,this.s=_,this.hV=sn(_)},this.setByDateValue=function(_,R,T,Z,se,ue){var Se=new Date(Date.UTC(_,R-1,T,Z,se,ue,0));this.setByDate(Se)},this.getFreshValueHex=function(){return this.hV}},d.lang.extend(Pe.asn1.DERAbstractTime,Pe.asn1.ASN1Object),Pe.asn1.DERAbstractStructured=function(b){Pe.asn1.DERAbstractString.superclass.constructor.call(this),this.setByASN1ObjectArray=function(_){this.hTLV=null,this.isModified=!0,this.asn1Array=_},this.appendASN1Object=function(_){this.hTLV=null,this.isModified=!0,this.asn1Array.push(_)},this.asn1Array=new Array,void 0!==b&&void 0!==b.array&&(this.asn1Array=b.array)},d.lang.extend(Pe.asn1.DERAbstractStructured,Pe.asn1.ASN1Object),Pe.asn1.DERBoolean=function(b){Pe.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=0==b?"010100":"0101ff"},d.lang.extend(Pe.asn1.DERBoolean,Pe.asn1.ASN1Object),Pe.asn1.DERInteger=function(b){Pe.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(_){this.hTLV=null,this.isModified=!0,this.hV=Pe.asn1.ASN1Util.bigIntToMinTwosComplementsHex(_)},this.setByInteger=function(_){var R=new pe(String(_),10);this.setByBigInteger(R)},this.setValueHex=function(_){this.hV=_},this.getFreshValueHex=function(){return this.hV},void 0!==b&&(void 0!==b.bigint?this.setByBigInteger(b.bigint):void 0!==b.int?this.setByInteger(b.int):"number"==typeof b?this.setByInteger(b):void 0!==b.hex&&this.setValueHex(b.hex))},d.lang.extend(Pe.asn1.DERInteger,Pe.asn1.ASN1Object),Pe.asn1.DERBitString=function(b){if(void 0!==b&&void 0!==b.obj){var _=Pe.asn1.ASN1Util.newObject(b.obj);b.hex="00"+_.getEncodedHex()}Pe.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(R){this.hTLV=null,this.isModified=!0,this.hV=R},this.setUnusedBitsAndHexValue=function(R,T){if(R<0||7<R)throw"unused bits shall be from 0 to 7: u = "+R;var Z="0"+R;this.hTLV=null,this.isModified=!0,this.hV=Z+T},this.setByBinaryString=function(R){var T=8-(R=R.replace(/0+$/,"")).length%8;8==T&&(T=0);for(var Z=0;Z<=T;Z++)R+="0";var se="";for(Z=0;Z<R.length-1;Z+=8){var ue=R.substr(Z,8),Se=parseInt(ue,2).toString(16);1==Se.length&&(Se="0"+Se),se+=Se}this.hTLV=null,this.isModified=!0,this.hV="0"+T+se},this.setByBooleanArray=function(R){for(var T="",Z=0;Z<R.length;Z++)T+=1==R[Z]?"1":"0";this.setByBinaryString(T)},this.newFalseArray=function(R){for(var T=new Array(R),Z=0;Z<R;Z++)T[Z]=!1;return T},this.getFreshValueHex=function(){return this.hV},void 0!==b&&("string"==typeof b&&b.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(b):void 0!==b.hex?this.setHexValueIncludingUnusedBits(b.hex):void 0!==b.bin?this.setByBinaryString(b.bin):void 0!==b.array&&this.setByBooleanArray(b.array))},d.lang.extend(Pe.asn1.DERBitString,Pe.asn1.ASN1Object),Pe.asn1.DEROctetString=function(b){if(void 0!==b&&void 0!==b.obj){var _=Pe.asn1.ASN1Util.newObject(b.obj);b.hex=_.getEncodedHex()}Pe.asn1.DEROctetString.superclass.constructor.call(this,b),this.hT="04"},d.lang.extend(Pe.asn1.DEROctetString,Pe.asn1.DERAbstractString),Pe.asn1.DERNull=function(){Pe.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},d.lang.extend(Pe.asn1.DERNull,Pe.asn1.ASN1Object),Pe.asn1.DERObjectIdentifier=function(b){Pe.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(_){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=_},this.setValueOidString=function(_){var R=function(Z){var se=function($e){var Ke=$e.toString(16);return 1==Ke.length&&(Ke="0"+Ke),Ke},ue=function($e){var Ke="",st=parseInt($e,10).toString(2),pt=7-st.length%7;7==pt&&(pt=0);for(var ht="",Ae=0;Ae<pt;Ae++)ht+="0";for(st=ht+st,Ae=0;Ae<st.length-1;Ae+=7){var Ve=st.substr(Ae,7);Ae!=st.length-7&&(Ve="1"+Ve),Ke+=se(parseInt(Ve,2))}return Ke};try{if(!Z.match(/^[0-9.]+$/))return null;var Se="",Ce=Z.split("."),ke=40*parseInt(Ce[0],10)+parseInt(Ce[1],10);Se+=se(ke),Ce.splice(0,2);for(var je=0;je<Ce.length;je++)Se+=ue(Ce[je]);return Se}catch{return null}}(_);if(null==R)throw new Error("malformed oid string: "+_);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=R},this.setValueName=function(_){var R=Pe.asn1.x509.OID.name2oid(_);if(""===R)throw new Error("DERObjectIdentifier oidName undefined: "+_);this.setValueOidString(R)},this.setValueNameOrOid=function(_){_.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(_):this.setValueName(_)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(_){"string"==typeof _?this.setValueNameOrOid(_):void 0!==_.oid?this.setValueNameOrOid(_.oid):void 0!==_.name?this.setValueNameOrOid(_.name):void 0!==_.hex&&this.setValueHex(_.hex)},void 0!==b&&this.setByParam(b)},d.lang.extend(Pe.asn1.DERObjectIdentifier,Pe.asn1.ASN1Object),Pe.asn1.DEREnumerated=function(b){Pe.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(_){this.hTLV=null,this.isModified=!0,this.hV=Pe.asn1.ASN1Util.bigIntToMinTwosComplementsHex(_)},this.setByInteger=function(_){var R=new pe(String(_),10);this.setByBigInteger(R)},this.setValueHex=function(_){this.hV=_},this.getFreshValueHex=function(){return this.hV},void 0!==b&&(void 0!==b.int?this.setByInteger(b.int):"number"==typeof b?this.setByInteger(b):void 0!==b.hex&&this.setValueHex(b.hex))},d.lang.extend(Pe.asn1.DEREnumerated,Pe.asn1.ASN1Object),Pe.asn1.DERUTF8String=function(b){Pe.asn1.DERUTF8String.superclass.constructor.call(this,b),this.hT="0c"},d.lang.extend(Pe.asn1.DERUTF8String,Pe.asn1.DERAbstractString),Pe.asn1.DERNumericString=function(b){Pe.asn1.DERNumericString.superclass.constructor.call(this,b),this.hT="12"},d.lang.extend(Pe.asn1.DERNumericString,Pe.asn1.DERAbstractString),Pe.asn1.DERPrintableString=function(b){Pe.asn1.DERPrintableString.superclass.constructor.call(this,b),this.hT="13"},d.lang.extend(Pe.asn1.DERPrintableString,Pe.asn1.DERAbstractString),Pe.asn1.DERTeletexString=function(b){Pe.asn1.DERTeletexString.superclass.constructor.call(this,b),this.hT="14"},d.lang.extend(Pe.asn1.DERTeletexString,Pe.asn1.DERAbstractString),Pe.asn1.DERIA5String=function(b){Pe.asn1.DERIA5String.superclass.constructor.call(this,b),this.hT="16"},d.lang.extend(Pe.asn1.DERIA5String,Pe.asn1.DERAbstractString),Pe.asn1.DERVisibleString=function(b){Pe.asn1.DERIA5String.superclass.constructor.call(this,b),this.hT="1a"},d.lang.extend(Pe.asn1.DERVisibleString,Pe.asn1.DERAbstractString),Pe.asn1.DERBMPString=function(b){Pe.asn1.DERBMPString.superclass.constructor.call(this,b),this.hT="1e"},d.lang.extend(Pe.asn1.DERBMPString,Pe.asn1.DERAbstractString),Pe.asn1.DERUTCTime=function(b){Pe.asn1.DERUTCTime.superclass.constructor.call(this,b),this.hT="17",this.setByDate=function(_){this.hTLV=null,this.isModified=!0,this.date=_,this.s=this.formatDate(this.date,"utc"),this.hV=sn(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"utc"),this.hV=sn(this.s)),this.hV},void 0!==b&&(void 0!==b.str?this.setString(b.str):"string"==typeof b&&b.match(/^[0-9]{12}Z$/)?this.setString(b):void 0!==b.hex?this.setStringHex(b.hex):void 0!==b.date&&this.setByDate(b.date))},d.lang.extend(Pe.asn1.DERUTCTime,Pe.asn1.DERAbstractTime),Pe.asn1.DERGeneralizedTime=function(b){Pe.asn1.DERGeneralizedTime.superclass.constructor.call(this,b),this.hT="18",this.withMillis=!1,this.setByDate=function(_){this.hTLV=null,this.isModified=!0,this.date=_,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=sn(this.s)},this.getFreshValueHex=function(){return void 0===this.date&&void 0===this.s&&(this.date=new Date,this.s=this.formatDate(this.date,"gen",this.withMillis),this.hV=sn(this.s)),this.hV},void 0!==b&&(void 0!==b.str?this.setString(b.str):"string"==typeof b&&b.match(/^[0-9]{14}Z$/)?this.setString(b):void 0!==b.hex?this.setStringHex(b.hex):void 0!==b.date&&this.setByDate(b.date),!0===b.millis&&(this.withMillis=!0))},d.lang.extend(Pe.asn1.DERGeneralizedTime,Pe.asn1.DERAbstractTime),Pe.asn1.DERSequence=function(b){Pe.asn1.DERSequence.superclass.constructor.call(this,b),this.hT="30",this.getFreshValueHex=function(){for(var _="",R=0;R<this.asn1Array.length;R++)_+=this.asn1Array[R].getEncodedHex();return this.hV=_,this.hV}},d.lang.extend(Pe.asn1.DERSequence,Pe.asn1.DERAbstractStructured),Pe.asn1.DERSet=function(b){Pe.asn1.DERSet.superclass.constructor.call(this,b),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var _=new Array,R=0;R<this.asn1Array.length;R++)_.push(this.asn1Array[R].getEncodedHex());return 1==this.sortFlag&&_.sort(),this.hV=_.join(""),this.hV},void 0!==b&&void 0!==b.sortflag&&0==b.sortflag&&(this.sortFlag=!1)},d.lang.extend(Pe.asn1.DERSet,Pe.asn1.DERAbstractStructured),Pe.asn1.DERTaggedObject=function(b){Pe.asn1.DERTaggedObject.superclass.constructor.call(this);var _=Pe.asn1;this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.setASN1Object=function(R,T,Z){this.hT=T,this.isExplicit=R,this.asn1Object=Z,this.isExplicit?(this.hV=this.asn1Object.getEncodedHex(),this.hTLV=null,this.isModified=!0):(this.hV=null,this.hTLV=Z.getEncodedHex(),this.hTLV=this.hTLV.replace(/^../,T),this.isModified=!1)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(R){null!=R.tag&&(this.hT=R.tag),null!=R.explicit&&(this.isExplicit=R.explicit),null!=R.tage&&(this.hT=R.tage,this.isExplicit=!0),null!=R.tagi&&(this.hT=R.tagi,this.isExplicit=!1),null!=R.obj&&(R.obj instanceof _.ASN1Object?(this.asn1Object=R.obj,this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)):"object"==C(R.obj)&&(this.asn1Object=_.ASN1Util.newObject(R.obj),this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)))},null!=b&&this.setByParam(b)},d.lang.extend(Pe.asn1.DERTaggedObject,Pe.asn1.ASN1Object);var Pe,Dn,Wt,Ot=new function(){};function wn(b){for(var _=new Array,R=0;R<b.length;R++)_[R]=b.charCodeAt(R);return _}function ct(b){for(var _="",R=0;R<b.length;R++)_+=String.fromCharCode(b[R]);return _}function vt(b){for(var _="",R=0;R<b.length;R++){var T=b[R].toString(16);1==T.length&&(T="0"+T),_+=T}return _}function sn(b){return vt(wn(b))}function mn(b){return(b=(b=b.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function kn(b){return b.length%4==2?b+="==":b.length%4==3&&(b+="="),(b=b.replace(/-/g,"+")).replace(/_/g,"/")}function Lt(b){return b.length%2==1&&(b="0"+b),mn(ee(b))}function gn(b){return ge(kn(b))}function Sr(b){return Li(Ur(b))}function _n(b){return decodeURIComponent(mi(b))}function Mn(b){for(var _="",R=0;R<b.length-1;R+=2)_+=String.fromCharCode(parseInt(b.substr(R,2),16));return _}function fr(b){for(var _="",R=0;R<b.length;R++)_+=("0"+b.charCodeAt(R).toString(16)).slice(-2);return _}function Kr(b){return ee(b)}function Nn(b){return Kr(b).replace(/(.{64})/g,"$1\r\n").replace(/\r\n$/,"")}function Ir(b){return ge(b.replace(/[^0-9A-Za-z\/+=]*/g,""))}function ar(b,_){return"-----BEGIN "+_+"-----\r\n"+Nn(b)+"\r\n-----END "+_+"-----\r\n"}function Tr(b,_){if(-1==b.indexOf("-----BEGIN "))throw"can't find PEM header: "+_;return Ir(b=void 0!==_?(b=b.replace(new RegExp("^[^]*-----BEGIN "+_+"-----"),"")).replace(new RegExp("-----END "+_+"-----[^]*$"),""):(b=b.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function li(b){var _,R,T,Z,se,ue,Se,Ce,ke,je,Le;if(Le=b.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return Ce=Le[1],_=parseInt(Ce),2===Ce.length&&(50<=_&&_<100?_=1900+_:0<=_&&_<50&&(_=2e3+_)),R=parseInt(Le[2])-1,T=parseInt(Le[3]),Z=parseInt(Le[4]),se=parseInt(Le[5]),ue=parseInt(Le[6]),Se=0,""!==(ke=Le[7])&&(je=(ke.substr(1)+"00").substr(0,3),Se=parseInt(je)),Date.UTC(_,R,T,Z,se,ue,Se);throw"unsupported zulu format: "+b}function no(b){return~~(li(b)/1e3)}function Li(b){return b.replace(/%/g,"")}function mi(b){return b.replace(/(..)/g,"%$1")}function ui(b){var _="malformed IPv6 address";if(!b.match(/^[0-9A-Fa-f:]+$/))throw _;var R=(b=b.toLowerCase()).split(":").length-1;if(R<2)throw _;var T=":".repeat(7-R+2),Z=(b=b.replace("::",T)).split(":");if(8!=Z.length)throw _;for(var se=0;se<8;se++)Z[se]=("0000"+Z[se]).slice(-4);return Z.join("")}function Pi(b){if(!b.match(/^[0-9A-Fa-f]{32}$/))throw"malformed IPv6 address octet";for(var _=(b=b.toLowerCase()).match(/.{1,4}/g),R=0;R<8;R++)_[R]=_[R].replace(/^0+/,""),""==_[R]&&(_[R]="0");var T=(b=":"+_.join(":")+":").match(/:(0:){2,}/g);if(null===T)return b.slice(1,-1);var Z="";for(R=0;R<T.length;R++)T[R].length>Z.length&&(Z=T[R]);return(b=b.replace(Z,"::")).slice(1,-1)}function wo(b){var _="malformed hex value";if(!b.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw _;if(8!=b.length)return 32==b.length?Pi(b):b;try{return parseInt(b.substr(0,2),16)+"."+parseInt(b.substr(2,2),16)+"."+parseInt(b.substr(4,2),16)+"."+parseInt(b.substr(6,2),16)}catch{throw _}}function Ur(b){for(var _=encodeURIComponent(b),R="",T=0;T<_.length;T++)"%"==_[T]?(R+=_.substr(T,3),T+=2):R=R+"%"+sn(_[T]);return R}function ro(b){return!(b.length%2!=0||!b.match(/^[0-9a-f]+$/)&&!b.match(/^[0-9A-F]+$/))}function zi(b){return b.length%2==1?"0"+b:b.substr(0,1)>"7"?"00"+b:b}Ot.getLblen=function(b,_){if("8"!=b.substr(_+2,1))return 1;var R=parseInt(b.substr(_+3,1));return 0==R?-1:0<R&&R<10?R+1:-2},Ot.getL=function(b,_){var R=Ot.getLblen(b,_);return R<1?"":b.substr(_+2,2*R)},Ot.getVblen=function(b,_){var R;return""==(R=Ot.getL(b,_))?-1:("8"===R.substr(0,1)?new pe(R.substr(2),16):new pe(R,16)).intValue()},Ot.getVidx=function(b,_){var R=Ot.getLblen(b,_);return R<0?R:_+2*(R+1)},Ot.getV=function(b,_){var R=Ot.getVidx(b,_),T=Ot.getVblen(b,_);return b.substr(R,2*T)},Ot.getTLV=function(b,_){return b.substr(_,2)+Ot.getL(b,_)+Ot.getV(b,_)},Ot.getTLVblen=function(b,_){return 2+2*Ot.getLblen(b,_)+2*Ot.getVblen(b,_)},Ot.getNextSiblingIdx=function(b,_){return Ot.getVidx(b,_)+2*Ot.getVblen(b,_)},Ot.getChildIdx=function(b,_){var R,T,Z,se=Ot,ue=[];R=se.getVidx(b,_),T=2*se.getVblen(b,_),"03"==b.substr(_,2)&&(R+=2,T-=2),Z=0;for(var Se=R;Z<=T;){var Ce=se.getTLVblen(b,Se);if((Z+=Ce)<=T&&ue.push(Se),Se+=Ce,Z>=T)break}return ue},Ot.getNthChildIdx=function(b,_,R){return Ot.getChildIdx(b,_)[R]},Ot.getIdxbyList=function(b,_,R,T){var Z,se,ue=Ot;return 0==R.length?void 0!==T&&b.substr(_,2)!==T?-1:_:(Z=R.shift())>=(se=ue.getChildIdx(b,_)).length?-1:ue.getIdxbyList(b,se[Z],R,T)},Ot.getIdxbyListEx=function(b,_,R,T){var Z,se,ue=Ot;if(0==R.length)return void 0!==T&&b.substr(_,2)!==T?-1:_;Z=R.shift(),se=ue.getChildIdx(b,_);for(var Se=0,Ce=0;Ce<se.length;Ce++){var ke=b.substr(se[Ce],2);if("number"==typeof Z&&!ue.isContextTag(ke)&&Se==Z||"string"==typeof Z&&ue.isContextTag(ke,Z))return ue.getIdxbyListEx(b,se[Ce],R,T);ue.isContextTag(ke)||Se++}return-1},Ot.getTLVbyList=function(b,_,R,T){var Z=Ot,se=Z.getIdxbyList(b,_,R,T);return-1==se||se>=b.length?null:Z.getTLV(b,se)},Ot.getTLVbyListEx=function(b,_,R,T){var Z=Ot,se=Z.getIdxbyListEx(b,_,R,T);return-1==se?null:Z.getTLV(b,se)},Ot.getVbyList=function(b,_,R,T,Z){var se,ue,Se=Ot;return-1==(se=Se.getIdxbyList(b,_,R,T))||se>=b.length?null:(ue=Se.getV(b,se),!0===Z&&(ue=ue.substr(2)),ue)},Ot.getVbyListEx=function(b,_,R,T,Z){var se,ue,Se=Ot;return-1==(se=Se.getIdxbyListEx(b,_,R,T))?null:(ue=Se.getV(b,se),"03"==b.substr(se,2)&&!1!==Z&&(ue=ue.substr(2)),ue)},Ot.getInt=function(b,_,R){null==R&&(R=-1);try{var T=b.substr(_,2);if("02"!=T&&"03"!=T)return R;var Z=Ot.getV(b,_);return"02"==T?parseInt(Z,16):function(ue){try{var Se=ue.substr(0,2);if("00"==Se)return parseInt(ue.substr(2),16);var Ce=parseInt(Se,16),ke=ue.substr(2),je=parseInt(ke,16).toString(2);return"0"==je&&(je="00000000"),je=je.slice(0,0-Ce),parseInt(je,2)}catch{return-1}}(Z)}catch{return R}},Ot.getOID=function(b,_,R){null==R&&(R=null);try{return"06"!=b.substr(_,2)?R:function(Z){if(!ro(Z))return null;try{var se=[],ue=Z.substr(0,2),Se=parseInt(ue,16);se[0]=new String(Math.floor(Se/40)),se[1]=new String(Se%40);for(var Ce=Z.substr(2),ke=[],je=0;je<Ce.length/2;je++)ke.push(parseInt(Ce.substr(2*je,2),16));var Le=[],$e="";for(je=0;je<ke.length;je++)128&ke[je]?$e+=Ui((127&ke[je]).toString(2),7):($e+=Ui((127&ke[je]).toString(2),7),Le.push(new String(parseInt($e,2))),$e="");var Ke=se.join(".");return Le.length>0&&(Ke=Ke+"."+Le.join(".")),Ke}catch{return null}}(Ot.getV(b,_))}catch{return R}},Ot.getOIDName=function(b,_,R){null==R&&(R=null);try{var T=Ot.getOID(b,_,R);if(T==R)return R;var Z=Pe.asn1.x509.OID.oid2name(T);return""==Z?T:Z}catch{return R}},Ot.getString=function(b,_,R){null==R&&(R=null);try{return Mn(Ot.getV(b,_))}catch{return R}},Ot.hextooidstr=function(b){var _=function($e,Ke){return $e.length>=Ke?$e:new Array(Ke-$e.length+1).join("0")+$e},R=[],T=b.substr(0,2),Z=parseInt(T,16);R[0]=new String(Math.floor(Z/40)),R[1]=new String(Z%40);for(var se=b.substr(2),ue=[],Se=0;Se<se.length/2;Se++)ue.push(parseInt(se.substr(2*Se,2),16));var Ce=[],ke="";for(Se=0;Se<ue.length;Se++)128&ue[Se]?ke+=_((127&ue[Se]).toString(2),7):(ke+=_((127&ue[Se]).toString(2),7),Ce.push(new String(parseInt(ke,2))),ke="");var je=R.join(".");return Ce.length>0&&(je=je+"."+Ce.join(".")),je},Ot.dump=function(b,_,R,T){var Z=Ot,se=Z.getV,ue=Z.dump,Se=Z.getChildIdx,Ce=b;b instanceof Pe.asn1.ASN1Object&&(Ce=b.getEncodedHex());var ke=function(Pt,cn){return Pt.length<=2*cn?Pt:Pt.substr(0,cn)+"..(total "+Pt.length/2+"bytes).."+Pt.substr(Pt.length-cn,cn)};void 0===_&&(_={ommit_long_octet:32}),void 0===R&&(R=0),void 0===T&&(T="");var je,Le=_.ommit_long_octet;if("01"==(je=Ce.substr(R,2)))return"00"==($e=se(Ce,R))?T+"BOOLEAN FALSE\n":T+"BOOLEAN TRUE\n";if("02"==je)return T+"INTEGER "+ke($e=se(Ce,R),Le)+"\n";if("03"==je){var $e=se(Ce,R);return Z.isASN1HEX($e.substr(2))?(Ke=T+"BITSTRING, encapsulates\n")+ue($e.substr(2),_,0,T+"  "):T+"BITSTRING "+ke($e,Le)+"\n"}if("04"==je)return $e=se(Ce,R),Z.isASN1HEX($e)?(Ke=T+"OCTETSTRING, encapsulates\n",Ke+=ue($e,_,0,T+"  ")):T+"OCTETSTRING "+ke($e,Le)+"\n";if("05"==je)return T+"NULL\n";if("06"==je){var st=se(Ce,R),pt=Pe.asn1.ASN1Util.oidHexToInt(st),ht=Pe.asn1.x509.OID.oid2name(pt),Ae=pt.replace(/\./g," ");return""!=ht?T+"ObjectIdentifier "+ht+" ("+Ae+")\n":T+"ObjectIdentifier ("+Ae+")\n"}if("0a"==je)return T+"ENUMERATED "+parseInt(se(Ce,R))+"\n";if("0c"==je)return T+"UTF8String '"+_n(se(Ce,R))+"'\n";if("13"==je)return T+"PrintableString '"+_n(se(Ce,R))+"'\n";if("14"==je)return T+"TeletexString '"+_n(se(Ce,R))+"'\n";if("16"==je)return T+"IA5String '"+_n(se(Ce,R))+"'\n";if("17"==je)return T+"UTCTime "+_n(se(Ce,R))+"\n";if("18"==je)return T+"GeneralizedTime "+_n(se(Ce,R))+"\n";if("1a"==je)return T+"VisualString '"+_n(se(Ce,R))+"'\n";if("1e"==je)return T+"BMPString '"+_n(se(Ce,R))+"'\n";if("30"==je){if("3000"==Ce.substr(R,4))return T+"SEQUENCE {}\n";Ke=T+"SEQUENCE\n";var Ve=_;if((2==(ut=Se(Ce,R)).length||3==ut.length)&&"06"==Ce.substr(ut[0],2)&&"04"==Ce.substr(ut[ut.length-1],2)){ht=Z.oidname(se(Ce,ut[0]));var He=JSON.parse(JSON.stringify(_));He.x509ExtName=ht,Ve=He}for(var Xe=0;Xe<ut.length;Xe++)Ke+=ue(Ce,Ve,ut[Xe],T+"  ");return Ke}if("31"==je){Ke=T+"SET\n";var ut=Se(Ce,R);for(Xe=0;Xe<ut.length;Xe++)Ke+=ue(Ce,_,ut[Xe],T+"  ");return Ke}if(0!=(128&(je=parseInt(je,16)))){var Ke,mt=31&je;if(0!=(32&je)){for(Ke=T+"["+mt+"]\n",ut=Se(Ce,R),Xe=0;Xe<ut.length;Xe++)Ke+=ue(Ce,_,ut[Xe],T+"  ");return Ke}return $e=se(Ce,R),Ot.isASN1HEX($e)?(Ke=T+"["+mt+"]\n")+ue($e,_,0,T+"  "):(("68747470"==$e.substr(0,8)||"subjectAltName"===_.x509ExtName&&2==mt)&&($e=_n($e)),T+"["+mt+"] "+$e+"\n")}return T+"UNKNOWN("+je+") "+se(Ce,R)+"\n"},Ot.isContextTag=function(b,_){var R,T;b=b.toLowerCase();try{R=parseInt(b,16)}catch{return-1}if(void 0===_)return 128==(192&R);try{return null!=_.match(/^\[[0-9]+\]$/)&&!((T=parseInt(_.substr(1,_.length-1),10))>31)&&128==(192&R)&&(31&R)==T}catch{return!1}},Ot.isASN1HEX=function(b){var _=Ot;if(b.length%2==1)return!1;var R=_.getVblen(b,0),T=b.substr(0,2),Z=_.getL(b,0);return b.length-T.length-Z.length==2*R},Ot.checkStrictDER=function(b,_,R,T,Z){var se=Ot;if(void 0===R){if("string"!=typeof b)throw new Error("not hex string");if(b=b.toLowerCase(),!Pe.lang.String.isHex(b))throw new Error("not hex string");R=b.length,Z=(T=b.length/2)<128?1:Math.ceil(T.toString(16))+1}if(se.getL(b,_).length>2*Z)throw new Error("L of TLV too long: idx="+_);var ue=se.getVblen(b,_);if(ue>T)throw new Error("value of L too long than hex: idx="+_);var Se=se.getTLV(b,_),Ce=Se.length-2-se.getL(b,_).length;if(Ce!==2*ue)throw new Error("V string length and L's value not the same:"+Ce+"/"+2*ue);if(0===_&&b.length!=Se.length)throw new Error("total length and TLV length unmatch:"+b.length+"!="+Se.length);var ke=b.substr(_,2);if("02"===ke){var je=se.getVidx(b,_);if("00"==b.substr(je,2)&&b.charCodeAt(je+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(ke,16)){for(var Le=se.getVblen(b,_),$e=0,Ke=se.getChildIdx(b,_),st=0;st<Ke.length;st++)$e+=se.getTLV(b,Ke[st]).length,se.checkStrictDER(b,Ke[st],R,T,Z);if(2*Le!=$e)throw new Error("sum of children's TLV length and L unmatch: "+2*Le+"!="+$e)}},Ot.oidname=function(b){var _=Pe.asn1;Pe.lang.String.isHex(b)&&(b=_.ASN1Util.oidHexToInt(b));var R=_.x509.OID.oid2name(b);return""===R&&(R=b),R},void 0!==Pe&&Pe||(x.KJUR=Pe={}),void 0!==Pe.lang&&Pe.lang||(Pe.lang={}),Pe.lang.String=function(){},"function"==typeof o?(x.utf8tob64u=Dn=function(_){return mn(o.from(_,"utf8").toString("base64"))},x.b64utoutf8=Wt=function(_){return o.from(kn(_),"base64").toString("utf8")}):(x.utf8tob64u=Dn=function(_){return Lt(Li(Ur(_)))},x.b64utoutf8=Wt=function(_){return decodeURIComponent(mi(gn(_)))}),Pe.lang.String.isInteger=function(b){return!!b.match(/^[0-9]+$/)||!!b.match(/^-[0-9]+$/)},Pe.lang.String.isHex=function(b){return ro(b)},Pe.lang.String.isBase64=function(b){return!(!(b=b.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||b.length%4!=0)},Pe.lang.String.isBase64URL=function(b){return!b.match(/[+/=]/)&&(b=kn(b),Pe.lang.String.isBase64(b))},Pe.lang.String.isIntegerArray=function(b){return!!(b=b.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},Pe.lang.String.isPrintable=function(b){return null!==b.match(/^[0-9A-Za-z '()+,-./:=?]*$/)},Pe.lang.String.isIA5=function(b){return null!==b.match(/^[\x20-\x21\x23-\x7f]*$/)},Pe.lang.String.isMail=function(b){return null!==b.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)};var Ui=function(_,R,T){return null==T&&(T="0"),_.length>=R?_:new Array(R-_.length+1).join(T)+_};void 0!==Pe&&Pe||(x.KJUR=Pe={}),void 0!==Pe.crypto&&Pe.crypto||(Pe.crypto={}),Pe.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:B.algo.MD5,sha1:B.algo.SHA1,sha224:B.algo.SHA224,sha256:B.algo.SHA256,sha384:B.algo.SHA384,sha512:B.algo.SHA512,ripemd160:B.algo.RIPEMD160},this.getDigestInfoHex=function(b,_){if(void 0===this.DIGESTINFOHEAD[_])throw"alg not supported in Util.DIGESTINFOHEAD: "+_;return this.DIGESTINFOHEAD[_]+b},this.getPaddedDigestInfoHex=function(b,_,R){var T=this.getDigestInfoHex(b,_),Z=R/4;if(T.length+22>Z)throw"key is too short for SigAlg: keylen="+R+","+_;for(var ue="00"+T,Se="",Ce=Z-"0001".length-ue.length,ke=0;ke<Ce;ke+=2)Se+="ff";return"0001"+Se+ue},this.hashString=function(b,_){return new Pe.crypto.MessageDigest({alg:_}).digestString(b)},this.hashHex=function(b,_){return new Pe.crypto.MessageDigest({alg:_}).digestHex(b)},this.sha1=function(b){return this.hashString(b,"sha1")},this.sha256=function(b){return this.hashString(b,"sha256")},this.sha256Hex=function(b){return this.hashHex(b,"sha256")},this.sha512=function(b){return this.hashString(b,"sha512")},this.sha512Hex=function(b){return this.hashHex(b,"sha512")},this.isKey=function(b){return b instanceof it||b instanceof Pe.crypto.DSA||b instanceof Pe.crypto.ECDSA}},Pe.crypto.Util.md5=function(b){return new Pe.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(b)},Pe.crypto.Util.ripemd160=function(b){return new Pe.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(b)},Pe.crypto.Util.SECURERANDOMGEN=new he,Pe.crypto.Util.getRandomHexOfNbytes=function(b){var _=new Array(b);return Pe.crypto.Util.SECURERANDOMGEN.nextBytes(_),vt(_)},Pe.crypto.Util.getRandomBigIntegerOfNbytes=function(b){return new pe(Pe.crypto.Util.getRandomHexOfNbytes(b),16)},Pe.crypto.Util.getRandomHexOfNbits=function(b){var _=b%8,R=new Array((b-_)/8+1);return Pe.crypto.Util.SECURERANDOMGEN.nextBytes(R),R[0]=(255<<_&255^255)&R[0],vt(R)},Pe.crypto.Util.getRandomBigIntegerOfNbits=function(b){return new pe(Pe.crypto.Util.getRandomHexOfNbits(b),16)},Pe.crypto.Util.getRandomBigIntegerZeroToMax=function(b){for(var _=b.bitLength();;){var R=Pe.crypto.Util.getRandomBigIntegerOfNbits(_);if(-1!=b.compareTo(R))return R}},Pe.crypto.Util.getRandomBigIntegerMinToMax=function(b,_){var R=b.compareTo(_);if(1==R)throw"biMin is greater than biMax";if(0==R)return b;var T=_.subtract(b);return Pe.crypto.Util.getRandomBigIntegerZeroToMax(T).add(b)},Pe.crypto.MessageDigest=function(b){this.setAlgAndProvider=function(_,R){if(null!==(_=Pe.crypto.MessageDigest.getCanonicalAlgName(_))&&void 0===R&&(R=Pe.crypto.Util.DEFAULTPROVIDER[_]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(_)&&"cryptojs"==R){try{this.md=Pe.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[_].create()}catch(T){throw"setAlgAndProvider hash alg set fail alg="+_+"/"+T}this.updateString=function(T){this.md.update(T)},this.updateHex=function(T){var Z=B.enc.Hex.parse(T);this.md.update(Z)},this.digest=function(){return this.md.finalize().toString(B.enc.Hex)},this.digestString=function(T){return this.updateString(T),this.digest()},this.digestHex=function(T){return this.updateHex(T),this.digest()}}if(-1!=":sha256:".indexOf(_)&&"sjcl"==R){try{this.md=new sjcl.hash.sha256}catch(T){throw"setAlgAndProvider hash alg set fail alg="+_+"/"+T}this.updateString=function(T){this.md.update(T)},this.updateHex=function(T){var Z=sjcl.codec.hex.toBits(T);this.md.update(Z)},this.digest=function(){var T=this.md.finalize();return sjcl.codec.hex.fromBits(T)},this.digestString=function(T){return this.updateString(T),this.digest()},this.digestHex=function(T){return this.updateHex(T),this.digest()}}},this.updateString=function(_){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(_){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(_){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(_){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==b&&void 0!==b.alg&&(this.algName=b.alg,void 0===b.prov&&(this.provName=Pe.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},Pe.crypto.MessageDigest.getCanonicalAlgName=function(b){return"string"==typeof b&&(b=(b=b.toLowerCase()).replace(/-/,"")),b},Pe.crypto.MessageDigest.getHashLength=function(b){var _=Pe.crypto.MessageDigest,R=_.getCanonicalAlgName(b);if(void 0===_.HASHLENGTH[R])throw"not supported algorithm: "+b;return _.HASHLENGTH[R]},Pe.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},Pe.crypto.Mac=function(b){this.setAlgAndProvider=function(_,R){if(null==(_=_.toLowerCase())&&(_="hmacsha1"),"hmac"!=(_=_.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+_;void 0===R&&(R=Pe.crypto.Util.DEFAULTPROVIDER[_]),this.algProv=_+"/"+R;var T=_.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(T)&&"cryptojs"==R){try{this.mac=B.algo.HMAC.create(Pe.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[T],this.pass)}catch(se){throw"setAlgAndProvider hash alg set fail hashAlg="+T+"/"+se}this.updateString=function(se){this.mac.update(se)},this.updateHex=function(se){var ue=B.enc.Hex.parse(se);this.mac.update(ue)},this.doFinal=function(){return this.mac.finalize().toString(B.enc.Hex)},this.doFinalString=function(se){return this.updateString(se),this.doFinal()},this.doFinalHex=function(se){return this.updateHex(se),this.doFinal()}}},this.updateString=function(_){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(_){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(_){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(_){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(_){if("string"==typeof _){var R=_;return _.length%2!=1&&_.match(/^[0-9A-Fa-f]+$/)||(R=fr(_)),void(this.pass=B.enc.Hex.parse(R))}if("object"!=(void 0===_?"undefined":C(_)))throw"KJUR.crypto.Mac unsupported password type: "+_;if(R=null,void 0!==_.hex){if(_.hex.length%2!=0||!_.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+_.hex;R=_.hex}if(void 0!==_.utf8&&(R=Sr(_.utf8)),void 0!==_.rstr&&(R=fr(_.rstr)),void 0!==_.b64&&(R=ge(_.b64)),void 0!==_.b64u&&(R=gn(_.b64u)),null==R)throw"KJUR.crypto.Mac unsupported password type: "+_;this.pass=B.enc.Hex.parse(R)},void 0!==b&&(void 0!==b.pass&&this.setPassword(b.pass),void 0!==b.alg&&(this.algName=b.alg,void 0===b.prov&&(this.provName=Pe.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},Pe.crypto.Signature=function(b){var _=null;if(this._setAlgNames=function(){var R=this.algName.match(/^(.+)with(.+)$/);R&&(this.mdAlgName=R[1].toLowerCase(),this.pubkeyAlgName=R[2].toLowerCase(),"rsaandmgf1"==this.pubkeyAlgName&&"sha"==this.mdAlgName&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(R,T){for(var Z="",se=T/4-R.length,ue=0;ue<se;ue++)Z+="0";return Z+R},this.setAlgAndProvider=function(R,T){if(this._setAlgNames(),"cryptojs/jsrsa"!=T)throw new Error("provider not supported: "+T);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new Pe.crypto.MessageDigest({alg:this.mdAlgName})}catch(Z){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+Z)}this.init=function(Z,se){var ue=null;try{ue=void 0===se?Ln.getKey(Z):Ln.getKey(Z,se)}catch(Se){throw"init failed:"+Se}if(!0===ue.isPrivate)this.prvKey=ue,this.state="SIGN";else{if(!0!==ue.isPublic)throw"init failed.:"+ue;this.pubKey=ue,this.state="VERIFY"}},this.updateString=function(Z){this.md.updateString(Z)},this.updateHex=function(Z){this.md.updateHex(Z)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0===this.prvKey&&void 0!==this.ecprvhex&&void 0!==this.eccurvename&&void 0!==Pe.crypto.ECDSA&&(this.prvKey=new Pe.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof it&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof it&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof Pe.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof Pe.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(Z){return this.updateString(Z),this.sign()},this.signHex=function(Z){return this.updateHex(Z),this.sign()},this.verify=function(Z){if(this.sHashHex=this.md.digest(),void 0===this.pubKey&&void 0!==this.ecpubhex&&void 0!==this.eccurvename&&void 0!==Pe.crypto.ECDSA&&(this.pubKey=new Pe.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof it&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,Z,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof it&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,Z);if(void 0!==Pe.crypto.ECDSA&&this.pubKey instanceof Pe.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Z);if(void 0!==Pe.crypto.DSA&&this.pubKey instanceof Pe.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,Z);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(R,T){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(R){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(R){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(R){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(R){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(R){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=b,void 0!==b&&(void 0!==b.alg&&(this.algName=b.alg,this.provName=void 0===b.prov?Pe.crypto.Util.DEFAULTPROVIDER[this.algName]:b.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==b.psssaltlen&&(this.pssSaltLen=b.psssaltlen),void 0!==b.prvkeypem)){if(void 0!==b.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{_=Ln.getKey(b.prvkeypem),this.init(_)}catch(R){throw"fatal error to load pem private key: "+R}}},Pe.crypto.Cipher=function(b){},Pe.crypto.Cipher.encrypt=function(b,_,R){if(_ instanceof it&&_.isPublic){var T=Pe.crypto.Cipher.getAlgByKeyAndName(_,R);if("RSA"===T)return _.encrypt(b);if("RSAOAEP"===T)return _.encryptOAEP(b,"sha1");var Z=T.match(/^RSAOAEP(\d+)$/);if(null!==Z)return _.encryptOAEP(b,"sha"+Z[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+R}throw"Cipher.encrypt: unsupported key or algorithm"},Pe.crypto.Cipher.decrypt=function(b,_,R){if(_ instanceof it&&_.isPrivate){var T=Pe.crypto.Cipher.getAlgByKeyAndName(_,R);if("RSA"===T)return _.decrypt(b);if("RSAOAEP"===T)return _.decryptOAEP(b,"sha1");var Z=T.match(/^RSAOAEP(\d+)$/);if(null!==Z)return _.decryptOAEP(b,"sha"+Z[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+R}throw"Cipher.decrypt: unsupported key or algorithm"},Pe.crypto.Cipher.getAlgByKeyAndName=function(b,_){if(b instanceof it){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(_))return _;if(null==_)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+_}throw"getAlgByKeyAndName: not supported algorithm name: "+_},Pe.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040023":"secp521r1","2b81040022":"secp384r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==Pe&&Pe||(x.KJUR=Pe={}),void 0!==Pe.crypto&&Pe.crypto||(Pe.crypto={}),Pe.crypto.ECDSA=function(b){var _=Error,R=pe,T=At,Z=Pe.crypto.ECDSA,se=Pe.crypto.ECParameterDB,ue=Z.getName,Ce=Ot.getVbyListEx,ke=Ot.isASN1HEX,je=new he;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(Le){return new R(Le.bitLength(),je).mod(Le.subtract(R.ONE)).add(R.ONE)},this.setNamedCurve=function(Le){this.ecparams=se.getByName(Le),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=Le},this.setPrivateKeyHex=function(Le){this.isPrivate=!0,this.prvKeyHex=Le},this.setPublicKeyHex=function(Le){this.isPublic=!0,this.pubKeyHex=Le},this.getPublicKeyXYHex=function(){var Le=this.pubKeyHex;if("04"!==Le.substr(0,2))throw"this method supports uncompressed format(04) only";var $e=this.ecparams.keylen/4;if(Le.length!==2+2*$e)throw"malformed public key hex length";var Ke={};return Ke.x=Le.substr(2,$e),Ke.y=Le.substr(2+$e),Ke},this.getShortNISTPCurveName=function(){var Le=this.curveName;return"secp256r1"===Le||"NIST P-256"===Le||"P-256"===Le||"prime256v1"===Le?"P-256":"secp384r1"===Le||"NIST P-384"===Le||"P-384"===Le?"P-384":null},this.generateKeyPairHex=function(){var $e=this.getBigRandom(this.ecparams.n),Ke=this.ecparams.G.multiply($e),st=Ke.getX().toBigInteger(),pt=Ke.getY().toBigInteger(),ht=this.ecparams.keylen/4,Ae=("0000000000"+$e.toString(16)).slice(-ht),Ve="04"+("0000000000"+st.toString(16)).slice(-ht)+("0000000000"+pt.toString(16)).slice(-ht);return this.setPrivateKeyHex(Ae),this.setPublicKeyHex(Ve),{ecprvhex:Ae,ecpubhex:Ve}},this.signWithMessageHash=function(Le){return this.signHex(Le,this.prvKeyHex)},this.signHex=function(Le,$e){var Ke=new R($e,16),st=this.ecparams.n,pt=new R(Le.substring(0,this.ecparams.keylen/4),16);do{var ht=this.getBigRandom(st),Ae=this.ecparams.G.multiply(ht).getX().toBigInteger().mod(st)}while(Ae.compareTo(R.ZERO)<=0);var Ve=ht.modInverse(st).multiply(pt.add(Ke.multiply(Ae))).mod(st);return Z.biRSSigToASN1Sig(Ae,Ve)},this.sign=function(Le,$e){var Ke=$e,st=this.ecparams.n,pt=R.fromByteArrayUnsigned(Le);do{var ht=this.getBigRandom(st),Ae=this.ecparams.G.multiply(ht).getX().toBigInteger().mod(st)}while(Ae.compareTo(pe.ZERO)<=0);var Ve=ht.modInverse(st).multiply(pt.add(Ke.multiply(Ae))).mod(st);return this.serializeSig(Ae,Ve)},this.verifyWithMessageHash=function(Le,$e){return this.verifyHex(Le,$e,this.pubKeyHex)},this.verifyHex=function(Le,$e,Ke){try{var st,pt,ht=Z.parseSigHex($e);st=ht.r,pt=ht.s;var Ae=T.decodeFromHex(this.ecparams.curve,Ke),Ve=new R(Le.substring(0,this.ecparams.keylen/4),16);return this.verifyRaw(Ve,st,pt,Ae)}catch{return!1}},this.verify=function(Le,$e,Ke){var st,pt,ht;if(Bitcoin.Util.isArray($e)){var Ae=this.parseSig($e);st=Ae.r,pt=Ae.s}else{if("object"!==(void 0===$e?"undefined":C($e))||!$e.r||!$e.s)throw"Invalid value for signature";st=$e.r,pt=$e.s}if(Ke instanceof At)ht=Ke;else{if(!Bitcoin.Util.isArray(Ke))throw"Invalid format for pubkey value, must be byte array or ECPointFp";ht=T.decodeFrom(this.ecparams.curve,Ke)}var Ve=R.fromByteArrayUnsigned(Le);return this.verifyRaw(Ve,st,pt,ht)},this.verifyRaw=function(Le,$e,Ke,st){var pt=this.ecparams.n,ht=this.ecparams.G;if($e.compareTo(R.ONE)<0||$e.compareTo(pt)>=0||Ke.compareTo(R.ONE)<0||Ke.compareTo(pt)>=0)return!1;var Ae=Ke.modInverse(pt),Ve=Le.multiply(Ae).mod(pt),He=$e.multiply(Ae).mod(pt);return ht.multiply(Ve).add(st.multiply(He)).getX().toBigInteger().mod(pt).equals($e)},this.serializeSig=function(Le,$e){var Ke=Le.toByteArraySigned(),st=$e.toByteArraySigned(),pt=[];return pt.push(2),pt.push(Ke.length),(pt=pt.concat(Ke)).push(2),pt.push(st.length),(pt=pt.concat(st)).unshift(pt.length),pt.unshift(48),pt},this.parseSig=function(Le){var $e;if(48!=Le[0])throw new Error("Signature not a valid DERSequence");if(2!=Le[$e=2])throw new Error("First element in signature must be a DERInteger");var Ke=Le.slice($e+2,$e+2+Le[$e+1]);if(2!=Le[$e+=2+Le[$e+1]])throw new Error("Second element in signature must be a DERInteger");var st=Le.slice($e+2,$e+2+Le[$e+1]);return $e+=2+Le[$e+1],{r:R.fromByteArrayUnsigned(Ke),s:R.fromByteArrayUnsigned(st)}},this.parseSigCompact=function(Le){if(65!==Le.length)throw"Signature has the wrong length";var $e=Le[0]-27;if($e<0||$e>7)throw"Invalid signature type";var Ke=this.ecparams.n;return{r:R.fromByteArrayUnsigned(Le.slice(1,33)).mod(Ke),s:R.fromByteArrayUnsigned(Le.slice(33,65)).mod(Ke),i:$e}},this.readPKCS5PrvKeyHex=function(Le){if(!1===ke(Le))throw new Error("not ASN.1 hex string");var $e,Ke,st;try{$e=Ce(Le,0,["[0]",0],"06"),Ke=Ce(Le,0,[1],"04");try{st=Ce(Le,0,["[1]",0],"03")}catch{}}catch{throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=ue($e),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(st),this.setPrivateKeyHex(Ke),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(Le){if(!1===ke(Le))throw new _("not ASN.1 hex string");var $e,Ke,st;try{Ce(Le,0,[1,0],"06"),$e=Ce(Le,0,[1,1],"06"),Ke=Ce(Le,0,[2,0,1],"04");try{st=Ce(Le,0,[2,0,"[1]",0],"03")}catch{}}catch{throw new _("malformed PKCS#8 plain ECC private key")}if(this.curveName=ue($e),void 0===this.curveName)throw new _("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(st),this.setPrivateKeyHex(Ke),this.isPublic=!1},this.readPKCS8PubKeyHex=function(Le){if(!1===ke(Le))throw new _("not ASN.1 hex string");var $e,Ke;try{Ce(Le,0,[0,0],"06"),$e=Ce(Le,0,[0,1],"06"),Ke=Ce(Le,0,[1],"03")}catch{throw new _("malformed PKCS#8 ECC public key")}if(this.curveName=ue($e),null===this.curveName)throw new _("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(Ke)},this.readCertPubKeyHex=function(Le,$e){if(!1===ke(Le))throw new _("not ASN.1 hex string");var Ke,st;try{Ke=Ce(Le,0,[0,5,0,1],"06"),st=Ce(Le,0,[0,5,1],"03")}catch{throw new _("malformed X.509 certificate ECC public key")}if(this.curveName=ue(Ke),null===this.curveName)throw new _("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(st)},void 0!==b&&void 0!==b.curve&&(this.curveName=b.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==b&&(void 0!==b.prv&&this.setPrivateKeyHex(b.prv),void 0!==b.pub&&this.setPublicKeyHex(b.pub))},Pe.crypto.ECDSA.parseSigHex=function(b){var _=Pe.crypto.ECDSA.parseSigHexInHexRS(b);return{r:new pe(_.r,16),s:new pe(_.s,16)}},Pe.crypto.ECDSA.parseSigHexInHexRS=function(b){var R=Ot.getChildIdx,T=Ot.getV;if(Ot.checkStrictDER(b,0),"30"!=b.substr(0,2))throw new Error("signature is not a ASN.1 sequence");var Z=R(b,0);if(2!=Z.length)throw new Error("signature shall have two elements");var se=Z[0],ue=Z[1];if("02"!=b.substr(se,2))throw new Error("1st item not ASN.1 integer");if("02"!=b.substr(ue,2))throw new Error("2nd item not ASN.1 integer");return{r:T(b,se),s:T(b,ue)}},Pe.crypto.ECDSA.asn1SigToConcatSig=function(b){var _=Pe.crypto.ECDSA.parseSigHexInHexRS(b),R=_.r,T=_.s;if("00"==R.substr(0,2)&&R.length%32==2&&(R=R.substr(2)),"00"==T.substr(0,2)&&T.length%32==2&&(T=T.substr(2)),R.length%32==30&&(R="00"+R),T.length%32==30&&(T="00"+T),R.length%32!=0)throw"unknown ECDSA sig r length error";if(T.length%32!=0)throw"unknown ECDSA sig s length error";return R+T},Pe.crypto.ECDSA.concatSigToASN1Sig=function(b){if(b.length/2*8%128!=0)throw"unknown ECDSA concatinated r-s sig  length error";var _=b.substr(0,b.length/2),R=b.substr(b.length/2);return Pe.crypto.ECDSA.hexRSSigToASN1Sig(_,R)},Pe.crypto.ECDSA.hexRSSigToASN1Sig=function(b,_){var R=new pe(b,16),T=new pe(_,16);return Pe.crypto.ECDSA.biRSSigToASN1Sig(R,T)},Pe.crypto.ECDSA.biRSSigToASN1Sig=function(b,_){var R=Pe.asn1,T=new R.DERInteger({bigint:b}),Z=new R.DERInteger({bigint:_});return new R.DERSequence({array:[T,Z]}).getEncodedHex()},Pe.crypto.ECDSA.getName=function(b){return"2b8104001f"===b?"secp192k1":"2a8648ce3d030107"===b?"secp256r1":"2b8104000a"===b?"secp256k1":"2b81040021"===b?"secp224r1":"2b81040022"===b?"secp384r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(b)?"secp256r1":-1!=="|secp256k1|".indexOf(b)?"secp256k1":-1!=="|secp224r1|NIST P-224|P-224|".indexOf(b)?"secp224r1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(b)?"secp384r1":null},void 0!==Pe&&Pe||(x.KJUR=Pe={}),void 0!==Pe.crypto&&Pe.crypto||(Pe.crypto={}),Pe.crypto.ECParameterDB=new function(){var b={},_={};function R(T){return new pe(T,16)}this.getByName=function(T){var Z=T;if(void 0!==_[Z]&&(Z=_[T]),void 0!==b[Z])return b[Z];throw"unregistered EC curve name: "+Z},this.regist=function(T,Z,se,ue,Se,Ce,ke,je,Le,$e,Ke,st){b[T]={};var pt=R(se),ht=R(ue),Ae=R(Se),Ve=R(Ce),He=R(ke),Xe=new zt(pt,ht,Ae),ut=Xe.decodePointHex("04"+je+Le);b[T].name=T,b[T].keylen=Z,b[T].curve=Xe,b[T].G=ut,b[T].n=Ve,b[T].h=He,b[T].oid=Ke,b[T].info=st;for(var mt=0;mt<$e.length;mt++)_[$e[mt]]=T}},Pe.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),Pe.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),Pe.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),Pe.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),Pe.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),Pe.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),Pe.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),Pe.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),Pe.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),Pe.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]);var Ln=function(){var b=function(ke,je,Le){return _(B.AES,ke,je,Le)},_=function(ke,je,Le,$e){var Ke=B.enc.Hex.parse(je),st=B.enc.Hex.parse(Le),pt=B.enc.Hex.parse($e),ht={};ht.key=st,ht.iv=pt,ht.ciphertext=Ke;var Ae=ke.decrypt(ht,st,{iv:pt});return B.enc.Hex.stringify(Ae)},R=function(ke,je,Le){return T(B.AES,ke,je,Le)},T=function(ke,je,Le,$e){var Ke=B.enc.Hex.parse(je),st=B.enc.Hex.parse(Le),pt=B.enc.Hex.parse($e),ht=ke.encrypt(Ke,st,{iv:pt}),Ae=B.enc.Hex.parse(ht.toString());return B.enc.Base64.stringify(Ae)},Z={"AES-256-CBC":{proc:b,eproc:R,keylen:32,ivlen:16},"AES-192-CBC":{proc:b,eproc:R,keylen:24,ivlen:16},"AES-128-CBC":{proc:b,eproc:R,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(ke,je,Le){return _(B.TripleDES,ke,je,Le)},eproc:function(ke,je,Le){return T(B.TripleDES,ke,je,Le)},keylen:24,ivlen:8},"DES-CBC":{proc:function(ke,je,Le){return _(B.DES,ke,je,Le)},eproc:function(ke,je,Le){return T(B.DES,ke,je,Le)},keylen:8,ivlen:8}},se=function(ke){var je={},Le=ke.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));Le&&(je.cipher=Le[1],je.ivsalt=Le[2]);var $e=ke.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));$e&&(je.type=$e[1]);var Ke=-1,st=0;-1!=ke.indexOf("\r\n\r\n")&&(Ke=ke.indexOf("\r\n\r\n"),st=2),-1!=ke.indexOf("\n\n")&&(Ke=ke.indexOf("\n\n"),st=1);var pt=ke.indexOf("-----END");if(-1!=Ke&&-1!=pt){var ht=ke.substring(Ke+2*st,pt-st);ht=ht.replace(/\s+/g,""),je.data=ht}return je},ue=function(ke,je,Le){for(var $e=Le.substring(0,16),Ke=B.enc.Hex.parse($e),st=B.enc.Utf8.parse(je),pt=Z[ke].keylen+Z[ke].ivlen,ht="",Ae=null;;){var Ve=B.algo.MD5.create();if(null!=Ae&&Ve.update(Ae),Ve.update(st),Ve.update(Ke),Ae=Ve.finalize(),(ht+=B.enc.Hex.stringify(Ae)).length>=2*pt)break}var He={};return He.keyhex=ht.substr(0,2*Z[ke].keylen),He.ivhex=ht.substr(2*Z[ke].keylen,2*Z[ke].ivlen),He},Se=function(ke,je,Le,$e){var Ke=B.enc.Base64.parse(ke),st=B.enc.Hex.stringify(Ke);return(0,Z[je].proc)(st,Le,$e)};return{version:"1.0.0",parsePKCS5PEM:function(ke){return se(ke)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(ke,je,Le){return ue(ke,je,Le)},decryptKeyB64:function(ke,je,Le,$e){return Se(ke,je,Le,$e)},getDecryptedKeyHex:function(ke,je){var Le=se(ke),$e=Le.cipher,Ke=Le.ivsalt,st=Le.data,pt=ue($e,je,Ke).keyhex;return Se(st,$e,pt,Ke)},getEncryptedPKCS5PEMFromPrvKeyHex:function(ke,je,Le,$e,Ke){var Ae,Ve,st="";if(void 0!==$e&&null!=$e||($e="AES-256-CBC"),void 0===Z[$e])throw"KEYUTIL unsupported algorithm: "+$e;void 0!==Ke&&null!=Ke||(Ke=(Ae=Z[$e].ivlen,Ve=B.lib.WordArray.random(Ae),B.enc.Hex.stringify(Ve)).toUpperCase());var pt=function(Ae,Ve,He,Xe){return(0,Z[Ve].eproc)(Ae,He,Xe)}(je,$e,ue($e,Le,Ke).keyhex,Ke);return st="-----BEGIN "+ke+" PRIVATE KEY-----\r\n",st+="Proc-Type: 4,ENCRYPTED\r\n",st+="DEK-Info: "+$e+","+Ke+"\r\n",st+="\r\n",(st+=pt.replace(/(.{64})/g,"$1\r\n"))+"\r\n-----END "+ke+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(ke){var Le=Ot.getChildIdx,$e=Ot.getV,Ke={},st=Le(ke,0);if(2!=st.length)throw"malformed format: SEQUENCE(0).items != 2: "+st.length;Ke.ciphertext=$e(ke,st[1]);var pt=Le(ke,st[0]);if(2!=pt.length)throw"malformed format: SEQUENCE(0.0).items != 2: "+pt.length;if("2a864886f70d01050d"!=$e(ke,pt[0]))throw"this only supports pkcs5PBES2";var ht=Le(ke,pt[1]);if(2!=pt.length)throw"malformed format: SEQUENCE(0.0.1).items != 2: "+ht.length;var Ae=Le(ke,ht[1]);if(2!=Ae.length)throw"malformed format: SEQUENCE(0.0.1.1).items != 2: "+Ae.length;if("2a864886f70d0307"!=$e(ke,Ae[0]))throw"this only supports TripleDES";Ke.encryptionSchemeAlg="TripleDES",Ke.encryptionSchemeIV=$e(ke,Ae[1]);var Ve=Le(ke,ht[0]);if(2!=Ve.length)throw"malformed format: SEQUENCE(0.0.1.0).items != 2: "+Ve.length;if("2a864886f70d01050c"!=$e(ke,Ve[0]))throw"this only supports pkcs5PBKDF2";var He=Le(ke,Ve[1]);if(He.length<2)throw"malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+He.length;Ke.pbkdf2Salt=$e(ke,He[0]);var Xe=$e(ke,He[1]);try{Ke.pbkdf2Iter=parseInt(Xe,16)}catch{throw"malformed format pbkdf2Iter: "+Xe}return Ke},getPBKDF2KeyHexFromParam:function(ke,je){var Le=B.enc.Hex.parse(ke.pbkdf2Salt),Ke=B.PBKDF2(je,Le,{keySize:6,iterations:ke.pbkdf2Iter});return B.enc.Hex.stringify(Ke)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(ke,je){var Le=Tr(ke,"ENCRYPTED PRIVATE KEY"),$e=this.parseHexOfEncryptedPKCS8(Le),Ke=Ln.getPBKDF2KeyHexFromParam($e,je),st={};st.ciphertext=B.enc.Hex.parse($e.ciphertext);var pt=B.enc.Hex.parse(Ke),ht=B.enc.Hex.parse($e.encryptionSchemeIV),Ae=B.TripleDES.decrypt(st,pt,{iv:ht});return B.enc.Hex.stringify(Ae)},getKeyFromEncryptedPKCS8PEM:function(ke,je){var Le=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(ke,je);return this.getKeyFromPlainPrivatePKCS8Hex(Le)},parsePlainPrivatePKCS8Hex:function(ke){var je=Ot,Le=je.getChildIdx,$e=je.getV,Ke={algparam:null};if("30"!=ke.substr(0,2))throw"malformed plain PKCS8 private key(code:001)";var st=Le(ke,0);if(3!=st.length)throw"malformed plain PKCS8 private key(code:002)";if("30"!=ke.substr(st[1],2))throw"malformed PKCS8 private key(code:003)";var pt=Le(ke,st[1]);if(2!=pt.length)throw"malformed PKCS8 private key(code:004)";if("06"!=ke.substr(pt[0],2))throw"malformed PKCS8 private key(code:005)";if(Ke.algoid=$e(ke,pt[0]),"06"==ke.substr(pt[1],2)&&(Ke.algparam=$e(ke,pt[1])),"04"!=ke.substr(st[2],2))throw"malformed PKCS8 private key(code:006)";return Ke.keyidx=je.getVidx(ke,st[2]),Ke},getKeyFromPlainPrivatePKCS8PEM:function(ke){var je=Tr(ke,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(je)},getKeyFromPlainPrivatePKCS8Hex:function(ke){var je,Le=this.parsePlainPrivatePKCS8Hex(ke);if("2a864886f70d010101"==Le.algoid)je=new it;else if("2a8648ce380401"==Le.algoid)je=new Pe.crypto.DSA;else{if("2a8648ce3d0201"!=Le.algoid)throw"unsupported private key algorithm";je=new Pe.crypto.ECDSA}return je.readPKCS8PrvKeyHex(ke),je},_getKeyFromPublicPKCS8Hex:function(ke){var je,Le=Ot.getVbyList(ke,0,[0,0],"06");if("2a864886f70d010101"===Le)je=new it;else if("2a8648ce380401"===Le)je=new Pe.crypto.DSA;else{if("2a8648ce3d0201"!==Le)throw"unsupported PKCS#8 public key hex";je=new Pe.crypto.ECDSA}return je.readPKCS8PubKeyHex(ke),je},parsePublicRawRSAKeyHex:function(ke){var Le=Ot.getChildIdx,$e=Ot.getV,Ke={};if("30"!=ke.substr(0,2))throw"malformed RSA key(code:001)";var st=Le(ke,0);if(2!=st.length)throw"malformed RSA key(code:002)";if("02"!=ke.substr(st[0],2))throw"malformed RSA key(code:003)";if(Ke.n=$e(ke,st[0]),"02"!=ke.substr(st[1],2))throw"malformed RSA key(code:004)";return Ke.e=$e(ke,st[1]),Ke},parsePublicPKCS8Hex:function(ke){var je=Ot,Le=je.getChildIdx,$e=je.getV,Ke={algparam:null},st=Le(ke,0);if(2!=st.length)throw"outer DERSequence shall have 2 elements: "+st.length;var pt=st[0];if("30"!=ke.substr(pt,2))throw"malformed PKCS8 public key(code:001)";var ht=Le(ke,pt);if(2!=ht.length)throw"malformed PKCS8 public key(code:002)";if("06"!=ke.substr(ht[0],2))throw"malformed PKCS8 public key(code:003)";if(Ke.algoid=$e(ke,ht[0]),"06"==ke.substr(ht[1],2)?Ke.algparam=$e(ke,ht[1]):"30"==ke.substr(ht[1],2)&&(Ke.algparam={},Ke.algparam.p=je.getVbyList(ke,ht[1],[0],"02"),Ke.algparam.q=je.getVbyList(ke,ht[1],[1],"02"),Ke.algparam.g=je.getVbyList(ke,ht[1],[2],"02")),"03"!=ke.substr(st[1],2))throw"malformed PKCS8 public key(code:004)";return Ke.key=$e(ke,st[1]).substr(2),Ke}}}();Ln.getKey=function(b,_,R){var $n,T=(ht=Ot).getChildIdx,Z=ht.getVbyList,se=Pe.crypto,ue=se.ECDSA,Se=se.DSA,Ce=it,ke=Tr,je=Ln;if(void 0!==Ce&&b instanceof Ce||void 0!==ue&&b instanceof ue||void 0!==Se&&b instanceof Se)return b;if(void 0!==b.curve&&void 0!==b.xy&&void 0===b.d)return new ue({pub:b.xy,curve:b.curve});if(void 0!==b.curve&&void 0!==b.d)return new ue({prv:b.d,curve:b.curve});if(void 0===b.kty&&void 0!==b.n&&void 0!==b.e&&void 0===b.d)return(Ut=new Ce).setPublic(b.n,b.e),Ut;if(void 0===b.kty&&void 0!==b.n&&void 0!==b.e&&void 0!==b.d&&void 0!==b.p&&void 0!==b.q&&void 0!==b.dp&&void 0!==b.dq&&void 0!==b.co&&void 0===b.qi)return(Ut=new Ce).setPrivateEx(b.n,b.e,b.d,b.p,b.q,b.dp,b.dq,b.co),Ut;if(void 0===b.kty&&void 0!==b.n&&void 0!==b.e&&void 0!==b.d&&void 0===b.p)return(Ut=new Ce).setPrivate(b.n,b.e,b.d),Ut;if(void 0!==b.p&&void 0!==b.q&&void 0!==b.g&&void 0!==b.y&&void 0===b.x)return(Ut=new Se).setPublic(b.p,b.q,b.g,b.y),Ut;if(void 0!==b.p&&void 0!==b.q&&void 0!==b.g&&void 0!==b.y&&void 0!==b.x)return(Ut=new Se).setPrivate(b.p,b.q,b.g,b.y,b.x),Ut;if("RSA"===b.kty&&void 0!==b.n&&void 0!==b.e&&void 0===b.d)return(Ut=new Ce).setPublic(gn(b.n),gn(b.e)),Ut;if("RSA"===b.kty&&void 0!==b.n&&void 0!==b.e&&void 0!==b.d&&void 0!==b.p&&void 0!==b.q&&void 0!==b.dp&&void 0!==b.dq&&void 0!==b.qi)return(Ut=new Ce).setPrivateEx(gn(b.n),gn(b.e),gn(b.d),gn(b.p),gn(b.q),gn(b.dp),gn(b.dq),gn(b.qi)),Ut;if("RSA"===b.kty&&void 0!==b.n&&void 0!==b.e&&void 0!==b.d)return(Ut=new Ce).setPrivate(gn(b.n),gn(b.e),gn(b.d)),Ut;if("EC"===b.kty&&void 0!==b.crv&&void 0!==b.x&&void 0!==b.y&&void 0===b.d){var Le=(Mt=new ue({curve:b.crv})).ecparams.keylen/4,$e="04"+("0000000000"+gn(b.x)).slice(-Le)+("0000000000"+gn(b.y)).slice(-Le);return Mt.setPublicKeyHex($e),Mt}if("EC"===b.kty&&void 0!==b.crv&&void 0!==b.x&&void 0!==b.y&&void 0!==b.d){Le=(Mt=new ue({curve:b.crv})).ecparams.keylen/4,$e="04"+("0000000000"+gn(b.x)).slice(-Le)+("0000000000"+gn(b.y)).slice(-Le);var Ke=("0000000000"+gn(b.d)).slice(-Le);return Mt.setPublicKeyHex($e),Mt.setPrivateKeyHex(Ke),Mt}if("pkcs5prv"===R){var st,pt=b,ht=Ot;if(9===(st=T(pt,0)).length)(Ut=new Ce).readPKCS5PrvKeyHex(pt);else if(6===st.length)(Ut=new Se).readPKCS5PrvKeyHex(pt);else{if(!(st.length>2&&"04"===pt.substr(st[1],2)))throw"unsupported PKCS#1/5 hexadecimal key";(Ut=new ue).readPKCS5PrvKeyHex(pt)}return Ut}if("pkcs8prv"===R)return je.getKeyFromPlainPrivatePKCS8Hex(b);if("pkcs8pub"===R)return je._getKeyFromPublicPKCS8Hex(b);if("x509pub"===R)return En.getPublicKeyFromCertHex(b);if(-1!=b.indexOf("-END CERTIFICATE-",0)||-1!=b.indexOf("-END X509 CERTIFICATE-",0)||-1!=b.indexOf("-END TRUSTED CERTIFICATE-",0))return En.getPublicKeyFromCertPEM(b);if(-1!=b.indexOf("-END PUBLIC KEY-")){var Ae=Tr(b,"PUBLIC KEY");return je._getKeyFromPublicPKCS8Hex(Ae)}if(-1!=b.indexOf("-END RSA PRIVATE KEY-")&&-1==b.indexOf("4,ENCRYPTED")){var Ve=ke(b,"RSA PRIVATE KEY");return je.getKey(Ve,null,"pkcs5prv")}if(-1!=b.indexOf("-END DSA PRIVATE KEY-")&&-1==b.indexOf("4,ENCRYPTED")){var He=Z($n=ke(b,"DSA PRIVATE KEY"),0,[1],"02"),Xe=Z($n,0,[2],"02"),ut=Z($n,0,[3],"02"),mt=Z($n,0,[4],"02"),jt=Z($n,0,[5],"02");return(Ut=new Se).setPrivate(new pe(He,16),new pe(Xe,16),new pe(ut,16),new pe(mt,16),new pe(jt,16)),Ut}if(-1!=b.indexOf("-END EC PRIVATE KEY-")&&-1==b.indexOf("4,ENCRYPTED"))return Ve=ke(b,"EC PRIVATE KEY"),je.getKey(Ve,null,"pkcs5prv");if(-1!=b.indexOf("-END PRIVATE KEY-"))return je.getKeyFromPlainPrivatePKCS8PEM(b);if(-1!=b.indexOf("-END RSA PRIVATE KEY-")&&-1!=b.indexOf("4,ENCRYPTED")){var Pt=je.getDecryptedKeyHex(b,_),cn=new it;return cn.readPKCS5PrvKeyHex(Pt),cn}if(-1!=b.indexOf("-END EC PRIVATE KEY-")&&-1!=b.indexOf("4,ENCRYPTED")){var Mt,Ut=Z($n=je.getDecryptedKeyHex(b,_),0,[1],"04"),On=Z($n,0,[2,0],"06"),Kn=Z($n,0,[3,0],"03").substr(2);if(void 0===Pe.crypto.OID.oidhex2name[On])throw"undefined OID(hex) in KJUR.crypto.OID: "+On;return(Mt=new ue({curve:Pe.crypto.OID.oidhex2name[On]})).setPublicKeyHex(Kn),Mt.setPrivateKeyHex(Ut),Mt.isPublic=!1,Mt}if(-1!=b.indexOf("-END DSA PRIVATE KEY-")&&-1!=b.indexOf("4,ENCRYPTED"))return He=Z($n=je.getDecryptedKeyHex(b,_),0,[1],"02"),Xe=Z($n,0,[2],"02"),ut=Z($n,0,[3],"02"),mt=Z($n,0,[4],"02"),jt=Z($n,0,[5],"02"),(Ut=new Se).setPrivate(new pe(He,16),new pe(Xe,16),new pe(ut,16),new pe(mt,16),new pe(jt,16)),Ut;if(-1!=b.indexOf("-END ENCRYPTED PRIVATE KEY-"))return je.getKeyFromEncryptedPKCS8PEM(b,_);throw new Error("not supported argument")},Ln.generateKeypair=function(b,_){if("RSA"==b){var R=_;(ue=new it).generate(R,"10001"),ue.isPrivate=!0,ue.isPublic=!0;var T=new it,Z=ue.n.toString(16),se=ue.e.toString(16);return T.setPublic(Z,se),T.isPrivate=!1,T.isPublic=!0,(Se={}).prvKeyObj=ue,Se.pubKeyObj=T,Se}if("EC"==b){var ue,Se,Ce=_,ke=new Pe.crypto.ECDSA({curve:Ce}).generateKeyPairHex();return(ue=new Pe.crypto.ECDSA({curve:Ce})).setPublicKeyHex(ke.ecpubhex),ue.setPrivateKeyHex(ke.ecprvhex),ue.isPrivate=!0,ue.isPublic=!1,(T=new Pe.crypto.ECDSA({curve:Ce})).setPublicKeyHex(ke.ecpubhex),T.isPrivate=!1,T.isPublic=!0,(Se={}).prvKeyObj=ue,Se.pubKeyObj=T,Se}throw"unknown algorithm: "+b},Ln.getPEM=function(b,_,R,T,Z,se){var Se=Pe.asn1,Ce=Se.DERObjectIdentifier,ke=Se.DERInteger,je=Se.ASN1Util.newObject,$e=Pe.crypto,Ke=$e.DSA,st=$e.ECDSA,pt=it;function ht(Mt){return je({seq:[{int:0},{int:{bigint:Mt.n}},{int:Mt.e},{int:{bigint:Mt.d}},{int:{bigint:Mt.p}},{int:{bigint:Mt.q}},{int:{bigint:Mt.dmp1}},{int:{bigint:Mt.dmq1}},{int:{bigint:Mt.coeff}}]})}function Ae(Mt){return je({seq:[{int:1},{octstr:{hex:Mt.prvKeyHex}},{tag:["a0",!0,{oid:{name:Mt.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+Mt.pubKeyHex}}]}]})}function Ve(Mt){return je({seq:[{int:0},{int:{bigint:Mt.p}},{int:{bigint:Mt.q}},{int:{bigint:Mt.g}},{int:{bigint:Mt.y}},{int:{bigint:Mt.x}}]})}if((void 0!==pt&&b instanceof pt||void 0!==Ke&&b instanceof Ke||void 0!==st&&b instanceof st)&&1==b.isPublic&&(void 0===_||"PKCS8PUB"==_))return ar(mt=new(0,Se.x509.SubjectPublicKeyInfo)(b).getEncodedHex(),"PUBLIC KEY");if("PKCS1PRV"==_&&void 0!==pt&&b instanceof pt&&(void 0===R||null==R)&&1==b.isPrivate)return ar(mt=ht(b).getEncodedHex(),"RSA PRIVATE KEY");if("PKCS1PRV"==_&&void 0!==st&&b instanceof st&&(void 0===R||null==R)&&1==b.isPrivate){var He=new Ce({name:b.curveName}).getEncodedHex(),Xe=Ae(b).getEncodedHex(),ut="";return(ut+=ar(He,"EC PARAMETERS"))+ar(Xe,"EC PRIVATE KEY")}if("PKCS1PRV"==_&&void 0!==Ke&&b instanceof Ke&&(void 0===R||null==R)&&1==b.isPrivate)return ar(mt=Ve(b).getEncodedHex(),"DSA PRIVATE KEY");if("PKCS5PRV"==_&&void 0!==pt&&b instanceof pt&&void 0!==R&&null!=R&&1==b.isPrivate){var mt=ht(b).getEncodedHex();return void 0===T&&(T="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",mt,R,T,se)}if("PKCS5PRV"==_&&void 0!==st&&b instanceof st&&void 0!==R&&null!=R&&1==b.isPrivate)return mt=Ae(b).getEncodedHex(),void 0===T&&(T="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",mt,R,T,se);if("PKCS5PRV"==_&&void 0!==Ke&&b instanceof Ke&&void 0!==R&&null!=R&&1==b.isPrivate)return mt=Ve(b).getEncodedHex(),void 0===T&&(T="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",mt,R,T,se);var jt=function(Ut,On){var Kn=Pt(Ut,On);return new je({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:Kn.pbkdf2Salt}},{int:Kn.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:Kn.encryptionSchemeIV}}]}]}]},{octstr:{hex:Kn.ciphertext}}]}).getEncodedHex()},Pt=function(Ut,On){var Kn=B.lib.WordArray.random(8),$n=B.lib.WordArray.random(8),Mr=B.PBKDF2(On,Kn,{keySize:6,iterations:100}),Rr=B.enc.Hex.parse(Ut),pr=B.TripleDES.encrypt(Rr,Mr,{iv:$n})+"",lr={};return lr.ciphertext=pr,lr.pbkdf2Salt=B.enc.Hex.stringify(Kn),lr.pbkdf2Iter=100,lr.encryptionSchemeAlg="DES-EDE3-CBC",lr.encryptionSchemeIV=B.enc.Hex.stringify($n),lr};if("PKCS8PRV"==_&&null!=pt&&b instanceof pt&&1==b.isPrivate){var cn=ht(b).getEncodedHex();return mt=je({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:cn}}]}).getEncodedHex(),void 0===R||null==R?ar(mt,"PRIVATE KEY"):ar(Xe=jt(mt,R),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==_&&void 0!==st&&b instanceof st&&1==b.isPrivate)return cn=new je({seq:[{int:1},{octstr:{hex:b.prvKeyHex}},{tag:["a1",!0,{bitstr:{hex:"00"+b.pubKeyHex}}]}]}).getEncodedHex(),mt=je({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:b.curveName}}]},{octstr:{hex:cn}}]}).getEncodedHex(),void 0===R||null==R?ar(mt,"PRIVATE KEY"):ar(Xe=jt(mt,R),"ENCRYPTED PRIVATE KEY");if("PKCS8PRV"==_&&void 0!==Ke&&b instanceof Ke&&1==b.isPrivate)return cn=new ke({bigint:b.x}).getEncodedHex(),mt=je({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:b.p}},{int:{bigint:b.q}},{int:{bigint:b.g}}]}]},{octstr:{hex:cn}}]}).getEncodedHex(),void 0===R||null==R?ar(mt,"PRIVATE KEY"):ar(Xe=jt(mt,R),"ENCRYPTED PRIVATE KEY");throw new Error("unsupported object nor format")},Ln.getKeyFromCSRPEM=function(b){var _=Tr(b,"CERTIFICATE REQUEST");return Ln.getKeyFromCSRHex(_)},Ln.getKeyFromCSRHex=function(b){var _=Ln.parseCSRHex(b);return Ln.getKey(_.p8pubkeyhex,null,"pkcs8pub")},Ln.parseCSRHex=function(b){var R=Ot.getChildIdx,T=Ot.getTLV,Z={},se=b;if("30"!=se.substr(0,2))throw"malformed CSR(code:001)";var ue=R(se,0);if(ue.length<1)throw"malformed CSR(code:002)";if("30"!=se.substr(ue[0],2))throw"malformed CSR(code:003)";var Se=R(se,ue[0]);if(Se.length<3)throw"malformed CSR(code:004)";return Z.p8pubkeyhex=T(se,Se[2]),Z},Ln.getKeyID=function(b){var _=Ln,R=Ot;"string"==typeof b&&-1!=b.indexOf("BEGIN ")&&(b=_.getKey(b));var T=Tr(_.getPEM(b)),Z=R.getIdxbyList(T,0,[1]),se=R.getV(T,Z).substring(2);return Pe.crypto.Util.hashHex(se,"sha1")},Ln.getJWKFromKey=function(b){var _={};if(b instanceof it&&b.isPrivate)return _.kty="RSA",_.n=Lt(b.n.toString(16)),_.e=Lt(b.e.toString(16)),_.d=Lt(b.d.toString(16)),_.p=Lt(b.p.toString(16)),_.q=Lt(b.q.toString(16)),_.dp=Lt(b.dmp1.toString(16)),_.dq=Lt(b.dmq1.toString(16)),_.qi=Lt(b.coeff.toString(16)),_;if(b instanceof it&&b.isPublic)return _.kty="RSA",_.n=Lt(b.n.toString(16)),_.e=Lt(b.e.toString(16)),_;if(b instanceof Pe.crypto.ECDSA&&b.isPrivate){if("P-256"!==(T=b.getShortNISTPCurveName())&&"P-384"!==T)throw"unsupported curve name for JWT: "+T;var R=b.getPublicKeyXYHex();return _.kty="EC",_.crv=T,_.x=Lt(R.x),_.y=Lt(R.y),_.d=Lt(b.prvKeyHex),_}if(b instanceof Pe.crypto.ECDSA&&b.isPublic){var T;if("P-256"!==(T=b.getShortNISTPCurveName())&&"P-384"!==T)throw"unsupported curve name for JWT: "+T;return R=b.getPublicKeyXYHex(),_.kty="EC",_.crv=T,_.x=Lt(R.x),_.y=Lt(R.y),_}throw"not supported key object"},it.getPosArrayOfChildrenFromHex=function(b){return Ot.getChildIdx(b,0)},it.getHexValueArrayOfChildrenFromHex=function(b){var _,R=Ot.getV,T=R(b,(_=it.getPosArrayOfChildrenFromHex(b))[0]),Z=R(b,_[1]),se=R(b,_[2]),ue=R(b,_[3]),Se=R(b,_[4]),Ce=R(b,_[5]),ke=R(b,_[6]),je=R(b,_[7]),Le=R(b,_[8]);return(_=new Array).push(T,Z,se,ue,Se,Ce,ke,je,Le),_},it.prototype.readPrivateKeyFromPEMString=function(b){var _=Tr(b),R=it.getHexValueArrayOfChildrenFromHex(_);this.setPrivateEx(R[1],R[2],R[3],R[4],R[5],R[6],R[7],R[8])},it.prototype.readPKCS5PrvKeyHex=function(b){var _=it.getHexValueArrayOfChildrenFromHex(b);this.setPrivateEx(_[1],_[2],_[3],_[4],_[5],_[6],_[7],_[8])},it.prototype.readPKCS8PrvKeyHex=function(b){var _,R,T,Z,se,ue,Se,Ce,je=Ot.getVbyListEx;if(!1===Ot.isASN1HEX(b))throw new Error("not ASN.1 hex string");try{_=je(b,0,[2,0,1],"02"),R=je(b,0,[2,0,2],"02"),T=je(b,0,[2,0,3],"02"),Z=je(b,0,[2,0,4],"02"),se=je(b,0,[2,0,5],"02"),ue=je(b,0,[2,0,6],"02"),Se=je(b,0,[2,0,7],"02"),Ce=je(b,0,[2,0,8],"02")}catch{throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(_,R,T,Z,se,ue,Se,Ce)},it.prototype.readPKCS5PubKeyHex=function(b){var _=Ot,R=_.getV;if(!1===_.isASN1HEX(b))throw new Error("keyHex is not ASN.1 hex string");var T=_.getChildIdx(b,0);if(2!==T.length||"02"!==b.substr(T[0],2)||"02"!==b.substr(T[1],2))throw new Error("wrong hex for PKCS#5 public key");var Z=R(b,T[0]),se=R(b,T[1]);this.setPublic(Z,se)},it.prototype.readPKCS8PubKeyHex=function(b){var _=Ot;if(!1===_.isASN1HEX(b))throw new Error("not ASN.1 hex string");if("06092a864886f70d010101"!==_.getTLVbyListEx(b,0,[0,0]))throw new Error("not PKCS8 RSA public key");var R=_.getTLVbyListEx(b,0,[1,0]);this.readPKCS5PubKeyHex(R)},it.prototype.readCertPubKeyHex=function(b,_){var R,T;(R=new En).readCertHex(b),T=R.getPublicKeyHex(),this.readPKCS8PubKeyHex(T)};var io=new RegExp("[^0-9a-f]","gi");function Xr(b,_){for(var R="",T=_/4-b.length,Z=0;Z<T;Z++)R+="0";return R+b}function ci(b,_,R){for(var T="",Z=0;T.length<_;)T+=Mn(R(fr(b+String.fromCharCode.apply(String,[(4278190080&Z)>>24,(16711680&Z)>>16,(65280&Z)>>8,255&Z])))),Z+=1;return T}function Gi(b){for(var _ in Pe.crypto.Util.DIGESTINFOHEAD){var R=Pe.crypto.Util.DIGESTINFOHEAD[_],T=R.length;if(b.substring(0,T)==R)return[_,b.substring(T)]}return[]}function En(b){var _,R=Ot,T=R.getChildIdx,Z=R.getV,se=R.getTLV,ue=R.getVbyList,Se=R.getVbyListEx,Ce=R.getTLVbyList,ke=R.getTLVbyListEx,je=R.getIdxbyList,Le=R.getIdxbyListEx,$e=R.getVidx,Ke=R.oidname,st=R.hextooidstr,pt=En,ht=Tr;try{_=Pe.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch{}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){return null===this.hex||0!==this.version?this.version:"a003020102"!==Ce(this.hex,0,[0,0])?(this.version=1,this.foffset=-1,1):(this.version=3,3)},this.getSerialNumberHex=function(){return Se(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var Ae=ke(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(Ae)},this.getAlgorithmIdentifierName=function(Ae){for(var Ve in _)if(Ae===_[Ve])return Ve;return Ke(Se(Ae,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return Ce(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return pt.hex2dn(this.getIssuerHex())},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return Ce(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return pt.hex2dn(this.getSubjectHex())},this.getNotBefore=function(){var Ae=ue(this.hex,0,[0,4+this.foffset,0]);return Ae=Ae.replace(/(..)/g,"%$1"),decodeURIComponent(Ae)},this.getNotAfter=function(){var Ae=ue(this.hex,0,[0,4+this.foffset,1]);return Ae=Ae.replace(/(..)/g,"%$1"),decodeURIComponent(Ae)},this.getPublicKeyHex=function(){return R.getTLVbyList(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyIdx=function(){return je(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var Ae=this.getPublicKeyIdx();return je(this.hex,Ae,[1,0],"30")},this.getPublicKey=function(){return Ln.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var Ae=Ce(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(Ae)},this.getSignatureValueHex=function(){return ue(this.hex,0,[2],"03",!0)},this.verifySignature=function(Ae){var Ve=this.getSignatureAlgorithmField(),He=this.getSignatureValueHex(),Xe=Ce(this.hex,0,[0],"30"),ut=new Pe.crypto.Signature({alg:Ve});return ut.init(Ae),ut.updateHex(Xe),ut.verify(He)},this.parseExt=function(Ae){var Ve,He,Xe;if(void 0===Ae){if(3!==this.version)return-1;Ve=je(Xe=this.hex,0,[0,7,0],"30"),He=T(Xe,Ve)}else{Xe=Tr(Ae);var ut=je(Xe,0,[0,3,0,0],"06");if("2a864886f70d01090e"!=Z(Xe,ut))return void(this.aExtInfo=new Array);Ve=je(Xe,0,[0,3,0,1,0],"30"),He=T(Xe,Ve),this.hex=Xe}this.aExtInfo=new Array;for(var mt=0;mt<He.length;mt++){var jt={critical:!1},Pt=0;3===T(Xe,He[mt]).length&&(jt.critical=!0,Pt=1),jt.oid=R.hextooidstr(ue(Xe,He[mt],[0],"06"));var cn=je(Xe,He[mt],[1+Pt]);jt.vidx=$e(Xe,cn),this.aExtInfo.push(jt)}},this.getExtInfo=function(Ae){var Ve=this.aExtInfo,He=Ae;if(Ae.match(/^[0-9.]+$/)||(He=Pe.asn1.x509.OID.name2oid(Ae)),""!==He)for(var Xe=0;Xe<Ve.length;Xe++)if(Ve[Xe].oid===He)return Ve[Xe]},this.getExtBasicConstraints=function(Ae,Ve){if(void 0===Ae&&void 0===Ve){var He=this.getExtInfo("basicConstraints");if(void 0===He)return;Ae=se(this.hex,He.vidx),Ve=He.critical}var Xe={extname:"basicConstraints"};if(Ve&&(Xe.critical=!0),"3000"===Ae)return Xe;if("30030101ff"===Ae)return Xe.cA=!0,Xe;if("30060101ff02"===Ae.substr(0,12)){var ut=Z(Ae,10),mt=parseInt(ut,16);return Xe.cA=!0,Xe.pathLen=mt,Xe}throw new Error("hExtV parse error: "+Ae)},this.getExtKeyUsage=function(Ae,Ve){if(void 0===Ae&&void 0===Ve){var He=this.getExtInfo("keyUsage");if(void 0===He)return;Ae=se(this.hex,He.vidx),Ve=He.critical}var Xe={extname:"keyUsage"};return Ve&&(Xe.critical=!0),Xe.names=this.getExtKeyUsageString(Ae).split(","),Xe},this.getExtKeyUsageBin=function(Ae){if(void 0===Ae){var Ve=this.getExtInfo("keyUsage");if(void 0===Ve)return"";Ae=se(this.hex,Ve.vidx)}if(8!=Ae.length&&10!=Ae.length)throw new Error("malformed key usage value: "+Ae);var He="000000000000000"+parseInt(Ae.substr(6),16).toString(2);return 8==Ae.length&&(He=He.slice(-8)),10==Ae.length&&(He=He.slice(-16)),""==(He=He.replace(/0+$/,""))&&(He="0"),He},this.getExtKeyUsageString=function(Ae){for(var Ve=this.getExtKeyUsageBin(Ae),He=new Array,Xe=0;Xe<Ve.length;Xe++)"1"==Ve.substr(Xe,1)&&He.push(En.KEYUSAGE_NAME[Xe]);return He.join(",")},this.getExtSubjectKeyIdentifier=function(Ae,Ve){if(void 0===Ae&&void 0===Ve){var He=this.getExtInfo("subjectKeyIdentifier");if(void 0===He)return;Ae=se(this.hex,He.vidx),Ve=He.critical}var Xe={extname:"subjectKeyIdentifier"};Ve&&(Xe.critical=!0);var ut=Z(Ae,0);return Xe.kid={hex:ut},Xe},this.getExtAuthorityKeyIdentifier=function(Ae,Ve){if(void 0===Ae&&void 0===Ve){var He=this.getExtInfo("authorityKeyIdentifier");if(void 0===He)return;Ae=se(this.hex,He.vidx),Ve=He.critical}var Xe={extname:"authorityKeyIdentifier"};Ve&&(Xe.critical=!0);for(var ut=T(Ae,0),mt=0;mt<ut.length;mt++){var jt=Ae.substr(ut[mt],2);if("80"===jt&&(Xe.kid={hex:Z(Ae,ut[mt])}),"a1"===jt){var Pt=se(Ae,ut[mt]),cn=this.getGeneralNames(Pt);Xe.issuer=cn[0].dn}"82"===jt&&(Xe.sn={hex:Z(Ae,ut[mt])})}return Xe},this.getExtExtKeyUsage=function(Ae,Ve){if(void 0===Ae&&void 0===Ve){var He=this.getExtInfo("extKeyUsage");if(void 0===He)return;Ae=se(this.hex,He.vidx),Ve=He.critical}var Xe={extname:"extKeyUsage",array:[]};Ve&&(Xe.critical=!0);for(var ut=T(Ae,0),mt=0;mt<ut.length;mt++)Xe.array.push(Ke(Z(Ae,ut[mt])));return Xe},this.getExtExtKeyUsageName=function(){var Ae=this.getExtInfo("extKeyUsage");if(void 0===Ae)return Ae;var Ve=new Array,He=se(this.hex,Ae.vidx);if(""===He)return Ve;for(var Xe=T(He,0),ut=0;ut<Xe.length;ut++)Ve.push(Ke(Z(He,Xe[ut])));return Ve},this.getExtSubjectAltName=function(Ae,Ve){if(void 0===Ae&&void 0===Ve){var He=this.getExtInfo("subjectAltName");if(void 0===He)return;Ae=se(this.hex,He.vidx),Ve=He.critical}var Xe={extname:"subjectAltName",array:[]};return Ve&&(Xe.critical=!0),Xe.array=this.getGeneralNames(Ae),Xe},this.getExtIssuerAltName=function(Ae,Ve){if(void 0===Ae&&void 0===Ve){var He=this.getExtInfo("issuerAltName");if(void 0===He)return;Ae=se(this.hex,He.vidx),Ve=He.critical}var Xe={extname:"issuerAltName",array:[]};return Ve&&(Xe.critical=!0),Xe.array=this.getGeneralNames(Ae),Xe},this.getGeneralNames=function(Ae){for(var Ve=T(Ae,0),He=[],Xe=0;Xe<Ve.length;Xe++){var ut=this.getGeneralName(se(Ae,Ve[Xe]));void 0!==ut&&He.push(ut)}return He},this.getGeneralName=function(Ae){var Ve=Ae.substr(0,2),He=Z(Ae,0),Xe=Mn(He);return"81"==Ve?{rfc822:Xe}:"82"==Ve?{dns:Xe}:"86"==Ve?{uri:Xe}:"87"==Ve?{ip:wo(He)}:"a4"==Ve?{dn:this.getX500Name(He)}:void 0},this.getExtSubjectAltName2=function(){var Ae,Ve,He,Xe=this.getExtInfo("subjectAltName");if(void 0===Xe)return Xe;for(var ut=new Array,mt=se(this.hex,Xe.vidx),jt=T(mt,0),Pt=0;Pt<jt.length;Pt++)He=mt.substr(jt[Pt],2),Ae=Z(mt,jt[Pt]),"81"===He&&(Ve=_n(Ae),ut.push(["MAIL",Ve])),"82"===He&&(Ve=_n(Ae),ut.push(["DNS",Ve])),"84"===He&&(Ve=En.hex2dn(Ae,0),ut.push(["DN",Ve])),"86"===He&&(Ve=_n(Ae),ut.push(["URI",Ve])),"87"===He&&(Ve=wo(Ae),ut.push(["IP",Ve]));return ut},this.getExtCRLDistributionPoints=function(Ae,Ve){if(void 0===Ae&&void 0===Ve){var He=this.getExtInfo("cRLDistributionPoints");if(void 0===He)return;Ae=se(this.hex,He.vidx),Ve=He.critical}var Xe={extname:"cRLDistributionPoints",array:[]};Ve&&(Xe.critical=!0);for(var ut=T(Ae,0),mt=0;mt<ut.length;mt++){var jt=se(Ae,ut[mt]);Xe.array.push(this.getDistributionPoint(jt))}return Xe},this.getDistributionPoint=function(Ae){for(var Ve={},He=T(Ae,0),Xe=0;Xe<He.length;Xe++){var ut=Ae.substr(He[Xe],2),mt=se(Ae,He[Xe]);"a0"==ut&&(Ve.dpname=this.getDistributionPointName(mt))}return Ve},this.getDistributionPointName=function(Ae){for(var Ve={},He=T(Ae,0),Xe=0;Xe<He.length;Xe++){var ut=Ae.substr(He[Xe],2),mt=se(Ae,He[Xe]);"a0"==ut&&(Ve.full=this.getGeneralNames(mt))}return Ve},this.getExtCRLDistributionPointsURI=function(){var Ae=this.getExtInfo("cRLDistributionPoints");if(void 0===Ae)return Ae;for(var Ve=new Array,He=T(this.hex,Ae.vidx),Xe=0;Xe<He.length;Xe++)try{var ut=_n(ue(this.hex,He[Xe],[0,0,0],"86"));Ve.push(ut)}catch{}return Ve},this.getExtAIAInfo=function(){var Ae=this.getExtInfo("authorityInfoAccess");if(void 0===Ae)return Ae;for(var Ve={ocsp:[],caissuer:[]},He=T(this.hex,Ae.vidx),Xe=0;Xe<He.length;Xe++){var ut=ue(this.hex,He[Xe],[0],"06"),mt=ue(this.hex,He[Xe],[1],"86");"2b06010505073001"===ut&&Ve.ocsp.push(_n(mt)),"2b06010505073002"===ut&&Ve.caissuer.push(_n(mt))}return Ve},this.getExtAuthorityInfoAccess=function(Ae,Ve){if(void 0===Ae&&void 0===Ve){var He=this.getExtInfo("authorityInfoAccess");if(void 0===He)return;Ae=se(this.hex,He.vidx),Ve=He.critical}var Xe={extname:"authorityInfoAccess",array:[]};Ve&&(Xe.critical=!0);for(var ut=T(Ae,0),mt=0;mt<ut.length;mt++){var jt=Se(Ae,ut[mt],[0],"06"),Pt=_n(ue(Ae,ut[mt],[1],"86"));if("2b06010505073001"==jt)Xe.array.push({ocsp:Pt});else{if("2b06010505073002"!=jt)throw new Error("unknown method: "+jt);Xe.array.push({caissuer:Pt})}}return Xe},this.getExtCertificatePolicies=function(Ae,Ve){if(void 0===Ae&&void 0===Ve){var He=this.getExtInfo("certificatePolicies");if(void 0===He)return;Ae=se(this.hex,He.vidx),Ve=He.critical}var Xe={extname:"certificatePolicies",array:[]};Ve&&(Xe.critical=!0);for(var ut=T(Ae,0),mt=0;mt<ut.length;mt++){var jt=se(Ae,ut[mt]),Pt=this.getPolicyInformation(jt);Xe.array.push(Pt)}return Xe},this.getPolicyInformation=function(Ae){var Ve={},He=ue(Ae,0,[0],"06");Ve.policyoid=Ke(He);var Xe=Le(Ae,0,[1],"30");if(-1!=Xe){Ve.array=[];for(var ut=T(Ae,Xe),mt=0;mt<ut.length;mt++){var jt=se(Ae,ut[mt]),Pt=this.getPolicyQualifierInfo(jt);Ve.array.push(Pt)}}return Ve},this.getPolicyQualifierInfo=function(Ae){var Ve={},He=ue(Ae,0,[0],"06");if("2b06010505070201"===He){var Xe=Se(Ae,0,[1],"16");Ve.cps=Mn(Xe)}else if("2b06010505070202"===He){var ut=Ce(Ae,0,[1],"30");Ve.unotice=this.getUserNotice(ut)}return Ve},this.getUserNotice=function(Ae){for(var Ve={},He=T(Ae,0),Xe=0;Xe<He.length;Xe++){var ut=se(Ae,He[Xe]);"30"!=ut.substr(0,2)&&(Ve.exptext=this.getDisplayText(ut))}return Ve},this.getDisplayText=function(Ae){var Ve={};return Ve.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[Ae.substr(0,2)],Ve.str=Mn(Z(Ae,0)),Ve},this.getExtCRLNumber=function(Ae,Ve){var He={extname:"cRLNumber"};if(Ve&&(He.critical=!0),"02"==Ae.substr(0,2))return He.num={hex:Z(Ae,0)},He;throw new Error("hExtV parse error: "+Ae)},this.getExtCRLReason=function(Ae,Ve){var He={extname:"cRLReason"};if(Ve&&(He.critical=!0),"0a"==Ae.substr(0,2))return He.code=parseInt(Z(Ae,0),16),He;throw new Error("hExtV parse error: "+Ae)},this.getExtOcspNonce=function(Ae,Ve){var He={extname:"ocspNonce"};Ve&&(He.critical=!0);var Xe=Z(Ae,0);return He.hex=Xe,He},this.getExtOcspNoCheck=function(Ae,Ve){var He={extname:"ocspNoCheck"};return Ve&&(He.critical=!0),He},this.getExtAdobeTimeStamp=function(Ae,Ve){if(void 0===Ae&&void 0===Ve){var He=this.getExtInfo("adobeTimeStamp");if(void 0===He)return;Ae=se(this.hex,He.vidx),Ve=He.critical}var Xe={extname:"adobeTimeStamp"};Ve&&(Xe.critical=!0);var ut=T(Ae,0);if(ut.length>1){var mt=se(Ae,ut[1]),jt=this.getGeneralName(mt);null!=jt.uri&&(Xe.uri=jt.uri)}if(ut.length>2){var Pt=se(Ae,ut[2]);"0101ff"==Pt&&(Xe.reqauth=!0),"010100"==Pt&&(Xe.reqauth=!1)}return Xe},this.getX500NameRule=function(Ae){for(var Ve=null,He=[],Xe=0;Xe<Ae.length;Xe++)for(var ut=Ae[Xe],mt=0;mt<ut.length;mt++)He.push(ut[mt]);for(Xe=0;Xe<He.length;Xe++){var jt=He[Xe],Pt=jt.ds,Mt=jt.type;if("prn"!=Pt&&"utf8"!=Pt&&"ia5"!=Pt)return"mixed";if("ia5"==Pt){if("CN"!=Mt)return"mixed";if(Pe.lang.String.isMail(jt.value))continue;return"mixed"}if("C"==Mt){if("prn"==Pt)continue;return"mixed"}if(null==Ve)Ve=Pt;else if(Ve!==Pt)return"mixed"}return Ve??"prn"},this.getX500Name=function(Ae){var Ve=this.getX500NameArray(Ae);return{array:Ve,str:this.dnarraytostr(Ve)}},this.getX500NameArray=function(Ae){for(var Ve=[],He=T(Ae,0),Xe=0;Xe<He.length;Xe++)Ve.push(this.getRDN(se(Ae,He[Xe])));return Ve},this.getRDN=function(Ae){for(var Ve=[],He=T(Ae,0),Xe=0;Xe<He.length;Xe++)Ve.push(this.getAttrTypeAndValue(se(Ae,He[Xe])));return Ve},this.getAttrTypeAndValue=function(Ae){var Ve={type:null,value:null,ds:null},He=T(Ae,0),Xe=ue(Ae,He[0],[],"06"),ut=ue(Ae,He[1],[]),mt=Pe.asn1.ASN1Util.oidHexToInt(Xe);return Ve.type=Pe.asn1.x509.OID.oid2atype(mt),Ve.value=Mn(ut),Ve.ds=this.HEX2STAG[Ae.substr(He[1],2)],Ve},this.readCertPEM=function(Ae){this.readCertHex(ht(Ae))},this.readCertHex=function(Ae){this.hex=Ae,this.getVersion();try{je(this.hex,0,[0,7],"a3"),this.parseExt()}catch{}},this.getParam=function(){var Ae={};return Ae.version=this.getVersion(),Ae.serial={hex:this.getSerialNumberHex()},Ae.sigalg=this.getSignatureAlgorithmField(),Ae.issuer=this.getIssuer(),Ae.notbefore=this.getNotBefore(),Ae.notafter=this.getNotAfter(),Ae.subject=this.getSubject(),Ae.sbjpubkey=ar(this.getPublicKeyHex(),"PUBLIC KEY"),this.aExtInfo.length>0&&(Ae.ext=this.getExtParamArray()),Ae.sighex=this.getSignatureValueHex(),Ae},this.getExtParamArray=function(Ae){null==Ae&&-1!=Le(this.hex,0,[0,"[3]"])&&(Ae=ke(this.hex,0,[0,"[3]",0],"30"));for(var Ve=[],He=T(Ae,0),Xe=0;Xe<He.length;Xe++){var ut=se(Ae,He[Xe]),mt=this.getExtParam(ut);null!=mt&&Ve.push(mt)}return Ve},this.getExtParam=function(Ae){var Ve=T(Ae,0).length;if(2!=Ve&&3!=Ve)throw new Error("wrong number elements in Extension: "+Ve+" "+Ae);var He=st(ue(Ae,0,[0],"06")),Xe=!1;3==Ve&&"0101ff"==Ce(Ae,0,[1])&&(Xe=!0);var ut=Ce(Ae,0,[Ve-1,0]),mt=void 0;if("2.5.29.14"==He?mt=this.getExtSubjectKeyIdentifier(ut,Xe):"2.5.29.15"==He?mt=this.getExtKeyUsage(ut,Xe):"2.5.29.17"==He?mt=this.getExtSubjectAltName(ut,Xe):"2.5.29.18"==He?mt=this.getExtIssuerAltName(ut,Xe):"2.5.29.19"==He?mt=this.getExtBasicConstraints(ut,Xe):"2.5.29.31"==He?mt=this.getExtCRLDistributionPoints(ut,Xe):"2.5.29.32"==He?mt=this.getExtCertificatePolicies(ut,Xe):"2.5.29.35"==He?mt=this.getExtAuthorityKeyIdentifier(ut,Xe):"2.5.29.37"==He?mt=this.getExtExtKeyUsage(ut,Xe):"1.3.6.1.5.5.7.1.1"==He?mt=this.getExtAuthorityInfoAccess(ut,Xe):"2.5.29.20"==He?mt=this.getExtCRLNumber(ut,Xe):"2.5.29.21"==He?mt=this.getExtCRLReason(ut,Xe):"1.3.6.1.5.5.7.48.1.2"==He?mt=this.getExtOcspNonce(ut,Xe):"1.3.6.1.5.5.7.48.1.5"==He?mt=this.getExtOcspNoCheck(ut,Xe):"1.2.840.113583.1.1.9.1"==He&&(mt=this.getExtAdobeTimeStamp(ut,Xe)),null!=mt)return mt;var jt={extname:He,extn:ut};return Xe&&(jt.critical=!0),jt},this.findExt=function(Ae,Ve){for(var He=0;He<Ae.length;He++)if(Ae[He].extname==Ve)return Ae[He];return null},this.updateExtCDPFullURI=function(Ae,Ve){var He=this.findExt(Ae,"cRLDistributionPoints");if(null!=He&&null!=He.array)for(var Xe=He.array,ut=0;ut<Xe.length;ut++)if(null!=Xe[ut].dpname&&null!=Xe[ut].dpname.full)for(var mt=Xe[ut].dpname.full,jt=0;jt<mt.length;jt++){var Pt=mt[ut];null!=Pt.uri&&(Pt.uri=Ve)}},this.updateExtAIAOCSP=function(Ae,Ve){var He=this.findExt(Ae,"authorityInfoAccess");if(null!=He&&null!=He.array)for(var Xe=He.array,ut=0;ut<Xe.length;ut++)null!=Xe[ut].ocsp&&(Xe[ut].ocsp=Ve)},this.updateExtAIACAIssuer=function(Ae,Ve){var He=this.findExt(Ae,"authorityInfoAccess");if(null!=He&&null!=He.array)for(var Xe=He.array,ut=0;ut<Xe.length;ut++)null!=Xe[ut].caissuer&&(Xe[ut].caissuer=Ve)},this.dnarraytostr=function(Ae){return"/"+Ae.map(function(Ve){return Ve.map(function(ut){return(jt=ut).type+"="+jt.value;var jt}).join("+")}).join("/")},this.getInfo=function(){var Ae,Ve,He,Mr,ut=function(Mr){for(var Rr="",pr=Mr.array,lr=0;lr<pr.length;lr++){var hr=pr[lr];if(Rr+="    policy oid: "+hr.policyoid+"\n",void 0!==hr.array)for(var ur=0;ur<hr.array.length;ur++){var Nr=hr.array[ur];void 0!==Nr.cps&&(Rr+="    cps: "+Nr.cps+"\n")}}return Rr},mt=function(Mr){for(var Rr="",pr=Mr.array,lr=0;lr<pr.length;lr++){var hr=pr[lr];try{void 0!==hr.dpname.full[0].uri&&(Rr+="    "+hr.dpname.full[0].uri+"\n")}catch{}try{void 0!==hr.dname.full[0].dn.hex&&(Rr+="    "+En.hex2dn(hr.dpname.full[0].dn.hex)+"\n")}catch{}}return Rr},jt=function(Mr){for(var Rr="",pr=Mr.array,lr=0;lr<pr.length;lr++){var hr=pr[lr];void 0!==hr.caissuer&&(Rr+="    caissuer: "+hr.caissuer+"\n"),void 0!==hr.ocsp&&(Rr+="    ocsp: "+hr.ocsp+"\n")}return Rr};if(Ae="Basic Fields\n",Ae+="  serial number: "+this.getSerialNumberHex()+"\n",Ae+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",Ae+="  issuer: "+this.getIssuerString()+"\n",Ae+="  notBefore: "+this.getNotBefore()+"\n",Ae+="  notAfter: "+this.getNotAfter()+"\n",Ae+="  subject: "+this.getSubjectString()+"\n",Ae+="  subject public key info: \n",Ae+="    key algorithm: "+(Ve=this.getPublicKey()).type+"\n","RSA"===Ve.type&&(Ae+="    n="+zi(Ve.n.toString(16)).substr(0,16)+"...\n",Ae+="    e="+zi(Ve.e.toString(16))+"\n"),null!=(He=this.aExtInfo)){Ae+="X509v3 Extensions:\n";for(var Pt=0;Pt<He.length;Pt++){var cn=He[Pt],Mt=Pe.asn1.x509.OID.oid2name(cn.oid);""===Mt&&(Mt=cn.oid);var Ut="";if(!0===cn.critical&&(Ut="CRITICAL"),Ae+="  "+Mt+" "+Ut+":\n","basicConstraints"===Mt){var On=this.getExtBasicConstraints();void 0===On.cA?Ae+="    {}\n":(Ae+="    cA=true",void 0!==On.pathLen&&(Ae+=", pathLen="+On.pathLen),Ae+="\n")}else if("keyUsage"===Mt)Ae+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===Mt)Ae+="    "+this.getExtSubjectKeyIdentifier().kid.hex+"\n";else if("authorityKeyIdentifier"===Mt){var Kn=this.getExtAuthorityKeyIdentifier();void 0!==Kn.kid&&(Ae+="    kid="+Kn.kid.hex+"\n")}else"extKeyUsage"===Mt?Ae+="    "+this.getExtExtKeyUsage().array.join(", ")+"\n":"subjectAltName"===Mt?Ae+="    "+(Mr=this.getExtSubjectAltName(),JSON.stringify(Mr.array).replace(/[\[\]\{\}\"]/g,"")+"\n"):"cRLDistributionPoints"===Mt?Ae+=mt(this.getExtCRLDistributionPoints()):"authorityInfoAccess"===Mt?Ae+=jt(this.getExtAuthorityInfoAccess()):"certificatePolicies"===Mt&&(Ae+=ut(this.getExtCertificatePolicies()))}}return(Ae+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n")+"signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"},"string"==typeof b&&(-1!=b.indexOf("-----BEGIN")?this.readCertPEM(b):Pe.lang.String.isHex(b)&&this.readCertHex(b))}it.prototype.sign=function(b,_){var R=function(Z){return Pe.crypto.Util.hashString(Z,_)}(b);return this.signWithMessageHash(R,_)},it.prototype.signWithMessageHash=function(b,_){var R=Me(Pe.crypto.Util.getPaddedDigestInfoHex(b,_,this.n.bitLength()),16);return Xr(this.doPrivate(R).toString(16),this.n.bitLength())},it.prototype.signPSS=function(b,_,R){var se,T=(se=fr(b),Pe.crypto.Util.hashHex(se,_));return void 0===R&&(R=-1),this.signWithMessageHashPSS(T,_,R)},it.prototype.signWithMessageHashPSS=function(b,_,R){var T,Z=Mn(b),se=Z.length,ue=this.n.bitLength()-1,Se=Math.ceil(ue/8),Ce=function(Ae){return Pe.crypto.Util.hashHex(Ae,_)};if(-1===R||void 0===R)R=se;else if(-2===R)R=Se-se-2;else if(R<-2)throw new Error("invalid salt length");if(Se<se+R+2)throw new Error("data too long");var ke="";R>0&&(ke=new Array(R),(new he).nextBytes(ke),ke=String.fromCharCode.apply(String,ke));var je=Mn(Ce(fr("\0\0\0\0\0\0\0\0"+Z+ke))),Le=[];for(T=0;T<Se-R-se-2;T+=1)Le[T]=0;var $e=String.fromCharCode.apply(String,Le)+"\x01"+ke,Ke=ci(je,$e.length,Ce),st=[];for(T=0;T<$e.length;T+=1)st[T]=$e.charCodeAt(T)^Ke.charCodeAt(T);for(st[0]&=~(65280>>8*Se-ue&255),T=0;T<se;T++)st.push(je.charCodeAt(T));return st.push(188),Xr(this.doPrivate(new pe(st)).toString(16),this.n.bitLength())},it.prototype.verify=function(b,_){var R=Me(_=(_=_.replace(io,"")).replace(/[ \n]+/g,""),16);if(R.bitLength()>this.n.bitLength())return 0;var T=Gi(this.doPublic(R).toString(16).replace(/^1f+00/,""));return 0!=T.length&&T[1]==Pe.crypto.Util.hashString(b,T[0])},it.prototype.verifyWithMessageHash=function(b,_){if(_.length!=Math.ceil(this.n.bitLength()/4))return!1;var R=Me(_,16);if(R.bitLength()>this.n.bitLength())return 0;var T=Gi(this.doPublic(R).toString(16).replace(/^1f+00/,""));return 0!=T.length&&T[1]==b},it.prototype.verifyPSS=function(b,_,R,T){var ue,Z=(ue=fr(b),Pe.crypto.Util.hashHex(ue,R));return void 0===T&&(T=-1),this.verifyWithMessageHashPSS(Z,_,R,T)},it.prototype.verifyWithMessageHashPSS=function(b,_,R,T){if(_.length!=Math.ceil(this.n.bitLength()/4))return!1;var Z,se=new pe(_,16),ue=function(He){return Pe.crypto.Util.hashHex(He,R)},Se=Mn(b),Ce=Se.length,ke=this.n.bitLength()-1,je=Math.ceil(ke/8);if(-1===T||void 0===T)T=Ce;else if(-2===T)T=je-Ce-2;else if(T<-2)throw new Error("invalid salt length");if(je<Ce+T+2)throw new Error("data too long");var Le=this.doPublic(se).toByteArray();for(Z=0;Z<Le.length;Z+=1)Le[Z]&=255;for(;Le.length<je;)Le.unshift(0);if(188!==Le[je-1])throw new Error("encoded message does not end in 0xbc");var $e=(Le=String.fromCharCode.apply(String,Le)).substr(0,je-Ce-1),Ke=Le.substr($e.length,Ce),st=65280>>8*je-ke&255;if(0!=($e.charCodeAt(0)&st))throw new Error("bits beyond keysize not zero");var pt=ci(Ke,$e.length,ue),ht=[];for(Z=0;Z<$e.length;Z+=1)ht[Z]=$e.charCodeAt(Z)^pt.charCodeAt(Z);ht[0]&=~st;var Ae=je-Ce-T-2;for(Z=0;Z<Ae;Z+=1)if(0!==ht[Z])throw new Error("leftmost octets not zero");if(1!==ht[Ae])throw new Error("0x01 marker not found");return Ke===Mn(ue(fr("\0\0\0\0\0\0\0\0"+Se+String.fromCharCode.apply(String,ht.slice(-T)))))},it.SALT_LEN_HLEN=-1,it.SALT_LEN_MAX=-2,it.SALT_LEN_RECOVER=-2,En.hex2dn=function(b,_){if(void 0===_&&(_=0),"30"!==b.substr(_,2))throw new Error("malformed DN");for(var R=new Array,T=Ot.getChildIdx(b,_),Z=0;Z<T.length;Z++)R.push(En.hex2rdn(b,T[Z]));return"/"+(R=R.map(function(se){return se.replace("/","\\/")})).join("/")},En.hex2rdn=function(b,_){if(void 0===_&&(_=0),"31"!==b.substr(_,2))throw new Error("malformed RDN");for(var R=new Array,T=Ot.getChildIdx(b,_),Z=0;Z<T.length;Z++)R.push(En.hex2attrTypeValue(b,T[Z]));return(R=R.map(function(se){return se.replace("+","\\+")})).join("+")},En.hex2attrTypeValue=function(b,_){var R=Ot,T=R.getV;if(void 0===_&&(_=0),"30"!==b.substr(_,2))throw new Error("malformed attribute type and value");var Z=R.getChildIdx(b,_);2!==Z.length||b.substr(Z[0],2);var se=T(b,Z[0]),ue=Pe.asn1.ASN1Util.oidHexToInt(se);return Pe.asn1.x509.OID.oid2atype(ue)+"="+Mn(T(b,Z[1]))},En.getPublicKeyFromCertHex=function(b){var _=new En;return _.readCertHex(b),_.getPublicKey()},En.getPublicKeyFromCertPEM=function(b){var _=new En;return _.readCertPEM(b),_.getPublicKey()},En.getPublicKeyInfoPropOfCertPEM=function(b){var _,R,T=Ot.getVbyList,Z={algparam:null};return(_=new En).readCertPEM(b),R=_.getPublicKeyHex(),Z.keyhex=T(R,0,[1],"03").substr(2),Z.algoid=T(R,0,[0,0],"06"),"2a8648ce3d0201"===Z.algoid&&(Z.algparam=T(R,0,[0,1],"06")),Z},En.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"],void 0!==Pe&&Pe||(x.KJUR=Pe={}),void 0!==Pe.jws&&Pe.jws||(Pe.jws={}),Pe.jws.JWS=function(){var b=Pe.jws.JWS.isSafeJSONString;this.parseJWS=function(_,R){if(void 0===this.parsedJWS||!R&&void 0===this.parsedJWS.sigvalH){var T=_.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==T)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var Z=T[1],se=T[2],ue=T[3],Se=Z+"."+se;if(this.parsedJWS={},this.parsedJWS.headB64U=Z,this.parsedJWS.payloadB64U=se,this.parsedJWS.sigvalB64U=ue,this.parsedJWS.si=Se,!R){var Ce=gn(ue),ke=Me(Ce,16);this.parsedJWS.sigvalH=Ce,this.parsedJWS.sigvalBI=ke}var je=Wt(Z),Le=Wt(se);if(this.parsedJWS.headS=je,this.parsedJWS.payloadS=Le,!b(je,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+je}}},Pe.jws.JWS.sign=function(b,_,R,T,Z){var se,ue,Se,ke=Pe.jws.JWS,je=ke.readSafeJSONString,Le=ke.isSafeJSONString,$e=Pe.crypto,Ke=$e.Mac,st=$e.Signature,pt=JSON;if("string"!=typeof _&&"object"!=(void 0===_?"undefined":C(_)))throw"spHeader must be JSON string or object: "+_;if("object"==(void 0===_?"undefined":C(_))&&(se=pt.stringify(ue=_)),"string"==typeof _){if(!Le(se=_))throw"JWS Head is not safe JSON string: "+se;ue=je(se)}if(Se=R,"object"==(void 0===R?"undefined":C(R))&&(Se=pt.stringify(R)),""!=b&&null!=b||void 0===ue.alg||(b=ue.alg),""!=b&&null!=b&&void 0===ue.alg&&(ue.alg=b,se=pt.stringify(ue)),b!==ue.alg)throw"alg and sHeader.alg doesn't match: "+b+"!="+ue.alg;var ht=null;if(void 0===ke.jwsalg2sigalg[b])throw"unsupported alg name: "+b;ht=ke.jwsalg2sigalg[b];var Ae=Dn(se)+"."+Dn(Se),Ve="";if("Hmac"==ht.substr(0,4)){if(void 0===T)throw"mac key shall be specified for HS* alg";var He=new Ke({alg:ht,prov:"cryptojs",pass:T});He.updateString(Ae),Ve=He.doFinal()}else if(-1!=ht.indexOf("withECDSA")){(ut=new st({alg:ht})).init(T,Z),ut.updateString(Ae);var Xe=ut.sign();Ve=Pe.crypto.ECDSA.asn1SigToConcatSig(Xe)}else{var ut;"none"!=ht&&((ut=new st({alg:ht})).init(T,Z),ut.updateString(Ae),Ve=ut.sign())}return Ae+"."+Lt(Ve)},Pe.jws.JWS.verify=function(b,_,R){var T,se=Pe.jws.JWS,ue=se.readSafeJSONString,Se=Pe.crypto,Ce=Se.ECDSA,ke=Se.Mac,je=Se.Signature;void 0!==C(it)&&(T=it);var Le=b.split(".");if(3!==Le.length)return!1;var ht,$e=Le[0]+"."+Le[1],Ke=gn(Le[2]),st=ue(Wt(Le[0])),pt=null;if(void 0===st.alg)throw"algorithm not specified in header";if(ht=(pt=st.alg).substr(0,2),null!=R&&"[object Array]"===Object.prototype.toString.call(R)&&R.length>0&&-1==(":"+R.join(":")+":").indexOf(":"+pt+":"))throw"algorithm '"+pt+"' not accepted in the list";if("none"!=pt&&null===_)throw"key shall be specified to verify.";if("string"==typeof _&&-1!=_.indexOf("-----BEGIN ")&&(_=Ln.getKey(_)),!("RS"!=ht&&"PS"!=ht||_ instanceof T))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==ht&&!(_ instanceof Ce))throw"key shall be a ECDSA obj for ES* algs";var Ae=null;if(void 0===se.jwsalg2sigalg[st.alg])throw"unsupported alg name: "+pt;if("none"==(Ae=se.jwsalg2sigalg[pt]))throw"not supported";if("Hmac"==Ae.substr(0,4)){if(void 0===_)throw"hexadecimal key shall be specified for HMAC";var Ve=new ke({alg:Ae,pass:_});return Ve.updateString($e),Ke==Ve.doFinal()}if(-1!=Ae.indexOf("withECDSA")){var He,Xe=null;try{Xe=Ce.concatSigToASN1Sig(Ke)}catch{return!1}return(He=new je({alg:Ae})).init(_),He.updateString($e),He.verify(Xe)}return(He=new je({alg:Ae})).init(_),He.updateString($e),He.verify(Ke)},Pe.jws.JWS.parse=function(b){var R,T,Z=b.split("."),se={};if(2!=Z.length&&3!=Z.length)throw"malformed sJWS: wrong number of '.' splitted elements";return R=Z[1],3==Z.length&&(T=Z[2]),se.headerObj=Pe.jws.JWS.readSafeJSONString(Wt(Z[0])),se.payloadObj=Pe.jws.JWS.readSafeJSONString(Wt(R)),se.headerPP=JSON.stringify(se.headerObj,null,"  "),se.payloadPP=null==se.payloadObj?Wt(R):JSON.stringify(se.payloadObj,null,"  "),void 0!==T&&(se.sigHex=gn(T)),se},Pe.jws.JWS.verifyJWT=function(b,_,R){var T=Pe.jws,Z=T.JWS,se=Z.readSafeJSONString,ue=Z.inArray,Se=Z.includedArray,Ce=b.split("."),ke=Ce[0],je=Ce[1],Le=(gn(Ce[2]),se(Wt(ke))),$e=se(Wt(je));if(void 0===Le.alg)return!1;if(void 0===R.alg)throw"acceptField.alg shall be specified";if(!ue(Le.alg,R.alg)||void 0!==$e.iss&&"object"===C(R.iss)&&!ue($e.iss,R.iss)||void 0!==$e.sub&&"object"===C(R.sub)&&!ue($e.sub,R.sub))return!1;if(void 0!==$e.aud&&"object"===C(R.aud))if("string"==typeof $e.aud){if(!ue($e.aud,R.aud))return!1}else if("object"==C($e.aud)&&!Se($e.aud,R.aud))return!1;var Ke=T.IntDate.getNow();return void 0!==R.verifyAt&&"number"==typeof R.verifyAt&&(Ke=R.verifyAt),void 0!==R.gracePeriod&&"number"==typeof R.gracePeriod||(R.gracePeriod=0),!(void 0!==$e.exp&&"number"==typeof $e.exp&&$e.exp+R.gracePeriod<Ke||void 0!==$e.nbf&&"number"==typeof $e.nbf&&Ke<$e.nbf-R.gracePeriod||void 0!==$e.iat&&"number"==typeof $e.iat&&Ke<$e.iat-R.gracePeriod||void 0!==$e.jti&&void 0!==R.jti&&$e.jti!==R.jti||!Z.verify(b,_,R.alg))},Pe.jws.JWS.includedArray=function(b,_){var R=Pe.jws.JWS.inArray;if(null===b||"object"!==(void 0===b?"undefined":C(b))||"number"!=typeof b.length)return!1;for(var T=0;T<b.length;T++)if(!R(b[T],_))return!1;return!0},Pe.jws.JWS.inArray=function(b,_){if(null===_||"object"!==(void 0===_?"undefined":C(_))||"number"!=typeof _.length)return!1;for(var R=0;R<_.length;R++)if(_[R]==b)return!0;return!1},Pe.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},Pe.jws.JWS.isSafeJSONString=function(b,_,R){var T=null;try{return"object"!=(void 0===(T=Xt(b))?"undefined":C(T))||T.constructor===Array?0:(_&&(_[R]=T),1)}catch{return 0}},Pe.jws.JWS.readSafeJSONString=function(b){var _=null;try{return"object"!=(void 0===(_=Xt(b))?"undefined":C(_))||_.constructor===Array?null:_}catch{return null}},Pe.jws.JWS.getEncodedSignatureValueFromJWS=function(b){var _=b.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==_)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return _[1]},Pe.jws.JWS.getJWKthumbprint=function(b){if("RSA"!==b.kty&&"EC"!==b.kty&&"oct"!==b.kty)throw"unsupported algorithm for JWK Thumprint";var _="{";if("RSA"===b.kty){if("string"!=typeof b.n||"string"!=typeof b.e)throw"wrong n and e value for RSA key";_+='"e":"'+b.e+'",',_+='"kty":"'+b.kty+'",',_+='"n":"'+b.n+'"}'}else if("EC"===b.kty){if("string"!=typeof b.crv||"string"!=typeof b.x||"string"!=typeof b.y)throw"wrong crv, x and y value for EC key";_+='"crv":"'+b.crv+'",',_+='"kty":"'+b.kty+'",',_+='"x":"'+b.x+'",',_+='"y":"'+b.y+'"}'}else if("oct"===b.kty){if("string"!=typeof b.k)throw"wrong k value for oct(symmetric) key";_+='"kty":"'+b.kty+'",',_+='"k":"'+b.k+'"}'}var R=fr(_);return Lt(Pe.crypto.Util.hashHex(R,"sha256"))},Pe.jws.IntDate={},Pe.jws.IntDate.get=function(b){var _=Pe.jws.IntDate,R=_.getNow,T=_.getZulu;if("now"==b)return R();if("now + 1hour"==b)return R()+3600;if("now + 1day"==b)return R()+86400;if("now + 1month"==b)return R()+2592e3;if("now + 1year"==b)return R()+31536e3;if(b.match(/Z$/))return T(b);if(b.match(/^[0-9]+$/))return parseInt(b);throw"unsupported format: "+b},Pe.jws.IntDate.getZulu=function(b){return no(b)},Pe.jws.IntDate.getNow=function(){return~~(new Date/1e3)},Pe.jws.IntDate.intDate2UTCString=function(b){return new Date(1e3*b).toUTCString()},Pe.jws.IntDate.intDate2Zulu=function(b){var _=new Date(1e3*b);return("0000"+_.getUTCFullYear()).slice(-4)+("00"+(_.getUTCMonth()+1)).slice(-2)+("00"+_.getUTCDate()).slice(-2)+("00"+_.getUTCHours()).slice(-2)+("00"+_.getUTCMinutes()).slice(-2)+("00"+_.getUTCSeconds()).slice(-2)+"Z"},x.SecureRandom=he,x.rng_seed_time=me,x.BigInteger=pe,x.RSAKey=it,x.EDSA=Pe.crypto.EDSA,x.DSA=Pe.crypto.DSA,x.Signature=Pe.crypto.Signature,x.MessageDigest=Pe.crypto.MessageDigest,x.Mac=Pe.crypto.Mac,x.Cipher=Pe.crypto.Cipher,x.KEYUTIL=Ln,x.ASN1HEX=Ot,x.X509=En,x.CryptoJS=B,x.b64tohex=ge,x.b64toBA=_e,x.stoBA=wn,x.BAtos=ct,x.BAtohex=vt,x.stohex=sn,x.stob64=function(_){return ee(sn(_))},x.stob64u=function(_){return mn(ee(sn(_)))},x.b64utos=function(_){return ct(_e(kn(_)))},x.b64tob64u=mn,x.b64utob64=kn,x.hex2b64=ee,x.hextob64u=Lt,x.b64utohex=gn,x.utf8tob64u=Dn,x.b64utoutf8=Wt,x.utf8tob64=function(_){return ee(Li(Ur(_)))},x.b64toutf8=function(_){return decodeURIComponent(mi(ge(_)))},x.utf8tohex=Sr,x.hextoutf8=_n,x.hextorstr=Mn,x.rstrtohex=fr,x.hextob64=Kr,x.hextob64nl=Nn,x.b64nltohex=Ir,x.hextopem=ar,x.pemtohex=Tr,x.hextoArrayBuffer=function(_){if(_.length%2!=0)throw"input is not even length";if(null==_.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var R=new ArrayBuffer(_.length/2),T=new DataView(R),Z=0;Z<_.length/2;Z++)T.setUint8(Z,parseInt(_.substr(2*Z,2),16));return R},x.ArrayBuffertohex=function(_){for(var R="",T=new DataView(_),Z=0;Z<_.byteLength;Z++)R+=("00"+T.getUint8(Z).toString(16)).slice(-2);return R},x.zulutomsec=li,x.zulutosec=no,x.zulutodate=function(_){return new Date(li(_))},x.datetozulu=function(_,R,T){var Z,se=_.getUTCFullYear();if(R){if(se<1950||2049<se)throw"not proper year for UTCTime: "+se;Z=(""+se).slice(-2)}else Z=("000"+se).slice(-4);if(Z+=("0"+(_.getUTCMonth()+1)).slice(-2),Z+=("0"+_.getUTCDate()).slice(-2),Z+=("0"+_.getUTCHours()).slice(-2),Z+=("0"+_.getUTCMinutes()).slice(-2),Z+=("0"+_.getUTCSeconds()).slice(-2),T){var ue=_.getUTCMilliseconds();0!==ue&&(Z+="."+(ue=(ue=("00"+ue).slice(-3)).replace(/0+$/g,"")))}return Z+"Z"},x.uricmptohex=Li,x.hextouricmp=mi,x.ipv6tohex=ui,x.hextoipv6=Pi,x.hextoip=wo,x.iptohex=function(_){var R="malformed IP address";if(!(_=_.toLowerCase(_)).match(/^[0-9.]+$/)){if(_.match(/^[0-9a-f:]+$/)&&-1!==_.indexOf(":"))return ui(_);throw R}var T=_.split(".");if(4!==T.length)throw R;var Z="";try{for(var se=0;se<4;se++)Z+=("0"+parseInt(T[se]).toString(16)).slice(-2);return Z}catch{throw R}},x.encodeURIComponentAll=Ur,x.newline_toUnix=function(_){return _.replace(/\r\n/gm,"\n")},x.newline_toDos=function(_){return(_=_.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},x.hextoposhex=zi,x.intarystrtohex=function(_){_=(_=(_=_.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return _.split(/,/).map(function(R,T,Z){var se=parseInt(R);if(se<0||255<se)throw"integer not in range 0-255";return("00"+se.toString(16)).slice(-2)}).join("")}catch(R){throw"malformed integer array string: "+R}},x.strdiffidx=function(_,R){var T=_.length;_.length>R.length&&(T=R.length);for(var Z=0;Z<T;Z++)if(_.charCodeAt(Z)!=R.charCodeAt(Z))return Z;return _.length!=R.length?T:-1},x.KJUR=Pe,x.crypto=Pe.crypto,x.asn1=Pe.asn1,x.jws=Pe.jws,x.lang=Pe.lang}).call(this,I(28).Buffer)},function(O,x,I){"use strict";(function(o){var C=I(30),F=I(31),j=I(32);function d(){return v.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function m(de,te){if(d()<te)throw new RangeError("Invalid typed array length");return v.TYPED_ARRAY_SUPPORT?(de=new Uint8Array(te)).__proto__=v.prototype:(null===de&&(de=new v(te)),de.length=te),de}function v(de,te,ae){if(!(v.TYPED_ARRAY_SUPPORT||this instanceof v))return new v(de,te,ae);if("number"==typeof de){if("string"==typeof te)throw new Error("If encoding is specified then the first argument must be a string");return L(this,de)}return N(this,de,te,ae)}function N(de,te,ae,Te){if("number"==typeof te)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&te instanceof ArrayBuffer?function(ce,me,rt,ye){if(rt<0||me.byteLength<rt)throw new RangeError("'offset' is out of bounds");if(me.byteLength<rt+(ye||0))throw new RangeError("'length' is out of bounds");return me=void 0===rt&&void 0===ye?new Uint8Array(me):void 0===ye?new Uint8Array(me,rt):new Uint8Array(me,rt,ye),v.TYPED_ARRAY_SUPPORT?(ce=me).__proto__=v.prototype:ce=X(ce,me),ce}(de,te,ae,Te):"string"==typeof te?function(ce,me,rt){if("string"==typeof rt&&""!==rt||(rt="utf8"),!v.isEncoding(rt))throw new TypeError('"encoding" must be a valid string encoding');var ye=0|Q(me,rt),$=(ce=m(ce,ye)).write(me,rt);return $!==ye&&(ce=ce.slice(0,$)),ce}(de,te,ae):function(ce,me){if(v.isBuffer(me)){var rt=0|H(me.length);return 0===(ce=m(ce,rt)).length||me.copy(ce,0,0,rt),ce}if(me){if("undefined"!=typeof ArrayBuffer&&me.buffer instanceof ArrayBuffer||"length"in me)return"number"!=typeof me.length||($=me.length)!=$?m(ce,0):X(ce,me);if("Buffer"===me.type&&j(me.data))return X(ce,me.data)}var $;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(de,te)}function M(de){if("number"!=typeof de)throw new TypeError('"size" argument must be a number');if(de<0)throw new RangeError('"size" argument must not be negative')}function L(de,te){if(M(te),de=m(de,te<0?0:0|H(te)),!v.TYPED_ARRAY_SUPPORT)for(var ae=0;ae<te;++ae)de[ae]=0;return de}function X(de,te){var ae=te.length<0?0:0|H(te.length);de=m(de,ae);for(var Te=0;Te<ae;Te+=1)de[Te]=255&te[Te];return de}function H(de){if(de>=d())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d().toString(16)+" bytes");return 0|de}function Q(de,te){if(v.isBuffer(de))return de.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(de)||de instanceof ArrayBuffer))return de.byteLength;"string"!=typeof de&&(de=""+de);var ae=de.length;if(0===ae)return 0;for(var Te=!1;;)switch(te){case"ascii":case"latin1":case"binary":return ae;case"utf8":case"utf-8":case void 0:return Ze(de).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ae;case"hex":return ae>>>1;case"base64":return Ue(de).length;default:if(Te)return Ze(de).length;te=(""+te).toLowerCase(),Te=!0}}function q(de,te,ae){var Te=!1;if((void 0===te||te<0)&&(te=0),te>this.length||((void 0===ae||ae>this.length)&&(ae=this.length),ae<=0)||(ae>>>=0)<=(te>>>=0))return"";for(de||(de="utf8");;)switch(de){case"hex":return P(this,te,ae);case"utf8":case"utf-8":return A(this,te,ae);case"ascii":return E(this,te,ae);case"latin1":case"binary":return D(this,te,ae);case"base64":return g(this,te,ae);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,te,ae);default:if(Te)throw new TypeError("Unknown encoding: "+de);de=(de+"").toLowerCase(),Te=!0}}function Y(de,te,ae){var Te=de[te];de[te]=de[ae],de[ae]=Te}function le(de,te,ae,Te,ze){if(0===de.length)return-1;if("string"==typeof ae?(Te=ae,ae=0):ae>2147483647?ae=2147483647:ae<-2147483648&&(ae=-2147483648),ae=+ae,isNaN(ae)&&(ae=ze?0:de.length-1),ae<0&&(ae=de.length+ae),ae>=de.length){if(ze)return-1;ae=de.length-1}else if(ae<0){if(!ze)return-1;ae=0}if("string"==typeof te&&(te=v.from(te,Te)),v.isBuffer(te))return 0===te.length?-1:B(de,te,ae,Te,ze);if("number"==typeof te)return te&=255,v.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?ze?Uint8Array.prototype.indexOf.call(de,te,ae):Uint8Array.prototype.lastIndexOf.call(de,te,ae):B(de,[te],ae,Te,ze);throw new TypeError("val must be string, number or Buffer")}function B(de,te,ae,Te,ze){var ce,me=1,rt=de.length,ye=te.length;if(void 0!==Te&&("ucs2"===(Te=String(Te).toLowerCase())||"ucs-2"===Te||"utf16le"===Te||"utf-16le"===Te)){if(de.length<2||te.length<2)return-1;me=2,rt/=2,ye/=2,ae/=2}function $(Me,Ye){return 1===me?Me[Ye]:Me.readUInt16BE(Ye*me)}if(ze){var k=-1;for(ce=ae;ce<rt;ce++)if($(de,ce)===$(te,-1===k?0:ce-k)){if(-1===k&&(k=ce),ce-k+1===ye)return k*me}else-1!==k&&(ce-=ce-k),k=-1}else for(ae+ye>rt&&(ae=rt-ye),ce=ae;ce>=0;ce--){for(var K=!0,he=0;he<ye;he++)if($(de,ce+he)!==$(te,he)){K=!1;break}if(K)return ce}return-1}function z(de,te,ae,Te){ae=Number(ae)||0;var ze=de.length-ae;Te?(Te=Number(Te))>ze&&(Te=ze):Te=ze;var ce=te.length;if(ce%2!=0)throw new TypeError("Invalid hex string");Te>ce/2&&(Te=ce/2);for(var me=0;me<Te;++me){var rt=parseInt(te.substr(2*me,2),16);if(isNaN(rt))return me;de[ae+me]=rt}return me}function U(de,te,ae,Te){return nt(Ze(te,de.length-ae),de,ae,Te)}function ee(de,te,ae,Te){return nt(function(ce){for(var me=[],rt=0;rt<ce.length;++rt)me.push(255&ce.charCodeAt(rt));return me}(te),de,ae,Te)}function ge(de,te,ae,Te){return ee(de,te,ae,Te)}function _e(de,te,ae,Te){return nt(Ue(te),de,ae,Te)}function pe(de,te,ae,Te){return nt(function(ce,me){for(var rt,ye,k=[],K=0;K<ce.length&&!((me-=2)<0);++K)ye=(rt=ce.charCodeAt(K))>>8,k.push(rt%256),k.push(ye);return k}(te,de.length-ae),de,ae,Te)}function g(de,te,ae){return C.fromByteArray(0===te&&ae===de.length?de:de.slice(te,ae))}function A(de,te,ae){ae=Math.min(de.length,ae);for(var Te=[],ze=te;ze<ae;){var ce,me,rt,ye,$=de[ze],k=null,K=$>239?4:$>223?3:$>191?2:1;if(ze+K<=ae)switch(K){case 1:$<128&&(k=$);break;case 2:128==(192&(ce=de[ze+1]))&&(ye=(31&$)<<6|63&ce)>127&&(k=ye);break;case 3:me=de[ze+2],128==(192&(ce=de[ze+1]))&&128==(192&me)&&(ye=(15&$)<<12|(63&ce)<<6|63&me)>2047&&(ye<55296||ye>57343)&&(k=ye);break;case 4:me=de[ze+2],rt=de[ze+3],128==(192&(ce=de[ze+1]))&&128==(192&me)&&128==(192&rt)&&(ye=(15&$)<<18|(63&ce)<<12|(63&me)<<6|63&rt)>65535&&ye<1114112&&(k=ye)}null===k?(k=65533,K=1):k>65535&&(Te.push((k-=65536)>>>10&1023|55296),k=56320|1023&k),Te.push(k),ze+=K}return function(Me){var Ye=Me.length;if(Ye<=y)return String.fromCharCode.apply(String,Me);for(var it="",It=0;It<Ye;)it+=String.fromCharCode.apply(String,Me.slice(It,It+=y));return it}(Te)}x.Buffer=v,x.SlowBuffer=function(te){return+te!=te&&(te=0),v.alloc(+te)},x.INSPECT_MAX_BYTES=50,v.TYPED_ARRAY_SUPPORT=void 0!==o.TYPED_ARRAY_SUPPORT?o.TYPED_ARRAY_SUPPORT:function(){try{var te=new Uint8Array(1);return te.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===te.foo()&&"function"==typeof te.subarray&&0===te.subarray(1,1).byteLength}catch{return!1}}(),x.kMaxLength=d(),v.poolSize=8192,v._augment=function(de){return de.__proto__=v.prototype,de},v.from=function(de,te,ae){return N(null,de,te,ae)},v.TYPED_ARRAY_SUPPORT&&(v.prototype.__proto__=Uint8Array.prototype,v.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&v[Symbol.species]===v&&Object.defineProperty(v,Symbol.species,{value:null,configurable:!0})),v.alloc=function(de,te,ae){return null,me=te,rt=ae,M(ce=de),ce<=0?m(null,ce):void 0!==me?"string"==typeof rt?m(null,ce).fill(me,rt):m(null,ce).fill(me):m(null,ce);var ce,me,rt},v.allocUnsafe=function(de){return L(null,de)},v.allocUnsafeSlow=function(de){return L(null,de)},v.isBuffer=function(te){return!(null==te||!te._isBuffer)},v.compare=function(te,ae){if(!v.isBuffer(te)||!v.isBuffer(ae))throw new TypeError("Arguments must be Buffers");if(te===ae)return 0;for(var Te=te.length,ze=ae.length,ce=0,me=Math.min(Te,ze);ce<me;++ce)if(te[ce]!==ae[ce]){Te=te[ce],ze=ae[ce];break}return Te<ze?-1:ze<Te?1:0},v.isEncoding=function(te){switch(String(te).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},v.concat=function(te,ae){if(!j(te))throw new TypeError('"list" argument must be an Array of Buffers');if(0===te.length)return v.alloc(0);var Te;if(void 0===ae)for(ae=0,Te=0;Te<te.length;++Te)ae+=te[Te].length;var ze=v.allocUnsafe(ae),ce=0;for(Te=0;Te<te.length;++Te){var me=te[Te];if(!v.isBuffer(me))throw new TypeError('"list" argument must be an Array of Buffers');me.copy(ze,ce),ce+=me.length}return ze},v.byteLength=Q,v.prototype._isBuffer=!0,v.prototype.swap16=function(){var te=this.length;if(te%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ae=0;ae<te;ae+=2)Y(this,ae,ae+1);return this},v.prototype.swap32=function(){var te=this.length;if(te%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ae=0;ae<te;ae+=4)Y(this,ae,ae+3),Y(this,ae+1,ae+2);return this},v.prototype.swap64=function(){var te=this.length;if(te%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ae=0;ae<te;ae+=8)Y(this,ae,ae+7),Y(this,ae+1,ae+6),Y(this,ae+2,ae+5),Y(this,ae+3,ae+4);return this},v.prototype.toString=function(){var te=0|this.length;return 0===te?"":0===arguments.length?A(this,0,te):q.apply(this,arguments)},v.prototype.equals=function(te){if(!v.isBuffer(te))throw new TypeError("Argument must be a Buffer");return this===te||0===v.compare(this,te)},v.prototype.inspect=function(){var te="",ae=x.INSPECT_MAX_BYTES;return this.length>0&&(te=this.toString("hex",0,ae).match(/.{2}/g).join(" "),this.length>ae&&(te+=" ... ")),"<Buffer "+te+">"},v.prototype.compare=function(te,ae,Te,ze,ce){if(!v.isBuffer(te))throw new TypeError("Argument must be a Buffer");if(void 0===ae&&(ae=0),void 0===Te&&(Te=te?te.length:0),void 0===ze&&(ze=0),void 0===ce&&(ce=this.length),ae<0||Te>te.length||ze<0||ce>this.length)throw new RangeError("out of range index");if(ze>=ce&&ae>=Te)return 0;if(ze>=ce)return-1;if(ae>=Te)return 1;if(this===te)return 0;for(var me=(ce>>>=0)-(ze>>>=0),rt=(Te>>>=0)-(ae>>>=0),ye=Math.min(me,rt),$=this.slice(ze,ce),k=te.slice(ae,Te),K=0;K<ye;++K)if($[K]!==k[K]){me=$[K],rt=k[K];break}return me<rt?-1:rt<me?1:0},v.prototype.includes=function(te,ae,Te){return-1!==this.indexOf(te,ae,Te)},v.prototype.indexOf=function(te,ae,Te){return le(this,te,ae,Te,!0)},v.prototype.lastIndexOf=function(te,ae,Te){return le(this,te,ae,Te,!1)},v.prototype.write=function(te,ae,Te,ze){if(void 0===ae)ze="utf8",Te=this.length,ae=0;else if(void 0===Te&&"string"==typeof ae)ze=ae,Te=this.length,ae=0;else{if(!isFinite(ae))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ae|=0,isFinite(Te)?(Te|=0,void 0===ze&&(ze="utf8")):(ze=Te,Te=void 0)}var ce=this.length-ae;if((void 0===Te||Te>ce)&&(Te=ce),te.length>0&&(Te<0||ae<0)||ae>this.length)throw new RangeError("Attempt to write outside buffer bounds");ze||(ze="utf8");for(var me=!1;;)switch(ze){case"hex":return z(this,te,ae,Te);case"utf8":case"utf-8":return U(this,te,ae,Te);case"ascii":return ee(this,te,ae,Te);case"latin1":case"binary":return ge(this,te,ae,Te);case"base64":return _e(this,te,ae,Te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return pe(this,te,ae,Te);default:if(me)throw new TypeError("Unknown encoding: "+ze);ze=(""+ze).toLowerCase(),me=!0}},v.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var y=4096;function E(de,te,ae){var Te="";ae=Math.min(de.length,ae);for(var ze=te;ze<ae;++ze)Te+=String.fromCharCode(127&de[ze]);return Te}function D(de,te,ae){var Te="";ae=Math.min(de.length,ae);for(var ze=te;ze<ae;++ze)Te+=String.fromCharCode(de[ze]);return Te}function P(de,te,ae){var Te=de.length;(!te||te<0)&&(te=0),(!ae||ae<0||ae>Te)&&(ae=Te);for(var ze="",ce=te;ce<ae;++ce)ze+=ft(de[ce]);return ze}function ne(de,te,ae){for(var Te=de.slice(te,ae),ze="",ce=0;ce<Te.length;ce+=2)ze+=String.fromCharCode(Te[ce]+256*Te[ce+1]);return ze}function fe(de,te,ae){if(de%1!=0||de<0)throw new RangeError("offset is not uint");if(de+te>ae)throw new RangeError("Trying to access beyond buffer length")}function Oe(de,te,ae,Te,ze,ce){if(!v.isBuffer(de))throw new TypeError('"buffer" argument must be a Buffer instance');if(te>ze||te<ce)throw new RangeError('"value" argument is out of bounds');if(ae+Te>de.length)throw new RangeError("Index out of range")}function oe(de,te,ae,Te){te<0&&(te=65535+te+1);for(var ze=0,ce=Math.min(de.length-ae,2);ze<ce;++ze)de[ae+ze]=(te&255<<8*(Te?ze:1-ze))>>>8*(Te?ze:1-ze)}function Ge(de,te,ae,Te){te<0&&(te=4294967295+te+1);for(var ze=0,ce=Math.min(de.length-ae,4);ze<ce;++ze)de[ae+ze]=te>>>8*(Te?ze:3-ze)&255}function at(de,te,ae,Te,ze,ce){if(ae+Te>de.length)throw new RangeError("Index out of range");if(ae<0)throw new RangeError("Index out of range")}function Fe(de,te,ae,Te,ze){return ze||at(de,0,ae,4),F.write(de,te,ae,Te,23,4),ae+4}function We(de,te,ae,Te,ze){return ze||at(de,0,ae,8),F.write(de,te,ae,Te,52,8),ae+8}v.prototype.slice=function(te,ae){var Te,ze=this.length;if((te=~~te)<0?(te+=ze)<0&&(te=0):te>ze&&(te=ze),(ae=void 0===ae?ze:~~ae)<0?(ae+=ze)<0&&(ae=0):ae>ze&&(ae=ze),ae<te&&(ae=te),v.TYPED_ARRAY_SUPPORT)(Te=this.subarray(te,ae)).__proto__=v.prototype;else{var ce=ae-te;Te=new v(ce,void 0);for(var me=0;me<ce;++me)Te[me]=this[me+te]}return Te},v.prototype.readUIntLE=function(te,ae,Te){te|=0,ae|=0,Te||fe(te,ae,this.length);for(var ze=this[te],ce=1,me=0;++me<ae&&(ce*=256);)ze+=this[te+me]*ce;return ze},v.prototype.readUIntBE=function(te,ae,Te){te|=0,ae|=0,Te||fe(te,ae,this.length);for(var ze=this[te+--ae],ce=1;ae>0&&(ce*=256);)ze+=this[te+--ae]*ce;return ze},v.prototype.readUInt8=function(te,ae){return ae||fe(te,1,this.length),this[te]},v.prototype.readUInt16LE=function(te,ae){return ae||fe(te,2,this.length),this[te]|this[te+1]<<8},v.prototype.readUInt16BE=function(te,ae){return ae||fe(te,2,this.length),this[te]<<8|this[te+1]},v.prototype.readUInt32LE=function(te,ae){return ae||fe(te,4,this.length),(this[te]|this[te+1]<<8|this[te+2]<<16)+16777216*this[te+3]},v.prototype.readUInt32BE=function(te,ae){return ae||fe(te,4,this.length),16777216*this[te]+(this[te+1]<<16|this[te+2]<<8|this[te+3])},v.prototype.readIntLE=function(te,ae,Te){te|=0,ae|=0,Te||fe(te,ae,this.length);for(var ze=this[te],ce=1,me=0;++me<ae&&(ce*=256);)ze+=this[te+me]*ce;return ze>=(ce*=128)&&(ze-=Math.pow(2,8*ae)),ze},v.prototype.readIntBE=function(te,ae,Te){te|=0,ae|=0,Te||fe(te,ae,this.length);for(var ze=ae,ce=1,me=this[te+--ze];ze>0&&(ce*=256);)me+=this[te+--ze]*ce;return me>=(ce*=128)&&(me-=Math.pow(2,8*ae)),me},v.prototype.readInt8=function(te,ae){return ae||fe(te,1,this.length),128&this[te]?-1*(255-this[te]+1):this[te]},v.prototype.readInt16LE=function(te,ae){ae||fe(te,2,this.length);var Te=this[te]|this[te+1]<<8;return 32768&Te?4294901760|Te:Te},v.prototype.readInt16BE=function(te,ae){ae||fe(te,2,this.length);var Te=this[te+1]|this[te]<<8;return 32768&Te?4294901760|Te:Te},v.prototype.readInt32LE=function(te,ae){return ae||fe(te,4,this.length),this[te]|this[te+1]<<8|this[te+2]<<16|this[te+3]<<24},v.prototype.readInt32BE=function(te,ae){return ae||fe(te,4,this.length),this[te]<<24|this[te+1]<<16|this[te+2]<<8|this[te+3]},v.prototype.readFloatLE=function(te,ae){return ae||fe(te,4,this.length),F.read(this,te,!0,23,4)},v.prototype.readFloatBE=function(te,ae){return ae||fe(te,4,this.length),F.read(this,te,!1,23,4)},v.prototype.readDoubleLE=function(te,ae){return ae||fe(te,8,this.length),F.read(this,te,!0,52,8)},v.prototype.readDoubleBE=function(te,ae){return ae||fe(te,8,this.length),F.read(this,te,!1,52,8)},v.prototype.writeUIntLE=function(te,ae,Te,ze){te=+te,ae|=0,Te|=0,ze||Oe(this,te,ae,Te,Math.pow(2,8*Te)-1,0);var ce=1,me=0;for(this[ae]=255&te;++me<Te&&(ce*=256);)this[ae+me]=te/ce&255;return ae+Te},v.prototype.writeUIntBE=function(te,ae,Te,ze){te=+te,ae|=0,Te|=0,ze||Oe(this,te,ae,Te,Math.pow(2,8*Te)-1,0);var ce=Te-1,me=1;for(this[ae+ce]=255&te;--ce>=0&&(me*=256);)this[ae+ce]=te/me&255;return ae+Te},v.prototype.writeUInt8=function(te,ae,Te){return te=+te,ae|=0,Te||Oe(this,te,ae,1,255,0),v.TYPED_ARRAY_SUPPORT||(te=Math.floor(te)),this[ae]=255&te,ae+1},v.prototype.writeUInt16LE=function(te,ae,Te){return te=+te,ae|=0,Te||Oe(this,te,ae,2,65535,0),v.TYPED_ARRAY_SUPPORT?(this[ae]=255&te,this[ae+1]=te>>>8):oe(this,te,ae,!0),ae+2},v.prototype.writeUInt16BE=function(te,ae,Te){return te=+te,ae|=0,Te||Oe(this,te,ae,2,65535,0),v.TYPED_ARRAY_SUPPORT?(this[ae]=te>>>8,this[ae+1]=255&te):oe(this,te,ae,!1),ae+2},v.prototype.writeUInt32LE=function(te,ae,Te){return te=+te,ae|=0,Te||Oe(this,te,ae,4,4294967295,0),v.TYPED_ARRAY_SUPPORT?(this[ae+3]=te>>>24,this[ae+2]=te>>>16,this[ae+1]=te>>>8,this[ae]=255&te):Ge(this,te,ae,!0),ae+4},v.prototype.writeUInt32BE=function(te,ae,Te){return te=+te,ae|=0,Te||Oe(this,te,ae,4,4294967295,0),v.TYPED_ARRAY_SUPPORT?(this[ae]=te>>>24,this[ae+1]=te>>>16,this[ae+2]=te>>>8,this[ae+3]=255&te):Ge(this,te,ae,!1),ae+4},v.prototype.writeIntLE=function(te,ae,Te,ze){if(te=+te,ae|=0,!ze){var ce=Math.pow(2,8*Te-1);Oe(this,te,ae,Te,ce-1,-ce)}var me=0,rt=1,ye=0;for(this[ae]=255&te;++me<Te&&(rt*=256);)te<0&&0===ye&&0!==this[ae+me-1]&&(ye=1),this[ae+me]=(te/rt>>0)-ye&255;return ae+Te},v.prototype.writeIntBE=function(te,ae,Te,ze){if(te=+te,ae|=0,!ze){var ce=Math.pow(2,8*Te-1);Oe(this,te,ae,Te,ce-1,-ce)}var me=Te-1,rt=1,ye=0;for(this[ae+me]=255&te;--me>=0&&(rt*=256);)te<0&&0===ye&&0!==this[ae+me+1]&&(ye=1),this[ae+me]=(te/rt>>0)-ye&255;return ae+Te},v.prototype.writeInt8=function(te,ae,Te){return te=+te,ae|=0,Te||Oe(this,te,ae,1,127,-128),v.TYPED_ARRAY_SUPPORT||(te=Math.floor(te)),te<0&&(te=255+te+1),this[ae]=255&te,ae+1},v.prototype.writeInt16LE=function(te,ae,Te){return te=+te,ae|=0,Te||Oe(this,te,ae,2,32767,-32768),v.TYPED_ARRAY_SUPPORT?(this[ae]=255&te,this[ae+1]=te>>>8):oe(this,te,ae,!0),ae+2},v.prototype.writeInt16BE=function(te,ae,Te){return te=+te,ae|=0,Te||Oe(this,te,ae,2,32767,-32768),v.TYPED_ARRAY_SUPPORT?(this[ae]=te>>>8,this[ae+1]=255&te):oe(this,te,ae,!1),ae+2},v.prototype.writeInt32LE=function(te,ae,Te){return te=+te,ae|=0,Te||Oe(this,te,ae,4,2147483647,-2147483648),v.TYPED_ARRAY_SUPPORT?(this[ae]=255&te,this[ae+1]=te>>>8,this[ae+2]=te>>>16,this[ae+3]=te>>>24):Ge(this,te,ae,!0),ae+4},v.prototype.writeInt32BE=function(te,ae,Te){return te=+te,ae|=0,Te||Oe(this,te,ae,4,2147483647,-2147483648),te<0&&(te=4294967295+te+1),v.TYPED_ARRAY_SUPPORT?(this[ae]=te>>>24,this[ae+1]=te>>>16,this[ae+2]=te>>>8,this[ae+3]=255&te):Ge(this,te,ae,!1),ae+4},v.prototype.writeFloatLE=function(te,ae,Te){return Fe(this,te,ae,!0,Te)},v.prototype.writeFloatBE=function(te,ae,Te){return Fe(this,te,ae,!1,Te)},v.prototype.writeDoubleLE=function(te,ae,Te){return We(this,te,ae,!0,Te)},v.prototype.writeDoubleBE=function(te,ae,Te){return We(this,te,ae,!1,Te)},v.prototype.copy=function(te,ae,Te,ze){if(Te||(Te=0),ze||0===ze||(ze=this.length),ae>=te.length&&(ae=te.length),ae||(ae=0),ze>0&&ze<Te&&(ze=Te),ze===Te||0===te.length||0===this.length)return 0;if(ae<0)throw new RangeError("targetStart out of bounds");if(Te<0||Te>=this.length)throw new RangeError("sourceStart out of bounds");if(ze<0)throw new RangeError("sourceEnd out of bounds");ze>this.length&&(ze=this.length),te.length-ae<ze-Te&&(ze=te.length-ae+Te);var ce,me=ze-Te;if(this===te&&Te<ae&&ae<ze)for(ce=me-1;ce>=0;--ce)te[ce+ae]=this[ce+Te];else if(me<1e3||!v.TYPED_ARRAY_SUPPORT)for(ce=0;ce<me;++ce)te[ce+ae]=this[ce+Te];else Uint8Array.prototype.set.call(te,this.subarray(Te,Te+me),ae);return me},v.prototype.fill=function(te,ae,Te,ze){if("string"==typeof te){if("string"==typeof ae?(ze=ae,ae=0,Te=this.length):"string"==typeof Te&&(ze=Te,Te=this.length),1===te.length){var ce=te.charCodeAt(0);ce<256&&(te=ce)}if(void 0!==ze&&"string"!=typeof ze)throw new TypeError("encoding must be a string");if("string"==typeof ze&&!v.isEncoding(ze))throw new TypeError("Unknown encoding: "+ze)}else"number"==typeof te&&(te&=255);if(ae<0||this.length<ae||this.length<Te)throw new RangeError("Out of range index");if(Te<=ae)return this;var me;if(ae>>>=0,Te=void 0===Te?this.length:Te>>>0,te||(te=0),"number"==typeof te)for(me=ae;me<Te;++me)this[me]=te;else{var rt=v.isBuffer(te)?te:Ze(new v(te,ze).toString()),ye=rt.length;for(me=0;me<Te-ae;++me)this[me+ae]=rt[me%ye]}return this};var Qe=/[^+\/0-9A-Za-z-_]/g;function ft(de){return de<16?"0"+de.toString(16):de.toString(16)}function Ze(de,te){var ae;te=te||1/0;for(var Te=de.length,ze=null,ce=[],me=0;me<Te;++me){if((ae=de.charCodeAt(me))>55295&&ae<57344){if(!ze){if(ae>56319){(te-=3)>-1&&ce.push(239,191,189);continue}if(me+1===Te){(te-=3)>-1&&ce.push(239,191,189);continue}ze=ae;continue}if(ae<56320){(te-=3)>-1&&ce.push(239,191,189),ze=ae;continue}ae=65536+(ze-55296<<10|ae-56320)}else ze&&(te-=3)>-1&&ce.push(239,191,189);if(ze=null,ae<128){if((te-=1)<0)break;ce.push(ae)}else if(ae<2048){if((te-=2)<0)break;ce.push(ae>>6|192,63&ae|128)}else if(ae<65536){if((te-=3)<0)break;ce.push(ae>>12|224,ae>>6&63|128,63&ae|128)}else{if(!(ae<1114112))throw new Error("Invalid code point");if((te-=4)<0)break;ce.push(ae>>18|240,ae>>12&63|128,ae>>6&63|128,63&ae|128)}}return ce}function Ue(de){return C.toByteArray(function(ae){if((ae=(ze=ae,ze.trim?ze.trim():ze.replace(/^\s+|\s+$/g,"")).replace(Qe,"")).length<2)return"";for(var ze;ae.length%4!=0;)ae+="=";return ae}(de))}function nt(de,te,ae,Te){for(var ze=0;ze<Te&&!(ze+ae>=te.length||ze>=de.length);++ze)te[ze+ae]=de[ze];return ze}}).call(this,I(29))},function(O,x){var I;I=function(){return this}();try{I=I||new Function("return this")()}catch{"object"==typeof window&&(I=window)}O.exports=I},function(O,x,I){"use strict";x.byteLength=function(L){var X=v(L),Q=X[1];return 3*(X[0]+Q)/4-Q},x.toByteArray=function(L){var X,H,_e,Q=v(L),q=Q[0],Y=Q[1],le=new F(3*(q+(_e=Y))/4-_e),B=0,z=Y>0?q-4:q;for(H=0;H<z;H+=4)X=C[L.charCodeAt(H)]<<18|C[L.charCodeAt(H+1)]<<12|C[L.charCodeAt(H+2)]<<6|C[L.charCodeAt(H+3)],le[B++]=X>>16&255,le[B++]=X>>8&255,le[B++]=255&X;return 2===Y&&(X=C[L.charCodeAt(H)]<<2|C[L.charCodeAt(H+1)]>>4,le[B++]=255&X),1===Y&&(X=C[L.charCodeAt(H)]<<10|C[L.charCodeAt(H+1)]<<4|C[L.charCodeAt(H+2)]>>2,le[B++]=X>>8&255,le[B++]=255&X),le},x.fromByteArray=function(L){for(var X,H=L.length,Q=H%3,q=[],Y=16383,le=0,B=H-Q;le<B;le+=Y)q.push(N(L,le,le+Y>B?B:le+Y));return 1===Q?q.push(o[(X=L[H-1])>>2]+o[X<<4&63]+"=="):2===Q&&q.push(o[(X=(L[H-2]<<8)+L[H-1])>>10]+o[X>>4&63]+o[X<<2&63]+"="),q.join("")};for(var o=[],C=[],F="undefined"!=typeof Uint8Array?Uint8Array:Array,j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,m=j.length;d<m;++d)o[d]=j[d],C[j.charCodeAt(d)]=d;function v(M){var L=M.length;if(L%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var X=M.indexOf("=");return-1===X&&(X=L),[X,X===L?0:4-X%4]}function N(M,L,X){for(var Q,q=[],Y=L;Y<X;Y+=3)q.push(o[(Q=(M[Y]<<16&16711680)+(M[Y+1]<<8&65280)+(255&M[Y+2]))>>18&63]+o[Q>>12&63]+o[Q>>6&63]+o[63&Q]);return q.join("")}C["-".charCodeAt(0)]=62,C["_".charCodeAt(0)]=63},function(O,x){x.read=function(I,o,C,F,j){var d,m,v=8*j-F-1,N=(1<<v)-1,M=N>>1,L=-7,X=C?j-1:0,H=C?-1:1,Q=I[o+X];for(X+=H,d=Q&(1<<-L)-1,Q>>=-L,L+=v;L>0;d=256*d+I[o+X],X+=H,L-=8);for(m=d&(1<<-L)-1,d>>=-L,L+=F;L>0;m=256*m+I[o+X],X+=H,L-=8);if(0===d)d=1-M;else{if(d===N)return m?NaN:1/0*(Q?-1:1);m+=Math.pow(2,F),d-=M}return(Q?-1:1)*m*Math.pow(2,d-F)},x.write=function(I,o,C,F,j,d){var m,v,N,M=8*d-j-1,L=(1<<M)-1,X=L>>1,H=23===j?Math.pow(2,-24)-Math.pow(2,-77):0,Q=F?0:d-1,q=F?1:-1,Y=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(v=isNaN(o)?1:0,m=L):(m=Math.floor(Math.log(o)/Math.LN2),o*(N=Math.pow(2,-m))<1&&(m--,N*=2),(o+=m+X>=1?H/N:H*Math.pow(2,1-X))*N>=2&&(m++,N/=2),m+X>=L?(v=0,m=L):m+X>=1?(v=(o*N-1)*Math.pow(2,j),m+=X):(v=o*Math.pow(2,X-1)*Math.pow(2,j),m=0));j>=8;I[C+Q]=255&v,Q+=q,v/=256,j-=8);for(m=m<<j|v,M+=j;M>0;I[C+Q]=255&m,Q+=q,m/=256,M-=8);I[C+Q-q]|=128*Y}},function(O,x){var I={}.toString;O.exports=Array.isArray||function(o){return"[object Array]"==I.call(o)}},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.default=function(F){var j=F.jws,d=F.KeyUtil,m=F.X509,v=F.crypto,N=F.hextob64u,M=F.b64tohex,L=F.AllowedSigningAlgs;return function(){function X(){!function(Q,q){if(!(Q instanceof q))throw new TypeError("Cannot call a class as a function")}(this,X)}return X.parseJwt=function(Q){o.Log.debug("JoseUtil.parseJwt");try{var q=j.JWS.parse(Q);return{header:q.headerObj,payload:q.payloadObj}}catch(Y){o.Log.error(Y)}},X.validateJwt=function(Q,q,Y,le,B,z,U){o.Log.debug("JoseUtil.validateJwt");try{if("RSA"===q.kty)if(q.e&&q.n)q=d.getKey(q);else{if(!q.x5c||!q.x5c.length)return o.Log.error("JoseUtil.validateJwt: RSA key missing key material",q),Promise.reject(new Error("RSA key missing key material"));var ee=M(q.x5c[0]);q=m.getPublicKeyFromCertHex(ee)}else{if("EC"!==q.kty)return o.Log.error("JoseUtil.validateJwt: Unsupported key type",q&&q.kty),Promise.reject(new Error(q.kty));if(!(q.crv&&q.x&&q.y))return o.Log.error("JoseUtil.validateJwt: EC key missing key material",q),Promise.reject(new Error("EC key missing key material"));q=d.getKey(q)}return X._validateJwt(Q,q,Y,le,B,z,U)}catch(ge){return o.Log.error(ge&&ge.message||ge),Promise.reject("JWT validation failed")}},X.validateJwtAttributes=function(Q,q,Y,le,B,z){le||(le=0),B||(B=parseInt(Date.now()/1e3));var U=X.parseJwt(Q).payload;if(!U.iss)return o.Log.error("JoseUtil._validateJwt: issuer was not provided"),Promise.reject(new Error("issuer was not provided"));if(U.iss!==q)return o.Log.error("JoseUtil._validateJwt: Invalid issuer in token",U.iss),Promise.reject(new Error("Invalid issuer in token: "+U.iss));if(!U.aud)return o.Log.error("JoseUtil._validateJwt: aud was not provided"),Promise.reject(new Error("aud was not provided"));if(!(U.aud===Y||Array.isArray(U.aud)&&U.aud.indexOf(Y)>=0))return o.Log.error("JoseUtil._validateJwt: Invalid audience in token",U.aud),Promise.reject(new Error("Invalid audience in token: "+U.aud));if(U.azp&&U.azp!==Y)return o.Log.error("JoseUtil._validateJwt: Invalid azp in token",U.azp),Promise.reject(new Error("Invalid azp in token: "+U.azp));if(!z){var ee=B+le,ge=B-le;if(!U.iat)return o.Log.error("JoseUtil._validateJwt: iat was not provided"),Promise.reject(new Error("iat was not provided"));if(ee<U.iat)return o.Log.error("JoseUtil._validateJwt: iat is in the future",U.iat),Promise.reject(new Error("iat is in the future: "+U.iat));if(U.nbf&&ee<U.nbf)return o.Log.error("JoseUtil._validateJwt: nbf is in the future",U.nbf),Promise.reject(new Error("nbf is in the future: "+U.nbf));if(!U.exp)return o.Log.error("JoseUtil._validateJwt: exp was not provided"),Promise.reject(new Error("exp was not provided"));if(U.exp<ge)return o.Log.error("JoseUtil._validateJwt: exp is in the past",U.exp),Promise.reject(new Error("exp is in the past:"+U.exp))}return Promise.resolve(U)},X._validateJwt=function(Q,q,Y,le,B,z,U){return X.validateJwtAttributes(Q,Y,le,B,z,U).then(function(ee){try{return j.JWS.verify(Q,q,L)?ee:(o.Log.error("JoseUtil._validateJwt: signature validation failed"),Promise.reject(new Error("signature validation failed")))}catch(ge){return o.Log.error(ge&&ge.message||ge),Promise.reject(new Error("signature validation failed"))}})},X.hashString=function(Q,q){try{return v.Util.hashString(Q,q)}catch(Y){o.Log.error(Y)}},X.hexToBase64Url=function(Q){try{return N(Q)}catch(q){o.Log.error(q)}},X}()};var o=I(0);O.exports=x.default},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.SigninResponse=void 0;var o=function(){function j(d,m){for(var v=0;v<m.length;v++){var N=m[v];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(d,N.key,N)}}return function(d,m,v){return m&&j(d.prototype,m),v&&j(d,v),d}}(),C=I(3);function F(j,d){if(!(j instanceof d))throw new TypeError("Cannot call a class as a function")}x.SigninResponse=function(){function j(d){var m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#";F(this,j);var v=C.UrlUtility.parseUrlFragment(d,m);this.error=v.error,this.error_description=v.error_description,this.error_uri=v.error_uri,this.code=v.code,this.state=v.state,this.id_token=v.id_token,this.session_state=v.session_state,this.access_token=v.access_token,this.token_type=v.token_type,this.scope=v.scope,this.profile=void 0,this.expires_in=v.expires_in}return o(j,[{key:"expires_in",get:function(){if(this.expires_at){var m=parseInt(Date.now()/1e3);return this.expires_at-m}},set:function(m){var v=parseInt(m);if("number"==typeof v&&v>0){var N=parseInt(Date.now()/1e3);this.expires_at=N+v}}},{key:"expired",get:function(){var m=this.expires_in;if(void 0!==m)return m<=0}},{key:"scopes",get:function(){return(this.scope||"").split(" ")}},{key:"isOpenIdConnect",get:function(){return this.scopes.indexOf("openid")>=0||!!this.id_token}}]),j}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.SignoutRequest=void 0;var o=I(0),C=I(3),F=I(9);x.SignoutRequest=function j(d){var m=d.url,v=d.id_token_hint,N=d.post_logout_redirect_uri,M=d.data,L=d.extraQueryParams,X=d.request_type;if(function(q,Y){if(!(q instanceof Y))throw new TypeError("Cannot call a class as a function")}(this,j),!m)throw o.Log.error("SignoutRequest.ctor: No url passed"),new Error("url");for(var H in v&&(m=C.UrlUtility.addQueryParam(m,"id_token_hint",v)),N&&(m=C.UrlUtility.addQueryParam(m,"post_logout_redirect_uri",N),M&&(this.state=new F.State({data:M,request_type:X}),m=C.UrlUtility.addQueryParam(m,"state",this.state.id))),L)m=C.UrlUtility.addQueryParam(m,H,L[H]);this.url=m}},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.SignoutResponse=void 0;var o=I(3);x.SignoutResponse=function C(F){!function(m,v){if(!(m instanceof v))throw new TypeError("Cannot call a class as a function")}(this,C);var j=o.UrlUtility.parseUrlFragment(F,"?");this.error=j.error,this.error_description=j.error_description,this.error_uri=j.error_uri,this.state=j.state}},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.InMemoryWebStorage=void 0;var o=function(){function F(j,d){for(var m=0;m<d.length;m++){var v=d[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(j,v.key,v)}}return function(j,d,m){return d&&F(j.prototype,d),m&&F(j,m),j}}(),C=I(0);x.InMemoryWebStorage=function(){function F(){(function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")})(this,F),this._data={}}return F.prototype.getItem=function(d){return C.Log.debug("InMemoryWebStorage.getItem",d),this._data[d]},F.prototype.setItem=function(d,m){C.Log.debug("InMemoryWebStorage.setItem",d),this._data[d]=m},F.prototype.removeItem=function(d){C.Log.debug("InMemoryWebStorage.removeItem",d),delete this._data[d]},F.prototype.key=function(d){return Object.getOwnPropertyNames(this._data)[d]},o(F,[{key:"length",get:function(){return Object.getOwnPropertyNames(this._data).length}}]),F}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.UserManager=void 0;var o=function(){function Y(le,B){for(var z=0;z<B.length;z++){var U=B[z];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(le,U.key,U)}}return function(le,B,z){return B&&Y(le.prototype,B),z&&Y(le,z),le}}(),C=I(0),F=I(10),j=I(39),d=I(15),m=I(45),v=I(47),N=I(18),M=I(8),L=I(20),X=I(11),H=I(4);function Q(Y,le){if(!(Y instanceof le))throw new TypeError("Cannot call a class as a function")}function q(Y,le){if(!Y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!le||"object"!=typeof le&&"function"!=typeof le?Y:le}x.UserManager=function(Y){function le(){var B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},z=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.SilentRenewService,U=arguments.length>2&&void 0!==arguments[2]?arguments[2]:N.SessionMonitor,ee=arguments.length>3&&void 0!==arguments[3]?arguments[3]:L.TokenRevocationClient,ge=arguments.length>4&&void 0!==arguments[4]?arguments[4]:X.TokenClient,_e=arguments.length>5&&void 0!==arguments[5]?arguments[5]:H.JoseUtil;Q(this,le),B instanceof j.UserManagerSettings||(B=new j.UserManagerSettings(B));var pe=q(this,Y.call(this,B));return pe._events=new m.UserManagerEvents(B),pe._silentRenewService=new z(pe),pe.settings.automaticSilentRenew&&(C.Log.debug("UserManager.ctor: automaticSilentRenew is configured, setting up silent renew"),pe.startSilentRenew()),pe.settings.monitorSession&&(C.Log.debug("UserManager.ctor: monitorSession is configured, setting up session monitor"),pe._sessionMonitor=new U(pe)),pe._tokenRevocationClient=new ee(pe._settings),pe._tokenClient=new ge(pe._settings),pe._joseUtil=_e,pe}return function(z,U){if("function"!=typeof U&&null!==U)throw new TypeError("Super expression must either be null or a function, not "+typeof U);z.prototype=Object.create(U&&U.prototype,{constructor:{value:z,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(z,U):z.__proto__=U)}(le,Y),le.prototype.getUser=function(){var z=this;return this._loadUser().then(function(U){return U?(C.Log.info("UserManager.getUser: user loaded"),z._events.load(U,!1),U):(C.Log.info("UserManager.getUser: user not found in storage"),null)})},le.prototype.removeUser=function(){var z=this;return this.storeUser(null).then(function(){C.Log.info("UserManager.removeUser: user removed from storage"),z._events.unload()})},le.prototype.signinRedirect=function(){var z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(z=Object.assign({},z)).request_type="si:r",this._signinStart(z,this._redirectNavigator,{useReplaceToNavigate:z.useReplaceToNavigate}).then(function(){C.Log.info("UserManager.signinRedirect: successful")})},le.prototype.signinRedirectCallback=function(z){return this._signinEnd(z||this._redirectNavigator.url).then(function(U){return U.profile&&U.profile.sub?C.Log.info("UserManager.signinRedirectCallback: successful, signed in sub: ",U.profile.sub):C.Log.info("UserManager.signinRedirectCallback: no sub"),U})},le.prototype.signinPopup=function(){var z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(z=Object.assign({},z)).request_type="si:p";var U=z.redirect_uri||this.settings.popup_redirect_uri||this.settings.redirect_uri;return U?(z.redirect_uri=U,z.display="popup",this._signin(z,this._popupNavigator,{startUrl:U,popupWindowFeatures:z.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:z.popupWindowTarget||this.settings.popupWindowTarget}).then(function(ee){return ee&&(ee.profile&&ee.profile.sub?C.Log.info("UserManager.signinPopup: signinPopup successful, signed in sub: ",ee.profile.sub):C.Log.info("UserManager.signinPopup: no sub")),ee})):(C.Log.error("UserManager.signinPopup: No popup_redirect_uri or redirect_uri configured"),Promise.reject(new Error("No popup_redirect_uri or redirect_uri configured")))},le.prototype.signinPopupCallback=function(z){return this._signinCallback(z,this._popupNavigator).then(function(U){return U&&(U.profile&&U.profile.sub?C.Log.info("UserManager.signinPopupCallback: successful, signed in sub: ",U.profile.sub):C.Log.info("UserManager.signinPopupCallback: no sub")),U}).catch(function(U){C.Log.error(U.message)})},le.prototype.signinSilent=function(){var z=this,U=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return U=Object.assign({},U),this._loadUser().then(function(ee){return ee&&ee.refresh_token?(U.refresh_token=ee.refresh_token,z._useRefreshToken(U)):(U.request_type="si:s",U.id_token_hint=U.id_token_hint||z.settings.includeIdTokenInSilentRenew&&ee&&ee.id_token,ee&&z._settings.validateSubOnSilentRenew&&(C.Log.debug("UserManager.signinSilent, subject prior to silent renew: ",ee.profile.sub),U.current_sub=ee.profile.sub),z._signinSilentIframe(U))})},le.prototype._useRefreshToken=function(){var z=this;return this._tokenClient.exchangeRefreshToken(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).then(function(ee){return ee?ee.access_token?z._loadUser().then(function(ge){if(ge){var _e=Promise.resolve();return ee.id_token&&(_e=z._validateIdTokenFromTokenRefreshToken(ge.profile,ee.id_token)),_e.then(function(){return C.Log.debug("UserManager._useRefreshToken: refresh token response success"),ge.id_token=ee.id_token||ge.id_token,ge.access_token=ee.access_token,ge.refresh_token=ee.refresh_token||ge.refresh_token,ge.expires_in=ee.expires_in,z.storeUser(ge).then(function(){return z._events.load(ge),ge})})}return null}):(C.Log.error("UserManager._useRefreshToken: No access token returned from token endpoint"),Promise.reject("No access token returned from token endpoint")):(C.Log.error("UserManager._useRefreshToken: No response returned from token endpoint"),Promise.reject("No response returned from token endpoint"))})},le.prototype._validateIdTokenFromTokenRefreshToken=function(z,U){var ee=this;return this._metadataService.getIssuer().then(function(ge){return ee.settings.getEpochTime().then(function(_e){return ee._joseUtil.validateJwtAttributes(U,ge,ee._settings.client_id,ee._settings.clockSkew,_e).then(function(pe){return pe?pe.sub!==z.sub?(C.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: sub in id_token does not match current sub"),Promise.reject(new Error("sub in id_token does not match current sub"))):pe.auth_time&&pe.auth_time!==z.auth_time?(C.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: auth_time in id_token does not match original auth_time"),Promise.reject(new Error("auth_time in id_token does not match original auth_time"))):pe.azp&&pe.azp!==z.azp?(C.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp in id_token does not match original azp"),Promise.reject(new Error("azp in id_token does not match original azp"))):!pe.azp&&z.azp?(C.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: azp not in id_token, but present in original id_token"),Promise.reject(new Error("azp not in id_token, but present in original id_token"))):void 0:(C.Log.error("UserManager._validateIdTokenFromTokenRefreshToken: Failed to validate id_token"),Promise.reject(new Error("Failed to validate id_token")))})})})},le.prototype._signinSilentIframe=function(){var z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},U=z.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return U?(z.redirect_uri=U,z.prompt=z.prompt||"none",this._signin(z,this._iframeNavigator,{startUrl:U,silentRequestTimeout:z.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(ee){return ee&&(ee.profile&&ee.profile.sub?C.Log.info("UserManager.signinSilent: successful, signed in sub: ",ee.profile.sub):C.Log.info("UserManager.signinSilent: no sub")),ee})):(C.Log.error("UserManager.signinSilent: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},le.prototype.signinSilentCallback=function(z){return this._signinCallback(z,this._iframeNavigator).then(function(U){return U&&(U.profile&&U.profile.sub?C.Log.info("UserManager.signinSilentCallback: successful, signed in sub: ",U.profile.sub):C.Log.info("UserManager.signinSilentCallback: no sub")),U})},le.prototype.signinCallback=function(z){var U=this;return this.readSigninResponseState(z).then(function(ee){var ge=ee.state;return"si:r"===ge.request_type?U.signinRedirectCallback(z):"si:p"===ge.request_type?U.signinPopupCallback(z):"si:s"===ge.request_type?U.signinSilentCallback(z):Promise.reject(new Error("invalid response_type in state"))})},le.prototype.signoutCallback=function(z,U){var ee=this;return this.readSignoutResponseState(z).then(function(ge){var _e=ge.state,pe=ge.response;return _e?"so:r"===_e.request_type?ee.signoutRedirectCallback(z):"so:p"===_e.request_type?ee.signoutPopupCallback(z,U):Promise.reject(new Error("invalid response_type in state")):pe})},le.prototype.querySessionStatus=function(){var z=this,U=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(U=Object.assign({},U)).request_type="si:s";var ee=U.redirect_uri||this.settings.silent_redirect_uri||this.settings.redirect_uri;return ee?(U.redirect_uri=ee,U.prompt="none",U.response_type=U.response_type||this.settings.query_status_response_type,U.scope=U.scope||"openid",U.skipUserInfo=!0,this._signinStart(U,this._iframeNavigator,{startUrl:ee,silentRequestTimeout:U.silentRequestTimeout||this.settings.silentRequestTimeout}).then(function(ge){return z.processSigninResponse(ge.url).then(function(_e){if(C.Log.debug("UserManager.querySessionStatus: got signin response"),_e.session_state&&_e.profile.sub)return C.Log.info("UserManager.querySessionStatus: querySessionStatus success for sub: ",_e.profile.sub),{session_state:_e.session_state,sub:_e.profile.sub,sid:_e.profile.sid};C.Log.info("querySessionStatus successful, user not authenticated")}).catch(function(_e){if(_e.session_state&&z.settings.monitorAnonymousSession&&("login_required"==_e.message||"consent_required"==_e.message||"interaction_required"==_e.message||"account_selection_required"==_e.message))return C.Log.info("UserManager.querySessionStatus: querySessionStatus success for anonymous user"),{session_state:_e.session_state};throw _e})})):(C.Log.error("UserManager.querySessionStatus: No silent_redirect_uri configured"),Promise.reject(new Error("No silent_redirect_uri configured")))},le.prototype._signin=function(z,U){var ee=this;return this._signinStart(z,U,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).then(function(_e){return ee._signinEnd(_e.url,z)})},le.prototype._signinStart=function(z,U){var ee=this,ge=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return U.prepare(ge).then(function(_e){return C.Log.debug("UserManager._signinStart: got navigator window handle"),ee.createSigninRequest(z).then(function(pe){return C.Log.debug("UserManager._signinStart: got signin request"),ge.url=pe.url,ge.id=pe.state.id,_e.navigate(ge)}).catch(function(pe){throw _e.close&&(C.Log.debug("UserManager._signinStart: Error after preparing navigator, closing navigator window"),_e.close()),pe})})},le.prototype._signinEnd=function(z){var U=this,ee=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.processSigninResponse(z).then(function(ge){C.Log.debug("UserManager._signinEnd: got signin response");var _e=new d.User(ge);if(ee.current_sub){if(ee.current_sub!==_e.profile.sub)return C.Log.debug("UserManager._signinEnd: current user does not match user returned from signin. sub from signin: ",_e.profile.sub),Promise.reject(new Error("login_required"));C.Log.debug("UserManager._signinEnd: current user matches user returned from signin")}return U.storeUser(_e).then(function(){return C.Log.debug("UserManager._signinEnd: user stored"),U._events.load(_e),_e})})},le.prototype._signinCallback=function(z,U){C.Log.debug("UserManager._signinCallback");var ee="query"===this._settings.response_mode||!this._settings.response_mode&&M.SigninRequest.isCode(this._settings.response_type)?"?":"#";return U.callback(z,void 0,ee)},le.prototype.signoutRedirect=function(){var z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(z=Object.assign({},z)).request_type="so:r";var U=z.post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return U&&(z.post_logout_redirect_uri=U),this._signoutStart(z,this._redirectNavigator,{useReplaceToNavigate:z.useReplaceToNavigate}).then(function(){C.Log.info("UserManager.signoutRedirect: successful")})},le.prototype.signoutRedirectCallback=function(z){return this._signoutEnd(z||this._redirectNavigator.url).then(function(U){return C.Log.info("UserManager.signoutRedirectCallback: successful"),U})},le.prototype.signoutPopup=function(){var z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(z=Object.assign({},z)).request_type="so:p";var U=z.post_logout_redirect_uri||this.settings.popup_post_logout_redirect_uri||this.settings.post_logout_redirect_uri;return z.post_logout_redirect_uri=U,z.display="popup",z.post_logout_redirect_uri&&(z.state=z.state||{}),this._signout(z,this._popupNavigator,{startUrl:U,popupWindowFeatures:z.popupWindowFeatures||this.settings.popupWindowFeatures,popupWindowTarget:z.popupWindowTarget||this.settings.popupWindowTarget}).then(function(){C.Log.info("UserManager.signoutPopup: successful")})},le.prototype.signoutPopupCallback=function(z,U){return void 0===U&&"boolean"==typeof z&&(U=z,z=null),this._popupNavigator.callback(z,U,"?").then(function(){C.Log.info("UserManager.signoutPopupCallback: successful")})},le.prototype._signout=function(z,U){var ee=this;return this._signoutStart(z,U,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).then(function(_e){return ee._signoutEnd(_e.url)})},le.prototype._signoutStart=function(){var z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},U=this,ge=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return arguments[1].prepare(ge).then(function(_e){return C.Log.debug("UserManager._signoutStart: got navigator window handle"),U._loadUser().then(function(pe){return C.Log.debug("UserManager._signoutStart: loaded current user from storage"),(U._settings.revokeAccessTokenOnSignout?U._revokeInternal(pe):Promise.resolve()).then(function(){var g=z.id_token_hint||pe&&pe.id_token;return g&&(C.Log.debug("UserManager._signoutStart: Setting id_token into signout request"),z.id_token_hint=g),U.removeUser().then(function(){return C.Log.debug("UserManager._signoutStart: user removed, creating signout request"),U.createSignoutRequest(z).then(function(A){return C.Log.debug("UserManager._signoutStart: got signout request"),ge.url=A.url,A.state&&(ge.id=A.state.id),_e.navigate(ge)})})})}).catch(function(pe){throw _e.close&&(C.Log.debug("UserManager._signoutStart: Error after preparing navigator, closing navigator window"),_e.close()),pe})})},le.prototype._signoutEnd=function(z){return this.processSignoutResponse(z).then(function(U){return C.Log.debug("UserManager._signoutEnd: got signout response"),U})},le.prototype.revokeAccessToken=function(){var z=this;return this._loadUser().then(function(U){return z._revokeInternal(U,!0).then(function(ee){if(ee)return C.Log.debug("UserManager.revokeAccessToken: removing token properties from user and re-storing"),U.access_token=null,U.refresh_token=null,U.expires_at=null,U.token_type=null,z.storeUser(U).then(function(){C.Log.debug("UserManager.revokeAccessToken: user stored"),z._events.load(U)})})}).then(function(){C.Log.info("UserManager.revokeAccessToken: access token revoked successfully")})},le.prototype._revokeInternal=function(z,U){var ee=this;if(z){var _e=z.refresh_token;return this._revokeAccessTokenInternal(z.access_token,U).then(function(pe){return ee._revokeRefreshTokenInternal(_e,U).then(function(g){return pe||g||C.Log.debug("UserManager.revokeAccessToken: no need to revoke due to no token(s), or JWT format"),pe||g})})}return Promise.resolve(!1)},le.prototype._revokeAccessTokenInternal=function(z,U){return!z||z.indexOf(".")>=0?Promise.resolve(!1):this._tokenRevocationClient.revoke(z,U).then(function(){return!0})},le.prototype._revokeRefreshTokenInternal=function(z,U){return z?this._tokenRevocationClient.revoke(z,U,"refresh_token").then(function(){return!0}):Promise.resolve(!1)},le.prototype.startSilentRenew=function(){this._silentRenewService.start()},le.prototype.stopSilentRenew=function(){this._silentRenewService.stop()},le.prototype._loadUser=function(){return this._userStore.get(this._userStoreKey).then(function(z){return z?(C.Log.debug("UserManager._loadUser: user storageString loaded"),d.User.fromStorageString(z)):(C.Log.debug("UserManager._loadUser: no user storageString"),null)})},le.prototype.storeUser=function(z){if(z){C.Log.debug("UserManager.storeUser: storing user");var U=z.toStorageString();return this._userStore.set(this._userStoreKey,U)}return C.Log.debug("storeUser.storeUser: removing user"),this._userStore.remove(this._userStoreKey)},o(le,[{key:"_redirectNavigator",get:function(){return this.settings.redirectNavigator}},{key:"_popupNavigator",get:function(){return this.settings.popupNavigator}},{key:"_iframeNavigator",get:function(){return this.settings.iframeNavigator}},{key:"_userStore",get:function(){return this.settings.userStore}},{key:"events",get:function(){return this._events}},{key:"_userStoreKey",get:function(){return"user:"+this.settings.authority+":"+this.settings.client_id}}]),le}(F.OidcClient)},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.UserManagerSettings=void 0;var o=function(){function X(H,Q){for(var q=0;q<Q.length;q++){var Y=Q[q];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(H,Y.key,Y)}}return function(H,Q,q){return Q&&X(H.prototype,Q),q&&X(H,q),H}}(),C=(I(0),I(5)),F=I(40),j=I(41),d=I(43),m=I(6),v=I(1),N=I(8);function M(X,H){if(!(X instanceof H))throw new TypeError("Cannot call a class as a function")}function L(X,H){if(!X)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!H||"object"!=typeof H&&"function"!=typeof H?X:H}x.UserManagerSettings=function(X){function H(){var Q=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},q=Q.popup_redirect_uri,Y=Q.popup_post_logout_redirect_uri,le=Q.popupWindowFeatures,B=Q.popupWindowTarget,z=Q.silent_redirect_uri,U=Q.silentRequestTimeout,ee=Q.automaticSilentRenew,ge=void 0!==ee&&ee,_e=Q.validateSubOnSilentRenew,pe=void 0!==_e&&_e,g=Q.includeIdTokenInSilentRenew,A=void 0===g||g,y=Q.monitorSession,E=void 0===y||y,D=Q.monitorAnonymousSession,P=void 0!==D&&D,ne=Q.checkSessionInterval,fe=void 0===ne?2e3:ne,Oe=Q.stopCheckSessionOnError,oe=void 0===Oe||Oe,Ge=Q.query_status_response_type,at=Q.revokeAccessTokenOnSignout,Fe=void 0!==at&&at,We=Q.accessTokenExpiringNotificationTime,Qe=void 0===We?60:We,ft=Q.redirectNavigator,Ze=void 0===ft?new F.RedirectNavigator:ft,Ue=Q.popupNavigator,nt=void 0===Ue?new j.PopupNavigator:Ue,de=Q.iframeNavigator,te=void 0===de?new d.IFrameNavigator:de,ae=Q.userStore,Te=void 0===ae?new m.WebStorageStateStore({store:v.Global.sessionStorage}):ae;M(this,H);var ze=L(this,X.call(this,arguments[0]));return ze._popup_redirect_uri=q,ze._popup_post_logout_redirect_uri=Y,ze._popupWindowFeatures=le,ze._popupWindowTarget=B,ze._silent_redirect_uri=z,ze._silentRequestTimeout=U,ze._automaticSilentRenew=ge,ze._validateSubOnSilentRenew=pe,ze._includeIdTokenInSilentRenew=A,ze._accessTokenExpiringNotificationTime=Qe,ze._monitorSession=E,ze._monitorAnonymousSession=P,ze._checkSessionInterval=fe,ze._stopCheckSessionOnError=oe,ze._query_status_response_type=Ge||(arguments[0]&&arguments[0].response_type?N.SigninRequest.isOidc(arguments[0].response_type)?"id_token":"code":"id_token"),ze._revokeAccessTokenOnSignout=Fe,ze._redirectNavigator=Ze,ze._popupNavigator=nt,ze._iframeNavigator=te,ze._userStore=Te,ze}return function(q,Y){if("function"!=typeof Y&&null!==Y)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);q.prototype=Object.create(Y&&Y.prototype,{constructor:{value:q,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(q,Y):q.__proto__=Y)}(H,X),o(H,[{key:"popup_redirect_uri",get:function(){return this._popup_redirect_uri}},{key:"popup_post_logout_redirect_uri",get:function(){return this._popup_post_logout_redirect_uri}},{key:"popupWindowFeatures",get:function(){return this._popupWindowFeatures}},{key:"popupWindowTarget",get:function(){return this._popupWindowTarget}},{key:"silent_redirect_uri",get:function(){return this._silent_redirect_uri}},{key:"silentRequestTimeout",get:function(){return this._silentRequestTimeout}},{key:"automaticSilentRenew",get:function(){return this._automaticSilentRenew}},{key:"validateSubOnSilentRenew",get:function(){return this._validateSubOnSilentRenew}},{key:"includeIdTokenInSilentRenew",get:function(){return this._includeIdTokenInSilentRenew}},{key:"accessTokenExpiringNotificationTime",get:function(){return this._accessTokenExpiringNotificationTime}},{key:"monitorSession",get:function(){return this._monitorSession}},{key:"monitorAnonymousSession",get:function(){return this._monitorAnonymousSession}},{key:"checkSessionInterval",get:function(){return this._checkSessionInterval}},{key:"stopCheckSessionOnError",get:function(){return this._stopCheckSessionOnError}},{key:"query_status_response_type",get:function(){return this._query_status_response_type}},{key:"revokeAccessTokenOnSignout",get:function(){return this._revokeAccessTokenOnSignout}},{key:"redirectNavigator",get:function(){return this._redirectNavigator}},{key:"popupNavigator",get:function(){return this._popupNavigator}},{key:"iframeNavigator",get:function(){return this._iframeNavigator}},{key:"userStore",get:function(){return this._userStore}}]),H}(C.OidcClientSettings)},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.RedirectNavigator=void 0;var o=function(){function F(j,d){for(var m=0;m<d.length;m++){var v=d[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(j,v.key,v)}}return function(j,d,m){return d&&F(j.prototype,d),m&&F(j,m),j}}(),C=I(0);x.RedirectNavigator=function(){function F(){!function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")}(this,F)}return F.prototype.prepare=function(){return Promise.resolve(this)},F.prototype.navigate=function(d){return d&&d.url?(d.useReplaceToNavigate?window.location.replace(d.url):window.location=d.url,Promise.resolve()):(C.Log.error("RedirectNavigator.navigate: No url provided"),Promise.reject(new Error("No url provided")))},o(F,[{key:"url",get:function(){return window.location.href}}]),F}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.PopupNavigator=void 0;var o=I(0),C=I(42);x.PopupNavigator=function(){function F(){!function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")}(this,F)}return F.prototype.prepare=function(d){var m=new C.PopupWindow(d);return Promise.resolve(m)},F.prototype.callback=function(d,m,v){o.Log.debug("PopupNavigator.callback");try{return C.PopupWindow.notifyOpener(d,m,v),Promise.resolve()}catch(N){return Promise.reject(N)}},F}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.PopupWindow=void 0;var o=function(){function j(d,m){for(var v=0;v<m.length;v++){var N=m[v];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(d,N.key,N)}}return function(d,m,v){return m&&j(d.prototype,m),v&&j(d,v),d}}(),C=I(0),F=I(3);x.PopupWindow=function(){function j(d){var m=this;(function(L,X){if(!(L instanceof X))throw new TypeError("Cannot call a class as a function")})(this,j),this._promise=new Promise(function(M,L){m._resolve=M,m._reject=L}),this._popup=window.open("",d.popupWindowTarget||"_blank",d.popupWindowFeatures||"location=no,toolbar=no,width=500,height=500,left=100,top=100;"),this._popup&&(C.Log.debug("PopupWindow.ctor: popup successfully created"),this._checkForPopupClosedTimer=window.setInterval(this._checkForPopupClosed.bind(this),500))}return j.prototype.navigate=function(m){return this._popup?m&&m.url?(C.Log.debug("PopupWindow.navigate: Setting URL in popup"),this._id=m.id,this._id&&(window["popupCallback_"+m.id]=this._callback.bind(this)),this._popup.focus(),this._popup.window.location=m.url):(this._error("PopupWindow.navigate: no url provided"),this._error("No url provided")):this._error("PopupWindow.navigate: Error opening popup window"),this.promise},j.prototype._success=function(m){C.Log.debug("PopupWindow.callback: Successful response from popup window"),this._cleanup(),this._resolve(m)},j.prototype._error=function(m){C.Log.error("PopupWindow.error: ",m),this._cleanup(),this._reject(new Error(m))},j.prototype.close=function(){this._cleanup(!1)},j.prototype._cleanup=function(m){C.Log.debug("PopupWindow.cleanup"),window.clearInterval(this._checkForPopupClosedTimer),this._checkForPopupClosedTimer=null,delete window["popupCallback_"+this._id],this._popup&&!m&&this._popup.close(),this._popup=null},j.prototype._checkForPopupClosed=function(){this._popup&&!this._popup.closed||this._error("Popup window closed")},j.prototype._callback=function(m,v){this._cleanup(v),m?(C.Log.debug("PopupWindow.callback success"),this._success({url:m})):(C.Log.debug("PopupWindow.callback: Invalid response from popup"),this._error("Invalid response from popup"))},j.notifyOpener=function(m,v,N){if(window.opener){if(m=m||window.location.href){var M=F.UrlUtility.parseUrlFragment(m,N);if(M.state){var X=window.opener["popupCallback_"+M.state];X?(C.Log.debug("PopupWindow.notifyOpener: passing url message to opener"),X(m,v)):C.Log.warn("PopupWindow.notifyOpener: no matching callback found on opener")}else C.Log.warn("PopupWindow.notifyOpener: no state found in response url")}}else C.Log.warn("PopupWindow.notifyOpener: no window.opener. Can't complete notification.")},o(j,[{key:"promise",get:function(){return this._promise}}]),j}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.IFrameNavigator=void 0;var o=I(0),C=I(44);x.IFrameNavigator=function(){function F(){!function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")}(this,F)}return F.prototype.prepare=function(d){var m=new C.IFrameWindow(d);return Promise.resolve(m)},F.prototype.callback=function(d){o.Log.debug("IFrameNavigator.callback");try{return C.IFrameWindow.notifyParent(d),Promise.resolve()}catch(m){return Promise.reject(m)}},F}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.IFrameWindow=void 0;var o=function(){function F(j,d){for(var m=0;m<d.length;m++){var v=d[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(j,v.key,v)}}return function(j,d,m){return d&&F(j.prototype,d),m&&F(j,m),j}}(),C=I(0);x.IFrameWindow=function(){function F(j){var d=this;(function(v,N){if(!(v instanceof N))throw new TypeError("Cannot call a class as a function")})(this,F),this._promise=new Promise(function(m,v){d._resolve=m,d._reject=v}),this._boundMessageEvent=this._message.bind(this),window.addEventListener("message",this._boundMessageEvent,!1),this._frame=window.document.createElement("iframe"),this._frame.style.visibility="hidden",this._frame.style.position="absolute",this._frame.width=0,this._frame.height=0,window.document.body.appendChild(this._frame)}return F.prototype.navigate=function(d){if(d&&d.url){var m=d.silentRequestTimeout||1e4;C.Log.debug("IFrameWindow.navigate: Using timeout of:",m),this._timer=window.setTimeout(this._timeout.bind(this),m),this._frame.src=d.url}else this._error("No url provided");return this.promise},F.prototype._success=function(d){this._cleanup(),C.Log.debug("IFrameWindow: Successful response from frame window"),this._resolve(d)},F.prototype._error=function(d){this._cleanup(),C.Log.error(d),this._reject(new Error(d))},F.prototype.close=function(){this._cleanup()},F.prototype._cleanup=function(){this._frame&&(C.Log.debug("IFrameWindow: cleanup"),window.removeEventListener("message",this._boundMessageEvent,!1),window.clearTimeout(this._timer),window.document.body.removeChild(this._frame),this._timer=null,this._frame=null,this._boundMessageEvent=null)},F.prototype._timeout=function(){C.Log.debug("IFrameWindow.timeout"),this._error("Frame window timed out")},F.prototype._message=function(d){if(C.Log.debug("IFrameWindow.message"),this._timer&&d.origin===this._origin&&d.source===this._frame.contentWindow&&"string"==typeof d.data&&(d.data.startsWith("http://")||d.data.startsWith("https://"))){var m=d.data;m?this._success({url:m}):this._error("Invalid response from frame")}},F.notifyParent=function(d){C.Log.debug("IFrameWindow.notifyParent"),(d=d||window.location.href)&&(C.Log.debug("IFrameWindow.notifyParent: posting url message to parent"),window.parent.postMessage(d,location.protocol+"//"+location.host))},o(F,[{key:"promise",get:function(){return this._promise}},{key:"_origin",get:function(){return location.protocol+"//"+location.host}}]),F}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.UserManagerEvents=void 0;var o=I(0),C=I(16),F=I(17);x.UserManagerEvents=function(j){function d(m){!function(M,L){if(!(M instanceof L))throw new TypeError("Cannot call a class as a function")}(this,d);var v=function(M,L){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!L||"object"!=typeof L&&"function"!=typeof L?M:L}(this,j.call(this,m));return v._userLoaded=new F.Event("User loaded"),v._userUnloaded=new F.Event("User unloaded"),v._silentRenewError=new F.Event("Silent renew error"),v._userSignedIn=new F.Event("User signed in"),v._userSignedOut=new F.Event("User signed out"),v._userSessionChanged=new F.Event("User session changed"),v}return function(v,N){if("function"!=typeof N&&null!==N)throw new TypeError("Super expression must either be null or a function, not "+typeof N);v.prototype=Object.create(N&&N.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(v,N):v.__proto__=N)}(d,j),d.prototype.load=function(v){var N=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];o.Log.debug("UserManagerEvents.load"),j.prototype.load.call(this,v),N&&this._userLoaded.raise(v)},d.prototype.unload=function(){o.Log.debug("UserManagerEvents.unload"),j.prototype.unload.call(this),this._userUnloaded.raise()},d.prototype.addUserLoaded=function(v){this._userLoaded.addHandler(v)},d.prototype.removeUserLoaded=function(v){this._userLoaded.removeHandler(v)},d.prototype.addUserUnloaded=function(v){this._userUnloaded.addHandler(v)},d.prototype.removeUserUnloaded=function(v){this._userUnloaded.removeHandler(v)},d.prototype.addSilentRenewError=function(v){this._silentRenewError.addHandler(v)},d.prototype.removeSilentRenewError=function(v){this._silentRenewError.removeHandler(v)},d.prototype._raiseSilentRenewError=function(v){o.Log.debug("UserManagerEvents._raiseSilentRenewError",v.message),this._silentRenewError.raise(v)},d.prototype.addUserSignedIn=function(v){this._userSignedIn.addHandler(v)},d.prototype.removeUserSignedIn=function(v){this._userSignedIn.removeHandler(v)},d.prototype._raiseUserSignedIn=function(){o.Log.debug("UserManagerEvents._raiseUserSignedIn"),this._userSignedIn.raise()},d.prototype.addUserSignedOut=function(v){this._userSignedOut.addHandler(v)},d.prototype.removeUserSignedOut=function(v){this._userSignedOut.removeHandler(v)},d.prototype._raiseUserSignedOut=function(){o.Log.debug("UserManagerEvents._raiseUserSignedOut"),this._userSignedOut.raise()},d.prototype.addUserSessionChanged=function(v){this._userSessionChanged.addHandler(v)},d.prototype.removeUserSessionChanged=function(v){this._userSessionChanged.removeHandler(v)},d.prototype._raiseUserSessionChanged=function(){o.Log.debug("UserManagerEvents._raiseUserSessionChanged"),this._userSessionChanged.raise()},d}(C.AccessTokenEvents)},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.Timer=void 0;var o=function(){function v(N,M){for(var L=0;L<M.length;L++){var X=M[L];X.enumerable=X.enumerable||!1,X.configurable=!0,"value"in X&&(X.writable=!0),Object.defineProperty(N,X.key,X)}}return function(N,M,L){return M&&v(N.prototype,M),L&&v(N,L),N}}(),C=I(0),F=I(1),j=I(17);function d(v,N){if(!(v instanceof N))throw new TypeError("Cannot call a class as a function")}function m(v,N){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!N||"object"!=typeof N&&"function"!=typeof N?v:N}x.Timer=function(v){function N(M){var L=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F.Global.timer,X=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;d(this,N);var H=m(this,v.call(this,M));return H._timer=L,H._nowFunc=X||function(){return Date.now()/1e3},H}return function(L,X){if("function"!=typeof X&&null!==X)throw new TypeError("Super expression must either be null or a function, not "+typeof X);L.prototype=Object.create(X&&X.prototype,{constructor:{value:L,enumerable:!1,writable:!0,configurable:!0}}),X&&(Object.setPrototypeOf?Object.setPrototypeOf(L,X):L.__proto__=X)}(N,v),N.prototype.init=function(L){L<=0&&(L=1),L=parseInt(L);var X=this.now+L;if(this.expiration===X&&this._timerHandle)C.Log.debug("Timer.init timer "+this._name+" skipping initialization since already initialized for expiration:",this.expiration);else{this.cancel(),C.Log.debug("Timer.init timer "+this._name+" for duration:",L),this._expiration=X;var H=5;L<H&&(H=L),this._timerHandle=this._timer.setInterval(this._callback.bind(this),1e3*H)}},N.prototype.cancel=function(){this._timerHandle&&(C.Log.debug("Timer.cancel: ",this._name),this._timer.clearInterval(this._timerHandle),this._timerHandle=null)},N.prototype._callback=function(){C.Log.debug("Timer.callback; "+this._name+" timer expires in:",this._expiration-this.now),this._expiration<=this.now&&(this.cancel(),v.prototype.raise.call(this))},o(N,[{key:"now",get:function(){return parseInt(this._nowFunc())}},{key:"expiration",get:function(){return this._expiration}}]),N}(j.Event)},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.SilentRenewService=void 0;var o=I(0);x.SilentRenewService=function(){function C(F){(function(d,m){if(!(d instanceof m))throw new TypeError("Cannot call a class as a function")})(this,C),this._userManager=F}return C.prototype.start=function(){this._callback||(this._callback=this._tokenExpiring.bind(this),this._userManager.events.addAccessTokenExpiring(this._callback),this._userManager.getUser().then(function(j){}).catch(function(j){o.Log.error("SilentRenewService.start: Error from getUser:",j.message)}))},C.prototype.stop=function(){this._callback&&(this._userManager.events.removeAccessTokenExpiring(this._callback),delete this._callback)},C.prototype._tokenExpiring=function(){var j=this;this._userManager.signinSilent().then(function(d){o.Log.debug("SilentRenewService._tokenExpiring: Silent token renewal successful")},function(d){o.Log.error("SilentRenewService._tokenExpiring: Error from signinSilent:",d.message),j._userManager.events._raiseSilentRenewError(d)})},C}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.CordovaPopupNavigator=void 0;var o=I(21);x.CordovaPopupNavigator=function(){function C(){!function(j,d){if(!(j instanceof d))throw new TypeError("Cannot call a class as a function")}(this,C)}return C.prototype.prepare=function(j){var d=new o.CordovaPopupWindow(j);return Promise.resolve(d)},C}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.CordovaIFrameNavigator=void 0;var o=I(21);x.CordovaIFrameNavigator=function(){function C(){!function(j,d){if(!(j instanceof d))throw new TypeError("Cannot call a class as a function")}(this,C)}return C.prototype.prepare=function(j){j.popupWindowFeatures="hidden=yes";var d=new o.CordovaPopupWindow(j);return Promise.resolve(d)},C}()},function(O,x,I){"use strict";Object.defineProperty(x,"__esModule",{value:!0}),x.Version="1.11.5"}])},9165:we=>{var O=String.prototype.replace,x=/%20/g;we.exports={default:"RFC3986",formatters:{RFC1738:function(o){return O.call(o,x,"+")},RFC3986:function(o){return String(o)}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},1781:(we,O,x)=>{var I=x(3726),o=x(6954),C=x(9165);we.exports={formats:C,parse:o,stringify:I}},6954:(we,O,x)=>{var I=x(4393),o=Object.prototype.hasOwnProperty,C=Array.isArray,F={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:I.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},d=function(H,Q){return H&&"string"==typeof H&&Q.comma&&H.indexOf(",")>-1?H.split(","):H},L=function(Q,q,Y,le){if(Q){var B=Y.allowDots?Q.replace(/\.([^.[]+)/g,"[$1]"):Q,U=/(\[[^[\]]*])/g,ee=Y.depth>0&&/(\[[^[\]]*])/.exec(B),ge=ee?B.slice(0,ee.index):B,_e=[];if(ge){if(!Y.plainObjects&&o.call(Object.prototype,ge)&&!Y.allowPrototypes)return;_e.push(ge)}for(var pe=0;Y.depth>0&&null!==(ee=U.exec(B))&&pe<Y.depth;){if(pe+=1,!Y.plainObjects&&o.call(Object.prototype,ee[1].slice(1,-1))&&!Y.allowPrototypes)return;_e.push(ee[1])}return ee&&_e.push("["+B.slice(ee.index)+"]"),function(H,Q,q,Y){for(var le=Y?Q:d(Q,q),B=H.length-1;B>=0;--B){var z,U=H[B];if("[]"===U&&q.parseArrays)z=[].concat(le);else{z=q.plainObjects?Object.create(null):{};var ee="["===U.charAt(0)&&"]"===U.charAt(U.length-1)?U.slice(1,-1):U,ge=parseInt(ee,10);q.parseArrays||""!==ee?!isNaN(ge)&&U!==ee&&String(ge)===ee&&ge>=0&&q.parseArrays&&ge<=q.arrayLimit?(z=[])[ge]=le:"__proto__"!==ee&&(z[ee]=le):z={0:le}}le=z}return le}(_e,q,Y,le)}};we.exports=function(H,Q){var q=function(Q){if(!Q)return F;if(null!=Q.decoder&&"function"!=typeof Q.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==Q.charset&&"utf-8"!==Q.charset&&"iso-8859-1"!==Q.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");return{allowDots:void 0===Q.allowDots?F.allowDots:!!Q.allowDots,allowPrototypes:"boolean"==typeof Q.allowPrototypes?Q.allowPrototypes:F.allowPrototypes,allowSparse:"boolean"==typeof Q.allowSparse?Q.allowSparse:F.allowSparse,arrayLimit:"number"==typeof Q.arrayLimit?Q.arrayLimit:F.arrayLimit,charset:void 0===Q.charset?F.charset:Q.charset,charsetSentinel:"boolean"==typeof Q.charsetSentinel?Q.charsetSentinel:F.charsetSentinel,comma:"boolean"==typeof Q.comma?Q.comma:F.comma,decoder:"function"==typeof Q.decoder?Q.decoder:F.decoder,delimiter:"string"==typeof Q.delimiter||I.isRegExp(Q.delimiter)?Q.delimiter:F.delimiter,depth:"number"==typeof Q.depth||!1===Q.depth?+Q.depth:F.depth,ignoreQueryPrefix:!0===Q.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof Q.interpretNumericEntities?Q.interpretNumericEntities:F.interpretNumericEntities,parameterLimit:"number"==typeof Q.parameterLimit?Q.parameterLimit:F.parameterLimit,parseArrays:!1!==Q.parseArrays,plainObjects:"boolean"==typeof Q.plainObjects?Q.plainObjects:F.plainObjects,strictNullHandling:"boolean"==typeof Q.strictNullHandling?Q.strictNullHandling:F.strictNullHandling}}(Q);if(""===H||null==H)return q.plainObjects?Object.create(null):{};for(var Y="string"==typeof H?function(Q,q){var ee,Y={},z=(q.ignoreQueryPrefix?Q.replace(/^\?/,""):Q).split(q.delimiter,q.parameterLimit===1/0?void 0:q.parameterLimit),U=-1,ge=q.charset;if(q.charsetSentinel)for(ee=0;ee<z.length;++ee)0===z[ee].indexOf("utf8=")&&("utf8=%E2%9C%93"===z[ee]?ge="utf-8":"utf8=%26%2310003%3B"===z[ee]&&(ge="iso-8859-1"),U=ee,ee=z.length);for(ee=0;ee<z.length;++ee)if(ee!==U){var A,y,_e=z[ee],pe=_e.indexOf("]="),g=-1===pe?_e.indexOf("="):pe+1;-1===g?(A=q.decoder(_e,F.decoder,ge,"key"),y=q.strictNullHandling?null:""):(A=q.decoder(_e.slice(0,g),F.decoder,ge,"key"),y=I.maybeMap(d(_e.slice(g+1),q),function(E){return q.decoder(E,F.decoder,ge,"value")})),y&&q.interpretNumericEntities&&"iso-8859-1"===ge&&(y=y.replace(/&#(\d+);/g,function(Q,q){return String.fromCharCode(parseInt(q,10))})),_e.indexOf("[]=")>-1&&(y=C(y)?[y]:y),Y[A]=o.call(Y,A)?I.combine(Y[A],y):y}return Y}(H,q):H,le=q.plainObjects?Object.create(null):{},B=Object.keys(Y),z=0;z<B.length;++z){var U=B[z],ee=L(U,Y[U],q,"string"==typeof H);le=I.merge(le,ee,q)}return!0===q.allowSparse?le:I.compact(le)}},3726:(we,O,x)=>{var I=x(8475),o=x(4393),C=x(9165),F=Object.prototype.hasOwnProperty,j={brackets:function(B){return B+"[]"},comma:"comma",indices:function(B,z){return B+"["+z+"]"},repeat:function(B){return B}},d=Array.isArray,m=String.prototype.split,v=Array.prototype.push,N=function(le,B){v.apply(le,d(B)?B:[B])},M=Date.prototype.toISOString,L=C.default,X={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:o.encode,encodeValuesOnly:!1,format:L,formatter:C.formatters[L],indices:!1,serializeDate:function(B){return M.call(B)},skipNulls:!1,strictNullHandling:!1},Q={},q=function le(B,z,U,ee,ge,_e,pe,g,A,y,E,D,P,ne,fe){for(var Oe=B,oe=fe,Ge=0,at=!1;void 0!==(oe=oe.get(Q))&&!at;){var Fe=oe.get(B);if(Ge+=1,void 0!==Fe){if(Fe===Ge)throw new RangeError("Cyclic object value");at=!0}void 0===oe.get(Q)&&(Ge=0)}if("function"==typeof pe?Oe=pe(z,Oe):Oe instanceof Date?Oe=y(Oe):"comma"===U&&d(Oe)&&(Oe=o.maybeMap(Oe,function(me){return me instanceof Date?y(me):me})),null===Oe){if(ee)return _e&&!P?_e(z,X.encoder,ne,"key",E):z;Oe=""}if(function(B){return"string"==typeof B||"number"==typeof B||"boolean"==typeof B||"symbol"==typeof B||"bigint"==typeof B}(Oe)||o.isBuffer(Oe)){if(_e){var We=P?z:_e(z,X.encoder,ne,"key",E);if("comma"===U&&P){for(var Qe=m.call(String(Oe),","),ft="",Ze=0;Ze<Qe.length;++Ze)ft+=(0===Ze?"":",")+D(_e(Qe[Ze],X.encoder,ne,"value",E));return[D(We)+"="+ft]}return[D(We)+"="+D(_e(Oe,X.encoder,ne,"value",E))]}return[D(z)+"="+D(String(Oe))]}var nt,Ue=[];if(void 0===Oe)return Ue;if("comma"===U&&d(Oe))nt=[{value:Oe.length>0?Oe.join(",")||null:void 0}];else if(d(pe))nt=pe;else{var de=Object.keys(Oe);nt=g?de.sort(g):de}for(var te=0;te<nt.length;++te){var ae=nt[te],Te="object"==typeof ae&&void 0!==ae.value?ae.value:Oe[ae];if(!ge||null!==Te){var ze=d(Oe)?"function"==typeof U?U(z,ae):z:z+(A?"."+ae:"["+ae+"]");fe.set(B,Ge);var ce=I();ce.set(Q,fe),N(Ue,le(Te,ze,U,ee,ge,_e,pe,g,A,y,E,D,P,ne,ce))}}return Ue};we.exports=function(le,B){var ee,z=le,U=function(B){if(!B)return X;if(null!=B.encoder&&"function"!=typeof B.encoder)throw new TypeError("Encoder has to be a function.");var z=B.charset||X.charset;if(void 0!==B.charset&&"utf-8"!==B.charset&&"iso-8859-1"!==B.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var U=C.default;if(void 0!==B.format){if(!F.call(C.formatters,B.format))throw new TypeError("Unknown format option provided.");U=B.format}var ee=C.formatters[U],ge=X.filter;return("function"==typeof B.filter||d(B.filter))&&(ge=B.filter),{addQueryPrefix:"boolean"==typeof B.addQueryPrefix?B.addQueryPrefix:X.addQueryPrefix,allowDots:void 0===B.allowDots?X.allowDots:!!B.allowDots,charset:z,charsetSentinel:"boolean"==typeof B.charsetSentinel?B.charsetSentinel:X.charsetSentinel,delimiter:void 0===B.delimiter?X.delimiter:B.delimiter,encode:"boolean"==typeof B.encode?B.encode:X.encode,encoder:"function"==typeof B.encoder?B.encoder:X.encoder,encodeValuesOnly:"boolean"==typeof B.encodeValuesOnly?B.encodeValuesOnly:X.encodeValuesOnly,filter:ge,format:U,formatter:ee,serializeDate:"function"==typeof B.serializeDate?B.serializeDate:X.serializeDate,skipNulls:"boolean"==typeof B.skipNulls?B.skipNulls:X.skipNulls,sort:"function"==typeof B.sort?B.sort:null,strictNullHandling:"boolean"==typeof B.strictNullHandling?B.strictNullHandling:X.strictNullHandling}}(B);"function"==typeof U.filter?z=(0,U.filter)("",z):d(U.filter)&&(ee=U.filter);var _e=[];if("object"!=typeof z||null===z)return"";var g=j[B&&B.arrayFormat in j?B.arrayFormat:B&&"indices"in B?B.indices?"indices":"repeat":"indices"];ee||(ee=Object.keys(z)),U.sort&&ee.sort(U.sort);for(var A=I(),y=0;y<ee.length;++y){var E=ee[y];U.skipNulls&&null===z[E]||N(_e,q(z[E],E,g,U.strictNullHandling,U.skipNulls,U.encode?U.encoder:null,U.filter,U.sort,U.allowDots,U.serializeDate,U.format,U.formatter,U.encodeValuesOnly,U.charset,A))}var D=_e.join(U.delimiter),P=!0===U.addQueryPrefix?"?":"";return U.charsetSentinel&&(P+="iso-8859-1"===U.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),D.length>0?P+D:""}},4393:(we,O,x)=>{var I=x(9165),o=Object.prototype.hasOwnProperty,C=Array.isArray,F=function(){for(var Y=[],le=0;le<256;++le)Y.push("%"+((le<16?"0":"")+le.toString(16)).toUpperCase());return Y}(),d=function(le,B){for(var z=B&&B.plainObjects?Object.create(null):{},U=0;U<le.length;++U)void 0!==le[U]&&(z[U]=le[U]);return z};we.exports={arrayToObject:d,assign:function(le,B){return Object.keys(B).reduce(function(z,U){return z[U]=B[U],z},le)},combine:function(le,B){return[].concat(le,B)},compact:function(le){for(var B=[{obj:{o:le},prop:"o"}],z=[],U=0;U<B.length;++U)for(var ee=B[U],ge=ee.obj[ee.prop],_e=Object.keys(ge),pe=0;pe<_e.length;++pe){var g=_e[pe],A=ge[g];"object"==typeof A&&null!==A&&-1===z.indexOf(A)&&(B.push({obj:ge,prop:g}),z.push(A))}return function(le){for(;le.length>1;){var B=le.pop(),z=B.obj[B.prop];if(C(z)){for(var U=[],ee=0;ee<z.length;++ee)void 0!==z[ee]&&U.push(z[ee]);B.obj[B.prop]=U}}}(B),le},decode:function(Y,le,B){var z=Y.replace(/\+/g," ");if("iso-8859-1"===B)return z.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(z)}catch{return z}},encode:function(le,B,z,U,ee){if(0===le.length)return le;var ge=le;if("symbol"==typeof le?ge=Symbol.prototype.toString.call(le):"string"!=typeof le&&(ge=String(le)),"iso-8859-1"===z)return escape(ge).replace(/%u[0-9a-f]{4}/gi,function(A){return"%26%23"+parseInt(A.slice(2),16)+"%3B"});for(var _e="",pe=0;pe<ge.length;++pe){var g=ge.charCodeAt(pe);45===g||46===g||95===g||126===g||g>=48&&g<=57||g>=65&&g<=90||g>=97&&g<=122||ee===I.RFC1738&&(40===g||41===g)?_e+=ge.charAt(pe):g<128?_e+=F[g]:g<2048?_e+=F[192|g>>6]+F[128|63&g]:g<55296||g>=57344?_e+=F[224|g>>12]+F[128|g>>6&63]+F[128|63&g]:(g=65536+((1023&g)<<10|1023&ge.charCodeAt(pe+=1)),_e+=F[240|g>>18]+F[128|g>>12&63]+F[128|g>>6&63]+F[128|63&g])}return _e},isBuffer:function(le){return!(!le||"object"!=typeof le||!(le.constructor&&le.constructor.isBuffer&&le.constructor.isBuffer(le)))},isRegExp:function(le){return"[object RegExp]"===Object.prototype.toString.call(le)},maybeMap:function(le,B){if(C(le)){for(var z=[],U=0;U<le.length;U+=1)z.push(B(le[U]));return z}return B(le)},merge:function Y(le,B,z){if(!B)return le;if("object"!=typeof B){if(C(le))le.push(B);else{if(!le||"object"!=typeof le)return[le,B];(z&&(z.plainObjects||z.allowPrototypes)||!o.call(Object.prototype,B))&&(le[B]=!0)}return le}if(!le||"object"!=typeof le)return[le].concat(B);var U=le;return C(le)&&!C(B)&&(U=d(le,z)),C(le)&&C(B)?(B.forEach(function(ee,ge){if(o.call(le,ge)){var _e=le[ge];_e&&"object"==typeof _e&&ee&&"object"==typeof ee?le[ge]=Y(_e,ee,z):le.push(ee)}else le[ge]=ee}),le):Object.keys(B).reduce(function(ee,ge){var _e=B[ge];return ee[ge]=o.call(ee,ge)?Y(ee[ge],_e,z):_e,ee},U)}}},1887:(we,O,x)=>{var o=x(4284),C=x(5943),F=x(4854);function j(c){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+c,w=1;w<arguments.length;w++)f+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!o)throw Error(j(227));function d(c,f,w,V,ie,xe,Ie,qe,yt){var _t=Array.prototype.slice.call(arguments,3);try{f.apply(w,_t)}catch(Bt){this.onError(Bt)}}var m=!1,v=null,N=!1,M=null,L={onError:function(c){m=!0,v=c}};function X(c,f,w,V,ie,xe,Ie,qe,yt){m=!1,v=null,d.apply(L,arguments)}var Q=null,q=null,Y=null;function le(c,f,w){var V=c.type||"unknown-event";c.currentTarget=Y(w),function H(c,f,w,V,ie,xe,Ie,qe,yt){if(X.apply(this,arguments),m){if(!m)throw Error(j(198));var _t=v;m=!1,v=null,N||(N=!0,M=_t)}}(V,f,void 0,c),c.currentTarget=null}var B=null,z={};function U(){if(B)for(var c in z){var f=z[c],w=B.indexOf(c);if(!(-1<w))throw Error(j(96,c));if(!ge[w]){if(!f.extractEvents)throw Error(j(97,c));for(var V in ge[w]=f,w=f.eventTypes){var ie=void 0,xe=w[V],Ie=f,qe=V;if(_e.hasOwnProperty(qe))throw Error(j(99,qe));_e[qe]=xe;var yt=xe.phasedRegistrationNames;if(yt){for(ie in yt)yt.hasOwnProperty(ie)&&ee(yt[ie],Ie,qe);ie=!0}else xe.registrationName?(ee(xe.registrationName,Ie,qe),ie=!0):ie=!1;if(!ie)throw Error(j(98,V,c))}}}}function ee(c,f,w){if(pe[c])throw Error(j(100,c));pe[c]=f,g[c]=f.eventTypes[w].dependencies}var ge=[],_e={},pe={},g={};function A(c){var w,f=!1;for(w in c)if(c.hasOwnProperty(w)){var V=c[w];if(!z.hasOwnProperty(w)||z[w]!==V){if(z[w])throw Error(j(102,w));z[w]=V,f=!0}}f&&U()}var y=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),E=null,D=null,P=null;function ne(c){if(c=q(c)){if("function"!=typeof E)throw Error(j(280));var f=c.stateNode;f&&(f=Q(f),E(c.stateNode,c.type,f))}}function fe(c){D?P?P.push(c):P=[c]:D=c}function Oe(){if(D){var c=D,f=P;if(P=D=null,ne(c),f)for(c=0;c<f.length;c++)ne(f[c])}}function oe(c,f){return c(f)}function Ge(c,f,w,V,ie){return c(f,w,V,ie)}function at(){}var Fe=oe,We=!1,Qe=!1;function ft(){(null!==D||null!==P)&&(at(),Oe())}function Ze(c,f,w){if(Qe)return c(f,w);Qe=!0;try{return Fe(c,f,w)}finally{Qe=!1,ft()}}var Ue=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nt=Object.prototype.hasOwnProperty,de={},te={};function ce(c,f,w,V,ie,xe){this.acceptsBooleans=2===f||3===f||4===f,this.attributeName=V,this.attributeNamespace=ie,this.mustUseProperty=w,this.propertyName=c,this.type=f,this.sanitizeURL=xe}var me={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){me[c]=new ce(c,0,!1,c,null,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var f=c[0];me[f]=new ce(f,1,!1,c[1],null,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){me[c]=new ce(c,2,!1,c.toLowerCase(),null,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){me[c]=new ce(c,2,!1,c,null,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){me[c]=new ce(c,3,!1,c.toLowerCase(),null,!1)}),["checked","multiple","muted","selected"].forEach(function(c){me[c]=new ce(c,3,!0,c,null,!1)}),["capture","download"].forEach(function(c){me[c]=new ce(c,4,!1,c,null,!1)}),["cols","rows","size","span"].forEach(function(c){me[c]=new ce(c,6,!1,c,null,!1)}),["rowSpan","start"].forEach(function(c){me[c]=new ce(c,5,!1,c.toLowerCase(),null,!1)});var rt=/[\-:]([a-z])/g;function ye(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var f=c.replace(rt,ye);me[f]=new ce(f,1,!1,c,null,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var f=c.replace(rt,ye);me[f]=new ce(f,1,!1,c,"http://www.w3.org/1999/xlink",!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var f=c.replace(rt,ye);me[f]=new ce(f,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1)}),["tabIndex","crossOrigin"].forEach(function(c){me[c]=new ce(c,1,!1,c.toLowerCase(),null,!1)}),me.xlinkHref=new ce("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach(function(c){me[c]=new ce(c,1,!1,c.toLowerCase(),null,!0)});var $=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function k(c,f,w,V){var ie=me.hasOwnProperty(f)?me[f]:null;(null!==ie?0===ie.type:!V&&2<f.length&&("o"===f[0]||"O"===f[0])&&("n"===f[1]||"N"===f[1]))||(function ze(c,f,w,V){if(null==f||function Te(c,f,w,V){if(null!==w&&0===w.type)return!1;switch(typeof f){case"function":case"symbol":return!0;case"boolean":return!V&&(null!==w?!w.acceptsBooleans:"data-"!==(c=c.toLowerCase().slice(0,5))&&"aria-"!==c);default:return!1}}(c,f,w,V))return!0;if(V)return!1;if(null!==w)switch(w.type){case 3:return!f;case 4:return!1===f;case 5:return isNaN(f);case 6:return isNaN(f)||1>f}return!1}(f,w,ie,V)&&(w=null),V||null===ie?function ae(c){return!!nt.call(te,c)||!nt.call(de,c)&&(Ue.test(c)?te[c]=!0:(de[c]=!0,!1))}(f)&&(null===w?c.removeAttribute(f):c.setAttribute(f,""+w)):ie.mustUseProperty?c[ie.propertyName]=null===w?3!==ie.type&&"":w:(f=ie.attributeName,V=ie.attributeNamespace,null===w?c.removeAttribute(f):(w=3===(ie=ie.type)||4===ie&&!0===w?"":""+w,V?c.setAttributeNS(V,f,w):c.setAttribute(f,w))))}$.hasOwnProperty("ReactCurrentDispatcher")||($.ReactCurrentDispatcher={current:null}),$.hasOwnProperty("ReactCurrentBatchConfig")||($.ReactCurrentBatchConfig={suspense:null});var K=/^(.*)[\\\/]/,he="function"==typeof Symbol&&Symbol.for,Me=he?Symbol.for("react.element"):60103,Ye=he?Symbol.for("react.portal"):60106,it=he?Symbol.for("react.fragment"):60107,It=he?Symbol.for("react.strict_mode"):60108,At=he?Symbol.for("react.profiler"):60114,zt=he?Symbol.for("react.provider"):60109,Xt=he?Symbol.for("react.context"):60110,Pe=he?Symbol.for("react.concurrent_mode"):60111,Dn=he?Symbol.for("react.forward_ref"):60112,Wt=he?Symbol.for("react.suspense"):60113,Ot=he?Symbol.for("react.suspense_list"):60120,wn=he?Symbol.for("react.memo"):60115,ct=he?Symbol.for("react.lazy"):60116,vt=he?Symbol.for("react.block"):60121,sn="function"==typeof Symbol&&Symbol.iterator;function mn(c){return null===c||"object"!=typeof c?null:"function"==typeof(c=sn&&c[sn]||c["@@iterator"])?c:null}function Lt(c){if(null==c)return null;if("function"==typeof c)return c.displayName||c.name||null;if("string"==typeof c)return c;switch(c){case it:return"Fragment";case Ye:return"Portal";case At:return"Profiler";case It:return"StrictMode";case Wt:return"Suspense";case Ot:return"SuspenseList"}if("object"==typeof c)switch(c.$$typeof){case Xt:return"Context.Consumer";case zt:return"Context.Provider";case Dn:var f=c.render;return f=f.displayName||f.name||"",c.displayName||(""!==f?"ForwardRef("+f+")":"ForwardRef");case wn:return Lt(c.type);case vt:return Lt(c.render);case ct:if(c=1===c._status?c._result:null)return Lt(c)}return null}function gn(c){var f="";do{e:switch(c.tag){case 3:case 4:case 6:case 7:case 10:case 9:var w="";break e;default:var V=c._debugOwner,ie=c._debugSource,xe=Lt(c.type);w=null,V&&(w=Lt(V.type)),V=xe,xe="",ie?xe=" (at "+ie.fileName.replace(K,"")+":"+ie.lineNumber+")":w&&(xe=" (created by "+w+")"),w="\n    in "+(V||"Unknown")+xe}f+=w,c=c.return}while(c);return f}function Sr(c){switch(typeof c){case"boolean":case"number":case"object":case"string":case"undefined":return c;default:return""}}function _n(c){var f=c.type;return(c=c.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===f||"radio"===f)}function fr(c){c._valueTracker||(c._valueTracker=function Mn(c){var f=_n(c)?"checked":"value",w=Object.getOwnPropertyDescriptor(c.constructor.prototype,f),V=""+c[f];if(!c.hasOwnProperty(f)&&void 0!==w&&"function"==typeof w.get&&"function"==typeof w.set){var ie=w.get,xe=w.set;return Object.defineProperty(c,f,{configurable:!0,get:function(){return ie.call(this)},set:function(Ie){V=""+Ie,xe.call(this,Ie)}}),Object.defineProperty(c,f,{enumerable:w.enumerable}),{getValue:function(){return V},setValue:function(Ie){V=""+Ie},stopTracking:function(){c._valueTracker=null,delete c[f]}}}}(c))}function Kr(c){if(!c)return!1;var f=c._valueTracker;if(!f)return!0;var w=f.getValue(),V="";return c&&(V=_n(c)?c.checked?"true":"false":c.value),(c=V)!==w&&(f.setValue(c),!0)}function Nn(c,f){return C({},f,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f.checked??c._wrapperState.initialChecked})}function Ir(c,f){var w=f.defaultValue??"",V=null!=f.checked?f.checked:f.defaultChecked;w=Sr(null!=f.value?f.value:w),c._wrapperState={initialChecked:V,initialValue:w,controlled:"checkbox"===f.type||"radio"===f.type?null!=f.checked:null!=f.value}}function ar(c,f){null!=(f=f.checked)&&k(c,"checked",f,!1)}function Tr(c,f){ar(c,f);var w=Sr(f.value),V=f.type;if(null!=w)"number"===V?(0===w&&""===c.value||c.value!=w)&&(c.value=""+w):c.value!==""+w&&(c.value=""+w);else if("submit"===V||"reset"===V)return void c.removeAttribute("value");f.hasOwnProperty("value")?no(c,f.type,w):f.hasOwnProperty("defaultValue")&&no(c,f.type,Sr(f.defaultValue)),null==f.checked&&null!=f.defaultChecked&&(c.defaultChecked=!!f.defaultChecked)}function li(c,f,w){if(f.hasOwnProperty("value")||f.hasOwnProperty("defaultValue")){var V=f.type;if(("submit"===V||"reset"===V)&&null==f.value)return;f=""+c._wrapperState.initialValue,w||f===c.value||(c.value=f),c.defaultValue=f}""!==(w=c.name)&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,""!==w&&(c.name=w)}function no(c,f,w){("number"!==f||c.ownerDocument.activeElement!==c)&&(null==w?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+w&&(c.defaultValue=""+w))}function mi(c,f){return c=C({children:void 0},f),(f=function Li(c){var f="";return o.Children.forEach(c,function(w){null!=w&&(f+=w)}),f}(f.children))&&(c.children=f),c}function ui(c,f,w,V){if(c=c.options,f){f={};for(var ie=0;ie<w.length;ie++)f["$"+w[ie]]=!0;for(w=0;w<c.length;w++)ie=f.hasOwnProperty("$"+c[w].value),c[w].selected!==ie&&(c[w].selected=ie),ie&&V&&(c[w].defaultSelected=!0)}else{for(w=""+Sr(w),f=null,ie=0;ie<c.length;ie++){if(c[ie].value===w)return c[ie].selected=!0,void(V&&(c[ie].defaultSelected=!0));null!==f||c[ie].disabled||(f=c[ie])}null!==f&&(f.selected=!0)}}function Pi(c,f){if(null!=f.dangerouslySetInnerHTML)throw Error(j(91));return C({},f,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function wo(c,f){var w=f.value;if(null==w){if(w=f.children,f=f.defaultValue,null!=w){if(null!=f)throw Error(j(92));if(Array.isArray(w)){if(!(1>=w.length))throw Error(j(93));w=w[0]}f=w}null==f&&(f=""),w=f}c._wrapperState={initialValue:Sr(w)}}function Ur(c,f){var w=Sr(f.value),V=Sr(f.defaultValue);null!=w&&((w=""+w)!==c.value&&(c.value=w),null==f.defaultValue&&c.defaultValue!==w&&(c.defaultValue=w)),null!=V&&(c.defaultValue=""+V)}function ro(c){var f=c.textContent;f===c._wrapperState.initialValue&&""!==f&&null!==f&&(c.value=f)}function Ui(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ln(c,f){return null==c||"http://www.w3.org/1999/xhtml"===c?Ui(f):"http://www.w3.org/2000/svg"===c&&"foreignObject"===f?"http://www.w3.org/1999/xhtml":c}var io,c,Xr=(c=function(c,f){if("http://www.w3.org/2000/svg"!==c.namespaceURI||"innerHTML"in c)c.innerHTML=f;else{for((io=io||document.createElement("div")).innerHTML="<svg>"+f.valueOf().toString()+"</svg>",f=io.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;f.firstChild;)c.appendChild(f.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(f,w,V,ie){MSApp.execUnsafeLocalFunction(function(){return c(f,w)})}:c);function ci(c,f){if(f){var w=c.firstChild;if(w&&w===c.lastChild&&3===w.nodeType)return void(w.nodeValue=f)}c.textContent=f}function Gi(c,f){var w={};return w[c.toLowerCase()]=f.toLowerCase(),w["Webkit"+c]="webkit"+f,w["Moz"+c]="moz"+f,w}var En={animationend:Gi("Animation","AnimationEnd"),animationiteration:Gi("Animation","AnimationIteration"),animationstart:Gi("Animation","AnimationStart"),transitionend:Gi("Transition","TransitionEnd")},Is={},Ts={};function oo(c){if(Is[c])return Is[c];if(!En[c])return c;var w,f=En[c];for(w in f)if(f.hasOwnProperty(w)&&w in Ts)return Is[c]=f[w];return c}y&&(Ts=document.createElement("div").style,"AnimationEvent"in window||(delete En.animationend.animation,delete En.animationiteration.animation,delete En.animationstart.animation),"TransitionEvent"in window||delete En.transitionend.transition);var ns=oo("animationend"),la=oo("animationiteration"),ua=oo("animationstart"),Ka=oo("transitionend"),Co="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rs=new("function"==typeof WeakMap?WeakMap:Map);function ca(c){var f=rs.get(c);return void 0===f&&rs.set(c,f=new Map),f}function b(c){var f=c,w=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do{0!=(1026&(f=c).effectTag)&&(w=f.return),c=f.return}while(c)}return 3===f.tag?w:null}function _(c){if(13===c.tag){var f=c.memoizedState;if(null===f&&null!==(c=c.alternate)&&(f=c.memoizedState),null!==f)return f.dehydrated}return null}function R(c){if(b(c)!==c)throw Error(j(188))}function se(c,f){if(null==f)throw Error(j(30));return null==c?f:Array.isArray(c)?Array.isArray(f)?(c.push.apply(c,f),c):(c.push(f),c):Array.isArray(f)?[c].concat(f):[c,f]}function ue(c,f,w){Array.isArray(c)?c.forEach(f,w):c&&f.call(w,c)}var Se=null;function Ce(c){if(c){var f=c._dispatchListeners,w=c._dispatchInstances;if(Array.isArray(f))for(var V=0;V<f.length&&!c.isPropagationStopped();V++)le(c,f[V],w[V]);else f&&le(c,f,w);c._dispatchListeners=null,c._dispatchInstances=null,c.isPersistent()||c.constructor.release(c)}}function ke(c){if(null!==c&&(Se=se(Se,c)),c=Se,Se=null,c){if(ue(c,Ce),Se)throw Error(j(95));if(N)throw c=M,N=!1,M=null,c}}function je(c){return(c=c.target||c.srcElement||window).correspondingUseElement&&(c=c.correspondingUseElement),3===c.nodeType?c.parentNode:c}function Le(c){if(!y)return!1;var f=(c="on"+c)in document;return f||((f=document.createElement("div")).setAttribute(c,"return;"),f="function"==typeof f[c]),f}var $e=[];function Ke(c){c.topLevelType=null,c.nativeEvent=null,c.targetInst=null,c.ancestors.length=0,10>$e.length&&$e.push(c)}function st(c,f,w,V){if($e.length){var ie=$e.pop();return ie.topLevelType=c,ie.eventSystemFlags=V,ie.nativeEvent=f,ie.targetInst=w,ie}return{topLevelType:c,eventSystemFlags:V,nativeEvent:f,targetInst:w,ancestors:[]}}function pt(c){var f=c.targetInst,w=f;do{if(!w){c.ancestors.push(w);break}var V=w;if(3===V.tag)V=V.stateNode.containerInfo;else{for(;V.return;)V=V.return;V=3!==V.tag?null:V.stateNode.containerInfo}if(!V)break;5!==(f=w.tag)&&6!==f||c.ancestors.push(w),w=Ya(V)}while(w);for(w=0;w<c.ancestors.length;w++){f=c.ancestors[w];var ie=je(c.nativeEvent);V=c.topLevelType;var xe=c.nativeEvent,Ie=c.eventSystemFlags;0===w&&(Ie|=64);for(var qe=null,yt=0;yt<ge.length;yt++){var _t=ge[yt];_t&&(_t=_t.extractEvents(V,f,xe,ie,Ie))&&(qe=se(qe,_t))}ke(qe)}}function ht(c,f,w){if(!w.has(c)){switch(c){case"scroll":Gr(f,"scroll",!0);break;case"focus":case"blur":Gr(f,"focus",!0),Gr(f,"blur",!0),w.set("blur",null),w.set("focus",null);break;case"cancel":case"close":Le(c)&&Gr(f,c,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Co.indexOf(c)&&jn(c,f)}w.set(c,null)}}var Ae,Ve,He,Xe=!1,ut=[],mt=null,jt=null,Pt=null,cn=new Map,Mt=new Map,Ut=[],On="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Kn="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Mr(c,f,w,V,ie){return{blockedOn:c,topLevelType:f,eventSystemFlags:32|w,nativeEvent:ie,container:V}}function Rr(c,f){switch(c){case"focus":case"blur":mt=null;break;case"dragenter":case"dragleave":jt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":cn.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(f.pointerId)}}function pr(c,f,w,V,ie,xe){return null===c||c.nativeEvent!==xe?(c=Mr(f,w,V,ie,xe),null!==f&&null!==(f=Za(f))&&Ve(f),c):(c.eventSystemFlags|=V,c)}function hr(c){var f=Ya(c.target);if(null!==f){var w=b(f);if(null!==w)if(13===(f=w.tag)){if(null!==(f=_(w)))return c.blockedOn=f,void F.unstable_runWithPriority(c.priority,function(){He(w)})}else if(3===f&&w.stateNode.hydrate)return void(c.blockedOn=3===w.tag?w.stateNode.containerInfo:null)}c.blockedOn=null}function ur(c){if(null!==c.blockedOn)return!1;var f=Ti(c.topLevelType,c.eventSystemFlags,c.container,c.nativeEvent);if(null!==f){var w=Za(f);return null!==w&&Ve(w),c.blockedOn=f,!1}return!0}function Nr(c,f,w){ur(c)&&w.delete(f)}function Rs(){for(Xe=!1;0<ut.length;){var c=ut[0];if(null!==c.blockedOn){null!==(c=Za(c.blockedOn))&&Ae(c);break}var f=Ti(c.topLevelType,c.eventSystemFlags,c.container,c.nativeEvent);null!==f?c.blockedOn=f:ut.shift()}null!==mt&&ur(mt)&&(mt=null),null!==jt&&ur(jt)&&(jt=null),null!==Pt&&ur(Pt)&&(Pt=null),cn.forEach(Nr),Mt.forEach(Nr)}function Vi(c,f){c.blockedOn===f&&(c.blockedOn=null,Xe||(Xe=!0,F.unstable_scheduleCallback(F.unstable_NormalPriority,Rs)))}function ks(c){function f(ie){return Vi(ie,c)}if(0<ut.length){Vi(ut[0],c);for(var w=1;w<ut.length;w++){var V=ut[w];V.blockedOn===c&&(V.blockedOn=null)}}for(null!==mt&&Vi(mt,c),null!==jt&&Vi(jt,c),null!==Pt&&Vi(Pt,c),cn.forEach(f),Mt.forEach(f),w=0;w<Ut.length;w++)(V=Ut[w]).blockedOn===c&&(V.blockedOn=null);for(;0<Ut.length&&null===(w=Ut[0]).blockedOn;)hr(w),null===w.blockedOn&&Ut.shift()}var Do={},da=new Map,Mo=new Map,Ii=["abort","abort",ns,"animationEnd",la,"animationIteration",ua,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ka,"transitionEnd","waiting","waiting"];function Wr(c,f){for(var w=0;w<c.length;w+=2){var V=c[w],ie=c[w+1],xe="on"+(ie[0].toUpperCase()+ie.slice(1));xe={phasedRegistrationNames:{bubbled:xe,captured:xe+"Capture"},dependencies:[V],eventPriority:f},Mo.set(V,f),da.set(V,xe),Do[ie]=xe}}Wr("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Wr("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Wr(Ii,2);for(var Os="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),No=0;No<Os.length;No++)Mo.set(Os[No],0);var fa=F.unstable_UserBlockingPriority,pa=F.unstable_runWithPriority,is=!0;function jn(c,f){Gr(f,c,!1)}function Gr(c,f,w){var V=Mo.get(f);switch(void 0===V?2:V){case 0:V=jo.bind(null,f,1,c);break;case 1:V=so.bind(null,f,1,c);break;default:V=An.bind(null,f,1,c)}c.addEventListener(f,V,!!w)}function jo(c,f,w,V){We||at();var ie=An,xe=We;We=!0;try{Ge(ie,c,f,w,V)}finally{(We=xe)||ft()}}function so(c,f,w,V){pa(fa,An.bind(null,c,f,w,V))}function An(c,f,w,V){if(is)if(0<ut.length&&-1<On.indexOf(c))c=Mr(null,c,f,w,V),ut.push(c);else{var ie=Ti(c,f,w,V);if(null===ie)Rr(c,V);else if(-1<On.indexOf(c))c=Mr(ie,c,f,w,V),ut.push(c);else if(!function lr(c,f,w,V,ie){switch(f){case"focus":return mt=pr(mt,c,f,w,V,ie),!0;case"dragenter":return jt=pr(jt,c,f,w,V,ie),!0;case"mouseover":return Pt=pr(Pt,c,f,w,V,ie),!0;case"pointerover":var xe=ie.pointerId;return cn.set(xe,pr(cn.get(xe)||null,c,f,w,V,ie)),!0;case"gotpointercapture":return Mt.set(xe=ie.pointerId,pr(Mt.get(xe)||null,c,f,w,V,ie)),!0}return!1}(ie,c,f,w,V)){Rr(c,V),c=st(c,V,null,f);try{Ze(pt,c)}finally{Ke(c)}}}}function Ti(c,f,w,V){if(null!==(w=Ya(w=je(V)))){var ie=b(w);if(null===ie)w=null;else{var xe=ie.tag;if(13===xe){if(null!==(w=_(ie)))return w;w=null}else if(3===xe){if(ie.stateNode.hydrate)return 3===ie.tag?ie.stateNode.containerInfo:null;w=null}else ie!==w&&(w=null)}}c=st(c,V,w,f);try{Ze(pt,c)}finally{Ke(c)}return null}var $i={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mr=["Webkit","ms","Moz","O"];function Xa(c,f,w){return null==f||"boolean"==typeof f||""===f?"":w||"number"!=typeof f||0===f||$i.hasOwnProperty(c)&&$i[c]?(""+f).trim():f+"px"}function xo(c,f){for(var w in c=c.style,f)if(f.hasOwnProperty(w)){var V=0===w.indexOf("--"),ie=Xa(w,f[w],V);"float"===w&&(w="cssFloat"),V?c.setProperty(w,ie):c[w]=ie}}Object.keys($i).forEach(function(c){mr.forEach(function(f){f=f+c.charAt(0).toUpperCase()+c.substring(1),$i[f]=$i[c]})});var Bo=C({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wa(c,f){if(f){if(Bo[c]&&(null!=f.children||null!=f.dangerouslySetInnerHTML))throw Error(j(137,c,""));if(null!=f.dangerouslySetInnerHTML){if(null!=f.children)throw Error(j(60));if("object"!=typeof f.dangerouslySetInnerHTML||!("__html"in f.dangerouslySetInnerHTML))throw Error(j(61))}if(null!=f.style&&"object"!=typeof f.style)throw Error(j(62,""))}}function Ja(c,f){if(-1===c.indexOf("-"))return"string"==typeof f.is;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qa="http://www.w3.org/1999/xhtml";function Lo(c,f){var w=ca(c=9===c.nodeType||11===c.nodeType?c:c.ownerDocument);f=g[f];for(var V=0;V<f.length;V++)ht(f[V],c,w)}function Hl(){}function pc(c){if(void 0===(c=c||("undefined"!=typeof document?document:void 0)))return null;try{return c.activeElement||c.body}catch{return c.body}}function wf(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Cf(c,f){var V,w=wf(c);for(c=0;w;){if(3===w.nodeType){if(V=c+w.textContent.length,c<=f&&V>=f)return{node:w,offset:f-c};c=V}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=wf(w)}}function qh(c,f){return!(!c||!f)&&(c===f||(!c||3!==c.nodeType)&&(f&&3===f.nodeType?qh(c,f.parentNode):"contains"in c?c.contains(f):!!c.compareDocumentPosition&&!!(16&c.compareDocumentPosition(f))))}function hc(){for(var c=window,f=pc();f instanceof c.HTMLIFrameElement;){try{var w="string"==typeof f.contentWindow.location.href}catch{w=!1}if(!w)break;f=pc((c=f.contentWindow).document)}return f}function ql(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f&&("input"===f&&("text"===c.type||"search"===c.type||"tel"===c.type||"url"===c.type||"password"===c.type)||"textarea"===f||"true"===c.contentEditable)}var vc=null,Ef=null;function Af(c,f){switch(c){case"button":case"input":case"select":case"textarea":return!!f.autoFocus}return!1}function yc(c,f){return"textarea"===c||"option"===c||"noscript"===c||"string"==typeof f.children||"number"==typeof f.children||"object"==typeof f.dangerouslySetInnerHTML&&null!==f.dangerouslySetInnerHTML&&null!=f.dangerouslySetInnerHTML.__html}var Kl="function"==typeof setTimeout?setTimeout:void 0,Pf="function"==typeof clearTimeout?clearTimeout:void 0;function ha(c){for(;null!=c;c=c.nextSibling){var f=c.nodeType;if(1===f||3===f)break}return c}function If(c){c=c.previousSibling;for(var f=0;c;){if(8===c.nodeType){var w=c.data;if("$"===w||"$!"===w||"$?"===w){if(0===f)return c;f--}else"/$"===w&&f++}c=c.previousSibling}return null}var _c=Math.random().toString(36).slice(2),os="__reactInternalInstance$"+_c,Xl="__reactEventHandlers$"+_c,Wl="__reactContainere$"+_c;function Ya(c){var f=c[os];if(f)return f;for(var w=c.parentNode;w;){if(f=w[Wl]||w[os]){if(w=f.alternate,null!==f.child||null!==w&&null!==w.child)for(c=If(c);null!==c;){if(w=c[os])return w;c=If(c)}return f}w=(c=w).parentNode}return null}function Za(c){return!(c=c[os]||c[Wl])||5!==c.tag&&6!==c.tag&&13!==c.tag&&3!==c.tag?null:c}function ss(c){if(5===c.tag||6===c.tag)return c.stateNode;throw Error(j(33))}function Jl(c){return c[Xl]||null}function zo(c){do{c=c.return}while(c&&5!==c.tag);return c||null}function Tf(c,f){var w=c.stateNode;if(!w)return null;var V=Q(w);if(!V)return null;w=V[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(V=!V.disabled)||(V=!("button"===(c=c.type)||"input"===c||"select"===c||"textarea"===c)),c=!V;break e;default:c=!1}if(c)return null;if(w&&"function"!=typeof w)throw Error(j(231,f,typeof w));return w}function Rf(c,f,w){(f=Tf(c,w.dispatchConfig.phasedRegistrationNames[f]))&&(w._dispatchListeners=se(w._dispatchListeners,f),w._dispatchInstances=se(w._dispatchInstances,c))}function Kh(c){if(c&&c.dispatchConfig.phasedRegistrationNames){for(var f=c._targetInst,w=[];f;)w.push(f),f=zo(f);for(f=w.length;0<f--;)Rf(w[f],"captured",c);for(f=0;f<w.length;f++)Rf(w[f],"bubbled",c)}}function bc(c,f,w){c&&w&&w.dispatchConfig.registrationName&&(f=Tf(c,w.dispatchConfig.registrationName))&&(w._dispatchListeners=se(w._dispatchListeners,f),w._dispatchInstances=se(w._dispatchInstances,c))}function ma(c){ue(c,Kh)}var as=null,wc=null,Ql=null;function kf(){if(Ql)return Ql;var c,V,f=wc,w=f.length,ie="value"in as?as.value:as.textContent,xe=ie.length;for(c=0;c<w&&f[c]===ie[c];c++);var Ie=w-c;for(V=1;V<=Ie&&f[w-V]===ie[xe-V];V++);return Ql=ie.slice(c,1<V?1-V:void 0)}function Yl(){return!0}function Zl(){return!1}function Hi(c,f,w,V){for(var ie in this.dispatchConfig=c,this._targetInst=f,this.nativeEvent=w,c=this.constructor.Interface)c.hasOwnProperty(ie)&&((f=c[ie])?this[ie]=f(w):"target"===ie?this.target=V:this[ie]=w[ie]);return this.isDefaultPrevented=(null!=w.defaultPrevented?w.defaultPrevented:!1===w.returnValue)?Yl:Zl,this.isPropagationStopped=Zl,this}function Xh(c,f,w,V){if(this.eventPool.length){var ie=this.eventPool.pop();return this.call(ie,c,f,w,V),ie}return new this(c,f,w,V)}function Wh(c){if(!(c instanceof this))throw Error(j(279));c.destructor(),10>this.eventPool.length&&this.eventPool.push(c)}function Of(c){c.eventPool=[],c.getPooled=Xh,c.release=Wh}C(Hi.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():"unknown"!=typeof c.returnValue&&(c.returnValue=!1),this.isDefaultPrevented=Yl)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():"unknown"!=typeof c.cancelBubble&&(c.cancelBubble=!0),this.isPropagationStopped=Yl)},persist:function(){this.isPersistent=Yl},isPersistent:Zl,destructor:function(){var f,c=this.constructor.Interface;for(f in c)this[f]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Zl,this._dispatchInstances=this._dispatchListeners=null}}),Hi.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Hi.extend=function(c){function f(){}function w(){return V.apply(this,arguments)}var V=this;f.prototype=V.prototype;var ie=new f;return C(ie,w.prototype),(w.prototype=ie).constructor=w,w.Interface=C({},V.Interface,c),w.extend=V.extend,Of(w),w},Of(Hi);var Jh=Hi.extend({data:null}),Qh=Hi.extend({data:null}),Yh=[9,13,27,32],Cc=y&&"CompositionEvent"in window,el=null;y&&"documentMode"in document&&(el=document.documentMode);var xv=y&&"TextEvent"in window&&!el,Ff=y&&(!Cc||el&&8<el&&11>=el),Df=String.fromCharCode(32),Uo={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Mf=!1;function Nf(c,f){switch(c){case"keyup":return-1!==Yh.indexOf(f.keyCode);case"keydown":return 229!==f.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function jf(c){return"object"==typeof(c=c.detail)&&"data"in c?c.data:null}var ga=!1,em={eventTypes:Uo,extractEvents:function(c,f,w,V){var ie;if(Cc)e:{switch(c){case"compositionstart":var xe=Uo.compositionStart;break e;case"compositionend":xe=Uo.compositionEnd;break e;case"compositionupdate":xe=Uo.compositionUpdate;break e}xe=void 0}else ga?Nf(c,w)&&(xe=Uo.compositionEnd):"keydown"===c&&229===w.keyCode&&(xe=Uo.compositionStart);return xe?(Ff&&"ko"!==w.locale&&(ga||xe!==Uo.compositionStart?xe===Uo.compositionEnd&&ga&&(ie=kf()):(wc="value"in(as=V)?as.value:as.textContent,ga=!0)),xe=Jh.getPooled(xe,f,w,V),(ie||null!==(ie=jf(w)))&&(xe.data=ie),ma(xe),ie=xe):ie=null,(c=xv?function Sv(c,f){switch(c){case"compositionend":return jf(f);case"keypress":return 32!==f.which?null:(Mf=!0,Df);case"textInput":return(c=f.data)===Df&&Mf?null:c;default:return null}}(c,w):function Zh(c,f){if(ga)return"compositionend"===c||!Cc&&Nf(c,f)?(c=kf(),Ql=wc=as=null,ga=!1,c):null;switch(c){case"paste":default:return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return Ff&&"ko"!==f.locale?null:f.data}}(c,w))?((f=Qh.getPooled(Uo.beforeInput,f,w,V)).data=c,ma(f)):f=null,null===ie?f:null===f?ie:[ie,f]}},tm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bf(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return"input"===f?!!tm[c.type]:"textarea"===f}var Lf={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function zf(c,f,w){return(c=Hi.getPooled(Lf.change,c,f,w)).type="change",fe(w),ma(c),c}var eu=null,tl=null;function nm(c){ke(c)}function nl(c){if(Kr(ss(c)))return c}function rm(c,f){if("change"===c)return f}var xc=!1;function Uf(){eu&&(eu.detachEvent("onpropertychange",Gf),tl=eu=null)}function Gf(c){if("value"===c.propertyName&&nl(tl))if(c=zf(tl,c,je(c)),We)ke(c);else{We=!0;try{oe(nm,c)}finally{We=!1,ft()}}}function im(c,f,w){"focus"===c?(Uf(),tl=w,(eu=f).attachEvent("onpropertychange",Gf)):"blur"===c&&Uf()}function Ev(c){if("selectionchange"===c||"keyup"===c||"keydown"===c)return nl(tl)}function om(c,f){if("click"===c)return nl(f)}function sm(c,f){if("input"===c||"change"===c)return nl(f)}y&&(xc=Le("input")&&(!document.documentMode||9<document.documentMode));var am={eventTypes:Lf,_isInputEventSupported:xc,extractEvents:function(c,f,w,V){var ie=f?ss(f):window,xe=ie.nodeName&&ie.nodeName.toLowerCase();if("select"===xe||"input"===xe&&"file"===ie.type)var Ie=rm;else if(Bf(ie))if(xc)Ie=sm;else{Ie=Ev;var qe=im}else(xe=ie.nodeName)&&"input"===xe.toLowerCase()&&("checkbox"===ie.type||"radio"===ie.type)&&(Ie=om);if(Ie&&(Ie=Ie(c,f)))return zf(Ie,w,V);qe&&qe(c,ie,f),"blur"===c&&(c=ie._wrapperState)&&c.controlled&&"number"===ie.type&&no(ie,"number",ie.value)}},rl=Hi.extend({view:null,detail:null}),lm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function um(c){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(c):!!(c=lm[c])&&!!f[c]}function Sc(){return um}var cm=0,Vf=0,$f=!1,Hf=!1,il=rl.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Sc,button:null,buttons:null,relatedTarget:function(c){return c.relatedTarget||(c.fromElement===c.srcElement?c.toElement:c.fromElement)},movementX:function(c){if("movementX"in c)return c.movementX;var f=cm;return cm=c.screenX,$f?"mousemove"===c.type?c.screenX-f:0:($f=!0,0)},movementY:function(c){if("movementY"in c)return c.movementY;var f=Vf;return Vf=c.screenY,Hf?"mousemove"===c.type?c.screenY-f:0:(Hf=!0,0)}}),qf=il.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),ol={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Av={eventTypes:ol,extractEvents:function(c,f,w,V,ie){var xe="mouseover"===c||"pointerover"===c,Ie="mouseout"===c||"pointerout"===c;if(xe&&0==(32&ie)&&(w.relatedTarget||w.fromElement)||!Ie&&!xe)return null;if(xe=V.window===V?V:(xe=V.ownerDocument)?xe.defaultView||xe.parentWindow:window,Ie?(Ie=f,null!==(f=(f=w.relatedTarget||w.toElement)?Ya(f):null)&&(f!==b(f)||5!==f.tag&&6!==f.tag)&&(f=null)):Ie=null,Ie===f)return null;if("mouseout"===c||"mouseover"===c)var yt=il,_t=ol.mouseLeave,Bt=ol.mouseEnter,Vt="mouse";else("pointerout"===c||"pointerover"===c)&&(yt=qf,_t=ol.pointerLeave,Bt=ol.pointerEnter,Vt="pointer");if(c=null==Ie?xe:ss(Ie),xe=null==f?xe:ss(f),(_t=yt.getPooled(_t,Ie,w,V)).type=Vt+"leave",_t.target=c,_t.relatedTarget=xe,(w=yt.getPooled(Bt,f,w,V)).type=Vt+"enter",w.target=xe,w.relatedTarget=c,Vt=f,(V=Ie)&&Vt)e:{for(Bt=Vt,Ie=0,c=yt=V;c;c=zo(c))Ie++;for(c=0,f=Bt;f;f=zo(f))c++;for(;0<Ie-c;)yt=zo(yt),Ie--;for(;0<c-Ie;)Bt=zo(Bt),c--;for(;Ie--;){if(yt===Bt||yt===Bt.alternate)break e;yt=zo(yt),Bt=zo(Bt)}yt=null}else yt=null;for(Bt=yt,yt=[];V&&V!==Bt&&(null===(Ie=V.alternate)||Ie!==Bt);)yt.push(V),V=zo(V);for(V=[];Vt&&Vt!==Bt&&(null===(Ie=Vt.alternate)||Ie!==Bt);)V.push(Vt),Vt=zo(Vt);for(Vt=0;Vt<yt.length;Vt++)bc(yt[Vt],"bubbled",_t);for(Vt=V.length;0<Vt--;)bc(V[Vt],"captured",w);return 0==(64&ie)?[_t]:[_t,w]}},Fs="function"==typeof Object.is?Object.is:function dm(c,f){return c===f&&(0!==c||1/c==1/f)||c!=c&&f!=f},Kf=Object.prototype.hasOwnProperty;function sl(c,f){if(Fs(c,f))return!0;if("object"!=typeof c||null===c||"object"!=typeof f||null===f)return!1;var w=Object.keys(c),V=Object.keys(f);if(w.length!==V.length)return!1;for(V=0;V<w.length;V++)if(!Kf.call(f,w[V])||!Fs(c[w[V]],f[w[V]]))return!1;return!0}var fm=y&&"documentMode"in document&&11>=document.documentMode,Xf={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},va=null,Ec=null,tu=null,Ac=!1;function pm(c,f){var w=f.window===f?f.document:9===f.nodeType?f:f.ownerDocument;return Ac||null==va||va!==pc(w)?null:(w="selectionStart"in(w=va)&&ql(w)?{start:w.selectionStart,end:w.selectionEnd}:{anchorNode:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset},tu&&sl(tu,w)?null:(tu=w,(c=Hi.getPooled(Xf.select,Ec,c,f)).type="select",c.target=va,ma(c),c))}var Wf={eventTypes:Xf,extractEvents:function(c,f,w,V,ie,xe){if(!(xe=!(ie=xe||(V.window===V?V.document:9===V.nodeType?V:V.ownerDocument)))){e:{ie=ca(ie),xe=g.onSelect;for(var Ie=0;Ie<xe.length;Ie++)if(!ie.has(xe[Ie])){ie=!1;break e}ie=!0}xe=!ie}if(xe)return null;switch(ie=f?ss(f):window,c){case"focus":(Bf(ie)||"true"===ie.contentEditable)&&(va=ie,Ec=f,tu=null);break;case"blur":tu=Ec=va=null;break;case"mousedown":Ac=!0;break;case"contextmenu":case"mouseup":case"dragend":return Ac=!1,pm(w,V);case"selectionchange":if(fm)break;case"keydown":case"keyup":return pm(w,V)}return null}},Pv=Hi.extend({animationName:null,elapsedTime:null,pseudoElement:null}),al=Hi.extend({clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),hm=rl.extend({relatedTarget:null});function nu(c){var f=c.keyCode;return"charCode"in c?0===(c=c.charCode)&&13===f&&(c=13):c=f,10===c&&(c=13),32<=c||13===c?c:0}var mm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vm=rl.extend({key:function(c){if(c.key){var f=mm[c.key]||c.key;if("Unidentified"!==f)return f}return"keypress"===c.type?13===(c=nu(c))?"Enter":String.fromCharCode(c):"keydown"===c.type||"keyup"===c.type?gm[c.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Sc,charCode:function(c){return"keypress"===c.type?nu(c):0},keyCode:function(c){return"keydown"===c.type||"keyup"===c.type?c.keyCode:0},which:function(c){return"keypress"===c.type?nu(c):"keydown"===c.type||"keyup"===c.type?c.keyCode:0}}),ym=il.extend({dataTransfer:null}),_m=rl.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Sc}),ru=Hi.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),Jf=il.extend({deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:null,deltaMode:null}),iu={eventTypes:Do,extractEvents:function(c,f,w,V){var ie=da.get(c);if(!ie)return null;switch(c){case"keypress":if(0===nu(w))return null;case"keydown":case"keyup":c=vm;break;case"blur":case"focus":c=hm;break;case"click":if(2===w.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=il;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ym;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=_m;break;case ns:case la:case ua:c=Pv;break;case Ka:c=ru;break;case"scroll":c=rl;break;case"wheel":c=Jf;break;case"copy":case"cut":case"paste":c=al;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=qf;break;default:c=Hi}return ma(f=c.getPooled(ie,f,w,V)),f}};if(B)throw Error(j(101));B=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),U(),Q=Jl,q=Za,Y=ss,A({SimpleEventPlugin:iu,EnterLeaveEventPlugin:Av,ChangeEventPlugin:am,SelectEventPlugin:Wf,BeforeInputEventPlugin:em});var be=[],Go=-1;function tr(c){0>Go||(c.current=be[Go],be[Go]=null,Go--)}function gr(c,f){Go++,be[Go]=c.current,c.current=f}var ls={},Jr={current:ls},gi={current:!1},rr=ls;function us(c,f){var w=c.type.contextTypes;if(!w)return ls;var V=c.stateNode;if(V&&V.__reactInternalMemoizedUnmaskedChildContext===f)return V.__reactInternalMemoizedMaskedChildContext;var xe,ie={};for(xe in w)ie[xe]=f[xe];return V&&((c=c.stateNode).__reactInternalMemoizedUnmaskedChildContext=f,c.__reactInternalMemoizedMaskedChildContext=ie),ie}function vi(c){return null!=c.childContextTypes}function ou(){tr(gi),tr(Jr)}function Qf(c,f,w){if(Jr.current!==ls)throw Error(j(168));gr(Jr,f),gr(gi,w)}function zn(c,f,w){var V=c.stateNode;if(c=f.childContextTypes,"function"!=typeof V.getChildContext)return w;for(var ie in V=V.getChildContext())if(!(ie in c))throw Error(j(108,Lt(f)||"Unknown",ie));return C({},w,{},V)}function Pn(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||ls,rr=Jr.current,gr(Jr,c),gr(gi,gi.current),!0}function Hn(c,f,w){var V=c.stateNode;if(!V)throw Error(j(169));w?(c=zn(c,f,rr),V.__reactInternalMemoizedMergedChildContext=c,tr(gi),tr(Jr),gr(Jr,c)):tr(gi),gr(gi,w)}var Pc=F.unstable_runWithPriority,kr=F.unstable_scheduleCallback,Ri=F.unstable_cancelCallback,an=F.unstable_requestPaint,Vo=F.unstable_now,ao=F.unstable_getCurrentPriorityLevel,$o=F.unstable_ImmediatePriority,lo=F.unstable_UserBlockingPriority,Be=F.unstable_NormalPriority,ya=F.unstable_LowPriority,Yf=F.unstable_IdlePriority,Zf={},cs=F.unstable_shouldYield,ep=void 0!==an?an:function(){},Ho=null,Ds=null,Ic=!1,tp=Vo(),qi=1e4>tp?Vo:function(){return Vo()-tp};function Qt(){switch(ao()){case $o:return 99;case lo:return 98;case Be:return 97;case ya:return 96;case Yf:return 95;default:throw Error(j(332))}}function Jn(c){switch(c){case 99:return $o;case 98:return lo;case 97:return Be;case 96:return ya;case 95:return Yf;default:throw Error(j(332))}}function Qr(c,f){return c=Jn(c),Pc(c,f)}function Tc(c,f,w){return c=Jn(c),kr(c,f,w)}function np(c){return null===Ho?(Ho=[c],Ds=kr($o,bm)):Ho.push(c),Zf}function So(){if(null!==Ds){var c=Ds;Ds=null,Ri(c)}bm()}function bm(){if(!Ic&&null!==Ho){Ic=!0;var c=0;try{var f=Ho;Qr(99,function(){for(;c<f.length;c++){var w=f[c];do{w=w(!0)}while(null!==w)}}),Ho=null}catch(w){throw null!==Ho&&(Ho=Ho.slice(c+1)),kr($o,So),w}finally{Ic=!1}}}function su(c,f,w){return 1073741821-(1+((1073741821-c+f/10)/(w/=10)|0))*w}function uo(c,f){if(c&&c.defaultProps)for(var w in f=C({},f),c=c.defaultProps)void 0===f[w]&&(f[w]=c[w]);return f}var au={current:null},Rc=null,yi=null,ll=null;function ds(){ll=yi=Rc=null}function kc(c){var f=au.current;tr(au),c.type._context._currentValue=f}function Oc(c,f){for(;null!==c;){var w=c.alternate;if(c.childExpirationTime<f)c.childExpirationTime=f,null!==w&&w.childExpirationTime<f&&(w.childExpirationTime=f);else{if(!(null!==w&&w.childExpirationTime<f))break;w.childExpirationTime=f}c=c.return}}function Ms(c,f){Rc=c,ll=yi=null,null!==(c=c.dependencies)&&null!==c.firstContext&&(c.expirationTime>=f&&(fi=!0),c.firstContext=null)}function Ki(c,f){if(ll!==c&&!1!==f&&0!==f)if(("number"!=typeof f||1073741823===f)&&(ll=c,f=1073741823),f={context:c,observedBits:f,next:null},null===yi){if(null===Rc)throw Error(j(308));yi=f,Rc.dependencies={expirationTime:0,firstContext:f,responders:null}}else yi=yi.next=f;return c._currentValue}var qo=!1;function _a(c){c.updateQueue={baseState:c.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function di(c,f){f.updateQueue===(c=c.updateQueue)&&(f.updateQueue={baseState:c.baseState,baseQueue:c.baseQueue,shared:c.shared,effects:c.effects})}function fs(c,f){return(c={expirationTime:c,suspenseConfig:f,tag:0,payload:null,callback:null,next:null}).next=c}function Eo(c,f){if(null!==(c=c.updateQueue)){var w=(c=c.shared).pending;null===w?f.next=f:(f.next=w.next,w.next=f),c.pending=f}}function ul(c,f){var w=c.alternate;null!==w&&di(w,c),null===(w=(c=c.updateQueue).baseQueue)?(c.baseQueue=f.next=f,f.next=f):(f.next=w.next,w.next=f)}function lu(c,f,w,V){var ie=c.updateQueue;qo=!1;var xe=ie.baseQueue,Ie=ie.shared.pending;if(null!==Ie){if(null!==xe){var qe=xe.next;xe.next=Ie.next,Ie.next=qe}xe=Ie,ie.shared.pending=null,null!==(qe=c.alternate)&&null!==(qe=qe.updateQueue)&&(qe.baseQueue=Ie)}if(null!==xe){var yt=ie.baseState,_t=0,Bt=null,Vt=null,Cn=null;if(null!==(qe=xe.next))for(var In=qe;;){if((Ie=In.expirationTime)<V){var Ji={expirationTime:In.expirationTime,suspenseConfig:In.suspenseConfig,tag:In.tag,payload:In.payload,callback:In.callback,next:null};null===Cn?(Vt=Cn=Ji,Bt=yt):Cn=Cn.next=Ji,Ie>_t&&(_t=Ie)}else{null!==Cn&&(Cn=Cn.next={expirationTime:1073741823,suspenseConfig:In.suspenseConfig,tag:In.tag,payload:In.payload,callback:In.callback,next:null}),bp(Ie,In.suspenseConfig);e:{var Hr=c,dt=In;switch(Ie=f,Ji=w,dt.tag){case 1:if("function"==typeof(Hr=dt.payload)){yt=Hr.call(Ji,yt,Ie);break e}yt=Hr;break e;case 3:Hr.effectTag=-4097&Hr.effectTag|64;case 0:if(null==(Ie="function"==typeof(Hr=dt.payload)?Hr.call(Ji,yt,Ie):Hr))break e;yt=C({},yt,Ie);break e;case 2:qo=!0}}null!==In.callback&&(c.effectTag|=32,null===(Ie=ie.effects)?ie.effects=[In]:Ie.push(In))}if(null===(In=In.next)||In===qe){if(null===(Ie=ie.shared.pending))break;In=xe.next=Ie.next,Ie.next=qe,ie.baseQueue=xe=Ie,ie.shared.pending=null}}null===Cn?Bt=yt:Cn.next=Vt,ie.baseState=Bt,ie.baseQueue=Cn,Du(_t),c.expirationTime=_t,c.memoizedState=yt}}function rp(c,f,w){if(c=f.effects,f.effects=null,null!==c)for(f=0;f<c.length;f++){var V=c[f],ie=V.callback;if(null!==ie){if(V.callback=null,V=ie,ie=w,"function"!=typeof V)throw Error(j(191,V));V.call(ie)}}}var ba=$.ReactCurrentBatchConfig,ip=(new o.Component).refs;function uu(c,f,w,V){w=null==(w=w(V,f=c.memoizedState))?f:C({},f,w),c.memoizedState=w,0===c.expirationTime&&(c.updateQueue.baseState=w)}var Fc={isMounted:function(c){return!!(c=c._reactInternalFiber)&&b(c)===c},enqueueSetState:function(c,f,w){c=c._reactInternalFiber;var V=_i(),ie=ba.suspense;(ie=fs(V=$s(V,c,ie),ie)).payload=f,null!=w&&(ie.callback=w),Eo(c,ie),Hs(c,V)},enqueueReplaceState:function(c,f,w){c=c._reactInternalFiber;var V=_i(),ie=ba.suspense;(ie=fs(V=$s(V,c,ie),ie)).tag=1,ie.payload=f,null!=w&&(ie.callback=w),Eo(c,ie),Hs(c,V)},enqueueForceUpdate:function(c,f){c=c._reactInternalFiber;var w=_i(),V=ba.suspense;(V=fs(w=$s(w,c,V),V)).tag=2,null!=f&&(V.callback=f),Eo(c,V),Hs(c,w)}};function Dc(c,f,w,V,ie,xe,Ie){return"function"==typeof(c=c.stateNode).shouldComponentUpdate?c.shouldComponentUpdate(V,xe,Ie):!(f.prototype&&f.prototype.isPureReactComponent&&sl(w,V)&&sl(ie,xe))}function op(c,f,w){var V=!1,ie=ls,xe=f.contextType;return"object"==typeof xe&&null!==xe?xe=Ki(xe):(ie=vi(f)?rr:Jr.current,xe=(V=null!=(V=f.contextTypes))?us(c,ie):ls),f=new f(w,xe),c.memoizedState=null!=f.state?f.state:null,f.updater=Fc,c.stateNode=f,f._reactInternalFiber=c,V&&((c=c.stateNode).__reactInternalMemoizedUnmaskedChildContext=ie,c.__reactInternalMemoizedMaskedChildContext=xe),f}function sp(c,f,w,V){c=f.state,"function"==typeof f.componentWillReceiveProps&&f.componentWillReceiveProps(w,V),"function"==typeof f.UNSAFE_componentWillReceiveProps&&f.UNSAFE_componentWillReceiveProps(w,V),f.state!==c&&Fc.enqueueReplaceState(f,f.state,null)}function cu(c,f,w,V){var ie=c.stateNode;ie.props=w,ie.state=c.memoizedState,ie.refs=ip,_a(c);var xe=f.contextType;"object"==typeof xe&&null!==xe?ie.context=Ki(xe):(xe=vi(f)?rr:Jr.current,ie.context=us(c,xe)),lu(c,w,ie,V),ie.state=c.memoizedState,"function"==typeof(xe=f.getDerivedStateFromProps)&&(uu(c,f,xe,w),ie.state=c.memoizedState),"function"==typeof f.getDerivedStateFromProps||"function"==typeof ie.getSnapshotBeforeUpdate||"function"!=typeof ie.UNSAFE_componentWillMount&&"function"!=typeof ie.componentWillMount||(f=ie.state,"function"==typeof ie.componentWillMount&&ie.componentWillMount(),"function"==typeof ie.UNSAFE_componentWillMount&&ie.UNSAFE_componentWillMount(),f!==ie.state&&Fc.enqueueReplaceState(ie,ie.state,null),lu(c,w,ie,V),ie.state=c.memoizedState),"function"==typeof ie.componentDidMount&&(c.effectTag|=4)}var co=Array.isArray;function ki(c,f,w){if(null!==(c=w.ref)&&"function"!=typeof c&&"object"!=typeof c){if(w._owner){if(w=w._owner){if(1!==w.tag)throw Error(j(309));var V=w.stateNode}if(!V)throw Error(j(147,c));var ie=""+c;return null!==f&&null!==f.ref&&"function"==typeof f.ref&&f.ref._stringRef===ie?f.ref:((f=function(xe){var Ie=V.refs;Ie===ip&&(Ie=V.refs={}),null===xe?delete Ie[ie]:Ie[ie]=xe})._stringRef=ie,f)}if("string"!=typeof c)throw Error(j(284));if(!w._owner)throw Error(j(290,c))}return c}function du(c,f){if("textarea"!==c.type)throw Error(j(31,"[object Object]"===Object.prototype.toString.call(f)?"object with keys {"+Object.keys(f).join(", ")+"}":f,""))}function ap(c){function f(dt,lt){if(c){var wt=dt.lastEffect;null!==wt?(wt.nextEffect=lt,dt.lastEffect=lt):dt.firstEffect=dt.lastEffect=lt,lt.nextEffect=null,lt.effectTag=8}}function w(dt,lt){if(!c)return null;for(;null!==lt;)f(dt,lt),lt=lt.sibling;return null}function V(dt,lt){for(dt=new Map;null!==lt;)dt.set(null!==lt.key?lt.key:lt.index,lt),lt=lt.sibling;return dt}function ie(dt,lt){return(dt=ka(dt,lt)).index=0,dt.sibling=null,dt}function xe(dt,lt,wt){return dt.index=wt,c?null!==(wt=dt.alternate)?(wt=wt.index)<lt?(dt.effectTag=2,lt):wt:(dt.effectTag=2,lt):lt}function Ie(dt){return c&&null===dt.alternate&&(dt.effectTag=2),dt}function qe(dt,lt,wt,Rt){return null===lt||6!==lt.tag?((lt=Cp(wt,dt.mode,Rt)).return=dt,lt):((lt=ie(lt,wt)).return=dt,lt)}function yt(dt,lt,wt,Rt){return null!==lt&&lt.elementType===wt.type?((Rt=ie(lt,wt.props)).ref=ki(dt,lt,wt),Rt.return=dt,Rt):((Rt=ju(wt.type,wt.key,wt.props,null,dt.mode,Rt)).ref=ki(dt,lt,wt),Rt.return=dt,Rt)}function _t(dt,lt,wt,Rt){return null===lt||4!==lt.tag||lt.stateNode.containerInfo!==wt.containerInfo||lt.stateNode.implementation!==wt.implementation?((lt=Er(wt,dt.mode,Rt)).return=dt,lt):((lt=ie(lt,wt.children||[])).return=dt,lt)}function Bt(dt,lt,wt,Rt,Nt){return null===lt||7!==lt.tag?((lt=_s(wt,dt.mode,Rt,Nt)).return=dt,lt):((lt=ie(lt,wt)).return=dt,lt)}function Vt(dt,lt,wt){if("string"==typeof lt||"number"==typeof lt)return(lt=Cp(""+lt,dt.mode,wt)).return=dt,lt;if("object"==typeof lt&&null!==lt){switch(lt.$$typeof){case Me:return(wt=ju(lt.type,lt.key,lt.props,null,dt.mode,wt)).ref=ki(dt,null,lt),wt.return=dt,wt;case Ye:return(lt=Er(lt,dt.mode,wt)).return=dt,lt}if(co(lt)||mn(lt))return(lt=_s(lt,dt.mode,wt,null)).return=dt,lt;du(dt,lt)}return null}function Cn(dt,lt,wt,Rt){var Nt=null!==lt?lt.key:null;if("string"==typeof wt||"number"==typeof wt)return null!==Nt?null:qe(dt,lt,""+wt,Rt);if("object"==typeof wt&&null!==wt){switch(wt.$$typeof){case Me:return wt.key===Nt?wt.type===it?Bt(dt,lt,wt.props.children,Rt,Nt):yt(dt,lt,wt,Rt):null;case Ye:return wt.key===Nt?_t(dt,lt,wt,Rt):null}if(co(wt)||mn(wt))return null!==Nt?null:Bt(dt,lt,wt,Rt,null);du(dt,wt)}return null}function In(dt,lt,wt,Rt,Nt){if("string"==typeof Rt||"number"==typeof Rt)return qe(lt,dt=dt.get(wt)||null,""+Rt,Nt);if("object"==typeof Rt&&null!==Rt){switch(Rt.$$typeof){case Me:return dt=dt.get(null===Rt.key?wt:Rt.key)||null,Rt.type===it?Bt(lt,dt,Rt.props.children,Nt,Rt.key):yt(lt,dt,Rt,Nt);case Ye:return _t(lt,dt=dt.get(null===Rt.key?wt:Rt.key)||null,Rt,Nt)}if(co(Rt)||mn(Rt))return Bt(lt,dt=dt.get(wt)||null,Rt,Nt,null);du(lt,Rt)}return null}return function(dt,lt,wt,Rt){var Nt="object"==typeof wt&&null!==wt&&wt.type===it&&null===wt.key;Nt&&(wt=wt.props.children);var $t="object"==typeof wt&&null!==wt;if($t)switch(wt.$$typeof){case Me:e:{for($t=wt.key,Nt=lt;null!==Nt;){if(Nt.key===$t){if(7===Nt.tag){if(wt.type===it){w(dt,Nt.sibling),(lt=ie(Nt,wt.props.children)).return=dt,dt=lt;break e}}else if(Nt.elementType===wt.type){w(dt,Nt.sibling),(lt=ie(Nt,wt.props)).ref=ki(dt,Nt,wt),lt.return=dt,dt=lt;break e}w(dt,Nt);break}f(dt,Nt),Nt=Nt.sibling}wt.type===it?((lt=_s(wt.props.children,dt.mode,Rt,wt.key)).return=dt,dt=lt):((Rt=ju(wt.type,wt.key,wt.props,null,dt.mode,Rt)).ref=ki(dt,lt,wt),Rt.return=dt,dt=Rt)}return Ie(dt);case Ye:e:{for(Nt=wt.key;null!==lt;){if(lt.key===Nt){if(4===lt.tag&&lt.stateNode.containerInfo===wt.containerInfo&&lt.stateNode.implementation===wt.implementation){w(dt,lt.sibling),(lt=ie(lt,wt.children||[])).return=dt,dt=lt;break e}w(dt,lt);break}f(dt,lt),lt=lt.sibling}(lt=Er(wt,dt.mode,Rt)).return=dt,dt=lt}return Ie(dt)}if("string"==typeof wt||"number"==typeof wt)return wt=""+wt,null!==lt&&6===lt.tag?(w(dt,lt.sibling),(lt=ie(lt,wt)).return=dt,dt=lt):(w(dt,lt),(lt=Cp(wt,dt.mode,Rt)).return=dt,dt=lt),Ie(dt);if(co(wt))return function Ji(dt,lt,wt,Rt){for(var Nt=null,$t=null,tn=lt,Tn=lt=0,ir=null;null!==tn&&Tn<wt.length;Tn++){tn.index>Tn?(ir=tn,tn=null):ir=tn.sibling;var dn=Cn(dt,tn,wt[Tn],Rt);if(null===dn){null===tn&&(tn=ir);break}c&&tn&&null===dn.alternate&&f(dt,tn),lt=xe(dn,lt,Tn),null===$t?Nt=dn:$t.sibling=dn,$t=dn,tn=ir}if(Tn===wt.length)return w(dt,tn),Nt;if(null===tn){for(;Tn<wt.length;Tn++)null!==(tn=Vt(dt,wt[Tn],Rt))&&(lt=xe(tn,lt,Tn),null===$t?Nt=tn:$t.sibling=tn,$t=tn);return Nt}for(tn=V(dt,tn);Tn<wt.length;Tn++)null!==(ir=In(tn,dt,Tn,wt[Tn],Rt))&&(c&&null!==ir.alternate&&tn.delete(null===ir.key?Tn:ir.key),lt=xe(ir,lt,Tn),null===$t?Nt=ir:$t.sibling=ir,$t=ir);return c&&tn.forEach(function(ws){return f(dt,ws)}),Nt}(dt,lt,wt,Rt);if(mn(wt))return function Hr(dt,lt,wt,Rt){var Nt=mn(wt);if("function"!=typeof Nt)throw Error(j(150));if(null==(wt=Nt.call(wt)))throw Error(j(151));for(var $t=Nt=null,tn=lt,Tn=lt=0,ir=null,dn=wt.next();null!==tn&&!dn.done;Tn++,dn=wt.next()){tn.index>Tn?(ir=tn,tn=null):ir=tn.sibling;var ws=Cn(dt,tn,dn.value,Rt);if(null===ws){null===tn&&(tn=ir);break}c&&tn&&null===ws.alternate&&f(dt,tn),lt=xe(ws,lt,Tn),null===$t?Nt=ws:$t.sibling=ws,$t=ws,tn=ir}if(dn.done)return w(dt,tn),Nt;if(null===tn){for(;!dn.done;Tn++,dn=wt.next())null!==(dn=Vt(dt,dn.value,Rt))&&(lt=xe(dn,lt,Tn),null===$t?Nt=dn:$t.sibling=dn,$t=dn);return Nt}for(tn=V(dt,tn);!dn.done;Tn++,dn=wt.next())null!==(dn=In(tn,dt,Tn,dn.value,Rt))&&(c&&null!==dn.alternate&&tn.delete(null===dn.key?Tn:dn.key),lt=xe(dn,lt,Tn),null===$t?Nt=dn:$t.sibling=dn,$t=dn);return c&&tn.forEach(function(Ap){return f(dt,Ap)}),Nt}(dt,lt,wt,Rt);if($t&&du(dt,wt),void 0===wt&&!Nt)switch(dt.tag){case 1:case 0:throw dt=dt.type,Error(j(152,dt.displayName||dt.name||"Component"))}return w(dt,lt)}}var wa=ap(!0),Mc=ap(!1),cl={},Ao={current:cl},dl={current:cl},fl={current:cl};function Ns(c){if(c===cl)throw Error(j(174));return c}function Nc(c,f){switch(gr(fl,f),gr(dl,c),gr(Ao,cl),c=f.nodeType){case 9:case 11:f=(f=f.documentElement)?f.namespaceURI:Ln(null,"");break;default:f=Ln(f=(c=8===c?f.parentNode:f).namespaceURI||null,c=c.tagName)}tr(Ao),gr(Ao,f)}function ps(){tr(Ao),tr(dl),tr(fl)}function jc(c){Ns(fl.current);var f=Ns(Ao.current),w=Ln(f,c.type);f!==w&&(gr(dl,c),gr(Ao,w))}function Ca(c){dl.current===c&&(tr(Ao),tr(dl))}var nr={current:0};function pl(c){for(var f=c;null!==f;){if(13===f.tag){var w=f.memoizedState;if(null!==w&&(null===(w=w.dehydrated)||"$?"===w.data||"$!"===w.data))return f}else if(19===f.tag&&void 0!==f.memoizedProps.revealOrder){if(0!=(64&f.effectTag))return f}else if(null!==f.child){f.child.return=f,f=f.child;continue}if(f===c)break;for(;null===f.sibling;){if(null===f.return||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function fu(c,f){return{responder:c,props:f}}var hl=$.ReactCurrentDispatcher,Oi=$.ReactCurrentBatchConfig,fo=0,Or=null,Yr=null,jr=null,ml=!1;function Xi(){throw Error(j(321))}function pu(c,f){if(null===f)return!1;for(var w=0;w<f.length&&w<c.length;w++)if(!Fs(c[w],f[w]))return!1;return!0}function Bc(c,f,w,V,ie,xe){if(fo=xe,Or=f,f.memoizedState=null,f.updateQueue=null,f.expirationTime=0,hl.current=null===c||null===c.memoizedState?wm:Cm,c=w(V,ie),f.expirationTime===fo){xe=0;do{if(f.expirationTime=0,!(25>xe))throw Error(j(301));xe+=1,jr=Yr=null,f.updateQueue=null,hl.current=xm,c=w(V,ie)}while(f.expirationTime===fo)}if(hl.current=gu,f=null!==Yr&&null!==Yr.next,fo=0,jr=Yr=Or=null,ml=!1,f)throw Error(j(300));return c}function po(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===jr?Or.memoizedState=jr=c:jr=jr.next=c,jr}function js(){if(null===Yr){var c=Or.alternate;c=null!==c?c.memoizedState:null}else c=Yr.next;var f=null===jr?Or.memoizedState:jr.next;if(null!==f)jr=f,Yr=c;else{if(null===c)throw Error(j(310));c={memoizedState:(Yr=c).memoizedState,baseState:Yr.baseState,baseQueue:Yr.baseQueue,queue:Yr.queue,next:null},null===jr?Or.memoizedState=jr=c:jr=jr.next=c}return jr}function Bs(c,f){return"function"==typeof f?f(c):f}function hu(c){var f=js(),w=f.queue;if(null===w)throw Error(j(311));w.lastRenderedReducer=c;var V=Yr,ie=V.baseQueue,xe=w.pending;if(null!==xe){if(null!==ie){var Ie=ie.next;ie.next=xe.next,xe.next=Ie}V.baseQueue=ie=xe,w.pending=null}if(null!==ie){V=V.baseState;var qe=Ie=xe=null,yt=ie=ie.next;do{var _t=yt.expirationTime;if(_t<fo){var Bt={expirationTime:yt.expirationTime,suspenseConfig:yt.suspenseConfig,action:yt.action,eagerReducer:yt.eagerReducer,eagerState:yt.eagerState,next:null};null===qe?(Ie=qe=Bt,xe=V):qe=qe.next=Bt,_t>Or.expirationTime&&(Or.expirationTime=_t,Du(_t))}else null!==qe&&(qe=qe.next={expirationTime:1073741823,suspenseConfig:yt.suspenseConfig,action:yt.action,eagerReducer:yt.eagerReducer,eagerState:yt.eagerState,next:null}),bp(_t,yt.suspenseConfig),V=yt.eagerReducer===c?yt.eagerState:c(V,yt.action);yt=yt.next}while(null!==yt&&yt!==ie);null===qe?xe=V:qe.next=Ie,Fs(V,f.memoizedState)||(fi=!0),f.memoizedState=V,f.baseState=xe,f.baseQueue=qe,w.lastRenderedState=V}return[f.memoizedState,w.dispatch]}function Lc(c){var f=js(),w=f.queue;if(null===w)throw Error(j(311));w.lastRenderedReducer=c;var V=w.dispatch,ie=w.pending,xe=f.memoizedState;if(null!==ie){w.pending=null;var Ie=ie=ie.next;do{xe=c(xe,Ie.action),Ie=Ie.next}while(Ie!==ie);Fs(xe,f.memoizedState)||(fi=!0),f.memoizedState=xe,null===f.baseQueue&&(f.baseState=xe),w.lastRenderedState=xe}return[xe,V]}function lp(c){var f=po();return"function"==typeof c&&(c=c()),f.memoizedState=f.baseState=c,c=(c=f.queue={pending:null,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:c}).dispatch=dp.bind(null,Or,c),[f.memoizedState,c]}function Ko(c,f,w,V){return c={tag:c,create:f,destroy:w,deps:V,next:null},null===(f=Or.updateQueue)?(Or.updateQueue=f={lastEffect:null},f.lastEffect=c.next=c):null===(w=f.lastEffect)?f.lastEffect=c.next=c:(V=w.next,w.next=c,c.next=V,f.lastEffect=c),c}function zc(){return js().memoizedState}function Ls(c,f,w,V){var ie=po();Or.effectTag|=c,ie.memoizedState=Ko(1|f,w,void 0,void 0===V?null:V)}function mu(c,f,w,V){var ie=js();V=void 0===V?null:V;var xe=void 0;if(null!==Yr){var Ie=Yr.memoizedState;if(xe=Ie.destroy,null!==V&&pu(V,Ie.deps))return void Ko(f,w,xe,V)}Or.effectTag|=c,ie.memoizedState=Ko(1|f,w,xe,V)}function Uc(c,f){return Ls(516,4,c,f)}function zs(c,f){return mu(516,4,c,f)}function gl(c,f){return mu(4,2,c,f)}function Vr(c,f){return"function"==typeof f?(c=c(),f(c),function(){f(null)}):null!=f?(c=c(),f.current=c,function(){f.current=null}):void 0}function up(c,f,w){return w=null!=w?w.concat([c]):null,mu(4,2,Vr.bind(null,f,c),w)}function cp(){}function Gc(c,f){return po().memoizedState=[c,void 0===f?null:f],c}function Qn(c,f){var w=js();f=void 0===f?null:f;var V=w.memoizedState;return null!==V&&null!==f&&pu(f,V[1])?V[0]:(w.memoizedState=[c,f],c)}function Un(c,f){var w=js();f=void 0===f?null:f;var V=w.memoizedState;return null!==V&&null!==f&&pu(f,V[1])?V[0]:(c=c(),w.memoizedState=[c,f],c)}function Vc(c,f,w){var V=Qt();Qr(98>V?98:V,function(){c(!0)}),Qr(97<V?97:V,function(){var ie=Oi.suspense;Oi.suspense=void 0===f?null:f;try{c(!1),w()}finally{Oi.suspense=ie}})}function dp(c,f,w){var V=_i(),ie=ba.suspense;ie={expirationTime:V=$s(V,c,ie),suspenseConfig:ie,action:w,eagerReducer:null,eagerState:null,next:null};var xe=f.pending;if(null===xe?ie.next=ie:(ie.next=xe.next,xe.next=ie),f.pending=ie,xe=c.alternate,c===Or||null!==xe&&xe===Or)ml=!0,ie.expirationTime=fo,Or.expirationTime=fo;else{if(0===c.expirationTime&&(null===xe||0===xe.expirationTime)&&null!==(xe=f.lastRenderedReducer))try{var Ie=f.lastRenderedState,qe=xe(Ie,w);if(ie.eagerReducer=xe,ie.eagerState=qe,Fs(qe,Ie))return}catch{}Hs(c,V)}}var gu={readContext:Ki,useCallback:Xi,useContext:Xi,useEffect:Xi,useImperativeHandle:Xi,useLayoutEffect:Xi,useMemo:Xi,useReducer:Xi,useRef:Xi,useState:Xi,useDebugValue:Xi,useResponder:Xi,useDeferredValue:Xi,useTransition:Xi},wm={readContext:Ki,useCallback:Gc,useContext:Ki,useEffect:Uc,useImperativeHandle:function(c,f,w){return w=null!=w?w.concat([c]):null,Ls(4,2,Vr.bind(null,f,c),w)},useLayoutEffect:function(c,f){return Ls(4,2,c,f)},useMemo:function(c,f){var w=po();return f=void 0===f?null:f,c=c(),w.memoizedState=[c,f],c},useReducer:function(c,f,w){var V=po();return f=void 0!==w?w(f):f,V.memoizedState=V.baseState=f,c=(c=V.queue={pending:null,dispatch:null,lastRenderedReducer:c,lastRenderedState:f}).dispatch=dp.bind(null,Or,c),[V.memoizedState,c]},useRef:function(c){return po().memoizedState={current:c}},useState:lp,useDebugValue:cp,useResponder:fu,useDeferredValue:function(c,f){var w=lp(c),V=w[0],ie=w[1];return Uc(function(){var xe=Oi.suspense;Oi.suspense=void 0===f?null:f;try{ie(c)}finally{Oi.suspense=xe}},[c,f]),V},useTransition:function(c){var f=lp(!1),w=f[0];return[Gc(Vc.bind(null,f=f[1],c),[f,c]),w]}},Cm={readContext:Ki,useCallback:Qn,useContext:Ki,useEffect:zs,useImperativeHandle:up,useLayoutEffect:gl,useMemo:Un,useReducer:hu,useRef:zc,useState:function(){return hu(Bs)},useDebugValue:cp,useResponder:fu,useDeferredValue:function(c,f){var w=hu(Bs),V=w[0],ie=w[1];return zs(function(){var xe=Oi.suspense;Oi.suspense=void 0===f?null:f;try{ie(c)}finally{Oi.suspense=xe}},[c,f]),V},useTransition:function(c){var f=hu(Bs),w=f[0];return[Qn(Vc.bind(null,f=f[1],c),[f,c]),w]}},xm={readContext:Ki,useCallback:Qn,useContext:Ki,useEffect:zs,useImperativeHandle:up,useLayoutEffect:gl,useMemo:Un,useReducer:Lc,useRef:zc,useState:function(){return Lc(Bs)},useDebugValue:cp,useResponder:fu,useDeferredValue:function(c,f){var w=Lc(Bs),V=w[0],ie=w[1];return zs(function(){var xe=Oi.suspense;Oi.suspense=void 0===f?null:f;try{ie(c)}finally{Oi.suspense=xe}},[c,f]),V},useTransition:function(c){var f=Lc(Bs),w=f[0];return[Qn(Vc.bind(null,f=f[1],c),[f,c]),w]}},Xo=null,hs=null,Wo=!1;function Et(c,f){var w=$r(5,null,null,0);w.elementType="DELETED",w.type="DELETED",w.stateNode=f,w.return=c,w.effectTag=8,null!==c.lastEffect?(c.lastEffect.nextEffect=w,c.lastEffect=w):c.firstEffect=c.lastEffect=w}function vu(c,f){switch(c.tag){case 5:return null!==(f=1!==f.nodeType||c.type.toLowerCase()!==f.nodeName.toLowerCase()?null:f)&&(c.stateNode=f,!0);case 6:return null!==(f=""===c.pendingProps||3!==f.nodeType?null:f)&&(c.stateNode=f,!0);default:return!1}}function vl(c){if(Wo){var f=hs;if(f){var w=f;if(!vu(c,f)){if(!(f=ha(w.nextSibling))||!vu(c,f))return c.effectTag=-1025&c.effectTag|2,Wo=!1,void(Xo=c);Et(Xo,w)}Xo=c,hs=ha(f.firstChild)}else c.effectTag=-1025&c.effectTag|2,Wo=!1,Xo=c}}function fp(c){for(c=c.return;null!==c&&5!==c.tag&&3!==c.tag&&13!==c.tag;)c=c.return;Xo=c}function yl(c){if(c!==Xo)return!1;if(!Wo)return fp(c),Wo=!0,!1;var f=c.type;if(5!==c.tag||"head"!==f&&"body"!==f&&!yc(f,c.memoizedProps))for(f=hs;f;)Et(c,f),f=ha(f.nextSibling);if(fp(c),13===c.tag){if(!(c=null!==(c=c.memoizedState)?c.dehydrated:null))throw Error(j(317));e:{for(c=c.nextSibling,f=0;c;){if(8===c.nodeType){var w=c.data;if("/$"===w){if(0===f){hs=ha(c.nextSibling);break e}f--}else"$"!==w&&"$!"!==w&&"$?"!==w||f++}c=c.nextSibling}hs=null}}else hs=Xo?ha(c.stateNode.nextSibling):null;return!0}function ms(){hs=Xo=null,Wo=!1}var Sm=$.ReactCurrentOwner,fi=!1;function Zr(c,f,w,V){f.child=null===c?Mc(f,null,w,V):wa(f,c.child,w,V)}function yu(c,f,w,V,ie){w=w.render;var xe=f.ref;return Ms(f,ie),V=Bc(c,f,w,V,xe,ie),null===c||fi?(f.effectTag|=1,Zr(c,f,V,ie),f.child):(f.updateQueue=c.updateQueue,f.effectTag&=-517,c.expirationTime<=ie&&(c.expirationTime=0),Fi(c,f,ie))}function xa(c,f,w,V,ie,xe){if(null===c){var Ie=w.type;return"function"!=typeof Ie||bd(Ie)||void 0!==Ie.defaultProps||null!==w.compare||void 0!==w.defaultProps?((c=ju(w.type,null,V,null,f.mode,xe)).ref=f.ref,c.return=f,f.child=c):(f.tag=15,f.type=Ie,Em(c,f,Ie,V,ie,xe))}return Ie=c.child,ie<xe&&(w=null!==(w=w.compare)?w:sl)(ie=Ie.memoizedProps,V)&&c.ref===f.ref?Fi(c,f,xe):(f.effectTag|=1,(c=ka(Ie,V)).ref=f.ref,c.return=f,f.child=c)}function Em(c,f,w,V,ie,xe){return null!==c&&sl(c.memoizedProps,V)&&c.ref===f.ref&&(fi=!1,ie<xe)?(f.expirationTime=c.expirationTime,Fi(c,f,xe)):_u(c,f,w,V,xe)}function $c(c,f){var w=f.ref;(null===c&&null!==w||null!==c&&c.ref!==w)&&(f.effectTag|=128)}function _u(c,f,w,V,ie){var xe=vi(w)?rr:Jr.current;return xe=us(f,xe),Ms(f,ie),w=Bc(c,f,w,V,xe,ie),null===c||fi?(f.effectTag|=1,Zr(c,f,w,ie),f.child):(f.updateQueue=c.updateQueue,f.effectTag&=-517,c.expirationTime<=ie&&(c.expirationTime=0),Fi(c,f,ie))}function Hc(c,f,w,V,ie){if(vi(w)){var xe=!0;Pn(f)}else xe=!1;if(Ms(f,ie),null===f.stateNode)null!==c&&(c.alternate=null,f.alternate=null,f.effectTag|=2),op(f,w,V),cu(f,w,V,ie),V=!0;else if(null===c){var Ie=f.stateNode,qe=f.memoizedProps;Ie.props=qe;var yt=Ie.context,_t=w.contextType;_t="object"==typeof _t&&null!==_t?Ki(_t):us(f,_t=vi(w)?rr:Jr.current);var Bt=w.getDerivedStateFromProps,Vt="function"==typeof Bt||"function"==typeof Ie.getSnapshotBeforeUpdate;Vt||"function"!=typeof Ie.UNSAFE_componentWillReceiveProps&&"function"!=typeof Ie.componentWillReceiveProps||(qe!==V||yt!==_t)&&sp(f,Ie,V,_t),qo=!1;var Cn=f.memoizedState;Ie.state=Cn,lu(f,V,Ie,ie),yt=f.memoizedState,qe!==V||Cn!==yt||gi.current||qo?("function"==typeof Bt&&(uu(f,w,Bt,V),yt=f.memoizedState),(qe=qo||Dc(f,w,qe,V,Cn,yt,_t))?(Vt||"function"!=typeof Ie.UNSAFE_componentWillMount&&"function"!=typeof Ie.componentWillMount||("function"==typeof Ie.componentWillMount&&Ie.componentWillMount(),"function"==typeof Ie.UNSAFE_componentWillMount&&Ie.UNSAFE_componentWillMount()),"function"==typeof Ie.componentDidMount&&(f.effectTag|=4)):("function"==typeof Ie.componentDidMount&&(f.effectTag|=4),f.memoizedProps=V,f.memoizedState=yt),Ie.props=V,Ie.state=yt,Ie.context=_t,V=qe):("function"==typeof Ie.componentDidMount&&(f.effectTag|=4),V=!1)}else Ie=f.stateNode,di(c,f),qe=f.memoizedProps,Ie.props=f.type===f.elementType?qe:uo(f.type,qe),yt=Ie.context,_t="object"==typeof(_t=w.contextType)&&null!==_t?Ki(_t):us(f,_t=vi(w)?rr:Jr.current),(Vt="function"==typeof(Bt=w.getDerivedStateFromProps)||"function"==typeof Ie.getSnapshotBeforeUpdate)||"function"!=typeof Ie.UNSAFE_componentWillReceiveProps&&"function"!=typeof Ie.componentWillReceiveProps||(qe!==V||yt!==_t)&&sp(f,Ie,V,_t),qo=!1,Ie.state=yt=f.memoizedState,lu(f,V,Ie,ie),Cn=f.memoizedState,qe!==V||yt!==Cn||gi.current||qo?("function"==typeof Bt&&(uu(f,w,Bt,V),Cn=f.memoizedState),(Bt=qo||Dc(f,w,qe,V,yt,Cn,_t))?(Vt||"function"!=typeof Ie.UNSAFE_componentWillUpdate&&"function"!=typeof Ie.componentWillUpdate||("function"==typeof Ie.componentWillUpdate&&Ie.componentWillUpdate(V,Cn,_t),"function"==typeof Ie.UNSAFE_componentWillUpdate&&Ie.UNSAFE_componentWillUpdate(V,Cn,_t)),"function"==typeof Ie.componentDidUpdate&&(f.effectTag|=4),"function"==typeof Ie.getSnapshotBeforeUpdate&&(f.effectTag|=256)):("function"!=typeof Ie.componentDidUpdate||qe===c.memoizedProps&&yt===c.memoizedState||(f.effectTag|=4),"function"!=typeof Ie.getSnapshotBeforeUpdate||qe===c.memoizedProps&&yt===c.memoizedState||(f.effectTag|=256),f.memoizedProps=V,f.memoizedState=Cn),Ie.props=V,Ie.state=Cn,Ie.context=_t,V=Bt):("function"!=typeof Ie.componentDidUpdate||qe===c.memoizedProps&&yt===c.memoizedState||(f.effectTag|=4),"function"!=typeof Ie.getSnapshotBeforeUpdate||qe===c.memoizedProps&&yt===c.memoizedState||(f.effectTag|=256),V=!1);return qc(c,f,w,V,xe,ie)}function qc(c,f,w,V,ie,xe){$c(c,f);var Ie=0!=(64&f.effectTag);if(!V&&!Ie)return ie&&Hn(f,w,!1),Fi(c,f,xe);V=f.stateNode,Sm.current=f;var qe=Ie&&"function"!=typeof w.getDerivedStateFromError?null:V.render();return f.effectTag|=1,null!==c&&Ie?(f.child=wa(f,c.child,null,xe),f.child=wa(f,null,qe,xe)):Zr(c,f,qe,xe),f.memoizedState=V.state,ie&&Hn(f,w,!0),f.child}function Kc(c){var f=c.stateNode;f.pendingContext?Qf(0,f.pendingContext,f.pendingContext!==f.context):f.context&&Qf(0,f.context,!1),Nc(c,f.containerInfo)}var Qc,Zc,wu,Xc={dehydrated:null,retryTime:0};function Wc(c,f,w){var qe,V=f.mode,ie=f.pendingProps,xe=nr.current,Ie=!1;if((qe=0!=(64&f.effectTag))||(qe=0!=(2&xe)&&(null===c||null!==c.memoizedState)),qe?(Ie=!0,f.effectTag&=-65):null!==c&&null===c.memoizedState||void 0===ie.fallback||!0===ie.unstable_avoidThisFallback||(xe|=1),gr(nr,1&xe),null===c){if(void 0!==ie.fallback&&vl(f),Ie){if(Ie=ie.fallback,(ie=_s(null,V,0,null)).return=f,0==(2&f.mode))for(ie.child=c=null!==f.memoizedState?f.child.child:f.child;null!==c;)c.return=ie,c=c.sibling;return(w=_s(Ie,V,w,null)).return=f,ie.sibling=w,f.memoizedState=Xc,f.child=ie,w}return V=ie.children,f.memoizedState=null,f.child=Mc(f,null,V,w)}if(null!==c.memoizedState){if(V=(c=c.child).sibling,Ie){if(ie=ie.fallback,(w=ka(c,c.pendingProps)).return=f,0==(2&f.mode)&&(Ie=null!==f.memoizedState?f.child.child:f.child)!==c.child)for(w.child=Ie;null!==Ie;)Ie.return=w,Ie=Ie.sibling;return(V=ka(V,ie)).return=f,w.sibling=V,w.childExpirationTime=0,f.memoizedState=Xc,f.child=w,V}return w=wa(f,c.child,ie.children,w),f.memoizedState=null,f.child=w}if(c=c.child,Ie){if(Ie=ie.fallback,(ie=_s(null,V,0,null)).return=f,ie.child=c,null!==c&&(c.return=ie),0==(2&f.mode))for(ie.child=c=null!==f.memoizedState?f.child.child:f.child;null!==c;)c.return=ie,c=c.sibling;return(w=_s(Ie,V,w,null)).return=f,ie.sibling=w,w.effectTag|=2,ie.childExpirationTime=0,f.memoizedState=Xc,f.child=ie,w}return f.memoizedState=null,f.child=wa(f,c,ie.children,w)}function pi(c,f){c.expirationTime<f&&(c.expirationTime=f);var w=c.alternate;null!==w&&w.expirationTime<f&&(w.expirationTime=f),Oc(c.return,f)}function bu(c,f,w,V,ie,xe){var Ie=c.memoizedState;null===Ie?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:V,tail:w,tailExpiration:0,tailMode:ie,lastEffect:xe}:(Ie.isBackwards=f,Ie.rendering=null,Ie.renderingStartTime=0,Ie.last=V,Ie.tail=w,Ie.tailExpiration=0,Ie.tailMode=ie,Ie.lastEffect=xe)}function Jc(c,f,w){var V=f.pendingProps,ie=V.revealOrder,xe=V.tail;if(Zr(c,f,V.children,w),0!=(2&(V=nr.current)))V=1&V|2,f.effectTag|=64;else{if(null!==c&&0!=(64&c.effectTag))e:for(c=f.child;null!==c;){if(13===c.tag)null!==c.memoizedState&&pi(c,w);else if(19===c.tag)pi(c,w);else if(null!==c.child){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;null===c.sibling;){if(null===c.return||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}V&=1}if(gr(nr,V),0==(2&f.mode))f.memoizedState=null;else switch(ie){case"forwards":for(w=f.child,ie=null;null!==w;)null!==(c=w.alternate)&&null===pl(c)&&(ie=w),w=w.sibling;null===(w=ie)?(ie=f.child,f.child=null):(ie=w.sibling,w.sibling=null),bu(f,!1,ie,w,xe,f.lastEffect);break;case"backwards":for(w=null,ie=f.child,f.child=null;null!==ie;){if(null!==(c=ie.alternate)&&null===pl(c)){f.child=ie;break}c=ie.sibling,ie.sibling=w,w=ie,ie=c}bu(f,!0,w,null,xe,f.lastEffect);break;case"together":bu(f,!1,null,null,void 0,f.lastEffect);break;default:f.memoizedState=null}return f.child}function Fi(c,f,w){null!==c&&(f.dependencies=c.dependencies);var V=f.expirationTime;if(0!==V&&Du(V),f.childExpirationTime<w)return null;if(null!==c&&f.child!==c.child)throw Error(j(153));if(null!==f.child){for(w=ka(c=f.child,c.pendingProps),f.child=w,w.return=f;null!==c.sibling;)(w=w.sibling=ka(c=c.sibling,c.pendingProps)).return=f;w.sibling=null}return f.child}function Sa(c,f){switch(c.tailMode){case"hidden":f=c.tail;for(var w=null;null!==f;)null!==f.alternate&&(w=f),f=f.sibling;null===w?c.tail=null:w.sibling=null;break;case"collapsed":w=c.tail;for(var V=null;null!==w;)null!==w.alternate&&(V=w),w=w.sibling;null===V?f||null===c.tail?c.tail=null:c.tail.sibling=null:V.sibling=null}}function Am(c,f,w){var V=f.pendingProps;switch(f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return vi(f.type)&&ou(),null;case 3:return ps(),tr(gi),tr(Jr),(w=f.stateNode).pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),null!==c&&null!==c.child||!yl(f)||(f.effectTag|=4),null;case 5:Ca(f),w=Ns(fl.current);var ie=f.type;if(null!==c&&null!=f.stateNode)Zc(c,f,ie,V,w),c.ref!==f.ref&&(f.effectTag|=128);else{if(!V){if(null===f.stateNode)throw Error(j(166));return null}if(c=Ns(Ao.current),yl(f)){ie=f.type;var xe=f.memoizedProps;switch((V=f.stateNode)[os]=f,V[Xl]=xe,ie){case"iframe":case"object":case"embed":jn("load",V);break;case"video":case"audio":for(c=0;c<Co.length;c++)jn(Co[c],V);break;case"source":jn("error",V);break;case"img":case"image":case"link":jn("error",V),jn("load",V);break;case"form":jn("reset",V),jn("submit",V);break;case"details":jn("toggle",V);break;case"input":Ir(V,xe),jn("invalid",V),Lo(w,"onChange");break;case"select":V._wrapperState={wasMultiple:!!xe.multiple},jn("invalid",V),Lo(w,"onChange");break;case"textarea":wo(V,xe),jn("invalid",V),Lo(w,"onChange")}for(var Ie in Wa(ie,xe),c=null,xe)if(xe.hasOwnProperty(Ie)){var qe=xe[Ie];"children"===Ie?"string"==typeof qe?V.textContent!==qe&&(c=["children",qe]):"number"==typeof qe&&V.textContent!==""+qe&&(c=["children",""+qe]):pe.hasOwnProperty(Ie)&&null!=qe&&Lo(w,Ie)}switch(ie){case"input":fr(V),li(V,xe,!0);break;case"textarea":fr(V),ro(V);break;case"select":case"option":break;default:"function"==typeof xe.onClick&&(V.onclick=Hl)}f.updateQueue=w=c,null!==w&&(f.effectTag|=4)}else{switch(Ie=9===w.nodeType?w:w.ownerDocument,c===Qa&&(c=Ui(ie)),c===Qa?"script"===ie?((c=Ie.createElement("div")).innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):"string"==typeof V.is?c=Ie.createElement(ie,{is:V.is}):(c=Ie.createElement(ie),"select"===ie&&(Ie=c,V.multiple?Ie.multiple=!0:V.size&&(Ie.size=V.size))):c=Ie.createElementNS(c,ie),c[os]=f,c[Xl]=V,Qc(c,f),f.stateNode=c,Ie=Ja(ie,V),ie){case"iframe":case"object":case"embed":jn("load",c),qe=V;break;case"video":case"audio":for(qe=0;qe<Co.length;qe++)jn(Co[qe],c);qe=V;break;case"source":jn("error",c),qe=V;break;case"img":case"image":case"link":jn("error",c),jn("load",c),qe=V;break;case"form":jn("reset",c),jn("submit",c),qe=V;break;case"details":jn("toggle",c),qe=V;break;case"input":Ir(c,V),qe=Nn(c,V),jn("invalid",c),Lo(w,"onChange");break;case"option":qe=mi(c,V);break;case"select":c._wrapperState={wasMultiple:!!V.multiple},qe=C({},V,{value:void 0}),jn("invalid",c),Lo(w,"onChange");break;case"textarea":wo(c,V),qe=Pi(c,V),jn("invalid",c),Lo(w,"onChange");break;default:qe=V}Wa(ie,qe);var yt=qe;for(xe in yt)if(yt.hasOwnProperty(xe)){var _t=yt[xe];"style"===xe?xo(c,_t):"dangerouslySetInnerHTML"===xe?null!=(_t=_t?_t.__html:void 0)&&Xr(c,_t):"children"===xe?"string"==typeof _t?("textarea"!==ie||""!==_t)&&ci(c,_t):"number"==typeof _t&&ci(c,""+_t):"suppressContentEditableWarning"!==xe&&"suppressHydrationWarning"!==xe&&"autoFocus"!==xe&&(pe.hasOwnProperty(xe)?null!=_t&&Lo(w,xe):null!=_t&&k(c,xe,_t,Ie))}switch(ie){case"input":fr(c),li(c,V,!1);break;case"textarea":fr(c),ro(c);break;case"option":null!=V.value&&c.setAttribute("value",""+Sr(V.value));break;case"select":c.multiple=!!V.multiple,null!=(w=V.value)?ui(c,!!V.multiple,w,!1):null!=V.defaultValue&&ui(c,!!V.multiple,V.defaultValue,!0);break;default:"function"==typeof qe.onClick&&(c.onclick=Hl)}Af(ie,V)&&(f.effectTag|=4)}null!==f.ref&&(f.effectTag|=128)}return null;case 6:if(c&&null!=f.stateNode)wu(0,f,c.memoizedProps,V);else{if("string"!=typeof V&&null===f.stateNode)throw Error(j(166));w=Ns(fl.current),Ns(Ao.current),yl(f)?(V=f.memoizedProps,(w=f.stateNode)[os]=f,w.nodeValue!==V&&(f.effectTag|=4)):((w=(9===w.nodeType?w:w.ownerDocument).createTextNode(V))[os]=f,f.stateNode=w)}return null;case 13:return tr(nr),V=f.memoizedState,0!=(64&f.effectTag)?(f.expirationTime=w,f):(w=null!==V,V=!1,null===c?void 0!==f.memoizedProps.fallback&&yl(f):(V=null!==(ie=c.memoizedState),w||null===ie||null!==(ie=c.child.sibling)&&(null!==(xe=f.firstEffect)?(f.firstEffect=ie,ie.nextEffect=xe):(f.firstEffect=f.lastEffect=ie,ie.nextEffect=null),ie.effectTag=8)),w&&!V&&0!=(2&f.mode)&&(null===c&&!0!==f.memoizedProps.unstable_avoidThisFallback||0!=(1&nr.current)?Br===gs&&(Br=Su):((Br===gs||Br===Su)&&(Br=Eu),0!==Gs&&null!==Wi&&(bs(Wi,Di),xp(Wi,Gs)))),(w||V)&&(f.effectTag|=4),null);case 4:return ps(),null;case 10:return kc(f),null;case 19:if(tr(nr),null===(V=f.memoizedState))return null;if(ie=0!=(64&f.effectTag),null===(xe=V.rendering)){if(ie)Sa(V,!1);else if(Br!==gs||null!==c&&0!=(64&c.effectTag))for(xe=f.child;null!==xe;){if(null!==(c=pl(xe))){for(f.effectTag|=64,Sa(V,!1),null!==(ie=c.updateQueue)&&(f.updateQueue=ie,f.effectTag|=4),null===V.lastEffect&&(f.firstEffect=null),f.lastEffect=V.lastEffect,V=f.child;null!==V;)xe=w,(ie=V).effectTag&=2,ie.nextEffect=null,ie.firstEffect=null,ie.lastEffect=null,null===(c=ie.alternate)?(ie.childExpirationTime=0,ie.expirationTime=xe,ie.child=null,ie.memoizedProps=null,ie.memoizedState=null,ie.updateQueue=null,ie.dependencies=null):(ie.childExpirationTime=c.childExpirationTime,ie.expirationTime=c.expirationTime,ie.child=c.child,ie.memoizedProps=c.memoizedProps,ie.memoizedState=c.memoizedState,ie.updateQueue=c.updateQueue,ie.dependencies=null===(xe=c.dependencies)?null:{expirationTime:xe.expirationTime,firstContext:xe.firstContext,responders:xe.responders}),V=V.sibling;return gr(nr,1&nr.current|2),f.child}xe=xe.sibling}}else{if(!ie)if(null!==(c=pl(xe))){if(f.effectTag|=64,ie=!0,null!==(w=c.updateQueue)&&(f.updateQueue=w,f.effectTag|=4),Sa(V,!0),null===V.tail&&"hidden"===V.tailMode&&!xe.alternate)return null!==(f=f.lastEffect=V.lastEffect)&&(f.nextEffect=null),null}else 2*qi()-V.renderingStartTime>V.tailExpiration&&1<w&&(f.effectTag|=64,ie=!0,Sa(V,!1),f.expirationTime=f.childExpirationTime=w-1);V.isBackwards?(xe.sibling=f.child,f.child=xe):(null!==(w=V.last)?w.sibling=xe:f.child=xe,V.last=xe)}return null!==V.tail?(0===V.tailExpiration&&(V.tailExpiration=qi()+500),V.rendering=w=V.tail,V.tail=w.sibling,V.lastEffect=f.lastEffect,V.renderingStartTime=qi(),w.sibling=null,f=nr.current,gr(nr,ie?1&f|2:1&f),w):null}throw Error(j(156,f.tag))}function Pm(c){switch(c.tag){case 1:vi(c.type)&&ou();var f=c.effectTag;return 4096&f?(c.effectTag=-4097&f|64,c):null;case 3:if(ps(),tr(gi),tr(Jr),0!=(64&(f=c.effectTag)))throw Error(j(285));return c.effectTag=-4097&f|64,c;case 5:return Ca(c),null;case 13:return tr(nr),4096&(f=c.effectTag)?(c.effectTag=-4097&f|64,c):null;case 19:return tr(nr),null;case 4:return ps(),null;case 10:return kc(c),null;default:return null}}function Ea(c,f){return{value:c,source:f,stack:gn(f)}}Qc=function(c,f){for(var w=f.child;null!==w;){if(5===w.tag||6===w.tag)c.appendChild(w.stateNode);else if(4!==w.tag&&null!==w.child){w.child.return=w,w=w.child;continue}if(w===f)break;for(;null===w.sibling;){if(null===w.return||w.return===f)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},Zc=function(c,f,w,V,ie){var xe=c.memoizedProps;if(xe!==V){var qe,yt,Ie=f.stateNode;switch(Ns(Ao.current),c=null,w){case"input":xe=Nn(Ie,xe),V=Nn(Ie,V),c=[];break;case"option":xe=mi(Ie,xe),V=mi(Ie,V),c=[];break;case"select":xe=C({},xe,{value:void 0}),V=C({},V,{value:void 0}),c=[];break;case"textarea":xe=Pi(Ie,xe),V=Pi(Ie,V),c=[];break;default:"function"!=typeof xe.onClick&&"function"==typeof V.onClick&&(Ie.onclick=Hl)}for(qe in Wa(w,V),w=null,xe)if(!V.hasOwnProperty(qe)&&xe.hasOwnProperty(qe)&&null!=xe[qe])if("style"===qe)for(yt in Ie=xe[qe])Ie.hasOwnProperty(yt)&&(w||(w={}),w[yt]="");else"dangerouslySetInnerHTML"!==qe&&"children"!==qe&&"suppressContentEditableWarning"!==qe&&"suppressHydrationWarning"!==qe&&"autoFocus"!==qe&&(pe.hasOwnProperty(qe)?c||(c=[]):(c=c||[]).push(qe,null));for(qe in V){var _t=V[qe];if(Ie=null!=xe?xe[qe]:void 0,V.hasOwnProperty(qe)&&_t!==Ie&&(null!=_t||null!=Ie))if("style"===qe)if(Ie){for(yt in Ie)!Ie.hasOwnProperty(yt)||_t&&_t.hasOwnProperty(yt)||(w||(w={}),w[yt]="");for(yt in _t)_t.hasOwnProperty(yt)&&Ie[yt]!==_t[yt]&&(w||(w={}),w[yt]=_t[yt])}else w||(c||(c=[]),c.push(qe,w)),w=_t;else"dangerouslySetInnerHTML"===qe?(Ie=Ie?Ie.__html:void 0,null!=(_t=_t?_t.__html:void 0)&&Ie!==_t&&(c=c||[]).push(qe,_t)):"children"===qe?Ie===_t||"string"!=typeof _t&&"number"!=typeof _t||(c=c||[]).push(qe,""+_t):"suppressContentEditableWarning"!==qe&&"suppressHydrationWarning"!==qe&&(pe.hasOwnProperty(qe)?(null!=_t&&Lo(ie,qe),c||Ie===_t||(c=[])):(c=c||[]).push(qe,_t))}w&&(c=c||[]).push("style",w),(f.updateQueue=ie=c)&&(f.effectTag|=4)}},wu=function(c,f,w,V){w!==V&&(f.effectTag|=4)};var ed="function"==typeof WeakSet?WeakSet:Set;function _l(c,f){var w=f.source,V=f.stack;null===V&&null!==w&&(V=gn(w)),null!==w&&Lt(w.type),f=f.value,null!==c&&1===c.tag&&Lt(c.type);try{console.error(f)}catch(ie){setTimeout(function(){throw ie})}}function pp(c){var f=c.ref;if(null!==f)if("function"==typeof f)try{f(null)}catch(w){Xs(c,w)}else f.current=null}function Cu(c,f){switch(f.tag){case 0:case 11:case 15:case 22:case 3:case 5:case 6:case 4:case 17:return;case 1:if(256&f.effectTag&&null!==c){var w=c.memoizedProps,V=c.memoizedState;f=(c=f.stateNode).getSnapshotBeforeUpdate(f.elementType===f.type?w:uo(f.type,w),V),c.__reactInternalSnapshotBeforeUpdate=f}return}throw Error(j(163))}function hp(c,f){if(null!==(f=null!==(f=f.updateQueue)?f.lastEffect:null)){var w=f=f.next;do{if((w.tag&c)===c){var V=w.destroy;w.destroy=void 0,void 0!==V&&V()}w=w.next}while(w!==f)}}function nd(c,f){if(null!==(f=null!==(f=f.updateQueue)?f.lastEffect:null)){var w=f=f.next;do{(w.tag&c)===c&&(w.destroy=(0,w.create)()),w=w.next}while(w!==f)}}function rd(c,f,w){switch(w.tag){case 0:case 11:case 15:case 22:return void nd(3,w);case 1:if(c=w.stateNode,4&w.effectTag)if(null===f)c.componentDidMount();else{var V=w.elementType===w.type?f.memoizedProps:uo(w.type,f.memoizedProps);c.componentDidUpdate(V,f.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}return void(null!==(f=w.updateQueue)&&rp(w,f,c));case 3:if(null!==(f=w.updateQueue)){if(c=null,null!==w.child)switch(w.child.tag){case 5:case 1:c=w.child.stateNode}rp(w,f,c)}return;case 5:return c=w.stateNode,void(null===f&&4&w.effectTag&&Af(w.type,w.memoizedProps)&&c.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:return;case 13:return void(null===w.memoizedState&&(w=w.alternate,null!==w&&(w=w.memoizedState,null!==w&&(w=w.dehydrated,null!==w&&ks(w)))))}throw Error(j(163))}function id(c,f,w){switch("function"==typeof _d&&_d(f),f.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(c=f.updateQueue)&&null!==(c=c.lastEffect)){var V=c.next;Qr(97<w?97:w,function(){var ie=V;do{var xe=ie.destroy;if(void 0!==xe){var Ie=f;try{xe()}catch(qe){Xs(Ie,qe)}}ie=ie.next}while(ie!==V)})}break;case 1:pp(f),"function"==typeof(w=f.stateNode).componentWillUnmount&&function td(c,f){try{f.props=c.memoizedProps,f.state=c.memoizedState,f.componentWillUnmount()}catch(w){Xs(c,w)}}(f,w);break;case 5:pp(f);break;case 4:bl(c,f,w)}}function od(c){var f=c.alternate;c.return=null,c.child=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.alternate=null,c.firstEffect=null,c.lastEffect=null,c.pendingProps=null,c.memoizedProps=null,c.stateNode=null,null!==f&&od(f)}function mp(c){return 5===c.tag||3===c.tag||4===c.tag}function sd(c){e:{for(var f=c.return;null!==f;){if(mp(f)){var w=f;break e}f=f.return}throw Error(j(160))}switch(f=w.stateNode,w.tag){case 5:var V=!1;break;case 3:case 4:f=f.containerInfo,V=!0;break;default:throw Error(j(161))}16&w.effectTag&&(ci(f,""),w.effectTag&=-17);e:t:for(w=c;;){for(;null===w.sibling;){if(null===w.return||mp(w.return)){w=null;break e}w=w.return}for(w.sibling.return=w.return,w=w.sibling;5!==w.tag&&6!==w.tag&&18!==w.tag;){if(2&w.effectTag||null===w.child||4===w.tag)continue t;w.child.return=w,w=w.child}if(!(2&w.effectTag)){w=w.stateNode;break e}}V?gp(c,w,f):ad(c,w,f)}function gp(c,f,w){var V=c.tag,ie=5===V||6===V;if(ie)c=ie?c.stateNode:c.stateNode.instance,f?8===w.nodeType?w.parentNode.insertBefore(c,f):w.insertBefore(c,f):(8===w.nodeType?(f=w.parentNode).insertBefore(c,w):(f=w).appendChild(c),null!=(w=w._reactRootContainer)||null!==f.onclick||(f.onclick=Hl));else if(4!==V&&null!==(c=c.child))for(gp(c,f,w),c=c.sibling;null!==c;)gp(c,f,w),c=c.sibling}function ad(c,f,w){var V=c.tag,ie=5===V||6===V;if(ie)c=ie?c.stateNode:c.stateNode.instance,f?w.insertBefore(c,f):w.appendChild(c);else if(4!==V&&null!==(c=c.child))for(ad(c,f,w),c=c.sibling;null!==c;)ad(c,f,w),c=c.sibling}function bl(c,f,w){for(var xe,Ie,V=f,ie=!1;;){if(!ie){ie=V.return;e:for(;;){if(null===ie)throw Error(j(160));switch(xe=ie.stateNode,ie.tag){case 5:Ie=!1;break e;case 3:case 4:xe=xe.containerInfo,Ie=!0;break e}ie=ie.return}ie=!0}if(5===V.tag||6===V.tag){e:for(var qe=c,yt=V,_t=w,Bt=yt;;)if(id(qe,Bt,_t),null!==Bt.child&&4!==Bt.tag)Bt.child.return=Bt,Bt=Bt.child;else{if(Bt===yt)break e;for(;null===Bt.sibling;){if(null===Bt.return||Bt.return===yt)break e;Bt=Bt.return}Bt.sibling.return=Bt.return,Bt=Bt.sibling}Ie?(yt=V.stateNode,8===(qe=xe).nodeType?qe.parentNode.removeChild(yt):qe.removeChild(yt)):xe.removeChild(V.stateNode)}else if(4===V.tag){if(null!==V.child){xe=V.stateNode.containerInfo,Ie=!0,V.child.return=V,V=V.child;continue}}else if(id(c,V,w),null!==V.child){V.child.return=V,V=V.child;continue}if(V===f)break;for(;null===V.sibling;){if(null===V.return||V.return===f)return;4===(V=V.return).tag&&(ie=!1)}V.sibling.return=V.return,V=V.sibling}}function ld(c,f){switch(f.tag){case 0:case 11:case 14:case 15:case 22:return void hp(3,f);case 1:case 12:case 17:return;case 5:var w=f.stateNode;if(null!=w){var V=f.memoizedProps,ie=null!==c?c.memoizedProps:V;c=f.type;var xe=f.updateQueue;if(f.updateQueue=null,null!==xe){for(w[Xl]=V,"input"===c&&"radio"===V.type&&null!=V.name&&ar(w,V),Ja(c,ie),f=Ja(c,V),ie=0;ie<xe.length;ie+=2){var Ie=xe[ie],qe=xe[ie+1];"style"===Ie?xo(w,qe):"dangerouslySetInnerHTML"===Ie?Xr(w,qe):"children"===Ie?ci(w,qe):k(w,Ie,qe,f)}switch(c){case"input":Tr(w,V);break;case"textarea":Ur(w,V);break;case"select":f=w._wrapperState.wasMultiple,w._wrapperState.wasMultiple=!!V.multiple,null!=(c=V.value)?ui(w,!!V.multiple,c,!1):f!==!!V.multiple&&(null!=V.defaultValue?ui(w,!!V.multiple,V.defaultValue,!0):ui(w,!!V.multiple,V.multiple?[]:"",!1))}}}return;case 6:if(null===f.stateNode)throw Error(j(162));return void(f.stateNode.nodeValue=f.memoizedProps);case 3:return void((f=f.stateNode).hydrate&&(f.hydrate=!1,ks(f.containerInfo)));case 13:if(w=f,null===f.memoizedState?V=!1:(V=!0,w=f.child,yp=qi()),null!==w)e:for(c=w;;){if(5===c.tag)xe=c.stateNode,V?"function"==typeof(xe=xe.style).setProperty?xe.setProperty("display","none","important"):xe.display="none":(xe=c.stateNode,ie=null!=(ie=c.memoizedProps.style)&&ie.hasOwnProperty("display")?ie.display:null,xe.style.display=Xa("display",ie));else if(6===c.tag)c.stateNode.nodeValue=V?"":c.memoizedProps;else{if(13===c.tag&&null!==c.memoizedState&&null===c.memoizedState.dehydrated){(xe=c.child.sibling).return=c,c=xe;continue}if(null!==c.child){c.child.return=c,c=c.child;continue}}if(c===w)break;for(;null===c.sibling;){if(null===c.return||c.return===w)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}return void ud(f);case 19:return void ud(f)}throw Error(j(163))}function ud(c){var f=c.updateQueue;if(null!==f){c.updateQueue=null;var w=c.stateNode;null===w&&(w=c.stateNode=new ed),f.forEach(function(V){var ie=Dm.bind(null,c,V);w.has(V)||(w.add(V),V.then(ie,ie))})}}var cd="function"==typeof WeakMap?WeakMap:Map;function dd(c,f,w){(w=fs(w,null)).tag=3,w.payload={element:null};var V=f.value;return w.callback=function(){Cl||(Cl=!0,Iu=V),_l(c,f)},w}function fd(c,f,w){(w=fs(w,null)).tag=3;var V=c.type.getDerivedStateFromError;if("function"==typeof V){var ie=f.value;w.payload=function(){return _l(c,f),V(ie)}}var xe=c.stateNode;return null!==xe&&"function"==typeof xe.componentDidCatch&&(w.callback=function(){"function"!=typeof V&&(null===Vs?Vs=new Set([this]):Vs.add(this),_l(c,f));var Ie=f.stack;this.componentDidCatch(f.value,{componentStack:null!==Ie?Ie:""})}),w}var xl,vp=Math.ceil,xu=$.ReactCurrentDispatcher,Yn=$.ReactCurrentOwner,gs=0,Su=3,Eu=4,ln=0,Wi=null,vn=null,Di=0,Br=gs,Pu=null,Lr=1073741823,Us=1073741823,Aa=null,Gs=0,Pa=!1,yp=0,qt=null,Cl=!1,Iu=null,Vs=null,Tu=!1,Ru=null,vs=90,Ta=null,ei=0,md=null,ku=0;function _i(){return 0!=(48&ln)?1073741821-(qi()/10|0):0!==ku?ku:ku=1073741821-(qi()/10|0)}function $s(c,f,w){if(0==(2&(f=f.mode)))return 1073741823;var V=Qt();if(0==(4&f))return 99===V?1073741823:1073741822;if(0!=(16&ln))return Di;if(null!==w)c=su(c,0|w.timeoutMs||5e3,250);else switch(V){case 99:c=1073741823;break;case 98:c=su(c,150,100);break;case 97:case 96:c=su(c,5e3,250);break;case 95:c=2;break;default:throw Error(j(326))}return null!==Wi&&c===Di&&--c,c}function Hs(c,f){if(50<ei)throw ei=0,md=null,Error(j(185));if(null!==(c=gd(c,f))){var w=Qt();1073741823===f?0!=(8&ln)&&0==(48&ln)?ys(c):(ti(c),0===ln&&So()):ti(c),0==(4&ln)||98!==w&&99!==w||(null===Ta?Ta=new Map([[c,f]]):(void 0===(w=Ta.get(c))||w>f)&&Ta.set(c,f))}}function gd(c,f){c.expirationTime<f&&(c.expirationTime=f);var w=c.alternate;null!==w&&w.expirationTime<f&&(w.expirationTime=f);var V=c.return,ie=null;if(null===V&&3===c.tag)ie=c.stateNode;else for(;null!==V;){if(w=V.alternate,V.childExpirationTime<f&&(V.childExpirationTime=f),null!==w&&w.childExpirationTime<f&&(w.childExpirationTime=f),null===V.return&&3===V.tag){ie=V.stateNode;break}V=V.return}return null!==ie&&(Wi===ie&&(Du(f),Br===Eu&&bs(ie,Di)),xp(ie,f)),ie}function vd(c){var f=c.lastExpiredTime;if(0!==f||!Sl(c,f=c.firstPendingTime))return f;var w=c.lastPingedTime;return 2>=(c=w>(c=c.nextKnownPendingLevel)?w:c)&&f!==c?0:c}function ti(c){if(0!==c.lastExpiredTime)c.callbackExpirationTime=1073741823,c.callbackPriority=99,c.callbackNode=np(ys.bind(null,c));else{var f=vd(c),w=c.callbackNode;if(0===f)null!==w&&(c.callbackNode=null,c.callbackExpirationTime=0,c.callbackPriority=90);else{var V=_i();if(V=1073741823===f?99:1===f||2===f?95:0>=(V=10*(1073741821-f)-10*(1073741821-V))?99:250>=V?98:5250>=V?97:95,null!==w){if(c.callbackExpirationTime===f&&c.callbackPriority>=V)return;w!==Zf&&Ri(w)}c.callbackExpirationTime=f,c.callbackPriority=V,f=1073741823===f?np(ys.bind(null,c)):Tc(V,_p.bind(null,c),{timeout:10*(1073741821-f)-qi()}),c.callbackNode=f}}}function _p(c,f){if(ku=0,f)return Sp(c,f=_i()),ti(c),null;var w=vd(c);if(0!==w){if(f=c.callbackNode,0!=(48&ln))throw Error(j(327));if(Ra(),c===Wi&&w===Di||Jo(c,w),null!==vn){var V=ln;ln|=16;for(var ie=Fu();;)try{km();break}catch(qe){Ou(c,qe)}if(ds(),ln=V,xu.current=ie,1===Br)throw f=Pu,Jo(c,w),bs(c,w),ti(c),f;if(null===vn)switch(ie=c.finishedWork=c.current.alternate,c.finishedExpirationTime=w,V=Br,Wi=null,V){case gs:case 1:throw Error(j(345));case 2:Sp(c,2<w?2:w);break;case Su:if(bs(c,w),w===(V=c.lastSuspendedTime)&&(c.nextKnownPendingLevel=yd(ie)),1073741823===Lr&&10<(ie=yp+500-qi())){if(Pa){var xe=c.lastPingedTime;if(0===xe||xe>=w){c.lastPingedTime=w,Jo(c,w);break}}if(0!==(xe=vd(c))&&xe!==w)break;if(0!==V&&V!==w){c.lastPingedTime=V;break}c.timeoutHandle=Kl(Ks.bind(null,c),ie);break}Ks(c);break;case Eu:if(bs(c,w),w===(V=c.lastSuspendedTime)&&(c.nextKnownPendingLevel=yd(ie)),Pa&&(0===(ie=c.lastPingedTime)||ie>=w)){c.lastPingedTime=w,Jo(c,w);break}if(0!==(ie=vd(c))&&ie!==w)break;if(0!==V&&V!==w){c.lastPingedTime=V;break}if(1073741823!==Us?V=10*(1073741821-Us)-qi():1073741823===Lr?V=0:(V=10*(1073741821-Lr)-5e3,0>(V=(ie=qi())-V)&&(V=0),(w=10*(1073741821-w)-ie)<(V=(120>V?120:480>V?480:1080>V?1080:1920>V?1920:3e3>V?3e3:4320>V?4320:1960*vp(V/1960))-V)&&(V=w)),10<V){c.timeoutHandle=Kl(Ks.bind(null,c),V);break}Ks(c);break;case 5:if(1073741823!==Lr&&null!==Aa){xe=Lr;var Ie=Aa;if(0>=(V=0|Ie.busyMinDurationMs)?V=0:(ie=0|Ie.busyDelayMs,V=(xe=qi()-(10*(1073741821-xe)-(0|Ie.timeoutMs||5e3)))<=ie?0:ie+V-xe),10<V){bs(c,w),c.timeoutHandle=Kl(Ks.bind(null,c),V);break}}Ks(c);break;default:throw Error(j(329))}if(ti(c),c.callbackNode===f)return _p.bind(null,c)}}return null}function ys(c){var f=c.lastExpiredTime;if(f=0!==f?f:1073741823,0!=(48&ln))throw Error(j(327));if(Ra(),c===Wi&&f===Di||Jo(c,f),null!==vn){var w=ln;ln|=16;for(var V=Fu();;)try{Rm();break}catch(ie){Ou(c,ie)}if(ds(),ln=w,xu.current=V,1===Br)throw w=Pu,Jo(c,f),bs(c,f),ti(c),w;if(null!==vn)throw Error(j(261));c.finishedWork=c.current.alternate,c.finishedExpirationTime=f,Wi=null,Ks(c),ti(c)}return null}function tt(c,f){var w=ln;ln&=-2,ln|=8;try{return c(f)}finally{0===(ln=w)&&So()}}function Jo(c,f){c.finishedWork=null,c.finishedExpirationTime=0;var w=c.timeoutHandle;if(-1!==w&&(c.timeoutHandle=-1,Pf(w)),null!==vn)for(w=vn.return;null!==w;){var V=w;switch(V.tag){case 1:null!=(V=V.type.childContextTypes)&&ou();break;case 3:ps(),tr(gi),tr(Jr);break;case 5:Ca(V);break;case 4:ps();break;case 13:case 19:tr(nr);break;case 10:kc(V)}w=w.return}Wi=c,vn=ka(c.current,null),Di=f,Br=gs,Pu=null,Us=Lr=1073741823,Aa=null,Gs=0,Pa=!1}function Ou(c,f){for(;;){try{if(ds(),hl.current=gu,ml)for(var w=Or.memoizedState;null!==w;){var V=w.queue;null!==V&&(V.pending=null),w=w.next}if(fo=0,jr=Yr=Or=null,ml=!1,null===vn||null===vn.return)return Br=1,Pu=f,vn=null;e:{var ie=c,xe=vn.return,Ie=vn,qe=f;if(f=Di,Ie.effectTag|=2048,Ie.firstEffect=Ie.lastEffect=null,null!==qe&&"object"==typeof qe&&"function"==typeof qe.then){var yt=qe;if(0==(2&Ie.mode)){var _t=Ie.alternate;_t?(Ie.updateQueue=_t.updateQueue,Ie.memoizedState=_t.memoizedState,Ie.expirationTime=_t.expirationTime):(Ie.updateQueue=null,Ie.memoizedState=null)}var Bt=0!=(1&nr.current),Vt=xe;do{var Cn;if(Cn=13===Vt.tag){var In=Vt.memoizedState;if(null!==In)Cn=null!==In.dehydrated;else{var Ji=Vt.memoizedProps;Cn=void 0!==Ji.fallback&&(!0!==Ji.unstable_avoidThisFallback||!Bt)}}if(Cn){var Hr=Vt.updateQueue;if(null===Hr){var dt=new Set;dt.add(yt),Vt.updateQueue=dt}else Hr.add(yt);if(0==(2&Vt.mode)){if(Vt.effectTag|=64,Ie.effectTag&=-2981,1===Ie.tag)if(null===Ie.alternate)Ie.tag=17;else{var lt=fs(1073741823,null);lt.tag=2,Eo(Ie,lt)}Ie.expirationTime=1073741823;break e}qe=void 0,Ie=f;var wt=ie.pingCache;if(null===wt?(wt=ie.pingCache=new cd).set(yt,qe=new Set):void 0===(qe=wt.get(yt))&&wt.set(yt,qe=new Set),!qe.has(Ie)){qe.add(Ie);var Rt=Fm.bind(null,ie,yt,Ie);yt.then(Rt,Rt)}Vt.effectTag|=4096,Vt.expirationTime=f;break e}Vt=Vt.return}while(null!==Vt);qe=Error((Lt(Ie.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+gn(Ie))}5!==Br&&(Br=2),qe=Ea(qe,Ie),Vt=xe;do{switch(Vt.tag){case 3:yt=qe,Vt.effectTag|=4096,Vt.expirationTime=f,ul(Vt,dd(Vt,yt,f));break e;case 1:yt=qe;var tn=Vt.stateNode;if(0==(64&Vt.effectTag)&&("function"==typeof Vt.type.getDerivedStateFromError||null!==tn&&"function"==typeof tn.componentDidCatch&&(null===Vs||!Vs.has(tn)))){Vt.effectTag|=4096,Vt.expirationTime=f,ul(Vt,fd(Vt,yt,f));break e}}Vt=Vt.return}while(null!==Vt)}vn=Mu(vn)}catch(ir){f=ir;continue}break}}function Fu(){var c=xu.current;return xu.current=gu,null===c?gu:c}function bp(c,f){c<Lr&&2<c&&(Lr=c),null!==f&&c<Us&&2<c&&(Us=c,Aa=f)}function Du(c){c>Gs&&(Gs=c)}function Rm(){for(;null!==vn;)vn=wp(vn)}function km(){for(;null!==vn&&!cs();)vn=wp(vn)}function wp(c){var f=xl(c.alternate,c,Di);return c.memoizedProps=c.pendingProps,null===f&&(f=Mu(c)),Yn.current=null,f}function Mu(c){vn=c;do{var f=vn.alternate;if(c=vn.return,0==(2048&vn.effectTag)){if(f=Am(f,vn,Di),1===Di||1!==vn.childExpirationTime){for(var w=0,V=vn.child;null!==V;){var ie=V.expirationTime,xe=V.childExpirationTime;ie>w&&(w=ie),xe>w&&(w=xe),V=V.sibling}vn.childExpirationTime=w}if(null!==f)return f;null!==c&&0==(2048&c.effectTag)&&(null===c.firstEffect&&(c.firstEffect=vn.firstEffect),null!==vn.lastEffect&&(null!==c.lastEffect&&(c.lastEffect.nextEffect=vn.firstEffect),c.lastEffect=vn.lastEffect),1<vn.effectTag&&(null!==c.lastEffect?c.lastEffect.nextEffect=vn:c.firstEffect=vn,c.lastEffect=vn))}else{if(null!==(f=Pm(vn)))return f.effectTag&=2047,f;null!==c&&(c.firstEffect=c.lastEffect=null,c.effectTag|=2048)}if(null!==(f=vn.sibling))return f;vn=c}while(null!==vn);return Br===gs&&(Br=5),null}function yd(c){var f=c.expirationTime;return f>(c=c.childExpirationTime)?f:c}function Ks(c){var f=Qt();return Qr(99,Gt.bind(null,c,f)),null}function Gt(c,f){do{Ra()}while(null!==Ru);if(0!=(48&ln))throw Error(j(327));var w=c.finishedWork,V=c.finishedExpirationTime;if(null===w)return null;if(c.finishedWork=null,c.finishedExpirationTime=0,w===c.current)throw Error(j(177));c.callbackNode=null,c.callbackExpirationTime=0,c.callbackPriority=90,c.nextKnownPendingLevel=0;var ie=yd(w);if(c.firstPendingTime=ie,V<=c.lastSuspendedTime?c.firstSuspendedTime=c.lastSuspendedTime=c.nextKnownPendingLevel=0:V<=c.firstSuspendedTime&&(c.firstSuspendedTime=V-1),V<=c.lastPingedTime&&(c.lastPingedTime=0),V<=c.lastExpiredTime&&(c.lastExpiredTime=0),c===Wi&&(vn=Wi=null,Di=0),1<w.effectTag?null!==w.lastEffect?(w.lastEffect.nextEffect=w,ie=w.firstEffect):ie=w:ie=w.firstEffect,null!==ie){var xe=ln;ln|=32,Yn.current=null,vc=is;var Ie=hc();if(ql(Ie)){if("selectionStart"in Ie)var qe={start:Ie.selectionStart,end:Ie.selectionEnd};else{var yt=(qe=(qe=Ie.ownerDocument)&&qe.defaultView||window).getSelection&&qe.getSelection();if(yt&&0!==yt.rangeCount){qe=yt.anchorNode;var _t=yt.anchorOffset,Bt=yt.focusNode;yt=yt.focusOffset;var Vt=0,Cn=-1,In=-1,Ji=0,Hr=0,dt=Ie,lt=null;t:for(;;){for(var wt;dt!==qe||0!==_t&&3!==dt.nodeType||(Cn=Vt+_t),dt!==Bt||0!==yt&&3!==dt.nodeType||(In=Vt+yt),3===dt.nodeType&&(Vt+=dt.nodeValue.length),null!==(wt=dt.firstChild);)lt=dt,dt=wt;for(;;){if(dt===Ie)break t;if(lt===qe&&++Ji===_t&&(Cn=Vt),lt===Bt&&++Hr===yt&&(In=Vt),null!==(wt=dt.nextSibling))break;lt=(dt=lt).parentNode}dt=wt}qe=-1===Cn||-1===In?null:{start:Cn,end:In}}else qe=null}qe=qe||{start:0,end:0}}else qe=null;Ef={activeElementDetached:null,focusedElem:Ie,selectionRange:qe},is=!1,qt=ie;do{try{pn()}catch(dn){if(null===qt)throw Error(j(330));Xs(qt,dn),qt=qt.nextEffect}}while(null!==qt);qt=ie;do{try{for(Ie=c,qe=f;null!==qt;){var Rt=qt.effectTag;if(16&Rt&&ci(qt.stateNode,""),128&Rt){var Nt=qt.alternate;if(null!==Nt){var $t=Nt.ref;null!==$t&&("function"==typeof $t?$t(null):$t.current=null)}}switch(1038&Rt){case 2:sd(qt),qt.effectTag&=-3;break;case 6:sd(qt),qt.effectTag&=-3,ld(qt.alternate,qt);break;case 1024:qt.effectTag&=-1025;break;case 1028:qt.effectTag&=-1025,ld(qt.alternate,qt);break;case 4:ld(qt.alternate,qt);break;case 8:bl(Ie,_t=qt,qe),od(_t)}qt=qt.nextEffect}}catch(dn){if(null===qt)throw Error(j(330));Xs(qt,dn),qt=qt.nextEffect}}while(null!==qt);if($t=Ef,Nt=hc(),qe=$t.selectionRange,Nt!==(Rt=$t.focusedElem)&&Rt&&Rt.ownerDocument&&qh(Rt.ownerDocument.documentElement,Rt)){for((null!==qe&&ql(Rt)&&(Nt=qe.start,void 0===($t=qe.end)&&($t=Nt),"selectionStart"in Rt?(Rt.selectionStart=Nt,Rt.selectionEnd=Math.min($t,Rt.value.length)):($t=(Nt=Rt.ownerDocument||document)&&Nt.defaultView||window).getSelection&&($t=$t.getSelection(),_t=Rt.textContent.length,Ie=Math.min(qe.start,_t),qe=void 0===qe.end?Ie:Math.min(qe.end,_t),!$t.extend&&Ie>qe&&(_t=qe,qe=Ie,Ie=_t),_t=Cf(Rt,Ie),Bt=Cf(Rt,qe),_t&&Bt&&(1!==$t.rangeCount||$t.anchorNode!==_t.node||$t.anchorOffset!==_t.offset||$t.focusNode!==Bt.node||$t.focusOffset!==Bt.offset)&&((Nt=Nt.createRange()).setStart(_t.node,_t.offset),$t.removeAllRanges(),Ie>qe?($t.addRange(Nt),$t.extend(Bt.node,Bt.offset)):(Nt.setEnd(Bt.node,Bt.offset),$t.addRange(Nt))))),Nt=[],$t=Rt);$t=$t.parentNode;)1===$t.nodeType&&Nt.push({element:$t,left:$t.scrollLeft,top:$t.scrollTop});for("function"==typeof Rt.focus&&Rt.focus(),Rt=0;Rt<Nt.length;Rt++)($t=Nt[Rt]).element.scrollLeft=$t.left,$t.element.scrollTop=$t.top}is=!!vc,Ef=vc=null,c.current=w,qt=ie;do{try{for(Rt=c;null!==qt;){var tn=qt.effectTag;if(36&tn&&rd(Rt,qt.alternate,qt),128&tn){Nt=void 0;var Tn=qt.ref;if(null!==Tn)Nt=qt.stateNode,"function"==typeof Tn?Tn(Nt):Tn.current=Nt}qt=qt.nextEffect}}catch(dn){if(null===qt)throw Error(j(330));Xs(qt,dn),qt=qt.nextEffect}}while(null!==qt);qt=null,ep(),ln=xe}else c.current=w;if(Tu)Tu=!1,Ru=c,vs=f;else for(qt=ie;null!==qt;)f=qt.nextEffect,qt.nextEffect=null,qt=f;if(0===(f=c.firstPendingTime)&&(Vs=null),1073741823===f?c===md?ei++:(ei=0,md=c):ei=0,"function"==typeof re&&re(w.stateNode,V),ti(c),Cl)throw Cl=!1,c=Iu,Iu=null,c;return 0!=(8&ln)||So(),null}function pn(){for(;null!==qt;){var c=qt.effectTag;0!=(256&c)&&Cu(qt.alternate,qt),0==(512&c)||Tu||(Tu=!0,Tc(97,function(){return Ra(),null})),qt=qt.nextEffect}}function Ra(){if(90!==vs){var c=97<vs?97:vs;return vs=90,Qr(c,Om)}}function Om(){if(null===Ru)return!1;var c=Ru;if(Ru=null,0!=(48&ln))throw Error(j(331));var f=ln;for(ln|=32,c=c.current.firstEffect;null!==c;){try{var w=c;if(0!=(512&w.effectTag))switch(w.tag){case 0:case 11:case 15:case 22:hp(5,w),nd(5,w)}}catch(V){if(null===c)throw Error(j(330));Xs(c,V)}w=c.nextEffect,c.nextEffect=null,c=w}return ln=f,So(),!0}function Nu(c,f,w){Eo(c,f=dd(c,f=Ea(w,f),1073741823)),null!==(c=gd(c,1073741823))&&ti(c)}function Xs(c,f){if(3===c.tag)Nu(c,c,f);else for(var w=c.return;null!==w;){if(3===w.tag){Nu(w,c,f);break}if(1===w.tag){var V=w.stateNode;if("function"==typeof w.type.getDerivedStateFromError||"function"==typeof V.componentDidCatch&&(null===Vs||!Vs.has(V))){Eo(w,c=fd(w,c=Ea(f,c),1073741823)),null!==(w=gd(w,1073741823))&&ti(w);break}}w=w.return}}function Fm(c,f,w){var V=c.pingCache;null!==V&&V.delete(f),Wi===c&&Di===w?Br===Eu||Br===Su&&1073741823===Lr&&qi()-yp<500?Jo(c,Di):Pa=!0:Sl(c,w)&&(0!==(f=c.lastPingedTime)&&f<w||(c.lastPingedTime=w,ti(c)))}function Dm(c,f){var w=c.stateNode;null!==w&&w.delete(f),0==(f=0)&&(f=$s(f=_i(),c,null)),null!==(c=gd(c,f))&&ti(c)}xl=function(c,f,w){var V=f.expirationTime;if(null!==c){var ie=f.pendingProps;if(c.memoizedProps!==ie||gi.current)fi=!0;else{if(V<w){switch(fi=!1,f.tag){case 3:Kc(f),ms();break;case 5:if(jc(f),4&f.mode&&1!==w&&ie.hidden)return f.expirationTime=f.childExpirationTime=1,null;break;case 1:vi(f.type)&&Pn(f);break;case 4:Nc(f,f.stateNode.containerInfo);break;case 10:V=f.memoizedProps.value,gr(au,(ie=f.type._context)._currentValue),ie._currentValue=V;break;case 13:if(null!==f.memoizedState)return 0!==(V=f.child.childExpirationTime)&&V>=w?Wc(c,f,w):(gr(nr,1&nr.current),null!==(f=Fi(c,f,w))?f.sibling:null);gr(nr,1&nr.current);break;case 19:if(V=f.childExpirationTime>=w,0!=(64&c.effectTag)){if(V)return Jc(c,f,w);f.effectTag|=64}if(null!==(ie=f.memoizedState)&&(ie.rendering=null,ie.tail=null),gr(nr,nr.current),!V)return null}return Fi(c,f,w)}fi=!1}}else fi=!1;switch(f.expirationTime=0,f.tag){case 2:if(V=f.type,null!==c&&(c.alternate=null,f.alternate=null,f.effectTag|=2),c=f.pendingProps,ie=us(f,Jr.current),Ms(f,w),ie=Bc(null,f,V,c,ie,w),f.effectTag|=1,"object"==typeof ie&&null!==ie&&"function"==typeof ie.render&&void 0===ie.$$typeof){if(f.tag=1,f.memoizedState=null,f.updateQueue=null,vi(V)){var xe=!0;Pn(f)}else xe=!1;f.memoizedState=null!=ie.state?ie.state:null,_a(f);var Ie=V.getDerivedStateFromProps;"function"==typeof Ie&&uu(f,V,Ie,c),ie.updater=Fc,f.stateNode=ie,ie._reactInternalFiber=f,cu(f,V,c,w),f=qc(null,f,V,!0,xe,w)}else f.tag=0,Zr(null,f,ie,w),f=f.child;return f;case 16:e:{if(ie=f.elementType,null!==c&&(c.alternate=null,f.alternate=null,f.effectTag|=2),c=f.pendingProps,function kn(c){if(-1===c._status){c._status=0;var f=c._ctor;f=f(),c._result=f,f.then(function(w){0===c._status&&(w=w.default,c._status=1,c._result=w)},function(w){0===c._status&&(c._status=2,c._result=w)})}}(ie),1!==ie._status)throw ie._result;switch(f.type=ie=ie._result,xe=f.tag=function Nm(c){if("function"==typeof c)return bd(c)?1:0;if(null!=c){if((c=c.$$typeof)===Dn)return 11;if(c===wn)return 14}return 2}(ie),c=uo(ie,c),xe){case 0:f=_u(null,f,ie,c,w);break e;case 1:f=Hc(null,f,ie,c,w);break e;case 11:f=yu(null,f,ie,c,w);break e;case 14:f=xa(null,f,ie,uo(ie.type,c),V,w);break e}throw Error(j(306,ie,""))}return f;case 0:return ie=f.pendingProps,_u(c,f,V=f.type,ie=f.elementType===V?ie:uo(V,ie),w);case 1:return ie=f.pendingProps,Hc(c,f,V=f.type,ie=f.elementType===V?ie:uo(V,ie),w);case 3:if(Kc(f),V=f.updateQueue,null===c||null===V)throw Error(j(282));if(V=f.pendingProps,ie=null!==(ie=f.memoizedState)?ie.element:null,di(c,f),lu(f,V,null,w),(V=f.memoizedState.element)===ie)ms(),f=Fi(c,f,w);else{if((ie=f.stateNode.hydrate)&&(hs=ha(f.stateNode.containerInfo.firstChild),Xo=f,ie=Wo=!0),ie)for(w=Mc(f,null,V,w),f.child=w;w;)w.effectTag=-3&w.effectTag|1024,w=w.sibling;else Zr(c,f,V,w),ms();f=f.child}return f;case 5:return jc(f),null===c&&vl(f),xe=null!==c?c.memoizedProps:null,Ie=(ie=f.pendingProps).children,yc(V=f.type,ie)?Ie=null:null!==xe&&yc(V,xe)&&(f.effectTag|=16),$c(c,f),4&f.mode&&1!==w&&ie.hidden?(f.expirationTime=f.childExpirationTime=1,f=null):(Zr(c,f,Ie,w),f=f.child),f;case 6:return null===c&&vl(f),null;case 13:return Wc(c,f,w);case 4:return Nc(f,f.stateNode.containerInfo),V=f.pendingProps,null===c?f.child=wa(f,null,V,w):Zr(c,f,V,w),f.child;case 11:return ie=f.pendingProps,yu(c,f,V=f.type,ie=f.elementType===V?ie:uo(V,ie),w);case 7:return Zr(c,f,f.pendingProps,w),f.child;case 8:case 12:return Zr(c,f,f.pendingProps.children,w),f.child;case 10:e:{V=f.type._context,Ie=f.memoizedProps,xe=(ie=f.pendingProps).value;var qe=f.type._context;if(gr(au,qe._currentValue),qe._currentValue=xe,null!==Ie)if(0==(xe=Fs(qe=Ie.value,xe)?0:0|("function"==typeof V._calculateChangedBits?V._calculateChangedBits(qe,xe):1073741823))){if(Ie.children===ie.children&&!gi.current){f=Fi(c,f,w);break e}}else for(null!==(qe=f.child)&&(qe.return=f);null!==qe;){var yt=qe.dependencies;if(null!==yt){Ie=qe.child;for(var _t=yt.firstContext;null!==_t;){if(_t.context===V&&0!=(_t.observedBits&xe)){1===qe.tag&&((_t=fs(w,null)).tag=2,Eo(qe,_t)),qe.expirationTime<w&&(qe.expirationTime=w),null!==(_t=qe.alternate)&&_t.expirationTime<w&&(_t.expirationTime=w),Oc(qe.return,w),yt.expirationTime<w&&(yt.expirationTime=w);break}_t=_t.next}}else Ie=10===qe.tag&&qe.type===f.type?null:qe.child;if(null!==Ie)Ie.return=qe;else for(Ie=qe;null!==Ie;){if(Ie===f){Ie=null;break}if(null!==(qe=Ie.sibling)){qe.return=Ie.return,Ie=qe;break}Ie=Ie.return}qe=Ie}Zr(c,f,ie.children,w),f=f.child}return f;case 9:return ie=f.type,V=(xe=f.pendingProps).children,Ms(f,w),V=V(ie=Ki(ie,xe.unstable_observedBits)),f.effectTag|=1,Zr(c,f,V,w),f.child;case 14:return xe=uo(ie=f.type,f.pendingProps),xa(c,f,ie,xe=uo(ie.type,xe),V,w);case 15:return Em(c,f,f.type,f.pendingProps,V,w);case 17:return ie=f.pendingProps,ie=f.elementType===(V=f.type)?ie:uo(V,ie),null!==c&&(c.alternate=null,f.alternate=null,f.effectTag|=2),f.tag=1,vi(V)?(c=!0,Pn(f)):c=!1,Ms(f,w),op(f,V,ie),cu(f,V,ie,w),qc(null,f,V,!0,c,w);case 19:return Jc(c,f,w)}throw Error(j(156,f.tag))};var re=null,_d=null;function go(c,f,w,V){this.tag=c,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=V,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function $r(c,f,w,V){return new go(c,f,w,V)}function bd(c){return!(!(c=c.prototype)||!c.isReactComponent)}function ka(c,f){var w=c.alternate;return null===w?((w=$r(c.tag,f,c.key,c.mode)).elementType=c.elementType,w.type=c.type,w.stateNode=c.stateNode,w.alternate=c,c.alternate=w):(w.pendingProps=f,w.effectTag=0,w.nextEffect=null,w.firstEffect=null,w.lastEffect=null),w.childExpirationTime=c.childExpirationTime,w.expirationTime=c.expirationTime,w.child=c.child,w.memoizedProps=c.memoizedProps,w.memoizedState=c.memoizedState,w.updateQueue=c.updateQueue,w.dependencies=null===(f=c.dependencies)?null:{expirationTime:f.expirationTime,firstContext:f.firstContext,responders:f.responders},w.sibling=c.sibling,w.index=c.index,w.ref=c.ref,w}function ju(c,f,w,V,ie,xe){var Ie=2;if(V=c,"function"==typeof c)bd(c)&&(Ie=1);else if("string"==typeof c)Ie=5;else e:switch(c){case it:return _s(w.children,ie,xe,f);case Pe:Ie=8,ie|=7;break;case It:Ie=8,ie|=1;break;case At:return(c=$r(12,w,f,8|ie)).elementType=At,c.type=At,c.expirationTime=xe,c;case Wt:return(c=$r(13,w,f,ie)).type=Wt,c.elementType=Wt,c.expirationTime=xe,c;case Ot:return(c=$r(19,w,f,ie)).elementType=Ot,c.expirationTime=xe,c;default:if("object"==typeof c&&null!==c)switch(c.$$typeof){case zt:Ie=10;break e;case Xt:Ie=9;break e;case Dn:Ie=11;break e;case wn:Ie=14;break e;case ct:Ie=16,V=null;break e;case vt:Ie=22;break e}throw Error(j(130,null==c?c:typeof c,""))}return(f=$r(Ie,w,f,ie)).elementType=c,f.type=V,f.expirationTime=xe,f}function _s(c,f,w,V){return(c=$r(7,c,V,f)).expirationTime=w,c}function Cp(c,f,w){return(c=$r(6,c,null,f)).expirationTime=w,c}function Er(c,f,w){return(f=$r(4,null!==c.children?c.children:[],c.key,f)).expirationTime=w,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}function jm(c,f,w){this.tag=f,this.current=null,this.containerInfo=c,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=w,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Sl(c,f){var w=c.firstSuspendedTime;return c=c.lastSuspendedTime,0!==w&&w>=f&&c<=f}function bs(c,f){var w=c.firstSuspendedTime,V=c.lastSuspendedTime;w<f&&(c.firstSuspendedTime=f),(V>f||0===w)&&(c.lastSuspendedTime=f),f<=c.lastPingedTime&&(c.lastPingedTime=0),f<=c.lastExpiredTime&&(c.lastExpiredTime=0)}function xp(c,f){f>c.firstPendingTime&&(c.firstPendingTime=f);var w=c.firstSuspendedTime;0!==w&&(f>=w?c.firstSuspendedTime=c.lastSuspendedTime=c.nextKnownPendingLevel=0:f>=c.lastSuspendedTime&&(c.lastSuspendedTime=f+1),f>c.nextKnownPendingLevel&&(c.nextKnownPendingLevel=f))}function Sp(c,f){var w=c.lastExpiredTime;(0===w||w>f)&&(c.lastExpiredTime=f)}function Bu(c,f,w,V){var ie=f.current,xe=_i(),Ie=ba.suspense;xe=$s(xe,ie,Ie);e:if(w){t:{if(b(w=w._reactInternalFiber)!==w||1!==w.tag)throw Error(j(170));var qe=w;do{switch(qe.tag){case 3:qe=qe.stateNode.context;break t;case 1:if(vi(qe.type)){qe=qe.stateNode.__reactInternalMemoizedMergedChildContext;break t}}qe=qe.return}while(null!==qe);throw Error(j(171))}if(1===w.tag){var yt=w.type;if(vi(yt)){w=zn(w,yt,qe);break e}}w=qe}else w=ls;return null===f.context?f.context=w:f.pendingContext=w,(f=fs(xe,Ie)).payload={element:c},null!==(V=void 0===V?null:V)&&(f.callback=V),Eo(ie,f),Hs(ie,xe),xe}function wd(c){return(c=c.current).child?c.child.stateNode:null}function Ep(c,f){null!==(c=c.memoizedState)&&null!==c.dehydrated&&c.retryTime<f&&(c.retryTime=f)}function Lu(c,f){Ep(c,f),(c=c.alternate)&&Ep(c,f)}function Cd(c,f,w){var V=new jm(c,f,w=null!=w&&!0===w.hydrate),ie=$r(3,null,null,2===f?7:1===f?3:0);V.current=ie,ie.stateNode=V,_a(ie),c[Wl]=V.current,w&&0!==f&&function $n(c,f){var w=ca(f);On.forEach(function(V){ht(V,f,w)}),Kn.forEach(function(V){ht(V,f,w)})}(0,9===c.nodeType?c:c.ownerDocument),this._internalRoot=V}function Oa(c){return!(!c||1!==c.nodeType&&9!==c.nodeType&&11!==c.nodeType&&(8!==c.nodeType||" react-mount-point-unstable "!==c.nodeValue))}function zu(c,f,w,V,ie){var xe=w._reactRootContainer;if(xe){var Ie=xe._internalRoot;if("function"==typeof ie){var qe=ie;ie=function(){var _t=wd(Ie);qe.call(_t)}}Bu(f,Ie,c,ie)}else{if(xe=w._reactRootContainer=function xd(c,f){if(f||(f=!(!(f=c?9===c.nodeType?c.documentElement:c.firstChild:null)||1!==f.nodeType||!f.hasAttribute("data-reactroot"))),!f)for(var w;w=c.lastChild;)c.removeChild(w);return new Cd(c,0,f?{hydrate:!0}:void 0)}(w,V),Ie=xe._internalRoot,"function"==typeof ie){var yt=ie;ie=function(){var _t=wd(Ie);yt.call(_t)}}tt(function(){Bu(f,Ie,c,ie)})}return wd(Ie)}Cd.prototype.render=function(c){Bu(c,this._internalRoot,null,null)},Cd.prototype.unmount=function(){var c=this._internalRoot,f=c.containerInfo;Bu(null,c,null,function(){f[Wl]=null})},Ae=function(c){if(13===c.tag){var f=su(_i(),150,100);Hs(c,f),Lu(c,f)}},Ve=function(c){13===c.tag&&(Hs(c,3),Lu(c,3))},He=function(c){if(13===c.tag){var f=_i();Hs(c,f=$s(f,c,null)),Lu(c,f)}},E=function(c,f,w){switch(f){case"input":if(Tr(c,w),f=w.name,"radio"===w.type&&null!=f){for(w=c;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+f)+'][type="radio"]'),f=0;f<w.length;f++){var V=w[f];if(V!==c&&V.form===c.form){var ie=Jl(V);if(!ie)throw Error(j(90));Kr(V),Tr(V,ie)}}}break;case"textarea":Ur(c,w);break;case"select":null!=(f=w.value)&&ui(c,!!w.multiple,f,!1)}},oe=function Tm(c,f){var w=ln;ln|=1;try{return c(f)}finally{0===(ln=w)&&So()}},Ge=function(c,f,w,V,ie){var xe=ln;ln|=4;try{return Qr(98,c.bind(null,f,w,V,ie))}finally{0===(ln=xe)&&So()}},at=function(){0==(49&ln)&&(function Im(){if(null!==Ta){var c=Ta;Ta=null,c.forEach(function(f,w){Sp(w,f),ti(w)}),So()}}(),Ra())},Fe=function(c,f){var w=ln;ln|=2;try{return c(f)}finally{0===(ln=w)&&So()}};(function(c){var f=c.findFiberByHostInstance;!function Mm(c){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)return!0;try{var w=f.inject(c);re=function(V){try{f.onCommitFiberRoot(w,V,void 0,64==(64&V.current.effectTag))}catch{}},_d=function(V){try{f.onCommitFiberUnmount(w,V)}catch{}}}catch{}}(C({},c,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$.ReactCurrentDispatcher,findHostInstanceByFiber:function(w){return null===(w=function Z(c){if(c=function T(c){var f=c.alternate;if(!f){if(null===(f=b(c)))throw Error(j(188));return f!==c?null:c}for(var w=c,V=f;;){var ie=w.return;if(null===ie)break;var xe=ie.alternate;if(null===xe){if(null!==(V=ie.return)){w=V;continue}break}if(ie.child===xe.child){for(xe=ie.child;xe;){if(xe===w)return R(ie),c;if(xe===V)return R(ie),f;xe=xe.sibling}throw Error(j(188))}if(w.return!==V.return)w=ie,V=xe;else{for(var Ie=!1,qe=ie.child;qe;){if(qe===w){Ie=!0,w=ie,V=xe;break}if(qe===V){Ie=!0,V=ie,w=xe;break}qe=qe.sibling}if(!Ie){for(qe=xe.child;qe;){if(qe===w){Ie=!0,w=xe,V=ie;break}if(qe===V){Ie=!0,V=xe,w=ie;break}qe=qe.sibling}if(!Ie)throw Error(j(189))}}if(w.alternate!==V)throw Error(j(190))}if(3!==w.tag)throw Error(j(188));return w.stateNode.current===w?c:f}(c),!c)return null;for(var f=c;;){if(5===f.tag||6===f.tag)return f;if(f.child)f.child.return=f,f=f.child;else{if(f===c)break;for(;!f.sibling;){if(!f.return||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}}return null}(w))?null:w.stateNode},findFiberByHostInstance:function(w){return f?f(w):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:Ya,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),O.render=function(c,f,w){if(!Oa(f))throw Error(j(200));return zu(null,c,f,!1,w)},O.unmountComponentAtNode=function(c){if(!Oa(c))throw Error(j(40));return!!c._reactRootContainer&&(tt(function(){zu(null,null,c,!1,function(){c._reactRootContainer=null,c[Wl]=null})}),!0)}},1291:(we,O,x)=>{(function I(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(I)}catch(o){console.error(o)}})(),we.exports=x(1887)},3851:(we,O,x)=>{var I=x(5943),o="function"==typeof Symbol&&Symbol.for,C=o?Symbol.for("react.element"):60103,F=o?Symbol.for("react.portal"):60106,j=o?Symbol.for("react.fragment"):60107,d=o?Symbol.for("react.strict_mode"):60108,m=o?Symbol.for("react.profiler"):60114,v=o?Symbol.for("react.provider"):60109,N=o?Symbol.for("react.context"):60110,M=o?Symbol.for("react.forward_ref"):60112,L=o?Symbol.for("react.suspense"):60113,X=o?Symbol.for("react.memo"):60115,H=o?Symbol.for("react.lazy"):60116,Q="function"==typeof Symbol&&Symbol.iterator;function q(Ue){for(var nt="https://reactjs.org/docs/error-decoder.html?invariant="+Ue,de=1;de<arguments.length;de++)nt+="&args[]="+encodeURIComponent(arguments[de]);return"Minified React error #"+Ue+"; visit "+nt+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},le={};function B(Ue,nt,de){this.props=Ue,this.context=nt,this.refs=le,this.updater=de||Y}function z(){}function U(Ue,nt,de){this.props=Ue,this.context=nt,this.refs=le,this.updater=de||Y}B.prototype.isReactComponent={},B.prototype.setState=function(Ue,nt){if("object"!=typeof Ue&&"function"!=typeof Ue&&null!=Ue)throw Error(q(85));this.updater.enqueueSetState(this,Ue,nt,"setState")},B.prototype.forceUpdate=function(Ue){this.updater.enqueueForceUpdate(this,Ue,"forceUpdate")},z.prototype=B.prototype;var ee=U.prototype=new z;ee.constructor=U,I(ee,B.prototype),ee.isPureReactComponent=!0;var ge={current:null},_e=Object.prototype.hasOwnProperty,pe={key:!0,ref:!0,__self:!0,__source:!0};function g(Ue,nt,de){var te,ae={},Te=null,ze=null;if(null!=nt)for(te in void 0!==nt.ref&&(ze=nt.ref),void 0!==nt.key&&(Te=""+nt.key),nt)_e.call(nt,te)&&!pe.hasOwnProperty(te)&&(ae[te]=nt[te]);var ce=arguments.length-2;if(1===ce)ae.children=de;else if(1<ce){for(var me=Array(ce),rt=0;rt<ce;rt++)me[rt]=arguments[rt+2];ae.children=me}if(Ue&&Ue.defaultProps)for(te in ce=Ue.defaultProps)void 0===ae[te]&&(ae[te]=ce[te]);return{$$typeof:C,type:Ue,key:Te,ref:ze,props:ae,_owner:ge.current}}function y(Ue){return"object"==typeof Ue&&null!==Ue&&Ue.$$typeof===C}var D=/\/+/g,P=[];function ne(Ue,nt,de,te){if(P.length){var ae=P.pop();return ae.result=Ue,ae.keyPrefix=nt,ae.func=de,ae.context=te,ae.count=0,ae}return{result:Ue,keyPrefix:nt,func:de,context:te,count:0}}function fe(Ue){Ue.result=null,Ue.keyPrefix=null,Ue.func=null,Ue.context=null,Ue.count=0,10>P.length&&P.push(Ue)}function Oe(Ue,nt,de,te){var ae=typeof Ue;("undefined"===ae||"boolean"===ae)&&(Ue=null);var Te=!1;if(null===Ue)Te=!0;else switch(ae){case"string":case"number":Te=!0;break;case"object":switch(Ue.$$typeof){case C:case F:Te=!0}}if(Te)return de(te,Ue,""===nt?"."+Ge(Ue,0):nt),1;if(Te=0,nt=""===nt?".":nt+":",Array.isArray(Ue))for(var ze=0;ze<Ue.length;ze++){var ce=nt+Ge(ae=Ue[ze],ze);Te+=Oe(ae,ce,de,te)}else if("function"==typeof(ce=null===Ue||"object"!=typeof Ue?null:"function"==typeof(ce=Q&&Ue[Q]||Ue["@@iterator"])?ce:null))for(Ue=ce.call(Ue),ze=0;!(ae=Ue.next()).done;)Te+=Oe(ae=ae.value,ce=nt+Ge(ae,ze++),de,te);else if("object"===ae)throw de=""+Ue,Error(q(31,"[object Object]"===de?"object with keys {"+Object.keys(Ue).join(", ")+"}":de,""));return Te}function oe(Ue,nt,de){return null==Ue?0:Oe(Ue,"",nt,de)}function Ge(Ue,nt){return"object"==typeof Ue&&null!==Ue&&null!=Ue.key?function E(Ue){var nt={"=":"=0",":":"=2"};return"$"+(""+Ue).replace(/[=:]/g,function(de){return nt[de]})}(Ue.key):nt.toString(36)}function at(Ue,nt){Ue.func.call(Ue.context,nt,Ue.count++)}function Fe(Ue,nt,de){var te=Ue.result,ae=Ue.keyPrefix;Ue=Ue.func.call(Ue.context,nt,Ue.count++),Array.isArray(Ue)?We(Ue,te,de,function(Te){return Te}):null!=Ue&&(y(Ue)&&(Ue=function A(Ue,nt){return{$$typeof:C,type:Ue.type,key:nt,ref:Ue.ref,props:Ue.props,_owner:Ue._owner}}(Ue,ae+(!Ue.key||nt&&nt.key===Ue.key?"":(""+Ue.key).replace(D,"$&/")+"/")+de)),te.push(Ue))}function We(Ue,nt,de,te,ae){var Te="";null!=de&&(Te=(""+de).replace(D,"$&/")+"/"),oe(Ue,Fe,nt=ne(nt,Te,te,ae)),fe(nt)}var Qe={current:null};function ft(){var Ue=Qe.current;if(null===Ue)throw Error(q(321));return Ue}var Ze={ReactCurrentDispatcher:Qe,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:ge,IsSomeRendererActing:{current:!1},assign:I};O.Children={map:function(Ue,nt,de){if(null==Ue)return Ue;var te=[];return We(Ue,te,null,nt,de),te},forEach:function(Ue,nt,de){if(null==Ue)return Ue;oe(Ue,at,nt=ne(null,null,nt,de)),fe(nt)},count:function(Ue){return oe(Ue,function(){return null},null)},toArray:function(Ue){var nt=[];return We(Ue,nt,null,function(de){return de}),nt},only:function(Ue){if(!y(Ue))throw Error(q(143));return Ue}},O.Component=B,O.Fragment=j,O.Profiler=m,O.PureComponent=U,O.StrictMode=d,O.Suspense=L,O.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ze,O.cloneElement=function(Ue,nt,de){if(null==Ue)throw Error(q(267,Ue));var te=I({},Ue.props),ae=Ue.key,Te=Ue.ref,ze=Ue._owner;if(null!=nt){if(void 0!==nt.ref&&(Te=nt.ref,ze=ge.current),void 0!==nt.key&&(ae=""+nt.key),Ue.type&&Ue.type.defaultProps)var ce=Ue.type.defaultProps;for(me in nt)_e.call(nt,me)&&!pe.hasOwnProperty(me)&&(te[me]=void 0===nt[me]&&void 0!==ce?ce[me]:nt[me])}var me=arguments.length-2;if(1===me)te.children=de;else if(1<me){ce=Array(me);for(var rt=0;rt<me;rt++)ce[rt]=arguments[rt+2];te.children=ce}return{$$typeof:C,type:Ue.type,key:ae,ref:Te,props:te,_owner:ze}},O.createContext=function(Ue,nt){return void 0===nt&&(nt=null),(Ue={$$typeof:N,_calculateChangedBits:nt,_currentValue:Ue,_currentValue2:Ue,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:v,_context:Ue},Ue.Consumer=Ue},O.createElement=g,O.createFactory=function(Ue){var nt=g.bind(null,Ue);return nt.type=Ue,nt},O.createRef=function(){return{current:null}},O.forwardRef=function(Ue){return{$$typeof:M,render:Ue}},O.isValidElement=y,O.lazy=function(Ue){return{$$typeof:H,_ctor:Ue,_status:-1,_result:null}},O.memo=function(Ue,nt){return{$$typeof:X,type:Ue,compare:void 0===nt?null:nt}},O.useCallback=function(Ue,nt){return ft().useCallback(Ue,nt)},O.useContext=function(Ue,nt){return ft().useContext(Ue,nt)},O.useDebugValue=function(){},O.useEffect=function(Ue,nt){return ft().useEffect(Ue,nt)},O.useImperativeHandle=function(Ue,nt,de){return ft().useImperativeHandle(Ue,nt,de)},O.useLayoutEffect=function(Ue,nt){return ft().useLayoutEffect(Ue,nt)},O.useMemo=function(Ue,nt){return ft().useMemo(Ue,nt)},O.useReducer=function(Ue,nt,de){return ft().useReducer(Ue,nt,de)},O.useRef=function(Ue){return ft().useRef(Ue)},O.useState=function(Ue){return ft().useState(Ue)},O.version="16.14.0"},4284:(we,O,x)=>{we.exports=x(3851)},891:we=>{var x={};function I(d,m,v){v||(v=Error);var M=function(L){function X(H,Q,q){return L.call(this,function N(L,X,H){return"string"==typeof m?m:m(L,X,H)}(H,Q,q))||this}return function O(d,m){d.prototype=Object.create(m.prototype),d.prototype.constructor=d,d.__proto__=m}(X,L),X}(v);M.prototype.name=v.name,M.prototype.code=d,x[d]=M}function o(d,m){if(Array.isArray(d)){var v=d.length;return d=d.map(function(N){return String(N)}),v>2?"one of ".concat(m," ").concat(d.slice(0,v-1).join(", "),", or ")+d[v-1]:2===v?"one of ".concat(m," ").concat(d[0]," or ").concat(d[1]):"of ".concat(m," ").concat(d[0])}return"of ".concat(m," ").concat(String(d))}I("ERR_INVALID_OPT_VALUE",function(d,m){return'The value "'+m+'" is invalid for option "'+d+'"'},TypeError),I("ERR_INVALID_ARG_TYPE",function(d,m,v){var N,M;if("string"==typeof m&&function C(d,m,v){return d.substr(!v||v<0?0:+v,m.length)===m}(m,"not ")?(N="must not be",m=m.replace(/^not /,"")):N="must be",function F(d,m,v){return(void 0===v||v>d.length)&&(v=d.length),d.substring(v-m.length,v)===m}(d," argument"))M="The ".concat(d," ").concat(N," ").concat(o(m,"type"));else{var L=function j(d,m,v){return"number"!=typeof v&&(v=0),!(v+m.length>d.length)&&-1!==d.indexOf(m,v)}(d,".")?"property":"argument";M='The "'.concat(d,'" ').concat(L," ").concat(N," ").concat(o(m,"type"))}return M+". Received type ".concat(typeof v)},TypeError),I("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),I("ERR_METHOD_NOT_IMPLEMENTED",function(d){return"The "+d+" method is not implemented"}),I("ERR_STREAM_PREMATURE_CLOSE","Premature close"),I("ERR_STREAM_DESTROYED",function(d){return"Cannot call "+d+" after a stream was destroyed"}),I("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),I("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),I("ERR_STREAM_WRITE_AFTER_END","write after end"),I("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),I("ERR_UNKNOWN_ENCODING",function(d){return"Unknown encoding: "+d},TypeError),I("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),we.exports.q=x},1339:(we,O,x)=>{var I=Object.keys||function(M){var L=[];for(var X in M)L.push(X);return L};we.exports=m;var o=x(3154),C=x(520);x(3894)(m,o);for(var F=I(C.prototype),j=0;j<F.length;j++){var d=F[j];m.prototype[d]||(m.prototype[d]=C.prototype[d])}function m(M){if(!(this instanceof m))return new m(M);o.call(this,M),C.call(this,M),this.allowHalfOpen=!0,M&&(!1===M.readable&&(this.readable=!1),!1===M.writable&&(this.writable=!1),!1===M.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",v)))}function v(){this._writableState.ended||process.nextTick(N,this)}function N(M){M.end()}Object.defineProperty(m.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(m.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(m.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(m.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(L){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=L,this._writableState.destroyed=L)}})},6071:(we,O,x)=>{we.exports=o;var I=x(6025);function o(C){if(!(this instanceof o))return new o(C);I.call(this,C)}x(3894)(o,I),o.prototype._transform=function(C,F,j){j(null,C)}},3154:(we,O,x)=>{var I;we.exports=y,y.ReadableState=A,x(9069);var M,C=function(me,rt){return me.listeners(rt).length},F=x(4970),j=x(3172).Buffer,d=global.Uint8Array||function(){},N=x(4616);M=N&&N.debuglog?N.debuglog("stream"):function(){};var U,ee,ge,L=x(5019),X=x(1920),Q=x(7102).getHighWaterMark,q=x(891).q,Y=q.ERR_INVALID_ARG_TYPE,le=q.ERR_STREAM_PUSH_AFTER_EOF,B=q.ERR_METHOD_NOT_IMPLEMENTED,z=q.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;x(3894)(y,F);var _e=X.errorOrDestroy,pe=["error","close","destroy","pause","resume"];function A(ce,me,rt){I=I||x(1339),"boolean"!=typeof rt&&(rt=me instanceof I),this.objectMode=!!(ce=ce||{}).objectMode,rt&&(this.objectMode=this.objectMode||!!ce.readableObjectMode),this.highWaterMark=Q(this,ce,"readableHighWaterMark",rt),this.buffer=new L,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==ce.emitClose,this.autoDestroy=!!ce.autoDestroy,this.destroyed=!1,this.defaultEncoding=ce.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,ce.encoding&&(U||(U=x(3054).s),this.decoder=new U(ce.encoding),this.encoding=ce.encoding)}function y(ce){if(I=I||x(1339),!(this instanceof y))return new y(ce);this._readableState=new A(ce,this,this instanceof I),this.readable=!0,ce&&("function"==typeof ce.read&&(this._read=ce.read),"function"==typeof ce.destroy&&(this._destroy=ce.destroy)),F.call(this)}function E(ce,me,rt,ye,$){M("readableAddChunk",me);var K,k=ce._readableState;if(null===me)k.reading=!1,function oe(ce,me){if(M("onEofChunk"),!me.ended){if(me.decoder){var rt=me.decoder.end();rt&&rt.length&&(me.buffer.push(rt),me.length+=me.objectMode?1:rt.length)}me.ended=!0,me.sync?Ge(ce):(me.needReadable=!1,me.emittedReadable||(me.emittedReadable=!0,at(ce)))}}(ce,k);else if($||(K=function P(ce,me){var rt;return!function v(ce){return j.isBuffer(ce)||ce instanceof d}(me)&&"string"!=typeof me&&void 0!==me&&!ce.objectMode&&(rt=new Y("chunk",["string","Buffer","Uint8Array"],me)),rt}(k,me)),K)_e(ce,K);else if(k.objectMode||me&&me.length>0)if("string"!=typeof me&&!k.objectMode&&Object.getPrototypeOf(me)!==j.prototype&&(me=function m(ce){return j.from(ce)}(me)),ye)k.endEmitted?_e(ce,new z):D(ce,k,me,!0);else if(k.ended)_e(ce,new le);else{if(k.destroyed)return!1;k.reading=!1,k.decoder&&!rt?(me=k.decoder.write(me),k.objectMode||0!==me.length?D(ce,k,me,!1):Fe(ce,k)):D(ce,k,me,!1)}else ye||(k.reading=!1,Fe(ce,k));return!k.ended&&(k.length<k.highWaterMark||0===k.length)}function D(ce,me,rt,ye){me.flowing&&0===me.length&&!me.sync?(me.awaitDrain=0,ce.emit("data",rt)):(me.length+=me.objectMode?1:rt.length,ye?me.buffer.unshift(rt):me.buffer.push(rt),me.needReadable&&Ge(ce)),Fe(ce,me)}Object.defineProperty(y.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(me){!this._readableState||(this._readableState.destroyed=me)}}),y.prototype.destroy=X.destroy,y.prototype._undestroy=X.undestroy,y.prototype._destroy=function(ce,me){me(ce)},y.prototype.push=function(ce,me){var ye,rt=this._readableState;return rt.objectMode?ye=!0:"string"==typeof ce&&((me=me||rt.defaultEncoding)!==rt.encoding&&(ce=j.from(ce,me),me=""),ye=!0),E(this,ce,me,!1,ye)},y.prototype.unshift=function(ce){return E(this,ce,null,!0,!1)},y.prototype.isPaused=function(){return!1===this._readableState.flowing},y.prototype.setEncoding=function(ce){U||(U=x(3054).s);var me=new U(ce);this._readableState.decoder=me,this._readableState.encoding=this._readableState.decoder.encoding;for(var rt=this._readableState.buffer.head,ye="";null!==rt;)ye+=me.write(rt.data),rt=rt.next;return this._readableState.buffer.clear(),""!==ye&&this._readableState.buffer.push(ye),this._readableState.length=ye.length,this};var ne=1073741824;function Oe(ce,me){return ce<=0||0===me.length&&me.ended?0:me.objectMode?1:ce!=ce?me.flowing&&me.length?me.buffer.head.data.length:me.length:(ce>me.highWaterMark&&(me.highWaterMark=function fe(ce){return ce>=ne?ce=ne:(ce--,ce|=ce>>>1,ce|=ce>>>2,ce|=ce>>>4,ce|=ce>>>8,ce|=ce>>>16,ce++),ce}(ce)),ce<=me.length?ce:me.ended?me.length:(me.needReadable=!0,0))}function Ge(ce){var me=ce._readableState;M("emitReadable",me.needReadable,me.emittedReadable),me.needReadable=!1,me.emittedReadable||(M("emitReadable",me.flowing),me.emittedReadable=!0,process.nextTick(at,ce))}function at(ce){var me=ce._readableState;M("emitReadable_",me.destroyed,me.length,me.ended),!me.destroyed&&(me.length||me.ended)&&(ce.emit("readable"),me.emittedReadable=!1),me.needReadable=!me.flowing&&!me.ended&&me.length<=me.highWaterMark,de(ce)}function Fe(ce,me){me.readingMore||(me.readingMore=!0,process.nextTick(We,ce,me))}function We(ce,me){for(;!me.reading&&!me.ended&&(me.length<me.highWaterMark||me.flowing&&0===me.length);){var rt=me.length;if(M("maybeReadMore read 0"),ce.read(0),rt===me.length)break}me.readingMore=!1}function ft(ce){var me=ce._readableState;me.readableListening=ce.listenerCount("readable")>0,me.resumeScheduled&&!me.paused?me.flowing=!0:ce.listenerCount("data")>0&&ce.resume()}function Ze(ce){M("readable nexttick read 0"),ce.read(0)}function nt(ce,me){M("resume",me.reading),me.reading||ce.read(0),me.resumeScheduled=!1,ce.emit("resume"),de(ce),me.flowing&&!me.reading&&ce.read(0)}function de(ce){var me=ce._readableState;for(M("flow",me.flowing);me.flowing&&null!==ce.read(););}function te(ce,me){return 0===me.length?null:(me.objectMode?rt=me.buffer.shift():!ce||ce>=me.length?(rt=me.decoder?me.buffer.join(""):1===me.buffer.length?me.buffer.first():me.buffer.concat(me.length),me.buffer.clear()):rt=me.buffer.consume(ce,me.decoder),rt);var rt}function ae(ce){var me=ce._readableState;M("endReadable",me.endEmitted),me.endEmitted||(me.ended=!0,process.nextTick(Te,me,ce))}function Te(ce,me){if(M("endReadableNT",ce.endEmitted,ce.length),!ce.endEmitted&&0===ce.length&&(ce.endEmitted=!0,me.readable=!1,me.emit("end"),ce.autoDestroy)){var rt=me._writableState;(!rt||rt.autoDestroy&&rt.finished)&&me.destroy()}}function ze(ce,me){for(var rt=0,ye=ce.length;rt<ye;rt++)if(ce[rt]===me)return rt;return-1}y.prototype.read=function(ce){M("read",ce),ce=parseInt(ce,10);var me=this._readableState,rt=ce;if(0!==ce&&(me.emittedReadable=!1),0===ce&&me.needReadable&&((0!==me.highWaterMark?me.length>=me.highWaterMark:me.length>0)||me.ended))return M("read: emitReadable",me.length,me.ended),0===me.length&&me.ended?ae(this):Ge(this),null;if(0===(ce=Oe(ce,me))&&me.ended)return 0===me.length&&ae(this),null;var $,ye=me.needReadable;return M("need readable",ye),(0===me.length||me.length-ce<me.highWaterMark)&&M("length less than watermark",ye=!0),me.ended||me.reading?M("reading or ended",ye=!1):ye&&(M("do read"),me.reading=!0,me.sync=!0,0===me.length&&(me.needReadable=!0),this._read(me.highWaterMark),me.sync=!1,me.reading||(ce=Oe(rt,me))),null===($=ce>0?te(ce,me):null)?(me.needReadable=me.length<=me.highWaterMark,ce=0):(me.length-=ce,me.awaitDrain=0),0===me.length&&(me.ended||(me.needReadable=!0),rt!==ce&&me.ended&&ae(this)),null!==$&&this.emit("data",$),$},y.prototype._read=function(ce){_e(this,new B("_read()"))},y.prototype.pipe=function(ce,me){var rt=this,ye=this._readableState;switch(ye.pipesCount){case 0:ye.pipes=ce;break;case 1:ye.pipes=[ye.pipes,ce];break;default:ye.pipes.push(ce)}ye.pipesCount+=1,M("pipe count=%d opts=%j",ye.pipesCount,me);var k=me&&!1===me.end||ce===process.stdout||ce===process.stderr?Pe:he;function he(){M("onend"),ce.end()}ye.endEmitted?process.nextTick(k):rt.once("end",k),ce.on("unpipe",function K(Dn,Wt){M("onunpipe"),Dn===rt&&Wt&&!1===Wt.hasUnpiped&&(Wt.hasUnpiped=!0,function it(){M("cleanup"),ce.removeListener("close",zt),ce.removeListener("finish",Xt),ce.removeListener("drain",Me),ce.removeListener("error",At),ce.removeListener("unpipe",K),rt.removeListener("end",he),rt.removeListener("end",Pe),rt.removeListener("data",It),Ye=!0,ye.awaitDrain&&(!ce._writableState||ce._writableState.needDrain)&&Me()}())});var Me=function Qe(ce){return function(){var rt=ce._readableState;M("pipeOnDrain",rt.awaitDrain),rt.awaitDrain&&rt.awaitDrain--,0===rt.awaitDrain&&C(ce,"data")&&(rt.flowing=!0,de(ce))}}(rt);ce.on("drain",Me);var Ye=!1;function It(Dn){M("ondata");var Wt=ce.write(Dn);M("dest.write",Wt),!1===Wt&&((1===ye.pipesCount&&ye.pipes===ce||ye.pipesCount>1&&-1!==ze(ye.pipes,ce))&&!Ye&&(M("false write response, pause",ye.awaitDrain),ye.awaitDrain++),rt.pause())}function At(Dn){M("onerror",Dn),Pe(),ce.removeListener("error",At),0===C(ce,"error")&&_e(ce,Dn)}function zt(){ce.removeListener("finish",Xt),Pe()}function Xt(){M("onfinish"),ce.removeListener("close",zt),Pe()}function Pe(){M("unpipe"),rt.unpipe(ce)}return rt.on("data",It),function g(ce,me,rt){if("function"==typeof ce.prependListener)return ce.prependListener(me,rt);ce._events&&ce._events[me]?Array.isArray(ce._events[me])?ce._events[me].unshift(rt):ce._events[me]=[rt,ce._events[me]]:ce.on(me,rt)}(ce,"error",At),ce.once("close",zt),ce.once("finish",Xt),ce.emit("pipe",rt),ye.flowing||(M("pipe resume"),rt.resume()),ce},y.prototype.unpipe=function(ce){var me=this._readableState,rt={hasUnpiped:!1};if(0===me.pipesCount)return this;if(1===me.pipesCount)return ce&&ce!==me.pipes||(ce||(ce=me.pipes),me.pipes=null,me.pipesCount=0,me.flowing=!1,ce&&ce.emit("unpipe",this,rt)),this;if(!ce){var ye=me.pipes,$=me.pipesCount;me.pipes=null,me.pipesCount=0,me.flowing=!1;for(var k=0;k<$;k++)ye[k].emit("unpipe",this,{hasUnpiped:!1});return this}var K=ze(me.pipes,ce);return-1===K||(me.pipes.splice(K,1),me.pipesCount-=1,1===me.pipesCount&&(me.pipes=me.pipes[0]),ce.emit("unpipe",this,rt)),this},y.prototype.addListener=y.prototype.on=function(ce,me){var rt=F.prototype.on.call(this,ce,me),ye=this._readableState;return"data"===ce?(ye.readableListening=this.listenerCount("readable")>0,!1!==ye.flowing&&this.resume()):"readable"===ce&&!ye.endEmitted&&!ye.readableListening&&(ye.readableListening=ye.needReadable=!0,ye.flowing=!1,ye.emittedReadable=!1,M("on readable",ye.length,ye.reading),ye.length?Ge(this):ye.reading||process.nextTick(Ze,this)),rt},y.prototype.removeListener=function(ce,me){var rt=F.prototype.removeListener.call(this,ce,me);return"readable"===ce&&process.nextTick(ft,this),rt},y.prototype.removeAllListeners=function(ce){var me=F.prototype.removeAllListeners.apply(this,arguments);return("readable"===ce||void 0===ce)&&process.nextTick(ft,this),me},y.prototype.resume=function(){var ce=this._readableState;return ce.flowing||(M("resume"),ce.flowing=!ce.readableListening,function Ue(ce,me){me.resumeScheduled||(me.resumeScheduled=!0,process.nextTick(nt,ce,me))}(this,ce)),ce.paused=!1,this},y.prototype.pause=function(){return M("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(M("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},y.prototype.wrap=function(ce){var me=this,rt=this._readableState,ye=!1;for(var $ in ce.on("end",function(){if(M("wrapped end"),rt.decoder&&!rt.ended){var K=rt.decoder.end();K&&K.length&&me.push(K)}me.push(null)}),ce.on("data",function(K){M("wrapped data"),rt.decoder&&(K=rt.decoder.write(K)),rt.objectMode&&null==K||!(rt.objectMode||K&&K.length)||me.push(K)||(ye=!0,ce.pause())}),ce)void 0===this[$]&&"function"==typeof ce[$]&&(this[$]=function(he){return function(){return ce[he].apply(ce,arguments)}}($));for(var k=0;k<pe.length;k++)ce.on(pe[k],this.emit.bind(this,pe[k]));return this._read=function(K){M("wrapped _read",K),ye&&(ye=!1,ce.resume())},this},"function"==typeof Symbol&&(y.prototype[Symbol.asyncIterator]=function(){return void 0===ee&&(ee=x(3872)),ee(this)}),Object.defineProperty(y.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(y.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(y.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(me){this._readableState&&(this._readableState.flowing=me)}}),y._fromList=te,Object.defineProperty(y.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(y.from=function(ce,me){return void 0===ge&&(ge=x(7412)),ge(y,ce,me)})},6025:(we,O,x)=>{we.exports=v;var I=x(891).q,o=I.ERR_METHOD_NOT_IMPLEMENTED,C=I.ERR_MULTIPLE_CALLBACK,F=I.ERR_TRANSFORM_ALREADY_TRANSFORMING,j=I.ERR_TRANSFORM_WITH_LENGTH_0,d=x(1339);function m(L,X){var H=this._transformState;H.transforming=!1;var Q=H.writecb;if(null===Q)return this.emit("error",new C);H.writechunk=null,H.writecb=null,null!=X&&this.push(X),Q(L);var q=this._readableState;q.reading=!1,(q.needReadable||q.length<q.highWaterMark)&&this._read(q.highWaterMark)}function v(L){if(!(this instanceof v))return new v(L);d.call(this,L),this._transformState={afterTransform:m.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,L&&("function"==typeof L.transform&&(this._transform=L.transform),"function"==typeof L.flush&&(this._flush=L.flush)),this.on("prefinish",N)}function N(){var L=this;"function"!=typeof this._flush||this._readableState.destroyed?M(this,null,null):this._flush(function(X,H){M(L,X,H)})}function M(L,X,H){if(X)return L.emit("error",X);if(null!=H&&L.push(H),L._writableState.length)throw new j;if(L._transformState.transforming)throw new F;return L.push(null)}x(3894)(v,d),v.prototype.push=function(L,X){return this._transformState.needTransform=!1,d.prototype.push.call(this,L,X)},v.prototype._transform=function(L,X,H){H(new o("_transform()"))},v.prototype._write=function(L,X,H){var Q=this._transformState;if(Q.writecb=H,Q.writechunk=L,Q.writeencoding=X,!Q.transforming){var q=this._readableState;(Q.needTransform||q.needReadable||q.length<q.highWaterMark)&&this._read(q.highWaterMark)}},v.prototype._read=function(L){var X=this._transformState;null===X.writechunk||X.transforming?X.needTransform=!0:(X.transforming=!0,this._transform(X.writechunk,X.writeencoding,X.afterTransform))},v.prototype._destroy=function(L,X){d.prototype._destroy.call(this,L,function(H){X(H)})}},520:(we,O,x)=>{function o(de){var te=this;this.next=null,this.entry=null,this.finish=function(){!function nt(de,te,ae){var Te=de.entry;for(de.entry=null;Te;){var ze=Te.callback;te.pendingcb--,ze(ae),Te=Te.next}te.corkedRequestsFree.next=de}(te,de)}}var C;we.exports=A,A.WritableState=pe;var g,F={deprecate:x(4364)},j=x(4970),d=x(3172).Buffer,m=global.Uint8Array||function(){},M=x(1920),X=x(7102).getHighWaterMark,H=x(891).q,Q=H.ERR_INVALID_ARG_TYPE,q=H.ERR_METHOD_NOT_IMPLEMENTED,Y=H.ERR_MULTIPLE_CALLBACK,le=H.ERR_STREAM_CANNOT_PIPE,B=H.ERR_STREAM_DESTROYED,z=H.ERR_STREAM_NULL_VALUES,U=H.ERR_STREAM_WRITE_AFTER_END,ee=H.ERR_UNKNOWN_ENCODING,ge=M.errorOrDestroy;function _e(){}function pe(de,te,ae){C=C||x(1339),"boolean"!=typeof ae&&(ae=te instanceof C),this.objectMode=!!(de=de||{}).objectMode,ae&&(this.objectMode=this.objectMode||!!de.writableObjectMode),this.highWaterMark=X(this,de,"writableHighWaterMark",ae),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===de.decodeStrings),this.defaultEncoding=de.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ze){!function oe(de,te){var ae=de._writableState,Te=ae.sync,ze=ae.writecb;if("function"!=typeof ze)throw new Y;if(function Oe(de){de.writing=!1,de.writecb=null,de.length-=de.writelen,de.writelen=0}(ae),te)!function fe(de,te,ae,Te,ze){--te.pendingcb,ae?(process.nextTick(ze,Te),process.nextTick(Ze,de,te),de._writableState.errorEmitted=!0,ge(de,Te)):(ze(Te),de._writableState.errorEmitted=!0,ge(de,Te),Ze(de,te))}(de,ae,Te,te,ze);else{var ce=We(ae)||de.destroyed;!ce&&!ae.corked&&!ae.bufferProcessing&&ae.bufferedRequest&&Fe(de,ae),Te?process.nextTick(Ge,de,ae,ce,ze):Ge(de,ae,ce,ze)}}(te,ze)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==de.emitClose,this.autoDestroy=!!de.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function A(de){var te=this instanceof(C=C||x(1339));if(!te&&!g.call(A,this))return new A(de);this._writableState=new pe(de,this,te),this.writable=!0,de&&("function"==typeof de.write&&(this._write=de.write),"function"==typeof de.writev&&(this._writev=de.writev),"function"==typeof de.destroy&&(this._destroy=de.destroy),"function"==typeof de.final&&(this._final=de.final)),j.call(this)}function ne(de,te,ae,Te,ze,ce,me){te.writelen=Te,te.writecb=me,te.writing=!0,te.sync=!0,te.destroyed?te.onwrite(new B("write")):ae?de._writev(ze,te.onwrite):de._write(ze,ce,te.onwrite),te.sync=!1}function Ge(de,te,ae,Te){ae||function at(de,te){0===te.length&&te.needDrain&&(te.needDrain=!1,de.emit("drain"))}(de,te),te.pendingcb--,Te(),Ze(de,te)}function Fe(de,te){te.bufferProcessing=!0;var ae=te.bufferedRequest;if(de._writev&&ae&&ae.next){var ze=new Array(te.bufferedRequestCount),ce=te.corkedRequestsFree;ce.entry=ae;for(var me=0,rt=!0;ae;)ze[me]=ae,ae.isBuf||(rt=!1),ae=ae.next,me+=1;ze.allBuffers=rt,ne(de,te,!0,te.length,ze,"",ce.finish),te.pendingcb++,te.lastBufferedRequest=null,ce.next?(te.corkedRequestsFree=ce.next,ce.next=null):te.corkedRequestsFree=new o(te),te.bufferedRequestCount=0}else{for(;ae;){var ye=ae.chunk;if(ne(de,te,!1,te.objectMode?1:ye.length,ye,ae.encoding,ae.callback),ae=ae.next,te.bufferedRequestCount--,te.writing)break}null===ae&&(te.lastBufferedRequest=null)}te.bufferedRequest=ae,te.bufferProcessing=!1}function We(de){return de.ending&&0===de.length&&null===de.bufferedRequest&&!de.finished&&!de.writing}function Qe(de,te){de._final(function(ae){te.pendingcb--,ae&&ge(de,ae),te.prefinished=!0,de.emit("prefinish"),Ze(de,te)})}function Ze(de,te){var ae=We(te);if(ae&&(function ft(de,te){!te.prefinished&&!te.finalCalled&&("function"!=typeof de._final||te.destroyed?(te.prefinished=!0,de.emit("prefinish")):(te.pendingcb++,te.finalCalled=!0,process.nextTick(Qe,de,te)))}(de,te),0===te.pendingcb&&(te.finished=!0,de.emit("finish"),te.autoDestroy))){var Te=de._readableState;(!Te||Te.autoDestroy&&Te.endEmitted)&&de.destroy()}return ae}x(3894)(A,j),pe.prototype.getBuffer=function(){for(var te=this.bufferedRequest,ae=[];te;)ae.push(te),te=te.next;return ae},function(){try{Object.defineProperty(pe.prototype,"buffer",{get:F.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(g=Function.prototype[Symbol.hasInstance],Object.defineProperty(A,Symbol.hasInstance,{value:function(te){return!!g.call(this,te)||this===A&&te&&te._writableState instanceof pe}})):g=function(te){return te instanceof this},A.prototype.pipe=function(){ge(this,new le)},A.prototype.write=function(de,te,ae){var Te=this._writableState,ze=!1,ce=!Te.objectMode&&function N(de){return d.isBuffer(de)||de instanceof m}(de);return ce&&!d.isBuffer(de)&&(de=function v(de){return d.from(de)}(de)),"function"==typeof te&&(ae=te,te=null),ce?te="buffer":te||(te=Te.defaultEncoding),"function"!=typeof ae&&(ae=_e),Te.ending?function y(de,te){var ae=new U;ge(de,ae),process.nextTick(te,ae)}(this,ae):(ce||function E(de,te,ae,Te){var ze;return null===ae?ze=new z:"string"!=typeof ae&&!te.objectMode&&(ze=new Q("chunk",["string","Buffer"],ae)),!ze||(ge(de,ze),process.nextTick(Te,ze),!1)}(this,Te,de,ae))&&(Te.pendingcb++,ze=function P(de,te,ae,Te,ze,ce){if(!ae){var me=function D(de,te,ae){return!de.objectMode&&!1!==de.decodeStrings&&"string"==typeof te&&(te=d.from(te,ae)),te}(te,Te,ze);Te!==me&&(ae=!0,ze="buffer",Te=me)}var rt=te.objectMode?1:Te.length;te.length+=rt;var ye=te.length<te.highWaterMark;if(ye||(te.needDrain=!0),te.writing||te.corked){var $=te.lastBufferedRequest;te.lastBufferedRequest={chunk:Te,encoding:ze,isBuf:ae,callback:ce,next:null},$?$.next=te.lastBufferedRequest:te.bufferedRequest=te.lastBufferedRequest,te.bufferedRequestCount+=1}else ne(de,te,!1,rt,Te,ze,ce);return ye}(this,Te,ce,de,te,ae)),ze},A.prototype.cork=function(){this._writableState.corked++},A.prototype.uncork=function(){var de=this._writableState;de.corked&&(de.corked--,!de.writing&&!de.corked&&!de.bufferProcessing&&de.bufferedRequest&&Fe(this,de))},A.prototype.setDefaultEncoding=function(te){if("string"==typeof te&&(te=te.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((te+"").toLowerCase())>-1))throw new ee(te);return this._writableState.defaultEncoding=te,this},Object.defineProperty(A.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(A.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),A.prototype._write=function(de,te,ae){ae(new q("_write()"))},A.prototype._writev=null,A.prototype.end=function(de,te,ae){var Te=this._writableState;return"function"==typeof de?(ae=de,de=null,te=null):"function"==typeof te&&(ae=te,te=null),null!=de&&this.write(de,te),Te.corked&&(Te.corked=1,this.uncork()),Te.ending||function Ue(de,te,ae){te.ending=!0,Ze(de,te),ae&&(te.finished?process.nextTick(ae):de.once("finish",ae)),te.ended=!0,de.writable=!1}(this,Te,ae),this},Object.defineProperty(A.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(A.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(te){!this._writableState||(this._writableState.destroyed=te)}}),A.prototype.destroy=M.destroy,A.prototype._undestroy=M.undestroy,A.prototype._destroy=function(de,te){te(de)}},3872:(we,O,x)=>{var I;function o(B,z,U){return z in B?Object.defineProperty(B,z,{value:U,enumerable:!0,configurable:!0,writable:!0}):B[z]=U,B}var C=x(7542),F=Symbol("lastResolve"),j=Symbol("lastReject"),d=Symbol("error"),m=Symbol("ended"),v=Symbol("lastPromise"),N=Symbol("handlePromise"),M=Symbol("stream");function L(B,z){return{value:B,done:z}}function X(B){var z=B[F];if(null!==z){var U=B[M].read();null!==U&&(B[v]=null,B[F]=null,B[j]=null,z(L(U,!1)))}}function H(B){process.nextTick(X,B)}var q=Object.getPrototypeOf(function(){}),Y=Object.setPrototypeOf((o(I={get stream(){return this[M]},next:function(){var z=this,U=this[d];if(null!==U)return Promise.reject(U);if(this[m])return Promise.resolve(L(void 0,!0));if(this[M].destroyed)return new Promise(function(pe,g){process.nextTick(function(){z[d]?g(z[d]):pe(L(void 0,!0))})});var ge,ee=this[v];if(ee)ge=new Promise(function Q(B,z){return function(U,ee){B.then(function(){z[m]?U(L(void 0,!0)):z[N](U,ee)},ee)}}(ee,this));else{var _e=this[M].read();if(null!==_e)return Promise.resolve(L(_e,!1));ge=new Promise(this[N])}return this[v]=ge,ge}},Symbol.asyncIterator,function(){return this}),o(I,"return",function(){var z=this;return new Promise(function(U,ee){z[M].destroy(null,function(ge){ge?ee(ge):U(L(void 0,!0))})})}),I),q);we.exports=function(z){var U,ee=Object.create(Y,(o(U={},M,{value:z,writable:!0}),o(U,F,{value:null,writable:!0}),o(U,j,{value:null,writable:!0}),o(U,d,{value:null,writable:!0}),o(U,m,{value:z._readableState.endEmitted,writable:!0}),o(U,N,{value:function(_e,pe){var g=ee[M].read();g?(ee[v]=null,ee[F]=null,ee[j]=null,_e(L(g,!1))):(ee[F]=_e,ee[j]=pe)},writable:!0}),U));return ee[v]=null,C(z,function(ge){if(ge&&"ERR_STREAM_PREMATURE_CLOSE"!==ge.code){var _e=ee[j];return null!==_e&&(ee[v]=null,ee[F]=null,ee[j]=null,_e(ge)),void(ee[d]=ge)}var pe=ee[F];null!==pe&&(ee[v]=null,ee[F]=null,ee[j]=null,pe(L(void 0,!0))),ee[m]=!0}),z.on("readable",H.bind(null,ee)),ee}},5019:(we,O,x)=>{function I(H,Q){var q=Object.keys(H);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(H);Q&&(Y=Y.filter(function(le){return Object.getOwnPropertyDescriptor(H,le).enumerable})),q.push.apply(q,Y)}return q}function C(H,Q,q){return Q in H?Object.defineProperty(H,Q,{value:q,enumerable:!0,configurable:!0,writable:!0}):H[Q]=q,H}function j(H,Q){for(var q=0;q<Q.length;q++){var Y=Q[q];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(H,Y.key,Y)}}var v=x(3172).Buffer,M=x(2361).inspect,L=M&&M.custom||"inspect";function X(H,Q,q){v.prototype.copy.call(H,Q,q)}we.exports=function(){function H(){(function F(H,Q){if(!(H instanceof Q))throw new TypeError("Cannot call a class as a function")})(this,H),this.head=null,this.tail=null,this.length=0}return function d(H,Q,q){Q&&j(H.prototype,Q),q&&j(H,q)}(H,[{key:"push",value:function(q){var Y={data:q,next:null};this.length>0?this.tail.next=Y:this.head=Y,this.tail=Y,++this.length}},{key:"unshift",value:function(q){var Y={data:q,next:this.head};0===this.length&&(this.tail=Y),this.head=Y,++this.length}},{key:"shift",value:function(){if(0!==this.length){var q=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,q}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(q){if(0===this.length)return"";for(var Y=this.head,le=""+Y.data;Y=Y.next;)le+=q+Y.data;return le}},{key:"concat",value:function(q){if(0===this.length)return v.alloc(0);for(var Y=v.allocUnsafe(q>>>0),le=this.head,B=0;le;)X(le.data,Y,B),B+=le.data.length,le=le.next;return Y}},{key:"consume",value:function(q,Y){var le;return q<this.head.data.length?(le=this.head.data.slice(0,q),this.head.data=this.head.data.slice(q)):le=q===this.head.data.length?this.shift():Y?this._getString(q):this._getBuffer(q),le}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(q){var Y=this.head,le=1,B=Y.data;for(q-=B.length;Y=Y.next;){var z=Y.data,U=q>z.length?z.length:q;if(B+=U===z.length?z:z.slice(0,q),0==(q-=U)){U===z.length?(++le,this.head=Y.next?Y.next:this.tail=null):(this.head=Y,Y.data=z.slice(U));break}++le}return this.length-=le,B}},{key:"_getBuffer",value:function(q){var Y=v.allocUnsafe(q),le=this.head,B=1;for(le.data.copy(Y),q-=le.data.length;le=le.next;){var z=le.data,U=q>z.length?z.length:q;if(z.copy(Y,Y.length-q,0,U),0==(q-=U)){U===z.length?(++B,this.head=le.next?le.next:this.tail=null):(this.head=le,le.data=z.slice(U));break}++B}return this.length-=B,Y}},{key:L,value:function(q,Y){return M(this,function o(H){for(var Q=1;Q<arguments.length;Q++){var q=null!=arguments[Q]?arguments[Q]:{};Q%2?I(Object(q),!0).forEach(function(Y){C(H,Y,q[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(H,Object.getOwnPropertyDescriptors(q)):I(Object(q)).forEach(function(Y){Object.defineProperty(H,Y,Object.getOwnPropertyDescriptor(q,Y))})}return H}({},Y,{depth:0,customInspect:!1}))}}]),H}()},1920:we=>{function x(j,d){C(j,d),I(j)}function I(j){j._writableState&&!j._writableState.emitClose||j._readableState&&!j._readableState.emitClose||j.emit("close")}function C(j,d){j.emit("error",d)}we.exports={destroy:function O(j,d){var m=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(d?d(j):j&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(C,this,j)):process.nextTick(C,this,j)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(j||null,function(M){!d&&M?m._writableState?m._writableState.errorEmitted?process.nextTick(I,m):(m._writableState.errorEmitted=!0,process.nextTick(x,m,M)):process.nextTick(x,m,M):d?(process.nextTick(I,m),d(M)):process.nextTick(I,m)}),this)},undestroy:function o(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function F(j,d){var m=j._readableState,v=j._writableState;m&&m.autoDestroy||v&&v.autoDestroy?j.destroy(d):j.emit("error",d)}}},7542:(we,O,x)=>{var I=x(891).q.ERR_STREAM_PREMATURE_CLOSE;function C(){}we.exports=function j(d,m,v){if("function"==typeof m)return j(d,null,m);m||(m={}),v=function o(d){var m=!1;return function(){if(!m){m=!0;for(var v=arguments.length,N=new Array(v),M=0;M<v;M++)N[M]=arguments[M];d.apply(this,N)}}}(v||C);var N=m.readable||!1!==m.readable&&d.readable,M=m.writable||!1!==m.writable&&d.writable,L=function(){d.writable||H()},X=d._writableState&&d._writableState.finished,H=function(){M=!1,X=!0,N||v.call(d)},Q=d._readableState&&d._readableState.endEmitted,q=function(){N=!1,Q=!0,M||v.call(d)},Y=function(U){v.call(d,U)},le=function(){var U;return N&&!Q?((!d._readableState||!d._readableState.ended)&&(U=new I),v.call(d,U)):M&&!X?((!d._writableState||!d._writableState.ended)&&(U=new I),v.call(d,U)):void 0},B=function(){d.req.on("finish",H)};return function F(d){return d.setHeader&&"function"==typeof d.abort}(d)?(d.on("complete",H),d.on("abort",le),d.req?B():d.on("request",B)):M&&!d._writableState&&(d.on("end",L),d.on("close",L)),d.on("end",q),d.on("finish",H),!1!==m.error&&d.on("error",Y),d.on("close",le),function(){d.removeListener("complete",H),d.removeListener("abort",le),d.removeListener("request",B),d.req&&d.req.removeListener("finish",H),d.removeListener("end",L),d.removeListener("close",L),d.removeListener("finish",H),d.removeListener("end",q),d.removeListener("error",Y),d.removeListener("close",le)}}},7412:we=>{we.exports=function(){throw new Error("Readable.from is not available in the browser")}},954:(we,O,x)=>{var I,C=x(891).q,F=C.ERR_MISSING_ARGS,j=C.ERR_STREAM_DESTROYED;function d(H){if(H)throw H}function v(H,Q,q,Y){Y=function o(H){var Q=!1;return function(){Q||(Q=!0,H.apply(void 0,arguments))}}(Y);var le=!1;H.on("close",function(){le=!0}),void 0===I&&(I=x(7542)),I(H,{readable:Q,writable:q},function(z){if(z)return Y(z);le=!0,Y()});var B=!1;return function(z){if(!le&&!B){if(B=!0,function m(H){return H.setHeader&&"function"==typeof H.abort}(H))return H.abort();if("function"==typeof H.destroy)return H.destroy();Y(z||new j("pipe"))}}}function N(H){H()}function M(H,Q){return H.pipe(Q)}function L(H){return H.length&&"function"==typeof H[H.length-1]?H.pop():d}we.exports=function X(){for(var H=arguments.length,Q=new Array(H),q=0;q<H;q++)Q[q]=arguments[q];var Y=L(Q);if(Array.isArray(Q[0])&&(Q=Q[0]),Q.length<2)throw new F("streams");var le,B=Q.map(function(z,U){var ee=U<Q.length-1;return v(z,ee,U>0,function(_e){le||(le=_e),_e&&B.forEach(N),!ee&&(B.forEach(N),Y(le))})});return Q.reduce(M)}},7102:(we,O,x)=>{var I=x(891).q.ERR_INVALID_OPT_VALUE;we.exports={getHighWaterMark:function C(F,j,d,m){var v=function o(F,j,d){return null!=F.highWaterMark?F.highWaterMark:j?F[d]:null}(j,m,d);if(null!=v){if(!isFinite(v)||Math.floor(v)!==v||v<0)throw new I(m?d:"highWaterMark",v);return Math.floor(v)}return F.objectMode?16:16384}}},4970:(we,O,x)=>{we.exports=x(9069).EventEmitter},8598:function(we){"undefined"!=typeof self&&self,we.exports=function(O){var x={};function I(o){if(x[o])return x[o].exports;var C=x[o]={i:o,l:!1,exports:{}};return O[o].call(C.exports,C,C.exports,I),C.l=!0,C.exports}return I.m=O,I.c=x,I.d=function(o,C,F){I.o(o,C)||Object.defineProperty(o,C,{enumerable:!0,get:F})},I.r=function(o){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},I.t=function(o,C){if(1&C&&(o=I(o)),8&C||4&C&&"object"==typeof o&&o&&o.__esModule)return o;var F=Object.create(null);if(I.r(F),Object.defineProperty(F,"default",{enumerable:!0,value:o}),2&C&&"string"!=typeof o)for(var j in o)I.d(F,j,function(d){return o[d]}.bind(null,j));return F},I.n=function(o){var C=o&&o.__esModule?function(){return o.default}:function(){return o};return I.d(C,"a",C),C},I.o=function(o,C){return Object.prototype.hasOwnProperty.call(o,C)},I.p="",I(I.s=0)}([function(O,x,I){const{types:o,iterableTypes:C,errors:F}=I(1),j=I(2),d={[o.NUMBER]:j.isNumber,[o.BOOLEAN]:j.isBoolean,[o.STRING]:j.isString,[o.DATE]:j.isDate,[o.UNDEFINED]:j.isUndefined,[o.NULL]:j.isNull,[o.ARRAY]:j.isArray,[o.MAP]:j.isMap,[o.SET]:j.isSet,[o.ITERABLE_OBJECT]:j.isIterableObject},m={[o.DATE]:j.areDatesEqual};function v(H){const Q=Object.keys(d);let q=o.DEFAULT;for(let Y=0;Y<Q.length;Y+=1)if(d[Q[Y]](H)){q=Q[Y];break}return q}function M(H,Q,q,Y,le){const B={op:q,path:Y};return"add"!==q&&"update"!==q||(B.val=Q),le&&"add"!==q&&(B.oldVal=H),B}function L(H,Q,q,Y,le){const B=v(H),z=v(Q),U=Y||[],ee=le||[];if((ge=B)===z&&C.indexOf(ge)>=0){const ge=function(g,A,y){if(y===o.ARRAY){const E=new Array(g.length>A.length?g.length:A.length);return E.fill(0),new Set(E.map((D,P)=>P))}return new Set(Object.keys(g).concat(Object.keys(A)))}(H,Q,B).values();let{value:_e,done:pe}=ge.next();for(;!pe;){Object.prototype.hasOwnProperty.call(H,_e)?Object.prototype.hasOwnProperty.call(Q,_e)?L(H[_e],Q[_e],q,U.concat(_e),ee):ee.push(M(H[_e],Q[_e],"delete",U.concat(_e),q)):ee.push(M(H[_e],Q[_e],"add",U.concat(_e),q));const g=ge.next();_e=g.value,pe=g.done}}else{const ge=function N(H,Q,q,Y){let le;return q===o.UNDEFINED&&Y!==o.UNDEFINED?le="add":q!==o.UNDEFINED&&Y===o.UNDEFINED?le="delete":(B=H,z=Q,(U=q)===Y&&(m[U]?m[U](B,z):B===z)?j.noop():le="update"),le;var B,z,U}(H,Q,B,z);null!=ge&&ee.push(M(H,Q,ge,Y,q))}var ge;return ee}const X={add:j.setValueByPath,update:j.setValueByPath,delete:j.deleteValueByPath};O.exports={getDiff:(H,Q,q=!1)=>L(H,Q,q),applyDiff:(H,Q,q)=>function(Y,le,B){if(!(le instanceof Array))throw new Error(F.INVALID_DIFF_FORMAT);let z=Y;return le.forEach(U=>{const{op:ee,val:ge,path:_e}=U;if(!X[ee])throw new Error(F.INVALID_DIFF_OP);z=X[ee](z,_e,ge,B)}),z}(H,Q,q)}},function(O,x){const I={NUMBER:"NUMBER",BOOLEAN:"BOOLEAN",STRING:"STRING",NULL:"NULL",UNDEFINED:"UNDEFINED",DATE:"DATE",ARRAY:"ARRAY",MAP:"MAP",SET:"SET",ITERABLE_OBJECT:"ITERABLE_OBJECT",DEFAULT:"OBJECT"};O.exports={types:I,iterableTypes:[I.ITERABLE_OBJECT,I.MAP,I.ARRAY,I.SET],errors:{EMPTY_DIFF:"No diff object is provided, Nothing to apply",INVALID_DIFF_FORMAT:"Invalid diff format",INVALID_DIFF_OP:"Unsupported operation provided into diff object"}}},function(O,x){const I=m=>v=>v instanceof m,o=I(Date),C=I(Array),F=I(Map),j=I(Set),d=m=>"[object Object]"===Object.prototype.toString.call(m);O.exports={isNumber:m=>"number"==typeof m,isBoolean:m=>"boolean"==typeof m,isString:m=>"string"==typeof m,isDate:o,isUndefined:m=>void 0===m,isNull:m=>null===m,isArray:C,isMap:F,isSet:j,isIterableObject:d,noop:()=>{},areDatesEqual:(m,v)=>m.getTime()===v.getTime(),setValueByPath:function(m,v=[],N,M){if(!C(v))throw new Error(`Diff path: "${v}" is not valid`);const{length:L}=v;if(0===L)return N;let X=m;for(let H=0;H<L;H+=1){const Q=v[H];if(!X)throw new Error(`Invalid path: "${v}" for object: ${JSON.stringify(m,null,2)}`);if(null==Q)throw new Error(`Invalid path: "${v}" for object: ${JSON.stringify(m,null,2)}`);H!==L-1?(X=X[Q],M&&M(X)):X[Q]=N}return m},deleteValueByPath:function(m,v){const N=v||[];if(0===N.length)return;let M=m;const{length:L}=N;for(let X=0;X<L;X+=1)if(X!==L-1){if(!M[N[X]])throw new Error(`Invalid path: "${v}" for object: ${JSON.stringify(m,null,2)}`);M=M[N[X]]}else if(d(M))delete M[N[X]];else{const H=parseInt(N[X],10);for(;M.length>H;)M.pop()}return m}}}])},4351:(we,O,x)=>{x.d(O,{b:()=>C});var I=x(5577),o=x(576);function C(F,j){return(0,o.m)(j)?(0,I.z)(F,j,1):(0,I.z)(F,1)}},7414:(we,O,x)=>{x.d(O,{V:()=>N});var I=x(4986),o=x(1165),C=x(4482),F=x(8421),j=x(3888),d=x(5403),m=x(9672);const v=(0,j.d)(L=>function(H=null){L(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=H});function N(L,X){const{first:H,each:Q,with:q=M,scheduler:Y=X??I.z,meta:le=null}=(0,o.q)(L)?{first:L}:"number"==typeof L?{each:L}:L;if(null==H&&null==Q)throw new TypeError("No timeout provided.");return(0,C.e)((B,z)=>{let U,ee,ge=null,_e=0;const pe=g=>{ee=(0,m.f)(z,Y,()=>{try{U.unsubscribe(),(0,F.Xf)(q({meta:le,lastValue:ge,seen:_e})).subscribe(z)}catch(A){z.error(A)}},g)};U=B.subscribe((0,d.x)(z,g=>{null==ee||ee.unsubscribe(),_e++,z.next(ge=g),Q>0&&pe(Q)},void 0,void 0,()=>{(null==ee?void 0:ee.closed)||null==ee||ee.unsubscribe(),ge=null})),!_e&&pe(null!=H?"number"==typeof H?H:+H-Y.now():Q)})}function M(L){throw new v(L)}},1365:(we,O,x)=>{x.d(O,{M:()=>m});var I=x(4482),o=x(5403),C=x(8421),F=x(4671),j=x(5032),d=x(3269);function m(...v){const N=(0,d.jO)(v);return(0,I.e)((M,L)=>{const X=v.length,H=new Array(X);let Q=v.map(()=>!1),q=!1;for(let Y=0;Y<X;Y++)(0,C.Xf)(v[Y]).subscribe((0,o.x)(L,le=>{H[Y]=le,!q&&!Q[Y]&&(Q[Y]=!0,(q=Q.every(F.y))&&(Q=null))},j.Z));M.subscribe((0,o.x)(L,Y=>{if(q){const le=[Y,...H];L.next(N?N(...le):le)}}))})}},233:(we,O,x)=>{x.d(O,{N:()=>j});var I=x(4408),C=x(7565);const j=new class F extends C.v{}(class o extends I.o{constructor(v,N){super(v,N),this.scheduler=v,this.work=N}schedule(v,N=0){return N>0?super.schedule(v,N):(this.delay=N,this.state=v,this.scheduler.flush(this),this)}execute(v,N){return N>0||this.closed?super.execute(v,N):this._execute(v,N)}requestAsyncId(v,N,M=0){return null!=M&&M>0||null==M&&this.delay>0?super.requestAsyncId(v,N,M):v.flush(this)}})},3502:(we,O,x)=>{var I=x(3172),o=I.Buffer;function C(j,d){for(var m in j)d[m]=j[m]}function F(j,d,m){return o(j,d,m)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?we.exports=I:(C(I,O),O.Buffer=F),F.prototype=Object.create(o.prototype),C(o,F),F.from=function(j,d,m){if("number"==typeof j)throw new TypeError("Argument must not be a number");return o(j,d,m)},F.alloc=function(j,d,m){if("number"!=typeof j)throw new TypeError("Argument must be a number");var v=o(j);return void 0!==d?"string"==typeof m?v.fill(d,m):v.fill(d):v.fill(0),v},F.allocUnsafe=function(j){if("number"!=typeof j)throw new TypeError("Argument must be a number");return o(j)},F.allocUnsafeSlow=function(j){if("number"!=typeof j)throw new TypeError("Argument must be a number");return I.SlowBuffer(j)}},191:(we,O)=>{var x,I,o,C,F;if("undefined"==typeof window||"function"!=typeof MessageChannel){var j=null,d=null,m=function(){if(null!==j)try{var Qe=O.unstable_now();j(!0,Qe),j=null}catch(ft){throw setTimeout(m,0),ft}},v=Date.now();O.unstable_now=function(){return Date.now()-v},x=function(Qe){null!==j?setTimeout(x,0,Qe):(j=Qe,setTimeout(m,0))},I=function(Qe,ft){d=setTimeout(Qe,ft)},o=function(){clearTimeout(d)},C=function(){return!1},F=O.unstable_forceFrameRate=function(){}}else{var N=window.performance,M=window.Date,L=window.setTimeout,X=window.clearTimeout;if("undefined"!=typeof console){var H=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof H&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof N&&"function"==typeof N.now)O.unstable_now=function(){return N.now()};else{var Q=M.now();O.unstable_now=function(){return M.now()-Q}}var q=!1,Y=null,le=-1,B=5,z=0;C=function(){return O.unstable_now()>=z},F=function(){},O.unstable_forceFrameRate=function(Qe){0>Qe||125<Qe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):B=0<Qe?Math.floor(1e3/Qe):5};var U=new MessageChannel,ee=U.port2;U.port1.onmessage=function(){if(null!==Y){var Qe=O.unstable_now();z=Qe+B;try{Y(!0,Qe)?ee.postMessage(null):(q=!1,Y=null)}catch(ft){throw ee.postMessage(null),ft}}else q=!1},x=function(Qe){Y=Qe,q||(q=!0,ee.postMessage(null))},I=function(Qe,ft){le=L(function(){Qe(O.unstable_now())},ft)},o=function(){X(le),le=-1}}function ge(Qe,ft){var Ze=Qe.length;Qe.push(ft);e:for(;;){var Ue=Ze-1>>>1,nt=Qe[Ue];if(!(void 0!==nt&&0<g(nt,ft)))break e;Qe[Ue]=ft,Qe[Ze]=nt,Ze=Ue}}function _e(Qe){return void 0===(Qe=Qe[0])?null:Qe}function pe(Qe){var ft=Qe[0];if(void 0!==ft){var Ze=Qe.pop();if(Ze!==ft){Qe[0]=Ze;e:for(var Ue=0,nt=Qe.length;Ue<nt;){var de=2*(Ue+1)-1,te=Qe[de],ae=de+1,Te=Qe[ae];if(void 0!==te&&0>g(te,Ze))void 0!==Te&&0>g(Te,te)?(Qe[Ue]=Te,Qe[ae]=Ze,Ue=ae):(Qe[Ue]=te,Qe[de]=Ze,Ue=de);else{if(!(void 0!==Te&&0>g(Te,Ze)))break e;Qe[Ue]=Te,Qe[ae]=Ze,Ue=ae}}}return ft}return null}function g(Qe,ft){var Ze=Qe.sortIndex-ft.sortIndex;return 0!==Ze?Ze:Qe.id-ft.id}var A=[],y=[],E=1,D=null,P=3,ne=!1,fe=!1,Oe=!1;function oe(Qe){for(var ft=_e(y);null!==ft;){if(null===ft.callback)pe(y);else{if(!(ft.startTime<=Qe))break;pe(y),ft.sortIndex=ft.expirationTime,ge(A,ft)}ft=_e(y)}}function Ge(Qe){if(Oe=!1,oe(Qe),!fe)if(null!==_e(A))fe=!0,x(at);else{var ft=_e(y);null!==ft&&I(Ge,ft.startTime-Qe)}}function at(Qe,ft){fe=!1,Oe&&(Oe=!1,o()),ne=!0;var Ze=P;try{for(oe(ft),D=_e(A);null!==D&&(!(D.expirationTime>ft)||Qe&&!C());){var Ue=D.callback;if(null!==Ue){D.callback=null,P=D.priorityLevel;var nt=Ue(D.expirationTime<=ft);ft=O.unstable_now(),"function"==typeof nt?D.callback=nt:D===_e(A)&&pe(A),oe(ft)}else pe(A);D=_e(A)}if(null!==D)var de=!0;else{var te=_e(y);null!==te&&I(Ge,te.startTime-ft),de=!1}return de}finally{D=null,P=Ze,ne=!1}}function Fe(Qe){switch(Qe){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var We=F;O.unstable_IdlePriority=5,O.unstable_ImmediatePriority=1,O.unstable_LowPriority=4,O.unstable_NormalPriority=3,O.unstable_Profiling=null,O.unstable_UserBlockingPriority=2,O.unstable_cancelCallback=function(Qe){Qe.callback=null},O.unstable_continueExecution=function(){fe||ne||(fe=!0,x(at))},O.unstable_getCurrentPriorityLevel=function(){return P},O.unstable_getFirstCallbackNode=function(){return _e(A)},O.unstable_next=function(Qe){switch(P){case 1:case 2:case 3:var ft=3;break;default:ft=P}var Ze=P;P=ft;try{return Qe()}finally{P=Ze}},O.unstable_pauseExecution=function(){},O.unstable_requestPaint=We,O.unstable_runWithPriority=function(Qe,ft){switch(Qe){case 1:case 2:case 3:case 4:case 5:break;default:Qe=3}var Ze=P;P=Qe;try{return ft()}finally{P=Ze}},O.unstable_scheduleCallback=function(Qe,ft,Ze){var Ue=O.unstable_now();if("object"==typeof Ze&&null!==Ze){var nt=Ze.delay;nt="number"==typeof nt&&0<nt?Ue+nt:Ue,Ze="number"==typeof Ze.timeout?Ze.timeout:Fe(Qe)}else Ze=Fe(Qe),nt=Ue;return Qe={id:E++,callback:ft,priorityLevel:Qe,startTime:nt,expirationTime:Ze=nt+Ze,sortIndex:-1},nt>Ue?(Qe.sortIndex=nt,ge(y,Qe),null===_e(A)&&Qe===_e(y)&&(Oe?o():Oe=!0,I(Ge,nt-Ue))):(Qe.sortIndex=Ze,ge(A,Qe),fe||ne||(fe=!0,x(at))),Qe},O.unstable_shouldYield=function(){var Qe=O.unstable_now();oe(Qe);var ft=_e(A);return ft!==D&&null!==D&&null!==ft&&null!==ft.callback&&ft.startTime<=Qe&&ft.expirationTime<D.expirationTime||C()},O.unstable_wrapCallback=function(Qe){var ft=P;return function(){var Ze=P;P=ft;try{return Qe.apply(this,arguments)}finally{P=Ze}}}},4854:(we,O,x)=>{we.exports=x(191)},9495:(we,O,x)=>{var I=x(2766),o=x(392)("selectn"),C=x(8219),F=x(9925),j=Object.prototype.toString;we.exports=I(function d(m,v){o("arguments:",{path:m,object:v});for(var N=-1,M="[object Array]"===j.call(m)?m:F(C(m)),L=M.length,X=L?v:void 0;++N<L;){if(Object(X)!==X)return;X=X[M[N]]}return o("ref:",X),"function"==typeof X?X():X})},392:(we,O,x)=>{function j(){var m;try{m=O.storage.debug}catch{}return!m&&"undefined"!=typeof process&&"env"in process&&(m=process.env.DEBUG),m}(O=we.exports=x(2328)).log=function C(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},O.formatArgs=function o(m){var v=this.useColors;if(m[0]=(v?"%c":"")+this.namespace+(v?" %c":" ")+m[0]+(v?"%c ":" ")+"+"+O.humanize(this.diff),v){var N="color: "+this.color;m.splice(1,0,N,"color: inherit");var M=0,L=0;m[0].replace(/%[a-zA-Z%]/g,function(X){"%%"!==X&&(M++,"%c"===X&&(L=M))}),m.splice(L,0,N)}},O.save=function F(m){try{null==m?O.storage.removeItem("debug"):O.storage.debug=m}catch{}},O.load=j,O.useColors=function I(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},O.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function d(){try{return window.localStorage}catch{}}(),O.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],O.formatters.j=function(m){try{return JSON.stringify(m)}catch(v){return"[UnexpectedJSONParseError]: "+v.message}},O.enable(j())},2328:(we,O,x)=>{var I;function C(v){function N(){if(N.enabled){var M=N,L=+new Date,X=L-(I||L);M.diff=X,M.prev=I,M.curr=L,I=L;for(var H=new Array(arguments.length),Q=0;Q<H.length;Q++)H[Q]=arguments[Q];H[0]=O.coerce(H[0]),"string"!=typeof H[0]&&H.unshift("%O");var q=0;H[0]=H[0].replace(/%([a-zA-Z%])/g,function(le,B){if("%%"===le)return le;q++;var z=O.formatters[B];return"function"==typeof z&&(le=z.call(M,H[q]),H.splice(q,1),q--),le}),O.formatArgs.call(M,H);var Y=N.log||O.log||console.log.bind(console);Y.apply(M,H)}}return N.namespace=v,N.enabled=O.enabled(v),N.useColors=O.useColors(),N.color=function o(v){var M,N=0;for(M in v)N=(N<<5)-N+v.charCodeAt(M),N|=0;return O.colors[Math.abs(N)%O.colors.length]}(v),"function"==typeof O.init&&O.init(N),N}(O=we.exports=C.debug=C.default=C).coerce=function m(v){return v instanceof Error?v.stack||v.message:v},O.disable=function j(){O.enable("")},O.enable=function F(v){O.save(v),O.names=[],O.skips=[];for(var N=("string"==typeof v?v:"").split(/[\s,]+/),M=N.length,L=0;L<M;L++)!N[L]||("-"===(v=N[L].replace(/\*/g,".*?"))[0]?O.skips.push(new RegExp("^"+v.substr(1)+"$")):O.names.push(new RegExp("^"+v+"$")))},O.enabled=function d(v){var N,M;for(N=0,M=O.skips.length;N<M;N++)if(O.skips[N].test(v))return!1;for(N=0,M=O.names.length;N<M;N++)if(O.names[N].test(v))return!0;return!1},O.humanize=x(3539),O.names=[],O.skips=[],O.formatters={}},3539:we=>{var O=1e3,x=60*O,I=60*x,o=24*I;function m(v,N,M){if(!(v<N))return v<1.5*N?Math.floor(v/N)+" "+M:Math.ceil(v/N)+" "+M+"s"}we.exports=function(v,N){N=N||{};var M=typeof v;if("string"===M&&v.length>0)return function F(v){if(!((v=String(v)).length>100)){var N=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(v);if(N){var M=parseFloat(N[1]);switch((N[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*M;case"days":case"day":case"d":return M*o;case"hours":case"hour":case"hrs":case"hr":case"h":return M*I;case"minutes":case"minute":case"mins":case"min":case"m":return M*x;case"seconds":case"second":case"secs":case"sec":case"s":return M*O;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return M;default:return}}}}(v);if("number"===M&&!1===isNaN(v))return N.long?function d(v){return m(v,o,"day")||m(v,I,"hour")||m(v,x,"minute")||m(v,O,"second")||v+" ms"}(v):function j(v){return v>=o?Math.round(v/o)+"d":v>=I?Math.round(v/I)+"h":v>=x?Math.round(v/x)+"m":v>=O?Math.round(v/O)+"s":v+"ms"}(v);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(v))}},8475:(we,O,x)=>{var I=x(5203),o=x(5834),C=x(7024),F=I("%TypeError%"),j=I("%WeakMap%",!0),d=I("%Map%",!0),m=o("WeakMap.prototype.get",!0),v=o("WeakMap.prototype.set",!0),N=o("WeakMap.prototype.has",!0),M=o("Map.prototype.get",!0),L=o("Map.prototype.set",!0),X=o("Map.prototype.has",!0),H=function(le,B){for(var U,z=le;null!==(U=z.next);z=U)if(U.key===B)return z.next=U.next,U.next=le.next,le.next=U,U};we.exports=function(){var B,z,U,ee={assert:function(ge){if(!ee.has(ge))throw new F("Side channel does not contain "+C(ge))},get:function(ge){if(j&&ge&&("object"==typeof ge||"function"==typeof ge)){if(B)return m(B,ge)}else if(d){if(z)return M(z,ge)}else if(U)return function(le,B){var z=H(le,B);return z&&z.value}(U,ge)},has:function(ge){if(j&&ge&&("object"==typeof ge||"function"==typeof ge)){if(B)return N(B,ge)}else if(d){if(z)return X(z,ge)}else if(U)return function(le,B){return!!H(le,B)}(U,ge);return!1},set:function(ge,_e){j&&ge&&("object"==typeof ge||"function"==typeof ge)?(B||(B=new j),v(B,ge,_e)):d?(z||(z=new d),L(z,ge,_e)):(U||(U={key:{},next:null}),function(le,B,z){var U=H(le,B);U?U.value=z:le.next={key:B,next:le.next,value:z}}(U,ge,_e))}};return ee}},295:(we,O,x)=>{we.exports=C;var I=x(9069).EventEmitter;function C(){I.call(this)}x(3894)(C,I),C.Readable=x(3154),C.Writable=x(520),C.Duplex=x(1339),C.Transform=x(6025),C.PassThrough=x(6071),C.finished=x(7542),C.pipeline=x(954),C.Stream=C,C.prototype.pipe=function(F,j){var d=this;function m(Q){F.writable&&!1===F.write(Q)&&d.pause&&d.pause()}function v(){d.readable&&d.resume&&d.resume()}d.on("data",m),F.on("drain",v),!F._isStdio&&(!j||!1!==j.end)&&(d.on("end",M),d.on("close",L));var N=!1;function M(){N||(N=!0,F.end())}function L(){N||(N=!0,"function"==typeof F.destroy&&F.destroy())}function X(Q){if(H(),0===I.listenerCount(this,"error"))throw Q}function H(){d.removeListener("data",m),F.removeListener("drain",v),d.removeListener("end",M),d.removeListener("close",L),d.removeListener("error",X),F.removeListener("error",X),d.removeListener("end",H),d.removeListener("close",H),F.removeListener("close",H)}return d.on("error",X),F.on("error",X),d.on("end",H),d.on("close",H),F.on("close",H),F.emit("pipe",d),F}},3054:(we,O,x)=>{var I=x(3502).Buffer,o=I.isEncoding||function(B){switch((B=""+B)&&B.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function j(B){var z;switch(this.encoding=function F(B){var z=function C(B){if(!B)return"utf8";for(var z;;)switch(B){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return B;default:if(z)return;B=(""+B).toLowerCase(),z=!0}}(B);if("string"!=typeof z&&(I.isEncoding===o||!o(B)))throw new Error("Unknown encoding: "+B);return z||B}(B),this.encoding){case"utf16le":this.text=X,this.end=H,z=4;break;case"utf8":this.fillLast=N,z=4;break;case"base64":this.text=Q,this.end=q,z=3;break;default:return this.write=Y,void(this.end=le)}this.lastNeed=0,this.lastTotal=0,this.lastChar=I.allocUnsafe(z)}function d(B){return B<=127?0:B>>5==6?2:B>>4==14?3:B>>3==30?4:B>>6==2?-1:-2}function N(B){var z=this.lastTotal-this.lastNeed,U=function v(B,z,U){if(128!=(192&z[0]))return B.lastNeed=0,"\ufffd";if(B.lastNeed>1&&z.length>1){if(128!=(192&z[1]))return B.lastNeed=1,"\ufffd";if(B.lastNeed>2&&z.length>2&&128!=(192&z[2]))return B.lastNeed=2,"\ufffd"}}(this,B);return void 0!==U?U:this.lastNeed<=B.length?(B.copy(this.lastChar,z,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(B.copy(this.lastChar,z,0,B.length),void(this.lastNeed-=B.length))}function X(B,z){if((B.length-z)%2==0){var U=B.toString("utf16le",z);if(U){var ee=U.charCodeAt(U.length-1);if(ee>=55296&&ee<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=B[B.length-2],this.lastChar[1]=B[B.length-1],U.slice(0,-1)}return U}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=B[B.length-1],B.toString("utf16le",z,B.length-1)}function H(B){var z=B&&B.length?this.write(B):"";return this.lastNeed?z+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):z}function Q(B,z){var U=(B.length-z)%3;return 0===U?B.toString("base64",z):(this.lastNeed=3-U,this.lastTotal=3,1===U?this.lastChar[0]=B[B.length-1]:(this.lastChar[0]=B[B.length-2],this.lastChar[1]=B[B.length-1]),B.toString("base64",z,B.length-U))}function q(B){var z=B&&B.length?this.write(B):"";return this.lastNeed?z+this.lastChar.toString("base64",0,3-this.lastNeed):z}function Y(B){return B.toString(this.encoding)}function le(B){return B&&B.length?this.write(B):""}O.s=j,j.prototype.write=function(B){if(0===B.length)return"";var z,U;if(this.lastNeed){if(void 0===(z=this.fillLast(B)))return"";U=this.lastNeed,this.lastNeed=0}else U=0;return U<B.length?z?z+this.text(B,U):this.text(B,U):z||""},j.prototype.end=function L(B){var z=B&&B.length?this.write(B):"";return this.lastNeed?z+"\ufffd":z},j.prototype.text=function M(B,z){var U=function m(B,z,U){var ee=z.length-1;if(ee<U)return 0;var ge=d(z[ee]);return ge>=0?(ge>0&&(B.lastNeed=ge-1),ge):--ee<U||-2===ge?0:(ge=d(z[ee]))>=0?(ge>0&&(B.lastNeed=ge-2),ge):--ee<U||-2===ge?0:(ge=d(z[ee]))>=0?(ge>0&&(2===ge?ge=0:B.lastNeed=ge-3),ge):0}(this,B,z);if(!this.lastNeed)return B.toString("utf8",z);this.lastTotal=U;var ee=B.length-(U-this.lastNeed);return B.copy(this.lastChar,0,ee),B.toString("utf8",z,ee)},j.prototype.fillLast=function(B){if(this.lastNeed<=B.length)return B.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);B.copy(this.lastChar,this.lastTotal-this.lastNeed,0,B.length),this.lastNeed-=B.length}},4364:we=>{function x(I){try{if(!global.localStorage)return!1}catch{return!1}var o=global.localStorage[I];return null!=o&&"true"===String(o).toLowerCase()}we.exports=function O(I,o){if(x("noDeprecation"))return I;var C=!1;return function F(){if(!C){if(x("throwDeprecation"))throw new Error(o);x("traceDeprecation")?console.trace(o):console.warn(o),C=!0}return I.apply(this,arguments)}}},6908:(we,O,x)=>{x.r(O),x.d(O,{__extends:()=>o,__assign:()=>C,__rest:()=>F,__decorate:()=>j,__param:()=>d,__metadata:()=>m,__awaiter:()=>v,__generator:()=>N,__createBinding:()=>M,__exportStar:()=>L,__values:()=>X,__read:()=>H,__spread:()=>Q,__spreadArrays:()=>q,__await:()=>Y,__asyncGenerator:()=>le,__asyncDelegator:()=>B,__asyncValues:()=>z,__makeTemplateObject:()=>U,__importStar:()=>ee,__importDefault:()=>ge,__classPrivateFieldGet:()=>_e,__classPrivateFieldSet:()=>pe});var I=function(g,A){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,E){y.__proto__=E}||function(y,E){for(var D in E)E.hasOwnProperty(D)&&(y[D]=E[D])})(g,A)};function o(g,A){function y(){this.constructor=g}I(g,A),g.prototype=null===A?Object.create(A):(y.prototype=A.prototype,new y)}var C=function(){return C=Object.assign||function(A){for(var y,E=1,D=arguments.length;E<D;E++)for(var P in y=arguments[E])Object.prototype.hasOwnProperty.call(y,P)&&(A[P]=y[P]);return A},C.apply(this,arguments)};function F(g,A){var y={};for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&A.indexOf(E)<0&&(y[E]=g[E]);if(null!=g&&"function"==typeof Object.getOwnPropertySymbols){var D=0;for(E=Object.getOwnPropertySymbols(g);D<E.length;D++)A.indexOf(E[D])<0&&Object.prototype.propertyIsEnumerable.call(g,E[D])&&(y[E[D]]=g[E[D]])}return y}function j(g,A,y,E){var ne,D=arguments.length,P=D<3?A:null===E?E=Object.getOwnPropertyDescriptor(A,y):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)P=Reflect.decorate(g,A,y,E);else for(var fe=g.length-1;fe>=0;fe--)(ne=g[fe])&&(P=(D<3?ne(P):D>3?ne(A,y,P):ne(A,y))||P);return D>3&&P&&Object.defineProperty(A,y,P),P}function d(g,A){return function(y,E){A(y,E,g)}}function m(g,A){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(g,A)}function v(g,A,y,E){return new(y||(y=Promise))(function(P,ne){function fe(Ge){try{oe(E.next(Ge))}catch(at){ne(at)}}function Oe(Ge){try{oe(E.throw(Ge))}catch(at){ne(at)}}function oe(Ge){Ge.done?P(Ge.value):function D(P){return P instanceof y?P:new y(function(ne){ne(P)})}(Ge.value).then(fe,Oe)}oe((E=E.apply(g,A||[])).next())})}function N(g,A){var E,D,P,ne,y={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return ne={next:fe(0),throw:fe(1),return:fe(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function fe(oe){return function(Ge){return function Oe(oe){if(E)throw new TypeError("Generator is already executing.");for(;y;)try{if(E=1,D&&(P=2&oe[0]?D.return:oe[0]?D.throw||((P=D.return)&&P.call(D),0):D.next)&&!(P=P.call(D,oe[1])).done)return P;switch(D=0,P&&(oe=[2&oe[0],P.value]),oe[0]){case 0:case 1:P=oe;break;case 4:return y.label++,{value:oe[1],done:!1};case 5:y.label++,D=oe[1],oe=[0];continue;case 7:oe=y.ops.pop(),y.trys.pop();continue;default:if(!(P=(P=y.trys).length>0&&P[P.length-1])&&(6===oe[0]||2===oe[0])){y=0;continue}if(3===oe[0]&&(!P||oe[1]>P[0]&&oe[1]<P[3])){y.label=oe[1];break}if(6===oe[0]&&y.label<P[1]){y.label=P[1],P=oe;break}if(P&&y.label<P[2]){y.label=P[2],y.ops.push(oe);break}P[2]&&y.ops.pop(),y.trys.pop();continue}oe=A.call(g,y)}catch(Ge){oe=[6,Ge],D=0}finally{E=P=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([oe,Ge])}}}function M(g,A,y,E){void 0===E&&(E=y),g[E]=A[y]}function L(g,A){for(var y in g)"default"!==y&&!A.hasOwnProperty(y)&&(A[y]=g[y])}function X(g){var A="function"==typeof Symbol&&Symbol.iterator,y=A&&g[A],E=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&E>=g.length&&(g=void 0),{value:g&&g[E++],done:!g}}};throw new TypeError(A?"Object is not iterable.":"Symbol.iterator is not defined.")}function H(g,A){var y="function"==typeof Symbol&&g[Symbol.iterator];if(!y)return g;var D,ne,E=y.call(g),P=[];try{for(;(void 0===A||A-- >0)&&!(D=E.next()).done;)P.push(D.value)}catch(fe){ne={error:fe}}finally{try{D&&!D.done&&(y=E.return)&&y.call(E)}finally{if(ne)throw ne.error}}return P}function Q(){for(var g=[],A=0;A<arguments.length;A++)g=g.concat(H(arguments[A]));return g}function q(){for(var g=0,A=0,y=arguments.length;A<y;A++)g+=arguments[A].length;var E=Array(g),D=0;for(A=0;A<y;A++)for(var P=arguments[A],ne=0,fe=P.length;ne<fe;ne++,D++)E[D]=P[ne];return E}function Y(g){return this instanceof Y?(this.v=g,this):new Y(g)}function le(g,A,y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var D,E=y.apply(g,A||[]),P=[];return D={},ne("next"),ne("throw"),ne("return"),D[Symbol.asyncIterator]=function(){return this},D;function ne(Fe){E[Fe]&&(D[Fe]=function(We){return new Promise(function(Qe,ft){P.push([Fe,We,Qe,ft])>1||fe(Fe,We)})})}function fe(Fe,We){try{!function Oe(Fe){Fe.value instanceof Y?Promise.resolve(Fe.value.v).then(oe,Ge):at(P[0][2],Fe)}(E[Fe](We))}catch(Qe){at(P[0][3],Qe)}}function oe(Fe){fe("next",Fe)}function Ge(Fe){fe("throw",Fe)}function at(Fe,We){Fe(We),P.shift(),P.length&&fe(P[0][0],P[0][1])}}function B(g){var A,y;return A={},E("next"),E("throw",function(D){throw D}),E("return"),A[Symbol.iterator]=function(){return this},A;function E(D,P){A[D]=g[D]?function(ne){return(y=!y)?{value:Y(g[D](ne)),done:"return"===D}:P?P(ne):ne}:P}}function z(g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var y,A=g[Symbol.asyncIterator];return A?A.call(g):(g=X(g),y={},E("next"),E("throw"),E("return"),y[Symbol.asyncIterator]=function(){return this},y);function E(P){y[P]=g[P]&&function(ne){return new Promise(function(fe,Oe){!function D(P,ne,fe,Oe){Promise.resolve(Oe).then(function(oe){P({value:oe,done:fe})},ne)}(fe,Oe,(ne=g[P](ne)).done,ne.value)})}}}function U(g,A){return Object.defineProperty?Object.defineProperty(g,"raw",{value:A}):g.raw=A,g}function ee(g){if(g&&g.__esModule)return g;var A={};if(null!=g)for(var y in g)Object.hasOwnProperty.call(g,y)&&(A[y]=g[y]);return A.default=g,A}function ge(g){return g&&g.__esModule?g:{default:g}}function _e(g,A){if(!A.has(g))throw new TypeError("attempted to get private field on non-instance");return A.get(g)}function pe(g,A,y){if(!A.has(g))throw new TypeError("attempted to set private field on non-instance");return A.set(g,y),y}},4275:(we,O,x)=>{x.r(O),x.d(O,{__extends:()=>o,__assign:()=>C,__rest:()=>F,__decorate:()=>j,__param:()=>d,__metadata:()=>m,__awaiter:()=>v,__generator:()=>N,__createBinding:()=>M,__exportStar:()=>L,__values:()=>X,__read:()=>H,__spread:()=>Q,__spreadArrays:()=>q,__await:()=>Y,__asyncGenerator:()=>le,__asyncDelegator:()=>B,__asyncValues:()=>z,__makeTemplateObject:()=>U,__importStar:()=>ee,__importDefault:()=>ge,__classPrivateFieldGet:()=>_e,__classPrivateFieldSet:()=>pe});var I=function(g,A){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,E){y.__proto__=E}||function(y,E){for(var D in E)E.hasOwnProperty(D)&&(y[D]=E[D])})(g,A)};function o(g,A){function y(){this.constructor=g}I(g,A),g.prototype=null===A?Object.create(A):(y.prototype=A.prototype,new y)}var C=function(){return C=Object.assign||function(A){for(var y,E=1,D=arguments.length;E<D;E++)for(var P in y=arguments[E])Object.prototype.hasOwnProperty.call(y,P)&&(A[P]=y[P]);return A},C.apply(this,arguments)};function F(g,A){var y={};for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&A.indexOf(E)<0&&(y[E]=g[E]);if(null!=g&&"function"==typeof Object.getOwnPropertySymbols){var D=0;for(E=Object.getOwnPropertySymbols(g);D<E.length;D++)A.indexOf(E[D])<0&&Object.prototype.propertyIsEnumerable.call(g,E[D])&&(y[E[D]]=g[E[D]])}return y}function j(g,A,y,E){var ne,D=arguments.length,P=D<3?A:null===E?E=Object.getOwnPropertyDescriptor(A,y):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)P=Reflect.decorate(g,A,y,E);else for(var fe=g.length-1;fe>=0;fe--)(ne=g[fe])&&(P=(D<3?ne(P):D>3?ne(A,y,P):ne(A,y))||P);return D>3&&P&&Object.defineProperty(A,y,P),P}function d(g,A){return function(y,E){A(y,E,g)}}function m(g,A){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(g,A)}function v(g,A,y,E){return new(y||(y=Promise))(function(P,ne){function fe(Ge){try{oe(E.next(Ge))}catch(at){ne(at)}}function Oe(Ge){try{oe(E.throw(Ge))}catch(at){ne(at)}}function oe(Ge){Ge.done?P(Ge.value):function D(P){return P instanceof y?P:new y(function(ne){ne(P)})}(Ge.value).then(fe,Oe)}oe((E=E.apply(g,A||[])).next())})}function N(g,A){var E,D,P,ne,y={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return ne={next:fe(0),throw:fe(1),return:fe(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function fe(oe){return function(Ge){return function Oe(oe){if(E)throw new TypeError("Generator is already executing.");for(;y;)try{if(E=1,D&&(P=2&oe[0]?D.return:oe[0]?D.throw||((P=D.return)&&P.call(D),0):D.next)&&!(P=P.call(D,oe[1])).done)return P;switch(D=0,P&&(oe=[2&oe[0],P.value]),oe[0]){case 0:case 1:P=oe;break;case 4:return y.label++,{value:oe[1],done:!1};case 5:y.label++,D=oe[1],oe=[0];continue;case 7:oe=y.ops.pop(),y.trys.pop();continue;default:if(!(P=(P=y.trys).length>0&&P[P.length-1])&&(6===oe[0]||2===oe[0])){y=0;continue}if(3===oe[0]&&(!P||oe[1]>P[0]&&oe[1]<P[3])){y.label=oe[1];break}if(6===oe[0]&&y.label<P[1]){y.label=P[1],P=oe;break}if(P&&y.label<P[2]){y.label=P[2],y.ops.push(oe);break}P[2]&&y.ops.pop(),y.trys.pop();continue}oe=A.call(g,y)}catch(Ge){oe=[6,Ge],D=0}finally{E=P=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([oe,Ge])}}}function M(g,A,y,E){void 0===E&&(E=y),g[E]=A[y]}function L(g,A){for(var y in g)"default"!==y&&!A.hasOwnProperty(y)&&(A[y]=g[y])}function X(g){var A="function"==typeof Symbol&&Symbol.iterator,y=A&&g[A],E=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&E>=g.length&&(g=void 0),{value:g&&g[E++],done:!g}}};throw new TypeError(A?"Object is not iterable.":"Symbol.iterator is not defined.")}function H(g,A){var y="function"==typeof Symbol&&g[Symbol.iterator];if(!y)return g;var D,ne,E=y.call(g),P=[];try{for(;(void 0===A||A-- >0)&&!(D=E.next()).done;)P.push(D.value)}catch(fe){ne={error:fe}}finally{try{D&&!D.done&&(y=E.return)&&y.call(E)}finally{if(ne)throw ne.error}}return P}function Q(){for(var g=[],A=0;A<arguments.length;A++)g=g.concat(H(arguments[A]));return g}function q(){for(var g=0,A=0,y=arguments.length;A<y;A++)g+=arguments[A].length;var E=Array(g),D=0;for(A=0;A<y;A++)for(var P=arguments[A],ne=0,fe=P.length;ne<fe;ne++,D++)E[D]=P[ne];return E}function Y(g){return this instanceof Y?(this.v=g,this):new Y(g)}function le(g,A,y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var D,E=y.apply(g,A||[]),P=[];return D={},ne("next"),ne("throw"),ne("return"),D[Symbol.asyncIterator]=function(){return this},D;function ne(Fe){E[Fe]&&(D[Fe]=function(We){return new Promise(function(Qe,ft){P.push([Fe,We,Qe,ft])>1||fe(Fe,We)})})}function fe(Fe,We){try{!function Oe(Fe){Fe.value instanceof Y?Promise.resolve(Fe.value.v).then(oe,Ge):at(P[0][2],Fe)}(E[Fe](We))}catch(Qe){at(P[0][3],Qe)}}function oe(Fe){fe("next",Fe)}function Ge(Fe){fe("throw",Fe)}function at(Fe,We){Fe(We),P.shift(),P.length&&fe(P[0][0],P[0][1])}}function B(g){var A,y;return A={},E("next"),E("throw",function(D){throw D}),E("return"),A[Symbol.iterator]=function(){return this},A;function E(D,P){A[D]=g[D]?function(ne){return(y=!y)?{value:Y(g[D](ne)),done:"return"===D}:P?P(ne):ne}:P}}function z(g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var y,A=g[Symbol.asyncIterator];return A?A.call(g):(g=X(g),y={},E("next"),E("throw"),E("return"),y[Symbol.asyncIterator]=function(){return this},y);function E(P){y[P]=g[P]&&function(ne){return new Promise(function(fe,Oe){!function D(P,ne,fe,Oe){Promise.resolve(Oe).then(function(oe){P({value:oe,done:fe})},ne)}(fe,Oe,(ne=g[P](ne)).done,ne.value)})}}}function U(g,A){return Object.defineProperty?Object.defineProperty(g,"raw",{value:A}):g.raw=A,g}function ee(g){if(g&&g.__esModule)return g;var A={};if(null!=g)for(var y in g)Object.hasOwnProperty.call(g,y)&&(A[y]=g[y]);return A.default=g,A}function ge(g){return g&&g.__esModule?g:{default:g}}function _e(g,A){if(!A.has(g))throw new TypeError("attempted to get private field on non-instance");return A.get(g)}function pe(g,A,y){if(!A.has(g))throw new TypeError("attempted to set private field on non-instance");return A.set(g,y),y}},3541:(we,O,x)=>{x.r(O),x.d(O,{__extends:()=>o,__assign:()=>C,__rest:()=>F,__decorate:()=>j,__param:()=>d,__metadata:()=>m,__awaiter:()=>v,__generator:()=>N,__createBinding:()=>M,__exportStar:()=>L,__values:()=>X,__read:()=>H,__spread:()=>Q,__spreadArrays:()=>q,__await:()=>Y,__asyncGenerator:()=>le,__asyncDelegator:()=>B,__asyncValues:()=>z,__makeTemplateObject:()=>U,__importStar:()=>ee,__importDefault:()=>ge,__classPrivateFieldGet:()=>_e,__classPrivateFieldSet:()=>pe});var I=function(g,A){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,E){y.__proto__=E}||function(y,E){for(var D in E)E.hasOwnProperty(D)&&(y[D]=E[D])})(g,A)};function o(g,A){function y(){this.constructor=g}I(g,A),g.prototype=null===A?Object.create(A):(y.prototype=A.prototype,new y)}var C=function(){return C=Object.assign||function(A){for(var y,E=1,D=arguments.length;E<D;E++)for(var P in y=arguments[E])Object.prototype.hasOwnProperty.call(y,P)&&(A[P]=y[P]);return A},C.apply(this,arguments)};function F(g,A){var y={};for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&A.indexOf(E)<0&&(y[E]=g[E]);if(null!=g&&"function"==typeof Object.getOwnPropertySymbols){var D=0;for(E=Object.getOwnPropertySymbols(g);D<E.length;D++)A.indexOf(E[D])<0&&Object.prototype.propertyIsEnumerable.call(g,E[D])&&(y[E[D]]=g[E[D]])}return y}function j(g,A,y,E){var ne,D=arguments.length,P=D<3?A:null===E?E=Object.getOwnPropertyDescriptor(A,y):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)P=Reflect.decorate(g,A,y,E);else for(var fe=g.length-1;fe>=0;fe--)(ne=g[fe])&&(P=(D<3?ne(P):D>3?ne(A,y,P):ne(A,y))||P);return D>3&&P&&Object.defineProperty(A,y,P),P}function d(g,A){return function(y,E){A(y,E,g)}}function m(g,A){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(g,A)}function v(g,A,y,E){return new(y||(y=Promise))(function(P,ne){function fe(Ge){try{oe(E.next(Ge))}catch(at){ne(at)}}function Oe(Ge){try{oe(E.throw(Ge))}catch(at){ne(at)}}function oe(Ge){Ge.done?P(Ge.value):function D(P){return P instanceof y?P:new y(function(ne){ne(P)})}(Ge.value).then(fe,Oe)}oe((E=E.apply(g,A||[])).next())})}function N(g,A){var E,D,P,ne,y={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return ne={next:fe(0),throw:fe(1),return:fe(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function fe(oe){return function(Ge){return function Oe(oe){if(E)throw new TypeError("Generator is already executing.");for(;y;)try{if(E=1,D&&(P=2&oe[0]?D.return:oe[0]?D.throw||((P=D.return)&&P.call(D),0):D.next)&&!(P=P.call(D,oe[1])).done)return P;switch(D=0,P&&(oe=[2&oe[0],P.value]),oe[0]){case 0:case 1:P=oe;break;case 4:return y.label++,{value:oe[1],done:!1};case 5:y.label++,D=oe[1],oe=[0];continue;case 7:oe=y.ops.pop(),y.trys.pop();continue;default:if(!(P=(P=y.trys).length>0&&P[P.length-1])&&(6===oe[0]||2===oe[0])){y=0;continue}if(3===oe[0]&&(!P||oe[1]>P[0]&&oe[1]<P[3])){y.label=oe[1];break}if(6===oe[0]&&y.label<P[1]){y.label=P[1],P=oe;break}if(P&&y.label<P[2]){y.label=P[2],y.ops.push(oe);break}P[2]&&y.ops.pop(),y.trys.pop();continue}oe=A.call(g,y)}catch(Ge){oe=[6,Ge],D=0}finally{E=P=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([oe,Ge])}}}function M(g,A,y,E){void 0===E&&(E=y),g[E]=A[y]}function L(g,A){for(var y in g)"default"!==y&&!A.hasOwnProperty(y)&&(A[y]=g[y])}function X(g){var A="function"==typeof Symbol&&Symbol.iterator,y=A&&g[A],E=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&E>=g.length&&(g=void 0),{value:g&&g[E++],done:!g}}};throw new TypeError(A?"Object is not iterable.":"Symbol.iterator is not defined.")}function H(g,A){var y="function"==typeof Symbol&&g[Symbol.iterator];if(!y)return g;var D,ne,E=y.call(g),P=[];try{for(;(void 0===A||A-- >0)&&!(D=E.next()).done;)P.push(D.value)}catch(fe){ne={error:fe}}finally{try{D&&!D.done&&(y=E.return)&&y.call(E)}finally{if(ne)throw ne.error}}return P}function Q(){for(var g=[],A=0;A<arguments.length;A++)g=g.concat(H(arguments[A]));return g}function q(){for(var g=0,A=0,y=arguments.length;A<y;A++)g+=arguments[A].length;var E=Array(g),D=0;for(A=0;A<y;A++)for(var P=arguments[A],ne=0,fe=P.length;ne<fe;ne++,D++)E[D]=P[ne];return E}function Y(g){return this instanceof Y?(this.v=g,this):new Y(g)}function le(g,A,y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var D,E=y.apply(g,A||[]),P=[];return D={},ne("next"),ne("throw"),ne("return"),D[Symbol.asyncIterator]=function(){return this},D;function ne(Fe){E[Fe]&&(D[Fe]=function(We){return new Promise(function(Qe,ft){P.push([Fe,We,Qe,ft])>1||fe(Fe,We)})})}function fe(Fe,We){try{!function Oe(Fe){Fe.value instanceof Y?Promise.resolve(Fe.value.v).then(oe,Ge):at(P[0][2],Fe)}(E[Fe](We))}catch(Qe){at(P[0][3],Qe)}}function oe(Fe){fe("next",Fe)}function Ge(Fe){fe("throw",Fe)}function at(Fe,We){Fe(We),P.shift(),P.length&&fe(P[0][0],P[0][1])}}function B(g){var A,y;return A={},E("next"),E("throw",function(D){throw D}),E("return"),A[Symbol.iterator]=function(){return this},A;function E(D,P){A[D]=g[D]?function(ne){return(y=!y)?{value:Y(g[D](ne)),done:"return"===D}:P?P(ne):ne}:P}}function z(g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var y,A=g[Symbol.asyncIterator];return A?A.call(g):(g=X(g),y={},E("next"),E("throw"),E("return"),y[Symbol.asyncIterator]=function(){return this},y);function E(P){y[P]=g[P]&&function(ne){return new Promise(function(fe,Oe){!function D(P,ne,fe,Oe){Promise.resolve(Oe).then(function(oe){P({value:oe,done:fe})},ne)}(fe,Oe,(ne=g[P](ne)).done,ne.value)})}}}function U(g,A){return Object.defineProperty?Object.defineProperty(g,"raw",{value:A}):g.raw=A,g}function ee(g){if(g&&g.__esModule)return g;var A={};if(null!=g)for(var y in g)Object.hasOwnProperty.call(g,y)&&(A[y]=g[y]);return A.default=g,A}function ge(g){return g&&g.__esModule?g:{default:g}}function _e(g,A){if(!A.has(g))throw new TypeError("attempted to get private field on non-instance");return A.get(g)}function pe(g,A,y){if(!A.has(g))throw new TypeError("attempted to set private field on non-instance");return A.set(g,y),y}},1942:(we,O,x)=>{x.r(O),x.d(O,{__extends:()=>o,__assign:()=>C,__rest:()=>F,__decorate:()=>j,__param:()=>d,__metadata:()=>m,__awaiter:()=>v,__generator:()=>N,__createBinding:()=>M,__exportStar:()=>L,__values:()=>X,__read:()=>H,__spread:()=>Q,__spreadArrays:()=>q,__await:()=>Y,__asyncGenerator:()=>le,__asyncDelegator:()=>B,__asyncValues:()=>z,__makeTemplateObject:()=>U,__importStar:()=>ee,__importDefault:()=>ge,__classPrivateFieldGet:()=>_e,__classPrivateFieldSet:()=>pe});var I=function(g,A){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,E){y.__proto__=E}||function(y,E){for(var D in E)E.hasOwnProperty(D)&&(y[D]=E[D])})(g,A)};function o(g,A){function y(){this.constructor=g}I(g,A),g.prototype=null===A?Object.create(A):(y.prototype=A.prototype,new y)}var C=function(){return C=Object.assign||function(A){for(var y,E=1,D=arguments.length;E<D;E++)for(var P in y=arguments[E])Object.prototype.hasOwnProperty.call(y,P)&&(A[P]=y[P]);return A},C.apply(this,arguments)};function F(g,A){var y={};for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&A.indexOf(E)<0&&(y[E]=g[E]);if(null!=g&&"function"==typeof Object.getOwnPropertySymbols){var D=0;for(E=Object.getOwnPropertySymbols(g);D<E.length;D++)A.indexOf(E[D])<0&&Object.prototype.propertyIsEnumerable.call(g,E[D])&&(y[E[D]]=g[E[D]])}return y}function j(g,A,y,E){var ne,D=arguments.length,P=D<3?A:null===E?E=Object.getOwnPropertyDescriptor(A,y):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)P=Reflect.decorate(g,A,y,E);else for(var fe=g.length-1;fe>=0;fe--)(ne=g[fe])&&(P=(D<3?ne(P):D>3?ne(A,y,P):ne(A,y))||P);return D>3&&P&&Object.defineProperty(A,y,P),P}function d(g,A){return function(y,E){A(y,E,g)}}function m(g,A){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(g,A)}function v(g,A,y,E){return new(y||(y=Promise))(function(P,ne){function fe(Ge){try{oe(E.next(Ge))}catch(at){ne(at)}}function Oe(Ge){try{oe(E.throw(Ge))}catch(at){ne(at)}}function oe(Ge){Ge.done?P(Ge.value):function D(P){return P instanceof y?P:new y(function(ne){ne(P)})}(Ge.value).then(fe,Oe)}oe((E=E.apply(g,A||[])).next())})}function N(g,A){var E,D,P,ne,y={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return ne={next:fe(0),throw:fe(1),return:fe(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function fe(oe){return function(Ge){return function Oe(oe){if(E)throw new TypeError("Generator is already executing.");for(;y;)try{if(E=1,D&&(P=2&oe[0]?D.return:oe[0]?D.throw||((P=D.return)&&P.call(D),0):D.next)&&!(P=P.call(D,oe[1])).done)return P;switch(D=0,P&&(oe=[2&oe[0],P.value]),oe[0]){case 0:case 1:P=oe;break;case 4:return y.label++,{value:oe[1],done:!1};case 5:y.label++,D=oe[1],oe=[0];continue;case 7:oe=y.ops.pop(),y.trys.pop();continue;default:if(!(P=(P=y.trys).length>0&&P[P.length-1])&&(6===oe[0]||2===oe[0])){y=0;continue}if(3===oe[0]&&(!P||oe[1]>P[0]&&oe[1]<P[3])){y.label=oe[1];break}if(6===oe[0]&&y.label<P[1]){y.label=P[1],P=oe;break}if(P&&y.label<P[2]){y.label=P[2],y.ops.push(oe);break}P[2]&&y.ops.pop(),y.trys.pop();continue}oe=A.call(g,y)}catch(Ge){oe=[6,Ge],D=0}finally{E=P=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([oe,Ge])}}}function M(g,A,y,E){void 0===E&&(E=y),g[E]=A[y]}function L(g,A){for(var y in g)"default"!==y&&!A.hasOwnProperty(y)&&(A[y]=g[y])}function X(g){var A="function"==typeof Symbol&&Symbol.iterator,y=A&&g[A],E=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&E>=g.length&&(g=void 0),{value:g&&g[E++],done:!g}}};throw new TypeError(A?"Object is not iterable.":"Symbol.iterator is not defined.")}function H(g,A){var y="function"==typeof Symbol&&g[Symbol.iterator];if(!y)return g;var D,ne,E=y.call(g),P=[];try{for(;(void 0===A||A-- >0)&&!(D=E.next()).done;)P.push(D.value)}catch(fe){ne={error:fe}}finally{try{D&&!D.done&&(y=E.return)&&y.call(E)}finally{if(ne)throw ne.error}}return P}function Q(){for(var g=[],A=0;A<arguments.length;A++)g=g.concat(H(arguments[A]));return g}function q(){for(var g=0,A=0,y=arguments.length;A<y;A++)g+=arguments[A].length;var E=Array(g),D=0;for(A=0;A<y;A++)for(var P=arguments[A],ne=0,fe=P.length;ne<fe;ne++,D++)E[D]=P[ne];return E}function Y(g){return this instanceof Y?(this.v=g,this):new Y(g)}function le(g,A,y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var D,E=y.apply(g,A||[]),P=[];return D={},ne("next"),ne("throw"),ne("return"),D[Symbol.asyncIterator]=function(){return this},D;function ne(Fe){E[Fe]&&(D[Fe]=function(We){return new Promise(function(Qe,ft){P.push([Fe,We,Qe,ft])>1||fe(Fe,We)})})}function fe(Fe,We){try{!function Oe(Fe){Fe.value instanceof Y?Promise.resolve(Fe.value.v).then(oe,Ge):at(P[0][2],Fe)}(E[Fe](We))}catch(Qe){at(P[0][3],Qe)}}function oe(Fe){fe("next",Fe)}function Ge(Fe){fe("throw",Fe)}function at(Fe,We){Fe(We),P.shift(),P.length&&fe(P[0][0],P[0][1])}}function B(g){var A,y;return A={},E("next"),E("throw",function(D){throw D}),E("return"),A[Symbol.iterator]=function(){return this},A;function E(D,P){A[D]=g[D]?function(ne){return(y=!y)?{value:Y(g[D](ne)),done:"return"===D}:P?P(ne):ne}:P}}function z(g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var y,A=g[Symbol.asyncIterator];return A?A.call(g):(g=X(g),y={},E("next"),E("throw"),E("return"),y[Symbol.asyncIterator]=function(){return this},y);function E(P){y[P]=g[P]&&function(ne){return new Promise(function(fe,Oe){!function D(P,ne,fe,Oe){Promise.resolve(Oe).then(function(oe){P({value:oe,done:fe})},ne)}(fe,Oe,(ne=g[P](ne)).done,ne.value)})}}}function U(g,A){return Object.defineProperty?Object.defineProperty(g,"raw",{value:A}):g.raw=A,g}function ee(g){if(g&&g.__esModule)return g;var A={};if(null!=g)for(var y in g)Object.hasOwnProperty.call(g,y)&&(A[y]=g[y]);return A.default=g,A}function ge(g){return g&&g.__esModule?g:{default:g}}function _e(g,A){if(!A.has(g))throw new TypeError("attempted to get private field on non-instance");return A.get(g)}function pe(g,A,y){if(!A.has(g))throw new TypeError("attempted to set private field on non-instance");return A.set(g,y),y}},4948:(we,O,x)=>{x.r(O),x.d(O,{__extends:()=>o,__assign:()=>C,__rest:()=>F,__decorate:()=>j,__param:()=>d,__metadata:()=>m,__awaiter:()=>v,__generator:()=>N,__createBinding:()=>M,__exportStar:()=>L,__values:()=>X,__read:()=>H,__spread:()=>Q,__spreadArrays:()=>q,__await:()=>Y,__asyncGenerator:()=>le,__asyncDelegator:()=>B,__asyncValues:()=>z,__makeTemplateObject:()=>U,__importStar:()=>ee,__importDefault:()=>ge,__classPrivateFieldGet:()=>_e,__classPrivateFieldSet:()=>pe});var I=function(g,A){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,E){y.__proto__=E}||function(y,E){for(var D in E)E.hasOwnProperty(D)&&(y[D]=E[D])})(g,A)};function o(g,A){function y(){this.constructor=g}I(g,A),g.prototype=null===A?Object.create(A):(y.prototype=A.prototype,new y)}var C=function(){return C=Object.assign||function(A){for(var y,E=1,D=arguments.length;E<D;E++)for(var P in y=arguments[E])Object.prototype.hasOwnProperty.call(y,P)&&(A[P]=y[P]);return A},C.apply(this,arguments)};function F(g,A){var y={};for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&A.indexOf(E)<0&&(y[E]=g[E]);if(null!=g&&"function"==typeof Object.getOwnPropertySymbols){var D=0;for(E=Object.getOwnPropertySymbols(g);D<E.length;D++)A.indexOf(E[D])<0&&Object.prototype.propertyIsEnumerable.call(g,E[D])&&(y[E[D]]=g[E[D]])}return y}function j(g,A,y,E){var ne,D=arguments.length,P=D<3?A:null===E?E=Object.getOwnPropertyDescriptor(A,y):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)P=Reflect.decorate(g,A,y,E);else for(var fe=g.length-1;fe>=0;fe--)(ne=g[fe])&&(P=(D<3?ne(P):D>3?ne(A,y,P):ne(A,y))||P);return D>3&&P&&Object.defineProperty(A,y,P),P}function d(g,A){return function(y,E){A(y,E,g)}}function m(g,A){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(g,A)}function v(g,A,y,E){return new(y||(y=Promise))(function(P,ne){function fe(Ge){try{oe(E.next(Ge))}catch(at){ne(at)}}function Oe(Ge){try{oe(E.throw(Ge))}catch(at){ne(at)}}function oe(Ge){Ge.done?P(Ge.value):function D(P){return P instanceof y?P:new y(function(ne){ne(P)})}(Ge.value).then(fe,Oe)}oe((E=E.apply(g,A||[])).next())})}function N(g,A){var E,D,P,ne,y={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return ne={next:fe(0),throw:fe(1),return:fe(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function fe(oe){return function(Ge){return function Oe(oe){if(E)throw new TypeError("Generator is already executing.");for(;y;)try{if(E=1,D&&(P=2&oe[0]?D.return:oe[0]?D.throw||((P=D.return)&&P.call(D),0):D.next)&&!(P=P.call(D,oe[1])).done)return P;switch(D=0,P&&(oe=[2&oe[0],P.value]),oe[0]){case 0:case 1:P=oe;break;case 4:return y.label++,{value:oe[1],done:!1};case 5:y.label++,D=oe[1],oe=[0];continue;case 7:oe=y.ops.pop(),y.trys.pop();continue;default:if(!(P=(P=y.trys).length>0&&P[P.length-1])&&(6===oe[0]||2===oe[0])){y=0;continue}if(3===oe[0]&&(!P||oe[1]>P[0]&&oe[1]<P[3])){y.label=oe[1];break}if(6===oe[0]&&y.label<P[1]){y.label=P[1],P=oe;break}if(P&&y.label<P[2]){y.label=P[2],y.ops.push(oe);break}P[2]&&y.ops.pop(),y.trys.pop();continue}oe=A.call(g,y)}catch(Ge){oe=[6,Ge],D=0}finally{E=P=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([oe,Ge])}}}function M(g,A,y,E){void 0===E&&(E=y),g[E]=A[y]}function L(g,A){for(var y in g)"default"!==y&&!A.hasOwnProperty(y)&&(A[y]=g[y])}function X(g){var A="function"==typeof Symbol&&Symbol.iterator,y=A&&g[A],E=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&E>=g.length&&(g=void 0),{value:g&&g[E++],done:!g}}};throw new TypeError(A?"Object is not iterable.":"Symbol.iterator is not defined.")}function H(g,A){var y="function"==typeof Symbol&&g[Symbol.iterator];if(!y)return g;var D,ne,E=y.call(g),P=[];try{for(;(void 0===A||A-- >0)&&!(D=E.next()).done;)P.push(D.value)}catch(fe){ne={error:fe}}finally{try{D&&!D.done&&(y=E.return)&&y.call(E)}finally{if(ne)throw ne.error}}return P}function Q(){for(var g=[],A=0;A<arguments.length;A++)g=g.concat(H(arguments[A]));return g}function q(){for(var g=0,A=0,y=arguments.length;A<y;A++)g+=arguments[A].length;var E=Array(g),D=0;for(A=0;A<y;A++)for(var P=arguments[A],ne=0,fe=P.length;ne<fe;ne++,D++)E[D]=P[ne];return E}function Y(g){return this instanceof Y?(this.v=g,this):new Y(g)}function le(g,A,y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var D,E=y.apply(g,A||[]),P=[];return D={},ne("next"),ne("throw"),ne("return"),D[Symbol.asyncIterator]=function(){return this},D;function ne(Fe){E[Fe]&&(D[Fe]=function(We){return new Promise(function(Qe,ft){P.push([Fe,We,Qe,ft])>1||fe(Fe,We)})})}function fe(Fe,We){try{!function Oe(Fe){Fe.value instanceof Y?Promise.resolve(Fe.value.v).then(oe,Ge):at(P[0][2],Fe)}(E[Fe](We))}catch(Qe){at(P[0][3],Qe)}}function oe(Fe){fe("next",Fe)}function Ge(Fe){fe("throw",Fe)}function at(Fe,We){Fe(We),P.shift(),P.length&&fe(P[0][0],P[0][1])}}function B(g){var A,y;return A={},E("next"),E("throw",function(D){throw D}),E("return"),A[Symbol.iterator]=function(){return this},A;function E(D,P){A[D]=g[D]?function(ne){return(y=!y)?{value:Y(g[D](ne)),done:"return"===D}:P?P(ne):ne}:P}}function z(g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var y,A=g[Symbol.asyncIterator];return A?A.call(g):(g=X(g),y={},E("next"),E("throw"),E("return"),y[Symbol.asyncIterator]=function(){return this},y);function E(P){y[P]=g[P]&&function(ne){return new Promise(function(fe,Oe){!function D(P,ne,fe,Oe){Promise.resolve(Oe).then(function(oe){P({value:oe,done:fe})},ne)}(fe,Oe,(ne=g[P](ne)).done,ne.value)})}}}function U(g,A){return Object.defineProperty?Object.defineProperty(g,"raw",{value:A}):g.raw=A,g}function ee(g){if(g&&g.__esModule)return g;var A={};if(null!=g)for(var y in g)Object.hasOwnProperty.call(g,y)&&(A[y]=g[y]);return A.default=g,A}function ge(g){return g&&g.__esModule?g:{default:g}}function _e(g,A){if(!A.has(g))throw new TypeError("attempted to get private field on non-instance");return A.get(g)}function pe(g,A,y){if(!A.has(g))throw new TypeError("attempted to set private field on non-instance");return A.set(g,y),y}},3917:(we,O,x)=>{x.r(O),x.d(O,{__extends:()=>o,__assign:()=>C,__rest:()=>F,__decorate:()=>j,__param:()=>d,__metadata:()=>m,__awaiter:()=>v,__generator:()=>N,__createBinding:()=>M,__exportStar:()=>L,__values:()=>X,__read:()=>H,__spread:()=>Q,__spreadArrays:()=>q,__await:()=>Y,__asyncGenerator:()=>le,__asyncDelegator:()=>B,__asyncValues:()=>z,__makeTemplateObject:()=>U,__importStar:()=>ee,__importDefault:()=>ge,__classPrivateFieldGet:()=>_e,__classPrivateFieldSet:()=>pe});var I=function(g,A){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,E){y.__proto__=E}||function(y,E){for(var D in E)E.hasOwnProperty(D)&&(y[D]=E[D])})(g,A)};function o(g,A){function y(){this.constructor=g}I(g,A),g.prototype=null===A?Object.create(A):(y.prototype=A.prototype,new y)}var C=function(){return C=Object.assign||function(A){for(var y,E=1,D=arguments.length;E<D;E++)for(var P in y=arguments[E])Object.prototype.hasOwnProperty.call(y,P)&&(A[P]=y[P]);return A},C.apply(this,arguments)};function F(g,A){var y={};for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&A.indexOf(E)<0&&(y[E]=g[E]);if(null!=g&&"function"==typeof Object.getOwnPropertySymbols){var D=0;for(E=Object.getOwnPropertySymbols(g);D<E.length;D++)A.indexOf(E[D])<0&&Object.prototype.propertyIsEnumerable.call(g,E[D])&&(y[E[D]]=g[E[D]])}return y}function j(g,A,y,E){var ne,D=arguments.length,P=D<3?A:null===E?E=Object.getOwnPropertyDescriptor(A,y):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)P=Reflect.decorate(g,A,y,E);else for(var fe=g.length-1;fe>=0;fe--)(ne=g[fe])&&(P=(D<3?ne(P):D>3?ne(A,y,P):ne(A,y))||P);return D>3&&P&&Object.defineProperty(A,y,P),P}function d(g,A){return function(y,E){A(y,E,g)}}function m(g,A){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(g,A)}function v(g,A,y,E){return new(y||(y=Promise))(function(P,ne){function fe(Ge){try{oe(E.next(Ge))}catch(at){ne(at)}}function Oe(Ge){try{oe(E.throw(Ge))}catch(at){ne(at)}}function oe(Ge){Ge.done?P(Ge.value):function D(P){return P instanceof y?P:new y(function(ne){ne(P)})}(Ge.value).then(fe,Oe)}oe((E=E.apply(g,A||[])).next())})}function N(g,A){var E,D,P,ne,y={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return ne={next:fe(0),throw:fe(1),return:fe(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function fe(oe){return function(Ge){return function Oe(oe){if(E)throw new TypeError("Generator is already executing.");for(;y;)try{if(E=1,D&&(P=2&oe[0]?D.return:oe[0]?D.throw||((P=D.return)&&P.call(D),0):D.next)&&!(P=P.call(D,oe[1])).done)return P;switch(D=0,P&&(oe=[2&oe[0],P.value]),oe[0]){case 0:case 1:P=oe;break;case 4:return y.label++,{value:oe[1],done:!1};case 5:y.label++,D=oe[1],oe=[0];continue;case 7:oe=y.ops.pop(),y.trys.pop();continue;default:if(!(P=(P=y.trys).length>0&&P[P.length-1])&&(6===oe[0]||2===oe[0])){y=0;continue}if(3===oe[0]&&(!P||oe[1]>P[0]&&oe[1]<P[3])){y.label=oe[1];break}if(6===oe[0]&&y.label<P[1]){y.label=P[1],P=oe;break}if(P&&y.label<P[2]){y.label=P[2],y.ops.push(oe);break}P[2]&&y.ops.pop(),y.trys.pop();continue}oe=A.call(g,y)}catch(Ge){oe=[6,Ge],D=0}finally{E=P=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([oe,Ge])}}}function M(g,A,y,E){void 0===E&&(E=y),g[E]=A[y]}function L(g,A){for(var y in g)"default"!==y&&!A.hasOwnProperty(y)&&(A[y]=g[y])}function X(g){var A="function"==typeof Symbol&&Symbol.iterator,y=A&&g[A],E=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&E>=g.length&&(g=void 0),{value:g&&g[E++],done:!g}}};throw new TypeError(A?"Object is not iterable.":"Symbol.iterator is not defined.")}function H(g,A){var y="function"==typeof Symbol&&g[Symbol.iterator];if(!y)return g;var D,ne,E=y.call(g),P=[];try{for(;(void 0===A||A-- >0)&&!(D=E.next()).done;)P.push(D.value)}catch(fe){ne={error:fe}}finally{try{D&&!D.done&&(y=E.return)&&y.call(E)}finally{if(ne)throw ne.error}}return P}function Q(){for(var g=[],A=0;A<arguments.length;A++)g=g.concat(H(arguments[A]));return g}function q(){for(var g=0,A=0,y=arguments.length;A<y;A++)g+=arguments[A].length;var E=Array(g),D=0;for(A=0;A<y;A++)for(var P=arguments[A],ne=0,fe=P.length;ne<fe;ne++,D++)E[D]=P[ne];return E}function Y(g){return this instanceof Y?(this.v=g,this):new Y(g)}function le(g,A,y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var D,E=y.apply(g,A||[]),P=[];return D={},ne("next"),ne("throw"),ne("return"),D[Symbol.asyncIterator]=function(){return this},D;function ne(Fe){E[Fe]&&(D[Fe]=function(We){return new Promise(function(Qe,ft){P.push([Fe,We,Qe,ft])>1||fe(Fe,We)})})}function fe(Fe,We){try{!function Oe(Fe){Fe.value instanceof Y?Promise.resolve(Fe.value.v).then(oe,Ge):at(P[0][2],Fe)}(E[Fe](We))}catch(Qe){at(P[0][3],Qe)}}function oe(Fe){fe("next",Fe)}function Ge(Fe){fe("throw",Fe)}function at(Fe,We){Fe(We),P.shift(),P.length&&fe(P[0][0],P[0][1])}}function B(g){var A,y;return A={},E("next"),E("throw",function(D){throw D}),E("return"),A[Symbol.iterator]=function(){return this},A;function E(D,P){A[D]=g[D]?function(ne){return(y=!y)?{value:Y(g[D](ne)),done:"return"===D}:P?P(ne):ne}:P}}function z(g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var y,A=g[Symbol.asyncIterator];return A?A.call(g):(g=X(g),y={},E("next"),E("throw"),E("return"),y[Symbol.asyncIterator]=function(){return this},y);function E(P){y[P]=g[P]&&function(ne){return new Promise(function(fe,Oe){!function D(P,ne,fe,Oe){Promise.resolve(Oe).then(function(oe){P({value:oe,done:fe})},ne)}(fe,Oe,(ne=g[P](ne)).done,ne.value)})}}}function U(g,A){return Object.defineProperty?Object.defineProperty(g,"raw",{value:A}):g.raw=A,g}function ee(g){if(g&&g.__esModule)return g;var A={};if(null!=g)for(var y in g)Object.hasOwnProperty.call(g,y)&&(A[y]=g[y]);return A.default=g,A}function ge(g){return g&&g.__esModule?g:{default:g}}function _e(g,A){if(!A.has(g))throw new TypeError("attempted to get private field on non-instance");return A.get(g)}function pe(g,A,y){if(!A.has(g))throw new TypeError("attempted to set private field on non-instance");return A.set(g,y),y}},5497:(we,O,x)=>{x.r(O),x.d(O,{__extends:()=>o,__assign:()=>C,__rest:()=>F,__decorate:()=>j,__param:()=>d,__metadata:()=>m,__awaiter:()=>v,__generator:()=>N,__createBinding:()=>M,__exportStar:()=>L,__values:()=>X,__read:()=>H,__spread:()=>Q,__spreadArrays:()=>q,__await:()=>Y,__asyncGenerator:()=>le,__asyncDelegator:()=>B,__asyncValues:()=>z,__makeTemplateObject:()=>U,__importStar:()=>ee,__importDefault:()=>ge,__classPrivateFieldGet:()=>_e,__classPrivateFieldSet:()=>pe});var I=function(g,A){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,E){y.__proto__=E}||function(y,E){for(var D in E)E.hasOwnProperty(D)&&(y[D]=E[D])})(g,A)};function o(g,A){function y(){this.constructor=g}I(g,A),g.prototype=null===A?Object.create(A):(y.prototype=A.prototype,new y)}var C=function(){return C=Object.assign||function(A){for(var y,E=1,D=arguments.length;E<D;E++)for(var P in y=arguments[E])Object.prototype.hasOwnProperty.call(y,P)&&(A[P]=y[P]);return A},C.apply(this,arguments)};function F(g,A){var y={};for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&A.indexOf(E)<0&&(y[E]=g[E]);if(null!=g&&"function"==typeof Object.getOwnPropertySymbols){var D=0;for(E=Object.getOwnPropertySymbols(g);D<E.length;D++)A.indexOf(E[D])<0&&Object.prototype.propertyIsEnumerable.call(g,E[D])&&(y[E[D]]=g[E[D]])}return y}function j(g,A,y,E){var ne,D=arguments.length,P=D<3?A:null===E?E=Object.getOwnPropertyDescriptor(A,y):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)P=Reflect.decorate(g,A,y,E);else for(var fe=g.length-1;fe>=0;fe--)(ne=g[fe])&&(P=(D<3?ne(P):D>3?ne(A,y,P):ne(A,y))||P);return D>3&&P&&Object.defineProperty(A,y,P),P}function d(g,A){return function(y,E){A(y,E,g)}}function m(g,A){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(g,A)}function v(g,A,y,E){return new(y||(y=Promise))(function(P,ne){function fe(Ge){try{oe(E.next(Ge))}catch(at){ne(at)}}function Oe(Ge){try{oe(E.throw(Ge))}catch(at){ne(at)}}function oe(Ge){Ge.done?P(Ge.value):function D(P){return P instanceof y?P:new y(function(ne){ne(P)})}(Ge.value).then(fe,Oe)}oe((E=E.apply(g,A||[])).next())})}function N(g,A){var E,D,P,ne,y={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return ne={next:fe(0),throw:fe(1),return:fe(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function fe(oe){return function(Ge){return function Oe(oe){if(E)throw new TypeError("Generator is already executing.");for(;y;)try{if(E=1,D&&(P=2&oe[0]?D.return:oe[0]?D.throw||((P=D.return)&&P.call(D),0):D.next)&&!(P=P.call(D,oe[1])).done)return P;switch(D=0,P&&(oe=[2&oe[0],P.value]),oe[0]){case 0:case 1:P=oe;break;case 4:return y.label++,{value:oe[1],done:!1};case 5:y.label++,D=oe[1],oe=[0];continue;case 7:oe=y.ops.pop(),y.trys.pop();continue;default:if(!(P=(P=y.trys).length>0&&P[P.length-1])&&(6===oe[0]||2===oe[0])){y=0;continue}if(3===oe[0]&&(!P||oe[1]>P[0]&&oe[1]<P[3])){y.label=oe[1];break}if(6===oe[0]&&y.label<P[1]){y.label=P[1],P=oe;break}if(P&&y.label<P[2]){y.label=P[2],y.ops.push(oe);break}P[2]&&y.ops.pop(),y.trys.pop();continue}oe=A.call(g,y)}catch(Ge){oe=[6,Ge],D=0}finally{E=P=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([oe,Ge])}}}function M(g,A,y,E){void 0===E&&(E=y),g[E]=A[y]}function L(g,A){for(var y in g)"default"!==y&&!A.hasOwnProperty(y)&&(A[y]=g[y])}function X(g){var A="function"==typeof Symbol&&Symbol.iterator,y=A&&g[A],E=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&E>=g.length&&(g=void 0),{value:g&&g[E++],done:!g}}};throw new TypeError(A?"Object is not iterable.":"Symbol.iterator is not defined.")}function H(g,A){var y="function"==typeof Symbol&&g[Symbol.iterator];if(!y)return g;var D,ne,E=y.call(g),P=[];try{for(;(void 0===A||A-- >0)&&!(D=E.next()).done;)P.push(D.value)}catch(fe){ne={error:fe}}finally{try{D&&!D.done&&(y=E.return)&&y.call(E)}finally{if(ne)throw ne.error}}return P}function Q(){for(var g=[],A=0;A<arguments.length;A++)g=g.concat(H(arguments[A]));return g}function q(){for(var g=0,A=0,y=arguments.length;A<y;A++)g+=arguments[A].length;var E=Array(g),D=0;for(A=0;A<y;A++)for(var P=arguments[A],ne=0,fe=P.length;ne<fe;ne++,D++)E[D]=P[ne];return E}function Y(g){return this instanceof Y?(this.v=g,this):new Y(g)}function le(g,A,y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var D,E=y.apply(g,A||[]),P=[];return D={},ne("next"),ne("throw"),ne("return"),D[Symbol.asyncIterator]=function(){return this},D;function ne(Fe){E[Fe]&&(D[Fe]=function(We){return new Promise(function(Qe,ft){P.push([Fe,We,Qe,ft])>1||fe(Fe,We)})})}function fe(Fe,We){try{!function Oe(Fe){Fe.value instanceof Y?Promise.resolve(Fe.value.v).then(oe,Ge):at(P[0][2],Fe)}(E[Fe](We))}catch(Qe){at(P[0][3],Qe)}}function oe(Fe){fe("next",Fe)}function Ge(Fe){fe("throw",Fe)}function at(Fe,We){Fe(We),P.shift(),P.length&&fe(P[0][0],P[0][1])}}function B(g){var A,y;return A={},E("next"),E("throw",function(D){throw D}),E("return"),A[Symbol.iterator]=function(){return this},A;function E(D,P){A[D]=g[D]?function(ne){return(y=!y)?{value:Y(g[D](ne)),done:"return"===D}:P?P(ne):ne}:P}}function z(g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var y,A=g[Symbol.asyncIterator];return A?A.call(g):(g=X(g),y={},E("next"),E("throw"),E("return"),y[Symbol.asyncIterator]=function(){return this},y);function E(P){y[P]=g[P]&&function(ne){return new Promise(function(fe,Oe){!function D(P,ne,fe,Oe){Promise.resolve(Oe).then(function(oe){P({value:oe,done:fe})},ne)}(fe,Oe,(ne=g[P](ne)).done,ne.value)})}}}function U(g,A){return Object.defineProperty?Object.defineProperty(g,"raw",{value:A}):g.raw=A,g}function ee(g){if(g&&g.__esModule)return g;var A={};if(null!=g)for(var y in g)Object.hasOwnProperty.call(g,y)&&(A[y]=g[y]);return A.default=g,A}function ge(g){return g&&g.__esModule?g:{default:g}}function _e(g,A){if(!A.has(g))throw new TypeError("attempted to get private field on non-instance");return A.get(g)}function pe(g,A,y){if(!A.has(g))throw new TypeError("attempted to set private field on non-instance");return A.set(g,y),y}},3705:(we,O,x)=>{x.r(O),x.d(O,{__extends:()=>o,__assign:()=>C,__rest:()=>F,__decorate:()=>j,__param:()=>d,__metadata:()=>m,__awaiter:()=>v,__generator:()=>N,__createBinding:()=>M,__exportStar:()=>L,__values:()=>X,__read:()=>H,__spread:()=>Q,__spreadArrays:()=>q,__await:()=>Y,__asyncGenerator:()=>le,__asyncDelegator:()=>B,__asyncValues:()=>z,__makeTemplateObject:()=>U,__importStar:()=>ee,__importDefault:()=>ge,__classPrivateFieldGet:()=>_e,__classPrivateFieldSet:()=>pe});var I=function(g,A){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,E){y.__proto__=E}||function(y,E){for(var D in E)E.hasOwnProperty(D)&&(y[D]=E[D])})(g,A)};function o(g,A){function y(){this.constructor=g}I(g,A),g.prototype=null===A?Object.create(A):(y.prototype=A.prototype,new y)}var C=function(){return C=Object.assign||function(A){for(var y,E=1,D=arguments.length;E<D;E++)for(var P in y=arguments[E])Object.prototype.hasOwnProperty.call(y,P)&&(A[P]=y[P]);return A},C.apply(this,arguments)};function F(g,A){var y={};for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&A.indexOf(E)<0&&(y[E]=g[E]);if(null!=g&&"function"==typeof Object.getOwnPropertySymbols){var D=0;for(E=Object.getOwnPropertySymbols(g);D<E.length;D++)A.indexOf(E[D])<0&&Object.prototype.propertyIsEnumerable.call(g,E[D])&&(y[E[D]]=g[E[D]])}return y}function j(g,A,y,E){var ne,D=arguments.length,P=D<3?A:null===E?E=Object.getOwnPropertyDescriptor(A,y):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)P=Reflect.decorate(g,A,y,E);else for(var fe=g.length-1;fe>=0;fe--)(ne=g[fe])&&(P=(D<3?ne(P):D>3?ne(A,y,P):ne(A,y))||P);return D>3&&P&&Object.defineProperty(A,y,P),P}function d(g,A){return function(y,E){A(y,E,g)}}function m(g,A){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(g,A)}function v(g,A,y,E){return new(y||(y=Promise))(function(P,ne){function fe(Ge){try{oe(E.next(Ge))}catch(at){ne(at)}}function Oe(Ge){try{oe(E.throw(Ge))}catch(at){ne(at)}}function oe(Ge){Ge.done?P(Ge.value):function D(P){return P instanceof y?P:new y(function(ne){ne(P)})}(Ge.value).then(fe,Oe)}oe((E=E.apply(g,A||[])).next())})}function N(g,A){var E,D,P,ne,y={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return ne={next:fe(0),throw:fe(1),return:fe(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function fe(oe){return function(Ge){return function Oe(oe){if(E)throw new TypeError("Generator is already executing.");for(;y;)try{if(E=1,D&&(P=2&oe[0]?D.return:oe[0]?D.throw||((P=D.return)&&P.call(D),0):D.next)&&!(P=P.call(D,oe[1])).done)return P;switch(D=0,P&&(oe=[2&oe[0],P.value]),oe[0]){case 0:case 1:P=oe;break;case 4:return y.label++,{value:oe[1],done:!1};case 5:y.label++,D=oe[1],oe=[0];continue;case 7:oe=y.ops.pop(),y.trys.pop();continue;default:if(!(P=(P=y.trys).length>0&&P[P.length-1])&&(6===oe[0]||2===oe[0])){y=0;continue}if(3===oe[0]&&(!P||oe[1]>P[0]&&oe[1]<P[3])){y.label=oe[1];break}if(6===oe[0]&&y.label<P[1]){y.label=P[1],P=oe;break}if(P&&y.label<P[2]){y.label=P[2],y.ops.push(oe);break}P[2]&&y.ops.pop(),y.trys.pop();continue}oe=A.call(g,y)}catch(Ge){oe=[6,Ge],D=0}finally{E=P=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([oe,Ge])}}}function M(g,A,y,E){void 0===E&&(E=y),g[E]=A[y]}function L(g,A){for(var y in g)"default"!==y&&!A.hasOwnProperty(y)&&(A[y]=g[y])}function X(g){var A="function"==typeof Symbol&&Symbol.iterator,y=A&&g[A],E=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&E>=g.length&&(g=void 0),{value:g&&g[E++],done:!g}}};throw new TypeError(A?"Object is not iterable.":"Symbol.iterator is not defined.")}function H(g,A){var y="function"==typeof Symbol&&g[Symbol.iterator];if(!y)return g;var D,ne,E=y.call(g),P=[];try{for(;(void 0===A||A-- >0)&&!(D=E.next()).done;)P.push(D.value)}catch(fe){ne={error:fe}}finally{try{D&&!D.done&&(y=E.return)&&y.call(E)}finally{if(ne)throw ne.error}}return P}function Q(){for(var g=[],A=0;A<arguments.length;A++)g=g.concat(H(arguments[A]));return g}function q(){for(var g=0,A=0,y=arguments.length;A<y;A++)g+=arguments[A].length;var E=Array(g),D=0;for(A=0;A<y;A++)for(var P=arguments[A],ne=0,fe=P.length;ne<fe;ne++,D++)E[D]=P[ne];return E}function Y(g){return this instanceof Y?(this.v=g,this):new Y(g)}function le(g,A,y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var D,E=y.apply(g,A||[]),P=[];return D={},ne("next"),ne("throw"),ne("return"),D[Symbol.asyncIterator]=function(){return this},D;function ne(Fe){E[Fe]&&(D[Fe]=function(We){return new Promise(function(Qe,ft){P.push([Fe,We,Qe,ft])>1||fe(Fe,We)})})}function fe(Fe,We){try{!function Oe(Fe){Fe.value instanceof Y?Promise.resolve(Fe.value.v).then(oe,Ge):at(P[0][2],Fe)}(E[Fe](We))}catch(Qe){at(P[0][3],Qe)}}function oe(Fe){fe("next",Fe)}function Ge(Fe){fe("throw",Fe)}function at(Fe,We){Fe(We),P.shift(),P.length&&fe(P[0][0],P[0][1])}}function B(g){var A,y;return A={},E("next"),E("throw",function(D){throw D}),E("return"),A[Symbol.iterator]=function(){return this},A;function E(D,P){A[D]=g[D]?function(ne){return(y=!y)?{value:Y(g[D](ne)),done:"return"===D}:P?P(ne):ne}:P}}function z(g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var y,A=g[Symbol.asyncIterator];return A?A.call(g):(g=X(g),y={},E("next"),E("throw"),E("return"),y[Symbol.asyncIterator]=function(){return this},y);function E(P){y[P]=g[P]&&function(ne){return new Promise(function(fe,Oe){!function D(P,ne,fe,Oe){Promise.resolve(Oe).then(function(oe){P({value:oe,done:fe})},ne)}(fe,Oe,(ne=g[P](ne)).done,ne.value)})}}}function U(g,A){return Object.defineProperty?Object.defineProperty(g,"raw",{value:A}):g.raw=A,g}function ee(g){if(g&&g.__esModule)return g;var A={};if(null!=g)for(var y in g)Object.hasOwnProperty.call(g,y)&&(A[y]=g[y]);return A.default=g,A}function ge(g){return g&&g.__esModule?g:{default:g}}function _e(g,A){if(!A.has(g))throw new TypeError("attempted to get private field on non-instance");return A.get(g)}function pe(g,A,y){if(!A.has(g))throw new TypeError("attempted to set private field on non-instance");return A.set(g,y),y}},3034:(we,O,x)=>{x.r(O),x.d(O,{__extends:()=>o,__assign:()=>C,__rest:()=>F,__decorate:()=>j,__param:()=>d,__metadata:()=>m,__awaiter:()=>v,__generator:()=>N,__createBinding:()=>M,__exportStar:()=>L,__values:()=>X,__read:()=>H,__spread:()=>Q,__spreadArrays:()=>q,__await:()=>Y,__asyncGenerator:()=>le,__asyncDelegator:()=>B,__asyncValues:()=>z,__makeTemplateObject:()=>U,__importStar:()=>ee,__importDefault:()=>ge,__classPrivateFieldGet:()=>_e,__classPrivateFieldSet:()=>pe});var I=function(g,A){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,E){y.__proto__=E}||function(y,E){for(var D in E)E.hasOwnProperty(D)&&(y[D]=E[D])})(g,A)};function o(g,A){function y(){this.constructor=g}I(g,A),g.prototype=null===A?Object.create(A):(y.prototype=A.prototype,new y)}var C=function(){return C=Object.assign||function(A){for(var y,E=1,D=arguments.length;E<D;E++)for(var P in y=arguments[E])Object.prototype.hasOwnProperty.call(y,P)&&(A[P]=y[P]);return A},C.apply(this,arguments)};function F(g,A){var y={};for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&A.indexOf(E)<0&&(y[E]=g[E]);if(null!=g&&"function"==typeof Object.getOwnPropertySymbols){var D=0;for(E=Object.getOwnPropertySymbols(g);D<E.length;D++)A.indexOf(E[D])<0&&Object.prototype.propertyIsEnumerable.call(g,E[D])&&(y[E[D]]=g[E[D]])}return y}function j(g,A,y,E){var ne,D=arguments.length,P=D<3?A:null===E?E=Object.getOwnPropertyDescriptor(A,y):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)P=Reflect.decorate(g,A,y,E);else for(var fe=g.length-1;fe>=0;fe--)(ne=g[fe])&&(P=(D<3?ne(P):D>3?ne(A,y,P):ne(A,y))||P);return D>3&&P&&Object.defineProperty(A,y,P),P}function d(g,A){return function(y,E){A(y,E,g)}}function m(g,A){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(g,A)}function v(g,A,y,E){return new(y||(y=Promise))(function(P,ne){function fe(Ge){try{oe(E.next(Ge))}catch(at){ne(at)}}function Oe(Ge){try{oe(E.throw(Ge))}catch(at){ne(at)}}function oe(Ge){Ge.done?P(Ge.value):function D(P){return P instanceof y?P:new y(function(ne){ne(P)})}(Ge.value).then(fe,Oe)}oe((E=E.apply(g,A||[])).next())})}function N(g,A){var E,D,P,ne,y={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return ne={next:fe(0),throw:fe(1),return:fe(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function fe(oe){return function(Ge){return function Oe(oe){if(E)throw new TypeError("Generator is already executing.");for(;y;)try{if(E=1,D&&(P=2&oe[0]?D.return:oe[0]?D.throw||((P=D.return)&&P.call(D),0):D.next)&&!(P=P.call(D,oe[1])).done)return P;switch(D=0,P&&(oe=[2&oe[0],P.value]),oe[0]){case 0:case 1:P=oe;break;case 4:return y.label++,{value:oe[1],done:!1};case 5:y.label++,D=oe[1],oe=[0];continue;case 7:oe=y.ops.pop(),y.trys.pop();continue;default:if(!(P=(P=y.trys).length>0&&P[P.length-1])&&(6===oe[0]||2===oe[0])){y=0;continue}if(3===oe[0]&&(!P||oe[1]>P[0]&&oe[1]<P[3])){y.label=oe[1];break}if(6===oe[0]&&y.label<P[1]){y.label=P[1],P=oe;break}if(P&&y.label<P[2]){y.label=P[2],y.ops.push(oe);break}P[2]&&y.ops.pop(),y.trys.pop();continue}oe=A.call(g,y)}catch(Ge){oe=[6,Ge],D=0}finally{E=P=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([oe,Ge])}}}function M(g,A,y,E){void 0===E&&(E=y),g[E]=A[y]}function L(g,A){for(var y in g)"default"!==y&&!A.hasOwnProperty(y)&&(A[y]=g[y])}function X(g){var A="function"==typeof Symbol&&Symbol.iterator,y=A&&g[A],E=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&E>=g.length&&(g=void 0),{value:g&&g[E++],done:!g}}};throw new TypeError(A?"Object is not iterable.":"Symbol.iterator is not defined.")}function H(g,A){var y="function"==typeof Symbol&&g[Symbol.iterator];if(!y)return g;var D,ne,E=y.call(g),P=[];try{for(;(void 0===A||A-- >0)&&!(D=E.next()).done;)P.push(D.value)}catch(fe){ne={error:fe}}finally{try{D&&!D.done&&(y=E.return)&&y.call(E)}finally{if(ne)throw ne.error}}return P}function Q(){for(var g=[],A=0;A<arguments.length;A++)g=g.concat(H(arguments[A]));return g}function q(){for(var g=0,A=0,y=arguments.length;A<y;A++)g+=arguments[A].length;var E=Array(g),D=0;for(A=0;A<y;A++)for(var P=arguments[A],ne=0,fe=P.length;ne<fe;ne++,D++)E[D]=P[ne];return E}function Y(g){return this instanceof Y?(this.v=g,this):new Y(g)}function le(g,A,y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var D,E=y.apply(g,A||[]),P=[];return D={},ne("next"),ne("throw"),ne("return"),D[Symbol.asyncIterator]=function(){return this},D;function ne(Fe){E[Fe]&&(D[Fe]=function(We){return new Promise(function(Qe,ft){P.push([Fe,We,Qe,ft])>1||fe(Fe,We)})})}function fe(Fe,We){try{!function Oe(Fe){Fe.value instanceof Y?Promise.resolve(Fe.value.v).then(oe,Ge):at(P[0][2],Fe)}(E[Fe](We))}catch(Qe){at(P[0][3],Qe)}}function oe(Fe){fe("next",Fe)}function Ge(Fe){fe("throw",Fe)}function at(Fe,We){Fe(We),P.shift(),P.length&&fe(P[0][0],P[0][1])}}function B(g){var A,y;return A={},E("next"),E("throw",function(D){throw D}),E("return"),A[Symbol.iterator]=function(){return this},A;function E(D,P){A[D]=g[D]?function(ne){return(y=!y)?{value:Y(g[D](ne)),done:"return"===D}:P?P(ne):ne}:P}}function z(g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var y,A=g[Symbol.asyncIterator];return A?A.call(g):(g=X(g),y={},E("next"),E("throw"),E("return"),y[Symbol.asyncIterator]=function(){return this},y);function E(P){y[P]=g[P]&&function(ne){return new Promise(function(fe,Oe){!function D(P,ne,fe,Oe){Promise.resolve(Oe).then(function(oe){P({value:oe,done:fe})},ne)}(fe,Oe,(ne=g[P](ne)).done,ne.value)})}}}function U(g,A){return Object.defineProperty?Object.defineProperty(g,"raw",{value:A}):g.raw=A,g}function ee(g){if(g&&g.__esModule)return g;var A={};if(null!=g)for(var y in g)Object.hasOwnProperty.call(g,y)&&(A[y]=g[y]);return A.default=g,A}function ge(g){return g&&g.__esModule?g:{default:g}}function _e(g,A){if(!A.has(g))throw new TypeError("attempted to get private field on non-instance");return A.get(g)}function pe(g,A,y){if(!A.has(g))throw new TypeError("attempted to set private field on non-instance");return A.set(g,y),y}},2170:(we,O,x)=>{x.r(O),x.d(O,{__extends:()=>o,__assign:()=>C,__rest:()=>F,__decorate:()=>j,__param:()=>d,__metadata:()=>m,__awaiter:()=>v,__generator:()=>N,__createBinding:()=>M,__exportStar:()=>L,__values:()=>X,__read:()=>H,__spread:()=>Q,__spreadArrays:()=>q,__await:()=>Y,__asyncGenerator:()=>le,__asyncDelegator:()=>B,__asyncValues:()=>z,__makeTemplateObject:()=>U,__importStar:()=>ee,__importDefault:()=>ge,__classPrivateFieldGet:()=>_e,__classPrivateFieldSet:()=>pe});var I=function(g,A){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,E){y.__proto__=E}||function(y,E){for(var D in E)E.hasOwnProperty(D)&&(y[D]=E[D])})(g,A)};function o(g,A){function y(){this.constructor=g}I(g,A),g.prototype=null===A?Object.create(A):(y.prototype=A.prototype,new y)}var C=function(){return C=Object.assign||function(A){for(var y,E=1,D=arguments.length;E<D;E++)for(var P in y=arguments[E])Object.prototype.hasOwnProperty.call(y,P)&&(A[P]=y[P]);return A},C.apply(this,arguments)};function F(g,A){var y={};for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&A.indexOf(E)<0&&(y[E]=g[E]);if(null!=g&&"function"==typeof Object.getOwnPropertySymbols){var D=0;for(E=Object.getOwnPropertySymbols(g);D<E.length;D++)A.indexOf(E[D])<0&&Object.prototype.propertyIsEnumerable.call(g,E[D])&&(y[E[D]]=g[E[D]])}return y}function j(g,A,y,E){var ne,D=arguments.length,P=D<3?A:null===E?E=Object.getOwnPropertyDescriptor(A,y):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)P=Reflect.decorate(g,A,y,E);else for(var fe=g.length-1;fe>=0;fe--)(ne=g[fe])&&(P=(D<3?ne(P):D>3?ne(A,y,P):ne(A,y))||P);return D>3&&P&&Object.defineProperty(A,y,P),P}function d(g,A){return function(y,E){A(y,E,g)}}function m(g,A){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(g,A)}function v(g,A,y,E){return new(y||(y=Promise))(function(P,ne){function fe(Ge){try{oe(E.next(Ge))}catch(at){ne(at)}}function Oe(Ge){try{oe(E.throw(Ge))}catch(at){ne(at)}}function oe(Ge){Ge.done?P(Ge.value):function D(P){return P instanceof y?P:new y(function(ne){ne(P)})}(Ge.value).then(fe,Oe)}oe((E=E.apply(g,A||[])).next())})}function N(g,A){var E,D,P,ne,y={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return ne={next:fe(0),throw:fe(1),return:fe(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function fe(oe){return function(Ge){return function Oe(oe){if(E)throw new TypeError("Generator is already executing.");for(;y;)try{if(E=1,D&&(P=2&oe[0]?D.return:oe[0]?D.throw||((P=D.return)&&P.call(D),0):D.next)&&!(P=P.call(D,oe[1])).done)return P;switch(D=0,P&&(oe=[2&oe[0],P.value]),oe[0]){case 0:case 1:P=oe;break;case 4:return y.label++,{value:oe[1],done:!1};case 5:y.label++,D=oe[1],oe=[0];continue;case 7:oe=y.ops.pop(),y.trys.pop();continue;default:if(!(P=(P=y.trys).length>0&&P[P.length-1])&&(6===oe[0]||2===oe[0])){y=0;continue}if(3===oe[0]&&(!P||oe[1]>P[0]&&oe[1]<P[3])){y.label=oe[1];break}if(6===oe[0]&&y.label<P[1]){y.label=P[1],P=oe;break}if(P&&y.label<P[2]){y.label=P[2],y.ops.push(oe);break}P[2]&&y.ops.pop(),y.trys.pop();continue}oe=A.call(g,y)}catch(Ge){oe=[6,Ge],D=0}finally{E=P=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([oe,Ge])}}}function M(g,A,y,E){void 0===E&&(E=y),g[E]=A[y]}function L(g,A){for(var y in g)"default"!==y&&!A.hasOwnProperty(y)&&(A[y]=g[y])}function X(g){var A="function"==typeof Symbol&&Symbol.iterator,y=A&&g[A],E=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&E>=g.length&&(g=void 0),{value:g&&g[E++],done:!g}}};throw new TypeError(A?"Object is not iterable.":"Symbol.iterator is not defined.")}function H(g,A){var y="function"==typeof Symbol&&g[Symbol.iterator];if(!y)return g;var D,ne,E=y.call(g),P=[];try{for(;(void 0===A||A-- >0)&&!(D=E.next()).done;)P.push(D.value)}catch(fe){ne={error:fe}}finally{try{D&&!D.done&&(y=E.return)&&y.call(E)}finally{if(ne)throw ne.error}}return P}function Q(){for(var g=[],A=0;A<arguments.length;A++)g=g.concat(H(arguments[A]));return g}function q(){for(var g=0,A=0,y=arguments.length;A<y;A++)g+=arguments[A].length;var E=Array(g),D=0;for(A=0;A<y;A++)for(var P=arguments[A],ne=0,fe=P.length;ne<fe;ne++,D++)E[D]=P[ne];return E}function Y(g){return this instanceof Y?(this.v=g,this):new Y(g)}function le(g,A,y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var D,E=y.apply(g,A||[]),P=[];return D={},ne("next"),ne("throw"),ne("return"),D[Symbol.asyncIterator]=function(){return this},D;function ne(Fe){E[Fe]&&(D[Fe]=function(We){return new Promise(function(Qe,ft){P.push([Fe,We,Qe,ft])>1||fe(Fe,We)})})}function fe(Fe,We){try{!function Oe(Fe){Fe.value instanceof Y?Promise.resolve(Fe.value.v).then(oe,Ge):at(P[0][2],Fe)}(E[Fe](We))}catch(Qe){at(P[0][3],Qe)}}function oe(Fe){fe("next",Fe)}function Ge(Fe){fe("throw",Fe)}function at(Fe,We){Fe(We),P.shift(),P.length&&fe(P[0][0],P[0][1])}}function B(g){var A,y;return A={},E("next"),E("throw",function(D){throw D}),E("return"),A[Symbol.iterator]=function(){return this},A;function E(D,P){A[D]=g[D]?function(ne){return(y=!y)?{value:Y(g[D](ne)),done:"return"===D}:P?P(ne):ne}:P}}function z(g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var y,A=g[Symbol.asyncIterator];return A?A.call(g):(g=X(g),y={},E("next"),E("throw"),E("return"),y[Symbol.asyncIterator]=function(){return this},y);function E(P){y[P]=g[P]&&function(ne){return new Promise(function(fe,Oe){!function D(P,ne,fe,Oe){Promise.resolve(Oe).then(function(oe){P({value:oe,done:fe})},ne)}(fe,Oe,(ne=g[P](ne)).done,ne.value)})}}}function U(g,A){return Object.defineProperty?Object.defineProperty(g,"raw",{value:A}):g.raw=A,g}function ee(g){if(g&&g.__esModule)return g;var A={};if(null!=g)for(var y in g)Object.hasOwnProperty.call(g,y)&&(A[y]=g[y]);return A.default=g,A}function ge(g){return g&&g.__esModule?g:{default:g}}function _e(g,A){if(!A.has(g))throw new TypeError("attempted to get private field on non-instance");return A.get(g)}function pe(g,A,y){if(!A.has(g))throw new TypeError("attempted to set private field on non-instance");return A.set(g,y),y}},7379:(we,O,x)=>{x.r(O),x.d(O,{__extends:()=>o,__assign:()=>C,__rest:()=>F,__decorate:()=>j,__param:()=>d,__metadata:()=>m,__awaiter:()=>v,__generator:()=>N,__createBinding:()=>M,__exportStar:()=>L,__values:()=>X,__read:()=>H,__spread:()=>Q,__spreadArrays:()=>q,__await:()=>Y,__asyncGenerator:()=>le,__asyncDelegator:()=>B,__asyncValues:()=>z,__makeTemplateObject:()=>U,__importStar:()=>ee,__importDefault:()=>ge,__classPrivateFieldGet:()=>_e,__classPrivateFieldSet:()=>pe});var I=function(g,A){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,E){y.__proto__=E}||function(y,E){for(var D in E)E.hasOwnProperty(D)&&(y[D]=E[D])})(g,A)};function o(g,A){function y(){this.constructor=g}I(g,A),g.prototype=null===A?Object.create(A):(y.prototype=A.prototype,new y)}var C=function(){return C=Object.assign||function(A){for(var y,E=1,D=arguments.length;E<D;E++)for(var P in y=arguments[E])Object.prototype.hasOwnProperty.call(y,P)&&(A[P]=y[P]);return A},C.apply(this,arguments)};function F(g,A){var y={};for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&A.indexOf(E)<0&&(y[E]=g[E]);if(null!=g&&"function"==typeof Object.getOwnPropertySymbols){var D=0;for(E=Object.getOwnPropertySymbols(g);D<E.length;D++)A.indexOf(E[D])<0&&Object.prototype.propertyIsEnumerable.call(g,E[D])&&(y[E[D]]=g[E[D]])}return y}function j(g,A,y,E){var ne,D=arguments.length,P=D<3?A:null===E?E=Object.getOwnPropertyDescriptor(A,y):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)P=Reflect.decorate(g,A,y,E);else for(var fe=g.length-1;fe>=0;fe--)(ne=g[fe])&&(P=(D<3?ne(P):D>3?ne(A,y,P):ne(A,y))||P);return D>3&&P&&Object.defineProperty(A,y,P),P}function d(g,A){return function(y,E){A(y,E,g)}}function m(g,A){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(g,A)}function v(g,A,y,E){return new(y||(y=Promise))(function(P,ne){function fe(Ge){try{oe(E.next(Ge))}catch(at){ne(at)}}function Oe(Ge){try{oe(E.throw(Ge))}catch(at){ne(at)}}function oe(Ge){Ge.done?P(Ge.value):function D(P){return P instanceof y?P:new y(function(ne){ne(P)})}(Ge.value).then(fe,Oe)}oe((E=E.apply(g,A||[])).next())})}function N(g,A){var E,D,P,ne,y={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return ne={next:fe(0),throw:fe(1),return:fe(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function fe(oe){return function(Ge){return function Oe(oe){if(E)throw new TypeError("Generator is already executing.");for(;y;)try{if(E=1,D&&(P=2&oe[0]?D.return:oe[0]?D.throw||((P=D.return)&&P.call(D),0):D.next)&&!(P=P.call(D,oe[1])).done)return P;switch(D=0,P&&(oe=[2&oe[0],P.value]),oe[0]){case 0:case 1:P=oe;break;case 4:return y.label++,{value:oe[1],done:!1};case 5:y.label++,D=oe[1],oe=[0];continue;case 7:oe=y.ops.pop(),y.trys.pop();continue;default:if(!(P=(P=y.trys).length>0&&P[P.length-1])&&(6===oe[0]||2===oe[0])){y=0;continue}if(3===oe[0]&&(!P||oe[1]>P[0]&&oe[1]<P[3])){y.label=oe[1];break}if(6===oe[0]&&y.label<P[1]){y.label=P[1],P=oe;break}if(P&&y.label<P[2]){y.label=P[2],y.ops.push(oe);break}P[2]&&y.ops.pop(),y.trys.pop();continue}oe=A.call(g,y)}catch(Ge){oe=[6,Ge],D=0}finally{E=P=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([oe,Ge])}}}function M(g,A,y,E){void 0===E&&(E=y),g[E]=A[y]}function L(g,A){for(var y in g)"default"!==y&&!A.hasOwnProperty(y)&&(A[y]=g[y])}function X(g){var A="function"==typeof Symbol&&Symbol.iterator,y=A&&g[A],E=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&E>=g.length&&(g=void 0),{value:g&&g[E++],done:!g}}};throw new TypeError(A?"Object is not iterable.":"Symbol.iterator is not defined.")}function H(g,A){var y="function"==typeof Symbol&&g[Symbol.iterator];if(!y)return g;var D,ne,E=y.call(g),P=[];try{for(;(void 0===A||A-- >0)&&!(D=E.next()).done;)P.push(D.value)}catch(fe){ne={error:fe}}finally{try{D&&!D.done&&(y=E.return)&&y.call(E)}finally{if(ne)throw ne.error}}return P}function Q(){for(var g=[],A=0;A<arguments.length;A++)g=g.concat(H(arguments[A]));return g}function q(){for(var g=0,A=0,y=arguments.length;A<y;A++)g+=arguments[A].length;var E=Array(g),D=0;for(A=0;A<y;A++)for(var P=arguments[A],ne=0,fe=P.length;ne<fe;ne++,D++)E[D]=P[ne];return E}function Y(g){return this instanceof Y?(this.v=g,this):new Y(g)}function le(g,A,y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var D,E=y.apply(g,A||[]),P=[];return D={},ne("next"),ne("throw"),ne("return"),D[Symbol.asyncIterator]=function(){return this},D;function ne(Fe){E[Fe]&&(D[Fe]=function(We){return new Promise(function(Qe,ft){P.push([Fe,We,Qe,ft])>1||fe(Fe,We)})})}function fe(Fe,We){try{!function Oe(Fe){Fe.value instanceof Y?Promise.resolve(Fe.value.v).then(oe,Ge):at(P[0][2],Fe)}(E[Fe](We))}catch(Qe){at(P[0][3],Qe)}}function oe(Fe){fe("next",Fe)}function Ge(Fe){fe("throw",Fe)}function at(Fe,We){Fe(We),P.shift(),P.length&&fe(P[0][0],P[0][1])}}function B(g){var A,y;return A={},E("next"),E("throw",function(D){throw D}),E("return"),A[Symbol.iterator]=function(){return this},A;function E(D,P){A[D]=g[D]?function(ne){return(y=!y)?{value:Y(g[D](ne)),done:"return"===D}:P?P(ne):ne}:P}}function z(g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var y,A=g[Symbol.asyncIterator];return A?A.call(g):(g=X(g),y={},E("next"),E("throw"),E("return"),y[Symbol.asyncIterator]=function(){return this},y);function E(P){y[P]=g[P]&&function(ne){return new Promise(function(fe,Oe){!function D(P,ne,fe,Oe){Promise.resolve(Oe).then(function(oe){P({value:oe,done:fe})},ne)}(fe,Oe,(ne=g[P](ne)).done,ne.value)})}}}function U(g,A){return Object.defineProperty?Object.defineProperty(g,"raw",{value:A}):g.raw=A,g}function ee(g){if(g&&g.__esModule)return g;var A={};if(null!=g)for(var y in g)Object.hasOwnProperty.call(g,y)&&(A[y]=g[y]);return A.default=g,A}function ge(g){return g&&g.__esModule?g:{default:g}}function _e(g,A){if(!A.has(g))throw new TypeError("attempted to get private field on non-instance");return A.get(g)}function pe(g,A,y){if(!A.has(g))throw new TypeError("attempted to set private field on non-instance");return A.set(g,y),y}},7369:(we,O,x)=>{x.r(O),x.d(O,{__extends:()=>o,__assign:()=>C,__rest:()=>F,__decorate:()=>j,__param:()=>d,__metadata:()=>m,__awaiter:()=>v,__generator:()=>N,__createBinding:()=>M,__exportStar:()=>L,__values:()=>X,__read:()=>H,__spread:()=>Q,__spreadArrays:()=>q,__await:()=>Y,__asyncGenerator:()=>le,__asyncDelegator:()=>B,__asyncValues:()=>z,__makeTemplateObject:()=>U,__importStar:()=>ee,__importDefault:()=>ge,__classPrivateFieldGet:()=>_e,__classPrivateFieldSet:()=>pe});var I=function(g,A){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,E){y.__proto__=E}||function(y,E){for(var D in E)E.hasOwnProperty(D)&&(y[D]=E[D])})(g,A)};function o(g,A){function y(){this.constructor=g}I(g,A),g.prototype=null===A?Object.create(A):(y.prototype=A.prototype,new y)}var C=function(){return C=Object.assign||function(A){for(var y,E=1,D=arguments.length;E<D;E++)for(var P in y=arguments[E])Object.prototype.hasOwnProperty.call(y,P)&&(A[P]=y[P]);return A},C.apply(this,arguments)};function F(g,A){var y={};for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&A.indexOf(E)<0&&(y[E]=g[E]);if(null!=g&&"function"==typeof Object.getOwnPropertySymbols){var D=0;for(E=Object.getOwnPropertySymbols(g);D<E.length;D++)A.indexOf(E[D])<0&&Object.prototype.propertyIsEnumerable.call(g,E[D])&&(y[E[D]]=g[E[D]])}return y}function j(g,A,y,E){var ne,D=arguments.length,P=D<3?A:null===E?E=Object.getOwnPropertyDescriptor(A,y):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)P=Reflect.decorate(g,A,y,E);else for(var fe=g.length-1;fe>=0;fe--)(ne=g[fe])&&(P=(D<3?ne(P):D>3?ne(A,y,P):ne(A,y))||P);return D>3&&P&&Object.defineProperty(A,y,P),P}function d(g,A){return function(y,E){A(y,E,g)}}function m(g,A){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(g,A)}function v(g,A,y,E){return new(y||(y=Promise))(function(P,ne){function fe(Ge){try{oe(E.next(Ge))}catch(at){ne(at)}}function Oe(Ge){try{oe(E.throw(Ge))}catch(at){ne(at)}}function oe(Ge){Ge.done?P(Ge.value):function D(P){return P instanceof y?P:new y(function(ne){ne(P)})}(Ge.value).then(fe,Oe)}oe((E=E.apply(g,A||[])).next())})}function N(g,A){var E,D,P,ne,y={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return ne={next:fe(0),throw:fe(1),return:fe(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function fe(oe){return function(Ge){return function Oe(oe){if(E)throw new TypeError("Generator is already executing.");for(;y;)try{if(E=1,D&&(P=2&oe[0]?D.return:oe[0]?D.throw||((P=D.return)&&P.call(D),0):D.next)&&!(P=P.call(D,oe[1])).done)return P;switch(D=0,P&&(oe=[2&oe[0],P.value]),oe[0]){case 0:case 1:P=oe;break;case 4:return y.label++,{value:oe[1],done:!1};case 5:y.label++,D=oe[1],oe=[0];continue;case 7:oe=y.ops.pop(),y.trys.pop();continue;default:if(!(P=(P=y.trys).length>0&&P[P.length-1])&&(6===oe[0]||2===oe[0])){y=0;continue}if(3===oe[0]&&(!P||oe[1]>P[0]&&oe[1]<P[3])){y.label=oe[1];break}if(6===oe[0]&&y.label<P[1]){y.label=P[1],P=oe;break}if(P&&y.label<P[2]){y.label=P[2],y.ops.push(oe);break}P[2]&&y.ops.pop(),y.trys.pop();continue}oe=A.call(g,y)}catch(Ge){oe=[6,Ge],D=0}finally{E=P=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([oe,Ge])}}}function M(g,A,y,E){void 0===E&&(E=y),g[E]=A[y]}function L(g,A){for(var y in g)"default"!==y&&!A.hasOwnProperty(y)&&(A[y]=g[y])}function X(g){var A="function"==typeof Symbol&&Symbol.iterator,y=A&&g[A],E=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&E>=g.length&&(g=void 0),{value:g&&g[E++],done:!g}}};throw new TypeError(A?"Object is not iterable.":"Symbol.iterator is not defined.")}function H(g,A){var y="function"==typeof Symbol&&g[Symbol.iterator];if(!y)return g;var D,ne,E=y.call(g),P=[];try{for(;(void 0===A||A-- >0)&&!(D=E.next()).done;)P.push(D.value)}catch(fe){ne={error:fe}}finally{try{D&&!D.done&&(y=E.return)&&y.call(E)}finally{if(ne)throw ne.error}}return P}function Q(){for(var g=[],A=0;A<arguments.length;A++)g=g.concat(H(arguments[A]));return g}function q(){for(var g=0,A=0,y=arguments.length;A<y;A++)g+=arguments[A].length;var E=Array(g),D=0;for(A=0;A<y;A++)for(var P=arguments[A],ne=0,fe=P.length;ne<fe;ne++,D++)E[D]=P[ne];return E}function Y(g){return this instanceof Y?(this.v=g,this):new Y(g)}function le(g,A,y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var D,E=y.apply(g,A||[]),P=[];return D={},ne("next"),ne("throw"),ne("return"),D[Symbol.asyncIterator]=function(){return this},D;function ne(Fe){E[Fe]&&(D[Fe]=function(We){return new Promise(function(Qe,ft){P.push([Fe,We,Qe,ft])>1||fe(Fe,We)})})}function fe(Fe,We){try{!function Oe(Fe){Fe.value instanceof Y?Promise.resolve(Fe.value.v).then(oe,Ge):at(P[0][2],Fe)}(E[Fe](We))}catch(Qe){at(P[0][3],Qe)}}function oe(Fe){fe("next",Fe)}function Ge(Fe){fe("throw",Fe)}function at(Fe,We){Fe(We),P.shift(),P.length&&fe(P[0][0],P[0][1])}}function B(g){var A,y;return A={},E("next"),E("throw",function(D){throw D}),E("return"),A[Symbol.iterator]=function(){return this},A;function E(D,P){A[D]=g[D]?function(ne){return(y=!y)?{value:Y(g[D](ne)),done:"return"===D}:P?P(ne):ne}:P}}function z(g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var y,A=g[Symbol.asyncIterator];return A?A.call(g):(g=X(g),y={},E("next"),E("throw"),E("return"),y[Symbol.asyncIterator]=function(){return this},y);function E(P){y[P]=g[P]&&function(ne){return new Promise(function(fe,Oe){!function D(P,ne,fe,Oe){Promise.resolve(Oe).then(function(oe){P({value:oe,done:fe})},ne)}(fe,Oe,(ne=g[P](ne)).done,ne.value)})}}}function U(g,A){return Object.defineProperty?Object.defineProperty(g,"raw",{value:A}):g.raw=A,g}function ee(g){if(g&&g.__esModule)return g;var A={};if(null!=g)for(var y in g)Object.hasOwnProperty.call(g,y)&&(A[y]=g[y]);return A.default=g,A}function ge(g){return g&&g.__esModule?g:{default:g}}function _e(g,A){if(!A.has(g))throw new TypeError("attempted to get private field on non-instance");return A.get(g)}function pe(g,A,y){if(!A.has(g))throw new TypeError("attempted to set private field on non-instance");return A.set(g,y),y}},9485:(we,O,x)=>{x.r(O),x.d(O,{__extends:()=>o,__assign:()=>C,__rest:()=>F,__decorate:()=>j,__param:()=>d,__metadata:()=>m,__awaiter:()=>v,__generator:()=>N,__createBinding:()=>M,__exportStar:()=>L,__values:()=>X,__read:()=>H,__spread:()=>Q,__spreadArrays:()=>q,__await:()=>Y,__asyncGenerator:()=>le,__asyncDelegator:()=>B,__asyncValues:()=>z,__makeTemplateObject:()=>U,__importStar:()=>ee,__importDefault:()=>ge,__classPrivateFieldGet:()=>_e,__classPrivateFieldSet:()=>pe});var I=function(g,A){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,E){y.__proto__=E}||function(y,E){for(var D in E)E.hasOwnProperty(D)&&(y[D]=E[D])})(g,A)};function o(g,A){function y(){this.constructor=g}I(g,A),g.prototype=null===A?Object.create(A):(y.prototype=A.prototype,new y)}var C=function(){return C=Object.assign||function(A){for(var y,E=1,D=arguments.length;E<D;E++)for(var P in y=arguments[E])Object.prototype.hasOwnProperty.call(y,P)&&(A[P]=y[P]);return A},C.apply(this,arguments)};function F(g,A){var y={};for(var E in g)Object.prototype.hasOwnProperty.call(g,E)&&A.indexOf(E)<0&&(y[E]=g[E]);if(null!=g&&"function"==typeof Object.getOwnPropertySymbols){var D=0;for(E=Object.getOwnPropertySymbols(g);D<E.length;D++)A.indexOf(E[D])<0&&Object.prototype.propertyIsEnumerable.call(g,E[D])&&(y[E[D]]=g[E[D]])}return y}function j(g,A,y,E){var ne,D=arguments.length,P=D<3?A:null===E?E=Object.getOwnPropertyDescriptor(A,y):E;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)P=Reflect.decorate(g,A,y,E);else for(var fe=g.length-1;fe>=0;fe--)(ne=g[fe])&&(P=(D<3?ne(P):D>3?ne(A,y,P):ne(A,y))||P);return D>3&&P&&Object.defineProperty(A,y,P),P}function d(g,A){return function(y,E){A(y,E,g)}}function m(g,A){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(g,A)}function v(g,A,y,E){return new(y||(y=Promise))(function(P,ne){function fe(Ge){try{oe(E.next(Ge))}catch(at){ne(at)}}function Oe(Ge){try{oe(E.throw(Ge))}catch(at){ne(at)}}function oe(Ge){Ge.done?P(Ge.value):function D(P){return P instanceof y?P:new y(function(ne){ne(P)})}(Ge.value).then(fe,Oe)}oe((E=E.apply(g,A||[])).next())})}function N(g,A){var E,D,P,ne,y={label:0,sent:function(){if(1&P[0])throw P[1];return P[1]},trys:[],ops:[]};return ne={next:fe(0),throw:fe(1),return:fe(2)},"function"==typeof Symbol&&(ne[Symbol.iterator]=function(){return this}),ne;function fe(oe){return function(Ge){return function Oe(oe){if(E)throw new TypeError("Generator is already executing.");for(;y;)try{if(E=1,D&&(P=2&oe[0]?D.return:oe[0]?D.throw||((P=D.return)&&P.call(D),0):D.next)&&!(P=P.call(D,oe[1])).done)return P;switch(D=0,P&&(oe=[2&oe[0],P.value]),oe[0]){case 0:case 1:P=oe;break;case 4:return y.label++,{value:oe[1],done:!1};case 5:y.label++,D=oe[1],oe=[0];continue;case 7:oe=y.ops.pop(),y.trys.pop();continue;default:if(!(P=(P=y.trys).length>0&&P[P.length-1])&&(6===oe[0]||2===oe[0])){y=0;continue}if(3===oe[0]&&(!P||oe[1]>P[0]&&oe[1]<P[3])){y.label=oe[1];break}if(6===oe[0]&&y.label<P[1]){y.label=P[1],P=oe;break}if(P&&y.label<P[2]){y.label=P[2],y.ops.push(oe);break}P[2]&&y.ops.pop(),y.trys.pop();continue}oe=A.call(g,y)}catch(Ge){oe=[6,Ge],D=0}finally{E=P=0}if(5&oe[0])throw oe[1];return{value:oe[0]?oe[1]:void 0,done:!0}}([oe,Ge])}}}function M(g,A,y,E){void 0===E&&(E=y),g[E]=A[y]}function L(g,A){for(var y in g)"default"!==y&&!A.hasOwnProperty(y)&&(A[y]=g[y])}function X(g){var A="function"==typeof Symbol&&Symbol.iterator,y=A&&g[A],E=0;if(y)return y.call(g);if(g&&"number"==typeof g.length)return{next:function(){return g&&E>=g.length&&(g=void 0),{value:g&&g[E++],done:!g}}};throw new TypeError(A?"Object is not iterable.":"Symbol.iterator is not defined.")}function H(g,A){var y="function"==typeof Symbol&&g[Symbol.iterator];if(!y)return g;var D,ne,E=y.call(g),P=[];try{for(;(void 0===A||A-- >0)&&!(D=E.next()).done;)P.push(D.value)}catch(fe){ne={error:fe}}finally{try{D&&!D.done&&(y=E.return)&&y.call(E)}finally{if(ne)throw ne.error}}return P}function Q(){for(var g=[],A=0;A<arguments.length;A++)g=g.concat(H(arguments[A]));return g}function q(){for(var g=0,A=0,y=arguments.length;A<y;A++)g+=arguments[A].length;var E=Array(g),D=0;for(A=0;A<y;A++)for(var P=arguments[A],ne=0,fe=P.length;ne<fe;ne++,D++)E[D]=P[ne];return E}function Y(g){return this instanceof Y?(this.v=g,this):new Y(g)}function le(g,A,y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var D,E=y.apply(g,A||[]),P=[];return D={},ne("next"),ne("throw"),ne("return"),D[Symbol.asyncIterator]=function(){return this},D;function ne(Fe){E[Fe]&&(D[Fe]=function(We){return new Promise(function(Qe,ft){P.push([Fe,We,Qe,ft])>1||fe(Fe,We)})})}function fe(Fe,We){try{!function Oe(Fe){Fe.value instanceof Y?Promise.resolve(Fe.value.v).then(oe,Ge):at(P[0][2],Fe)}(E[Fe](We))}catch(Qe){at(P[0][3],Qe)}}function oe(Fe){fe("next",Fe)}function Ge(Fe){fe("throw",Fe)}function at(Fe,We){Fe(We),P.shift(),P.length&&fe(P[0][0],P[0][1])}}function B(g){var A,y;return A={},E("next"),E("throw",function(D){throw D}),E("return"),A[Symbol.iterator]=function(){return this},A;function E(D,P){A[D]=g[D]?function(ne){return(y=!y)?{value:Y(g[D](ne)),done:"return"===D}:P?P(ne):ne}:P}}function z(g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var y,A=g[Symbol.asyncIterator];return A?A.call(g):(g=X(g),y={},E("next"),E("throw"),E("return"),y[Symbol.asyncIterator]=function(){return this},y);function E(P){y[P]=g[P]&&function(ne){return new Promise(function(fe,Oe){!function D(P,ne,fe,Oe){Promise.resolve(Oe).then(function(oe){P({value:oe,done:fe})},ne)}(fe,Oe,(ne=g[P](ne)).done,ne.value)})}}}function U(g,A){return Object.defineProperty?Object.defineProperty(g,"raw",{value:A}):g.raw=A,g}function ee(g){if(g&&g.__esModule)return g;var A={};if(null!=g)for(var y in g)Object.hasOwnProperty.call(g,y)&&(A[y]=g[y]);return A.default=g,A}function ge(g){return g&&g.__esModule?g:{default:g}}function _e(g,A){if(!A.has(g))throw new TypeError("attempted to get private field on non-instance");return A.get(g)}function pe(g,A,y){if(!A.has(g))throw new TypeError("attempted to set private field on non-instance");return A.set(g,y),y}},6399:()=>{},3743:()=>{},6989:()=>{},4654:()=>{},2361:()=>{},4616:()=>{},825:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{FT:()=>StoreDevtoolsModule});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2207),_ngrx_store__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9653),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(515),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8306),rxjs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(9646),rxjs__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(6451),rxjs__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(233),rxjs__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(4707),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3099),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9300),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(4004),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(4351),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(7414),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(8372),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(262),rxjs_operators__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(5698),rxjs_operators__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(2722),rxjs_operators__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(3900),rxjs_operators__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(5684),rxjs_operators__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(5363),rxjs_operators__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(1365),rxjs_operators__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(2940);class StoreDevtoolsConfig{constructor(){this.maxAge=!1}}const STORE_DEVTOOLS_CONFIG=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken("@ngrx/store-devtools Options"),INITIAL_OPTIONS=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken("@ngrx/store-devtools Initial Config");function noMonitor(){return null}const DEFAULT_NAME="NgRx Store DevTools";function createConfig(we){const O={maxAge:!1,monitor:noMonitor,actionSanitizer:void 0,stateSanitizer:void 0,name:DEFAULT_NAME,serialize:!1,logOnly:!1,autoPause:!1,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0}},x="function"==typeof we?we():we,C=Object.assign({},O,{features:x.features||!!x.logOnly&&{pause:!0,export:!0,test:!0}||O.features},x);if(C.maxAge&&C.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${C.maxAge}`);return C}const PERFORM_ACTION="PERFORM_ACTION",REFRESH="REFRESH",RESET="RESET",ROLLBACK="ROLLBACK",COMMIT="COMMIT",SWEEP="SWEEP",TOGGLE_ACTION="TOGGLE_ACTION",SET_ACTIONS_ACTIVE="SET_ACTIONS_ACTIVE",JUMP_TO_STATE="JUMP_TO_STATE",JUMP_TO_ACTION="JUMP_TO_ACTION",IMPORT_STATE="IMPORT_STATE",LOCK_CHANGES="LOCK_CHANGES",PAUSE_RECORDING="PAUSE_RECORDING";class PerformAction{constructor(O,x){if(this.action=O,this.timestamp=x,this.type=PERFORM_ACTION,void 0===O.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}}class Refresh{constructor(){this.type=REFRESH}}class Reset{constructor(O){this.timestamp=O,this.type=RESET}}class Rollback{constructor(O){this.timestamp=O,this.type=ROLLBACK}}class Commit{constructor(O){this.timestamp=O,this.type=COMMIT}}class Sweep{constructor(){this.type=SWEEP}}class ToggleAction{constructor(O){this.id=O,this.type=TOGGLE_ACTION}}class SetActionsActive{constructor(O,x,I=!0){this.start=O,this.end=x,this.active=I,this.type=SET_ACTIONS_ACTIVE}}class JumpToState{constructor(O){this.index=O,this.type=JUMP_TO_STATE}}class JumpToAction{constructor(O){this.actionId=O,this.type=JUMP_TO_ACTION}}class ImportState{constructor(O){this.nextLiftedState=O,this.type=IMPORT_STATE}}class LockChanges{constructor(O){this.status=O,this.type=LOCK_CHANGES}}class PauseRecording{constructor(O){this.status=O,this.type=PAUSE_RECORDING}}function difference(we,O){return we.filter(x=>O.indexOf(x)<0)}function unliftState(we){const{computedStates:O,currentStateIndex:x}=we;if(x>=O.length){const{state:o}=O[O.length-1];return o}const{state:I}=O[x];return I}function unliftAction(we){return we.actionsById[we.nextActionId-1]}function liftAction(we){return new PerformAction(we,+Date.now())}function sanitizeActions(we,O){return Object.keys(O).reduce((x,I)=>{const o=Number(I);return x[o]=sanitizeAction(we,O[o],o),x},{})}function sanitizeAction(we,O,x){return{...O,action:we(O.action,x)}}function sanitizeStates(we,O){return O.map((x,I)=>({state:sanitizeState(we,x.state,I),error:x.error}))}function sanitizeState(we,O,x){return we(O,x)}function shouldFilterActions(we){return we.predicate||we.actionsSafelist||we.actionsBlocklist}function filterLiftedState(we,O,x,I){const o=[],C={},F=[];return we.stagedActionIds.forEach((j,d)=>{const m=we.actionsById[j];!m||d&&isActionFiltered(we.computedStates[d],m,O,x,I)||(C[j]=m,o.push(j),F.push(we.computedStates[d]))}),{...we,stagedActionIds:o,actionsById:C,computedStates:F}}function isActionFiltered(we,O,x,I,o){const C=x&&!x(we,O.action),F=I&&!O.action.type.match(I.map(d=>escapeRegExp(d)).join("|")),j=o&&O.action.type.match(o.map(d=>escapeRegExp(d)).join("|"));return C||F||j}function escapeRegExp(we){return we.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const INIT_ACTION={type:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.qg},RECOMPUTE="@ngrx/store-devtools/recompute",RECOMPUTE_ACTION={type:RECOMPUTE};function computeNextEntry(we,O,x,I,o){if(I)return{state:x,error:"Interrupted by an error up the chain"};let F,C=x;try{C=we(x,O)}catch(j){F=j.toString(),o.handleError(j)}return{state:C,error:F}}function recomputeStates(we,O,x,I,o,C,F,j,d){if(O>=we.length&&we.length===C.length)return we;const m=we.slice(0,O),v=C.length-(d?1:0);for(let N=O;N<v;N++){const M=C[N],L=o[M].action,X=m[N-1],H=X?X.state:I,Q=X?X.error:void 0,Y=F.indexOf(M)>-1?X:computeNextEntry(x,L,H,Q,j);m.push(Y)}return d&&m.push(we[we.length-1]),m}function liftInitialState(we,O){return{monitorState:O(void 0,{}),nextActionId:1,actionsById:{0:liftAction(INIT_ACTION)},stagedActionIds:[0],skippedActionIds:[],committedState:we,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function liftReducerWith(we,O,x,I,o={}){return C=>(F,j)=>{let{monitorState:d,actionsById:m,nextActionId:v,stagedActionIds:N,skippedActionIds:M,committedState:L,currentStateIndex:X,computedStates:H,isLocked:Q,isPaused:q}=F||O;function Y(z){let U=z,ee=N.slice(1,U+1);for(let ge=0;ge<ee.length;ge++){if(H[ge+1].error){U=ge,ee=N.slice(1,U+1);break}delete m[ee[ge]]}M=M.filter(ge=>-1===ee.indexOf(ge)),N=[0,...N.slice(U+1)],L=H[U].state,H=H.slice(U),X=X>U?X-U:0}function le(){m={0:liftAction(INIT_ACTION)},v=1,N=[0],M=[],L=H[X].state,X=0,H=[]}F||(m=Object.create(m));let B=0;switch(j.type){case LOCK_CHANGES:Q=j.status,B=1/0;break;case PAUSE_RECORDING:q=j.status,q?(N=[...N,v],m[v]=new PerformAction({type:"@ngrx/devtools/pause"},+Date.now()),v++,B=N.length-1,H=H.concat(H[H.length-1]),X===N.length-2&&X++,B=1/0):le();break;case RESET:m={0:liftAction(INIT_ACTION)},v=1,N=[0],M=[],L=we,X=0,H=[];break;case COMMIT:le();break;case ROLLBACK:m={0:liftAction(INIT_ACTION)},v=1,N=[0],M=[],X=0,H=[];break;case TOGGLE_ACTION:{const{id:z}=j;M=-1===M.indexOf(z)?[z,...M]:M.filter(ee=>ee!==z),B=N.indexOf(z);break}case SET_ACTIONS_ACTIVE:{const{start:z,end:U,active:ee}=j,ge=[];for(let _e=z;_e<U;_e++)ge.push(_e);M=ee?difference(M,ge):[...M,...ge],B=N.indexOf(z);break}case JUMP_TO_STATE:X=j.index,B=1/0;break;case JUMP_TO_ACTION:{const z=N.indexOf(j.actionId);-1!==z&&(X=z),B=1/0;break}case SWEEP:N=difference(N,M),M=[],X=Math.min(X,N.length-1);break;case PERFORM_ACTION:{if(Q)return F||O;if(q||F&&isActionFiltered(F.computedStates[X],j,o.predicate,o.actionsSafelist,o.actionsBlocklist)){const U=H[H.length-1];H=[...H.slice(0,-1),computeNextEntry(C,j.action,U.state,U.error,x)],B=1/0;break}o.maxAge&&N.length===o.maxAge&&Y(1),X===N.length-1&&X++;const z=v++;m[z]=j,N=[...N,z],B=N.length-1;break}case IMPORT_STATE:({monitorState:d,actionsById:m,nextActionId:v,stagedActionIds:N,skippedActionIds:M,committedState:L,currentStateIndex:X,computedStates:H,isLocked:Q,isPaused:q}=j.nextLiftedState);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.qg:B=0,o.maxAge&&N.length>o.maxAge&&(H=recomputeStates(H,B,C,L,m,N,M,x,q),Y(N.length-o.maxAge),B=1/0);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.wb:if(H.filter(U=>U.error).length>0)B=0,o.maxAge&&N.length>o.maxAge&&(H=recomputeStates(H,B,C,L,m,N,M,x,q),Y(N.length-o.maxAge),B=1/0);else{if(!q&&!Q){X===N.length-1&&X++;const U=v++;m[U]=new PerformAction(j,+Date.now()),N=[...N,U],B=N.length-1,H=recomputeStates(H,B,C,L,m,N,M,x,q)}H=H.map(U=>({...U,state:C(U.state,RECOMPUTE_ACTION)})),X=N.length-1,o.maxAge&&N.length>o.maxAge&&Y(N.length-o.maxAge),B=1/0}break;default:B=1/0}return H=recomputeStates(H,B,C,L,m,N,M,x,q),d=I(d,j),{monitorState:d,actionsById:m,nextActionId:v,stagedActionIds:N,skippedActionIds:M,committedState:L,currentStateIndex:X,computedStates:H,isLocked:Q,isPaused:q}}}let DevtoolsDispatcher=(()=>{class we extends _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.UO{}return we.\u0275fac=function(){let O;return function(I){return(O||(O=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275getInheritedFactory(we)))(I||we)}}(),we.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineInjectable({token:we,factory:we.\u0275fac}),we})();const ExtensionActionTypes={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},REDUX_DEVTOOLS_EXTENSION=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken("@ngrx/store-devtools Redux Devtools Extension");let DevtoolsExtension=(()=>{class DevtoolsExtension{constructor(we,O,x){this.config=O,this.dispatcher=x,this.devtoolsExtension=we,this.createActionStreams()}notify(we,O){if(this.devtoolsExtension)if(we.type===PERFORM_ACTION){if(O.isLocked||O.isPaused)return;const x=unliftState(O);if(shouldFilterActions(this.config)&&isActionFiltered(x,we,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;const I=this.config.stateSanitizer?sanitizeState(this.config.stateSanitizer,x,O.currentStateIndex):x,o=this.config.actionSanitizer?sanitizeAction(this.config.actionSanitizer,we,O.nextActionId):we;this.sendToReduxDevtools(()=>this.extensionConnection.send(o,I))}else{const x={...O,stagedActionIds:O.stagedActionIds,actionsById:this.config.actionSanitizer?sanitizeActions(this.config.actionSanitizer,O.actionsById):O.actionsById,computedStates:this.config.stateSanitizer?sanitizeStates(this.config.stateSanitizer,O.computedStates):O.computedStates};this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,x,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new rxjs__WEBPACK_IMPORTED_MODULE_3__.y(we=>{const O=this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=O,O.init(),O.subscribe(x=>we.next(x)),O.unsubscribe}):rxjs__WEBPACK_IMPORTED_MODULE_2__.E}createActionStreams(){const we=this.createChangesObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.B)()),O=we.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(j=>j.type===ExtensionActionTypes.START)),x=we.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(j=>j.type===ExtensionActionTypes.STOP)),I=we.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(j=>j.type===ExtensionActionTypes.DISPATCH),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(j=>this.unwrapAction(j.payload)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.b)(j=>j.type===IMPORT_STATE?this.dispatcher.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(d=>d.type===_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.wb),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.V)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.b)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(()=>j),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.K)(()=>(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(j)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.q)(1)):(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(j))),C=we.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(j=>j.type===ExtensionActionTypes.ACTION),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(j=>this.unwrapAction(j.payload))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(x)),F=I.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(x));this.start$=O.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(x)),this.actions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.w)(()=>C)),this.liftedActions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.w)(()=>F))}unwrapAction(action){return"string"==typeof action?eval(`(${action})`):action}getExtensionConfig(we){const O={name:we.name,features:we.features,serialize:we.serialize,autoPause:we.autoPause??!1};return!1!==we.maxAge&&(O.maxAge=we.maxAge),O}sendToReduxDevtools(we){try{we()}catch(O){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",O)}}}return DevtoolsExtension.\u0275fac=function we(O){return new(O||DevtoolsExtension)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(REDUX_DEVTOOLS_EXTENSION),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(STORE_DEVTOOLS_CONFIG),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(DevtoolsDispatcher))},DevtoolsExtension.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineInjectable({token:DevtoolsExtension,factory:DevtoolsExtension.\u0275fac}),DevtoolsExtension})(),StoreDevtools=(()=>{class we{constructor(x,I,o,C,F,j,d,m){const v=liftInitialState(d,m.monitor),N=liftReducerWith(d,v,j,m.monitor,m),M=(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.T)((0,rxjs__WEBPACK_IMPORTED_MODULE_15__.T)(I.asObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.T)(1)),C.actions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(liftAction)),x,C.liftedActions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.Q)(rxjs__WEBPACK_IMPORTED_MODULE_18__.N)),L=o.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(N)),X=new rxjs__WEBPACK_IMPORTED_MODULE_19__.t(1),H=M.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.M)(L),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.R)(({state:le},[B,z])=>{let U=z(le,B);return B.type!==PERFORM_ACTION&&shouldFilterActions(m)&&(U=filterLiftedState(U,m.predicate,m.actionsSafelist,m.actionsBlocklist)),C.notify(B,U),{state:U,action:B}},{state:v,action:null})).subscribe(({state:le,action:B})=>{X.next(le),B.type===PERFORM_ACTION&&F.next(B.action)}),Q=C.start$.subscribe(()=>{this.refresh()}),q=X.asObservable(),Y=q.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(unliftState));this.extensionStartSubscription=Q,this.stateSubscription=H,this.dispatcher=x,this.liftedState=q,this.state=Y}dispatch(x){this.dispatcher.next(x)}next(x){this.dispatcher.next(x)}error(x){}complete(){}performAction(x){this.dispatch(new PerformAction(x,+Date.now()))}refresh(){this.dispatch(new Refresh)}reset(){this.dispatch(new Reset(+Date.now()))}rollback(){this.dispatch(new Rollback(+Date.now()))}commit(){this.dispatch(new Commit(+Date.now()))}sweep(){this.dispatch(new Sweep)}toggleAction(x){this.dispatch(new ToggleAction(x))}jumpToAction(x){this.dispatch(new JumpToAction(x))}jumpToState(x){this.dispatch(new JumpToState(x))}importState(x){this.dispatch(new ImportState(x))}lockChanges(x){this.dispatch(new LockChanges(x))}pauseRecording(x){this.dispatch(new PauseRecording(x))}}return we.\u0275fac=function(x){return new(x||we)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(DevtoolsDispatcher),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.UO),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.n$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(DevtoolsExtension),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.Y$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(_angular_core__WEBPACK_IMPORTED_MODULE_0__.ErrorHandler),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.Y6),_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275inject(STORE_DEVTOOLS_CONFIG))},we.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineInjectable({token:we,factory:we.\u0275fac}),we})();const IS_EXTENSION_OR_MONITOR_PRESENT=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.InjectionToken("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function createIsExtensionOrMonitorPresent(we,O){return Boolean(we)||O.monitor!==noMonitor}function createReduxDevtoolsExtension(){const we="__REDUX_DEVTOOLS_EXTENSION__";return"object"==typeof window&&void 0!==window[we]?window[we]:null}function createStateObservable(we){return we.state}let StoreDevtoolsModule=(()=>{class we{static instrument(x={}){return{ngModule:we,providers:[DevtoolsExtension,DevtoolsDispatcher,StoreDevtools,{provide:INITIAL_OPTIONS,useValue:x},{provide:IS_EXTENSION_OR_MONITOR_PRESENT,deps:[REDUX_DEVTOOLS_EXTENSION,STORE_DEVTOOLS_CONFIG],useFactory:createIsExtensionOrMonitorPresent},{provide:REDUX_DEVTOOLS_EXTENSION,useFactory:createReduxDevtoolsExtension},{provide:STORE_DEVTOOLS_CONFIG,deps:[INITIAL_OPTIONS],useFactory:createConfig},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.FR,deps:[StoreDevtools],useFactory:createStateObservable},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.mK,useExisting:DevtoolsDispatcher}]}}}return we.\u0275fac=function(x){return new(x||we)},we.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineNgModule({type:we}),we.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__.\u0275\u0275defineInjector({}),we})()},9653:(we,O,x)=>{x.d(O,{hg:()=>ft,UO:()=>z,qg:()=>B,Y6:()=>_e,PB:()=>me,mK:()=>ze,n$:()=>Te,Y$:()=>ye,FR:()=>k,yh:()=>Ye,CK:()=>ns,Aw:()=>la,cr:()=>oo,wb:()=>ce,UY:()=>Ue,qC:()=>de,PH:()=>Q,ZF:()=>li,Lq:()=>R,P1:()=>Ir,rM:()=>_n,on:()=>_,Ky:()=>q,Ys:()=>It});var I=x(2207),o=x(1135),C=x(8306),F=x(7579),j=x(233),d=x(4004),v=x(5363),N=x(1365),M=x(2940),L=x(1884);const X={};function Q(T,Z){if(X[T]=(X[T]||0)+1,"function"==typeof Z)return le(T,(...ue)=>({...Z(...ue),type:T}));switch(Z?Z._as:"empty"){case"empty":return le(T,()=>({type:T}));case"props":return le(T,ue=>({...ue,type:T}));default:throw new Error("Unexpected config.")}}function q(){return{_as:"props",_p:void 0}}function le(T,Z){return Object.defineProperty(Z,"type",{value:T,writable:!1})}const B="@ngrx/store/init";let z=(()=>{class T extends o.X{constructor(){super({type:B})}next(se){if("function"==typeof se)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(void 0===se)throw new TypeError("Actions must be objects");if(void 0===se.type)throw new TypeError("Actions must have a type property");super.next(se)}complete(){}ngOnDestroy(){super.complete()}}return T.\u0275fac=function(se){return new(se||T)},T.\u0275prov=I.\u0275\u0275defineInjectable({token:T,factory:T.\u0275fac}),T})();const U=[z],ee=new I.InjectionToken("@ngrx/store Internal Root Guard"),ge=new I.InjectionToken("@ngrx/store Internal Initial State"),_e=new I.InjectionToken("@ngrx/store Initial State"),pe=new I.InjectionToken("@ngrx/store Reducer Factory"),g=new I.InjectionToken("@ngrx/store Internal Reducer Factory Provider"),A=new I.InjectionToken("@ngrx/store Initial Reducers"),y=new I.InjectionToken("@ngrx/store Internal Initial Reducers"),E=new I.InjectionToken("@ngrx/store Store Features"),D=new I.InjectionToken("@ngrx/store Internal Store Reducers"),P=new I.InjectionToken("@ngrx/store Internal Feature Reducers"),ne=new I.InjectionToken("@ngrx/store Internal Feature Configs"),fe=new I.InjectionToken("@ngrx/store Internal Store Features"),Oe=new I.InjectionToken("@ngrx/store Internal Feature Reducers Token"),oe=new I.InjectionToken("@ngrx/store Feature Reducers"),Ge=new I.InjectionToken("@ngrx/store User Provided Meta Reducers"),at=new I.InjectionToken("@ngrx/store Meta Reducers"),Fe=new I.InjectionToken("@ngrx/store Internal Resolved Meta Reducers"),We=new I.InjectionToken("@ngrx/store User Runtime Checks Config"),Qe=new I.InjectionToken("@ngrx/store Internal User Runtime Checks Config"),ft=new I.InjectionToken("@ngrx/store Internal Runtime Checks"),Ze=new I.InjectionToken("@ngrx/store Check if Action types are unique");function Ue(T,Z={}){const se=Object.keys(T),ue={};for(let Ce=0;Ce<se.length;Ce++){const ke=se[Ce];"function"==typeof T[ke]&&(ue[ke]=T[ke])}const Se=Object.keys(ue);return function(ke,je){ke=void 0===ke?Z:ke;let Le=!1;const $e={};for(let Ke=0;Ke<Se.length;Ke++){const st=Se[Ke],ht=ke[st],Ae=(0,ue[st])(ht,je);$e[st]=Ae,Le=Le||Ae!==ht}return Le?$e:ke}}function de(...T){return function(Z){if(0===T.length)return Z;const se=T[T.length-1];return T.slice(0,-1).reduceRight((Se,Ce)=>Ce(Se),se(Z))}}function te(T,Z){return Array.isArray(Z)&&Z.length>0&&(T=de.apply(null,[...Z,T])),(se,ue)=>{const Se=T(se);return(Ce,ke)=>Se(Ce=void 0===Ce?ue:Ce,ke)}}class Te extends C.y{}class ze extends z{}const ce="@ngrx/store/update-reducers";let me=(()=>{class T extends o.X{constructor(se,ue,Se,Ce){super(Ce(Se,ue)),this.dispatcher=se,this.initialState=ue,this.reducers=Se,this.reducerFactory=Ce}get currentReducers(){return this.reducers}addFeature(se){this.addFeatures([se])}addFeatures(se){const ue=se.reduce((Se,{reducers:Ce,reducerFactory:ke,metaReducers:je,initialState:Le,key:$e})=>{const Ke="function"==typeof Ce?function ae(T){const Z=Array.isArray(T)&&T.length>0?de(...T):se=>se;return(se,ue)=>(se=Z(se),(Se,Ce)=>se(Se=void 0===Se?ue:Se,Ce))}(je)(Ce,Le):te(ke,je)(Ce,Le);return Se[$e]=Ke,Se},{});this.addReducers(ue)}removeFeature(se){this.removeFeatures([se])}removeFeatures(se){this.removeReducers(se.map(ue=>ue.key))}addReducer(se,ue){this.addReducers({[se]:ue})}addReducers(se){this.reducers={...this.reducers,...se},this.updateReducers(Object.keys(se))}removeReducer(se){this.removeReducers([se])}removeReducers(se){se.forEach(ue=>{this.reducers=function nt(T,Z){return Object.keys(T).filter(se=>se!==Z).reduce((se,ue)=>Object.assign(se,{[ue]:T[ue]}),{})}(this.reducers,ue)}),this.updateReducers(se)}updateReducers(se){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:ce,features:se})}ngOnDestroy(){this.complete()}}return T.\u0275fac=function(se){return new(se||T)(I.\u0275\u0275inject(ze),I.\u0275\u0275inject(_e),I.\u0275\u0275inject(A),I.\u0275\u0275inject(pe))},T.\u0275prov=I.\u0275\u0275defineInjectable({token:T,factory:T.\u0275fac}),T})();const rt=[me,{provide:Te,useExisting:me},{provide:ze,useExisting:z}];let ye=(()=>{class T extends F.x{ngOnDestroy(){this.complete()}}return T.\u0275fac=function(){let Z;return function(ue){return(Z||(Z=I.\u0275\u0275getInheritedFactory(T)))(ue||T)}}(),T.\u0275prov=I.\u0275\u0275defineInjectable({token:T,factory:T.\u0275fac}),T})();const $=[ye];class k extends C.y{}let K=(()=>{class T extends o.X{constructor(se,ue,Se,Ce){super(Ce);const $e=se.pipe((0,v.Q)(j.N)).pipe((0,N.M)(ue)).pipe((0,M.R)(he,{state:Ce}));this.stateSubscription=$e.subscribe(({state:Ke,action:st})=>{this.next(Ke),Se.next(st)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return T.INIT=B,T.\u0275fac=function(se){return new(se||T)(I.\u0275\u0275inject(z),I.\u0275\u0275inject(Te),I.\u0275\u0275inject(ye),I.\u0275\u0275inject(_e))},T.\u0275prov=I.\u0275\u0275defineInjectable({token:T,factory:T.\u0275fac}),T})();function he(T={state:void 0},[Z,se]){const{state:ue}=T;return{state:se(ue,Z),action:Z}}const Me=[K,{provide:k,useExisting:K}];let Ye=(()=>{class T extends C.y{constructor(se,ue,Se){super(),this.actionsObserver=ue,this.reducerManager=Se,this.source=se}select(se,...ue){return It.call(null,se,...ue)(this)}lift(se){const ue=new T(this,this.actionsObserver,this.reducerManager);return ue.operator=se,ue}dispatch(se){this.actionsObserver.next(se)}next(se){this.actionsObserver.next(se)}error(se){this.actionsObserver.error(se)}complete(){this.actionsObserver.complete()}addReducer(se,ue){this.reducerManager.addReducer(se,ue)}removeReducer(se){this.reducerManager.removeReducer(se)}}return T.\u0275fac=function(se){return new(se||T)(I.\u0275\u0275inject(k),I.\u0275\u0275inject(z),I.\u0275\u0275inject(me))},T.\u0275prov=I.\u0275\u0275defineInjectable({token:T,factory:T.\u0275fac}),T})();const it=[Ye];function It(T,Z,...se){return function(Se){let Ce;if("string"==typeof T){const ke=[Z,...se].filter(Boolean);Ce=Se.pipe(function m(...T){const Z=T.length;if(0===Z)throw new Error("list of properties cannot be empty.");return(0,d.U)(se=>{let ue=se;for(let Se=0;Se<Z;Se++){const Ce=null==ue?void 0:ue[T[Se]];if(void 0===Ce)return;ue=Ce}return ue})}(T,...ke))}else{if("function"!=typeof T)throw new TypeError(`Unexpected type '${typeof T}' in select operator, expected 'string' or 'function'`);Ce=Se.pipe((0,d.U)(ke=>T(ke,Z)))}return Ce.pipe((0,L.x)())}}const zt="https://ngrx.io/guide/store/configuration/runtime-checks";function Xt(T){return void 0===T}function Pe(T){return null===T}function Dn(T){return Array.isArray(T)}function ct(T){return"object"==typeof T&&null!==T}function mn(T){return"function"==typeof T}function _n(){return false}function Mn(T,Z){return T===Z}function fr(T,Z,se){for(let ue=0;ue<T.length;ue++)if(!se(T[ue],Z[ue]))return!0;return!1}function Nn(T,Z=Mn,se=Mn){let Ce,ue=null,Se=null;return{memoized:function $e(){if(void 0!==Ce)return Ce.result;if(!ue)return Se=T.apply(null,arguments),ue=arguments,Se;if(!fr(arguments,ue,Z))return Se;const Ke=T.apply(null,arguments);return ue=arguments,se(Se,Ke)?Se:(Se=Ke,Ke)},reset:function ke(){ue=null,Se=null},setResult:function je(Ke){Ce={result:Ke}},clearResult:function Le(){Ce=void 0}}}function Ir(...T){return function Tr(T,Z={stateFn:ar}){return function(...se){let ue=se;if(Array.isArray(ue[0])){const[Ke,...st]=ue;ue=[...Ke,...st]}const Se=ue.slice(0,ue.length-1),Ce=ue[ue.length-1],ke=Se.filter(Ke=>Ke.release&&"function"==typeof Ke.release),je=T(function(...Ke){return Ce.apply(null,Ke)}),Le=Nn(function(Ke,st){return Z.stateFn.apply(null,[Ke,Se,st,je])});return Object.assign(Le.memoized,{release:function $e(){Le.reset(),je.reset(),ke.forEach(Ke=>Ke.release())},projector:je.memoized,setResult:Le.setResult,clearResult:Le.clearResult})}}(Nn)(...T)}function ar(T,Z,se,ue){if(void 0===se){const Ce=Z.map(ke=>ke(T));return ue.memoized.apply(null,Ce)}const Se=Z.map(Ce=>Ce(T,se));return ue.memoized.apply(null,[...Se,se])}function li(T){return Ir(Z=>{const se=Z[T];return(0,I.isDevMode)()&&!(T in Z)&&console.warn(`@ngrx/store: The feature name "${T}" does not exist in the state, therefore createFeatureSelector cannot access it.  Be sure it is imported in a loaded module using StoreModule.forRoot('${T}', ...) or StoreModule.forFeature('${T}', ...).  If the default state is intended to be undefined, as is the case with router state, this development-only warning message can be ignored.`),se},Z=>Z)}function Pi(T){Object.freeze(T);const Z=mn(T);return Object.getOwnPropertyNames(T).forEach(se=>{if(!se.startsWith("\u0275")&&function Lt(T,Z){return Object.prototype.hasOwnProperty.call(T,Z)}(T,se)&&(!Z||"caller"!==se&&"callee"!==se&&"arguments"!==se)){const ue=T[se];(ct(ue)||mn(ue))&&!Object.isFrozen(ue)&&Pi(ue)}}),T}function Ur(T,Z=[]){return(Xt(T)||Pe(T))&&0===Z.length?{path:["root"],value:T}:Object.keys(T).reduce((ue,Se)=>{if(ue)return ue;const Ce=T[Se];return function kn(T){return mn(T)&&T.hasOwnProperty("\u0275cmp")}(Ce)?ue:!(Xt(Ce)||Pe(Ce)||function wn(T){return"number"==typeof T}(Ce)||function Ot(T){return"boolean"==typeof T}(Ce)||function Wt(T){return"string"==typeof T}(Ce)||Dn(Ce))&&(function sn(T){if(!function vt(T){return ct(T)&&!Dn(T)}(T))return!1;const Z=Object.getPrototypeOf(T);return Z===Object.prototype||null===Z}(Ce)?Ur(Ce,[...Z,Se]):{path:[...Z,Se],value:Ce})},!1)}function ro(T,Z){if(!1===T)return;const se=T.path.join("."),ue=new Error(`Detected unserializable ${Z} at "${se}". ${zt}#strict${Z}serializability`);throw ue.value=T.value,ue.unserializablePath=se,ue}function Ui(T){return(0,I.isDevMode)()?{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1,...T}:{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function Ln({strictActionSerializability:T,strictStateSerializability:Z}){return se=>T||Z?function wo(T,Z){return function(se,ue){Z.action(ue)&&ro(Ur(ue),"action");const Se=T(se,ue);return Z.state()&&ro(Ur(Se),"state"),Se}}(se,{action:ue=>T&&!Xr(ue),state:()=>Z}):se}function io({strictActionImmutability:T,strictStateImmutability:Z}){return se=>T||Z?function ui(T,Z){return function(se,ue){const Se=Z.action(ue)?Pi(ue):ue,Ce=T(se,Se);return Z.state()?Pi(Ce):Ce}}(se,{action:ue=>T&&!Xr(ue),state:()=>Z}):se}function Xr(T){return T.type.startsWith("@ngrx")}function ci({strictActionWithinNgZone:T}){return Z=>T?function zi(T,Z){return function(se,ue){if(Z.action(ue)&&!I.NgZone.isInAngularZone())throw new Error(`Action '${ue.type}' running outside NgZone. ${zt}#strictactionwithinngzone`);return T(se,ue)}}(Z,{action:se=>T&&!Xr(se)}):Z}function Gi(T){return[{provide:Qe,useValue:T},{provide:We,useFactory:Is,deps:[Qe]},{provide:ft,deps:[We],useFactory:Ui},{provide:at,multi:!0,deps:[ft],useFactory:io},{provide:at,multi:!0,deps:[ft],useFactory:Ln},{provide:at,multi:!0,deps:[ft],useFactory:ci}]}function En(){return[{provide:Ze,multi:!0,deps:[ft],useFactory:Ts}]}function Is(T){return T}function Ts(T){if(!T.strictActionTypeUniqueness)return;const Z=Object.entries(X).filter(([,se])=>se>1).map(([se])=>se);if(Z.length)throw new Error(`Action types are registered more than once, ${Z.map(se=>`"${se}"`).join(", ")}. ${zt}#strictactiontypeuniqueness`)}let oo=(()=>{class T{constructor(se,ue,Se,Ce,ke,je){}}return T.\u0275fac=function(se){return new(se||T)(I.\u0275\u0275inject(z),I.\u0275\u0275inject(Te),I.\u0275\u0275inject(ye),I.\u0275\u0275inject(Ye),I.\u0275\u0275inject(ee,8),I.\u0275\u0275inject(Ze,8))},T.\u0275mod=I.\u0275\u0275defineNgModule({type:T}),T.\u0275inj=I.\u0275\u0275defineInjector({}),T})(),ns=(()=>{class T{constructor(se,ue,Se,Ce,ke){this.features=se,this.featureReducers=ue,this.reducerManager=Se;const je=se.map((Le,$e)=>{const st=ue.shift()[$e];return{...Le,reducers:st,initialState:rs(Le.initialState)}});Se.addFeatures(je)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return T.\u0275fac=function(se){return new(se||T)(I.\u0275\u0275inject(fe),I.\u0275\u0275inject(oe),I.\u0275\u0275inject(me),I.\u0275\u0275inject(oo),I.\u0275\u0275inject(Ze,8))},T.\u0275mod=I.\u0275\u0275defineNgModule({type:T}),T.\u0275inj=I.\u0275\u0275defineInjector({}),T})(),la=(()=>{class T{static forRoot(se,ue={}){return{ngModule:oo,providers:[{provide:ee,useFactory:b,deps:[[Ye,new I.Optional,new I.SkipSelf]]},{provide:ge,useValue:ue.initialState},{provide:_e,useFactory:rs,deps:[ge]},{provide:y,useValue:se},{provide:D,useExisting:se instanceof I.InjectionToken?se:y},{provide:A,deps:[I.Injector,y,[new I.Inject(D)]],useFactory:ua},{provide:Ge,useValue:ue.metaReducers?ue.metaReducers:[]},{provide:Fe,deps:[at,Ge],useFactory:ca},{provide:g,useValue:ue.reducerFactory?ue.reducerFactory:Ue},{provide:pe,deps:[g,Fe],useFactory:te},U,rt,$,Me,it,Gi(ue.runtimeChecks),En()]}}static forFeature(se,ue,Se={}){return{ngModule:ns,providers:[{provide:ne,multi:!0,useValue:se instanceof Object?{}:Se},{provide:E,multi:!0,useValue:{key:se instanceof Object?se.name:se,reducerFactory:Se instanceof I.InjectionToken||!Se.reducerFactory?Ue:Se.reducerFactory,metaReducers:Se instanceof I.InjectionToken||!Se.metaReducers?[]:Se.metaReducers,initialState:Se instanceof I.InjectionToken||!Se.initialState?void 0:Se.initialState}},{provide:fe,deps:[I.Injector,ne,E],useFactory:Ka},{provide:P,multi:!0,useValue:se instanceof Object?se.reducer:ue},{provide:Oe,multi:!0,useExisting:ue instanceof I.InjectionToken?ue:P},{provide:oe,multi:!0,deps:[I.Injector,P,[new I.Inject(Oe)]],useFactory:Co},En()]}}}return T.\u0275fac=function(se){return new(se||T)},T.\u0275mod=I.\u0275\u0275defineNgModule({type:T}),T.\u0275inj=I.\u0275\u0275defineInjector({}),T})();function ua(T,Z){return Z instanceof I.InjectionToken?T.get(Z):Z}function Ka(T,Z,se){return se.map((ue,Se)=>{if(Z[Se]instanceof I.InjectionToken){const Ce=T.get(Z[Se]);return{key:ue.key,reducerFactory:Ce.reducerFactory?Ce.reducerFactory:Ue,metaReducers:Ce.metaReducers?Ce.metaReducers:[],initialState:Ce.initialState}}return ue})}function Co(T,Z){return Z.map(ue=>ue instanceof I.InjectionToken?T.get(ue):ue)}function rs(T){return"function"==typeof T?T():T}function ca(T,Z){return T.concat(Z)}function b(T){if(T)throw new TypeError("StoreModule.forRoot() called twice. Feature modules should use StoreModule.forFeature() instead.");return"guarded"}function _(...T){return{reducer:T.pop(),types:T.map(ue=>ue.type)}}function R(T,...Z){const se=new Map;for(const ue of Z)for(const Se of ue.types){const Ce=se.get(Se);se.set(Se,Ce?(je,Le)=>ue.reducer(Ce(je,Le),Le):ue.reducer)}return function(ue=T,Se){const Ce=se.get(Se.type);return Ce?Ce(ue,Se):ue}}},2148:we=>{we.exports=JSON.parse('{"0":65533,"128":8364,"130":8218,"131":402,"132":8222,"133":8230,"134":8224,"135":8225,"136":710,"137":8240,"138":352,"139":8249,"140":338,"142":381,"145":8216,"146":8217,"147":8220,"148":8221,"149":8226,"150":8211,"151":8212,"152":732,"153":8482,"154":353,"155":8250,"156":339,"158":382,"159":376}')},6086:we=>{we.exports=JSON.parse('{"Aacute":"\xc1","aacute":"\xe1","Abreve":"\u0102","abreve":"\u0103","ac":"\u223e","acd":"\u223f","acE":"\u223e\u0333","Acirc":"\xc2","acirc":"\xe2","acute":"\xb4","Acy":"\u0410","acy":"\u0430","AElig":"\xc6","aelig":"\xe6","af":"\u2061","Afr":"\u{1d504}","afr":"\u{1d51e}","Agrave":"\xc0","agrave":"\xe0","alefsym":"\u2135","aleph":"\u2135","Alpha":"\u0391","alpha":"\u03b1","Amacr":"\u0100","amacr":"\u0101","amalg":"\u2a3f","amp":"&","AMP":"&","andand":"\u2a55","And":"\u2a53","and":"\u2227","andd":"\u2a5c","andslope":"\u2a58","andv":"\u2a5a","ang":"\u2220","ange":"\u29a4","angle":"\u2220","angmsdaa":"\u29a8","angmsdab":"\u29a9","angmsdac":"\u29aa","angmsdad":"\u29ab","angmsdae":"\u29ac","angmsdaf":"\u29ad","angmsdag":"\u29ae","angmsdah":"\u29af","angmsd":"\u2221","angrt":"\u221f","angrtvb":"\u22be","angrtvbd":"\u299d","angsph":"\u2222","angst":"\xc5","angzarr":"\u237c","Aogon":"\u0104","aogon":"\u0105","Aopf":"\u{1d538}","aopf":"\u{1d552}","apacir":"\u2a6f","ap":"\u2248","apE":"\u2a70","ape":"\u224a","apid":"\u224b","apos":"\'","ApplyFunction":"\u2061","approx":"\u2248","approxeq":"\u224a","Aring":"\xc5","aring":"\xe5","Ascr":"\u{1d49c}","ascr":"\u{1d4b6}","Assign":"\u2254","ast":"*","asymp":"\u2248","asympeq":"\u224d","Atilde":"\xc3","atilde":"\xe3","Auml":"\xc4","auml":"\xe4","awconint":"\u2233","awint":"\u2a11","backcong":"\u224c","backepsilon":"\u03f6","backprime":"\u2035","backsim":"\u223d","backsimeq":"\u22cd","Backslash":"\u2216","Barv":"\u2ae7","barvee":"\u22bd","barwed":"\u2305","Barwed":"\u2306","barwedge":"\u2305","bbrk":"\u23b5","bbrktbrk":"\u23b6","bcong":"\u224c","Bcy":"\u0411","bcy":"\u0431","bdquo":"\u201e","becaus":"\u2235","because":"\u2235","Because":"\u2235","bemptyv":"\u29b0","bepsi":"\u03f6","bernou":"\u212c","Bernoullis":"\u212c","Beta":"\u0392","beta":"\u03b2","beth":"\u2136","between":"\u226c","Bfr":"\u{1d505}","bfr":"\u{1d51f}","bigcap":"\u22c2","bigcirc":"\u25ef","bigcup":"\u22c3","bigodot":"\u2a00","bigoplus":"\u2a01","bigotimes":"\u2a02","bigsqcup":"\u2a06","bigstar":"\u2605","bigtriangledown":"\u25bd","bigtriangleup":"\u25b3","biguplus":"\u2a04","bigvee":"\u22c1","bigwedge":"\u22c0","bkarow":"\u290d","blacklozenge":"\u29eb","blacksquare":"\u25aa","blacktriangle":"\u25b4","blacktriangledown":"\u25be","blacktriangleleft":"\u25c2","blacktriangleright":"\u25b8","blank":"\u2423","blk12":"\u2592","blk14":"\u2591","blk34":"\u2593","block":"\u2588","bne":"=\u20e5","bnequiv":"\u2261\u20e5","bNot":"\u2aed","bnot":"\u2310","Bopf":"\u{1d539}","bopf":"\u{1d553}","bot":"\u22a5","bottom":"\u22a5","bowtie":"\u22c8","boxbox":"\u29c9","boxdl":"\u2510","boxdL":"\u2555","boxDl":"\u2556","boxDL":"\u2557","boxdr":"\u250c","boxdR":"\u2552","boxDr":"\u2553","boxDR":"\u2554","boxh":"\u2500","boxH":"\u2550","boxhd":"\u252c","boxHd":"\u2564","boxhD":"\u2565","boxHD":"\u2566","boxhu":"\u2534","boxHu":"\u2567","boxhU":"\u2568","boxHU":"\u2569","boxminus":"\u229f","boxplus":"\u229e","boxtimes":"\u22a0","boxul":"\u2518","boxuL":"\u255b","boxUl":"\u255c","boxUL":"\u255d","boxur":"\u2514","boxuR":"\u2558","boxUr":"\u2559","boxUR":"\u255a","boxv":"\u2502","boxV":"\u2551","boxvh":"\u253c","boxvH":"\u256a","boxVh":"\u256b","boxVH":"\u256c","boxvl":"\u2524","boxvL":"\u2561","boxVl":"\u2562","boxVL":"\u2563","boxvr":"\u251c","boxvR":"\u255e","boxVr":"\u255f","boxVR":"\u2560","bprime":"\u2035","breve":"\u02d8","Breve":"\u02d8","brvbar":"\xa6","bscr":"\u{1d4b7}","Bscr":"\u212c","bsemi":"\u204f","bsim":"\u223d","bsime":"\u22cd","bsolb":"\u29c5","bsol":"\\\\","bsolhsub":"\u27c8","bull":"\u2022","bullet":"\u2022","bump":"\u224e","bumpE":"\u2aae","bumpe":"\u224f","Bumpeq":"\u224e","bumpeq":"\u224f","Cacute":"\u0106","cacute":"\u0107","capand":"\u2a44","capbrcup":"\u2a49","capcap":"\u2a4b","cap":"\u2229","Cap":"\u22d2","capcup":"\u2a47","capdot":"\u2a40","CapitalDifferentialD":"\u2145","caps":"\u2229\ufe00","caret":"\u2041","caron":"\u02c7","Cayleys":"\u212d","ccaps":"\u2a4d","Ccaron":"\u010c","ccaron":"\u010d","Ccedil":"\xc7","ccedil":"\xe7","Ccirc":"\u0108","ccirc":"\u0109","Cconint":"\u2230","ccups":"\u2a4c","ccupssm":"\u2a50","Cdot":"\u010a","cdot":"\u010b","cedil":"\xb8","Cedilla":"\xb8","cemptyv":"\u29b2","cent":"\xa2","centerdot":"\xb7","CenterDot":"\xb7","cfr":"\u{1d520}","Cfr":"\u212d","CHcy":"\u0427","chcy":"\u0447","check":"\u2713","checkmark":"\u2713","Chi":"\u03a7","chi":"\u03c7","circ":"\u02c6","circeq":"\u2257","circlearrowleft":"\u21ba","circlearrowright":"\u21bb","circledast":"\u229b","circledcirc":"\u229a","circleddash":"\u229d","CircleDot":"\u2299","circledR":"\xae","circledS":"\u24c8","CircleMinus":"\u2296","CirclePlus":"\u2295","CircleTimes":"\u2297","cir":"\u25cb","cirE":"\u29c3","cire":"\u2257","cirfnint":"\u2a10","cirmid":"\u2aef","cirscir":"\u29c2","ClockwiseContourIntegral":"\u2232","CloseCurlyDoubleQuote":"\u201d","CloseCurlyQuote":"\u2019","clubs":"\u2663","clubsuit":"\u2663","colon":":","Colon":"\u2237","Colone":"\u2a74","colone":"\u2254","coloneq":"\u2254","comma":",","commat":"@","comp":"\u2201","compfn":"\u2218","complement":"\u2201","complexes":"\u2102","cong":"\u2245","congdot":"\u2a6d","Congruent":"\u2261","conint":"\u222e","Conint":"\u222f","ContourIntegral":"\u222e","copf":"\u{1d554}","Copf":"\u2102","coprod":"\u2210","Coproduct":"\u2210","copy":"\xa9","COPY":"\xa9","copysr":"\u2117","CounterClockwiseContourIntegral":"\u2233","crarr":"\u21b5","cross":"\u2717","Cross":"\u2a2f","Cscr":"\u{1d49e}","cscr":"\u{1d4b8}","csub":"\u2acf","csube":"\u2ad1","csup":"\u2ad0","csupe":"\u2ad2","ctdot":"\u22ef","cudarrl":"\u2938","cudarrr":"\u2935","cuepr":"\u22de","cuesc":"\u22df","cularr":"\u21b6","cularrp":"\u293d","cupbrcap":"\u2a48","cupcap":"\u2a46","CupCap":"\u224d","cup":"\u222a","Cup":"\u22d3","cupcup":"\u2a4a","cupdot":"\u228d","cupor":"\u2a45","cups":"\u222a\ufe00","curarr":"\u21b7","curarrm":"\u293c","curlyeqprec":"\u22de","curlyeqsucc":"\u22df","curlyvee":"\u22ce","curlywedge":"\u22cf","curren":"\xa4","curvearrowleft":"\u21b6","curvearrowright":"\u21b7","cuvee":"\u22ce","cuwed":"\u22cf","cwconint":"\u2232","cwint":"\u2231","cylcty":"\u232d","dagger":"\u2020","Dagger":"\u2021","daleth":"\u2138","darr":"\u2193","Darr":"\u21a1","dArr":"\u21d3","dash":"\u2010","Dashv":"\u2ae4","dashv":"\u22a3","dbkarow":"\u290f","dblac":"\u02dd","Dcaron":"\u010e","dcaron":"\u010f","Dcy":"\u0414","dcy":"\u0434","ddagger":"\u2021","ddarr":"\u21ca","DD":"\u2145","dd":"\u2146","DDotrahd":"\u2911","ddotseq":"\u2a77","deg":"\xb0","Del":"\u2207","Delta":"\u0394","delta":"\u03b4","demptyv":"\u29b1","dfisht":"\u297f","Dfr":"\u{1d507}","dfr":"\u{1d521}","dHar":"\u2965","dharl":"\u21c3","dharr":"\u21c2","DiacriticalAcute":"\xb4","DiacriticalDot":"\u02d9","DiacriticalDoubleAcute":"\u02dd","DiacriticalGrave":"`","DiacriticalTilde":"\u02dc","diam":"\u22c4","diamond":"\u22c4","Diamond":"\u22c4","diamondsuit":"\u2666","diams":"\u2666","die":"\xa8","DifferentialD":"\u2146","digamma":"\u03dd","disin":"\u22f2","div":"\xf7","divide":"\xf7","divideontimes":"\u22c7","divonx":"\u22c7","DJcy":"\u0402","djcy":"\u0452","dlcorn":"\u231e","dlcrop":"\u230d","dollar":"$","Dopf":"\u{1d53b}","dopf":"\u{1d555}","Dot":"\xa8","dot":"\u02d9","DotDot":"\u20dc","doteq":"\u2250","doteqdot":"\u2251","DotEqual":"\u2250","dotminus":"\u2238","dotplus":"\u2214","dotsquare":"\u22a1","doublebarwedge":"\u2306","DoubleContourIntegral":"\u222f","DoubleDot":"\xa8","DoubleDownArrow":"\u21d3","DoubleLeftArrow":"\u21d0","DoubleLeftRightArrow":"\u21d4","DoubleLeftTee":"\u2ae4","DoubleLongLeftArrow":"\u27f8","DoubleLongLeftRightArrow":"\u27fa","DoubleLongRightArrow":"\u27f9","DoubleRightArrow":"\u21d2","DoubleRightTee":"\u22a8","DoubleUpArrow":"\u21d1","DoubleUpDownArrow":"\u21d5","DoubleVerticalBar":"\u2225","DownArrowBar":"\u2913","downarrow":"\u2193","DownArrow":"\u2193","Downarrow":"\u21d3","DownArrowUpArrow":"\u21f5","DownBreve":"\u0311","downdownarrows":"\u21ca","downharpoonleft":"\u21c3","downharpoonright":"\u21c2","DownLeftRightVector":"\u2950","DownLeftTeeVector":"\u295e","DownLeftVectorBar":"\u2956","DownLeftVector":"\u21bd","DownRightTeeVector":"\u295f","DownRightVectorBar":"\u2957","DownRightVector":"\u21c1","DownTeeArrow":"\u21a7","DownTee":"\u22a4","drbkarow":"\u2910","drcorn":"\u231f","drcrop":"\u230c","Dscr":"\u{1d49f}","dscr":"\u{1d4b9}","DScy":"\u0405","dscy":"\u0455","dsol":"\u29f6","Dstrok":"\u0110","dstrok":"\u0111","dtdot":"\u22f1","dtri":"\u25bf","dtrif":"\u25be","duarr":"\u21f5","duhar":"\u296f","dwangle":"\u29a6","DZcy":"\u040f","dzcy":"\u045f","dzigrarr":"\u27ff","Eacute":"\xc9","eacute":"\xe9","easter":"\u2a6e","Ecaron":"\u011a","ecaron":"\u011b","Ecirc":"\xca","ecirc":"\xea","ecir":"\u2256","ecolon":"\u2255","Ecy":"\u042d","ecy":"\u044d","eDDot":"\u2a77","Edot":"\u0116","edot":"\u0117","eDot":"\u2251","ee":"\u2147","efDot":"\u2252","Efr":"\u{1d508}","efr":"\u{1d522}","eg":"\u2a9a","Egrave":"\xc8","egrave":"\xe8","egs":"\u2a96","egsdot":"\u2a98","el":"\u2a99","Element":"\u2208","elinters":"\u23e7","ell":"\u2113","els":"\u2a95","elsdot":"\u2a97","Emacr":"\u0112","emacr":"\u0113","empty":"\u2205","emptyset":"\u2205","EmptySmallSquare":"\u25fb","emptyv":"\u2205","EmptyVerySmallSquare":"\u25ab","emsp13":"\u2004","emsp14":"\u2005","emsp":"\u2003","ENG":"\u014a","eng":"\u014b","ensp":"\u2002","Eogon":"\u0118","eogon":"\u0119","Eopf":"\u{1d53c}","eopf":"\u{1d556}","epar":"\u22d5","eparsl":"\u29e3","eplus":"\u2a71","epsi":"\u03b5","Epsilon":"\u0395","epsilon":"\u03b5","epsiv":"\u03f5","eqcirc":"\u2256","eqcolon":"\u2255","eqsim":"\u2242","eqslantgtr":"\u2a96","eqslantless":"\u2a95","Equal":"\u2a75","equals":"=","EqualTilde":"\u2242","equest":"\u225f","Equilibrium":"\u21cc","equiv":"\u2261","equivDD":"\u2a78","eqvparsl":"\u29e5","erarr":"\u2971","erDot":"\u2253","escr":"\u212f","Escr":"\u2130","esdot":"\u2250","Esim":"\u2a73","esim":"\u2242","Eta":"\u0397","eta":"\u03b7","ETH":"\xd0","eth":"\xf0","Euml":"\xcb","euml":"\xeb","euro":"\u20ac","excl":"!","exist":"\u2203","Exists":"\u2203","expectation":"\u2130","exponentiale":"\u2147","ExponentialE":"\u2147","fallingdotseq":"\u2252","Fcy":"\u0424","fcy":"\u0444","female":"\u2640","ffilig":"\ufb03","fflig":"\ufb00","ffllig":"\ufb04","Ffr":"\u{1d509}","ffr":"\u{1d523}","filig":"\ufb01","FilledSmallSquare":"\u25fc","FilledVerySmallSquare":"\u25aa","fjlig":"fj","flat":"\u266d","fllig":"\ufb02","fltns":"\u25b1","fnof":"\u0192","Fopf":"\u{1d53d}","fopf":"\u{1d557}","forall":"\u2200","ForAll":"\u2200","fork":"\u22d4","forkv":"\u2ad9","Fouriertrf":"\u2131","fpartint":"\u2a0d","frac12":"\xbd","frac13":"\u2153","frac14":"\xbc","frac15":"\u2155","frac16":"\u2159","frac18":"\u215b","frac23":"\u2154","frac25":"\u2156","frac34":"\xbe","frac35":"\u2157","frac38":"\u215c","frac45":"\u2158","frac56":"\u215a","frac58":"\u215d","frac78":"\u215e","frasl":"\u2044","frown":"\u2322","fscr":"\u{1d4bb}","Fscr":"\u2131","gacute":"\u01f5","Gamma":"\u0393","gamma":"\u03b3","Gammad":"\u03dc","gammad":"\u03dd","gap":"\u2a86","Gbreve":"\u011e","gbreve":"\u011f","Gcedil":"\u0122","Gcirc":"\u011c","gcirc":"\u011d","Gcy":"\u0413","gcy":"\u0433","Gdot":"\u0120","gdot":"\u0121","ge":"\u2265","gE":"\u2267","gEl":"\u2a8c","gel":"\u22db","geq":"\u2265","geqq":"\u2267","geqslant":"\u2a7e","gescc":"\u2aa9","ges":"\u2a7e","gesdot":"\u2a80","gesdoto":"\u2a82","gesdotol":"\u2a84","gesl":"\u22db\ufe00","gesles":"\u2a94","Gfr":"\u{1d50a}","gfr":"\u{1d524}","gg":"\u226b","Gg":"\u22d9","ggg":"\u22d9","gimel":"\u2137","GJcy":"\u0403","gjcy":"\u0453","gla":"\u2aa5","gl":"\u2277","glE":"\u2a92","glj":"\u2aa4","gnap":"\u2a8a","gnapprox":"\u2a8a","gne":"\u2a88","gnE":"\u2269","gneq":"\u2a88","gneqq":"\u2269","gnsim":"\u22e7","Gopf":"\u{1d53e}","gopf":"\u{1d558}","grave":"`","GreaterEqual":"\u2265","GreaterEqualLess":"\u22db","GreaterFullEqual":"\u2267","GreaterGreater":"\u2aa2","GreaterLess":"\u2277","GreaterSlantEqual":"\u2a7e","GreaterTilde":"\u2273","Gscr":"\u{1d4a2}","gscr":"\u210a","gsim":"\u2273","gsime":"\u2a8e","gsiml":"\u2a90","gtcc":"\u2aa7","gtcir":"\u2a7a","gt":">","GT":">","Gt":"\u226b","gtdot":"\u22d7","gtlPar":"\u2995","gtquest":"\u2a7c","gtrapprox":"\u2a86","gtrarr":"\u2978","gtrdot":"\u22d7","gtreqless":"\u22db","gtreqqless":"\u2a8c","gtrless":"\u2277","gtrsim":"\u2273","gvertneqq":"\u2269\ufe00","gvnE":"\u2269\ufe00","Hacek":"\u02c7","hairsp":"\u200a","half":"\xbd","hamilt":"\u210b","HARDcy":"\u042a","hardcy":"\u044a","harrcir":"\u2948","harr":"\u2194","hArr":"\u21d4","harrw":"\u21ad","Hat":"^","hbar":"\u210f","Hcirc":"\u0124","hcirc":"\u0125","hearts":"\u2665","heartsuit":"\u2665","hellip":"\u2026","hercon":"\u22b9","hfr":"\u{1d525}","Hfr":"\u210c","HilbertSpace":"\u210b","hksearow":"\u2925","hkswarow":"\u2926","hoarr":"\u21ff","homtht":"\u223b","hookleftarrow":"\u21a9","hookrightarrow":"\u21aa","hopf":"\u{1d559}","Hopf":"\u210d","horbar":"\u2015","HorizontalLine":"\u2500","hscr":"\u{1d4bd}","Hscr":"\u210b","hslash":"\u210f","Hstrok":"\u0126","hstrok":"\u0127","HumpDownHump":"\u224e","HumpEqual":"\u224f","hybull":"\u2043","hyphen":"\u2010","Iacute":"\xcd","iacute":"\xed","ic":"\u2063","Icirc":"\xce","icirc":"\xee","Icy":"\u0418","icy":"\u0438","Idot":"\u0130","IEcy":"\u0415","iecy":"\u0435","iexcl":"\xa1","iff":"\u21d4","ifr":"\u{1d526}","Ifr":"\u2111","Igrave":"\xcc","igrave":"\xec","ii":"\u2148","iiiint":"\u2a0c","iiint":"\u222d","iinfin":"\u29dc","iiota":"\u2129","IJlig":"\u0132","ijlig":"\u0133","Imacr":"\u012a","imacr":"\u012b","image":"\u2111","ImaginaryI":"\u2148","imagline":"\u2110","imagpart":"\u2111","imath":"\u0131","Im":"\u2111","imof":"\u22b7","imped":"\u01b5","Implies":"\u21d2","incare":"\u2105","in":"\u2208","infin":"\u221e","infintie":"\u29dd","inodot":"\u0131","intcal":"\u22ba","int":"\u222b","Int":"\u222c","integers":"\u2124","Integral":"\u222b","intercal":"\u22ba","Intersection":"\u22c2","intlarhk":"\u2a17","intprod":"\u2a3c","InvisibleComma":"\u2063","InvisibleTimes":"\u2062","IOcy":"\u0401","iocy":"\u0451","Iogon":"\u012e","iogon":"\u012f","Iopf":"\u{1d540}","iopf":"\u{1d55a}","Iota":"\u0399","iota":"\u03b9","iprod":"\u2a3c","iquest":"\xbf","iscr":"\u{1d4be}","Iscr":"\u2110","isin":"\u2208","isindot":"\u22f5","isinE":"\u22f9","isins":"\u22f4","isinsv":"\u22f3","isinv":"\u2208","it":"\u2062","Itilde":"\u0128","itilde":"\u0129","Iukcy":"\u0406","iukcy":"\u0456","Iuml":"\xcf","iuml":"\xef","Jcirc":"\u0134","jcirc":"\u0135","Jcy":"\u0419","jcy":"\u0439","Jfr":"\u{1d50d}","jfr":"\u{1d527}","jmath":"\u0237","Jopf":"\u{1d541}","jopf":"\u{1d55b}","Jscr":"\u{1d4a5}","jscr":"\u{1d4bf}","Jsercy":"\u0408","jsercy":"\u0458","Jukcy":"\u0404","jukcy":"\u0454","Kappa":"\u039a","kappa":"\u03ba","kappav":"\u03f0","Kcedil":"\u0136","kcedil":"\u0137","Kcy":"\u041a","kcy":"\u043a","Kfr":"\u{1d50e}","kfr":"\u{1d528}","kgreen":"\u0138","KHcy":"\u0425","khcy":"\u0445","KJcy":"\u040c","kjcy":"\u045c","Kopf":"\u{1d542}","kopf":"\u{1d55c}","Kscr":"\u{1d4a6}","kscr":"\u{1d4c0}","lAarr":"\u21da","Lacute":"\u0139","lacute":"\u013a","laemptyv":"\u29b4","lagran":"\u2112","Lambda":"\u039b","lambda":"\u03bb","lang":"\u27e8","Lang":"\u27ea","langd":"\u2991","langle":"\u27e8","lap":"\u2a85","Laplacetrf":"\u2112","laquo":"\xab","larrb":"\u21e4","larrbfs":"\u291f","larr":"\u2190","Larr":"\u219e","lArr":"\u21d0","larrfs":"\u291d","larrhk":"\u21a9","larrlp":"\u21ab","larrpl":"\u2939","larrsim":"\u2973","larrtl":"\u21a2","latail":"\u2919","lAtail":"\u291b","lat":"\u2aab","late":"\u2aad","lates":"\u2aad\ufe00","lbarr":"\u290c","lBarr":"\u290e","lbbrk":"\u2772","lbrace":"{","lbrack":"[","lbrke":"\u298b","lbrksld":"\u298f","lbrkslu":"\u298d","Lcaron":"\u013d","lcaron":"\u013e","Lcedil":"\u013b","lcedil":"\u013c","lceil":"\u2308","lcub":"{","Lcy":"\u041b","lcy":"\u043b","ldca":"\u2936","ldquo":"\u201c","ldquor":"\u201e","ldrdhar":"\u2967","ldrushar":"\u294b","ldsh":"\u21b2","le":"\u2264","lE":"\u2266","LeftAngleBracket":"\u27e8","LeftArrowBar":"\u21e4","leftarrow":"\u2190","LeftArrow":"\u2190","Leftarrow":"\u21d0","LeftArrowRightArrow":"\u21c6","leftarrowtail":"\u21a2","LeftCeiling":"\u2308","LeftDoubleBracket":"\u27e6","LeftDownTeeVector":"\u2961","LeftDownVectorBar":"\u2959","LeftDownVector":"\u21c3","LeftFloor":"\u230a","leftharpoondown":"\u21bd","leftharpoonup":"\u21bc","leftleftarrows":"\u21c7","leftrightarrow":"\u2194","LeftRightArrow":"\u2194","Leftrightarrow":"\u21d4","leftrightarrows":"\u21c6","leftrightharpoons":"\u21cb","leftrightsquigarrow":"\u21ad","LeftRightVector":"\u294e","LeftTeeArrow":"\u21a4","LeftTee":"\u22a3","LeftTeeVector":"\u295a","leftthreetimes":"\u22cb","LeftTriangleBar":"\u29cf","LeftTriangle":"\u22b2","LeftTriangleEqual":"\u22b4","LeftUpDownVector":"\u2951","LeftUpTeeVector":"\u2960","LeftUpVectorBar":"\u2958","LeftUpVector":"\u21bf","LeftVectorBar":"\u2952","LeftVector":"\u21bc","lEg":"\u2a8b","leg":"\u22da","leq":"\u2264","leqq":"\u2266","leqslant":"\u2a7d","lescc":"\u2aa8","les":"\u2a7d","lesdot":"\u2a7f","lesdoto":"\u2a81","lesdotor":"\u2a83","lesg":"\u22da\ufe00","lesges":"\u2a93","lessapprox":"\u2a85","lessdot":"\u22d6","lesseqgtr":"\u22da","lesseqqgtr":"\u2a8b","LessEqualGreater":"\u22da","LessFullEqual":"\u2266","LessGreater":"\u2276","lessgtr":"\u2276","LessLess":"\u2aa1","lesssim":"\u2272","LessSlantEqual":"\u2a7d","LessTilde":"\u2272","lfisht":"\u297c","lfloor":"\u230a","Lfr":"\u{1d50f}","lfr":"\u{1d529}","lg":"\u2276","lgE":"\u2a91","lHar":"\u2962","lhard":"\u21bd","lharu":"\u21bc","lharul":"\u296a","lhblk":"\u2584","LJcy":"\u0409","ljcy":"\u0459","llarr":"\u21c7","ll":"\u226a","Ll":"\u22d8","llcorner":"\u231e","Lleftarrow":"\u21da","llhard":"\u296b","lltri":"\u25fa","Lmidot":"\u013f","lmidot":"\u0140","lmoustache":"\u23b0","lmoust":"\u23b0","lnap":"\u2a89","lnapprox":"\u2a89","lne":"\u2a87","lnE":"\u2268","lneq":"\u2a87","lneqq":"\u2268","lnsim":"\u22e6","loang":"\u27ec","loarr":"\u21fd","lobrk":"\u27e6","longleftarrow":"\u27f5","LongLeftArrow":"\u27f5","Longleftarrow":"\u27f8","longleftrightarrow":"\u27f7","LongLeftRightArrow":"\u27f7","Longleftrightarrow":"\u27fa","longmapsto":"\u27fc","longrightarrow":"\u27f6","LongRightArrow":"\u27f6","Longrightarrow":"\u27f9","looparrowleft":"\u21ab","looparrowright":"\u21ac","lopar":"\u2985","Lopf":"\u{1d543}","lopf":"\u{1d55d}","loplus":"\u2a2d","lotimes":"\u2a34","lowast":"\u2217","lowbar":"_","LowerLeftArrow":"\u2199","LowerRightArrow":"\u2198","loz":"\u25ca","lozenge":"\u25ca","lozf":"\u29eb","lpar":"(","lparlt":"\u2993","lrarr":"\u21c6","lrcorner":"\u231f","lrhar":"\u21cb","lrhard":"\u296d","lrm":"\u200e","lrtri":"\u22bf","lsaquo":"\u2039","lscr":"\u{1d4c1}","Lscr":"\u2112","lsh":"\u21b0","Lsh":"\u21b0","lsim":"\u2272","lsime":"\u2a8d","lsimg":"\u2a8f","lsqb":"[","lsquo":"\u2018","lsquor":"\u201a","Lstrok":"\u0141","lstrok":"\u0142","ltcc":"\u2aa6","ltcir":"\u2a79","lt":"<","LT":"<","Lt":"\u226a","ltdot":"\u22d6","lthree":"\u22cb","ltimes":"\u22c9","ltlarr":"\u2976","ltquest":"\u2a7b","ltri":"\u25c3","ltrie":"\u22b4","ltrif":"\u25c2","ltrPar":"\u2996","lurdshar":"\u294a","luruhar":"\u2966","lvertneqq":"\u2268\ufe00","lvnE":"\u2268\ufe00","macr":"\xaf","male":"\u2642","malt":"\u2720","maltese":"\u2720","Map":"\u2905","map":"\u21a6","mapsto":"\u21a6","mapstodown":"\u21a7","mapstoleft":"\u21a4","mapstoup":"\u21a5","marker":"\u25ae","mcomma":"\u2a29","Mcy":"\u041c","mcy":"\u043c","mdash":"\u2014","mDDot":"\u223a","measuredangle":"\u2221","MediumSpace":"\u205f","Mellintrf":"\u2133","Mfr":"\u{1d510}","mfr":"\u{1d52a}","mho":"\u2127","micro":"\xb5","midast":"*","midcir":"\u2af0","mid":"\u2223","middot":"\xb7","minusb":"\u229f","minus":"\u2212","minusd":"\u2238","minusdu":"\u2a2a","MinusPlus":"\u2213","mlcp":"\u2adb","mldr":"\u2026","mnplus":"\u2213","models":"\u22a7","Mopf":"\u{1d544}","mopf":"\u{1d55e}","mp":"\u2213","mscr":"\u{1d4c2}","Mscr":"\u2133","mstpos":"\u223e","Mu":"\u039c","mu":"\u03bc","multimap":"\u22b8","mumap":"\u22b8","nabla":"\u2207","Nacute":"\u0143","nacute":"\u0144","nang":"\u2220\u20d2","nap":"\u2249","napE":"\u2a70\u0338","napid":"\u224b\u0338","napos":"\u0149","napprox":"\u2249","natural":"\u266e","naturals":"\u2115","natur":"\u266e","nbsp":"\xa0","nbump":"\u224e\u0338","nbumpe":"\u224f\u0338","ncap":"\u2a43","Ncaron":"\u0147","ncaron":"\u0148","Ncedil":"\u0145","ncedil":"\u0146","ncong":"\u2247","ncongdot":"\u2a6d\u0338","ncup":"\u2a42","Ncy":"\u041d","ncy":"\u043d","ndash":"\u2013","nearhk":"\u2924","nearr":"\u2197","neArr":"\u21d7","nearrow":"\u2197","ne":"\u2260","nedot":"\u2250\u0338","NegativeMediumSpace":"\u200b","NegativeThickSpace":"\u200b","NegativeThinSpace":"\u200b","NegativeVeryThinSpace":"\u200b","nequiv":"\u2262","nesear":"\u2928","nesim":"\u2242\u0338","NestedGreaterGreater":"\u226b","NestedLessLess":"\u226a","NewLine":"\\n","nexist":"\u2204","nexists":"\u2204","Nfr":"\u{1d511}","nfr":"\u{1d52b}","ngE":"\u2267\u0338","nge":"\u2271","ngeq":"\u2271","ngeqq":"\u2267\u0338","ngeqslant":"\u2a7e\u0338","nges":"\u2a7e\u0338","nGg":"\u22d9\u0338","ngsim":"\u2275","nGt":"\u226b\u20d2","ngt":"\u226f","ngtr":"\u226f","nGtv":"\u226b\u0338","nharr":"\u21ae","nhArr":"\u21ce","nhpar":"\u2af2","ni":"\u220b","nis":"\u22fc","nisd":"\u22fa","niv":"\u220b","NJcy":"\u040a","njcy":"\u045a","nlarr":"\u219a","nlArr":"\u21cd","nldr":"\u2025","nlE":"\u2266\u0338","nle":"\u2270","nleftarrow":"\u219a","nLeftarrow":"\u21cd","nleftrightarrow":"\u21ae","nLeftrightarrow":"\u21ce","nleq":"\u2270","nleqq":"\u2266\u0338","nleqslant":"\u2a7d\u0338","nles":"\u2a7d\u0338","nless":"\u226e","nLl":"\u22d8\u0338","nlsim":"\u2274","nLt":"\u226a\u20d2","nlt":"\u226e","nltri":"\u22ea","nltrie":"\u22ec","nLtv":"\u226a\u0338","nmid":"\u2224","NoBreak":"\u2060","NonBreakingSpace":"\xa0","nopf":"\u{1d55f}","Nopf":"\u2115","Not":"\u2aec","not":"\xac","NotCongruent":"\u2262","NotCupCap":"\u226d","NotDoubleVerticalBar":"\u2226","NotElement":"\u2209","NotEqual":"\u2260","NotEqualTilde":"\u2242\u0338","NotExists":"\u2204","NotGreater":"\u226f","NotGreaterEqual":"\u2271","NotGreaterFullEqual":"\u2267\u0338","NotGreaterGreater":"\u226b\u0338","NotGreaterLess":"\u2279","NotGreaterSlantEqual":"\u2a7e\u0338","NotGreaterTilde":"\u2275","NotHumpDownHump":"\u224e\u0338","NotHumpEqual":"\u224f\u0338","notin":"\u2209","notindot":"\u22f5\u0338","notinE":"\u22f9\u0338","notinva":"\u2209","notinvb":"\u22f7","notinvc":"\u22f6","NotLeftTriangleBar":"\u29cf\u0338","NotLeftTriangle":"\u22ea","NotLeftTriangleEqual":"\u22ec","NotLess":"\u226e","NotLessEqual":"\u2270","NotLessGreater":"\u2278","NotLessLess":"\u226a\u0338","NotLessSlantEqual":"\u2a7d\u0338","NotLessTilde":"\u2274","NotNestedGreaterGreater":"\u2aa2\u0338","NotNestedLessLess":"\u2aa1\u0338","notni":"\u220c","notniva":"\u220c","notnivb":"\u22fe","notnivc":"\u22fd","NotPrecedes":"\u2280","NotPrecedesEqual":"\u2aaf\u0338","NotPrecedesSlantEqual":"\u22e0","NotReverseElement":"\u220c","NotRightTriangleBar":"\u29d0\u0338","NotRightTriangle":"\u22eb","NotRightTriangleEqual":"\u22ed","NotSquareSubset":"\u228f\u0338","NotSquareSubsetEqual":"\u22e2","NotSquareSuperset":"\u2290\u0338","NotSquareSupersetEqual":"\u22e3","NotSubset":"\u2282\u20d2","NotSubsetEqual":"\u2288","NotSucceeds":"\u2281","NotSucceedsEqual":"\u2ab0\u0338","NotSucceedsSlantEqual":"\u22e1","NotSucceedsTilde":"\u227f\u0338","NotSuperset":"\u2283\u20d2","NotSupersetEqual":"\u2289","NotTilde":"\u2241","NotTildeEqual":"\u2244","NotTildeFullEqual":"\u2247","NotTildeTilde":"\u2249","NotVerticalBar":"\u2224","nparallel":"\u2226","npar":"\u2226","nparsl":"\u2afd\u20e5","npart":"\u2202\u0338","npolint":"\u2a14","npr":"\u2280","nprcue":"\u22e0","nprec":"\u2280","npreceq":"\u2aaf\u0338","npre":"\u2aaf\u0338","nrarrc":"\u2933\u0338","nrarr":"\u219b","nrArr":"\u21cf","nrarrw":"\u219d\u0338","nrightarrow":"\u219b","nRightarrow":"\u21cf","nrtri":"\u22eb","nrtrie":"\u22ed","nsc":"\u2281","nsccue":"\u22e1","nsce":"\u2ab0\u0338","Nscr":"\u{1d4a9}","nscr":"\u{1d4c3}","nshortmid":"\u2224","nshortparallel":"\u2226","nsim":"\u2241","nsime":"\u2244","nsimeq":"\u2244","nsmid":"\u2224","nspar":"\u2226","nsqsube":"\u22e2","nsqsupe":"\u22e3","nsub":"\u2284","nsubE":"\u2ac5\u0338","nsube":"\u2288","nsubset":"\u2282\u20d2","nsubseteq":"\u2288","nsubseteqq":"\u2ac5\u0338","nsucc":"\u2281","nsucceq":"\u2ab0\u0338","nsup":"\u2285","nsupE":"\u2ac6\u0338","nsupe":"\u2289","nsupset":"\u2283\u20d2","nsupseteq":"\u2289","nsupseteqq":"\u2ac6\u0338","ntgl":"\u2279","Ntilde":"\xd1","ntilde":"\xf1","ntlg":"\u2278","ntriangleleft":"\u22ea","ntrianglelefteq":"\u22ec","ntriangleright":"\u22eb","ntrianglerighteq":"\u22ed","Nu":"\u039d","nu":"\u03bd","num":"#","numero":"\u2116","numsp":"\u2007","nvap":"\u224d\u20d2","nvdash":"\u22ac","nvDash":"\u22ad","nVdash":"\u22ae","nVDash":"\u22af","nvge":"\u2265\u20d2","nvgt":">\u20d2","nvHarr":"\u2904","nvinfin":"\u29de","nvlArr":"\u2902","nvle":"\u2264\u20d2","nvlt":"<\u20d2","nvltrie":"\u22b4\u20d2","nvrArr":"\u2903","nvrtrie":"\u22b5\u20d2","nvsim":"\u223c\u20d2","nwarhk":"\u2923","nwarr":"\u2196","nwArr":"\u21d6","nwarrow":"\u2196","nwnear":"\u2927","Oacute":"\xd3","oacute":"\xf3","oast":"\u229b","Ocirc":"\xd4","ocirc":"\xf4","ocir":"\u229a","Ocy":"\u041e","ocy":"\u043e","odash":"\u229d","Odblac":"\u0150","odblac":"\u0151","odiv":"\u2a38","odot":"\u2299","odsold":"\u29bc","OElig":"\u0152","oelig":"\u0153","ofcir":"\u29bf","Ofr":"\u{1d512}","ofr":"\u{1d52c}","ogon":"\u02db","Ograve":"\xd2","ograve":"\xf2","ogt":"\u29c1","ohbar":"\u29b5","ohm":"\u03a9","oint":"\u222e","olarr":"\u21ba","olcir":"\u29be","olcross":"\u29bb","oline":"\u203e","olt":"\u29c0","Omacr":"\u014c","omacr":"\u014d","Omega":"\u03a9","omega":"\u03c9","Omicron":"\u039f","omicron":"\u03bf","omid":"\u29b6","ominus":"\u2296","Oopf":"\u{1d546}","oopf":"\u{1d560}","opar":"\u29b7","OpenCurlyDoubleQuote":"\u201c","OpenCurlyQuote":"\u2018","operp":"\u29b9","oplus":"\u2295","orarr":"\u21bb","Or":"\u2a54","or":"\u2228","ord":"\u2a5d","order":"\u2134","orderof":"\u2134","ordf":"\xaa","ordm":"\xba","origof":"\u22b6","oror":"\u2a56","orslope":"\u2a57","orv":"\u2a5b","oS":"\u24c8","Oscr":"\u{1d4aa}","oscr":"\u2134","Oslash":"\xd8","oslash":"\xf8","osol":"\u2298","Otilde":"\xd5","otilde":"\xf5","otimesas":"\u2a36","Otimes":"\u2a37","otimes":"\u2297","Ouml":"\xd6","ouml":"\xf6","ovbar":"\u233d","OverBar":"\u203e","OverBrace":"\u23de","OverBracket":"\u23b4","OverParenthesis":"\u23dc","para":"\xb6","parallel":"\u2225","par":"\u2225","parsim":"\u2af3","parsl":"\u2afd","part":"\u2202","PartialD":"\u2202","Pcy":"\u041f","pcy":"\u043f","percnt":"%","period":".","permil":"\u2030","perp":"\u22a5","pertenk":"\u2031","Pfr":"\u{1d513}","pfr":"\u{1d52d}","Phi":"\u03a6","phi":"\u03c6","phiv":"\u03d5","phmmat":"\u2133","phone":"\u260e","Pi":"\u03a0","pi":"\u03c0","pitchfork":"\u22d4","piv":"\u03d6","planck":"\u210f","planckh":"\u210e","plankv":"\u210f","plusacir":"\u2a23","plusb":"\u229e","pluscir":"\u2a22","plus":"+","plusdo":"\u2214","plusdu":"\u2a25","pluse":"\u2a72","PlusMinus":"\xb1","plusmn":"\xb1","plussim":"\u2a26","plustwo":"\u2a27","pm":"\xb1","Poincareplane":"\u210c","pointint":"\u2a15","popf":"\u{1d561}","Popf":"\u2119","pound":"\xa3","prap":"\u2ab7","Pr":"\u2abb","pr":"\u227a","prcue":"\u227c","precapprox":"\u2ab7","prec":"\u227a","preccurlyeq":"\u227c","Precedes":"\u227a","PrecedesEqual":"\u2aaf","PrecedesSlantEqual":"\u227c","PrecedesTilde":"\u227e","preceq":"\u2aaf","precnapprox":"\u2ab9","precneqq":"\u2ab5","precnsim":"\u22e8","pre":"\u2aaf","prE":"\u2ab3","precsim":"\u227e","prime":"\u2032","Prime":"\u2033","primes":"\u2119","prnap":"\u2ab9","prnE":"\u2ab5","prnsim":"\u22e8","prod":"\u220f","Product":"\u220f","profalar":"\u232e","profline":"\u2312","profsurf":"\u2313","prop":"\u221d","Proportional":"\u221d","Proportion":"\u2237","propto":"\u221d","prsim":"\u227e","prurel":"\u22b0","Pscr":"\u{1d4ab}","pscr":"\u{1d4c5}","Psi":"\u03a8","psi":"\u03c8","puncsp":"\u2008","Qfr":"\u{1d514}","qfr":"\u{1d52e}","qint":"\u2a0c","qopf":"\u{1d562}","Qopf":"\u211a","qprime":"\u2057","Qscr":"\u{1d4ac}","qscr":"\u{1d4c6}","quaternions":"\u210d","quatint":"\u2a16","quest":"?","questeq":"\u225f","quot":"\\"","QUOT":"\\"","rAarr":"\u21db","race":"\u223d\u0331","Racute":"\u0154","racute":"\u0155","radic":"\u221a","raemptyv":"\u29b3","rang":"\u27e9","Rang":"\u27eb","rangd":"\u2992","range":"\u29a5","rangle":"\u27e9","raquo":"\xbb","rarrap":"\u2975","rarrb":"\u21e5","rarrbfs":"\u2920","rarrc":"\u2933","rarr":"\u2192","Rarr":"\u21a0","rArr":"\u21d2","rarrfs":"\u291e","rarrhk":"\u21aa","rarrlp":"\u21ac","rarrpl":"\u2945","rarrsim":"\u2974","Rarrtl":"\u2916","rarrtl":"\u21a3","rarrw":"\u219d","ratail":"\u291a","rAtail":"\u291c","ratio":"\u2236","rationals":"\u211a","rbarr":"\u290d","rBarr":"\u290f","RBarr":"\u2910","rbbrk":"\u2773","rbrace":"}","rbrack":"]","rbrke":"\u298c","rbrksld":"\u298e","rbrkslu":"\u2990","Rcaron":"\u0158","rcaron":"\u0159","Rcedil":"\u0156","rcedil":"\u0157","rceil":"\u2309","rcub":"}","Rcy":"\u0420","rcy":"\u0440","rdca":"\u2937","rdldhar":"\u2969","rdquo":"\u201d","rdquor":"\u201d","rdsh":"\u21b3","real":"\u211c","realine":"\u211b","realpart":"\u211c","reals":"\u211d","Re":"\u211c","rect":"\u25ad","reg":"\xae","REG":"\xae","ReverseElement":"\u220b","ReverseEquilibrium":"\u21cb","ReverseUpEquilibrium":"\u296f","rfisht":"\u297d","rfloor":"\u230b","rfr":"\u{1d52f}","Rfr":"\u211c","rHar":"\u2964","rhard":"\u21c1","rharu":"\u21c0","rharul":"\u296c","Rho":"\u03a1","rho":"\u03c1","rhov":"\u03f1","RightAngleBracket":"\u27e9","RightArrowBar":"\u21e5","rightarrow":"\u2192","RightArrow":"\u2192","Rightarrow":"\u21d2","RightArrowLeftArrow":"\u21c4","rightarrowtail":"\u21a3","RightCeiling":"\u2309","RightDoubleBracket":"\u27e7","RightDownTeeVector":"\u295d","RightDownVectorBar":"\u2955","RightDownVector":"\u21c2","RightFloor":"\u230b","rightharpoondown":"\u21c1","rightharpoonup":"\u21c0","rightleftarrows":"\u21c4","rightleftharpoons":"\u21cc","rightrightarrows":"\u21c9","rightsquigarrow":"\u219d","RightTeeArrow":"\u21a6","RightTee":"\u22a2","RightTeeVector":"\u295b","rightthreetimes":"\u22cc","RightTriangleBar":"\u29d0","RightTriangle":"\u22b3","RightTriangleEqual":"\u22b5","RightUpDownVector":"\u294f","RightUpTeeVector":"\u295c","RightUpVectorBar":"\u2954","RightUpVector":"\u21be","RightVectorBar":"\u2953","RightVector":"\u21c0","ring":"\u02da","risingdotseq":"\u2253","rlarr":"\u21c4","rlhar":"\u21cc","rlm":"\u200f","rmoustache":"\u23b1","rmoust":"\u23b1","rnmid":"\u2aee","roang":"\u27ed","roarr":"\u21fe","robrk":"\u27e7","ropar":"\u2986","ropf":"\u{1d563}","Ropf":"\u211d","roplus":"\u2a2e","rotimes":"\u2a35","RoundImplies":"\u2970","rpar":")","rpargt":"\u2994","rppolint":"\u2a12","rrarr":"\u21c9","Rrightarrow":"\u21db","rsaquo":"\u203a","rscr":"\u{1d4c7}","Rscr":"\u211b","rsh":"\u21b1","Rsh":"\u21b1","rsqb":"]","rsquo":"\u2019","rsquor":"\u2019","rthree":"\u22cc","rtimes":"\u22ca","rtri":"\u25b9","rtrie":"\u22b5","rtrif":"\u25b8","rtriltri":"\u29ce","RuleDelayed":"\u29f4","ruluhar":"\u2968","rx":"\u211e","Sacute":"\u015a","sacute":"\u015b","sbquo":"\u201a","scap":"\u2ab8","Scaron":"\u0160","scaron":"\u0161","Sc":"\u2abc","sc":"\u227b","sccue":"\u227d","sce":"\u2ab0","scE":"\u2ab4","Scedil":"\u015e","scedil":"\u015f","Scirc":"\u015c","scirc":"\u015d","scnap":"\u2aba","scnE":"\u2ab6","scnsim":"\u22e9","scpolint":"\u2a13","scsim":"\u227f","Scy":"\u0421","scy":"\u0441","sdotb":"\u22a1","sdot":"\u22c5","sdote":"\u2a66","searhk":"\u2925","searr":"\u2198","seArr":"\u21d8","searrow":"\u2198","sect":"\xa7","semi":";","seswar":"\u2929","setminus":"\u2216","setmn":"\u2216","sext":"\u2736","Sfr":"\u{1d516}","sfr":"\u{1d530}","sfrown":"\u2322","sharp":"\u266f","SHCHcy":"\u0429","shchcy":"\u0449","SHcy":"\u0428","shcy":"\u0448","ShortDownArrow":"\u2193","ShortLeftArrow":"\u2190","shortmid":"\u2223","shortparallel":"\u2225","ShortRightArrow":"\u2192","ShortUpArrow":"\u2191","shy":"\xad","Sigma":"\u03a3","sigma":"\u03c3","sigmaf":"\u03c2","sigmav":"\u03c2","sim":"\u223c","simdot":"\u2a6a","sime":"\u2243","simeq":"\u2243","simg":"\u2a9e","simgE":"\u2aa0","siml":"\u2a9d","simlE":"\u2a9f","simne":"\u2246","simplus":"\u2a24","simrarr":"\u2972","slarr":"\u2190","SmallCircle":"\u2218","smallsetminus":"\u2216","smashp":"\u2a33","smeparsl":"\u29e4","smid":"\u2223","smile":"\u2323","smt":"\u2aaa","smte":"\u2aac","smtes":"\u2aac\ufe00","SOFTcy":"\u042c","softcy":"\u044c","solbar":"\u233f","solb":"\u29c4","sol":"/","Sopf":"\u{1d54a}","sopf":"\u{1d564}","spades":"\u2660","spadesuit":"\u2660","spar":"\u2225","sqcap":"\u2293","sqcaps":"\u2293\ufe00","sqcup":"\u2294","sqcups":"\u2294\ufe00","Sqrt":"\u221a","sqsub":"\u228f","sqsube":"\u2291","sqsubset":"\u228f","sqsubseteq":"\u2291","sqsup":"\u2290","sqsupe":"\u2292","sqsupset":"\u2290","sqsupseteq":"\u2292","square":"\u25a1","Square":"\u25a1","SquareIntersection":"\u2293","SquareSubset":"\u228f","SquareSubsetEqual":"\u2291","SquareSuperset":"\u2290","SquareSupersetEqual":"\u2292","SquareUnion":"\u2294","squarf":"\u25aa","squ":"\u25a1","squf":"\u25aa","srarr":"\u2192","Sscr":"\u{1d4ae}","sscr":"\u{1d4c8}","ssetmn":"\u2216","ssmile":"\u2323","sstarf":"\u22c6","Star":"\u22c6","star":"\u2606","starf":"\u2605","straightepsilon":"\u03f5","straightphi":"\u03d5","strns":"\xaf","sub":"\u2282","Sub":"\u22d0","subdot":"\u2abd","subE":"\u2ac5","sube":"\u2286","subedot":"\u2ac3","submult":"\u2ac1","subnE":"\u2acb","subne":"\u228a","subplus":"\u2abf","subrarr":"\u2979","subset":"\u2282","Subset":"\u22d0","subseteq":"\u2286","subseteqq":"\u2ac5","SubsetEqual":"\u2286","subsetneq":"\u228a","subsetneqq":"\u2acb","subsim":"\u2ac7","subsub":"\u2ad5","subsup":"\u2ad3","succapprox":"\u2ab8","succ":"\u227b","succcurlyeq":"\u227d","Succeeds":"\u227b","SucceedsEqual":"\u2ab0","SucceedsSlantEqual":"\u227d","SucceedsTilde":"\u227f","succeq":"\u2ab0","succnapprox":"\u2aba","succneqq":"\u2ab6","succnsim":"\u22e9","succsim":"\u227f","SuchThat":"\u220b","sum":"\u2211","Sum":"\u2211","sung":"\u266a","sup1":"\xb9","sup2":"\xb2","sup3":"\xb3","sup":"\u2283","Sup":"\u22d1","supdot":"\u2abe","supdsub":"\u2ad8","supE":"\u2ac6","supe":"\u2287","supedot":"\u2ac4","Superset":"\u2283","SupersetEqual":"\u2287","suphsol":"\u27c9","suphsub":"\u2ad7","suplarr":"\u297b","supmult":"\u2ac2","supnE":"\u2acc","supne":"\u228b","supplus":"\u2ac0","supset":"\u2283","Supset":"\u22d1","supseteq":"\u2287","supseteqq":"\u2ac6","supsetneq":"\u228b","supsetneqq":"\u2acc","supsim":"\u2ac8","supsub":"\u2ad4","supsup":"\u2ad6","swarhk":"\u2926","swarr":"\u2199","swArr":"\u21d9","swarrow":"\u2199","swnwar":"\u292a","szlig":"\xdf","Tab":"\\t","target":"\u2316","Tau":"\u03a4","tau":"\u03c4","tbrk":"\u23b4","Tcaron":"\u0164","tcaron":"\u0165","Tcedil":"\u0162","tcedil":"\u0163","Tcy":"\u0422","tcy":"\u0442","tdot":"\u20db","telrec":"\u2315","Tfr":"\u{1d517}","tfr":"\u{1d531}","there4":"\u2234","therefore":"\u2234","Therefore":"\u2234","Theta":"\u0398","theta":"\u03b8","thetasym":"\u03d1","thetav":"\u03d1","thickapprox":"\u2248","thicksim":"\u223c","ThickSpace":"\u205f\u200a","ThinSpace":"\u2009","thinsp":"\u2009","thkap":"\u2248","thksim":"\u223c","THORN":"\xde","thorn":"\xfe","tilde":"\u02dc","Tilde":"\u223c","TildeEqual":"\u2243","TildeFullEqual":"\u2245","TildeTilde":"\u2248","timesbar":"\u2a31","timesb":"\u22a0","times":"\xd7","timesd":"\u2a30","tint":"\u222d","toea":"\u2928","topbot":"\u2336","topcir":"\u2af1","top":"\u22a4","Topf":"\u{1d54b}","topf":"\u{1d565}","topfork":"\u2ada","tosa":"\u2929","tprime":"\u2034","trade":"\u2122","TRADE":"\u2122","triangle":"\u25b5","triangledown":"\u25bf","triangleleft":"\u25c3","trianglelefteq":"\u22b4","triangleq":"\u225c","triangleright":"\u25b9","trianglerighteq":"\u22b5","tridot":"\u25ec","trie":"\u225c","triminus":"\u2a3a","TripleDot":"\u20db","triplus":"\u2a39","trisb":"\u29cd","tritime":"\u2a3b","trpezium":"\u23e2","Tscr":"\u{1d4af}","tscr":"\u{1d4c9}","TScy":"\u0426","tscy":"\u0446","TSHcy":"\u040b","tshcy":"\u045b","Tstrok":"\u0166","tstrok":"\u0167","twixt":"\u226c","twoheadleftarrow":"\u219e","twoheadrightarrow":"\u21a0","Uacute":"\xda","uacute":"\xfa","uarr":"\u2191","Uarr":"\u219f","uArr":"\u21d1","Uarrocir":"\u2949","Ubrcy":"\u040e","ubrcy":"\u045e","Ubreve":"\u016c","ubreve":"\u016d","Ucirc":"\xdb","ucirc":"\xfb","Ucy":"\u0423","ucy":"\u0443","udarr":"\u21c5","Udblac":"\u0170","udblac":"\u0171","udhar":"\u296e","ufisht":"\u297e","Ufr":"\u{1d518}","ufr":"\u{1d532}","Ugrave":"\xd9","ugrave":"\xf9","uHar":"\u2963","uharl":"\u21bf","uharr":"\u21be","uhblk":"\u2580","ulcorn":"\u231c","ulcorner":"\u231c","ulcrop":"\u230f","ultri":"\u25f8","Umacr":"\u016a","umacr":"\u016b","uml":"\xa8","UnderBar":"_","UnderBrace":"\u23df","UnderBracket":"\u23b5","UnderParenthesis":"\u23dd","Union":"\u22c3","UnionPlus":"\u228e","Uogon":"\u0172","uogon":"\u0173","Uopf":"\u{1d54c}","uopf":"\u{1d566}","UpArrowBar":"\u2912","uparrow":"\u2191","UpArrow":"\u2191","Uparrow":"\u21d1","UpArrowDownArrow":"\u21c5","updownarrow":"\u2195","UpDownArrow":"\u2195","Updownarrow":"\u21d5","UpEquilibrium":"\u296e","upharpoonleft":"\u21bf","upharpoonright":"\u21be","uplus":"\u228e","UpperLeftArrow":"\u2196","UpperRightArrow":"\u2197","upsi":"\u03c5","Upsi":"\u03d2","upsih":"\u03d2","Upsilon":"\u03a5","upsilon":"\u03c5","UpTeeArrow":"\u21a5","UpTee":"\u22a5","upuparrows":"\u21c8","urcorn":"\u231d","urcorner":"\u231d","urcrop":"\u230e","Uring":"\u016e","uring":"\u016f","urtri":"\u25f9","Uscr":"\u{1d4b0}","uscr":"\u{1d4ca}","utdot":"\u22f0","Utilde":"\u0168","utilde":"\u0169","utri":"\u25b5","utrif":"\u25b4","uuarr":"\u21c8","Uuml":"\xdc","uuml":"\xfc","uwangle":"\u29a7","vangrt":"\u299c","varepsilon":"\u03f5","varkappa":"\u03f0","varnothing":"\u2205","varphi":"\u03d5","varpi":"\u03d6","varpropto":"\u221d","varr":"\u2195","vArr":"\u21d5","varrho":"\u03f1","varsigma":"\u03c2","varsubsetneq":"\u228a\ufe00","varsubsetneqq":"\u2acb\ufe00","varsupsetneq":"\u228b\ufe00","varsupsetneqq":"\u2acc\ufe00","vartheta":"\u03d1","vartriangleleft":"\u22b2","vartriangleright":"\u22b3","vBar":"\u2ae8","Vbar":"\u2aeb","vBarv":"\u2ae9","Vcy":"\u0412","vcy":"\u0432","vdash":"\u22a2","vDash":"\u22a8","Vdash":"\u22a9","VDash":"\u22ab","Vdashl":"\u2ae6","veebar":"\u22bb","vee":"\u2228","Vee":"\u22c1","veeeq":"\u225a","vellip":"\u22ee","verbar":"|","Verbar":"\u2016","vert":"|","Vert":"\u2016","VerticalBar":"\u2223","VerticalLine":"|","VerticalSeparator":"\u2758","VerticalTilde":"\u2240","VeryThinSpace":"\u200a","Vfr":"\u{1d519}","vfr":"\u{1d533}","vltri":"\u22b2","vnsub":"\u2282\u20d2","vnsup":"\u2283\u20d2","Vopf":"\u{1d54d}","vopf":"\u{1d567}","vprop":"\u221d","vrtri":"\u22b3","Vscr":"\u{1d4b1}","vscr":"\u{1d4cb}","vsubnE":"\u2acb\ufe00","vsubne":"\u228a\ufe00","vsupnE":"\u2acc\ufe00","vsupne":"\u228b\ufe00","Vvdash":"\u22aa","vzigzag":"\u299a","Wcirc":"\u0174","wcirc":"\u0175","wedbar":"\u2a5f","wedge":"\u2227","Wedge":"\u22c0","wedgeq":"\u2259","weierp":"\u2118","Wfr":"\u{1d51a}","wfr":"\u{1d534}","Wopf":"\u{1d54e}","wopf":"\u{1d568}","wp":"\u2118","wr":"\u2240","wreath":"\u2240","Wscr":"\u{1d4b2}","wscr":"\u{1d4cc}","xcap":"\u22c2","xcirc":"\u25ef","xcup":"\u22c3","xdtri":"\u25bd","Xfr":"\u{1d51b}","xfr":"\u{1d535}","xharr":"\u27f7","xhArr":"\u27fa","Xi":"\u039e","xi":"\u03be","xlarr":"\u27f5","xlArr":"\u27f8","xmap":"\u27fc","xnis":"\u22fb","xodot":"\u2a00","Xopf":"\u{1d54f}","xopf":"\u{1d569}","xoplus":"\u2a01","xotime":"\u2a02","xrarr":"\u27f6","xrArr":"\u27f9","Xscr":"\u{1d4b3}","xscr":"\u{1d4cd}","xsqcup":"\u2a06","xuplus":"\u2a04","xutri":"\u25b3","xvee":"\u22c1","xwedge":"\u22c0","Yacute":"\xdd","yacute":"\xfd","YAcy":"\u042f","yacy":"\u044f","Ycirc":"\u0176","ycirc":"\u0177","Ycy":"\u042b","ycy":"\u044b","yen":"\xa5","Yfr":"\u{1d51c}","yfr":"\u{1d536}","YIcy":"\u0407","yicy":"\u0457","Yopf":"\u{1d550}","yopf":"\u{1d56a}","Yscr":"\u{1d4b4}","yscr":"\u{1d4ce}","YUcy":"\u042e","yucy":"\u044e","yuml":"\xff","Yuml":"\u0178","Zacute":"\u0179","zacute":"\u017a","Zcaron":"\u017d","zcaron":"\u017e","Zcy":"\u0417","zcy":"\u0437","Zdot":"\u017b","zdot":"\u017c","zeetrf":"\u2128","ZeroWidthSpace":"\u200b","Zeta":"\u0396","zeta":"\u03b6","zfr":"\u{1d537}","Zfr":"\u2128","ZHcy":"\u0416","zhcy":"\u0436","zigrarr":"\u21dd","zopf":"\u{1d56b}","Zopf":"\u2124","Zscr":"\u{1d4b5}","zscr":"\u{1d4cf}","zwj":"\u200d","zwnj":"\u200c"}')},2453:we=>{we.exports=JSON.parse('{"Aacute":"\xc1","aacute":"\xe1","Acirc":"\xc2","acirc":"\xe2","acute":"\xb4","AElig":"\xc6","aelig":"\xe6","Agrave":"\xc0","agrave":"\xe0","amp":"&","AMP":"&","Aring":"\xc5","aring":"\xe5","Atilde":"\xc3","atilde":"\xe3","Auml":"\xc4","auml":"\xe4","brvbar":"\xa6","Ccedil":"\xc7","ccedil":"\xe7","cedil":"\xb8","cent":"\xa2","copy":"\xa9","COPY":"\xa9","curren":"\xa4","deg":"\xb0","divide":"\xf7","Eacute":"\xc9","eacute":"\xe9","Ecirc":"\xca","ecirc":"\xea","Egrave":"\xc8","egrave":"\xe8","ETH":"\xd0","eth":"\xf0","Euml":"\xcb","euml":"\xeb","frac12":"\xbd","frac14":"\xbc","frac34":"\xbe","gt":">","GT":">","Iacute":"\xcd","iacute":"\xed","Icirc":"\xce","icirc":"\xee","iexcl":"\xa1","Igrave":"\xcc","igrave":"\xec","iquest":"\xbf","Iuml":"\xcf","iuml":"\xef","laquo":"\xab","lt":"<","LT":"<","macr":"\xaf","micro":"\xb5","middot":"\xb7","nbsp":"\xa0","not":"\xac","Ntilde":"\xd1","ntilde":"\xf1","Oacute":"\xd3","oacute":"\xf3","Ocirc":"\xd4","ocirc":"\xf4","Ograve":"\xd2","ograve":"\xf2","ordf":"\xaa","ordm":"\xba","Oslash":"\xd8","oslash":"\xf8","Otilde":"\xd5","otilde":"\xf5","Ouml":"\xd6","ouml":"\xf6","para":"\xb6","plusmn":"\xb1","pound":"\xa3","quot":"\\"","QUOT":"\\"","raquo":"\xbb","reg":"\xae","REG":"\xae","sect":"\xa7","shy":"\xad","sup1":"\xb9","sup2":"\xb2","sup3":"\xb3","szlig":"\xdf","THORN":"\xde","thorn":"\xfe","times":"\xd7","Uacute":"\xda","uacute":"\xfa","Ucirc":"\xdb","ucirc":"\xfb","Ugrave":"\xd9","ugrave":"\xf9","uml":"\xa8","Uuml":"\xdc","uuml":"\xfc","Yacute":"\xdd","yacute":"\xfd","yen":"\xa5","yuml":"\xff"}')},8161:we=>{we.exports=JSON.parse('{"amp":"&","apos":"\'","gt":">","lt":"<","quot":"\\""}')}}]);